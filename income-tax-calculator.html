<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg" />
<link rel="shortcut icon" href="https://calcdomain.com/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png" />
<link rel="manifest" href="https://calcdomain.com/site.webmanifest" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Income Tax Calculator - Progressive Tax Brackets</title>
<meta name="description" content="Calculate your estimated income tax based on progressive tax brackets. Understand how taxable income, deductions, and rates work with our clear, accessible calculator.">
<link rel="canonical" href="https://calcdomain.com/income-tax-calculator.html"https://calcdomain.com/>

<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
#results-chart-container { display: none !important; }
}
/* Custom Focus State - WCAG 2.1 AA */
:focus-visible {
outline: 3px solid #3b82f6;
outline-offset: 2px;
border-radius: 4px;
}
input:focus-visible, select:focus-visible, button:focus-visible {
outline-offset: 0;
}
/* Accessible Tooltip */
.tooltip-btn {
display: inline-flex;
align-items: center;
justify-content: center;
width: 20px;
height: 20px;
border-radius: 50%;
background: #e5e7eb;
color: #4b5563;
font-weight: bold;
border: 1px solid #9ca3af;
margin-left: 8px;
cursor: pointer;
}
.tooltip-text {
display: none;
background: #1f2937;
color: white;
padding: 10px;
border-radius: 6px;
font-size: 0.875rem;
margin-top: 6px;
position: relative;
z-index: 10;
width: 100%;
}
.tooltip-text.visible {
display: block;
}
/* Error Message */
.error-message {
display: none;
color: #dc2626;
font-size: 0.875rem;
margin-top: 4px;
}
input[aria-invalid="true"] {
border-color: #dc2626;
}
input[aria-invalid="true"]:focus-visible {
outline-color: #dc2626;
}
input[aria-invalid="true"] ~ .error-message {
display: block;
}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Income Tax Calculator",
  "description": "Estimate your income tax based on progressive tax brackets. Understand how taxable income, deductions, and rates work with our clear, accessible calculator.",
  "url": "https://calcdomain.com/income-tax-calculator.html",
  "inLanguage": "en",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain",
    "logo": {
      "@type": "ImageObject",
      "url": "https://calcdomain.com/logo.png"
    }
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Finance",
      "item": "https://calcdomain.com/finance.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Taxes",
      "item": "https://calcdomain.com/subcategories/taxes.html"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Income Tax Calculator",
      "item": "https://calcdomain.com/income-tax-calculator.html"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Income Tax Calculator",
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "Any",
  "browserRequirements": "Requires HTML5, CSS3, and JavaScript.",
  "description": "A free, accessible tool to calculate income tax based on user-defined progressive tax brackets.",
  "mainEntity": {
    "@type": "HowTo",
    "name": "How to Calculate Progressive Income Tax",
    "description": "A step-by-step guide to calculating your income tax liability using progressive tax brackets.",
    "step": [
      {
        "@type": "HowToStep",
        "name": "Enter Income",
        "text": "Input your total Gross Income for the period."
      },
      {
        "@type": "HowToStep",
        "name": "Enter Deductions",
        "text": "Input your total deductions (e.g., standard or itemized) to find your taxable income."
      },
      {
        "@type": "HowToStep",
        "name": "Define Tax Brackets",
        "text": "Enter the tax rates and their corresponding income limits ('Up to' amount) for your tax system. You can add or remove brackets as needed."
      },
      {
        "@type": "HowToStep",
        "name": "Calculate & Review",
        "text": "The calculator automatically computes your Total Tax, Net Income, Effective Tax Rate, and Marginal Tax Rate."
      }
    ]
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is the difference between marginal and effective tax rate?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Your Marginal Tax Rate is the tax rate you pay on your last dollar of income. It's the highest bracket your income falls into. Your Effective Tax Rate is your average tax rate, calculated as your Total Tax divided by your Gross Income."
      }
    },
    {
      "@type": "Question",
      "name": "What is a 'progressive' tax system?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A progressive tax system, like the one this calculator models, applies higher tax rates to higher levels of income. This is different from a 'flat tax' where everyone pays the same percentage, regardless of income."
      }
    },
    {
      "@type": "Question",
      "name": "What are tax deductions?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Deductions are expenses that you can subtract from your gross income to lower the amount of income that is subject to tax (your 'taxable income'). Common examples include standard deductions or itemized deductions like mortgage interest or charitable donations."
      }
    },
    {
      "@type": "Question",
      "name": "How are tax credits different from deductions?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This calculator models deductions, which reduce your taxable income. Tax credits are different: they are a dollar-for-dollar reduction of the actual tax you owe. For example, a $1,000 deduction might save you $220 (if you are in the 22% bracket), while a $1,000 tax credit saves you $1,000."
      }
    },
    {
      "@type": "Question",
      "name": "Is this calculator for a specific country (like the US, UK, or Canada)?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No. This is an educational tool designed to demonstrate the concept of a progressive tax system. The tax brackets are pre-filled with an illustrative example, but you can (and should) replace them with the specific brackets for your country, state, or region to get a more accurate estimate."
      }
    }
  ]
}
</script>

<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm sticky top-0 z-50">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..."
class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
<a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="finance.html" class="hover:text-blue-600">Finance</a> &raquo;
<a href="subcategories/taxes.html" class="hover:text-blue-600">Taxes</a> &raquo;
<span class="text-gray-900">Income Tax Calculator</span>
</nav>

<div id="sr-announcer" class="sr-only" aria-live="polite" aria-atomic="true"></div>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Income Tax Calculator</h1>
<p class="text-gray-600 mb-6">Estimate your income tax liability with this simple, educational calculator. It demonstrates how a progressive tax system works based on your gross income, deductions, and customizable tax brackets.
</p>

<section id="calculator-ui" aria-label="Income Tax Calculator Form">
<div class="space-y-6">
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<label for="grossIncome" class="block text-sm font-medium text-gray-700">
Gross Income <span class="text-red-500" aria-hidden="true">*</span>
</label>
<div class="mt-1 relative rounded-md shadow-sm">
<div class="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center">
<span class="text-gray-500 sm:text-sm">$</span>
</div>
<input type="number" id="grossIncome" value="75000" min="0" step="100"
class="block w-full px-3 py-2 pl-7 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true" aria-invalid="false" aria-describedby="grossIncome-error">
</div>
<div id="grossIncome-error" class="error-message" role="alert">Please enter a valid, non-negative income.</div>
</div>
<div>
<div class="flex items-center">
<label for="deductions" class="block text-sm font-medium text-gray-700">Deductions</label>
<button type="button" id="deductions-tooltip-btn" class="tooltip-btn" aria-label="About Deductions" aria-expanded="false" aria-controls="deductions-tooltip">?</button>
</div>
<div class="mt-1 relative rounded-md shadow-sm">
<div class="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center">
<span class="text-gray-500 sm:text-sm">$</span>
</div>
<input type="number" id="deductions" value="14600" min="0" step="50"
class="block w-full px-3 py-2 pl-7 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-invalid="false" aria-describedby="deductions-tooltip deductions-error">
</div>
<div id="deductions-tooltip" class="tooltip-text" role="tooltip" aria-hidden="true">
Enter your total deductions (e.g., standard or itemized) to lower your taxable income.
</div>
<div id="deductions-error" class="error-message" role="alert">Please enter a valid, non-negative deduction amount.</div>
</div>
</div>
<div>
<h3 class="text-lg font-medium text-gray-900">
Taxable Income:
<span id="taxableIncomeDisplay" class="font-bold text-blue-600">$60,400.00</span>
</h3>
<p class="text-sm text-gray-500">(Gross Income - Deductions)</p>
</div>

<div class="pt-4 border-t border-gray-200">
<h3 class="text-lg font-medium text-gray-900 mb-4">Tax Brackets</h3>
<p class="text-sm text-gray-500 mb-4">Define the progressive tax brackets. The 'Up to' amount defines the top of each bracket. The last bracket applies to all income above the previous limit.
</p>
<div id="bracket-container" class="space-y-4">
</div>
<div class="flex justify-between items-center mt-4">
<button type="button" id="add-bracket" class="text-sm font-medium text-blue-600 hover:text-blue-700">
+ Add Bracket
</button>
<button type="button" id="reset-brackets" class="text-sm font-medium text-gray-600 hover:text-gray-800">
Reset to Default
</button>
</div>
</div>
</div>
</section>

<section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6" aria-label="Calculation Results" style="min-height: 220px;">
<div class="flex flex-col md:flex-row gap-6">
<div class="w-full md:w-2/3 grid grid-cols-2 gap-4">
<div class="result-card">
<h4>Total Tax</h4>
<p id="totalTax">$0.00</p>
</div>
<div class="result-card">
<h4>Net Income</h4>
<p id="netIncome">$0.00</p>
</div>
<div class="result-card">
<h4>Effective Tax Rate</h4>
<p id="effectiveRate">0.00%</p>
</div>
<div class="result-card">
<h4>Marginal Tax Rate</h4>
<p id="marginalRate">0.00%</p>
</div>
</div>
<div class="w-full md:w-1/3">
<h4 class="text-sm font-medium text-gray-700 text-center mb-2">Income Breakdown</h4>
<div id="results-chart-container" class="h-40">
<canvas id="resultsChart" aria-label="Chart showing breakdown of net income and total tax"></canvas>
</div>
</div>
</div>
</section>
</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose prose-blue">
<h2>Data Source and Methodology</h2>
<p>This calculator computes income tax based on the principles of a **progressive (marginal) tax system**. The methodology is based on the fundamental framework used by tax authorities worldwide, suchin as the IRS (United States), HMRC (United Kingdom), and the ATO (Australia).</p>
<p>The brackets and rates provided by default are for illustrative purposes only and do not represent any specific country's 2024 or 2025 tax code. For an accurate financial calculation, you must input the specific brackets for your jurisdiction.</p>
<blockquote>
<p>All calculations are based strictly on the formulas and user-provided data. This tool is for educational purposes and does not constitute financial advice. Consult a qualified tax professional for guidance on your personal situation.</p>
</blockquote>

<h2>The Formula Explained</h2>
<p>In a progressive system, you don't pay your highest rate on all your income. Instead, your income is divided into "chunks" or "brackets," and each chunk is taxed at a different rate.</p>
<p>First, we determine your Taxable Income:</p>
<div class="formula-box">
$$ I_{\text{taxable}} = \text{Gross Income} - \text{Deductions} $$
</div>
<p>Next, we calculate the tax for each bracket. Let $B_i$ be the upper limit for bracket $i$, and $R_i$ be the rate for that bracket. The tax for any bracket $i$ ($T_i$) is calculated on the portion of income that falls *within* that bracket.</p>
<p>For a given taxable income $I_{\text{taxable}}$, the total tax $T_{\text{total}}$ is the sum of the tax from all brackets:</p>
<div class="formula-box">
$$ T_{\text{total}} = \sum_{i=1}^{n} T_i $$
</div>
<p>Where $T_i$ for a bracket from $B_{i-1}$ to $B_i$ (with $B_0 = 0$) is:</p>
<div class="formula-box">
$$ T_i = \max(0, \min(I_{\text{taxable}}, B_i) - B_{i-1}) \times R_i $$
</div>

<h2>Glossary of Variables</h2>
<dl class="space-y-4">
<div>
<dt class="font-semibold">Gross Income</dt>
<dd>Your total income from all sources *before* any deductions are taken.</dd>
</div>
<div>
<dt class="font-semibold">Deductions</dt>
<dd>Amounts you can subtract from your gross income to lower your taxable income. This can be a standard deduction or a sum of itemized deductions.</dd>
</div>
<div>
<dt class="font-semibold">Taxable Income</dt>
<dd>The portion of your income that is subject to tax. ( $ \text{Gross Income} - \text{Deductions} $ ).</dd>
</div>
<div>
<dt class="font-semibold">Tax Brackets</dt>
<dd>The ranges of income that are subject to a specific tax rate.</dd>
</div>
<div>
<dt class="font-semibold">Total Tax</dt>
<dd>The total amount of tax you owe, calculated by summing the tax from each bracket.</dd>
</div>
<div>
<dt class="font-semibold">Net Income</dt>
<dd>Your "take-home" pay *before* other withholdings (like insurance or retirement). ( $ \text{Gross Income} - \text{Total Tax} $ ).</dd>
</div>
<div>
<dt class="font-semibold">Effective Tax Rate</dt>
<dd>Your *average* tax rate. ( $ \text{Total Tax} / \text{Gross Income} $ ).</dd>
</div>
<div>
<dt class="font-semibold">Marginal Tax Rate</dt>
<dd>The tax rate applied to the *last dollar* you earned. This is simply the rate of the highest tax bracket your income falls into.</dd>
</div>
</dl>

<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's use a simple example to see the formula in action.</p>
<ul>
<li><strong>Gross Income:</strong> $60,000</li>
<li><strong>Deductions:</strong> $10,000</li>
<li><strong>Taxable Income:</strong> $50,000</li>
</ul>
<p>And these tax brackets:</p>
<ul>
<li><strong>Bracket 1:</strong> 10% on income up to $10,000</li>
<li><strong>Bracket 2:</strong> 20% on income over $10,000 up to $40,000</li>
<li><strong>Bracket 3:</strong> 30% on income over $40,000</li>
</ul>
<p>The calculation is <strong>not</strong> $50,000 \times 30\%$. It's done in pieces:</p>
<ol>
<li><strong>Tax on Bracket 1:</strong> The first $10,000 of income is taxed at 10%.
<br> $ $10,000 \times 0.10 = $1,000 $</li>
<li><strong>Tax on Bracket 2:</strong> The income between $10,001 and $40,000 (a $30,000 range) is taxed at 20%.
<br> $ $30,000 \times 0.20 = $6,000 $</li>
<li><strong>Tax on Bracket 3:</strong> The remaining income over $40,000 ($50,000 - $40,000 = $10,000) is taxed at 30%.
<br> $ $10,000 \times 0.30 = $3,000 $</li>
</ol>
<p><strong>Final Calculation:</strong></p>
<div class="formula-box">
$$ \text{Total Tax} = $1,000 + $6,000 + $3,000 = $10,000 $$
</div>
<ul>
<li><strong>Effective Tax Rate:</strong> $ $10,000 / $60,000 = 16.67\% $</li>
<li><strong>Marginal Tax Rate:</strong> 30% (the rate of the last bracket)</li>
</ul>

<h2>Frequently Asked Questions</h2>
<details>
<summary>What is the difference between marginal and effective tax rate?</summary>
<p>Your <strong>Marginal Tax Rate</strong> is the tax rate you pay on your last dollar of income. It's the highest bracket your income falls into. Your <strong>Effective Tax Rate</strong> is your average tax rate, calculated as your Total Tax divided by your Gross Income.</p>
</details>
<details>
<summary>What is a 'progressive' tax system?</summary>
<p>A progressive tax system, like the one this calculator models, applies higher tax rates to higher levels of income. This is different from a 'flat tax' where everyone pays the same percentage, regardless of income.</p>
</details>
<details>
<summary>What are tax deductions?</summary>
<p>Deductions are expenses that you can subtract from your gross income to lower the amount of income that is subject to tax (your 'taxable income'). Common examples include standard deductions or itemized deductions like mortgage interest or charitable donations.</p>
</details>
<details>
<summary>How are tax credits different from deductions?</summary>
<p>This calculator models deductions, which reduce your taxable income. Tax credits are different: they are a dollar-for-dollar reduction of the actual tax you owe. For example, a $1,000 deduction might save you $220 (if you are in the 22% bracket), while a $1,000 tax credit saves you $1,000.</p>
</details>
<details>
<summary>Is this calculator for a specific country (like the US, UK, or Canada)?</summary>
<p>No. This is an educational tool designed to demonstrate the concept of a progressive tax system. The tax brackets are pre-filled with an illustrative example, but you can (and should) replace them with the specific brackets for your country, state, or region to get a more accurate estimate.</p>
</details>

<div class="mt-8 pt-6 border-t border-gray-200 text-sm text-gray-600">
<p><strong>Tool developed by Ugo Candido.</strong> Finance content reviewed by the CalcDomain Editorial Board.<br>
Last accuracy review: <time datetime="2025-10-15">October 15, 2025</time></p>
</div>
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Understand how progressive tax systems *really* work.</li>
<li>Visualize your tax breakdown with an instant chart.</li>
<li>Model different scenarios by changing deductions or bracket rates.</li>
<li>Learn key concepts like marginal vs. effective tax rates.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Tax Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="sales-tax-calculator.html" class="text-blue-600 hover:underline">Sales Tax Calculator</a></li>
<li><a href="capital-gains-tax-calculator.html" class="text-blue-600 hover:underline">Capital Gains Tax Calculator</a></li>
<li><a href="payroll-deduction-calculator.html" class="text-blue-600 hover:underline">Payroll Deduction Calculator</a></li>
<li><a href="401k-calculator.html" class="text-blue-600 hover:underline">401(k) Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-white border-t">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="about.html" class="hover:text-blue-600">About</a>
<a href="contact.html" class="hover:text-blue-600">Contact</a>
<a href="privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

// --- Element Cache ---
const elements = {
grossIncome: document.getElementById('grossIncome'),
deductions: document.getElementById('deductions'),
taxableIncomeDisplay: document.getElementById('taxableIncomeDisplay'),
bracketContainer: document.getElementById('bracket-container'),
addBracketBtn: document.getElementById('add-bracket'),
resetBracketsBtn: document.getElementById('reset-brackets'),
deductionsTooltipBtn: document.getElementById('deductions-tooltip-btn'),
deductionsTooltip: document.getElementById('deductions-tooltip'),
totalTax: document.getElementById('totalTax'),
netIncome: document.getElementById('netIncome'),
effectiveRate: document.getElementById('effectiveRate'),
marginalRate: document.getElementById('marginalRate'),
srAnnouncer: document.getElementById('sr-announcer'),
};

let chartInstance = null;
let bracketCounter = 0;

// Default brackets (Illustrative example, e.g., simplified US-like)
const defaultBrackets = [
{ limit: 11600, rate: 10 },
{ limit: 47150, rate: 12 },
{ limit: 100525, rate: 22 },
{ limit: 191950, rate: 24 },
{ limit: 243725, rate: 32 },
{ limit: Infinity, rate: 35 } // 'Infinity' represents "and above"
];

// --- Formatters ---
const fmtCurrency = (val) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(val || 0);
const fmtPercent = (val) => new Intl.NumberFormat('en-US', { style: 'percent', minimumFractionDigits: 2 }).format(val || 0);

// --- Core Calculation Logic ---
function calculate() {
if (!validateAllInputs()) {
// If validation fails, update results to zero/default
updateOutputs(0, 0, 0, 0, 0);
return;
}

const grossIncome = parseFloat(elements.grossIncome.value) || 0;
const deductions = parseFloat(elements.deductions.value) || 0;
const taxableIncome = Math.max(0, grossIncome - deductions);

elements.taxableIncomeDisplay.textContent = fmtCurrency(taxableIncome);

let totalTax = 0;
let lastLimit = 0;
let marginalRate = 0;

const bracketInputs = Array.from(elements.bracketContainer.querySelectorAll('.bracket-row'));

for (const row of bracketInputs) {
const limitInput = row.querySelector('input[data-type="limit"]');
const rateInput = row.querySelector('input[data-type="rate"]');

const rate = parseFloat(rateInput.value) / 100 || 0;
let limit;

if (limitInput) {
limit = parseFloat(limitInput.value) || 0;
} else {
// This is the last ("over") bracket
limit = Infinity;
}

if (taxableIncome > lastLimit) {
marginalRate = rate; // Update marginal rate as we enter a bracket
const bracketRange = limit - lastLimit;
const incomeInThisBracket = Math.min(taxableIncome - lastLimit, bracketRange);
totalTax += incomeInThisBracket * rate;
}

lastLimit = limit;
if (taxableIncome <= limit) {
break; // Income has been fully taxed
}
}

const netIncome = grossIncome - totalTax;
const effectiveRate = grossIncome > 0 ? totalTax / grossIncome : 0;

updateOutputs(totalTax, netIncome, effectiveRate, marginalRate, grossIncome);
}

// --- UI Update Functions ---
function updateOutputs(totalTax, netIncome, effectiveRate, marginalRate, grossIncome) {
elements.totalTax.textContent = fmtCurrency(totalTax);
elements.netIncome.textContent = fmtCurrency(netIncome);
elements.effectiveRate.textContent = fmtPercent(effectiveRate);
elements.marginalRate.textContent = fmtPercent(marginalRate);

renderChart(grossIncome - totalTax, totalTax);
}

function renderChart(netIncome, totalTax) {
const ctx = document.getElementById('resultsChart');
if (!ctx) return;

const data = {
labels: ['Net Income', 'Total Tax'],
datasets: [{
data: [Math.max(0, netIncome), Math.max(0, totalTax)],
backgroundColor: ['#2563eb', '#f97316'], // Blue, Orange
borderColor: '#f9fafb',
borderWidth: 2
}]
};

if (chartInstance) {
chartInstance.data = data;
chartInstance.update();
} else {
chartInstance = new Chart(ctx, {
type: 'doughnut',
data: data,
options: {
responsive: true,
maintainAspectRatio: false,
plugins: {
legend: {
position: 'bottom',
labels: { boxWidth: 12, padding: 15 }
},
tooltip: {
callbacks: {
label: function(context) {
let label = context.label || '';
if (label) {
label += ': ';
}
if (context.parsed !== null) {
label += fmtCurrency(context.parsed);
}
return label;
}
}
}
}
}
});
}
}

// --- Dynamic Bracket Management ---
function createBracketRow(limit, rate) {
bracketCounter++;
const isLastBracket = (limit === Infinity);

const row = document.createElement('div');
row.className = 'bracket-row grid grid-cols-12 gap-x-4 gap-y-2 items-center';
row.setAttribute('role', 'group');
row.setAttribute('aria-label', `Tax Bracket ${bracketCounter}`);

const rateLabelId = `rate-label-${bracketCounter}`;
const limitLabelId = `limit-label-${bracketCounter}`;
const rateInputId = `rate-input-${bracketCounter}`;
const limitInputId = `limit-input-${bracketCounter}`;

// Rate (%)
row.innerHTML = `
<div class="col-span-5">
<label for="${rateInputId}" id="${rateLabelId}" class="block text-sm font-medium text-gray-700">Rate</label>
<div class="mt-1 relative rounded-md shadow-sm">
<input type="number" id="${rateInputId}" data-type="rate" value="${rate}" min="0" step="0.1"
class="block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-invalid="false" aria-describedby="${rateInputId}-error">
<div class="pointer-events-none absolute inset-y-0 right-0 pr-3 flex items-center">
<span class="text-gray-500 sm:text-sm">%</span>
</div>
</div>
<div id="${rateInputId}-error" class="error-message" role="alert">Enter a valid rate.</div>
</div>
`;

// Limit ($)
if (isLastBracket) {
row.innerHTML += `
<div class="col-span-5">
<label for="${limitInputId}" id="${limitLabelId}" class="block text-sm font-medium text-gray-700">Limit</label>
<input type="text" id="${limitInputId}" data-type="limit-text"
class="mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md"
value="And above" readonly tabindex="-1">
</div>
`;
} else {
row.innerHTML += `
<div class="col-span-5">
<label for="${limitInputId}" id="${limitLabelId}" class="block text-sm font-medium text-gray-700">Up to</label>
<div class="mt-1 relative rounded-md shadow-sm">
<div class="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center">
<span class="text-gray-500 sm:text-sm">$</span>
</div>
<input type="number" id="${limitInputId}" data-type="limit" value="${limit}" min="0" step="100"
class="block w-full px-3 py-2 pl-7 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-invalid="false" aria-describedby="${limitInputId}-error">
</div>
<div id="${limitInputId}-error" class="error-message" role="alert">Must be > previous limit.</div>
</div>
`;
}

// Remove Button
const removeBtnContainer = document.createElement('div');
removeBtnContainer.className = 'col-span-2 pt-5 text-right';
if (!isLastBracket) {
const removeBtn = document.createElement('button');
removeBtn.type = 'button';
removeBtn.className = 'p-1 text-gray-400 hover:text-red-600';
removeBtn.innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>';
removeBtn.setAttribute('aria-label', `Remove Bracket ${bracketCounter}`);
removeBtn.addEventListener('click', () => {
row.remove();
announce(`Bracket ${bracketCounter} removed.`);
calculate();
});
removeBtnContainer.appendChild(removeBtn);
}
row.appendChild(removeBtnContainer);

// Add event listeners
const inputs = row.querySelectorAll('input[type="number"]');
inputs.forEach(input => {
input.addEventListener('input', calculate);
input.addEventListener('blur', (e) => validateField(e.target));
});

return row;
}

function addBracket() {
// Find the second-to-last bracket to base the new one on
const allBrackets = elements.bracketContainer.querySelectorAll('.bracket-row');
const lastBracketRow = allBrackets[allBrackets.length - 1];
const secondLastRow = allBrackets[allBrackets.length - 2];

let newLimit = 100000;
let newRate = 30;

if (secondLastRow) {
const lastLimitVal = parseFloat(secondLastRow.querySelector('input[data-type="limit"]').value) || 0;
const lastRateVal = parseFloat(secondLastRow.querySelector('input[data-type="rate"]').value) || 0;
newLimit = lastLimitVal * 2;
newRate = Math.min(100, lastRateVal + 5);
} else if (allBrackets.length === 1) { // Only the "infinity" bracket exists
newLimit = 50000;
newRate = 20;
}

const newRow = createBracketRow(newLimit, newRate);
elements.bracketContainer.insertBefore(newRow, lastBracketRow);
newRow.querySelector('input[data-type="limit"]').focus();
announce(`New bracket added. Bracket ${bracketCounter}.`);
calculate();
}

function resetBrackets() {
elements.bracketContainer.innerHTML = '';
bracketCounter = 0;
defaultBrackets.forEach(b => {
elements.bracketContainer.appendChild(createBracketRow(b.limit, b.rate));
});
announce("Tax brackets reset to default.");
calculate();
}

// --- Validation ---
function validateField(input) {
let isValid = true;
let errorMessage = "";
const value = parseFloat(input.value);

if (input.id === 'grossIncome') {
if (isNaN(value) || value < 0) {
isValid = false;
errorMessage = "Please enter a valid, non-negative income.";
}
} else if (input.id === 'deductions') {
if (isNaN(value) || value < 0) {
isValid = false;
errorMessage = "Please enter a valid, non-negative deduction amount.";
}
} else if (input.dataset.type === 'rate') {
if (isNaN(value) || value < 0 || value > 100) {
isValid = false;
errorMessage = "Rate must be between 0 and 100.";
}
} else if (input.dataset.type === 'limit') {
// Check if limit is greater than the previous limit
const allLimits = Array.from(elements.bracketContainer.querySelectorAll('input[data-type="limit"]'));
const currentIndex = allLimits.indexOf(input);
if (currentIndex > 0) {
const prevLimit = parseFloat(allLimits[currentIndex - 1].value) || 0;
if (value <= prevLimit) {
isValid = false;
errorMessage = "Must be > previous limit.";
}
}
if (isNaN(value) || value <= 0) {
isValid = false;
errorMessage = "Must be a positive number.";
}
}

const errorDiv = document.getElementById(`${input.id}-error`);
if (isValid) {
input.setAttribute('aria-invalid', 'false');
if(errorDiv) errorDiv.textContent = "";
} else {
input.setAttribute('aria-invalid', 'true');
if(errorDiv) errorDiv.textContent = errorMessage;
}
return isValid;
}

function validateAllInputs() {
let allValid = true;
const inputsToValidate = [
elements.grossIncome,
elements.deductions,
...elements.bracketContainer.querySelectorAll('input[type="number"]')
];
inputsToValidate.forEach(input => {
if (!validateField(input)) {
allValid = false;
}
});
return allValid;
}

// --- Accessibility Helpers ---
function toggleTooltip() {
const isExpanded = elements.deductionsTooltipBtn.getAttribute('aria-expanded') === 'true';
elements.deductionsTooltipBtn.setAttribute('aria-expanded', !isExpanded);
elements.deductionsTooltip.classList.toggle('visible');
elements.deductionsTooltip.setAttribute('aria-hidden', isExpanded);
}

function announce(message) {
elements.srAnnouncer.textContent = message;
// Clear after a moment so it can be re-announced
setTimeout(() => {
elements.srAnnouncer.textContent = '';
}, 1000);
}

// --- Event Listeners ---
// Calculator inputs
[elements.grossIncome, elements.deductions].forEach(input => {
input.addEventListener('input', calculate);
input.addEventListener('blur', (e) => validateField(e.target));
});

// Bracket buttons
elements.addBracketBtn.addEventListener('click', addBracket);
elements.resetBracketsBtn.addEventListener('click', resetBrackets);

// Tooltip
elements.deductionsTooltipBtn.addEventListener('click', toggleTooltip);

// Mobile Menu (from template)
const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
if (mobileMenuToggle && mobileMenu) {
mobileMenuToggle.addEventListener('click', () => {
mobileMenu.classList.toggle('hidden');
const isHidden = mobileMenu.classList.contains('hidden');
mobileMenuToggle.setAttribute('aria-expanded', !isHidden);
mobileMenuToggle.setAttribute('aria-label', isHidden ? 'Open menu' : 'Close menu');
});
}

// --- Initial Run ---
resetBrackets(); // Load default brackets
calculate(); // Run calculation on page load

});
</script>
</body>
</html>
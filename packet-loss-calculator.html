<!DOCTYPE html>
<html lang="en">
<head>
<link rel="canonical" href="https://calcdomain.com/packet-loss-calculator.html">





    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Packet Loss Calculator - Calculate Network Loss Rate &amp; Delivery</title>
    <meta name="description" content="Calculate packet loss percentage, delivery rate, and total lost packets. Enter packets sent and received (or lost) to instantly analyze network reliability.">
    
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .prose { max-width: 65ch; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.5rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .prose table { width: 100%; border-collapse: collapse; margin-bottom: 1rem; }
        .prose th, .prose td { border: 1px solid #d1d5db; padding: 0.5rem 0.75rem; text-align: left; }
        .prose th { background-color: #f9fafb; font-weight: 600; }
        .prose code { background-color: #f3f4f6; padding: 0.125rem 0.25rem; border-radius: 4px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, ""Liberation Mono"", ""Courier New"", monospace; }
        .formula-box {
            background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.5rem;
            overflow-x:auto; font-family: "Georgia", "Times New Roman", Times, serif; font-size: 1.1rem;
            display: flex; justify-content: center; align-items: center;
        }
        details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
        details[open] > summary { margin-bottom: 0.5rem; }
        
        /* Result Card Styles */
        .result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
        .result-card h4 { font-size: 0.95rem; font-weight: 500; color: #6b7280; margin-bottom: 0.25rem; }
        .result-card p { font-size: 2.25rem; font-weight: 700; }
        #lossRateResult.high-loss { color: #dc2626; } /* Red for high loss */
        #lossRateResult.low-loss { color: #f97316; } /* Orange for low loss */
        #lossRateResult.no-loss { color: #16a34a; } /* Green for no loss */
        #deliveryRateResult { color: #2563eb; } /* Blue for delivery */

        /* Accessible Focus State */
        input:focus-visible, select:focus-visible, button:focus-visible {
            outline: 3px solid #3b82f6;
            outline-offset: 2px;
            box-shadow: none;
        }
        /* Custom styling for invalid inputs (WCAG) */
        input[aria-invalid="true"] {
            border-color: #dc2626;
            box-shadow: 0 0 0 1px #dc2626;
        }
        .error-message {
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        /* Print Styles */
        @media print {
            body * { visibility: hidden; }
            #print-section, #print-section * { visibility: visible; }
            #print-section { position: absolute; left: 0; top: 0; width: 100%; }
            #calculator-ui, #results, .prose h2, .prose p, .prose table, .formula-box, .prose h1 { visibility: visible; }
            .no-print { display: none !important; }
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Packet Loss Calculator",
      "description": "Calculate packet loss percentage, delivery rate, and total lost packets. Enter packets sent and received (or lost) to instantly analyze network reliability.",
      "url": "https://calcdomain.com/packet-loss-calculator.html",
      "inLanguage": "en",
      "author": {
        "@type": "Person",
        "name": "Ugo Candido"
      },
      "publisher": {
        "@type": "Organization",
        "name": "CalcDomain"
      },
      "mainEntity": {
        "@type": "Calculator",
        "name": "Packet Loss Calculator",
        "description": "A tool to calculate network packet loss rate based on packets sent and received or lost.",
        "toolFor": "Calculating network connection reliability and stability."
      }
    }
    </script>
    <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Science & Technology",
      "item": "https://calcdomain.com/science.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Packet Loss Calculator",
      "item": "https://calcdomain.com/packet-loss-calculator.html"
    }
  ]
}</script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Calculate Packet Loss",
      "description": "A step-by-step guide to calculating packet loss rate and delivery rate.",
      "step": [
        {"@type": "HowToStep", "name": "Enter Total Packets Sent", "text": "Input the total number of packets that were transmitted. This is your baseline value."},
        {"@type": "HowToStep", "name": "Enter Received or Lost Packets", "text": "Input *either* the number of packets successfully received *or* the number of packets that were lost. The calculator will compute the other value automatically."},
        {"@type": "HowToStep", "name": "Calculate Rates", "text": "The calculator uses the formula (Sent - Received) / Sent to find the loss rate."},
        {"@type": "HowToStep", "name": "Review Results", "text": "See your Packet Loss Rate and Packet Delivery Rate instantly to assess network connection stability."}
      ]
    }
    </script>
    
    <script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

    <header class="bg-white shadow-sm z-50">
        <nav class="container mx-auto px-4 lg:px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

                <div class="w-full max-w-md hidden md:block mx-8 no-print">
                    <div class="relative">
                        <input type="search" id="search-input" placeholder="Search for a calculator..."
                               class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                               autocomplete="off">
                        <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                             fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
                    </div>
                </div>

                <div class="hidden md:flex items-center space-x-6 text-sm no-print">
                    <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
                    Categories
                </div>

                <button id="mobile-menu-toggle" class="md:hidden p-2 no-print" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>

            <div id="mobile-menu" class="md:hidden mt-4 hidden no-print">
                <div class="space-y-2">
                    <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
                    Categories
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 lg:px-6 py-10">
        <div class="flex flex-col lg:flex-row gap-8">

            <section class="w-full lg:w-2/3">
                <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
                    <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
                    Technology &raquo;
                    <a href="subcategories/miscellaneous.html" class="hover:text-blue-600">Networking</a> &raquo;
                    <span class="text-gray-900">Packet Loss Calculator</span>
                </nav>

                <div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
                    <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Packet Loss Calculator</h1>
                    <p class="text-gray-600 mb-6">
                        This tool helps you quickly calculate the packet loss percentage and delivery rate for a network connection. It's ideal for network administrators, gamers, and IT professionals who need to analyze data from a <code>ping</code> test or network monitoring report. Enter your "sent" and "received" (or "lost") packet counts to quantify connection stability.
                    </p>

                    <section id="calculator-ui" aria-labelledby="calculator-heading">
                        <h2 id="calculator-heading" class="sr-only">Calculator Inputs</h2>
                        <form id="packet-loss-form" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                
                                <div>
                                    <label for="packetsSent" class="block text-sm font-medium text-gray-700">Packets Sent <span class="text-red-500" aria-hidden="true">*</span></label>
                                    <input type="number" id="packetsSent" value="1000" step="1" min="1"
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                                           aria-required="true" aria-describedby="sent-desc sent-error">
                                    <p id="sent-desc" class="text-sm text-gray-500 mt-1">Total packets transmitted.</p>
                                    <div id="sent-error" class="error-message" role="alert" aria-live="assertive"></div>
                                </div>
                                
                                <div>
                                    <label for="packetsReceived" class="block text-sm font-medium text-gray-700">Packets Received</label>
                                    <input type="number" id="packetsReceived" value="980" step="1" min="0"
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                                           aria-describedby="received-desc received-error">
                                    <p id="received-desc" class="text-sm text-gray-500 mt-1">Packets successfully delivered.</p>
                                    <div id="received-error" class="error-message" role="alert" aria-live="assertive"></div>
                                </div>

                                <div>
                                    <label for="packetsLost" class="block text-sm font-medium text-gray-700">Packets Lost</label>
                                    <input type="number" id="packetsLost" value="20" step="1" min="0"
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                                           aria-describedby="lost-desc lost-error">
                                    <p id="lost-desc" class="text-sm text-gray-500 mt-1">Packets that failed to arrive.</p>
                                    <div id="lost-error" class="error-message" role="alert" aria-live="assertive"></div>
                                </div>
                            </div>
                        </form>
                    </section>

                    <section id="results" aria-labelledby="results-heading" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6 min-h-[150px]">
                        <h2 id="results-heading" class="text-xl font-semibold text-gray-900 mb-4">Calculation Results</h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div class="result-card">
                                <h4>Packet Loss Rate</h4>
                                <p id="lossRateResult" class="no-loss" aria-live="polite">2.00%</p>
                            </div>
                            <div class="result-card">
                                <h4>Packet Delivery Rate</h4>
                                <p id="deliveryRateResult" aria-live="polite">98.00%</p>
                            </div>
                        </div>
                    </section>
                </div>

                <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
                    
                    <h2>Data Source and Methodology</h2>
                    <p>
                        This calculator uses the fundamental definitions of Packet Loss Rate (PLR) and Packet Delivery Rate (PDR) as established in network engineering principles. The methodology is based on the standard ratio of lost or delivered packets to the total number of packets sent.
                    </p>
                    <p>
                        <strong>AuthoritativeDataSource:</strong> IETF RFC 2680 - "A One-way Active Measurement Protocol (OWAMP)".
                        <br>
                        <strong>Reference:</strong> This RFC, which defines protocols for measuring network performance, implicitly uses this formula as the basis for loss measurement.
                    </p>
                    <p>All calculations are strictly based on the formulas derived from these industry-standard definitions.</p>

                    <h2>The Formula Explained</h2>
                    <p>The Packet Loss Rate (PLR) is the percentage of packets that were sent by a source but not received by the destination. The Packet Delivery Rate (PDR) is the inverse.</p>
                    
                    <p><strong>Formula for Packet Loss Rate (PLR):</strong></p>
                    <div class="formula-box">
                        $$ PLR (\%) = \left( \frac{\text{Packets Sent} - \text{Packets Received}}{\text{Packets Sent}} \right) \times 100 $$
                    </div>
                    
                    <p class="mt-4"><strong>Formula for Packet Delivery Rate (PDR):</strong></p>
                    <div class="formula-box">
                        $$ PDR (\%) = \left( \frac{\text{Packets Received}}{\text{Packets Sent}} \right) \times 100 $$
                    </div>
                    <p class="mt-4">These two values are directly related: $ PLR + PDR = 100\% $.</p>

                    <h2>Glossary of Variables</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Variable</th>
                                <th>Definition</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Packets Sent</strong></td>
                                <td>The total number of data packets transmitted from the source.</td>
                            </tr>
                            <tr>
                                <td><strong>Packets Received</strong></td>
                                <td>The total number of data packets successfully delivered to and acknowledged by the destination.</td>
                            </tr>
                            <tr>
                                <td><strong>Packets Lost</strong></td>
                                <td>The total number of packets that failed to reach the destination. (Calculated as: Packets Sent - Packets Received).</td>
                            </tr>
                            <tr>
                                <td><strong>Packet Loss Rate (%)</strong></td>
                                <td>The percentage of transmitted packets that were lost.</td>
                            </tr>
                            <tr>
                                <td><strong>Packet Delivery Rate (%)</strong></td>
                                <td>The percentage of transmitted packets that were successfully delivered.</td>
                            </tr>
                        </tbody>
                    </table>

                    <h2>How It Works: A Step-by-Step Example</h2>
                    <p>Let's walk through a common scenario: using the <code>ping</code> command to test a connection.</p>
                    <ol>
                        <li>
                            <strong>Scenario:</strong> A network administrator runs a ping test to a server by typing <code>ping -n 100 google.com</code> (on Windows) or <code>ping -c 100 google.com</code> (on macOS/Linux).
                        </li>
                        <li>
                            <strong>Test Results:</strong> The command finishes and displays a summary:
                            <br>
                            <code>--- google.com ping statistics ---</code>
                            <br>
                            <code>100 packets transmitted, 98 received, 2% packet loss</code>
                        </li>
                        <li>
                            <strong>Using the Calculator:</strong>
                            <ul>
                                <li>Enter <strong>100</strong> into the "Packets Sent" field.</li>
                                <li>Enter <strong>98</strong> into the "Packets Received" field.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Instant Calculation:</strong> The calculator automatically fills <strong>20</strong> in the "Packets Lost" field (Oops, should be 2. Let's fix the example).
                            <br>
                            <em>Correction:</em> The calculator automatically fills <strong>2</strong> in the "Packets Lost" field.
                        </li>
                        <li>
                            <strong>Final Result:</strong> The tool displays a **2.00% Packet Loss Rate** and a **98.00% Packet Delivery Rate**, confirming the <code>ping</code> test's summary.
                        </li>
                    </ol>

                    <h2>Frequently Asked Questions (FAQ)</h2>
                    
                    <details>
                        <summary>What is packet loss?</summary>
                        <p>Packet loss occurs when one or more packets of data traveling across a computer network fail to reach their destination. It's a common issue that can degrade network performance, causing lag in games, buffering in video streams, and poor quality in VoIP calls.</p>
                    </details>
                    
                    <details>
                        <summary>What causes packet loss?</summary>
                        <p>Common causes include:
                            <ul>
                                <li><strong>Network Congestion:</strong> The most common cause. Too much traffic on a network forces routers to drop packets they can't handle.</li>
                                <li><strong>Faulty Hardware:</strong> An old or failing router, modem, switch, or Ethernet cable can corrupt or drop packets.</li>
                                <li><strong>Software Bugs:</strong> Bugs in a router's firmware or your device's operating system can lead to packet loss.</li>
                                <li><strong>Wi-Fi Interference:</strong> Wireless signals are prone to interference from other devices (microwaves, cordless phones) or physical obstructions.</li>
                                <li><strong>Security Threats:</strong> A Denial-of-Service (DoS) attack can flood a network, intentionally causing packet loss.</li>
                            </ul>
                        </p>
                    </details>
                    
                    <details>
                        <summary>Is 1% packet loss bad?</summary>
                        <p>It depends entirely on the application.
                            <ul>
                                <li><strong>For Gaming/VoIP:</strong> Yes, even 1% loss can be noticeable, causing stutter, lag, or dropped audio. For these real-time applications, the ideal loss rate is 0%.</li>
                                <li><strong>For Streaming Video:</strong> Tolerable. Buffering mechanisms can handle small amounts of loss, though higher loss will cause buffering stalls.</li>
                                <li><strong>For File Downloads/Email:</strong> Not critical. Protocols like TCP (Transmission Control Protocol) are designed to detect lost packets and re-send them, ensuring the full file arrives intact, albeit slightly slower.</li>
                            </ul>
                        </p>
                    </details>
                    
                    <details>
                        <summary>How can I test for packet loss?</summary>
                        <p>The simplest way is using the <code>ping</code> command in your computer's terminal (Command Prompt on Windows, Terminal on macOS/Linux). For example, <code>ping -c 100 www.google.com</code> will send 100 packets and report how many were lost. For more advanced diagnostics, tools like <code>mtr</code> (My Traceroute) or professional network monitoring software can be used.</p>
                    </details>

                    <details>
                        <summary>How do I fix packet loss?</summary>
                        <p>Troubleshooting steps include:
                            <ol>
                                <li><strong>Check Physical Connections:</strong> Ensure all Ethernet cables are securely plugged in and undamaged.</li>
                                <li><strong>Restart Hardware:</strong> Reboot your router, modem, and computer.</li>
                                <li><strong>Use a Wired Connection:</strong> If you're on Wi-Fi, switch to an Ethernet cable to rule out wireless interference.</li>
                                <li><strong>Update Firmware/Drivers:</strong> Ensure your router's firmware and your computer's network drivers are up to date.</li>
                                <li><strong>Contact Your ISP:</strong> If the problem persists, the issue may be outside your home, and your Internet Service Provider (ISP) will need to investigate.</li>
                            </ol>
                        </p>
                    </details>
                    
                    <details>
                        <summary>What's the difference between this calculator and a packet loss test?</summary>
                        <p>This tool is a <strong>calculator</strong>: you provide it with data (packets sent/received) that you got from another source (like a <code>ping</code> test), and it calculates the percentages for you. A packet loss <strong>test</strong> is an active tool (like Cloudflare's or PacketLossTest.com) that actively sends and receives packets in real-time to measure your connection's current performance.</p>
                    </details>

                    <div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
                        <p><strong>Tool developed by Ugo Candido.</strong><br>
                        Network engineering content verified by the CalcDomain Editorial Board.<br>
                        Last accuracy review: <time datetime="2025-10-26">October 26, 2025</time></p>
                    </div>
                </article>
            </section>

            <aside class="w-full lg:w-1/3 no-print">
                <div class="sticky top-24 space-y-6">
                    <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
                        Ad Placement (300Ã—600)
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
                            <li>Instantly quantify your network connection's stability and reliability.</li>
                            <li>Quickly analyze and verify the results from <code>ping</code> or <code>mtr</code> tests.</li>
                            <li>Essential for troubleshooting network, gaming, or streaming issues.</li>
                            <li>Calculate both loss rate and delivery rate from a single set of data.</li>
                        </ul>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-4">Related Networking Tools</h3>
                        <ul class="space-y-3 text-sm">
                            <li><a href="bandwidth-calculator.html" class="text-blue-600 hover:underline">Bandwidth Calculator</a></li>
                            <li>Data Transfer Time Calculator</li>
                            <li><a href="subnet-calculator.html" class="text-blue-600 hover:underline">Subnet Calculator (IPv4)</a></li>
                            <li>Download Speed Calculator</li>
                        </ul>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <footer class="bg-white border-t no-print">
        <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
            <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
            <div class="mt-4 space-x-4">
                <a href="about.html" class="hover:text-blue-600">About</a>
                <a href="contact.html" class="hover:text-blue-600">Contact</a>
                <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
                <a href="terms.html" class="hover:text-blue-600">Terms</a>
            </div>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        
        const elements = {
            sentInput: document.getElementById('packetsSent'),
            receivedInput: document.getElementById('packetsReceived'),
            lostInput: document.getElementById('packetsLost'),
            sentError: document.getElementById('sent-error'),
            receivedError: document.getElementById('received-error'),
            lostError: document.getElementById('lost-error'),
            lossResult: document.getElementById('lossRateResult'),
            deliveryResult: document.getElementById('deliveryRateResult')
        };
        
        // Tracks which of the two dependent fields was last edited by the user
        let lastEdited = 'received'; // or 'lost'

        // Helper: Clear all validation errors
        function clearErrors() {
            elements.sentError.textContent = '';
            elements.receivedError.textContent = '';
            elements.lostError.textContent = '';
            elements.sentInput.setAttribute('aria-invalid', 'false');
            elements.receivedInput.setAttribute('aria-invalid', 'false');
            elements.lostInput.setAttribute('aria-invalid', 'false');
        }

        // Helper: Show a specific validation error
        function showError(inputEl, errorEl, message) {
            errorEl.textContent = message;
            inputEl.setAttribute('aria-invalid', 'true');
        }
        
        // Helper: Update the main results display
        function updateResults(lossRate, deliveryRate) {
            elements.lossResult.textContent = lossRate.toFixed(2) + '%';
            elements.deliveryResult.textContent = deliveryRate.toFixed(2) + '%';
            
            // Update result color based on loss (WCAG compliant colors)
            elements.lossResult.classList.remove('high-loss', 'low-loss', 'no-loss');
            if (lossRate > 5) {
                elements.lossResult.classList.add('high-loss');
            } else if (lossRate > 0) {
                elements.lossResult.classList.add('low-loss');
            } else {
                elements.lossResult.classList.add('no-loss');
            }
        }

        function calculate(event) {
            clearErrors();
            
            const source = event ? event.target.id : 'init';
            if (source === 'packetsReceived') {
                lastEdited = 'received';
            } else if (source === 'packetsLost') {
                lastEdited = 'lost';
            }
            
            const sent = parseFloat(elements.sentInput.value);
            let received = parseFloat(elements.receivedInput.value);
            let lost = parseFloat(elements.lostInput.value);
            
            let isValid = true;
            
            // --- Validation ---
            if (isNaN(sent) || sent <= 0) {
                showError(elements.sentInput, elements.sentError, 'Packets Sent must be a number greater than 0.');
                isValid = false;
            }
            if (isNaN(received) && lastEdited === 'received') received = 0;
            if (isNaN(lost) && lastEdited === 'lost') lost = 0;

            if (received < 0) {
                showError(elements.receivedInput, elements.receivedError, 'Cannot be negative.');
                isValid = false;
            }
            if (lost < 0) {
                showError(elements.lostInput, elements.lostError, 'Cannot be negative.');
                isValid = false;
            }

            // --- Auto-calculation Logic ---
            if (isValid && sent > 0) {
                if (lastEdited === 'received') {
                    if (received > sent) {
                        showError(elements.receivedInput, elements.receivedError, 'Received cannot be greater than Sent.');
                        isValid = false;
                    } else {
                        // Calculate Lost from Received
                        elements.lostInput.value = sent - received;
                    }
                } else { // lastEdited === 'lost'
                    if (lost > sent) {
                        showError(elements.lostInput, elements.lostError, 'Lost cannot be greater than Sent.');
                        isValid = false;
                    } else {
                        // Calculate Received from Lost
                        elements.receivedInput.value = sent - lost;
                    }
                }
            }

            // --- Final Calculation & Display ---
            if (!isValid || !(sent > 0)) {
                updateResults(0, 0); // Show 0 results if invalid
                return;
            }
            
            // Re-read the calculated value to be sure
            const finalReceived = parseFloat(elements.receivedInput.value);

            if (isNaN(finalReceived) || finalReceived < 0) {
                 updateResults(0, 0);
                 return;
            }

            const lossRate = ((sent - finalReceived) / sent) * 100;
            const deliveryRate = (finalReceived / sent) * 100;
            
            updateResults(lossRate, deliveryRate);
        }

        // Add event listeners
        [elements.sentInput, elements.receivedInput, elements.lostInput].forEach(input => {
            input.addEventListener('input', calculate);
        });

        // Initial calculation on page load
        calculate(null);
        
        // Mobile Menu Toggle
        const menuToggle = document.getElementById('mobile-menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        if(menuToggle && mobileMenu) {
            menuToggle.addEventListener('click', () => {
                const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
                menuToggle.setAttribute('aria-expanded', !isExpanded);
                mobileMenu.classList.toggle('hidden');
            });
        }
    });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Packet Loss Calculator - Calculate Network Packet Loss %</title>
    <meta name="description" content="Calculate packet loss percentage and total lost packets. Enter packets sent and received to get an instant, accurate network performance analysis.">
    <link rel="canonical" href="https://calcdomain.com/packet-loss-calculator.html"/>
    <meta name="author" content="Ugo Candido">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-sN1MATnYdvsvdkB4c/FWAhIe3eCikGSO/wNmfKBD2CHsSLAYkWv4Hj+C1GjQeE/j" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoYJkEuSB9AYUfMhF2iNBYDqMAdQGZOPMcWSRcQPhLUPwPSMN2tqKGSNchKjMIi" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3rVO5stq9M2+QdJnBbmCqGqAgHPKOe/NMl+sE/SrzLMRo5Sr/4/QYdAGLwA" crossorigin="anonymous"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .prose { max-width: 65ch; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.5rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .formula-box {
            background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.5rem;
            overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
            font-size: 1.1rem; text-align: center;
        }
        details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
        details[open] > summary { margin-bottom: 0.5rem; }
        
        /* Stili Risultati */
        .result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
        .result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; text-transform: uppercase; letter-spacing: 0.05em; }
        .result-card p { font-size: 2.25rem; font-weight: 700; color: #1e3a8a; } /* Default blue */

        /* Classi condizionali per i risultati */
        .result-card.good p { color: #16a34a; }      /* Green-600 */
        .result-card.warning p { color: #f97316; }    /* Orange-500 */
        .result-card.critical p { color: #dc2626; }    /* Red-600 */
        
        /* Requisito A11y: Stile Focus Visibile (WCAG 2.4.7) */
        :focus-visible {
            outline: 3px solid #3b82f6 !important; /* Blue-500 */
            outline-offset: 2px !important;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.4) !important;
            border-radius: 2px;
        }
        input:focus-visible, select:focus-visible, textarea:focus-visible {
            outline-offset: 0 !important;
        }
        
        /* Stili per campi con errore (Validazione 2.2) */
        input[aria-invalid="true"] {
            border-color: #dc2626;
            box-shadow: 0 0 0 1px #dc2626;
        }
        .error-message {
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        /* Stile Tooltip (Requisito 2.3) */
        .tooltip-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 1.25rem;
            height: 1.25rem;
            border-radius: 9999px;
            border: 1px solid #9ca3af;
            background-color: #f9fafb;
            color: #6b7280;
            font-weight: 700;
            font-size: 0.8rem;
            margin-left: 0.25rem;
            cursor: help;
        }
        .tooltip-content {
            background-color: #1f2937;
            color: #f9fafb;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            position: relative;
            z-index: 10;
        }

        /* Requisito CLS (3.1): Prevenzione spostamento layout */
        #results-container {
            min-height: 180px; /* Riserva spazio per i risultati prima che vengano renderizzati */
        }
        
        @media print {
            body * { visibility: hidden; }
            #print-section, #print-section * { visibility: visible; }
            #print-section { position: absolute; left: 0; top: 0; width: 100%; }
            header, footer, aside, #calculator-form button { display: none !important; }
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Packet Loss Calculator",
      "description": "Calculate packet loss percentage and total lost packets. Enter packets sent and received to get an instant, accurate network performance analysis.",
      "url": "https://calcdomain.com/packet-loss-calculator.html",
      "inLanguage": "en",
      "publisher": {
        "@type": "Organization",
        "name": "CalcDomain",
        "logo": {
          "@type": "ImageObject",
          "url": "https://calcdomain.com/logo.png"
        }
      },
      "author": {
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://calcdomain.com/about/ugo-candido"
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
        { "@type": "ListItem", "position": 2, "name": "Lifestyle Everyday", "item": "https://calcdomain.com/lifestyle-everyday.html" },
        { "@type": "ListItem", "position": 3, "name": "Miscellaneous", "item": "https://calcdomain.com/subcategories/lifestyle-everyday-miscellaneous.html" },
        { "@type": "ListItem", "position": 4, "name": "Packet Loss Calculator", "item": "https://calcdomain.com/packet-loss-calculator.html" }
      ]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://calcdomain.com/packet-loss-calculator.html"
      },
      "headline": "Packet Loss Calculator and Analysis",
      "description": "An authoritative guide and calculator for determining network packet loss based on packets sent and received. Includes formulas, methodology, and expert FAQs.",
      "author": {
        "@type": "Person",
        "name": "Ugo Candido"
      },
      "publisher": {
         "@type": "Organization",
         "name": "CalcDomain",
         "logo": {
            "@type": "ImageObject",
            "url": "https://calcdomain.com/logo.png"
         }
      },
      "datePublished": "2025-10-26",
      "dateModified": "2025-10-26",
      "reviewedBy": {
        "@type": "Organization",
        "name": "CalcDomain Editorial Board"
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Calculate Packet Loss",
      "description": "A step-by-step guide to calculating your network's packet loss percentage.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Enter Packets Sent",
          "text": "Input the total number of packets transmitted from the source (e.g., from a 'ping' command)."
        },
        {
          "@type": "HowToStep",
          "name": "Enter Packets Received",
          "text": "Input the total number of packets that successfully arrived at the destination."
        },
        {
          "@type": "HowToStep",
          "name": "Calculate",
          "text": "Press the 'Calculate' button to run the calculation."
        },
        {
          "@type": "HowToStep",
          "name": "Review Results",
          "text": "The calculator will display the total packets lost and the final packet loss percentage."
        }
      ]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is a good packet loss percentage?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "For most applications, a packet loss of 0% is ideal. For online gaming or VoIP, anything above 1% is noticeable and problematic. For streaming video, a loss of 2-5% might be acceptable due to buffering, but it will still cause degradation. A loss above 5% indicates a significant network issue."
          }
        },
        {
          "@type": "Question",
          "name": "What causes packet loss?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Common causes include network congestion (too much traffic), faulty hardware (bad routers, switches, or cables), software bugs, overloaded devices, and wireless interference (poor Wi-Fi signal)."
          }
        },
        {
          "@type": "Question",
          "name": "How do I test for packet loss?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "You can use the 'ping' command in your computer's terminal (Command Prompt on Windows, Terminal on macOS/Linux). For example, ping -n 100 google.com (Windows) or ping -c 100 google.com (macOS/Linux) will send 100 packets. The summary will tell you how many were sent and received, which you can then enter into this calculator."
          }
        },
        {
          "@type": "Question",
          "name": "Does 0% packet loss mean my connection is perfect?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Not necessarily. 0% packet loss is excellent, but it doesn't account for other important metrics like latency (ping time) or jitter (variance in latency). You can have 0% loss but still have a 'laggy' connection if your latency is very high."
          }
        },
        {
          "@type": "Question",
          "name": "Why can't 'Packets Received' be greater than 'Packets Sent'?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "It's physically impossible to receive more data packets than were originally transmitted in a single test. If your test results show this, it's likely an error in the testing software or a misreading of the data. Our calculator enforces this rule to ensure logical results."
          }
        }
      ]
    }
    </script>
    <script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

    <header class="bg-white shadow-sm">
        <nav class="container mx-auto px-4 lg:px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

                <div class="w-full max-w-md hidden md:block mx-8">
                    <div class="relative">
                        <input type="search" id="search-input" placeholder="Search for a calculator..."
                               class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                               autocomplete="off">
                        <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                             fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
                    </div>
                </div>

                <div class="hidden md:flex items-center space-x-6 text-sm">
                    <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
                    <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
                </div>

                <button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>

            <div id="mobile-menu" class="md:hidden mt-4 hidden">
                <div class="space-y-2">
                    <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
                    <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 lg:px-6 py-10">
        <div class="flex flex-col lg:flex-row gap-8">

            <section class="w-full lg:w-2/3">
                <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
                    <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
                    <a href="lifestyle-everyday.html" class="hover:text-blue-600">Lifestyle Everyday</a> &raquo;
                    <a href="subcategories/lifestyle-everyday-miscellaneous.html" class="hover:text-blue-600">Miscellaneous</a> &raquo;
                    <span class="text-gray-900">Packet Loss Calculator</span>
                </nav>

                <div id="print-section" class="bg-white p-6 md:p-8 rounded-lg shadow-md">
                    
                    <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Packet Loss Calculator</h1>
                    <p class="text-gray-600 mb-6">
                        Instantly determine your network's stability by calculating the packet loss percentage. This tool helps network administrators, gamers, and remote workers quantify data loss. Simply enter the total packets sent and received to get your results.
                    </p>

                    <section aria-labelledby="calculator-heading" class="border-t border-b border-gray-200 py-6">
                        <h2 id="calculator-heading" class="sr-only">Network Data Input</h2>
                        
                        <form id="calculator-form" novalidate>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5">
                                
                                <div>
                                    <label for="packetsSent" class="block text-sm font-medium text-gray-700">Packets Sent <span class="text-red-600" aria-hidden="true">*</span></label>
                                    <input type="number" id="packetsSent" min="0" step="1" aria-required="true"
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg"
                                           placeholder="e.g., 1000">
                                    <div id="sentError" class="error-message" role="alert" hidden></div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between items-center">
                                        <label for="packetsReceived" class="block text-sm font-medium text-gray-700">Packets Received <span class="text-red-600" aria-hidden="true">*</span></label>
                                        <button type="button" id="tooltip-toggle" class="tooltip-button" aria-label="About Packets Received" aria-expanded="false" aria-controls="tooltip-content">?</button>
                                    </div>
                                    <input type="number" id="packetsReceived" min="0" step="1" aria-required="true" aria-describedby="tooltip-content"
                                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg"
                                           placeholder="e.g., 998">
                                    <div id="receivedError" class="error-message" role="alert" hidden></div>
                                    <div id="tooltip-content" role="tooltip" class="tooltip-content" hidden>
                                        The total packets that successfully reached the destination. This cannot be more than packets sent.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-center gap-4 mt-6 pt-6 border-t border-gray-200">
                                <button type="submit" id="calculateButton"
                                        class="min-w-[150px] text-lg px-6 py-3 bg-blue-600 text-white font-semibold rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                    Calculate
                                </button>
                                <button type="reset" id="resetButton"
                                        class="text-sm text-gray-600 hover:text-gray-900 hover:underline">
                                    Reset
                                </button>
                            </div>
                        </form>
                    </section>

                    <section id="results-container" class="mt-8" aria-labelledby="results-heading" hidden>
                        <h2 id="results-heading" class="text-xl font-semibold text-gray-900 mb-4">Calculation Results</h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            
                            <div class="result-card">
                                <h4>Packets Lost</h4>
                                <p id="packetsLostResult" class="text-3xl md:text-4xl">—</p>
                            </div>
                            
                            <div id="lossPercentageCard" class="result-card">
                                <h4>Packet Loss Percentage</h4>
                                <p id="packetLossPercentageResult" class="text-3xl md:text-4xl">—</p>
                            </div>

                        </div>
                        <div id="result-summary" class="sr-only" aria-live="polite" aria-atomic="true"></div>
                    </section>
                </div>

                <article class="bg-white p-6 md:p-8 rounded-lg shadow-md mt-8 prose prose-lg max-w-none">
                    
                    <section>
                        <h2>Data Source and Methodology</h2>
                        <p>
                            This calculator's methodology is based on standard network performance metrics.
                            <strong>AuthoritativeDataSource:</strong> ITU-T Recommendation Y.1540 (12/2019) - "Internet protocol data communication service – IP packet transfer and availability performance parameters."
                        </p>
                        <p>
                            This international standard defines the parameters for measuring IP network performance, including packet loss. All calculations are strictly based on the standard formulas for IP Packet Loss Ratio (PLR) derived from this source.
                        </p>
                    </section>

                    <section>
                        <h2>The Formula Explained</h2>
                        <p>The calculator first determines the total number of lost packets by subtracting the packets received from the packets sent.</p>
                        <div class="formula-box" aria-label="Formula for Packets Lost">
                            $$ P_L = P_S - P_R $$
                        </div>
                        
                        <p class="mt-4">It then calculates the Packet Loss Ratio (PLR), expressed as a percentage, by dividing the lost packets by the total packets sent.</p>
                        <div class="formula-box" aria-label="Formula for Packet Loss Percentage">
                            $$ \text{Packet Loss \%} = \left( \frac{P_L}{P_S} \right) \times 100 $$
                        </div>
                    </section>

                    <section>
                        <h2>Glossary of Variables</h2>
                        <ul>
                            <li><strong>Packets Sent ($(P_S)$):</strong> The total number of data packets transmitted from the source device.</li>
                            <li><strong>Packets Received ($(P_R)$):</strong> The total number of data packets successfully delivered to and acknowledged by the destination device.</li>
                            <li><strong>Packets Lost ($(P_L)$):</strong> The number of packets that failed to reach the destination. This is the primary measure of data loss.</li>
                            <li><strong>Packet Loss Percentage:</strong> The ratio of lost packets to sent packets. This is the most common metric for judging network connection quality.</li>
                        </ul>
                    </section>

                    <section>
                        <h2>How It Works: A Step-by-Step Example</h2>
                        <p>Let's say you run a network test (like a <code>ping</code> command for 10 minutes) and get the following results:</p>
                        <ul class="list-none pl-0">
                            <li><strong>Packets Sent ($(P_S)$):</strong> 1,500</li>
                            <li><strong>Packets Received ($(P_R)$):</strong> 1,488</li>
                        </ul>
                        
                        <p>Here is how the calculation is performed:</p>
                        <ol>
                            <li>
                                <strong>Find Packets Lost ($(P_L)$):</strong>
                                <p>Using the first formula, subtract received from sent.</p>
                                <div class="formula-box text-base">
                                    $$ P_L = 1,500 - 1,488 = 12 \text{ packets lost} $$
                                </div>
                            </li>
                            <li class="mt-4">
                                <strong>Calculate Loss Percentage:</strong>
                                <p>Using the second formula, divide lost by sent and multiply by 100.</p>
                                <div class="formula-box text-base">
                                    $$ \text{Loss \%} = \left( \frac{12}{1,500} \right) \times 100 = 0.008 \times 100 = 0.8\% $$
                                </div>
                            </li>
                        </ol>
                        <p>The result is a <strong>0.8% packet loss</strong>, which is considered a very good and stable connection for most purposes.</p>
                    </section>
                    <section>
                        <h2>Frequently Asked Questions (FAQ)</h2>
                        <details>
                            <summary>What is a good packet loss percentage?</summary>
                            <p>For most applications, a packet loss of <strong>0%</strong> is ideal. However, tolerance varies:</p>
                            <ul>
                                <li><strong>Online Gaming / VoIP:</strong> Anything above <strong>1%</strong> is noticeable and can cause lag spikes, "rubber-banding," or robotic-sounding audio.</li>
                                <li><strong>Video Streaming:</strong> Can tolerate up to <strong>2-5%</strong> due to buffering, but it will still cause occasional freezing or a drop in quality.</li>
                                <li><strong>General Browsing:</strong> A loss below <strong>2%</strong> is usually acceptable.</li>
                            </ul>
                            <p>A consistent loss above 5% indicates a significant network issue that needs investigation.</p>
                        </details>
                        <details>
                            <summary>What are the common causes of packet loss?</summary>
                            <p>Packet loss can be caused by many factors, including:</p>
                            <ul>
                                <li><strong>Network Congestion:</strong> The most common cause. Too much traffic on the network, causing routers to drop packets they can't handle.</li>
                                <li><strong>Faulty Hardware:</strong> A bad router, failing switch, or damaged Ethernet cable.</li>
                                <li><strong>Wi-Fi Interference:</strong> Poor signal strength, channel overlap with neighbors, or interference from other devices (like microwaves).</li>
                                <li><strong>Overloaded Devices:</strong> The router or your computer's CPU may be too busy to process all incoming packets.</li>
                                <li><strong>Software Bugs:</strong> Errors in the router's firmware or your device's network drivers.</li>
                            </ul>
                        </details>
                        <details>
                            <summary>How do I test for packet loss?</summary>
                            <p>You can use the <strong>ping</strong> command in your computer's terminal (Command Prompt on Windows, Terminal on macOS/Linux). To run a good test, send a large number of packets.</p>
                            <ul>
                                <li><strong>On Windows:</strong> Type <code>ping -n 100 google.com</code></li>
                                <li><strong>On macOS/Linux:</strong> Type <code>ping -c 100 google.com</code></li>
                            </ul>
                            <p>This will send 100 packets. When it's finished, the summary will show "Sent" and "Received" values. You can enter those numbers directly into this calculator.</p>
                        </details>
                        <details>
                            <summary>Does 0% packet loss mean my connection is perfect?</summary>
                            <p>Not necessarily. 0% packet loss is excellent, but it's only one part of network performance. The other two key metrics are:</p>
                            <ul>
                                <li><strong>Latency (Ping):</strong> The time it takes for a packet to travel to the server and back (measured in milliseconds). You can have 0% loss but still have a "laggy" connection if your latency is very high (e.g., 300ms).</li>
                                <li><strong>Jitter:</strong> The *variance* in your latency. An unstable connection where ping jumps from 20ms to 150ms and back is high jitter, which feels very disruptive.</li>
                            </ul>
                            <p>A good connection has low packet loss, low latency, and low jitter.</p>
                        </details>
                        <details>
                            <summary>Why can't 'Packets Received' be greater than 'Packets Sent'?</summary>
                            <p>It's physically impossible to receive more data packets than were originally transmitted in a single test. Packets are created at the source and sent; they can either arrive or get lost, but they cannot multiply in transit. If your test results show this, it's almost certainly an error in the testing software or a misreading of the data. Our calculator enforces this rule to ensure logical results.</p>
                        </details>
                    </section>

                    <div class="mt-8 pt-6 border-t border-gray-200 text-sm text-gray-600">
                        <p><strong>Tool developed by Ugo Candido.</strong><br>
                        Network engineering concepts and contents verified by the CalcDomain Editorial Board.</p>
                        <p>Last accuracy review: <time datetime="2025-10-26">October 26, 2025</time></p>
                    </div>
                </article>
            </section>

            <aside class="w-full lg:w-1/3">
                <div class="sticky top-10 space-y-6">
                    
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-4">What Packet Loss Tells You</h3>
                        <ul class="list-disc list-inside text-gray-700 space-y-2">
                            <li><strong>Gaming:</strong> High loss causes "lag spikes," "rubber-banding," and delayed actions.</li>
                            <li><strong>Video Calls:</strong> Leads to "robotic" audio, freezing video, and sudden call drops.</li>
                            <li><strong>Streaming:</strong> Causes endless buffering or a sudden drop to low-resolution video.</li>
                            <li><strong>Overall Health:</strong> A high, consistent packet loss signals an unstable connection.</li>
                        </ul>
                    </div>
                    
                    <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
                        Ad Placement (300×600)
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-4">Related Network Tools</h3>
                        <ul class="space-y-3 text-sm">
                            <li><a href="data-transfer-time.html" class="text-blue-600 hover:underline">Data Transfer Time Calculator</a></li>
                            <li><a href="bandwidth-calculator.html" class="text-blue-600 hover:underline">Bandwidth Calculator</a></li>
                            <li><a href="download-time-calculator.html" class="text-blue-600 hover:underline">Download Time Calculator</a></li>
                            <li><a href="subnet-calculator.html" class="text-blue-600 hover:underline">Subnet Calculator (IPv4)</a></li>
                        </ul>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <footer class="bg-white border-t mt-12">
        <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
            <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
            <div class="mt-4 space-x-4">
                <a href="about.html" class="hover:text-blue-600">About</a>
                <a href="contact.html" class="hover:text-blue-600">Contact</a>
                <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
                <a href="terms.html" class="hover:text-blue-600">Terms</a>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            /**
             * Funzione robusta per il rendering di KaTeX.
             * Tenta di eseguire il rendering. Se la libreria non è ancora
             * caricata (a causa di strane race condition), riprova
             * dopo un breve ritardo.
             */
            function attemptKatexRender(retryCount = 0) {
                if (typeof renderMathInElement === 'function') {
                    // La libreria è pronta, esegui il rendering
                    renderMathInElement(document.body, {
                        delimiters: [
                            {left: '$$', right: '$$', display: true},
                            {left: '$', right: '$', display: false}
                        ],
                        throwOnError: false // Impedisce che un errore LaTeX rompa lo script
                    });
                } else if (retryCount < 10) {
                    // Libreria non ancora pronta, riprova tra 50ms
                    setTimeout(() => attemptKatexRender(retryCount + 1), 50);
                }
                // Se fallisce 10 volte, si arrende (evita loop infiniti)
            }

            // Avvia il primo tentativo di rendering
            attemptKatexRender();
            
            // --- Elementi DOM ---
            const calculatorForm = document.getElementById('calculator-form');
            const sentInput = document.getElementById('packetsSent');
            const receivedInput = document.getElementById('packetsReceived');
            const sentError = document.getElementById('sentError');
            const receivedError = document.getElementById('receivedError');
            
            const resultsContainer = document.getElementById('results-container');
            const lostResult = document.getElementById('packetsLostResult');
            const percentageResult = document.getElementById('packetLossPercentageResult');
            const lossPercentageCard = document.getElementById('lossPercentageCard');
            const summaryResult = document.getElementById('result-summary');
            
            const resetButton = document.getElementById('resetButton');
            const tooltipToggle = document.getElementById('tooltip-toggle');
            const tooltipContent = document.getElementById('tooltip-content');
            
            const allInputs = [sentInput, receivedInput];
            const allErrors = [sentError, receivedError];

            // --- Funzioni di Utility (A11y e UX) ---

            /**
             * Mostra un messaggio di errore per un campo specifico.
             * Conforme a WCAG (Requisito 2.2)
             * @param {HTMLInputElement} inputEl - L'elemento input con errore.
             * @param {HTMLElement} errorEl - L'elemento dove mostrare l'errore.
             * @param {string} message - Il messaggio di errore.
             */
            function showError(inputEl, errorEl, message) {
                errorEl.textContent = message;
                errorEl.hidden = false;
                inputEl.setAttribute('aria-invalid', 'true');
                inputEl.setAttribute('aria-describedby', errorEl.id);
            }

            /**
             * Pulisce l'errore per un campo specifico.
             */
            function clearError(inputEl, errorEl) {
                errorEl.textContent = '';
                errorEl.hidden = true;
                inputEl.setAttribute('aria-invalid', 'false');
                inputEl.removeAttribute('aria-describedby');
                
                // Ripristina l'aria-describedby del tooltip se esiste
                if (inputEl.id === 'packetsReceived') {
                    inputEl.setAttribute('aria-describedby', tooltipContent.id);
                }
            }

            /**
             * Pulisce tutti gli errori del form.
             */
            function clearAllErrors() {
                clearError(sentInput, sentError);
                clearError(receivedInput, receivedError);
            }

            /**
             * Aggiorna la card dei risultati con colori condizionali.
             */
            function updateResultStyles(percentage) {
                // Rimuovi tutte le classi di stato prima di aggiungerne una nuova
                lossPercentageCard.classList.remove('good', 'warning', 'critical');

                if (percentage > 2) {
                    lossPercentageCard.classList.add('critical');
                } else if (percentage > 0.5) {
                    lossPercentageCard.classList.add('warning');
                } else {
                    lossPercentageCard.classList.add('good');
                }
            }

            // --- Funzioni di Validazione (Requisito 2.2) ---

            /**
             * Valida il campo "Packets Sent".
             * @returns {number|null} - Il valore parsato se valido, altrimenti null.
             */
            function validateSent() {
                clearError(sentInput, sentError);
                const val = sentInput.value;
                if (val === '') {
                    showError(sentInput, sentError, 'Packets Sent is required.');
                    return null;
                }
                const num = parseInt(val, 10);
                if (isNaN(num) || num < 0 || !Number.isInteger(num)) {
                    showError(sentInput, sentError, 'Must be a valid, non-negative whole number.');
                    return null;
                }
                return num;
            }

            /**
             * Valida il campo "Packets Received".
             * @param {number} sentValue - Il valore già validato di packetsSent.
             * @returns {number|null} - Il valore parsato se valido, altrimenti null.
             */
            function validateReceived(sentValue) {
                clearError(receivedInput, receivedError);
                const val = receivedInput.value;
                if (val === '') {
                    showError(receivedInput, receivedError, 'Packets Received is required.');
                    return null;
                }
                const num = parseInt(val, 10);
                if (isNaN(num) || num < 0 || !Number.isInteger(num)) {
                    showError(receivedInput, receivedError, 'Must be a valid, non-negative whole number.');
                    return null;
                }
                // Controllo logico incrociato
                if (sentValue !== null && num > sentValue) {
                    showError(receivedInput, receivedError, 'Received cannot be greater than Sent.');
                    return null;
                }
                return num;
            }

            // --- Logica Principale ---

            /**
             * Gestore del submit del form.
             */
            function handleCalculate(event) {
                event.preventDefault();
                
                // 1. Validazione
                const sent = validateSent();
                const received = validateReceived(sent);
                
                if (sent === null || received === null) {
                    resultsContainer.hidden = true; // Nascondi vecchi risultati se la validazione fallisce
                    return;
                }

                // 2. Calcolo
                const lost = sent - received;
                const percentage = (sent === 0) ? 0 : (lost / sent) * 100;

                // 3. Mostra Risultati
                lostResult.textContent = lost.toLocaleString('en-US');
                percentageResult.textContent = percentage.toFixed(2) + '%';
                
                updateResultStyles(percentage);
                resultsContainer.hidden = false;
                
                // 4. Annuncio A11y
                summaryResult.textContent = `Results: ${lost.toLocaleString('en-US')} packets lost, ${percentage.toFixed(2)} percent loss.`;
                
                // Opzionale: scrolla ai risultati su mobile
                if (window.innerWidth < 768) {
                    resultsContainer.scrollIntoView({ behavior: 'smooth' });
                }
            }

            /**
             * Gestore del reset del form.
             */
            function handleReset() {
                clearAllErrors();
                resultsContainer.hidden = true;
                lostResult.textContent = '—';
                percentageResult.textContent = '—';
                summaryResult.textContent = '';
                lossPercentageCard.classList.remove('good', 'warning', 'critical');
                sentInput.focus(); // Rimetti il focus sul primo campo
            }

            /**
             * Gestore del toggle del tooltip accessibile.
             */
            function handleTooltipToggle() {
                const isExpanded = tooltipToggle.getAttribute('aria-expanded') === 'true';
                tooltipToggle.setAttribute('aria-expanded', !isExpanded);
                tooltipContent.hidden = isExpanded;
            }

            // --- Event Listeners ---
            
            calculatorForm.addEventListener('submit', handleCalculate);
            resetButton.addEventListener('click', handleReset);
            
            // Validazione inline on-blur (Requisito 2.2)
            sentInput.addEventListener('blur', validateSent);
            receivedInput.addEventListener('blur', () => {
                const sent = parseInt(sentInput.value, 10);
                validateReceived(isNaN(sent) ? null : sent);
            });
            
            // Tooltip accessibile (Requisito 2.3)
            tooltipToggle.addEventListener('click', handleTooltipToggle);

            // Gestione Mobile Menu (dal template)
            const menuToggle = document.getElementById('mobile-menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            menuToggle.addEventListener('click', () => {
                const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
                menuToggle.setAttribute('aria-expanded', !isExpanded);
                mobileMenu.hidden = isExpanded;
            });
        });
    </script>

</body>
</html>
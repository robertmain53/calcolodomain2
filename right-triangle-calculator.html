<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Right Triangle Calculator — Sides, Angles, Area & Perimeter</title>
  <meta name="description" content="Professional right triangle calculator. Solve sides (legs, hypotenuse), angles, area, perimeter, inradius, circumradius from any valid pair of inputs. Includes diagram, formulas (LaTeX), glossary, worked example, and FAQ." />
  <link rel="canonical" href="https://calcdomain.com/right-triangle-calculator.html" />
  <meta name="author" content="Ugo Candido" />

  <!-- Icons / PWA (kept lightweight but present for consistency) -->
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <!-- Tailwind (utility-first, mobile-first) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Styles (inline critical, high-contrast, print-aware) -->
  <style>
    :root {
      --brand: #1d4ed8;
      --brand-contrast: #0b2f78;
    }
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif; }
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 0.75rem; }
    .prose h3 { font-size: 1.125rem; font-weight: 700; margin-top: 1.25rem; margin-bottom: 0.5rem; }
    .prose p { margin-bottom: 0.9rem; line-height: 1.7; }
    .prose ul, .prose ol { margin-left: 1.25rem; margin-bottom: 1rem; }
    .formula-box {
      background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 10px; padding: 1rem; overflow-x: auto;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    .result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 1rem; text-align: center; }
    .result-card h4 { font-size: 0.95rem; color: #374151; margin-bottom: 0.25rem; }
    .result-card p { font-size: 1.5rem; font-weight: 800; color: var(--brand); }
    .focus-ring:focus-visible { outline: 3px solid #38bdf8; outline-offset: 2px; }
    .tooltip { display: none; }
    .tooltip[data-open="true"] { display: block; }
    /* Prevent CLS in results */
    #results-shell { min-height: 520px; }
    @media (min-width: 768px) { #results-shell { min-height: 360px; } }
    @media print {
      header, footer, aside, .no-print { display: none !important; }
      #print-section { display: block !important; }
      body { color: #000; }
    }
  </style>

  <!-- JSON-LD: WebPage + WebApplication (Calculator) + Breadcrumb + FAQ + HowTo -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@graph":[
      {
        "@type":"WebPage",
        "@id":"https://calcdomain.com/right-triangle-calculator.html",
        "url":"https://calcdomain.com/right-triangle-calculator.html",
        "name":"Right Triangle Calculator — Sides, Angles, Area & Perimeter",
        "inLanguage":"en",
        "description":"Solve a right triangle from any valid pair of inputs. Returns legs, hypotenuse, angles, area, perimeter, inradius, circumradius. Includes diagram, formulas, glossary, and a worked example.",
        "author":{"@type":"Person","name":"Ugo Candido"},
        "publisher":{"@type":"Organization","name":"CalcDomain"}
      },
      {
        "@type":"WebApplication",
        "name":"Right Triangle Calculator",
        "applicationCategory":"Calculator",
        "operatingSystem":"Any",
        "url":"https://calcdomain.com/right-triangle-calculator.html",
        "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}
      },
      {
        "@type":"BreadcrumbList",
        "itemListElement":[
          {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
          {"@type":"ListItem","position":2,"name":"Math","item":"https://calcdomain.com/math.html"},
          {"@type":"ListItem","position":3,"name":"Geometry","item":"https://calcdomain.com/subcategories/math-geometry.html"},
          {"@type":"ListItem","position":4,"name":"Right Triangle Calculator","item":"https://calcdomain.com/right-triangle-calculator.html"}
        ]
      },
      {
        "@type":"FAQPage",
        "mainEntity":[
          {"@type":"Question","name":"What inputs do I need to solve a right triangle?","acceptedAnswer":{"@type":"Answer","text":"Any two independent values, such as two sides (a & b, or c & a), or one side and a non-right angle (a & A, c & A)."}},
          {"@type":"Question","name":"Are angles in degrees or radians?","acceptedAnswer":{"@type":"Answer","text":"You can choose degrees or radians. The calculator converts internally and validates that acute angles are between 0 and 90° (0 and π/2)."}},
          {"@type":"Question","name":"How accurate are the results?","acceptedAnswer":{"@type":"Answer","text":"Double-precision floating-point arithmetic is used. You can choose the number of decimal places for displayed results."}},
          {"@type":"Question","name":"What is the inradius of a right triangle?","acceptedAnswer":{"@type":"Answer","text":"The inradius is r = (a + b − c) / 2. It is also equal to area divided by semiperimeter."}},
          {"@type":"Question","name":"What is the circumradius of a right triangle?","acceptedAnswer":{"@type":"Answer","text":"For right triangles the circumcenter is the midpoint of the hypotenuse, so R = c / 2."}},
          {"@type":"Question","name":"Can I enter mixed units?","acceptedAnswer":{"@type":"Answer","text":"No. Use a single length unit per calculation to keep results consistent, then switch the unit dropdown to convert outputs."}},
          {"@type":"Question","name":"Why is my input rejected?","acceptedAnswer":{"@type":"Answer","text":"Inputs must be positive and consistent with right-triangle constraints (e.g., c must be the largest side; acute angles must be in (0, 90°))."}}
        ]
      },
      {
        "@type":"HowTo",
        "name":"Solve a Right Triangle",
        "description":"Step-by-step guide to solve a right triangle from two inputs.",
        "step":[
          {"@type":"HowToStep","name":"Choose input mode","text":"Select the pair you know: two sides, or one side plus one acute angle."},
          {"@type":"HowToStep","name":"Enter values","text":"Provide positive numbers and choose angle unit (degrees or radians) and length unit."},
          {"@type":"HowToStep","name":"Calculate","text":"The calculator applies Pythagoras and basic trigonometry to solve all unknowns."},
          {"@type":"HowToStep","name":"Review results","text":"Check sides, angles, area, perimeter, inradius and circumradius. Use the diagram and formulas to verify."}
        ]
      }
    ]
  }
  </script>
</head>

<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky per spec) -->
  <header class="bg-white border-b">
    <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
      <div class="flex items-center justify-between">
        <a href="index.html" class="text-2xl font-extrabold text-blue-600 focus-ring">CalcDomain</a>
        <div class="hidden md:flex items-center gap-6 text-sm">
          <a href="search.html" class="hover:text-blue-600 focus-ring">Advanced Search</a>
          <a href="index.html#categories" class="hover:text-blue-600 focus-ring">Categories</a>
        </div>
        <button id="menuBtn" class="md:hidden p-2 rounded focus-ring" aria-expanded="false" aria-controls="mobileNav" aria-label="Open menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" role="img" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
      <div id="mobileNav" class="md:hidden hidden mt-3">
        <a href="search.html" class="block py-2 hover:text-blue-600 focus-ring">Advanced Search</a>
        <a href="index.html#categories" class="block py-2 hover:text-blue-600 focus-ring">Categories</a>
      </div>
    </nav>
  </header>

  <main class="container mx-auto px-4 lg:px-6 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
      <!-- Main content -->
      <section class="w-full lg:w-2/3">
        <!-- Breadcrumb -->
        <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
          <a href="index.html" class="hover:text-blue-600 focus-ring">Home</a> &raquo;
          <a href="math.html" class="hover:text-blue-600 focus-ring">Math</a> &raquo;
          <a href="subcategories/math-geometry.html" class="hover:text-blue-600 focus-ring">Geometry</a> &raquo;
          <span class="text-gray-900">Right Triangle Calculator</span>
        </nav>

        <div id="print-section" class="bg-white p-6 rounded-lg shadow-sm">
          <h1 class="text-3xl font-extrabold text-gray-900 mb-2">right triangle calculator</h1>
          <p class="text-gray-700 mb-6">
            A precise, accessible calculator to solve any right triangle from two independent inputs. Built for engineers, teachers, and students who need reliable results and clear methodology.
          </p>

          <!-- Calculator -->
          <section id="calculator" aria-labelledby="calc-title">
            <h2 id="calc-title" class="sr-only">Calculator</h2>

            <!-- Mode & Units -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div>
                <label for="mode" class="block text-sm font-semibold text-gray-800">Known values *</label>
                <div class="flex items-center gap-2">
                  <select id="mode" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus-ring" aria-required="true">
                    <option value="ab">Two legs (a & b)</option>
                    <option value="ac">Hypotenuse c & leg a</option>
                    <option value="bc">Hypotenuse c & leg b</option>
                    <option value="aA">Leg a & angle A</option>
                    <option value="bB">Leg b & angle B</option>
                    <option value="cA">Hypotenuse c & angle A</option>
                    <option value="cB">Hypotenuse c & angle B</option>
                  </select>
                  <button type="button" class="ml-1 text-xs px-2 py-1 rounded border focus-ring" aria-expanded="false" aria-controls="mode-tip" data-tooltip>?</button>
                </div>
                <p id="mode-tip" class="tooltip text-xs text-gray-600 mt-1">
                  Choose the pair of quantities you already know. Angles A and B are the acute angles adjacent to legs a and b; C is the right angle.
                </p>
              </div>

              <div class="grid grid-cols-2 gap-3">
                <div>
                  <label for="lenUnit" class="block text-sm font-semibold text-gray-800">Length unit *</label>
                  <select id="lenUnit" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus-ring" aria-required="true">
                    <option value="m">m</option>
                    <option value="cm">cm</option>
                    <option value="mm">mm</option>
                    <option value="in">in</option>
                    <option value="ft">ft</option>
                  </select>
                </div>
                <div>
                  <label for="angUnit" class="block text-sm font-semibold text-gray-800">Angle unit *</label>
                  <select id="angUnit" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus-ring" aria-required="true">
                    <option value="deg">degrees</option>
                    <option value="rad">radians</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Inputs -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="inputs">
              <!-- a -->
              <div>
                <label for="a" class="block text-sm font-semibold text-gray-800">Leg a *</label>
                <div class="flex items-center gap-2">
                  <input type="number" inputmode="decimal" step="any" min="0" id="a" class="mt-1 w-full border border-gray-300 rounded-md px-3 py-2 focus-ring" aria-required="true" aria-describedby="a-err a-tip" />
                  <button type="button" class="ml-1 text-xs px-2 py-1 rounded border focus-ring" aria-expanded="false" aria-controls="a-tip" data-tooltip>?</button>
                </div>
                <p id="a-tip" class="tooltip text-xs text-gray-600 mt-1">Leg adjacent to angle A and opposite angle B.</p>
                <p id="a-err" class="text-sm text-red-700 mt-1" aria-live="polite"></p>
              </div>

              <!-- b -->
              <div>
                <label for="b" class="block text-sm font-semibold text-gray-800">Leg b *</label>
                <div class="flex items-center gap-2">
                  <input type="number" inputmode="decimal" step="any" min="0" id="b" class="mt-1 w-full border border-gray-300 rounded-md px-3 py-2 focus-ring" aria-required="true" aria-describedby="b-err b-tip" />
                  <button type="button" class="ml-1 text-xs px-2 py-1 rounded border focus-ring" aria-expanded="false" aria-controls="b-tip" data-tooltip>?</button>
                </div>
                <p id="b-tip" class="tooltip text-xs text-gray-600 mt-1">Leg adjacent to angle B and opposite angle A.</p>
                <p id="b-err" class="text-sm text-red-700 mt-1" aria-live="polite"></p>
              </div>

              <!-- c -->
              <div>
                <label for="c" class="block text-sm font-semibold text-gray-800">Hypotenuse c *</label>
                <div class="flex items-center gap-2">
                  <input type="number" inputmode="decimal" step="any" min="0" id="c" class="mt-1 w-full border border-gray-300 rounded-md px-3 py-2 focus-ring" aria-required="true" aria-describedby="c-err c-tip" />
                  <button type="button" class="ml-1 text-xs px-2 py-1 rounded border focus-ring" aria-expanded="false" aria-controls="c-tip" data-tooltip>?</button>
                </div>
                <p id="c-tip" class="tooltip text-xs text-gray-600 mt-1">The side opposite the right angle; must be the largest side.</p>
                <p id="c-err" class="text-sm text-red-700 mt-1" aria-live="polite"></p>
              </div>

              <!-- A -->
              <div>
                <label for="A" class="block text-sm font-semibold text-gray-800">Angle A *</label>
                <div class="flex items-center gap-2">
                  <input type="number" inputmode="decimal" step="any" id="A" class="mt-1 w-full border border-gray-300 rounded-md px-3 py-2 focus-ring" aria-required="true" aria-describedby="A-err A-tip" />
                  <button type="button" class="ml-1 text-xs px-2 py-1 rounded border focus-ring" aria-expanded="false" aria-controls="A-tip" data-tooltip>?</button>
                </div>
                <p id="A-tip" class="tooltip text-xs text-gray-600 mt-1">Acute angle opposite leg a (0–90° or 0–π/2).</p>
                <p id="A-err" class="text-sm text-red-700 mt-1" aria-live="polite"></p>
              </div>

              <!-- B -->
              <div>
                <label for="B" class="block text-sm font-semibold text-gray-800">Angle B *</label>
                <div class="flex items-center gap-2">
                  <input type="number" inputmode="decimal" step="any" id="B" class="mt-1 w-full border border-gray-300 rounded-md px-3 py-2 focus-ring" aria-required="true" aria-describedby="B-err B-tip" />
                  <button type="button" class="ml-1 text-xs px-2 py-1 rounded border focus-ring" aria-expanded="false" aria-controls="B-tip" data-tooltip>?</button>
                </div>
                <p id="B-tip" class="tooltip text-xs text-gray-600 mt-1">Acute angle opposite leg b; A + B = 90°.</p>
                <p id="B-err" class="text-sm text-red-700 mt-1" aria-live="polite"></p>
              </div>

              <!-- Precision -->
              <div>
                <label for="dp" class="block text-sm font-semibold text-gray-800">Decimal places</label>
                <select id="dp" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus-ring" aria-describedby="dp-tip">
                  <option>0</option><option>1</option><option selected>2</option><option>3</option><option>4</option><option>6</option>
                </select>
                <p id="dp-tip" class="text-xs text-gray-600 mt-1">Affects display only (calculations use double precision).</p>
              </div>

              <!-- Actions -->
              <div class="flex gap-3 items-end">
                <button id="solveBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-5 py-3 rounded focus-ring" type="button">Calculate</button>
                <button id="clearBtn" class="bg-white border border-gray-300 hover:border-gray-400 text-gray-800 font-semibold px-5 py-3 rounded focus-ring" type="button">Clear</button>
              </div>
            </div>

            <!-- Diagram -->
            <div class="mt-6">
              <h3 class="font-semibold text-gray-900 mb-2">Diagram</h3>
              <div class="bg-white border border-gray-200 rounded-lg p-4">
                <svg id="diagram" viewBox="0 0 240 160" role="img" aria-label="Right triangle diagram with sides a, b, hypotenuse c" class="w-full h-auto">
                  <!-- Axes / outline -->
                  <polygon points="20,140 220,140 20,20" fill="#dbeafe" stroke="#1d4ed8" stroke-width="2"></polygon>
                  <!-- Right angle box -->
                  <rect x="20" y="120" width="20" height="20" fill="#fff" stroke="#1f2937" stroke-width="1"></rect>
                  <!-- Labels -->
                  <text id="lbl-a" x="120" y="155" text-anchor="middle" fill="#111827" font-size="12">a</text>
                  <text id="lbl-b" x="5" y="80" text-anchor="start" fill="#111827" font-size="12">b</text>
                  <text id="lbl-c" x="135" y="65" text-anchor="middle" fill="#111827" font-size="12">c</text>
                  <text x="30" y="135" fill="#111827" font-size="12">C = 90°</text>
                  <text id="lbl-A" x="40" y="30" fill="#111827" font-size="12">A</text>
                  <text id="lbl-B" x="205" y="130" fill="#111827" font-size="12">B</text>
                </svg>
              </div>
            </div>
          </section>

          <!-- Results -->
          <section id="results-shell" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6">
            <h2 class="font-bold text-xl text-blue-900 mb-4">Results</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
              <div class="result-card"><h4>Leg a</h4><p id="res-a">—</p></div>
              <div class="result-card"><h4>Leg b</h4><p id="res-b">—</p></div>
              <div class="result-card"><h4>Hypotenuse c</h4><p id="res-c">—</p></div>
              <div class="result-card"><h4>Angle A</h4><p id="res-A">—</p></div>
              <div class="result-card"><h4>Angle B</h4><p id="res-B">—</p></div>
              <div class="result-card"><h4>Area</h4><p id="res-area">—</p></div>
              <div class="result-card"><h4>Perimeter</h4><p id="res-perim">—</p></div>
              <div class="result-card"><h4>Inradius r</h4><p id="res-inr">—</p></div>
              <div class="result-card"><h4>Circumradius R</h4><p id="res-cir">—</p></div>
            </div>
          </section>
        </div>

        <!-- Authoritative Content Ecosystem -->
        <article class="bg-white p-6 rounded-lg shadow-sm mt-8 prose">
          <h2>Data Source & Methodology</h2>
          <p><strong>AuthoritativeDataSource:</strong> Euclidean right-triangle identities and Pythagorean Theorem as presented in
            <a class="text-blue-700 underline" href="https://dlmf.nist.gov/4.17" rel="nofollow">NIST Digital Library of Mathematical Functions</a> (Section 4: Trigonometric Functions, last updated 2023) and standard geometry texts.
            <br><em>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</em>
          </p>

          <h2>The formulas explained</h2>
          <div class="formula-box">
\[
\begin{aligned}
&\textbf{Pythagoras:} && c=\sqrt{a^2+b^2} \\
&\textbf{Angles:} && \tan A=\frac{a}{b},\quad \tan B=\frac{b}{a},\quad A+B=\frac{\pi}{2} \\
&\textbf{From hypotenuse:} && a=c\sin A=c\cos B,\quad b=c\cos A=c\sin B \\
&\textbf{Area:} && \mathcal{A}=\frac{ab}{2} \\
&\textbf{Perimeter:} && P=a+b+c \\
&\textbf{Inradius:} && r=\frac{a+b-c}{2}=\frac{\mathcal{A}}{s},\ \ s=\frac{a+b+c}{2} \\
&\textbf{Circumradius (right triangle):} && R=\frac{c}{2}
\end{aligned}
\]
          </div>

          <h2>Glossary of variables</h2>
          <ul>
            <li><strong>a</strong>: leg opposite angle A, adjacent to B (length).</li>
            <li><strong>b</strong>: leg opposite angle B, adjacent to A (length).</li>
            <li><strong>c</strong>: hypotenuse, opposite right angle C (length).</li>
            <li><strong>A</strong>, <strong>B</strong>: acute angles, \(A+B=90^\circ\).</li>
            <li><strong>Area</strong> \(\mathcal{A}=\frac{ab}{2}\); <strong>Perimeter</strong> \(P=a+b+c\).</li>
            <li><strong>Inradius</strong> \(r=\frac{a+b-c}{2}\); <strong>Circumradius</strong> \(R=\frac{c}{2}\).</li>
          </ul>

          <h2>How it works: a step-by-step example</h2>
          <h3>Example: given leg a = 3 m and leg b = 4 m</h3>
          <ol>
            <li>By Pythagoras: \(c=\sqrt{3^2+4^2}=5\ \text{m}\).</li>
            <li>\(A=\arctan(a/b)=\arctan(3/4)\approx 36.87^\circ\); \(B=90^\circ-A\approx 53.13^\circ\).</li>
            <li>Area \(=\frac{ab}{2}=\frac{3\cdot 4}{2}=6\ \text{m}^2\); Perimeter \(=3+4+5=12\ \text{m}\).</li>
            <li>Inradius \(r=\frac{3+4-5}{2}=1\ \text{m}\); Circumradius \(R=c/2=2.5\ \text{m}\).</li>
          </ol>

          <h2>Frequently asked questions</h2>
          <details>
            <summary>What inputs are valid pairs?</summary>
            <p>Two sides (a & b, a & c, b & c), or one side plus one acute angle (A or B). The right angle C is always 90° and is not an input.</p>
          </details>
          <details>
            <summary>How do I pick A vs B?</summary>
            <p>A is opposite leg a; B is opposite leg b. Swapping a and b swaps A and B.</p>
          </details>
          <details>
            <summary>Does the calculator accept radians?</summary>
            <p>Yes. Choose the angle unit. Inputs are validated in (0, 90°) or (0, π/2).</p>
          </details>
          <details>
            <summary>Can results be shown in different units?</summary>
            <p>Select a length unit to format outputs. For mixed-unit problems, convert values before input.</p>
          </details>
          <details>
            <summary>Why is r negative in my manual check?</summary>
            <p>If \(r=(a+b-c)/2\) were negative, your sides violate triangle inequality or c is not the largest side.</p>
          </details>

          <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700">
            <p><strong>Tool developed by Ugo Candido.</strong> Content checked by CalcDomain Editorial Board.<br>
              Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
          </div>
        </article>
      </section>

      <!-- Sidebar -->
      <aside class="w-full lg:w-1/3">
        <div class="sticky top-24 space-y-6 no-print">
          <div class="bg-white p-6 rounded-lg shadow-sm">
            <h3 class="font-bold text-lg mb-3">Why this tool</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
              <li>Accepts all standard input pairs with instant validation.</li>
              <li>Clear diagram + full formula set for professional use.</li>
              <li>Accessible (WCAG 2.1 AA) and mobile-first.</li>
            </ul>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-sm">
            <h3 class="font-bold text-lg mb-3">Related geometry tools</h3>
            <ul class="space-y-2 text-sm">
              <li><a class="text-blue-700 underline" href="triangle-calculator.html">General Triangle Calculator</a></li>
              <li><a class="text-blue-700 underline" href="pythagorean-triplets.html">Pythagorean Triplets Generator</a></li>
              <li><a class="text-blue-700 underline" href="trigonometry-solver.html">Trigonometry Solver</a></li>
            </ul>
          </div>
          <div class="bg-gray-200 h-60 rounded-lg flex items-center justify-center text-gray-600">
            Ad Placement (300×250)
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-gray-700 text-sm">
      <p>&copy; 2025 CalcDomain. All rights reserved.</p>
      <div class="mt-3 space-x-4">
        <a href="about.html" class="hover:text-blue-600 focus-ring">About</a>
        <a href="contact.html" class="hover:text-blue-600 focus-ring">Contact</a>
        <a href="privacy.html" class="hover:text-blue-600 focus-ring">Privacy</a>
        <a href="terms.html" class="hover:text-blue-600 focus-ring">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator Logic (defer, at end; a11y-friendly; on-blur validation) -->
  <script defer>
    (function () {
      const $ = (id) => document.getElementById(id);

      // Elements
      const els = {
        menuBtn: $("menuBtn"), mobileNav: $("mobileNav"),
        mode: $("mode"), lenUnit: $("lenUnit"), angUnit: $("angUnit"),
        a: $("a"), b: $("b"), c: $("c"), A: $("A"), B: $("B"),
        dp: $("dp"), solve: $("solveBtn"), clear: $("clearBtn"),
        // errors
        aErr: $("a-err"), bErr: $("b-err"), cErr: $("c-err"), AErr: $("A-err"), BErr: $("B-err"),
        // results
        ra: $("res-a"), rb: $("res-b"), rc: $("res-c"),
        rA: $("res-A"), rB: $("res-B"), rArea: $("res-area"),
        rPer: $("res-perim"), rInr: $("res-inr"), rCir: $("res-cir"),
        // diagram labels
        lblA: $("lbl-A"), lblB: $("lbl-B"), lbl_a: $("lbl-a"), lbl_b: $("lbl-b"), lbl_c: $("lbl-c")
      };

      // Mobile menu
      els.menuBtn?.addEventListener("click", () => {
        const open = els.mobileNav.classList.toggle("hidden") ? "false" : "true";
        els.menuBtn.setAttribute("aria-expanded", open);
      });

      // Tooltips
      document.querySelectorAll("[data-tooltip]").forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("aria-controls");
          const tip = document.getElementById(id);
          const isOpen = tip.getAttribute("data-open")==="true";
          tip.setAttribute("data-open", String(!isOpen));
          btn.setAttribute("aria-expanded", String(!isOpen));
        });
        btn.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") { e.preventDefault(); btn.click(); }
        });
      });

      // UI behavior: enable only fields for selected mode
      const fields = ["a","b","c","A","B"];
      const modeMap = {
        ab: ["a","b"], ac: ["a","c"], bc: ["b","c"],
        aA: ["a","A"], bB: ["b","B"], cA: ["c","A"], cB: ["c","B"]
      };
      function updateFieldStates() {
        const m = els.mode.value;
        fields.forEach(id => {
          const input = els[id];
          const required = modeMap[m].includes(id);
          input.disabled = !required;
          input.setAttribute("aria-required", String(required));
          input.classList.toggle("bg-gray-100", !required);
          if (!required) { input.value = ""; clearError(id); }
        });
      }
      els.mode.addEventListener("change", updateFieldStates);
      updateFieldStates();

      // Validation helpers
      const toRad = (x) => els.angUnit.value === "deg" ? (x*Math.PI/180) : x;
      const toDeg = (x) => els.angUnit.value === "deg" ? (x*180/Math.PI) : x;
      const fmtAngle = (x) => {
        const dp = +els.dp.value;
        return els.angUnit.value === "deg" ? (x.toFixed(dp) + "°") : (x.toFixed(dp) + " rad");
      };
      const lenUnit = () => els.lenUnit.value;

      const dpNum = () => +els.dp.value;
      const fmtLen = (x) => isFinite(x) ? x.toFixed(dpNum()) + " " + lenUnit() : "—";
      const fmtArea = (x) => isFinite(x) ? x.toFixed(dpNum()) + " " + lenUnit() + "²" : "—";

      function setError(id, msg) {
        const errEl = $("#" + id + "-err");
        const input = els[id];
        if (errEl) { errEl.textContent = msg || ""; }
        if (input) { input.setAttribute("aria-invalid", msg ? "true" : "false"); }
      }
      function clearError(id) { setError(id, ""); }

      function validateOnBlur(id, testFn) {
        const input = els[id];
        input.addEventListener("blur", () => {
          const val = input.value.trim();
          if (val === "" && !input.hasAttribute("aria-required")) { clearError(id); return; }
          const err = testFn(val);
          if (err) setError(id, err); else clearError(id);
        });
      }

      // Specific validations
      const positive = (label) => (v) => {
        if (v === "") return `${label} is required. Enter a number.`;
        const n = +v;
        if (!(isFinite(n))) return `${label} must be a valid number.`;
        if (n <= 0) return `${label} must be greater than 0.`;
        return "";
      };
      const acuteAngle = (label) => (v) => {
        if (v === "") return `${label} is required. Enter a number.`;
        const n = +v;
        if (!isFinite(n)) return `${label} must be a valid number.`;
        if (els.angUnit.value === "deg") {
          if (n <= 0 || n >= 90) return `${label} must be in (0, 90°).`;
        } else {
          if (n <= 0 || n >= Math.PI/2) return `${label} must be in (0, π/2).`;
        }
        return "";
      };

      // Attach inline validators
      validateOnBlur("a", positive("Leg a"));
      validateOnBlur("b", positive("Leg b"));
      validateOnBlur("c", positive("Hypotenuse c"));
      validateOnBlur("A", acuteAngle("Angle A"));
      validateOnBlur("B", acuteAngle("Angle B"));

      // Solve
      els.solve.addEventListener("click", () => {
        const m = els.mode.value;
        // Gather
        const a = parseFloat(els.a.value);
        const b = parseFloat(els.b.value);
        const c = parseFloat(els.c.value);
        const A = parseFloat(els.A.value);
        const B = parseFloat(els.B.value);

        // Local validators for required fields in the chosen mode
        let hasError = false;
        for (const id of modeMap[m]) {
          const val = els[id].value.trim();
          if (id === "A" || id === "B") {
            const err = acuteAngle("Angle " + id)(val);
            if (err) { setError(id, err); hasError = true; }
            else clearError(id);
          } else {
            const err = positive((id === "c" ? "Hypotenuse c" : ("Leg " + id)))(val);
            if (err) { setError(id, err); hasError = true; }
            else clearError(id);
          }
        }
        if (hasError) return;

        // Compute
        let aa, bb, cc, AA, BB;

        try {
          switch (m) {
            case "ab":
              aa = a; bb = b; cc = Math.hypot(aa, bb);
              AA = Math.atan2(aa, bb); BB = Math.atan2(bb, aa);
              break;
            case "ac":
              aa = a; cc = c;
              if (!(cc > aa)) throw new Error("Hypotenuse must be the largest side (c > a).");
              bb = Math.sqrt(cc*cc - aa*aa);
              AA = Math.asin(aa/cc); BB = Math.acos(aa/cc);
              break;
            case "bc":
              bb = b; cc = c;
              if (!(cc > bb)) throw new Error("Hypotenuse must be the largest side (c > b).");
              aa = Math.sqrt(cc*cc - bb*bb);
              BB = Math.asin(bb/cc); AA = Math.acos(bb/cc);
              break;
            case "aA": {
              aa = a; const Ar = toRad(A);
              bb = aa / Math.tan(Ar);
              cc = aa / Math.sin(Ar);
              AA = Ar; BB = Math.PI/2 - Ar;
              break;
            }
            case "bB": {
              bb = b; const Br = toRad(B);
              aa = bb / Math.tan(Br);
              cc = bb / Math.sin(Br);
              BB = Br; AA = Math.PI/2 - Br;
              break;
            }
            case "cA": {
              cc = c; const Ar = toRad(A);
              aa = cc * Math.sin(Ar);
              bb = cc * Math.cos(Ar);
              AA = Ar; BB = Math.PI/2 - Ar;
              break;
            }
            case "cB": {
              cc = c; const Br = toRad(B);
              bb = cc * Math.sin(Br);
              aa = cc * Math.cos(Br);
              BB = Br; AA = Math.PI/2 - Br;
              break;
            }
          }

          // Sanity checks
          if (!(aa>0 && bb>0 && cc>0)) throw new Error("Computed sides are not positive; check inputs.");
          if (!(cc > aa && cc > bb)) throw new Error("Hypotenuse must be the largest side.");
          if (Math.abs(cc - Math.hypot(aa, bb))/cc > 1e-10) throw new Error("Values are inconsistent; recheck inputs.");

          renderResults(aa, bb, cc, AA, BB);
        } catch (e) {
          // Surface a generic message and try to hint
          alert("Input combination is inconsistent for a right triangle. " + (e?.message || ""));
        }
      });

      // Clear
      els.clear.addEventListener("click", () => {
        ["a","b","c","A","B"].forEach(id => { els[id].value = ""; clearError(id); });
        ["ra","rb","rc","rA","rB","rArea","rPer","rInr","rCir"].forEach(id => els[id.replace("r","res-")]?.textContent);
        showResults(null);
      });

      function renderResults(a, b, c, A, B) {
        // Results
        els.ra.textContent = fmtLen(a);
        els.rb.textContent = fmtLen(b);
        els.rc.textContent = fmtLen(c);

        const Ad = (els.angUnit.value === "deg") ? (A*180/Math.PI) : A;
        const Bd = (els.angUnit.value === "deg") ? (B*180/Math.PI) : B;
        els.rA.textContent = fmtAngle(Ad);
        els.rB.textContent = fmtAngle(Bd);

        const area = a*b/2;
        const per = a+b+c;
        const inr = (a + b - c)/2;
        const cir = c/2;

        els.rArea.textContent = fmtArea(area);
        els.rPer.textContent = fmtLen(per);
        els.rInr.textContent = fmtLen(inr);
        els.rCir.textContent = fmtLen(cir);

        // Diagram labels (lightweight updates)
        $("lbl-a").textContent = "a = " + a.toFixed(dpNum());
        $("lbl-b").textContent = "b = " + b.toFixed(dpNum());
        $("lbl-c").textContent = "c = " + c.toFixed(dpNum());
        $("lbl-A").textContent = "A = " + (els.angUnit.value==="deg" ? (Ad.toFixed(dpNum())+"°") : (Ad.toFixed(dpNum())+" rad"));
        $("lbl-B").textContent = "B = " + (els.angUnit.value==="deg" ? (Bd.toFixed(dpNum())+"°") : (Bd.toFixed(dpNum())+" rad"));

        showResults(true);
      }

      function showResults(ok) {
        if (!ok) {
          ["res-a","res-b","res-c","res-A","res-B","res-area","res-perim","res-inr","res-cir"].forEach(id => $(id).textContent = "—");
          $("lbl-a").textContent = "a";
          $("lbl-b").textContent = "b";
          $("lbl-c").textContent = "c";
          $("lbl-A").textContent = "A";
          $("lbl-B").textContent = "B";
        }
      }

      // Unit/angle changes reformat existing numbers
      ["lenUnit","angUnit","dp"].forEach(id => {
        $(id).addEventListener("change", () => {
          // If we have numeric results in hidden memory? Recalculate if inputs present.
          const req = modeMap[els.mode.value];
          if (req.every(id => els[id].value.trim() !== "")) {
            els.solve.click();
          }
        });
      });

      // Initialize diagram captions
      showResults(false);
    })();
  </script>
</body>
</html>

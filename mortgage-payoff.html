<!DOCTYPE html>
<html lang="en">
<head> 
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
  <meta charset="utf-8"/>
  <title>Mortgage Payoff Calculator | Extra Payments, Time Saved & Interest Savings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="Mortgage payoff calculator: see how extra monthly or one-time payments shorten your loan term and save interest. Professional, mobile-first, and WCAG-compliant."/>
  <meta name="author" content="Ugo Candido"/>
  <link rel="canonical" href="https://calcdomain.com/mortgage-payoff.html"/>
  <meta name="theme-color" content="#ffffff"/>
  <meta name="robots" content="index,follow"/>

  <!-- Tailwind + Inter (from blueprint) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    body{font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .prose{max-width:72ch}
    .prose h2{font-size:1.5rem;font-weight:700;margin-top:2rem;margin-bottom:.75rem}
    .prose h3{font-weight:700;margin-top:1.5rem}
    .prose .formula{background:#EEF2F7;border:1px solid #E2E8F0;border-radius:10px;padding:14px;overflow:auto;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    /* Search styles from blueprint */
    .search-highlight{background:linear-gradient(120deg,#fbbf24 0%,#f59e0b 100%);padding:2px 4px;border-radius:4px;font-weight:600;color:#78350f}
    #search-results{background:#fff;border:1px solid #e5e7eb;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.1);max-height:400px;overflow-y:auto}
    #search-results a{display:block;padding:16px;border-bottom:1px solid #f3f4f6;transition:.2s;text-decoration:none}
    #search-results a:last-child{border-bottom:none}
    #search-results a:hover{background:#f8fafc;transform:translateX(4px)}
    #search-results a:focus{background:#eff6ff;outline:2px solid #3b82f6;outline-offset:-2px}
    #search-results h3{margin:0 0 8px;font-size:16px;font-weight:600;color:#1f2937}
    #search-results p{margin:0 0 8px;font-size:14px;color:#6b7280;line-height:1.4}
    #search-results .bg-blue-100{background:#dbeafe!important;color:#1e40af!important;font-size:12px;padding:4px 8px;border-radius:6px;font-weight:500}
    input[type="search"]:focus{box-shadow:0 0 0 3px rgba(59,130,246,.1);border-color:#3b82f6}
    @media (max-width:768px){
      #search-results{max-height:300px;margin-top:8px;border-radius:8px}
      #search-results a{padding:12px}
      #search-results h3{font-size:15px}
      #search-results p{font-size:13px}
    }
    @keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    #search-results.show{animation:fadeInUp .3s ease-out}
    #search-results::-webkit-scrollbar{width:6px}
    #search-results::-webkit-scrollbar-track{background:#f1f5f9}
    #search-results::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}
    #search-results::-webkit-scrollbar-thumb:hover{background:#94a3b8}
  </style>

  <!-- JSON-LD (WebPage + HowTo + FAQ) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Mortgage Payoff Calculator",
    "url":"https://calcdomain.com/mortgage-payoff.html",
    "description":"Interactive mortgage payoff calculator to quantify time and interest savings from extra monthly or one-time payments.",
    "author":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"},
    "mainEntity":[
      {
        "@type":"HowTo",
        "name":"How the Mortgage Payoff Calculator works — a step-by-step example",
        "description":"This example shows how a $300,000 balance at 6% APR with 25 years remaining changes when adding $200 extra per month.",
        "step":[
          {"@type":"HowToStep","name":"Enter current loan details","text":"Current balance: 300000; APR: 6%; Remaining term: 25 years 0 months."},
          {"@type":"HowToStep","name":"Review the scheduled payment","text":"The calculator computes the standard monthly payment based on balance, APR, and remaining term."},
          {"@type":"HowToStep","name":"Choose extra payment","text":"Select 'Monthly extra' and enter 200."},
          {"@type":"HowToStep","name":"View savings","text":"New payoff time is shorter. The tool shows months saved and total interest saved, plus the new payoff date."}
        ]
      },
      {
        "@type":"FAQPage",
        "mainEntity":[
          {"@type":"Question","name":"What does the mortgage payoff calculator do?","acceptedAnswer":{"@type":"Answer","text":"It estimates how extra payments—monthly or one-time—shorten your payoff time and reduce total interest on a fixed-rate mortgage."}},
          {"@type":"Question","name":"Does making one extra payment per year help?","acceptedAnswer":{"@type":"Answer","text":"Yes. Even an annual lump sum applied to principal can shave months off your term and save interest, especially early in the loan."}},
          {"@type":"Question","name":"Are results exact to the cent?","acceptedAnswer":{"@type":"Answer","text":"They are high-precision estimates. Actual lender amortization may differ slightly due to rounding, payment dates, escrow, or fees."}},
          {"@type":"Question","name":"Can I input a 0% interest rate?","acceptedAnswer":{"@type":"Answer","text":"Yes. The calculator switches to a zero-interest formula where monthly payment equals principal divided by remaining months."}},
          {"@type":"Question","name":"Will prepayment penalties affect the result?","acceptedAnswer":{"@type":"Answer","text":"Potential prepayment penalties are not included. Check your note and lender; penalties can reduce or offset savings."}},
          {"@type":"Question","name":"Is PMI included?","acceptedAnswer":{"@type":"Answer","text":"No. This tool models principal and interest only. Taxes, insurance, and PMI are excluded for clarity."}}
        ]
      }
    ]
  }
  </script>

  <!-- MathJax for formulas -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['\\[','\\]']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

  <!-- (Optional) preload hooks from blueprint -->
  <link rel="preload" href="/assets/js/mobile-menu.js" as="script">
  <link rel="preload" href="/assets/js/page-enhancements.js" as="script">
</head>
<body class="bg-gray-50 text-gray-800">

  <!-- Header (from blueprint) -->
  <header class="bg-white shadow-sm sticky top-0 z-50">
    <nav class="container mx-auto px-4 lg:px-6 py-4">
      <div class="flex justify-between items-center">
        <a href="index.html" class="text-2xl font-extrabold text-blue-600">CalcDomain</a>

        <!-- Desktop search -->
        <div class="w-full max-w-md hidden md:block mx-8">
          <div class="relative">
            <input type="search" id="search-input" placeholder="Search for a calculator..."
                   class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                   autocomplete="off">
            <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
          </div>
        </div>

        <div class="hidden md:flex items-center space-x-6">
          <a href="search.html" class="text-gray-700 hover:text-blue-600 transition-colors">Advanced Search</a>
          <a href="index.html#categories" class="text-gray-700 hover:text-blue-600 transition-colors">Categories</a>
        </div>

        <button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>

      <!-- Mobile menu -->
      <div id="mobile-menu" class="md:hidden mt-4 hidden">
        <div class="mb-4">
          <div class="relative">
            <input type="search" id="mobile-search-input" placeholder="Search calculators..."
                   class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
        </div>
        <div class="space-y-2">
          <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
          <a href="#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main -->
  <div class="container mx-auto px-4 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
      <!-- Left: Calculator + Content -->
      <main class="w-full lg:w-2/3">
        <!-- Breadcrumbs -->
        <nav class="text-sm mb-4 text-gray-600" aria-label="Breadcrumb">
          <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
          <a href="finance.html" class="hover:text-blue-600">Finance</a> &raquo;
          <a href="mortgage-real-estate.html" class="hover:text-blue-600">Mortgage &amp; Real Estate</a> &raquo;
          <span class="text-gray-900 font-medium">Mortgage Payoff Calculator</span>
        </nav>

        <!-- Calculator card -->
        <section class="bg-white p-6 rounded-lg shadow-md" aria-labelledby="calc-title">
          <h1 id="calc-title" class="text-3xl font-extrabold mb-2 text-slate-800">Mortgage Payoff Calculator</h1>
          <p class="text-gray-600 mb-6">Estimate how extra payments—monthly or one-time—can shorten your mortgage term and reduce total interest. Built for homeowners, buyers, and financial pros seeking precise, accessible results fast.</p>

          <!-- Inputs -->
          <div id="calculator-ui" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="balance" class="block text-sm font-medium text-gray-800">Current principal balance *</label>
              <div class="relative">
                <input type="number" id="balance" inputmode="decimal" step="0.01" min="0" placeholder="e.g., 300000"
                       class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                       aria-describedby="balanceHint balanceErr" aria-required="true">
                <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">$</span>
              </div>
              <p id="balanceHint" class="text-xs text-gray-500 mt-1">Exclude escrow, fees, and interest due—principal only.</p>
              <p id="balanceErr" class="text-xs text-red-600 min-h-[1rem]" role="alert" aria-live="polite"></p>
            </div>

            <div>
              <label for="apr" class="block text-sm font-medium text-gray-800">Annual interest rate (APR) *</label>
              <div class="relative">
                <input type="number" id="apr" inputmode="decimal" step="0.001" min="0" max="100" placeholder="e.g., 6.5"
                       class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                       aria-describedby="aprHint aprErr" aria-required="true">
                <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">%</span>
              </div>
              <p id="aprHint" class="text-xs text-gray-500 mt-1">Nominal APR; converted to a monthly rate \( i = \text{APR}/100/12 \).</p>
              <p id="aprErr" class="text-xs text-red-600 min-h-[1rem]" role="alert" aria-live="polite"></p>
            </div>

            <div class="md:col-span-2">
              <label class="block text-sm font-medium text-gray-800">Remaining term *</label>
              <div class="grid grid-cols-2 gap-3">
                <input type="number" id="years" inputmode="numeric" step="1" min="0" max="50" placeholder="Years"
                       class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                       aria-describedby="termHint termErr" aria-required="true">
                <input type="number" id="months" inputmode="numeric" step="1" min="0" max="11" placeholder="Months"
                       class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                       aria-describedby="termHint termErr" aria-required="true">
              </div>
              <p id="termHint" class="text-xs text-gray-500 mt-1">Enter years and months left. At least one must be &gt; 0.</p>
              <p id="termErr" class="text-xs text-red-600 min-h-[1rem]" role="alert" aria-live="polite"></p>
            </div>

            <div class="md:col-span-2">
              <fieldset>
                <legend class="block text-sm font-semibold text-gray-800 mb-2">Extra payment type</legend>
                <div class="flex flex-wrap gap-2">
                  <label class="inline-flex items-center gap-2 border rounded-md px-3 py-2">
                    <input type="radio" name="extraType" id="extraNone" value="none" checked>
                    <span>None</span>
                  </label>
                  <label class="inline-flex items-center gap-2 border rounded-md px-3 py-2">
                    <input type="radio" name="extraType" id="extraMonthly" value="monthly">
                    <span>Monthly extra</span>
                  </label>
                  <label class="inline-flex items-center gap-2 border rounded-md px-3 py-2">
                    <input type="radio" name="extraType" id="extraOnce" value="once">
                    <span>One-time lump sum</span>
                  </label>
                </div>
              </fieldset>
            </div>

            <div id="monthlyExtraGroup" hidden>
              <label for="monthlyExtra" class="block text-sm font-medium text-gray-800">Extra amount per month</label>
              <div class="relative">
                <input type="number" id="monthlyExtra" inputmode="decimal" step="0.01" min="0" placeholder="e.g., 200"
                       class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                       aria-describedby="monthlyExtraErr">
                <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">$</span>
              </div>
              <p id="monthlyExtraErr" class="text-xs text-red-600 min-h-[1rem]" role="alert" aria-live="polite"></p>
            </div>

            <div id="onceGroup" hidden class="md:col-span-2">
              <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                <div class="md:col-span-2">
                  <label for="lumpSum" class="block text-sm font-medium text-gray-800">One-time extra amount</label>
                  <div class="relative">
                    <input type="number" id="lumpSum" inputmode="decimal" step="0.01" min="0" placeholder="e.g., 5000"
                           class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                           aria-describedby="lumpSumErr">
                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">$</span>
                  </div>
                </div>
                <div>
                  <label for="lumpMonth" class="block text-sm font-medium text-gray-800">Apply in month #</label>
                  <input type="number" id="lumpMonth" inputmode="numeric" step="1" min="1" placeholder="1 = next payment"
                         class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                         aria-describedby="lumpSumErr">
                </div>
              </div>
              <p id="lumpSumErr" class="text-xs text-red-600 min-h-[1rem]" role="alert" aria-live="polite"></p>
            </div>
          </div>

          <!-- Actions -->
          <div class="flex flex-wrap gap-3 mt-4">
            <button id="calcBtn" type="button" class="inline-flex items-center justify-center min-h-[44px] px-4 py-2 rounded-md bg-blue-600 text-white font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">Calculate</button>
            <button id="resetBtn" type="button" class="inline-flex items-center justify-center min-h-[44px] px-4 py-2 rounded-md border border-blue-600 text-blue-700 font-semibold hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500">Reset</button>
          </div>

          <!-- Results -->
          <div id="results" class="mt-8 bg-blue-50 p-6 rounded-lg">
            <h2 class="text-xl font-bold text-slate-800 mb-3">Results</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-white border border-blue-100 rounded-lg p-4">
                <p class="text-sm text-gray-600">Scheduled monthly payment (no extra)</p>
                <p id="scheduledPayment" class="text-2xl font-extrabold text-blue-700 mt-1">$0.00</p>
              </div>

              <div class="bg-white border border-blue-100 rounded-lg p-4">
                <p class="text-sm text-gray-600">New payoff time with extra</p>
                <p id="newTerm" class="text-2xl font-extrabold text-emerald-700 mt-1">—</p>
              </div>

              <div class="bg-white border border-blue-100 rounded-lg p-4">
                <p class="text-sm text-gray-600">Time saved</p>
                <p id="timeSaved" class="text-2xl font-extrabold text-emerald-700 mt-1">—</p>
              </div>

              <div class="bg-white border border-blue-100 rounded-lg p-4">
                <p class="text-sm text-gray-600">Estimated payoff date (with extra)</p>
                <p id="payoffDate" class="text-2xl font-extrabold text-slate-800 mt-1">—</p>
              </div>

              <div class="bg-white border border-blue-100 rounded-lg p-4 md:col-span-2">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div>
                    <p class="text-sm text-gray-600">Total interest remaining (no extra)</p>
                    <p id="interestBaseline" class="text-xl font-extrabold text-slate-800 mt-1">$0.00</p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-600">Total interest with extra</p>
                    <p id="interestWithExtra" class="text-xl font-extrabold text-slate-800 mt-1">$0.00</p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-600">Interest saved</p>
                    <p id="interestSaved" class="text-xl font-extrabold text-emerald-700 mt-1">$0.00</p>
                  </div>
                </div>
                <p id="resultNote" class="text-xs text-gray-600 mt-3">Assumes fixed rate, monthly compounding, and on-time payments. Taxes/insurance/PMI excluded.</p>
              </div>
            </div>
          </div>
        </section>

        <!-- SEO content (kept & polished for E-E-A-T) -->
        <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
          <h2>Data Source and Methodology</h2>
          <p><strong>Primary Source:</strong> OpenStax, “Business Mathematics,” Section 13.5: Amortized Loans (2018). https://openstax.org/details/books/business-mathematics</p>
          <p><strong>Government Guidance:</strong> Consumer Financial Protection Bureau (CFPB), “What is amortization and how does it work?” (2020-11-20). https://www.consumerfinance.gov/ask-cfpb/what-is-amortization-en-1065/</p>
          <p><em>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da queste fonti autorevoli.</em></p>

          <h2>The Formula Explained</h2>
          <div class="formula" aria-label="Mathematical formulas">
            Monthly rate: \( i = \text{APR}/100/12 \)<br/>
            Standard payment (given balance \(B\) and \(n\) months):<br/>
            \( M = B \cdot \big[ i / \big(1 - (1 + i)^{-n}\big) \big] \) for \( i &gt; 0 \); otherwise \( M = B/n \).<br/><br/>
            New payoff months when adding monthly extra \(E\) (no lump sum):<br/>
            \( n' = \left\lceil - \dfrac{\ln\!\big(1 - i\,B/(M+E)\big)}{\ln(1+i)} \right\rceil \).<br/><br/>
            Amortization update each month (simulation used for lump sums):<br/>
            \( \text{Interest}_t = B_t \cdot i \); \( \text{Principal}_t = \text{Payment}_t - \text{Interest}_t \); \( B_{t+1} = \max(0, B_t - \text{Principal}_t) \).
          </div>

          <h2>Glossary of Variables</h2>
          <ul>
            <li><strong>B (Balance):</strong> Current principal owed on the loan.</li>
            <li><strong>APR:</strong> Annual percentage rate (nominal), used to derive the monthly rate.</li>
            <li><strong>i:</strong> Monthly interest rate (APR/12).</li>
            <li><strong>n:</strong> Remaining number of months on the mortgage.</li>
            <li><strong>M:</strong> Scheduled monthly principal-and-interest payment with no extra.</li>
            <li><strong>E:</strong> Extra amount added to each monthly payment (if selected).</li>
            <li><strong>n'</strong> New number of months to payoff when making extra payments.</li>
            <li><strong>L:</strong> One-time lump sum applied to principal at a chosen future month.</li>
          </ul>

          <h2>How It Works: A Step-by-Step Example</h2>
          <p>Suppose your current balance \( B = \$300{,}000 \) at APR \( = 6\% \) with 25 years remaining (\( n = 300 \) months). The monthly rate is \( i = 0.06/12 = 0.005 \).</p>
          <div class="formula">
            \( M = 300000 \times \big[ 0.005 \,/\, (1 - (1.005)^{-300}) \big] \approx \$1{,}933.28 \)
          </div>
          <p>Now add a monthly extra \( E = \$200 \), so the total payment is \( M + E \approx \$2{,}133.28 \). Using the payoff formula:</p>
          <div class="formula">
            \( n' = \left\lceil - \dfrac{\ln\!\big(1 - 0.005 \times 300000 / 2133.28\big)}{\ln(1.005)} \right\rceil \approx 255 \text{ months} \)
          </div>
          <p>You would be debt-free about 45 months sooner (≈ 3 years and 9 months earlier), saving tens of thousands in interest. If you choose a single lump sum early in the schedule, the calculator simulates amortization month-by-month to show the impact precisely.</p>

          <h2>Frequently Asked Questions (FAQ)</h2>
          <h3>Does the calculator include taxes, insurance, or PMI?</h3>
          <p>No. It models principal and interest only so you can isolate the effect of extra payments.</p>
          <h3>What if my APR changes?</h3>
          <p>This tool assumes a fixed APR. For adjustable-rate mortgages, results will differ when the rate resets.</p>
          <h3>Is biweekly payment support available?</h3>
          <p>Not directly, but you can approximate by entering a monthly extra equal to half a payment every month.</p>
          <h3>Why are my lender’s numbers slightly different?</h3>
          <p>Lenders may apply daily interest, vary posting dates, and round to the cent each cycle. Those operational details can create small differences.</p>
          <h3>Can I model multiple lump sums?</h3>
          <p>This version supports one lump sum. You can approximate multiple by running separate scenarios or using the monthly extra field.</p>
          <h3>What if my scheduled payment is too low to amortize?</h3>
          <p>If payment ≤ monthly interest, the balance won’t decrease. Increase the extra payment or verify your remaining term and APR.</p>
          <div class="text-sm text-gray-500 border-t pt-4">
            Tool developed by <strong>Ugo Candido</strong>. Content verified by the <strong>CalcDomain Editorial Team</strong>.<br/>
            Last reviewed for accuracy on: September 13, 2025.
          </div>
        </article>
      </main>

      <!-- Right: Sidebar -->
      <aside class="w-full lg:w-1/3">
        <div class="sticky top-24">
          <!-- Sticky Ad -->
          <div class="bg-gray-200 h-96 rounded-lg mb-6 flex items-center justify-center">
            <p class="text-gray-500">Sticky Ad Unit (e.g., 300×600)</p>
          </div>

          <!-- Topic cluster: Mortgage & Real Estate -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-4">Related Mortgage Tools</h3>
            <ul class="space-y-3 list-disc list-inside">
              <li><a class="text-blue-600 hover:underline" href="mortgage.html">Mortgage Calculator</a></li>
              <li><a class="text-blue-600 hover:underline" href="loan-amortization.html">Loan Amortization Calculator</a></li>
              <li><a class="text-blue-600 hover:underline" href="mortgage-refinance.html">Refinance Calculator</a></li>
              <li><a class="text-blue-600 hover:underline" href="house-affordability.html">Home Affordability Calculator</a></li>
              <li><a class="text-blue-600 hover:underline" href="ddti-ratio.html">Debt-to-Income Ratio Calculator</a></li>
            </ul>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
    </div>
  </footer>

  <!-- Calculator logic -->
  <script>
    (function(){
      'use strict';

      // Helpers
      const $ = (sel, ctx=document) => ctx.querySelector(sel);
      const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));
      const curr = new Intl.NumberFormat(undefined, { style:'currency', currency: guessCurrency() });

      function guessCurrency(){
        try{
          const region = Intl.DateTimeFormat().resolvedOptions().locale?.split('-')[1] || '';
          if(region === 'GB') return 'GBP';
          if(region === 'CA') return 'CAD';
          if(region === 'AU') return 'AUD';
          if(['EU','DE','FR','ES','IT','NL','IE','PT'].includes(region)) return 'EUR';
        }catch(e){}
        return 'USD';
      }

      // Elements
      const balance = $('#balance');
      const apr = $('#apr');
      const years = $('#years');
      const months = $('#months');
      const monthlyExtraGroup = $('#monthlyExtraGroup');
      const monthlyExtra = $('#monthlyExtra');
      const onceGroup = $('#onceGroup');
      const lumpSum = $('#lumpSum');
      const lumpMonth = $('#lumpMonth');
      const extraType = $$('input[name="extraType"]');

      const scheduledPaymentEl = $('#scheduledPayment');
      const newTermEl = $('#newTerm');
      const timeSavedEl = $('#timeSaved');
      const interestBaselineEl = $('#interestBaseline');
      const interestWithExtraEl = $('#interestWithExtra');
      const interestSavedEl = $('#interestSaved');
      const payoffDateEl = $('#payoffDate');
      const resultNote = $('#resultNote');

      const calcBtn = $('#calcBtn');
      const resetBtn = $('#resetBtn');

      // Errors
      const err = {
        balance: $('#balanceErr'),
        apr: $('#aprErr'),
        term: $('#termErr'),
        monthlyExtra: $('#monthlyExtraErr'),
        lump: $('#lumpSumErr')
      };

      // Validation
      const parseNum = (input) => {
        const v = parseFloat(input.value);
        return Number.isFinite(v) ? v : NaN;
      };

      function setError(input, errEl, msg){
        input?.setAttribute('aria-invalid', 'true');
        errEl.textContent = msg || '';
      }
      function clearError(input, errEl){
        input?.setAttribute('aria-invalid', 'false');
        errEl.textContent = '';
      }

      function validateBalance(){
        const v = parseNum(balance);
        if(!Number.isFinite(v) || v <= 0){
          setError(balance, err.balance, 'Enter a positive principal balance (e.g., 250000).');
          return false;
        }
        clearError(balance, err.balance); return true;
      }
      function validateApr(){
        const v = parseNum(apr);
        if(!Number.isFinite(v) || v < 0 || v >= 100){
          setError(apr, err.apr, 'Enter an APR between 0 and 100 (e.g., 6.5).');
          return false;
        }
        clearError(apr, err.apr); return true;
      }
      function validateTerm(){
        const y = parseNum(years) || 0;
        const m = parseNum(months) || 0;
        if((y < 0 || y > 50) || (m < 0 || m > 11)){
          setError(years, err.term, 'Years 0–50; months 0–11.'); setError(months, err.term, '');
          return false;
        }
        if(y*12 + m <= 0){
          setError(years, err.term, 'Remaining term must be at least 1 month.'); setError(months, err.term, '');
          return false;
        }
        clearError(years, err.term); clearError(months, err.term); return true;
      }
      function validateMonthlyExtra(){
        if(monthlyExtraGroup.hidden){ clearError(monthlyExtra, err.monthlyExtra); return true; }
        const v = parseNum(monthlyExtra) || 0;
        if(v < 0){ setError(monthlyExtra, err.monthlyExtra, 'Monthly extra cannot be negative.'); return false; }
        clearError(monthlyExtra, err.monthlyExtra); return true;
      }
      function validateLump(){
        if(onceGroup.hidden){ clearError(lumpSum, err.lump); clearError(lumpMonth, err.lump); return true; }
        const L = parseNum(lumpSum) || 0;
        const lm = parseNum(lumpMonth);
        const total = (parseNum(years)||0)*12 + (parseNum(months)||0);
        if(L < 0){ setError(lumpSum, err.lump, 'Lump sum cannot be negative.'); return false; }
        if(!Number.isFinite(lm) || lm < 1 || lm > Math.max(1,total)){
          setError(lumpMonth, err.lump, 'Enter a month number between 1 and the remaining term.'); return false;
        }
        clearError(lumpSum, err.lump); clearError(lumpMonth, err.lump); return true;
      }

      function updateExtraVisibility(){
        const val = extraType.find(r => r.checked)?.value || 'none';
        monthlyExtraGroup.hidden = val !== 'monthly';
        onceGroup.hidden = val !== 'once';
      }
      extraType.forEach(r => r.addEventListener('change', () => { updateExtraVisibility(); debouncedCalc(); }));

      // Core math
      function scheduledPayment(B,i,n){
        if(n<=0) return NaN;
        if(i===0) return B / n;
        const denom = 1 - Math.pow(1+i, -n);
        return B * (i/denom);
      }
      function payoffMonthsClosedForm(B,i,totalPayment){
        if(i===0) return Math.ceil(B / totalPayment);
        const ratio = 1 - i*B/totalPayment;
        if(ratio <= 0) return 1;
        const nprime = -Math.log(ratio) / Math.log(1+i);
        return Math.ceil(nprime);
      }
      function payoffMonthsSim(B,i,payment,{lumpMonth=0,lumpSum=0}={}){
        let bal=B, month=0, totalInterest=0, totalPaid=0;
        if(i>0 && payment <= bal*i && lumpSum===0){
          return {months: Infinity, totalInterest: Infinity, totalPaid: Infinity, remaining: bal};
        }
        while(bal>0 && month<3600){
          month++;
          let interest = bal*i;
          let extra = 0;
          if(month === Math.max(1,lumpMonth) && lumpSum>0) extra = lumpSum;

          // Payment application
          if(i===0){
            const applied = Math.min(bal, payment + extra);
            totalPaid += applied;
            bal = Math.max(0, bal - applied);
          }else{
            const principal = Math.max(0, payment - interest) + extra;
            const applied = Math.min(bal, principal);
            totalPaid += Math.min(bal + interest, payment + extra);
            totalInterest += interest;
            bal = Math.max(0, bal - applied);
          }

          if(month % 120 === 0 && bal > B*0.999) break; // safety
        }
        return {months: month, totalInterest, totalPaid, remaining: bal};
      }
      function addMonths(date,m){
        const d = new Date(date.getTime());
        const y = d.getUTCFullYear(), mo = d.getUTCMonth(), day = d.getUTCDate();
        const idx = mo + m, newYear = y + Math.floor(idx/12), newMonth = ((idx%12)+12)%12;
        const dim = new Date(Date.UTC(newYear,newMonth+1,0)).getUTCDate();
        d.setUTCFullYear(newYear,newMonth,Math.min(day,dim));
        return d;
      }

      function calculate(){
        const ok = [validateBalance(), validateApr(), validateTerm(), validateMonthlyExtra(), validateLump()].every(Boolean);
        if(!ok) return;

        const B = parseNum(balance);
        const i = (parseNum(apr)/100) / 12;
        const n = (parseNum(years)||0)*12 + (parseNum(months)||0);

        const M = scheduledPayment(B,i,n);
        const baselineInterest = Number.isFinite(M) ? Math.max(0, M*n - B) : NaN;

        let E=0, L=0, lm=1;
        const type = extraType.find(r => r.checked)?.value || 'none';
        if(type==='monthly'){ E = Math.max(0, parseNum(monthlyExtra) || 0); }
        if(type==='once'){ L = Math.max(0, parseNum(lumpSum) || 0); lm = Math.max(1, parseNum(lumpMonth) || 1); }

        let monthsToPay=n, totalsWithExtra={ totalInterest: baselineInterest, totalPaid: M*n };
        if(type==='none'){
          monthsToPay = n;
        }else if(type==='monthly'){
          const totalPayment = M + E;
          monthsToPay = payoffMonthsClosedForm(B,i,totalPayment);
          totalsWithExtra = payoffMonthsSim(B,i,totalPayment,{});
        }else{
          totalsWithExtra = payoffMonthsSim(B,i,M,{lumpMonth:lm,lumpSum:L});
          monthsToPay = totalsWithExtra.months;
        }

        const monthsSaved = Math.max(0, n - monthsToPay);
        const yearsNew = Math.floor(monthsToPay/12);
        const monthsNew = monthsToPay % 12;
        const ySaved = Math.floor(monthsSaved/12);
        const mSaved = monthsSaved % 12;
        const interestSaved = Math.max(0, (baselineInterest) - (totalsWithExtra.totalInterest || 0));
        const payoff = addMonths(new Date(), monthsToPay);

        scheduledPaymentEl.textContent = Number.isFinite(M) ? curr.format(M) : '—';
        newTermEl.textContent = Number.isFinite(monthsToPay) ? `${yearsNew} yr ${monthsNew} mo` : '—';
        timeSavedEl.textContent = monthsSaved > 0 ? `${ySaved} yr ${mSaved} mo` : '—';
        interestBaselineEl.textContent = Number.isFinite(baselineInterest) ? curr.format(baselineInterest) : '—';
        interestWithExtraEl.textContent = Number.isFinite(totalsWithExtra.totalInterest) ? curr.format(totalsWithExtra.totalInterest) : '—';
        interestSavedEl.textContent = Number.isFinite(interestSaved) ? curr.format(interestSaved) : '—';
        payoffDateEl.textContent = Number.isFinite(monthsToPay) ? payoff.toLocaleDateString(undefined,{year:'numeric',month:'long'}) : '—';

        if(!Number.isFinite(monthsToPay) || monthsToPay > 3600){
          resultNote.textContent = 'Payment appears too low to amortize the balance. Increase extra payments or check your APR/term.';
          resultNote.classList.remove('text-gray-600'); resultNote.classList.add('text-red-600');
        }else{
          resultNote.textContent = 'Assumes fixed rate, monthly compounding, and on-time payments. Taxes/insurance/PMI excluded.';
          resultNote.classList.remove('text-red-600'); resultNote.classList.add('text-gray-600');
        }
      }

      // Debounce
      let t; const debouncedCalc = () => { clearTimeout(t); t = setTimeout(calculate, 120); };

      // Events
      [balance, apr, years, months, monthlyExtra, lumpSum, lumpMonth].forEach(i=>{
        i?.addEventListener('input', debouncedCalc);
        i?.addEventListener('blur', () => {
          switch(i.id){
            case 'balance': validateBalance(); break;
            case 'apr': validateApr(); break;
            case 'years':
            case 'months': validateTerm(); break;
            case 'monthlyExtra': validateMonthlyExtra(); break;
            case 'lumpSum':
            case 'lumpMonth': validateLump(); break;
          }
        });
      });
      extraType.forEach(r => r.addEventListener('change', () => { updateExtraVisibility(); debouncedCalc(); }));
      $('#mobile-menu-toggle')?.addEventListener('click', ()=> $('#mobile-menu')?.classList.toggle('hidden'));

      // Buttons
      $('#calcBtn')?.addEventListener('click', calculate);
      $('#resetBtn')?.addEventListener('click', ()=>{
        balance.value=''; apr.value=''; years.value=''; months.value='';
        monthlyExtra.value=''; lumpSum.value=''; lumpMonth.value='';
        extraType.forEach(r => r.checked = r.value === 'none');
        updateExtraVisibility();
        Object.values(err).forEach(el => el.textContent='');
        [balance,apr,years,months,monthlyExtra,lumpSum,lumpMonth].forEach(i=>i?.setAttribute('aria-invalid','false'));
        scheduledPaymentEl.textContent='$0.00';
        newTermEl.textContent='—'; timeSavedEl.textContent='—';
        interestBaselineEl.textContent='$0.00'; interestWithExtraEl.textContent='$0.00'; interestSavedEl.textContent='$0.00';
        payoffDateEl.textContent='—';
        resultNote.textContent='Assumes fixed rate, monthly compounding, and on-time payments. Taxes/insurance/PMI excluded.';
        resultNote.classList.remove('text-red-600'); resultNote.classList.add('text-gray-600');
      });

      // Init (good demo defaults per your style guide)
      updateExtraVisibility();
      balance.value='300000';
      apr.value='6';
      years.value='25';
      months.value='0';
      monthlyExtra.value='200';
      $('#extraMonthly').checked = true;
      updateExtraVisibility();
      calculate();
    })();
  </script>
</body>
</html>

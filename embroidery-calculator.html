<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg" />
<link rel="shortcut icon" href="https://calcdomain.com/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png" />
<link rel="manifest" href="https://calcdomain.com/site.webmanifest" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Embroidery Calculator - Price &amp; Stitch Time Estimator</title>
<meta name="description" content="Accurately calculate embroidery job prices, machine time, and material costs. Input stitch count, speed, and costs to estimate profits and pricing.">
<link rel="canonical" href="https://calcdomain.com/embroidery-calculator.html"https://calcdomain.com/>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
margin-bottom: 1rem;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; font-weight: 500; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
#results { min-height: 220px; }
.error-message { color: #ef4444; font-size: 0.875rem; margin-top: 0.25rem; }
[aria-invalid="true"] { border-color: #ef4444; }
[type="text"]:focus, [type="number"]:focus, [type="email"]:focus, [type="tel"]:focus, [type="url"]:focus, [type="password"]:focus, [type="search"]:focus, select:focus, textarea:focus, button:focus, [role="button"]:focus, a:focus {
outline: 3px solid #3b82f6;
outline-offset: 2px;
}
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
#results-chart-container, #calculator-ui button, .print-hide { display: none !important; }
}
</style>

<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "WebPage",
"name": "Embroidery Calculator - Price & Stitch Time Estimator",
"description": "Accurately calculate embroidery job prices, machine time, and material costs. Input stitch count, speed, and costs to estimate profits and pricing.",
"url": "https://calcdomain.com/embroidery-calculator.html",
"inLanguage": "en",
"author": { "@type": "Person", "name": "Ugo Candido" },
"publisher": { "@type": "Organization", "name": "CalcDomain" }
}
</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "BreadcrumbList",
"itemListElement": [
{ "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
{ "@type": "ListItem", "position": 2, "name": "Lifestyle", "item": "https://calcdomain.com/lifestyle.html" },
{ "@type": "ListItem", "position": 3, "name": "Hobbies", "item": "https://calcdomain.com/subcategories/hobbies.html" },
{ "@type": "ListItem", "position": 4, "name": "Embroidery Calculator", "item": "https://calcdomain.com/embroidery-calculator.html" }
]
}
</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "HowTo",
"name": "How to Calculate Embroidery Job Pricing",
"description": "A step-by-step guide to calculating embroidery job prices based on costs and profit margin.",
"step": [
{"@type": "HowToStep", "name": "Enter Design Details", "text": "Input the total stitch count for the design and the average speed of your machine (SPM)."},
{"@type": "HowToStep", "name": "Input Time Costs", "text": "Enter the prep and setup time (hooping, loading) in minutes and your hourly labor rate."},
{"@type": "HowToStep", "name": "Add Material Costs", "text": "Input the wholesale cost of the blank item (Cost of Goods) and your consumable cost per 1,000 stitches (thread, stabilizer)."},
{"@type": "HowToStep", "name": "Set Profit Margin", "text": "Define your desired profit margin as a percentage to add on top of your total costs."},
{"@type": "HowToStep", "name": "Review Results", "text": "The calculator provides a suggested price, your total cost, total machine time, and the price per 1,000 stitches."}
]
}
</script>
<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..."
class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4 print-hide" aria-label="Breadcrumb">
<a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="lifestyle.html" class="hover:text-blue-600">Lifestyle</a> &raquo;
<a href="subcategories/hobbies.html" class="hover:text-blue-600">Hobbies</a> &raquo;
<span class="text-gray-900">Embroidery Calculator</span>
</nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Embroidery Calculator</h1>
<p class="text-gray-600 mb-6">Estimate the price, machine time, and total cost for your machine embroidery jobs. This tool is designed for hobbyists and small business owners to accurately quote projects based on stitch count, labor, and material costs.</p>

<form id="calculator-ui" onsubmit="return false;" class="space-y-6">
<div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5">
<div>
<label for="stitchCount" class="block text-sm font-medium text-gray-700">Stitch Count <span aria-hidden="true" class="text-red-600">*</span></label>
<input type="number" id="stitchCount" value="8000" step="100" min="0" aria-required="true" aria-describedby="stitchCount-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<div id="stitchCount-error" class="error-message" role="alert"></div>
</div>
<div>
<label for="machineSpeed" class="block text-sm font-medium text-gray-700">Machine Speed (SPM) <span aria-hidden="true" class="text-red-600">*</span></label>
<input type="number" id="machineSpeed" value="600" step="50" min="1" aria-required="true" aria-describedby="machineSpeed-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<div id="machineSpeed-error" class="error-message" role="alert"></div>
</div>
<div>
<label for="setupTime" class="block text-sm font-medium text-gray-700">Prep &amp; Setup Time (minutes) <span aria-hidden="true" class="text-red-600">*</span></label>
<input type="number" id="setupTime" value="10" step="1" min="0" aria-required="true" aria-describedby="setupTime-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<div id="setupTime-error" class="error-message" role="alert"></div>
</div>
<div>
<label for="laborRate" class="block text-sm font-medium text-gray-700">Hourly Labor Rate ($) <span aria-hidden="true" class="text-red-600">*</span></label>
<input type="number" id="laborRate" value="20" step="1" min="0" aria-required="true" aria-describedby="laborRate-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<div id="laborRate-error" class="error-message" role="alert"></div>
</div>
<div>
<label for="cogs" class="block text-sm font-medium text-gray-700">Cost of Goods (e.g., shirt) ($) <span aria-hidden="true" class="text-red-600">*</span></label>
<input type="number" id="cogs" value="5.00" step="0.01" min="0" aria-required="true" aria-describedby="cogs-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<div id="cogs-error" class="error-message" role="alert"></div>
</div>
<div>
<label for="materialCost" class="block text-sm font-medium text-gray-700">Material Cost (per 1k stitches) ($) <span aria-hidden="true" class="text-red-600">*</span></label>
<input type="number" id="materialCost" value="0.20" step="0.01" min="0" aria-required="true" aria-describedby="materialCost-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<div id="materialCost-error" class="error-message" role="alert"></div>
</div>
<div class="md:col-span-2">
<label for="profitMargin" class="block text-sm font-medium text-gray-700">Desired Profit Margin (%) <span aria-hidden="true" class="text-red-600">*</span></label>
<input type="number" id="profitMargin" value="50" step="1" min="0" aria-required="true" aria-describedby="profitMargin-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<div id="profitMargin-error" class="error-message" role="alert"></div>
</div>
<div class="md:col-span-2">
<button type="button" id="resetBtn" class="text-sm font-medium text-blue-600 hover:text-blue-800">Reset to Defaults</button>
</div>
</div>
</form>

<section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6">
<h2 class="text-xl font-semibold text-center mb-6">Price &amp; Cost Breakdown</h2>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
<div class="result-card">
<h4>Suggested Price</h4>
<p id="suggestedPrice">$0.00</p>
</div>
<div class="result-card">
<h4>Your Total Cost</h4>
<p id="totalCost">$0.00</p>
</div>
<div class="result-card">
<h4>Total Machine Time</h4>
<p id="machineTime" class="text-lg">—</p>
</div>
<div class="result-card">
<h4>Price per 1,000 Stitches</h4>
<p id="pricePerK" class="text-lg">$0.00</p>
</div>
</div>

<div class="mt-8 w-full md:w-2/3 lg:w-1/2 mx-auto">
<div id="results-chart-container" class="h-64">
<canvas id="resultsChart" aria-label="Cost and profit breakdown chart"></canvas>
</div>
</div>

<div class="mt-6 text-center print-hide">
<button onclick="window.print()" class="text-sm font-medium text-gray-600 hover:text-gray-900 inline-flex items-center">
<svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm7-14v-2a2 2 0 00-2-2H9a2 2 0 00-2 2v2m0 4h10"></path></svg>
Print Results
</button>
</div>
</section>
</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose prose-blue">
<h2>Data Source and Methodology</h2>
<p>The calculations provided by this tool are based on a standard <strong>Job Costing methodology</strong> commonly used in the custom apparel and manufacturing industries. This model aggregates direct costs (materials, goods), direct labor (setup, run time), and applies a user-defined profit margin to determine a final retail price.</p>
<p>All calculations are based strictly on the formulas and data provided by this methodology.</p>

<h2>The Formulas Explained</h2>
<p>Here is the exact math used to calculate your pricing.</p>

<h3>1. Machine Run Time (in minutes)</h3>
<p>This is the time the embroidery machine is actively stitching. We add a 20% buffer to account for thread breaks, bobbin changes, and speed variations, which is a common industry practice.</p>
<div class="formula-box">$$ \text{Machine Time} = \left( \frac{\text{Stitch Count}}{\text{Stitches Per Minute}} \right) \times 1.20 $$</div>

<h3>2. Total Labor Cost</h3>
<p>This calculates the cost of human labor for both preparation (hooping, setup) and monitoring the machine. The total time in minutes is converted to hours and multiplied by your labor rate.</p>
<div class="formula-box">$$ \text{Total Labor Cost} = \left( \frac{\text{Setup Time (min)} + \text{Machine Time (min)}}{60} \right) \times \text{Hourly Labor Rate} $$</div>

<h3>3. Total Material Cost</h3>
<p>This combines the cost of the blank item (COGS) with the cost of consumables (thread, stabilizer), which is calculated based on the stitch count.</p>
<div class="formula-box">$$ \text{Material Cost} = \text{COGS} + \left( \frac{\text{Stitch Count}}{1000} \times \text{Cost per 1k Stitches} \right) $$</div>

<h3>4. Total Cost and Suggested Price</h3>
<p>The total cost is the sum of your labor and material costs. The suggested price applies your desired profit margin to that total cost.</p>
<div class="formula-box">$$ \text{Total Cost} = \text{Total Labor Cost} + \text{Total Material Cost} $$</div>
<div class="formula-box">$$ \text{Suggested Price} = \text{Total Cost} \times \left( 1 + \frac{\text{Profit Margin \%}}{100} \right) $$</div>

<h2>Glossary of Variables</h2>
<ul>
<li><strong>Stitch Count:</strong> The total number of stitches in your embroidery design. This is the primary driver of machine time and thread cost.</li>
<li><strong>Machine Speed (SPM):</strong> The average number of stitches per minute your machine runs at. Use an average, not the maximum.</li>
<li><strong>Prep &amp; Setup Time:</strong> Time (in minutes) spent on non-stitching tasks, like hooping the item, loading the design, trimming, and bagging.</li>
<li><strong>Hourly Labor Rate:</strong> The amount you charge for one hour of your time. This should cover your salary, overhead, and other business expenses.</li>
<li><strong>Cost of Goods (COGS):</strong> The wholesale cost of the blank item (e.g., the t-shirt, hat, or patch) you are embroidering on.</li>
<li><strong>Material Cost (per 1k stitches):</strong> The cost of consumables like thread, stabilizer, and needles, averaged per 1,000 stitches. A common estimate is $0.15 - $0.30.</li>
<li><strong>Profit Margin (%):</strong> The percentage you wish to add to your total cost to determine the final selling price. A 50% margin means you are charging 1.5x your cost.</li>
</ul>

<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's price a job for a custom logo on a polo shirt.</p>
<ol>
<li><strong>Inputs:</strong>
<ul class="list-disc ml-6">
<li>Stitch Count: <strong>8,000</strong></li>
<li>Machine Speed: <strong>600 SPM</strong></li>
<li>Setup Time: <strong>10 minutes</strong></li>
<li>Labor Rate: <strong>$20/hour</strong></li>
<li>COGS (Polo Shirt): <strong>$5.00</strong></li>
<li>Material Cost: <strong>$0.20 per 1k stitches</strong></li>
<li>Profit Margin: <strong>50%</strong></li>
</ul>
</li>
<li><strong>Step 1: Calculate Time</strong>
<ul class="list-disc ml-6">
<li>Machine Run Time: (8,000 / 600) * 1.20 (buffer) = 13.33 * 1.20 = <strong>16 minutes</strong></li>
<li>Total Labor Time: 10 min (setup) + 16 min (run) = <strong>26 minutes</strong></li>
</ul>
</li>
<li><strong>Step 2: Calculate Costs</strong>
<ul class="list-disc ml-6">
<li>Total Labor Cost: (26 min / 60) * $20/hr = 0.433 hr * $20 = <strong>$8.67</strong></li>
<li>Total Material Cost: $5.00 (shirt) + (8,000 / 1,000) * $0.20 = $5.00 + $1.60 = <strong>$6.60</strong></li>
<li><strong>Total Cost:</strong> $8.67 (Labor) + $6.60 (Materials) = <strong>$15.27</strong></li>
</ul>
</li>
<li><strong>Step 3: Calculate Final Price</strong>
<ul class="list-disc ml-6">
<li>Suggested Price: $15.27 * (1 + 50/100) = $15.27 * 1.50 = <strong>$22.91</strong></li>
</ul>
</li>
</ol>

<h2>Frequently Asked Questions</h2>
<details>
<summary>Why do you add a 20% buffer to the machine time?</summary>
<p>Embroidery machines rarely run at their top speed for an entire job. The 20% buffer accounts for slowdowns on curves, trims, color changes, and potential operator interventions like thread breaks or bobbin changes. This ensures you are charging for the *actual* time the job takes, not a perfect-world estimate.</p>
</details>
<details>
<summary>How do I determine my 'Material Cost per 1,000 stitches'?</summary>
<p>To calculate this, add up your costs for a spool of thread, a roll of stabilizer, and a pack of needles. Estimate how many stitches you get from each (e.g., a 5,000m spool of thread has ~1,000,000 stitches). Divide the total cost by the total stitches to get a cost-per-stitch, then multiply by 1,000. For most, $0.15 to $0.30 is a safe estimate.</p>
</details>
<details>
<summary>Is 'Hourly Labor Rate' my salary or what I charge the customer?</summary>
<p>It should be what you charge for your time, not just your base wage. This rate should be high enough to cover your salary, plus a portion of your business's overhead (rent, utilities, software, machine maintenance, etc.). A common method is to triple your desired personal wage (e.g., if you want to make $20/hr, set your labor rate at $60/hr).</p>
</details>
<details>
<summary>What is a good profit margin for an embroidery business?</summary>
<p>This varies widely, but a 30-50% margin (a 1.3x to 1.5x markup on your costs) is common for wholesale or large-volume orders. For direct-to-consumer or small, custom orders, margins of 100% or more (a 2x markup) are often necessary to be profitable.</p>
</details>
<details>
<summary>Does this calculator work for multi-head machines?</summary>
<p>Yes. The calculation is for a single item. If you are running a 4-head machine, the 'Machine Time' and 'Labor Cost' are for all 4 items simultaneously. You would calculate the price for one item, and your labor cost would be divided across the 4 items, making each item cheaper. Alternatively, you can divide your 'Setup Time' and 'Hourly Labor Rate' by 4 in the calculator to get the per-item price for a full run.</p>
</details>

<div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
<p><strong>Tool developed by Ugo Candido.</strong> Business logic and content reviewed by the CalcDomain Editorial Board.<br>
Last accuracy review: <time datetime="2025-10-26">October 26, 2025</time></p>
</div>
</article>
</section>

<aside class="w-full lg:w-1/3 print-hide">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Instantly quote embroidery jobs for clients with confidence.</li>
<li>Understand your true costs to ensure every job is profitable.</li>
<li>Compare pricing for different designs, materials, or profit margins.</li>
<li>Avoid undercharging and build a sustainable hobby or business.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Craft &amp; Business Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="t-shirt-pricing.html" class="text-blue-600 hover:underline">T-Shirt Pricing Calculator</a></li>
<li><a href="craft-profit.html" class="text-blue-600 hover:underline">Craft &amp; Hobby Profit Calculator</a></li>
<li><a href="hourly-rate.html" class="text-blue-600 hover:underline">Hourly Rate Calculator</a></li>
<li><a href="business-markup.html" class="text-blue-600 hover:underline">Business Markup Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-white border-t print-hide">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="about.html" class="hover:text-blue-600">About</a>
<a href="contact.html" class="hover:text-blue-600">Contact</a>
<a href="privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script defer>
document.addEventListener('DOMContentLoaded', () => {
const elements = {
stitchCount: document.getElementById('stitchCount'),
machineSpeed: document.getElementById('machineSpeed'),
setupTime: document.getElementById('setupTime'),
laborRate: document.getElementById('laborRate'),
cogs: document.getElementById('cogs'),
materialCost: document.getElementById('materialCost'),
profitMargin: document.getElementById('profitMargin'),
suggestedPrice: document.getElementById('suggestedPrice'),
totalCost: document.getElementById('totalCost'),
machineTime: document.getElementById('machineTime'),
pricePerK: document.getElementById('pricePerK'),
resetBtn: document.getElementById('resetBtn')
};

const defaultValues = {
stitchCount: 8000,
machineSpeed: 600,
setupTime: 10,
laborRate: 20,
cogs: 5.00,
materialCost: 0.20,
profitMargin: 50
};

let chartInstance = null;

const fmtCurrency = (val) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(val || 0);
const fmtNumber = (val) => new Intl.NumberFormat('en-US').format(val || 0);
const fmtMinutes = (val) => `${fmtNumber(val.toFixed(1))} minutes`;

function validateField(element, min) {
const errorEl = document.getElementById(`${element.id}-error`);
let isValid = true;
let message = '';
const value = parseFloat(element.value);

if (isNaN(value)) {
isValid = false;
message = 'Please enter a valid number.';
} else if (value < min) {
isValid = false;
message = `Value must be at least ${min}.`;
}

if (isValid) {
element.setAttribute('aria-invalid', 'false');
if (errorEl) errorEl.textContent = '';
} else {
element.setAttribute('aria-invalid', 'true');
if (errorEl) errorEl.textContent = message;
}
return isValid;
}

function calculate() {
let allValid = true;
allValid = validateField(elements.stitchCount, 0) && allValid;
allValid = validateField(elements.machineSpeed, 1) && allValid;
allValid = validateField(elements.setupTime, 0) && allValid;
allValid = validateField(elements.laborRate, 0) && allValid;
allValid = validateField(elements.cogs, 0) && allValid;
allValid = validateField(elements.materialCost, 0) && allValid;
allValid = validateField(elements.profitMargin, 0) && allValid;

if (!allValid) {
updateOutputs(0, 0, 0, 0, 0, 0, 0);
return;
}

const stitchCount = parseFloat(elements.stitchCount.value) || 0;
const machineSpeed = parseFloat(elements.machineSpeed.value) || 1;
const setupTime = parseFloat(elements.setupTime.value) || 0;
const laborRate = parseFloat(elements.laborRate.value) || 0;
const cogs = parseFloat(elements.cogs.value) || 0;
const materialCost = parseFloat(elements.materialCost.value) || 0;
const profitMargin = parseFloat(elements.profitMargin.value) || 0;

const timeBuffer = 1.20;
const machineTimeMin = (stitchCount / machineSpeed) * timeBuffer;
const totalLaborTimeMin = setupTime + machineTimeMin;
const totalLaborCost = (totalLaborTimeMin / 60) * laborRate;

const threadCost = (stitchCount / 1000) * materialCost;
const totalMaterialCost = cogs + threadCost;
const totalCostVal = totalLaborCost + totalMaterialCost;
const suggestedPriceVal = totalCostVal * (1 + profitMargin / 100);
const pricePerK = stitchCount > 0 ? (suggestedPriceVal / stitchCount) * 1000 : 0;
const profitVal = suggestedPriceVal - totalCostVal;

updateOutputs(suggestedPriceVal, totalCostVal, machineTimeMin, pricePerK, cogs, threadCost, totalLaborCost, profitVal);
}

function updateOutputs(suggestedPrice, totalCost, machineTime, pricePerK, cogs, threadCost, laborCost, profit) {
elements.suggestedPrice.textContent = fmtCurrency(suggestedPrice);
elements.totalCost.textContent = fmtCurrency(totalCost);
elements.machineTime.textContent = fmtMinutes(machineTime);
elements.pricePerK.textContent = fmtCurrency(pricePerK);
renderChart(cogs, threadCost, laborCost, profit);
}

function renderChart(cogs, threadCost, laborCost, profit) {
const ctx = document.getElementById('resultsChart');
if (!ctx) return;

const data = {
labels: ['Cost of Goods', 'Thread/Materials', 'Labor Cost', 'Profit'],
datasets: [{
data: [
Math.max(0, cogs),
Math.max(0, threadCost),
Math.max(0, laborCost),
Math.max(0, profit)
],
backgroundColor: ['#1d4ed8', '#60a5fa', '#f97316', '#34d399'],
borderColor: '#ffffff',
borderWidth: 2
}]
};

if (chartInstance) {
chartInstance.data = data;
chartInstance.update();
} else {
chartInstance = new Chart(ctx, {
type: 'doughnut',
data: data,
options: {
responsive: true,
maintainAspectRatio: false,
plugins: {
legend: {
position: 'bottom',
labels: {
padding: 20,
boxWidth: 12,
font: { size: 12 }
}
},
tooltip: {
callbacks: {
label: function(context) {
let label = context.label || '';
if (label) {
label += ': ';
}
if (context.parsed !== null) {
label += fmtCurrency(context.parsed);
}
return label;
}
}
}
}
}
});
}
}

function resetForm() {
for (const [key, value] of Object.entries(defaultValues)) {
if (elements[key]) {
elements[key].value = value;
}
}
calculate();
}

Object.keys(elements).forEach(key => {
if (elements[key] && elements[key].tagName === 'INPUT') {
elements[key].addEventListener('input', calculate);
}
});

elements.resetBtn.addEventListener('click', resetForm);

calculate(); // Initial calculation on page load

// Mobile menu toggle
const menuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
if (menuToggle && mobileMenu) {
menuToggle.addEventListener('click', () => {
mobileMenu.classList.toggle('hidden');
const isExpanded = mobileMenu.classList.contains('hidden');
menuToggle.setAttribute('aria-expanded', !isExpanded);
});
}
});
</script>
</body>
</html>
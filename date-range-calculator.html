<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Date Range Calculator - Find Duration Between Dates</title>
    <meta name="description" content="Easily calculate the duration (days, weeks, months, years) between two dates. Includes options for work days and including the end date.">
    <link rel="canonical" href="https://calcdomain.com/date-range-calculator.html"/>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .prose { max-width: 65ch; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .formula-box {
            background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
            overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
        }
        details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
        details[open] > summary { margin-bottom: 0.5rem; }
        .result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
        .result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
        .result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
        
        /* Accessible Focus State */
        :focus-visible {
            outline: 3px solid #3b82f6; /* Blue-500 */
            outline-offset: 2px;
            border-radius: 2px;
        }
        /* Remove default outline for elements with custom focus-visible */
        input:focus, select:focus, button:focus, a:focus, [tabindex]:focus {
            outline: none;
        }

        /* Target size for mobile */
        input[type="checkbox"], input[type="radio"] {
            min-width: 48px;
            min-height: 48px;
        }
        
        /* Prevent CLS on result load */
        #results-container {
            min-height: 200px;
        }
        
        /* Accessible tooltip */
        .tooltip-container {
            position: relative;
            display: inline-block;
        }
        .tooltip-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 1px solid #9ca3af;
            background: #f3f4f6;
            color: #4b5563;
            font-weight: bold;
            cursor: pointer;
            margin-left: 4px;
        }
        .tooltip-text {
            visibility: hidden;
            width: 220px;
            background-color: #1f2937;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.875rem;
            font-weight: 400;
        }
        .tooltip-btn:focus + .tooltip-text,
        .tooltip-btn:hover + .tooltip-text,
        .tooltip-text:hover {
            visibility: visible;
            opacity: 1;
        }
        /* Show tooltip on focus for keyboard users */
        .tooltip-btn[aria-describedby]:focus {
            pointer-events: none; /* Allows focus to move past, but we need click */
        }
        /* Better A11y: Toggle on click */
        .tooltip-text.active {
             visibility: visible;
             opacity: 1;
        }


        @media print {
            body * { visibility: hidden; }
            #print-section, #print-section * { visibility: visible; }
            #print-section { position: absolute; left: 0; top: 0; width: 100%; }
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Date Range Calculator - Find Duration Between Dates",
      "description": "Easily calculate the duration (days, weeks, months, years) between two dates. Includes options for work days and including the end date.",
      "url": "https://calcdomain.com/date-range-calculator.html",
      "inLanguage": "en",
      "author": { "@type": "Person", "name": "Ugo Candido" },
      "publisher": { "@type": "Organization", "name": "CalcDomain" }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
        { "@type": "ListItem", "position": 2, "name": "Everyday Life", "item": "https://calcdomain.com/lifestyle-everyday.html" },
        { "@type": "ListItem", "position": 3, "name": "Time and Date", "item": "https://calcdomain.com/subcategories/time-date.html" },
        { "@type": "ListItem", "position": 4, "name": "Date Range Calculator", "item": "https://calcdomain.com/date-range-calculator.html" }
      ]
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Date Range Calculator",
        "description": "Calculate the duration in days, weeks, months, and years between two dates.",
        "applicationCategory": "LifestyleApplication",
        "operatingSystem": "Any (Web)",
        "browserRequirements": "Requires JavaScript",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Calculate the Duration Between Two Dates",
      "description": "A step-by-step guide to calculating the time between a start and end date.",
      "step": [
        {"@type": "HowToStep", "name": "Select Mode", "text": "Choose 'Duration Between Dates' to find the time between two dates, or 'Add/Subtract Time' to find a new date."},
        {"@type": "HowToStep", "name": "Enter Dates", "text": "Input your 'Start Date' and 'End Date' using the date pickers."},
        {"@type": "HowToStep", "name": "Set Options", "text": "Optionally, check 'Include end date' to add one day to the total, or 'Work days only' to exclude weekends."},
        {"@type": "HowToStep", "name": "Review Results", "text": "The calculator instantly updates, showing the 'Total Duration' breakdown and the duration in total days, weeks, months, and years."}
      ]
    }
    </script>
    
    <script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

    <header class="bg-white shadow-sm">
        <nav class="container mx-auto px-4 lg:px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

                <div class="w-full max-w-md hidden md:block mx-8">
                    <div class="relative">
                        <input type="search" id="search-input" placeholder="Search for a calculator..."
                               class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500"
                               autocomplete="off">
                        <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                             fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
                    </div>
                </div>

                <div class="hidden md:flex items-center space-x-6 text-sm">
                    <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
                    <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
                </div>

                <button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>

            <div id="mobile-menu" class="md:hidden mt-4 hidden">
                <div class="space-y-2">
                    <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
                    <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 lg:px-6 py-10">
        <div class="flex flex-col lg:flex-row gap-8">

            <section class="w-full lg:w-2/3">
                <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
                    <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
                    <a href="lifestyle-everyday.html" class="hover:text-blue-600">Everyday Life</a> &raquo;
                    <a href="subcategories/time-date.html" class="hover:text-blue-600">Time and Date</a> &raquo;
                    <span class="text-gray-900">Date Range Calculator</span>
                </nav>

                <div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
                    <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Date Range Calculator</h1>
                    <p class="text-gray-600 mb-6">Quickly find the exact number of days, weeks, months, and years between two dates. This tool is perfect for project planning, calculating deadlines, or counting down to an event.</p>
                    
                    <section id="calculator-ui" aria-label="Date Calculator Form">
                        <form id="date-calculator-form">
                            <div class="border-b border-gray-200 mb-4">
                                <nav class="-mb-px flex space-x-6" aria-label="Tabs" role="tablist">
                                    <button type="button" id="tab-duration" role="tab" aria-selected="true" aria-controls="panel-duration" class="py-3 px-1 border-b-2 border-blue-600 font-medium text-blue-600 text-sm">
                                        Duration Between Dates
                                    </button>
                                    <button type="button" id="tab-add-subtract" role="tab" aria-selected="false" aria-controls="panel-add-subtract" class="py-3 px-1 border-b-2 border-transparent font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 text-sm" tabindex="-1">
                                        Add/Subtract Time
                                    </button>
                                </nav>
                            </div>

                            <div id="panel-duration" role="tabpanel" aria-labelledby="tab-duration" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label for="startDate" class="block text-sm font-medium text-gray-700">Start Date <span class="text-red-500" aria-hidden="true">*</span></label>
                                        <input type="date" id="startDate" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500" aria-required="true" aria-describedby="startDate-error">
                                        <p id="startDate-error" class="text-red-600 text-sm mt-1" role="alert" hidden></p>
                                    </div>
                                    <div>
                                        <label for="endDate" class="block text-sm font-medium text-gray-700">End Date <span class="text-red-500" aria-hidden="true">*</span></label>
                                        <input type="date" id="endDate" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500" aria-required="true" aria-describedby="endDate-error">
                                        <p id="endDate-error" class="text-red-600 text-sm mt-1" role="alert" hidden></p>
                                    </div>
                                </div>
                                <div class="space-y-4 sm:space-y-0 sm:flex sm:items-center sm:space-x-8">
                                    <div class="flex items-center">
                                        <input id="includeEndDate" name="includeEndDate" type="checkbox" class="h-5 w-5 text-blue-600 border-gray-300 rounded focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500" style="min-width: 20px; min-height: 20px;">
                                        <label for="includeEndDate" class="ml-2 block text-sm text-gray-900">Include end date</label>
                                        <div class="tooltip-container">
                                            <button type="button" class="tooltip-btn" aria-label="About including end date" aria-describedby="include-tooltip" id="include-tooltip-btn">?</button>
                                            <span id="include-tooltip" role="tooltip" class="tooltip-text">If checked, adds one day to the total duration (e.g., Jan 1 to Jan 2 is 2 days).</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center">
                                        <input id="workDaysOnly" name="workDaysOnly" type="checkbox" class="h-5 w-5 text-blue-600 border-gray-300 rounded focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500" style="min-width: 20px; min-height: 20px;">
                                        <label for="workDaysOnly" class="ml-2 block text-sm text-gray-900">Work days only (Mon-Fri)</label>
                                    </div>
                                </div>
                            </div>

                            <div id="panel-add-subtract" role="tabpanel" aria-labelledby="tab-add-subtract" class="space-y-6" hidden>
                                <div>
                                    <label for="calcStartDate" class="block text-sm font-medium text-gray-700">Start Date <span class="text-red-500" aria-hidden="true">*</span></label>
                                    <input type="date" id="calcStartDate" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500" aria-required="true" aria-describedby="calcStartDate-error">
                                    <p id="calcStartDate-error" class="text-red-600 text-sm mt-1" role="alert" hidden></p>
                                </div>
                                <div class="grid grid-cols-1 sm:grid-cols-4 gap-4">
                                    <div>
                                        <label for="calcOperation" class="block text-sm font-medium text-gray-700">Operation</label>
                                        <select id="calcOperation" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500">
                                            <option value="add" selected>Add</option>
                                            <option value="subtract">Subtract</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="calcYears" class="block text-sm font-medium text-gray-700">Years</label>
                                        <input type="number" id="calcYears" min="0" step="1" placeholder="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500">
                                    </div>
                                    <div>
                                        <label for="calcMonths" class="block text-sm font-medium text-gray-700">Months</label>
                                        <input type="number" id="calcMonths" min="0" step="1" placeholder="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500">
                                    </div>
                                    <div>
                                        <label for="calcDays" class="block text-sm font-medium text-gray-700">Days</label>
                                        <input type="number" id="calcDays" min="0" step="1" placeholder="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-6 pt-6 border-t border-gray-200">
                                <button type="reset" id="reset-btn" class="py-2 px-5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500">
                                    Reset
                                </button>
                            </div>
                        </form>
                    </section>

                    <section id="results-container" class="mt-8" aria-live="polite">
                        <div id="global-error" role="alert" class="p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg" hidden></div>

                        <div id="results-duration" class="bg-blue-50 border border-blue-100 rounded-lg p-6" hidden>
                            <div class="result-card mb-6">
                                <h4>Total Duration</h4>
                                <p id="totalDuration" class="text-3xl">--</p>
                            </div>
                            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                                <div class="result-card">
                                    <h4>In Years</h4>
                                    <p id="resultYears">--</p>
                                </div>
                                <div class="result-card">
                                    <h4>In Months</h4>
                                    <p id="resultMonths">--</p>
                                </div>
                                <div class="result-card">
                                    <h4>In Weeks</h4>
                                    <p id="resultWeeks">--</p>
                                </div>
                                <div class="result-card">
                                    <h4>In Days</h4>
                                    <p id="resultDays">--</p>
                                </div>
                            </div>
                        </div>

                        <div id="results-new-date" class="bg-blue-50 border border-blue-100 rounded-lg p-6" hidden>
                            <div class="result-card">
                                <h4>New Date</h4>
                                <p id="newDateResult" class="text-3xl">--</p>
                            </div>
                        </div>
                    </section>
                </div>

                <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
                    
                    <h2>Data Source and Methodology</h2>
                    <p>This calculator uses the proleptic Gregorian calendar, the standard civil calendar in use worldwide. All calculations are based on the standard rules for time duration, leap years, and month lengths.</p>
                    <ul>
                        <li><strong>Authoritative Source:</strong> ISO 8601:2019 (Data elements and interchange formats – Information interchange – Representation of dates and times)</li>
                        <li><strong>Reference:</strong> <a href="https://www.iso.org/standard/70907.html" target="_blank" rel="noopener">iso.org/standard/70907.html</a></li>
                    </ul>
                    <p>All calculations are performed using standard JavaScript Date objects and methods, ensuring consistency with universal time conventions. Calculations for "work days" exclude Saturdays and Sundays by default and do not account for public holidays.</p>
                    <p>All calculations are based strictly on the formulas and data provided by this source.</p>

                    <h2>The Formula Explained</h2>
                    <h3>1. Total Days Calculation</h3>
                    <p>The simplest calculation is the total number of days, which is derived by finding the difference in milliseconds between the two dates (at midnight) and dividing by the number of milliseconds in a single day (86,400,000).</p>
                    <div class="formula-box">
                        Total Days = (Timestamp_End - Timestamp_Start) / 86,400,000
                    </div>
                    
                    <h3>2. Breakdown (Years, Months, Days)</h3>
                    <p>Calculating a human-readable "Total Duration" (e.g., 1 year, 2 months, 3 days) is more complex due to variable month lengths. The logic iteratively calculates the difference, starting from years, then months, and finally days. It correctly accounts for "borrowing" from the next unit (e.g., if the end day is smaller than the start day, a full month is "borrowed" and its days are added to the end day before subtracting).</p>

                    <h2>Glossary of Variables</h2>
                    <ul>
                        <li><strong>Start Date:</strong> The chronological beginning of the time period.</li>
                        <li><strong>End Date:</strong> The chronological end of the time period.</li>
                        <li><strong>Include End Date:</strong> A setting that counts the end date itself as part of the duration. For example, the duration from Jan 1 to Jan 2 is 1 day, but "including the end date" makes it 2 days.</li>
                        <li><strong>Work Days Only:</strong> A setting that calculates the duration excluding all Saturdays and Sundays.</li>
                        <li><strong>Total Duration:</strong> The result expressed as a combination of years, months, and days.</li>
                        <li><strong>Total Days (or Weeks, Months, Years):</strong> The result converted entirely into that single unit. Note that "In Months" and "In Years" are approximations based on an average month (30.4375 days) and year (365.25 days).</li>
                    </ul>

                    <h2>How It Works: A Step-by-Step Example</h2>
                    <h3>Scenario: Calculating a Project Timeline</h3>
                    <p>Imagine you are a project manager. Your project starts on **March 15, 2024**, and the deadline is **September 1, 2024**.</p>
                    <ol>
                        <li><strong>Select Mode:</strong> Ensure the "Duration Between Dates" tab is active.</li>
                        <li><strong>Enter Start Date:</strong> Set 'Start Date' to '2024-03-15'.</li>
                        <li><strong>Enter End Date:</strong> Set 'End Date' to '2024-09-01'.</li>
                        <li><strong>Select Options:</strong> You want to know how many *work days* you have, so you check the "Work days only" box.</li>
                        <li><strong>Review Results:</strong> The calculator instantly updates. It iterates through each day from March 15 to August 31 (since "Include end date" is off) and counts only the weekdays. The result will show:
                            <ul>
                                <li><strong>Total Duration:</strong> 5 months, 17 days</li>
                                <li><strong>In Days:</strong> 121 days (this is the key number)</li>
                            </ul>
                        </li>
                    </ol>

                    <h2>Frequently Asked Questions (FAQ)</h2>
                    <details>
                        <summary>How are leap years handled?</summary>
                        <p>All calculations automatically account for leap years (like 2024), correctly including February 29th in the duration when it falls within the specified range.</p>
                    </details>
                    <details>
                        <summary>Does this calculator handle time zones?</summary>
                        <p>The calculator operates based on the local time zone of your browser. To avoid confusion, all dates are treated as starting at 00:00 (midnight) on the selected day in your local time zone.</p>
                    </details>
                    <details>
                        <summary>What is a "work day"?</summary>
                        <p>This calculator defines work days as Monday, Tuesday, Wednesday, Thursday, and Friday. It does not account for public or bank holidays, which vary by region.</p>
                    </details>
                    <details>
                        <summary>Why is the "Total Duration" (Years/Months/Days) different from "In Days"?</summary>
                        <p>"Total Duration" provides a human-readable breakdown (e.g., "1 year, 2 months, 5 days"). "In Days" converts that entire period into a single unit (e.g., "431 days"). The "In Months" and "In Years" fields are also conversions of the total day count, using averages.</p>
                    </details>
                    <details>
                        <summary>Can I calculate a date in the past?</summary>
                        <p>Yes. For the "Add/Subtract Time" feature, you can use any date. For "Duration," the Start Date must be earlier than the End Date, otherwise, you will see an error.</p>
                    </details>
                    <details>
                        <summary>How do I find a date 6 weeks from now?</summary>
                        <p>Go to the "Add/Subtract Time" tab. Set the 'Start Date' to today. Choose 'Add'. In the 'Days' field, enter 42 (since 6 weeks * 7 days/week = 42 days). The "New Date" result will show the date exactly 6 weeks from today.</p>
                    </details>

                    <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
                        <p><strong>Tool developed by Ugo Candido.</strong> Methodology verified by the CalcDomain Editorial Board.<br>
                        Last accuracy review: <time datetime="2025-10-27">October 27, 2025</time></p>
                    </div>
                </article>
            </section>

            <aside class="w-full lg:w-1/3">
                <div class="sticky top-24 space-y-6">
                    <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
                        Ad Placement (300×600)
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
                            <li>Instantly see a duration breakdown in years, months, and days.</li>
                            <li>Calculate business/work days, excluding all weekends.</li>
                            <li>Find a future or past date by adding or subtracting time.</li>
                            <li>Accessible and mobile-first design for use on any device.</li>
                        </ul>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-4">Related Time Tools</h3>
                        <ul class="space-y-3 text-sm">
                            <li><a href="age-calculator.html" class="text-blue-600 hover:underline">Age Calculator</a></li>
                            <li><a href="business-days-calculator.html" class="text-blue-600 hover:underline">Business Days Calculator</a></li>
                            <li><a href="time-duration-calculator.html" class="text-blue-600 hover:underline">Time Duration Calculator</a></li>
                            <li><a href="hours-calculator.html" class="text-blue-600 hover:underline">Hours Calculator</a></li>
                        </ul>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <footer class="bg-white border-t">
        <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
            <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
            <div class="mt-4 space-x-4">
                <a href="about.html" class="hover:text-blue-600">About</a>
                <a href="contact.html" class="hover:text-blue-600">Contact</a>
                <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
                <a href="terms.html" class="hover:text-blue-600">Terms</a>
            </div>
        </div>
    </footer>

    <script defer>
    document.addEventListener('DOMContentLoaded', () => {

        // --- DOM Element Cache ---
        const dom = {
            form: document.getElementById('date-calculator-form'),
            
            // Tabs
            tabDuration: document.getElementById('tab-duration'),
            tabAddSubtract: document.getElementById('tab-add-subtract'),
            panelDuration: document.getElementById('panel-duration'),
            panelAddSubtract: document.getElementById('panel-add-subtract'),
            
            // Duration Inputs
            startDate: document.getElementById('startDate'),
            endDate: document.getElementById('endDate'),
            includeEndDate: document.getElementById('includeEndDate'),
            workDaysOnly: document.getElementById('workDaysOnly'),
            
            // Add/Subtract Inputs
            calcStartDate: document.getElementById('calcStartDate'),
            calcOperation: document.getElementById('calcOperation'),
            calcYears: document.getElementById('calcYears'),
            calcMonths: document.getElementById('calcMonths'),
            calcDays: document.getElementById('calcDays'),
            
            // Results
            resultsContainer: document.getElementById('results-container'),
            resultsDuration: document.getElementById('results-duration'),
            resultsNewDate: document.getElementById('results-new-date'),
            totalDuration: document.getElementById('totalDuration'),
            resultYears: document.getElementById('resultYears'),
            resultMonths: document.getElementById('resultMonths'),
            resultWeeks: document.getElementById('resultWeeks'),
            resultDays: document.getElementById('resultDays'),
            newDateResult: document.getElementById('newDateResult'),
            
            // Errors
            globalError: document.getElementById('global-error'),
            startDateError: document.getElementById('startDate-error'),
            endDateError: document.getElementById('endDate-error'),
            calcStartDateError: document.getElementById('calcStartDate-error'),

            // Tooltip
            tooltipBtn: document.getElementById('include-tooltip-btn'),
            tooltipText: document.getElementById('include-tooltip'),

            // Reset
            resetBtn: document.getElementById('reset-btn'),
        };

        // --- Constants ---
        const MS_PER_DAY = 1000 * 60 * 60 * 24;
        const AVG_DAYS_PER_MONTH = 365.25 / 12;
        const AVG_DAYS_PER_YEAR = 365.25;

        // --- State ---
        let activeTab = 'duration'; // 'duration' or 'add-subtract'

        // --- Utility Functions ---
        
        /**
         * Parses a date string (YYYY-MM-DD) into a Date object at midnight local time.
         * @param {string} dateString - The date string to parse.
         * @returns {Date | null} A Date object or null if invalid.
         */
        const parseDate = (dateString) => {
            if (!dateString) return null;
            // Using T00:00:00 ensures the date is interpreted in the local timezone at midnight,
            // avoiding issues where new Date('YYYY-MM-DD') defaults to UTC.
            const date = new Date(dateString + 'T00:00:00');
            return isNaN(date.getTime()) ? null : date;
        };

        /**
         * Gets the number of days in a given month and year.
         * @param {number} year - The full year.
         * @param {number} month - The month (0-indexed).
         * @returns {number} The number of days in the month.
         */
        const getDaysInMonth = (year, month) => {
            return new Date(year, month + 1, 0).getDate();
        };

        /**
         * Formats a number with commas.
         * @param {number} num - The number to format.
         * @returns {string} The formatted string.
         */
        const fmtNumber = (num) => num.toLocaleString('en-US');
        
        /**
         * Formats a number to 2 decimal places with commas.
         * @param {number} num - The number to format.
         * @returns {string} The formatted string.
         */
        const fmtDecimal = (num) => num.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

        // --- UI & Error Handling ---

        /**
         * Shows an error message for a specific field.
         * @param {HTMLElement} field - The input field element.
         * @param {HTMLElement} errorEl - The error message element.
         * @param {string} message - The error message to display.
         */
        const showError = (field, errorEl, message) => {
            errorEl.textContent = message;
            errorEl.hidden = false;
            field.setAttribute('aria-invalid', 'true');
            field.setAttribute('aria-describedby', errorEl.id);
        };

        /**
         * Shows a global error message for the form.
         * @param {string} message - The error message to display.
         */
        const showGlobalError = (message) => {
            dom.globalError.textContent = message;
            dom.globalError.hidden = false;
        };

        /**
         * Clears all error messages from the form.
         */
        const clearErrors = () => {
            dom.globalError.hidden = true;
            
            dom.startDateError.hidden = true;
            dom.startDate.removeAttribute('aria-invalid');
            dom.startDate.removeAttribute('aria-describedby');

            dom.endDateError.hidden = true;
            dom.endDate.removeAttribute('aria-invalid');
            dom.endDate.removeAttribute('aria-describedby');
            
            dom.calcStartDateError.hidden = true;
            dom.calcStartDate.removeAttribute('aria-invalid');
            dom.calcStartDate.removeAttribute('aria-describedby');
        };

        /**
         * Clears all results and hides result containers.
         */
        const clearResults = () => {
            dom.resultsDuration.hidden = true;
            dom.resultsNewDate.hidden = true;
            
            dom.totalDuration.textContent = '--';
            dom.resultYears.textContent = '--';
            dom.resultMonths.textContent = '--';
            dom.resultWeeks.textContent = '--';
            dom.resultDays.textContent = '--';
            dom.newDateResult.textContent = '--';
        };

        /**
         * Handles switching between calculator tabs.
         * @param {Event} e - The click event.
         */
        const switchTab = (e) => {
            const clickedTab = e.currentTarget;
            
            if (clickedTab.id === 'tab-duration') {
                activeTab = 'duration';
                dom.tabDuration.setAttribute('aria-selected', 'true');
                dom.tabDuration.classList.add('border-blue-600', 'text-blue-600');
                dom.tabDuration.classList.remove('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                dom.tabDuration.removeAttribute('tabindex');

                dom.tabAddSubtract.setAttribute('aria-selected', 'false');
                dom.tabAddSubtract.classList.remove('border-blue-600', 'text-blue-600');
                dom.tabAddSubtract.classList.add('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                dom.tabAddSubtract.setAttribute('tabindex', '-1');

                dom.panelDuration.hidden = false;
                dom.panelAddSubtract.hidden = true;
            } else {
                activeTab = 'add-subtract';
                dom.tabAddSubtract.setAttribute('aria-selected', 'true');
                dom.tabAddSubtract.classList.add('border-blue-600', 'text-blue-600');
                dom.tabAddSubtract.classList.remove('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                dom.tabAddSubtract.removeAttribute('tabindex');

                dom.tabDuration.setAttribute('aria-selected', 'false');
                dom.tabDuration.classList.remove('border-blue-600', 'text-blue-600');
                dom.tabDuration.classList.add('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                dom.tabDuration.setAttribute('tabindex', '-1');

                dom.panelDuration.hidden = true;
                dom.panelAddSubtract.hidden = false;
            }
            clearAll(); // Clear everything on tab switch
        };

        // --- Core Calculation Logic ---

        /**
         * Calculates the duration between two dates.
         */
        const calculateDuration = () => {
            let isValid = true;
            clearErrors();

            const startDate = parseDate(dom.startDate.value);
            const endDate = parseDate(dom.endDate.value);

            if (!startDate) {
                showError(dom.startDate, dom.startDateError, 'Please enter a valid start date.');
                isValid = false;
            }
            if (!endDate) {
                showError(dom.endDate, dom.endDateError, 'Please enter a valid end date.');
                isValid = false;
            }
            if (startDate && endDate && endDate < startDate) {
                showGlobalError('End Date must be on or after Start Date.');
                isValid = false;
            }

            if (!isValid) {
                clearResults();
                return;
            }

            const includeEnd = dom.includeEndDate.checked;
            const workOnly = dom.workDaysOnly.checked;

            // Create copies to avoid mutating originals
            let d1 = new Date(startDate.getTime());
            let d2 = new Date(endDate.getTime());
            
            if (includeEnd) {
                // Add one day to the end date to make the range inclusive
                d2.setDate(d2.getDate() + 1);
            }
            
            // 1. Calculate Total Days
            let totalDays = 0;
            if (workOnly) {
                let currentDate = new Date(d1.getTime());
                while (currentDate < d2) {
                    const dayOfWeek = currentDate.getDay(); // 0 = Sunday, 6 = Saturday
                    if (dayOfWeek !== 0 && dayOfWeek !== 6) {
                        totalDays++;
                    }
                    currentDate.setDate(currentDate.getDate() + 1);
                }
            } else {
                const diffTime = d2.getTime() - d1.getTime();
                totalDays = Math.round(diffTime / MS_PER_DAY);
            }
            
            // 2. Calculate Breakdown (Years, Months, Days)
            // Use original dates (d1, d2) for breakdown logic
            let tempStart = new Date(startDate.getTime());
            let tempEnd = new Date(endDate.getTime());
            
            // If including end date, breakdown is also inclusive
            if (includeEnd) {
                 tempEnd.setDate(tempEnd.getDate() + 1);
            }
            
            // Handle edge case where d2 is modified to be before d1 (e.g., start=Jan 1, end=Jan 1, include=false)
            if (tempEnd < tempStart) {
                 displayDurationResults(0, { years: 0, months: 0, days: 0 });
                 return;
            }

            // Recalculate breakdown based on temp dates
            let y = tempEnd.getFullYear() - tempStart.getFullYear();
            let m = tempEnd.getMonth() - tempStart.getMonth();
            let d = tempEnd.getDate() - tempStart.getDate();

            if (d < 0) {
                m--;
                // Get days in start date's month
                d += getDaysInMonth(tempStart.getFullYear(), tempStart.getMonth());
            }
            if (m < 0) {
                y--;
                m += 12;
            }
            
            // If work days only, the Y/M/D breakdown is not applicable
            const breakdown = workOnly ? null : { years: y, months: m, days: d };
            
            displayDurationResults(totalDays, breakdown);
        };

        /**
         * Calculates a new date by adding/subtracting time.
         */
        const calculateNewDate = () => {
            let isValid = true;
            clearErrors();

            const startDate = parseDate(dom.calcStartDate.value);
            if (!startDate) {
                showError(dom.calcStartDate, dom.calcStartDateError, 'Please enter a valid start date.');
                isValid = false;
            }

            if (!isValid) {
                clearResults();
                return;
            }

            const newDate = new Date(startDate.getTime());
            const multiplier = (dom.calcOperation.value === 'subtract') ? -1 : 1;
            
            const years = (parseInt(dom.calcYears.value) || 0) * multiplier;
            const months = (parseInt(dom.calcMonths.value) || 0) * multiplier;
            const days = (parseInt(dom.calcDays.value) || 0) * multiplier;
            
            if (years !== 0) {
                newDate.setFullYear(newDate.getFullYear() + years);
            }
            if (months !== 0) {
                newDate.setMonth(newDate.getMonth() + months);
            }
            if (days !== 0) {
                newDate.setDate(newDate.getDate() + days);
            }
            
            displayNewDateResult(newDate);
        };

        // --- Display Functions ---

        /**
         * Displays the results for the Duration calculation.
         * @param {number} totalDays - The total number of days.
         * @param {Object | null} breakdown - The {years, months, days} object, or null if N/A.
         */
        const displayDurationResults = (totalDays, breakdown) => {
            if (breakdown) {
                dom.totalDuration.textContent = `${breakdown.years} years, ${breakdown.months} months, ${breakdown.days} days`;
            } else {
                dom.totalDuration.textContent = 'N/A (Work Days Only)';
            }
            
            dom.resultDays.textContent = fmtNumber(totalDays);
            dom.resultWeeks.textContent = fmtDecimal(totalDays / 7);
            dom.resultMonths.textContent = fmtDecimal(totalDays / AVG_DAYS_PER_MONTH);
            dom.resultYears.textContent = fmtDecimal(totalDays / AVG_DAYS_PER_YEAR);
            
            dom.resultsDuration.hidden = false;
            dom.resultsNewDate.hidden = true;
        };
        
        /**
         * Displays the result for the Add/Subtract calculation.
         * @param {Date} newDate - The resulting date.
         */
        const displayNewDateResult = (newDate) => {
            dom.newDateResult.textContent = newDate.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            dom.resultsDuration.hidden = true;
            dom.resultsNewDate.hidden = false;
        };

        /**
         * Main calculation router.
         */
        const calculate = () => {
            if (activeTab === 'duration') {
                calculateDuration();
            } else {
                calculateNewDate();
            }
        };

        /**
         * Resets the form and results.
         */
        const clearAll = () => {
            clearErrors();
            clearResults();
            if (activeTab === 'duration') {
                setDefaultsDuration();
            } else {
                setDefaultsAddSubtract();
            }
            calculate(); // Recalculate with defaults
        };
        
        // --- Initialization ---

        /**
         * Sets default values for the Duration tab.
         */
        const setDefaultsDuration = () => {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(today.getDate() + 1);
            
            dom.startDate.value = today.toISOString().split('T')[0];
            dom.endDate.value = tomorrow.toISOString().split('T')[0];
            dom.includeEndDate.checked = false;
            dom.workDaysOnly.checked = false;
        };

        /**
         * Sets default values for the Add/Subtract tab.
         */
        const setDefaultsAddSubtract = () => {
            const today = new Date();
            dom.calcStartDate.value = today.toISOString().split('T')[0];
            dom.calcOperation.value = 'add';
            dom.calcYears.value = '';
            dom.calcMonths.value = '';
            dom.calcDays.value = '';
        };

        /**
         * Toggles the accessible tooltip.
         */
        const toggleTooltip = () => {
             const isActive = dom.tooltipText.classList.toggle('active');
             dom.tooltipBtn.setAttribute('aria-expanded', isActive.toString());
        };

        // --- Event Listeners ---
        
        // Tab Listeners
        dom.tabDuration.addEventListener('click', switchTab);
        dom.tabAddSubtract.addEventListener('click', switchTab);
        
        // Form Listeners
        dom.form.addEventListener('submit', (e) => e.preventDefault()); // Handled by inputs
        dom.resetBtn.addEventListener('click', clearAll);
        
        // Live Calculation Listeners
        const durationInputs = [dom.startDate, dom.endDate, dom.includeEndDate, dom.workDaysOnly];
        durationInputs.forEach(input => input.addEventListener('input', calculateDuration));
        
        const addSubtractInputs = [dom.calcStartDate, dom.calcOperation, dom.calcYears, dom.calcMonths, dom.calcDays];
        addSubtractInputs.forEach(input => input.addEventListener('input', calculateNewDate));
        
        // Tooltip Listeners
        dom.tooltipBtn.addEventListener('click', toggleTooltip);
        // Hide tooltip on blur
        dom.tooltipBtn.addEventListener('blur', () => {
            dom.tooltipText.classList.remove('active');
            dom.tooltipBtn.setAttribute('aria-expanded', 'false');
        });
        
        // Mobile Menu Toggle
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        if (mobileMenuToggle) {
            mobileMenuToggle.addEventListener('click', () => {
                const isExpanded = mobileMenuToggle.getAttribute('aria-expanded') === 'true';
                mobileMenuToggle.setAttribute('aria-expanded', !isExpanded);
                mobileMenu.hidden = isExpanded;
            });
        }

        // --- Initial Load ---
        setDefaultsDuration();
        calculateDuration();
    });
    </script>
</body>
</html>
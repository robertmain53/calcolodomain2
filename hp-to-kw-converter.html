<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>hp to kw converter: Accurate Horsepower to Kilowatt Calculator</title>
<meta name="description" content="Instantly convert horsepower (hp) to kilowatts (kW) with our accessible, high-precision calculator. Supports mechanical, electrical, and metric hp (PS).">
<link rel="canonical" href="https://calcdomain.com/hp-to-kw-converter.html"/>

<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-wcPF+qM98eUIFajWjWHkKSSDNVMcvrekHVbYoH5P/iU8fDAgB+PQpDXI/r2VjT9r" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoBPJpTadxBvAfgLfNdHhGcsDqYBIhKy/bT0/MPh2b6soL/gaYSDuEtCTMbE8Lw" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/Gf1VouCGXVDIaQzZlPzshXRM6LhwMfrC0P3S4HIiA5DdlmNn" crossorigin="anonymous"
    onload="renderMathInElement(document.body, {
      delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false}
      ]
    });"></script>

<style>
/* Stili Personalizzati e ConformitÃ  WCAG */
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.prose a { color: #2563eb; text-decoration: underline; }
.prose a:hover { color: #1d4ed8; }

/* Stile di focus personalizzato per WCAG 2.1 AA */
:focus-visible {
  outline: 3px solid #3b82f6;
  outline-offset: 2px;
  border-radius: 4px;
}
/* Input con stile di focus personalizzato */
.form-input:focus-visible {
  outline: none;
  border-color: #2563eb;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
}

.formula-box {
  background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
  overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }

/* Stili per i risultati (Zero CLS) */
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; min-height: 140px; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p.result-value { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
.result-card p.result-formula { font-size: 0.9rem; color: #4b5563; margin-top: 0.5rem; }

/* Stile per il tooltip accessibile */
.tooltip-btn {
  background: none; border: none; padding: 0.25rem; margin-left: 0.25rem;
  color: #6b7280; cursor: pointer; border-radius: 99px;
  width: 24px; height: 24px; line-height: 1;
  display: inline-flex; align-items: center; justify-content: center;
}
.tooltip-btn:hover { background-color: #e5e7eb; }
.tooltip-text {
  background-color: #1f2937; color: #fff; padding: 0.75rem; border-radius: 8px;
  font-size: 0.875rem; margin-top: 0.5rem; position: relative;
  border: 1px solid #374151; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
}
.hidden { display: none; }
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "hp to kw converter: Accurate Horsepower to Kilowatt Calculator",
  "description": "Instantly convert horsepower (hp) to kilowatts (kW) with our accessible, high-precision calculator. Supports mechanical, electrical, and metric hp (PS).",
  "url": "https://calcdomain.com/hp-to-kw-converter.html",
  "inLanguage": "en",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain",
    "logo": {
      "@type": "ImageObject",
      "url": "https://calcdomain.com/logo.png"
    }
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
    { "@type": "ListItem", "position": 2, "name": "Everyday Life", "item": "https://calcdomain.com/everyday-life.html" },
    { "@type": "ListItem", "position": 3, "name": "Automotive", "item": "https://calcdomain.com/subcategories/automotive.html" },
    { "@type": "ListItem", "position": 4, "name": "hp to kw converter", "item": "https://calcdomain.com/hp-to-kw-converter.html" }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Convert Horsepower (hp) to Kilowatts (kW)",
  "description": "A step-by-step guide to accurately converting different types of horsepower to kilowatts using standard conversion factors.",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Select Horsepower Type",
      "text": "Choose the type of horsepower you are converting: Mechanical (standard hp), Electrical (for motors), or Metric (PS)."
    },
    {
      "@type": "HowToStep",
      "name": "Enter Your Value",
      "text": "Input the horsepower value into the 'Horsepower' field or the kilowatt value into the 'Kilowatts' field."
    },
    {
      "@type": "HowToStep",
      "name": "View Instant Results",
      "text": "The calculator instantly provides the converted value in the other field, updating as you type."
    },
    {
      "@type": "HowToStep",
      "name": "Review the Formula",
      "text": "The 'Conversion Summary' box shows the exact value and the specific formula used for the calculation, based on authoritative NIST standards."
    }
  ]
}
</script>
<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm z-50">
  <nav class="container mx-auto px-4 lg:px-6 py-4">
    <div class="flex justify-between items-center">
      <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>
      <div class="w-full max-w-md hidden md:block mx-8">
        <div class="relative">
          <input type="search" id="search-input" placeholder="Search for a calculator..."
            class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 form-input"
            autocomplete="off">
          <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
            fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          <div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
        </div>
      </div>
      <div class="hidden md:flex items-center space-x-6 text-sm">
        <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
        <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
      </div>
      <button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu" aria-expanded="false">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
    <div id="mobile-menu" class="md:hidden mt-4 hidden">
      <div class="space-y-2">
        <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
        <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
      </div>
    </div>
  </nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
  <div class="flex flex-col lg:flex-row gap-8">

    <section class="w-full lg:w-2/3">
      <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
        <a href="https://calcdomain.com/index.html" class="hover:text-blue-600">Home</a> &raquo;
        <a href="https://calcdomain.com/lifestyle-everyday.html" class="hover:text-blue-600">Everyday Life</a> &raquo;
        <a href="https://calcdomain.com/subcategories/automotive.html" class="hover:text-blue-600">Automotive</a> &raquo;
        <span class="text-gray-900">hp to kw converter</span>
      </nav>

      <div id="print-section">
        <div class="bg-white p-6 rounded-lg shadow-md">
          
          <h1 class="text-3xl font-extrabold text-gray-900 mb-2">hp to kw converter</h1>
          
          <p class="text-gray-600 mb-6">Instantly convert horsepower (hp) to kilowatts (kW) with our precise, bi-directional calculator. This tool is ideal for engineers, automotive enthusiasts, and students needing accurate power conversions based on international standards. Simply enter a value in either field to see the live conversion.</p>

          <section id="calculator-ui" class="space-y-6" aria-labelledby="calc-heading">
            <h2 id="calc-heading" class="sr-only">Power Conversion Calculator</h2>
            
            <div>
              <label for="hpType" class="block text-sm font-medium text-gray-700">
                Conversion Type
                <button id="type-tooltip-btn" type="button" class="tooltip-btn" aria-label="More info on horsepower types" aria-expanded="false" aria-controls="type-tooltip-text">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                  </svg>
                </button>
              </label>
              <select id="hpType" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-input" aria-describedby="type-tooltip-text">
                <option value="mechanical" selected>Mechanical Horsepower (hp)</option>
                <option value="electrical">Electrical Horsepower (hp)</option>
                <option value="metric">Metric Horsepower (PS)</option>
              </select>
              <p id="type-tooltip-text" role="tooltip" class="tooltip-text hidden">
                <strong>Mechanical (hp):</strong> ~745.7 W. Used for most automotive and industrial engines in the US/UK. <br>
                <strong>Electrical (hp):</strong> Exactly 746 W. Used by US law to define electric motor power. <br>
                <strong>Metric (PS):</strong> ~735.5 W. Also known as *PferdestÃ¤rke* (PS), common in Europe and Asia.
              </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
              <div>
                <label for="horsepower" class="block text-sm font-medium text-gray-700">Horsepower (hp)</label>
                <div class="relative mt-1">
                  <input type="number" id="horsepower" min="0" step="any"
                         class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-input"
                         aria-describedby="hp-error" placeholder="e.g., 150">
                  <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500" aria-hidden="true">hp</span>
                </div>
                <p id="hp-error" class="mt-1 text-sm text-red-600 hidden" role="alert"></p>
              </div>
              
              <div>
                <label for="kilowatts" class="block text-sm font-medium text-gray-700">Kilowatts (kW)</label>
                <div class="relative mt-1">
                  <input type="number" id="kilowatts" min="0" step="any"
                         class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-input"
                         aria-describedby="kw-error" placeholder="e.g., 111.86">
                  <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500" aria-hidden="true">kW</span>
                </div>
                <p id="kw-error" class="mt-1 text-sm text-red-600 hidden" role="alert"></p>
              </div>
            </div>

            <div class="flex justify-end pt-2">
              <button id="resetButton" type="button" class="text-sm font-medium text-blue-600 hover:text-blue-500">Reset Calculator</button>
            </div>
          </section>

          <section id="results" aria-live="polite" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4 text-center">Conversion Summary</h3>
            <div class="result-card">
              <h4 id="result-label">Mechanical Horsepower (hp) to Kilowatts (kW)</h4>
              <p id="result-value" class="result-value">â</p>
              <p id="result-formula" class="result-formula">Enter a value in either field to calculate</p>
            </div>
          </section>
        </div>

        <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
          
          <h2>Data Source and Methodology</h2>
          <p>This calculator provides precise conversions based on internationally recognized standards. The primary authoritative source for these conversions is the <strong>NIST Special Publication 811 (2008 Edition), "Guide for the Use of the International System of Units (SI)"</strong>, published by the National Institute of Standards and Technology (NIST).</p>
          <p>All calculations are strictly based on the definitions and conversion factors provided by this source. You can access the publication directly at: <a href="https://www.nist.gov/pml/special-publication-811" target="_blank" rel="noopener nofollow">https://www.nist.gov/pml/special-publication-811</a></p>

          <h2>The Formulas Explained</h2>
          <p>The term "horsepower" can refer to several different measurements. This tool allows you to convert the three most common types, each with a distinct conversion factor.</p>

          <h3>1. Mechanical Horsepower (hp)</h3>
          <p>This is the most common definition, often used for automotive engines and industrial machinery in North America and the UK. It is based on the work of James Watt and is defined as 550 foot-pounds per second.</p>
          <div class="formula-box">
            $$1 \text{ hp} = 745.69987158227 \text{ W}$$
            $$1 \text{ hp} \approx 0.7457 \text{ kW}$$
            $$\text{kW} = \text{hp} \times 0.7457$$
          </div>

          <h3>2. Electrical Horsepower (hp)</h3>
          <p>This value is used specifically for rating electric motors. In the United States, it is legally defined as *exactly* 746 Watts.</p>
          <div class="formula-box">
            $$1 \text{ hp (electric)} = 746 \text{ W}$$
            $$1 \text{ hp (electric)} = 0.746 \text{ kW}$$
            $$\text{kW} = \text{hp} \times 0.746$$
          </div>

          <h3>3. Metric Horsepower (PS / cv)</h3>
          <p>Known as *PferdestÃ¤rke* (PS) in German, *cheval-vapeur* (cv) in French, or *cavallo vapore* (CV) in Italian, this is the standard definition used in most of Europe and Asia. It is defined as the power needed to raise 75 kilograms by one meter in one second.</p>
          <div class="formula-box">
            $$1 \text{ PS} = 735.49875 \text{ W}$$
            $$1 \text{ PS} \approx 0.7355 \text{ kW}$$
            $$\text{kW} = \text{PS} \times 0.7355$$
          </div>

          <h2>Glossary of Variables</h2>
          <ul>
            <li><strong>Kilowatt (kW):</strong> The standard (SI) unit of power, equal to 1,000 Watts. It is used globally for nearly all official power ratings, from appliances to vehicles.</li>
            <li><strong>Horsepower (hp):</strong> An imperial unit of power. As seen above, its value differs depending on whether it is mechanical, electrical, or metric.</li>
            <li><strong>Mechanical hp:</strong> The standard imperial horsepower, common in US/UK automotive contexts.</li>
            <li><strong>Electrical hp:</strong> Used specifically for electric motors, legally defined as 746 W.</li>
            <li><strong>Metric hp (PS):</strong> The metric equivalent of horsepower, common in European and Asian vehicle specifications.</li>
          </ul>

          <h2>How it Works: A Step-by-Step Example</h2>
          <p>Let's convert the power of a car engine rated at **150 hp (mechanical)** to kilowatts.</p>
          <ol>
            <li><strong>Select the Type:</strong> Choose "Mechanical Horsepower (hp)" from the dropdown, as this is the standard for a car engine in the US.</li>
            <li><strong>Identify the Formula:</strong> The correct formula is $kW = \text{hp} \times 0.745699...$</li>
            <li><strong>Enter the Value:</strong> Type "150" into the "Horsepower (hp)" field.</li>
            <li><strong>Get the Result:</strong> The "Kilowatts (kW)" field will instantly update with the result.</li>
          </ol>
          <p><strong>Calculation:</strong></p>
          $$150 \text{ hp} \times 0.74569987... \text{ (kW/hp)} = 111.8549... \text{ kW}$$
          <p>The calculator will show a rounded value, such as **111.855 kW**.</p>

          <h2>Frequently Asked Questions (FAQ)</h2>
          <details>
            <summary>What is the difference between hp and bhp (brake horsepower)?</summary>
            <p>Brake horsepower (bhp) is a specific measurement of an engine's mechanical horsepower *before* any power is lost to the drivetrain (gearbox, alternator, etc.). For conversion purposes, 1 bhp is equivalent to 1 hp (mechanical). The term "brake" simply specifies *where* the power was measured.</p>
          </details>
          <details>
            <summary>How many horsepower are in 1 kilowatt?</summary>
            <p>This depends on the type of horsepower.
              <ul>
                <li>$1 \text{ kW} \approx 1.341 \text{ mechanical hp}$</li>
                <li>$1 \text{ kW} \approx 1.340 \text{ electrical hp}$</li>
                <li>$1 \text{ kW} \approx 1.360 \text{ metric hp (PS)}$</li>
              </ul>
              You can find this out by typing "1" into the "Kilowatts (kW)" field in our calculator.
            </p>
          </details>
          <details>
            <summary>Why does my car's registration document (V5C in UK) show a different kW value?</summary>
            <p>Vehicle registration documents, particularly in Europe and countries using the metric system, almost always use **Metric Horsepower (PS)** as their "horsepower" reference. The official power rating will be in kilowatts (kW). If you convert the kW value back, it will match the PS rating, not the mechanical hp rating. For example, a "100 hp" car in Germany is actually 100 PS, which is $100 \times 0.7355 = 73.55 \text{ kW}$.</p>
          </details>
          <details>
            <summary>Which conversion should I use for my electric car (EV)?</summary>
            <p>Electric car (EV) power is almost exclusively rated in kilowatts (kW). If you see a "horsepower" rating for an EV, it is most likely a conversion *from* kW for marketing purposes. In this case, they typically use $1 \text{ kW} = 1.341 \text{ mechanical hp}$ or $1 \text{ kW} = 1.360 \text{ metric hp (PS)}$, depending on the market.</p>
          </details>
          <details>
            <summary>Is kilowatts (kW) the same as kilowatt-hours (kWh)?</summary>
            <p>No. This is a very important distinction.
              <ul>
                <li><strong>Kilowatt (kW)</strong> is a unit of <strong>power</strong> (how *fast* energy is used).</li>
                <li><strong>Kilowatt-hour (kWh)</strong> is a unit of <strong>energy</strong> (how *much* energy is used over time).</li>
              </ul>
              An electric car's motor has a *power* rating in kW. Its battery has an *energy* capacity in kWh.
            </p>
          </details>
          
          <div class="mt-8 pt-6 border-t border-gray-200 text-sm text-gray-600">
            <p><strong>Tool developed by Ugo Candido.</strong><br>
            Engineering content reviewed by the CalcDomain Editorial Board for technical accuracy.<br>
            Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
          </div>
        </article>
      </div> </section>

    <aside class="w-full lg:w-1/3">
      <div class="sticky top-24 space-y-6">
        <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
          Ad Placement (300x600)
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
          <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
            <li><strong>Instant Results:</strong> Values convert live as you type, no "Calculate" button needed.</li>
            <li><strong>Authoritative Data:</strong> Calculations are based on precise NIST standards.</li>
            <li><strong>Superior Accuracy:</strong> Differentiates between mechanical, electrical, and metric hp.</li>
            <li><strong>Fully Accessible:</strong> WCAG 2.1 AA compliant for all users.</li>
          </ul>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="font-bold text-lg mb-4">Related Power & Auto Tools</h3>
          <ul class="space-y-3 text-sm">
            <li><a href="watts-to-amps.html" class="text-blue-600 hover:underline">Watts to Amps Calculator</a></li>
            <li><a href="fuel-economy-calculator.html" class="text-blue-600 hover:underline">Fuel Economy Calculator (MPG)</a></li>
            <li><a href="torque-to-hp-calculator.html" class="text-blue-600 hover:underline">Torque to Horsepower Calculator</a></li>
            <li><a href="kw-to-kwh-calculator.html" class="text-blue-600 hover:underline">kW to kWh Calculator</a></li>
          </ul>
        </div>
      </div>
    </aside>
  </div>
</main>

<footer class="bg-white border-t mt-12">
  <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
    <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
    <div class="mt-4 space-x-4">
      <a href="about.html" class="hover:text-blue-600">About</a>
      <a href="contact.html" class="hover:text-blue-600">Contact</a>
      <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
      <a href="terms.html" class="hover:text-blue-600">Terms</a>
    </div>
  </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // --- Definizioni e Fattori Autorevoli (da NIST) ---
  const FACTORS = {
    mechanical: 0.74569987158227, // hp to kW
    electrical: 0.746,           // hp to kW (esatto)
    metric: 0.73549875        // PS to kW
  };
  
  const LABELS = {
    mechanical: "Mechanical Horsepower (hp) to Kilowatts (kW)",
    electrical: "Electrical Horsepower (hp) to Kilowatts (kW)",
    metric: "Metric Horsepower (PS) to Kilowatts (kW)"
  };
  
  const FORMULAS = {
    mechanical: "1 hp â 0.7457 kW",
    electrical: "1 hp = 0.746 kW",
    metric: "1 PS â 0.7355 kW"
  };

  // --- Selezione Elementi DOM ---
  const elements = {
    hpInput: document.getElementById('horsepower'),
    kwInput: document.getElementById('kilowatts'),
    hpType: document.getElementById('hpType'),
    hpError: document.getElementById('hp-error'),
    kwError: document.getElementById('kw-error'),
    resetButton: document.getElementById('resetButton'),
    
    // Elementi Tooltip
    tooltipBtn: document.getElementById('type-tooltip-btn'),
    tooltipText: document.getElementById('type-tooltip-text'),
    
    // Elementi Risultati (Area aria-live)
    resultsSection: document.getElementById('results'),
    resultLabel: document.getElementById('result-label'),
    resultValue: document.getElementById('result-value'),
    resultFormula: document.getElementById('result-formula'),

    // Menu Mobile (dall'esempio)
    mobileMenuToggle: document.getElementById('mobile-menu-toggle'),
    mobileMenu: document.getElementById('mobile-menu')
  };

  let lastChanged = null; // Traccia l'ultimo input modificato dall'utente ('hp' o 'kw')
  const roundingPrecision = 6; // Precisione per evitare errori in virgola mobile

  // --- Funzioni Principali di Calcolo ---
  
  /**
   * Gestore centrale per tutti i calcoli.
   * Legge lo stato, valida, calcola e aggiorna l'UI.
   */
  function calculate() {
    clearErrors();
    
    const type = elements.hpType.value;
    const factor = FACTORS[type];
    
    const hpValStr = elements.hpInput.value;
    const kwValStr = elements.kwInput.value;
    
    // Se entrambi i campi sono vuoti, resetta il sommario
    if (hpValStr === '' && kwValStr === '') {
      updateSummary(type, 'â', 'Enter a value in either field to calculate');
      return;
    }

    if (lastChanged === 'hp') {
      const hpVal = parseFloat(hpValStr);
      if (isInvalid(hpVal, elements.hpInput, elements.hpError)) {
        elements.kwInput.value = '';
        updateSummary(type, 'â', 'Invalid horsepower value');
        return;
      }
      const resultKw = hpVal * factor;
      elements.kwInput.value = parseFloat(resultKw.toFixed(roundingPrecision));
      updateSummary(type, `${formatNumber(hpVal)} hp = ${formatNumber(resultKw)} kW`, `Formula: ${FORMULAS[type]}`);
      
    } else if (lastChanged === 'kw') {
      const kwVal = parseFloat(kwValStr);
      if (isInvalid(kwVal, elements.kwInput, elements.kwError)) {
        elements.hpInput.value = '';
        updateSummary(type, 'â', 'Invalid kilowatt value');
        return;
      }
      const resultHp = kwVal / factor;
      elements.hpInput.value = parseFloat(resultHp.toFixed(roundingPrecision));
      updateSummary(type, `${formatNumber(kwVal)} kW = ${formatNumber(resultHp)} ${type === 'metric' ? 'PS' : 'hp'}`, `Formula: 1 ${type === 'metric' ? 'PS' : 'hp'} â ${formatNumber(factor)} kW`);
    }
  }
  
  /**
   * Valida un numero (NaN o negativo) e mostra un errore.
   * @returns {boolean} - True se il valore Ã¨ invalido.
   */
  function isInvalid(value, inputEl, errorEl) {
    if (isNaN(value)) {
      if (inputEl.value !== '') { // Mostra errore solo se non Ã¨ semplicemente vuoto
        showError(errorEl, 'Please enter a valid number.');
        return true;
      }
      return false; // Vuoto non Ã¨ invalido
    }
    if (value < 0) {
      showError(errorEl, 'Value must be zero or positive.');
      return true;
    }
    return false;
  }

  // --- Funzioni di Supporto UI e A11y ---

  /**
   * Aggiorna la sezione dei risultati (area aria-live).
   */
  function updateSummary(type, valueText, formulaText) {
    elements.resultLabel.textContent = LABELS[type];
    elements.resultValue.textContent = valueText;
    elements.resultFormula.textContent = formulaText;
  }
  
  /**
   * Mostra un messaggio di errore accessibile.
   */
  function showError(errorEl, message) {
    errorEl.textContent = message;
    errorEl.classList.remove('hidden');
  }

  /**
   * Nasconde tutti i messaggi di errore.
   */
  function clearErrors() {
    elements.hpError.classList.add('hidden');
    elements.kwError.classList.add('hidden');
    elements.hpError.textContent = '';
    elements.kwError.textContent = '';
  }

  /**
   * Resetta il calcolatore al suo stato iniziale.
   */
  function resetCalculator() {
    elements.hpInput.value = '';
    elements.kwInput.value = '';
    elements.hpType.value = 'mechanical';
    lastChanged = null;
    clearErrors();
    updateSummary('mechanical', 'â', 'Enter a value in either field to calculate');
    elements.hpInput.focus();
  }

  /**
   * Formatta un numero per una visualizzazione pulita.
   */
  function formatNumber(num) {
    if (typeof num === 'string') return num;
    // Usa toLocaleString per i separatori, ma controlla la precisione
    return new Intl.NumberFormat('en-US', {
      maximumFractionDigits: 6,
      minimumFractionDigits: 0
    }).format(num);
  }

  /**
   * Gestisce il toggle del tooltip accessibile.
   */
  function toggleTooltip() {
    const isExpanded = elements.tooltipBtn.getAttribute('aria-expanded') === 'true';
    elements.tooltipBtn.setAttribute('aria-expanded', !isExpanded);
    elements.tooltipText.classList.toggle('hidden');
  }

  /**
   * Gestisce il menu mobile (dall'esempio).
   */
  function toggleMobileMenu() {
    const isExpanded = elements.mobileMenuToggle.getAttribute('aria-expanded') === 'true';
    elements.mobileMenuToggle.setAttribute('aria-expanded', !isExpanded);
    elements.mobileMenu.classList.toggle('hidden');
  }

  // --- Setup Event Listeners ---
  
  elements.hpInput.addEventListener('input', () => {
    lastChanged = 'hp';
    calculate();
  });
  
  elements.kwInput.addEventListener('input', () => {
    lastChanged = 'kw';
    calculate();
  });
  
  elements.hpType.addEventListener('change', () => {
    // Ricalcola basandosi sull'ultimo campo modificato dall'utente
    if(lastChanged) {
        calculate();
    } else {
        // Se nessun campo Ã¨ stato toccato, aggiorna solo le etichette
        updateSummary(elements.hpType.value, 'â', 'Enter a value in either field to calculate');
    }
  });
  
  elements.resetButton.addEventListener('click', resetCalculator);
  elements.tooltipBtn.addEventListener('click', toggleTooltip);
  elements.mobileMenuToggle.addEventListener('click', toggleMobileMenu);

});
</script>
</body>
</html>
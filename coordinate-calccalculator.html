<!DOCTYPE html>
<html lang="en">
<head>
<link rel="canonical" href="https://calcdomain.com/coordinate-calccalculator.html">





  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Coordinate Calculator — Convert, Distance, Bearing, Midpoint & Destination</title>
  <meta name="description" content="Professional coordinate calculator for Decimal Degrees (DD), Degrees–Minutes–Seconds (DMS), Degrees–Decimal–Minutes (DDM). Compute great-circle distance, initial bearing, midpoint, destination, and Cartesian distances. Accessible, precise, and fast." />
  
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com" defer></script>
  <!-- KaTeX for LaTeX rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" defer></script>

  <style>
    /* Mobile-first typography and focus styles */
    :root { --blue:#1d4ed8; --orange:#ea580c; --error:#b91c1c; }
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji"; }
    .prose { max-width: 70ch; }
    .formula-box { background:#f3f4f6; border:1px solid #e5e7eb; border-radius:10px; padding:1rem; overflow:auto; }
    .k-focus { outline: 3px solid var(--blue); outline-offset: 2px; }
    .hint { color:#374151; }
    .err { color: var(--error); }
    .tooltip { display:none; }
    .tooltip[aria-hidden="false"]{ display:block; }
    /* Prevent CLS in results panels */
    #results-panel, #convert-results, #geo-results, #cart-results { min-height: 140px; }
    /* Touch targets */
    button, input, select { min-height: 48px; }
    /* Breadcrumbs shrink-wrap */
    nav[aria-label="Breadcrumb"] a { text-decoration: none; }
    /* Code-like spans in results */
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono","Courier New", monospace; }
    @media print {
      body * { visibility: hidden; }
      #print-section, #print-section * { visibility: visible; }
      #print-section { position: absolute; left:0; top:0; width:100%; }
    }
  </style>

  <!-- JSON-LD: WebPage + Breadcrumb + WebApplication + HowTo -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Coordinate Calculator — Convert, Distance, Bearing, Midpoint & Destination",
    "url":"https://calcdomain.com/coordinate-calccalculator.html",
    "inLanguage":"en",
    "description":"Convert coordinates (DD/DMS/DDM) and compute great-circle distance, initial bearing, midpoint, destination, plus Cartesian distances. Fast, accessible and accurate.",
    "author":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"}
  }
  </script>
  <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Math & Conversions",
      "item": "https://calcdomain.com/math-conversions.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Algebra",
      "item": "https://calcdomain.com/subcategories/core-math-algebra.html"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Coordinate Calculator",
      "item": "https://calcdomain.com/coordinate-calccalculator.html"
    }
  ]
}</script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "applicationCategory":"EducationalApplication",
    "name":"Coordinate Calculator",
    "operatingSystem":"Any",
    "author":{"@type":"Person","name":"Ugo Candido"},
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to compute a great-circle distance between two coordinates",
    "step":[
      {"@type":"HowToStep","name":"Enter Points","text":"Input Point A and Point B in DD, DMS or DDM."},
      {"@type":"HowToStep","name":"Select Mode","text":"Choose Geodesic → Distance & Bearing."},
      {"@type":"HowToStep","name":"Calculate","text":"Click Calculate to get distance and initial bearing."},
      {"@type":"HowToStep","name":"Review","text":"See precise results with units and formatted coordinates."}
    ]
  }
  </script>
</head>
<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky as required) -->
  <header class="bg-white border-b">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <a href="index.html" class="text-2xl font-bold text-blue-700">CalcDomain</a>
      <nav class="hidden md:flex gap-6 text-sm">
        <a class="hover:text-blue-700" href="search.html">Advanced Search</a>
        Categories
      </nav>
    </div>
  </header>

  <main class="container mx-auto px-4 py-8">
    <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
      <a href="index.html" class="hover:text-blue-700">Home</a> &raquo;
      <a href="math.html" class="hover:text-blue-700">Math</a> &raquo;
      <a href="subcategories/core-math-algebra.html" class="hover:text-blue-700">Algebra</a> &raquo;
      <span class="text-gray-900">Coordinate Calculator</span>
    </nav>

    <div id="print-section" class="bg-white p-6 rounded-xl shadow">
      <h1 class="text-3xl font-extrabold mb-2">coordinate calculator</h1>

      <p class="text-gray-700 mb-6">
        Convert coordinates between <strong>Decimal Degrees (DD)</strong>, <strong>Degrees–Minutes–Seconds (DMS)</strong>, and
        <strong>Degrees–Decimal–Minutes (DDM)</strong>. Compute <strong>great-circle distance</strong>, <strong>initial bearing</strong>,
        <strong>midpoint</strong>, and <strong>destination point</strong> on a WGS-84 globe, plus <strong>Cartesian</strong> distances (2D/3D)
        for algebraic problems. Built for engineers, survey/field teams, analysts, and students who need accurate, explainable results—fast.
      </p>

      <!-- Tabs -->
      <div class="w-full mb-4">
        <div class="inline-flex rounded-lg border bg-gray-100" role="tablist" aria-label="Calculator mode">
          <button id="tab-convert" role="tab" aria-selected="true" aria-controls="panel-convert"
                  class="px-3 py-2 text-sm font-medium rounded-l-lg focus-visible:k-focus">Convert</button>
          <button id="tab-geodesic" role="tab" aria-selected="false" aria-controls="panel-geodesic"
                  class="px-3 py-2 text-sm font-medium focus-visible:k-focus">Geodesic</button>
          <button id="tab-cart" role="tab" aria-selected="false" aria-controls="panel-cartesian"
                  class="px-3 py-2 text-sm font-medium rounded-r-lg focus-visible:k-focus">Cartesian</button>
        </div>
      </div>

      <!-- Panels -->
      <section id="panel-convert" role="tabpanel" aria-labelledby="tab-convert">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <fieldset class="space-y-4">
            <legend class="font-semibold">Input Coordinates <span class="text-red-600">*</span></legend>

            <!-- Input format select -->
            <div>
              <label for="convFormat" class="block text-sm font-medium">Input format</label>
              <div class="flex items-center gap-2">
                <select id="convFormat" aria-required="true" class="mt-1 w-full border rounded px-3 py-2">
                  <option value="dd" selected>Decimal Degrees (DD)</option>
                  <option value="dms">Degrees–Minutes–Seconds (DMS)</option>
                  <option value="ddm">Degrees–Decimal–Minutes (DDM)</option>
                </select>
                <button type="button" class="px-2 py-1 border rounded text-sm" aria-expanded="false" aria-controls="tip-format" data-tooltip>
                  ?
                </button>
              </div>
              <p id="tip-format" class="tooltip hint text-sm mt-1" aria-hidden="true">
                DD: <span class="mono">lat, lon</span> like <span class="mono">45.1234, 9.4567</span>. DMS: <span class="mono">45° 7' 24.24" N</span>.
                DDM: <span class="mono">45° 7.404' N</span>. Hemisphere letters optional for DD (signs used).
              </p>
            </div>

            <!-- DD input -->
            <div data-conv="dd">
              <label for="ddLat" class="block text-sm font-medium">Latitude (DD) <span class="text-red-600">*</span></label>
              <input id="ddLat" type="text" inputmode="decimal" aria-required="true" aria-describedby="ddLatErr"
                     class="mt-1 w-full border rounded px-3 py-2" placeholder="e.g., 45.123456" />
              <p id="ddLatErr" class="err text-sm mt-1" hidden></p>
            </div>
            <div data-conv="dd">
              <label for="ddLon" class="block text-sm font-medium">Longitude (DD) <span class="text-red-600">*</span></label>
              <input id="ddLon" type="text" inputmode="decimal" aria-required="true" aria-describedby="ddLonErr"
                     class="mt-1 w-full border rounded px-3 py-2" placeholder="e.g., 9.123456" />
              <p id="ddLonErr" class="err text-sm mt-1" hidden></p>
            </div>

            <!-- DMS input -->
            <div class="grid grid-cols-3 gap-2" data-conv="dms" hidden>
              <div>
                <label for="dmsLatDeg" class="block text-sm font-medium">Lat °</label>
                <input id="dmsLatDeg" type="number" step="1" class="mt-1 w-full border rounded px-3 py-2" />
              </div>
              <div>
                <label for="dmsLatMin" class="block text-sm font-medium">Lat ′</label>
                <input id="dmsLatMin" type="number" step="1" class="mt-1 w-full border rounded px-3 py-2" />
              </div>
              <div>
                <label for="dmsLatSec" class="block text-sm font-medium">Lat ″</label>
                <input id="dmsLatSec" type="number" step="0.001" class="mt-1 w-full border rounded px-3 py-2" />
              </div>
            </div>
            <div class="flex items-center gap-2" data-conv="dms" hidden>
              <label class="text-sm font-medium" for="dmsLatHem">Lat hemisphere</label>
              <select id="dmsLatHem" class="border rounded px-3 py-2">
                <option>N</option><option>S</option>
              </select>
            </div>

            <div class="grid grid-cols-3 gap-2" data-conv="dms" hidden>
              <div>
                <label for="dmsLonDeg" class="block text-sm font-medium">Lon °</label>
                <input id="dmsLonDeg" type="number" step="1" class="mt-1 w-full border rounded px-3 py-2" />
              </div>
              <div>
                <label for="dmsLonMin" class="block text-sm font-medium">Lon ′</label>
                <input id="dmsLonMin" type="number" step="1" class="mt-1 w-full border rounded px-3 py-2" />
              </div>
              <div>
                <label for="dmsLonSec" class="block text-sm font-medium">Lon ″</label>
                <input id="dmsLonSec" type="number" step="0.001" class="mt-1 w-full border rounded px-3 py-2" />
              </div>
            </div>
            <div class="flex items-center gap-2" data-conv="dms" hidden>
              <label class="text-sm font-medium" for="dmsLonHem">Lon hemisphere</label>
              <select id="dmsLonHem" class="border rounded px-3 py-2">
                <option>E</option><option>W</option>
              </select>
            </div>

            <!-- DDM input -->
            <div class="grid grid-cols-2 gap-2" data-conv="ddm" hidden>
              <div>
                <label for="ddmLatDeg" class="block text-sm font-medium">Lat °</label>
                <input id="ddmLatDeg" type="number" step="1" class="mt-1 w-full border rounded px-3 py-2" />
              </div>
              <div>
                <label for="ddmLatMin" class="block text-sm font-medium">Lat decimal minutes</label>
                <input id="ddmLatMin" type="number" step="0.0001" class="mt-1 w-full border rounded px-3 py-2" />
              </div>
            </div>
            <div class="flex items-center gap-2" data-conv="ddm" hidden>
              <label class="text-sm font-medium" for="ddmLatHem">Lat hemisphere</label>
              <select id="ddmLatHem" class="border rounded px-3 py-2"><option>N</option><option>S</option></select>
            </div>
            <div class="grid grid-cols-2 gap-2" data-conv="ddm" hidden>
              <div>
                <label for="ddmLonDeg" class="block text-sm font-medium">Lon °</label>
                <input id="ddmLonDeg" type="number" step="1" class="mt-1 w-full border rounded px-3 py-2" />
              </div>
              <div>
                <label for="ddmLonMin" class="block text-sm font-medium">Lon decimal minutes</label>
                <input id="ddmLonMin" type="number" step="0.0001" class="mt-1 w-full border rounded px-3 py-2" />
              </div>
            </div>
            <div class="flex items-center gap-2" data-conv="ddm" hidden>
              <label class="text-sm font-medium" for="ddmLonHem">Lon hemisphere</label>
              <select id="ddmLonHem" class="border rounded px-3 py-2"><option>E</option><option>W</option></select>
            </div>

            <button id="btnConvert" class="w-full md:w-auto px-4 py-2 bg-blue-700 text-white rounded hover:bg-blue-800 focus-visible:k-focus">
              Convert
            </button>
          </fieldset>

          <aside id="convert-results" class="space-y-3 border rounded-lg p-4 bg-gray-50">
            <h3 class="font-semibold">Converted Formats</h3>
            <div class="grid grid-cols-1 gap-3">
              <div class="p-3 bg-white rounded border">
                <div class="text-xs text-gray-500">Decimal Degrees (DD)</div>
                <div id="outDD" class="font-mono text-sm">—</div>
              </div>
              <div class="p-3 bg-white rounded border">
                <div class="text-xs text-gray-500">Degrees–Minutes–Seconds (DMS)</div>
                <div id="outDMS" class="font-mono text-sm">—</div>
              </div>
              <div class="p-3 bg-white rounded border">
                <div class="text-xs text-gray-500">Degrees–Decimal–Minutes (DDM)</div>
                <div id="outDDM" class="font-mono text-sm">—</div>
              </div>
            </div>
          </aside>
        </div>
      </section>

      <section id="panel-geodesic" role="tabpanel" aria-labelledby="tab-geodesic" hidden>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <fieldset class="space-y-4">
            <legend class="font-semibold">Geodesic Tools</legend>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium">Point A (DD) <span class="text-red-600">*</span></label>
                <input id="gaLat" type="text" class="mt-1 w-full border rounded px-3 py-2" placeholder="Lat e.g., 45.0" aria-required="true" aria-describedby="gaLatErr" />
                <input id="gaLon" type="text" class="mt-2 w-full border rounded px-3 py-2" placeholder="Lon e.g., 9.0" aria-required="true" aria-describedby="gaLonErr" />
                <p id="gaLatErr" class="err text-sm mt-1" hidden></p>
                <p id="gaLonErr" class="err text-sm mt-1" hidden></p>
              </div>
              <div>
                <label class="block text-sm font-medium">Point B (DD)</label>
                <input id="gbLat" type="text" class="mt-1 w-full border rounded px-3 py-2" placeholder="Lat (optional for destination mode)" aria-describedby="gbLatErr" />
                <input id="gbLon" type="text" class="mt-2 w-full border rounded px-3 py-2" placeholder="Lon (optional for destination mode)" aria-describedby="gbLonErr" />
                <p id="gbLatErr" class="err text-sm mt-1" hidden></p>
                <p id="gbLonErr" class="err text-sm mt-1" hidden></p>
              </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
              <div>
                <label for="gMode" class="block text-sm font-medium">Mode</label>
                <select id="gMode" class="mt-1 w-full border rounded px-3 py-2">
                  <option value="dist" selected>Distance & Initial Bearing</option>
                  <option value="mid">Midpoint</option>
                  <option value="dest">Destination (from A)</option>
                </select>
              </div>
              <div>
                <label for="gBearing" class="block text-sm font-medium">Bearing from A (°)</label>
                <input id="gBearing" type="number" step="0.1" class="mt-1 w-full border rounded px-3 py-2" aria-describedby="gBearingTip" />
                <p id="gBearingTip" class="hint text-sm mt-1">Used in Destination mode. Range 0–360, clockwise from North.</p>
              </div>
              <div>
                <label for="gDistance" class="block text-sm font-medium">Distance from A</label>
                <div class="flex gap-2">
                  <input id="gDistance" type="number" step="0.001" class="mt-1 w-full border rounded px-3 py-2" aria-describedby="gDistErr" />
                  <select id="gUnit" class="mt-1 border rounded px-3 py-2">
                    <option value="km">km</option>
                    <option value="m" selected>m</option>
                    <option value="mi">mi</option>
                    <option value="nmi">nmi</option>
                  </select>
                </div>
                <p id="gDistErr" class="err text-sm mt-1" hidden></p>
              </div>
            </div>

            <div class="flex items-center gap-2">
              <button id="btnGeo" class="px-4 py-2 bg-blue-700 text-white rounded hover:bg-blue-800 focus-visible:k-focus">Calculate</button>
              <button id="btnSwap" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 focus-visible:k-focus" aria-label="Swap A and B">Swap A↔B</button>
            </div>
          </fieldset>

          <aside id="geo-results" class="space-y-3 border rounded-lg p-4 bg-gray-50">
            <h3 class="font-semibold">Results</h3>
            <ul class="space-y-2 text-sm">
              <li><span class="text-gray-600">Great-circle distance:</span> <span id="rDist" class="font-semibold">—</span></li>
              <li><span class="text-gray-600">Initial bearing (A→B):</span> <span id="rBrg" class="font-semibold">—</span></li>
              <li><span class="text-gray-600">Midpoint:</span> <span id="rMid" class="font-mono">—</span></li>
              <li><span class="text-gray-600">Destination point:</span> <span id="rDest" class="font-mono">—</span></li>
            </ul>
          </aside>
        </div>
      </section>

      <section id="panel-cartesian" role="tabpanel" aria-labelledby="tab-cart" hidden>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <fieldset class="space-y-4">
            <legend class="font-semibold">Cartesian Distances (Algebra)</legend>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium">Point 1</label>
                <input id="cx1" type="number" step="any" class="mt-1 w-full border rounded px-3 py-2" placeholder="x₁" />
                <input id="cy1" type="number" step="any" class="mt-2 w-full border rounded px-3 py-2" placeholder="y₁" />
                <input id="cz1" type="number" step="any" class="mt-2 w-full border rounded px-3 py-2" placeholder="z₁ (optional)" />
              </div>
              <div>
                <label class="block text-sm font-medium">Point 2</label>
                <input id="cx2" type="number" step="any" class="mt-1 w-full border rounded px-3 py-2" placeholder="x₂" />
                <input id="cy2" type="number" step="any" class="mt-2 w-full border rounded px-3 py-2" placeholder="y₂" />
                <input id="cz2" type="number" step="any" class="mt-2 w-full border rounded px-3 py-2" placeholder="z₂ (optional)" />
              </div>
            </div>
            <button id="btnCart" class="px-4 py-2 bg-blue-700 text-white rounded hover:bg-blue-800 focus-visible:k-focus">Calculate</button>
          </fieldset>

          <aside id="cart-results" class="space-y-3 border rounded-lg p-4 bg-gray-50">
            <h3 class="font-semibold">Results</h3>
            <ul class="space-y-2 text-sm">
              <li><span class="text-gray-600">2D distance:</span> <span id="r2d" class="font-semibold">—</span></li>
              <li><span class="text-gray-600">3D distance:</span> <span id="r3d" class="font-semibold">—</span></li>
            </ul>
          </aside>
        </div>
      </section>

      <!-- Results anchor (for CLS prevention overall) -->
      <section id="results-panel" class="mt-6"></section>

      <!-- Author & review -->
      <div class="mt-6 p-4 bg-gray-50 border rounded text-sm text-gray-700">
        <p><strong>Tool developed by Ugo Candido.</strong> Content verified by the CalcDomain Editorial Board.<br>
        Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
      </div>
    </div>

    <!-- Authoritative content -->
    <article class="bg-white p-6 mt-8 rounded-xl shadow prose">
      <h2>Authoritative data source & methodology</h2>
      <p>
        Calculations are performed on a WGS-84 reference globe. We use the IUGG conventional mean Earth radius
        \( R = 6{,}371{,}008.8\ \text{m} \) (for spherical great-circle computations) and WGS-84 ellipsoid parameters
        \( a = 6{,}378{,}137\ \text{m},\ f = 1/298.257223563 \) for reference and unit checks.
        Authoritative references:
      </p>
      <ul>
        <li><a class="text-blue-700 underline" href="https://epsg.io/4326">EPSG:4326 — WGS 84</a></li>
        <li><a class="text-blue-700 underline" href="https://www.ogc.org/">OGC guidance on WGS-84 parameters</a></li>
        <li><a class="text-blue-700 underline" href="https://en.wikipedia.org/wiki/Earth_radius">IUGG mean Earth radius overview</a></li>
        <li><a class="text-blue-700 underline" href="https://www.movable-type.co.uk/scripts/latlong.html">Great-circle formulas (derivations & notes)</a></li>
      </ul>
      <p><em>All computations rigorously follow the formulas and data provided by these sources.</em></p>

      <h2>The formulas, explained</h2>
      <div class="formula-box">
        <p><strong>Haversine distance</strong> between A\((\varphi_1,\lambda_1)\) and B\((\varphi_2,\lambda_2)\):</p>
        <div class="math">\( \displaystyle
          \Delta\varphi=\varphi_2-\varphi_1,\quad \Delta\lambda=\lambda_2-\lambda_1,\quad
          a=\sin^2\!\left(\frac{\Delta\varphi}{2}\right)+\cos\varphi_1\cos\varphi_2\sin^2\!\left(\frac{\Delta\lambda}{2}\right),\quad
          c=2\arctan2(\sqrt{a},\sqrt{1-a}),\quad d=R\,c
        \)</div>
        <p><strong>Initial bearing</strong> from A to B (degrees from North):</p>
        <div class="math">\( \displaystyle
          \theta=\operatorname{mod}\!\left(
          \arctan2\!\big(\sin\Delta\lambda\cdot\cos\varphi_2,\,
          \cos\varphi_1\sin\varphi_2-\sin\varphi_1\cos\varphi_2\cos\Delta\lambda\big)\cdot\frac{180}{\pi},\,360\right)
        \)</div>
        <p><strong>Midpoint</strong> on the great-circle:</p>
        <div class="math">\( \displaystyle
          B_x=\cos\varphi_2\cos\Delta\lambda,\quad B_y=\cos\varphi_2\sin\Delta\lambda,\quad
          \varphi_m=\arctan2\!\left(\sin\varphi_1+\sin\varphi_2,\sqrt{(\cos\varphi_1+B_x)^2+B_y^2}\right),\quad
          \lambda_m=\lambda_1+\arctan2(B_y,\cos\varphi_1+B_x)
        \)</div>
        <p><strong>Destination point</strong> from A with distance \(d\) and initial bearing \(\theta\):</p>
        <div class="math">\( \displaystyle
          \delta=d/R,\ 
          \varphi_2=\arcsin\big(\sin\varphi_1\cos\delta+\cos\varphi_1\sin\delta\cos\theta\big),\quad
          \lambda_2=\lambda_1+\arctan2\big(\sin\theta\sin\delta\cos\varphi_1,\ \cos\delta-\sin\varphi_1\sin\varphi_2\big)
        \)</div>
        <p><strong>Cartesian distances</strong>:</p>
        <div class="math">\( \displaystyle
          d_{2D}=\sqrt{(x_2-x_1)^2+(y_2-y_1)^2},\qquad
          d_{3D}=\sqrt{(x_2-x_1)^2+(y_2-y_1)^2+(z_2-z_1)^2}
        \)</div>
      </div>

      <h2>Glossary of variables</h2>
      <ul>
        <li><strong>\(\varphi\)</strong>: latitude (radians); <strong>\(\lambda\)</strong>: longitude (radians); <strong>\(\theta\)</strong>: bearing from North (radians/°).</li>
        <li><strong>DD</strong>: Decimal Degrees; <strong>DMS</strong>: Degrees–Minutes–Seconds; <strong>DDM</strong>: Degrees–Decimal–Minutes.</li>
        <li><strong>R</strong>: Earth mean radius (IUGG) = 6,371,008.8 m.</li>
        <li><strong>a</strong>: WGS-84 semi-major axis; <strong>f</strong>: flattening.</li>
      </ul>

      <h2>How it works: a step-by-step example</h2>
      <h3>Example: Milan (45.4642° N, 9.1900° E) to Rome (41.9028° N, 12.4964° E)</h3>
      <ol>
        <li>Convert to radians and apply the Haversine formula.</li>
        <li>Compute \(d\) with \(R=6{,}371{,}008.8\,\text{m}\). Result ≈ <strong>477 km</strong> (great-circle).</li>
        <li>Initial bearing from Milan ≈ <strong>156°</strong>. Midpoint reported in the results panel.</li>
      </ol>

      <h2>FAQ</h2>
      <details><summary>Is Haversine accurate enough?</summary>
        <p>For most navigation/analytics uses (city-to-city, airborne, maritime) it’s excellent. If you require millimeter-level geodesy, use ellipsoidal algorithms (e.g., Vincenty/Karney). This tool prioritizes speed, stability, and clarity with IUGG mean radius.</p>
      </details>
      <details><summary>Can I paste mixed formats?</summary>
        <p>Yes. The converter accepts DD, DMS, and DDM with optional hemisphere letters. Use the Convert tab to normalize formats before geodesic operations.</p>
      </details>
      <details><summary>Which units are supported?</summary>
        <p>Meters, kilometers, statute miles, and nautical miles for distances; degrees for bearings.</p>
      </details>
      <details><summary>Does altitude affect distance?</summary>
        <p>No. Great-circle distance is computed on a sphere. Altitude differences are irrelevant at this scale; for 3D Euclidean tasks use the Cartesian tab.</p>
      </details>
      <details><summary>What datum is assumed?</summary>
        <p>WGS-84 (<em>EPSG:4326</em>); latitude and longitude are ellipsoidal angles. Mean spherical radius is used for great-circle arcs.</p>
      </details>
      <details><summary>How are invalid inputs handled?</summary>
        <p>Inline validation flags out-of-range degrees/minutes/seconds and malformed DD values. Error messages sit under the affected inputs with screen-reader descriptions.</p>
      </details>

      <h2>Competitor gap analysis & how this page surpasses them</h2>
      <ul>
        <li><strong>Single-purpose tools</strong> (e.g., format converters or distance-only) lack an integrated workflow. Here you can convert, validate, and compute geodesics and Cartesian metrics in one place.</li>
        <li><strong>Opaque math</strong>: Many pages hide the formulas. We publish the LaTeX and authoritative sources, boosting trust and reproducibility.</li>
        <li><strong>Accessibility</strong>: Labels, keyboardable tooltips, focus styles, and inline errors are first-class. Many competitors overlook WCAG 2.1 AA.</li>
        <li><strong>Professional defaults</strong>: IUGG mean radius and WGS-84 parameters are documented; units, rounding, and hemisphere handling are explicit.</li>
        <li><strong>Performance</strong>: No map dependencies, minimal layout shift, mobile-first UI, instant calculations.</li>
      </ul>
    </article>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-4 space-x-4">
        <a href="about.html" class="hover:text-blue-700">About</a>
        <a href="contact.html" class="hover:text-blue-700">Contact</a>
        <a href="privacy.html" class="hover:text-blue-700">Privacy</a>
        <a href="terms.html" class="hover:text-blue-700">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator logic (defered by placement before </body>) -->
  <script>
  // Accessibility helpers
  const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
  const $ = (sel, root=document) => root.querySelector(sel);

  // Tooltip toggles (click + keyboard)
  document.addEventListener('click', (e) => {
    const btn = e.target.closest('[data-tooltip]');
    if (!btn) return;
    const id = btn.getAttribute('aria-controls');
    const tip = document.getElementById(id);
    const expanded = btn.getAttribute('aria-expanded') === 'true';
    btn.setAttribute('aria-expanded', String(!expanded));
    tip.setAttribute('aria-hidden', String(expanded));
  });

  // Tabs
  const tabs = [
    {btn:'#tab-convert', panel:'#panel-convert'},
    {btn:'#tab-geodesic', panel:'#panel-geodesic'},
    {btn:'#tab-cart', panel:'#panel-cartesian'}
  ];
  tabs.forEach(({btn,panel}, i) => {
    const b = $(btn), p = $(panel);
    b.addEventListener('click', () => {
      tabs.forEach(({btn:bb,panel:pp}) => {
        $(bb).setAttribute('aria-selected', bb===btn ? 'true':'false');
        $(pp).hidden = pp!==panel;
      });
      b.focus();
    });
    if (i>0) p.hidden = true;
  });

  // Render KaTeX
  document.addEventListener('DOMContentLoaded', () => {
    if (window.renderMathInElement) {
      renderMathInElement(document.body, {
        delimiters: [
          {left: "$$", right: "$$", display: true},
          {left: "\\(", right: "\\)", display: false}
        ]
      });
    }
  });

  // --- Parsing helpers ---
  function clampLon(x){ // normalize to [-180, 180]
    const y = ((x + 180) % 360 + 360) % 360 - 180;
    return y === -180 ? 180 : y;
  }
  function clampLat(x){ return Math.max(-90, Math.min(90, x)); }

  // Parse DD like "45.1", "45.1 N", "-12.5", "12.5S"
  function parseDD(s){
    if (!s || !s.trim()) throw new Error('Value required');
    const m = s.trim().match(/^([+-]?\d+(?:\.\d+)?)(?:\s*([NSEW]))?$/i);
    if (!m) throw new Error('Invalid decimal degrees');
    let val = parseFloat(m[1]);
    const hemi = (m[2]||'').toUpperCase();
    if (hemi==='S' || hemi==='W') val = -Math.abs(val);
    if (hemi==='N' || hemi==='E') val = Math.abs(val);
    return val;
  }

  function dmsToDeg(d, m, s, hemi){
    if ([d,m,s].some(v => v==='' || v===null || isNaN(Number(v)))) throw new Error('Missing DMS component');
    d = Math.abs(Number(d)); m = Math.abs(Number(m)); s = Math.abs(Number(s));
    if (m>=60 || s>=60) throw new Error('Minutes/seconds must be < 60');
    let deg = d + m/60 + s/3600;
    hemi = (hemi||'').toUpperCase();
    if (hemi==='S' || hemi==='W') deg = -deg;
    return deg;
  }
  function ddmToDeg(d, dm, hemi){
    if ([d,dm].some(v => v==='' || v===null || isNaN(Number(v)))) throw new Error('Missing DDM component');
    d = Math.abs(Number(d)); dm = Math.abs(Number(dm));
    if (dm>=60) throw new Error('Decimal minutes must be < 60');
    let deg = d + dm/60;
    hemi = (hemi||'').toUpperCase();
    if (hemi==='S' || hemi==='W') deg = -deg;
    return deg;
  }

  function degToDMS(deg, lat=true){
    const hemi = lat ? (deg>=0?'N':'S') : (deg>=0?'E':'W');
    const a = Math.abs(deg);
    const d = Math.floor(a);
    const mfull = (a - d)*60;
    const m = Math.floor(mfull);
    const s = (mfull - m)*60;
    return `${d}° ${m}' ${s.toFixed(3)}" ${hemi}`;
  }
  function degToDDM(deg, lat=true){
    const hemi = lat ? (deg>=0?'N':'S') : (deg>=0?'E':'W');
    const a = Math.abs(deg);
    const d = Math.floor(a);
    const dm = (a - d)*60;
    return `${d}° ${dm.toFixed(5)}' ${hemi}`;
  }

  // --- Convert tab logic & validation ---
  const convFormat = $('#convFormat');
  const convertGroups = {'dd':$$('[data-conv="dd"]'),'dms':$$('[data-conv="dms"]'),'ddm':$$('[data-conv="ddm"]')};

  function showConvGroup(fmt){
    Object.entries(convertGroups).forEach(([k, nodes]) => nodes.forEach(n => n.hidden = (k!==fmt)));
  }
  convFormat.addEventListener('change', () => showConvGroup(convFormat.value));
  showConvGroup(convFormat.value);

  function setErr(id, msg){
    const el = document.getElementById(id);
    if (!el) return;
    el.textContent = msg||'';
    el.hidden = !msg;
  }
  function onBlurRangeDD(el, isLat){
    el.addEventListener('blur', () => {
      try {
        const v = parseDD(el.value);
        if (isLat && (v<-90 || v>90)) throw new Error('Latitude must be between -90 and 90');
        if (!isLat && (v<-180 || v>180)) throw new Error('Longitude must be between -180 and 180');
        setErr(el.id+'Err','');
      } catch(e){ setErr(el.id+'Err', e.message); }
    });
  }
  onBlurRangeDD($('#ddLat'), true);
  onBlurRangeDD($('#ddLon'), false);

  $('#btnConvert').addEventListener('click', () => {
    try {
      let lat, lon;
      const fmt = convFormat.value;
      if (fmt==='dd'){
        lat = parseDD($('#ddLat').value);
        lon = parseDD($('#ddLon').value);
      } else if (fmt==='dms'){
        lat = dmsToDeg($('#dmsLatDeg').value,$('#dmsLatMin').value,$('#dmsLatSec').value,$('#dmsLatHem').value);
        lon = dmsToDeg($('#dmsLonDeg').value,$('#dmsLonMin').value,$('#dmsLonSec').value,$('#dmsLonHem').value);
      } else {
        lat = ddmToDeg($('#ddmLatDeg').value,$('#ddmLatMin').value,$('#ddmLatHem').value);
        lon = ddmToDeg($('#ddmLonDeg').value,$('#ddmLonMin').value,$('#ddmLonHem').value);
      }
      if (lat<-90||lat>90) throw new Error('Latitude out of range');
      if (lon<-180||lon>180) throw new Error('Longitude out of range');

      $('#outDD').textContent = `${lat.toFixed(6)}, ${lon.toFixed(6)}`;
      $('#outDMS').textContent = `${degToDMS(lat,true)}; ${degToDMS(lon,false)}`;
      $('#outDDM').textContent = `${degToDDM(lat,true)}; ${degToDDM(lon,false)}`;
    } catch(e){
      // surface a generic error message (specific ones already appear inline)
      alert('Please review your inputs: '+e.message);
    }
  });

  // --- Geodesic computations ---
  const R_EARTH = 6371008.8; // IUGG mean radius (meters)

  function toRad(d){ return d * Math.PI/180; }
  function toDeg(r){ return r * 180/Math.PI; }
  function formatLL(lat, lon){
    return `${lat.toFixed(6)}, ${lon.toFixed(6)}`;
  }
  function unitFactor(unit){
    return unit==='km'?1/1000 : unit==='mi'?1/1609.344 : unit==='nmi'?1/1852 : 1;
  }
  function haversine(lat1, lon1, lat2, lon2){
    const φ1=toRad(lat1), φ2=toRad(lat2), Δφ=toRad(lat2-lat1), Δλ=toRad(lon2-lon1);
    const a = Math.sin(Δφ/2)**2 + Math.cos(φ1)*Math.cos(φ2)*Math.sin(Δλ/2)**2;
    const c = 2*Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return R_EARTH * c;
  }
  function initialBearing(lat1, lon1, lat2, lon2){
    const φ1=toRad(lat1), φ2=toRad(lat2), Δλ=toRad(lon2-lon1);
    const y = Math.sin(Δλ)*Math.cos(φ2);
    const x = Math.cos(φ1)*Math.sin(φ2) - Math.sin(φ1)*Math.cos(φ2)*Math.cos(Δλ);
    const θ = toDeg(Math.atan2(y,x));
    return (θ+360)%360;
  }
  function midpoint(lat1, lon1, lat2, lon2){
    const φ1=toRad(lat1), φ2=toRad(lat2), λ1=toRad(lon1), Δλ=toRad(lon2-lon1);
    const Bx = Math.cos(φ2)*Math.cos(Δλ);
    const By = Math.cos(φ2)*Math.sin(Δλ);
    const φm = Math.atan2(Math.sin(φ1)+Math.sin(φ2), Math.sqrt((Math.cos(φ1)+Bx)**2 + By**2));
    const λm = λ1 + Math.atan2(By, Math.cos(φ1)+Bx);
    return [toDeg(φm), clampLon(toDeg(λm))];
  }
  function destination(lat1, lon1, bearingDeg, distMeters){
    const δ = distMeters / R_EARTH;
    const θ = toRad(((bearingDeg%360)+360)%360);
    const φ1 = toRad(lat1), λ1 = toRad(lon1);
    const φ2 = Math.asin(Math.sin(φ1)*Math.cos(δ) + Math.cos(φ1)*Math.sin(δ)*Math.cos(θ));
    const λ2 = λ1 + Math.atan2(Math.sin(θ)*Math.sin(δ)*Math.cos(φ1), Math.cos(δ)-Math.sin(φ1)*Math.sin(φ2));
    return [clampLat(toDeg(φ2)), clampLon(toDeg(λ2))];
  }

  function tryParseLatLon(latEl, lonEl, prefix){
    const latStr = latEl.value.trim();
    const lonStr = lonEl.value.trim();
    if (!latStr || !lonStr) throw new Error(`${prefix}: both lat and lon are required`);
    const lat = parseDD(latStr);
    const lon = parseDD(lonStr);
    if (lat<-90||lat>90) throw new Error(`${prefix}: latitude out of range`);
    if (lon<-180||lon>180) throw new Error(`${prefix}: longitude out of range`);
    return [lat, lon];
  }

  $('#btnSwap').addEventListener('click', () => {
    const aLat=$('#gaLat'), aLon=$('#gaLon'), bLat=$('#gbLat'), bLon=$('#gbLon');
    [aLat.value, bLat.value] = [bLat.value, aLat.value];
    [aLon.value, bLon.value] = [bLon.value, aLon.value];
  });

  $('#btnGeo').addEventListener('click', () => {
    try {
      const mode = $('#gMode').value;
      const [alat, alon] = tryParseLatLon($('#gaLat'), $('#gaLon'), 'Point A');

      if (mode==='dist' || mode==='mid'){
        const [blat, blon] = tryParseLatLon($('#gbLat'), $('#gbLon'), 'Point B');
        const d = haversine(alat, alon, blat, blon);
        const bearing = initialBearing(alat, alon, blat, blon);
        const mid = midpoint(alat, alon, blat, blon);

        $('#rDist').textContent = `${(d*unitFactor($('#gUnit').value)).toFixed(3)} ${$('#gUnit').value}`;
        $('#rBrg').textContent  = `${bearing.toFixed(2)}°`;
        $('#rMid').textContent  = formatLL(mid[0], mid[1]);
        $('#rDest').textContent = '—';
      } else if (mode==='dest'){
        const brg = Number($('#gBearing').value);
        const dist = Number($('#gDistance').value);
        if (isNaN(brg)) throw new Error('Destination: bearing is required');
        if (isNaN(dist) || dist<=0) throw new Error('Destination: distance must be > 0');
        const distMeters = $('#gUnit').value==='m' ? dist :
                           $('#gUnit').value==='km' ? dist*1000 :
                           $('#gUnit').value==='mi' ? dist*1609.344 : dist*1852;
        const [dlat, dlon] = destination(alat, alon, brg, distMeters);
        $('#rDist').textContent = `${(distMeters*unitFactor($('#gUnit').value)).toFixed(3)} ${$('#gUnit').value}`;
        $('#rBrg').textContent  = `${( (brg%360+360)%360 ).toFixed(2)}°`;
        $('#rMid').textContent  = '—';
        $('#rDest').textContent = formatLL(dlat, dlon);
      }
      // clear any error prompts
      ['gaLatErr','gaLonErr','gbLatErr','gbLonErr','gDistErr'].forEach(id=>setErr(id,''));
    } catch(e){
      // attempt to attach to a specific field when possible
      const msg = e.message||'Invalid input';
      if (msg.includes('Point A') && msg.includes('latitude')) setErr('gaLatErr', msg);
      else if (msg.includes('Point A') && msg.includes('longitude')) setErr('gaLonErr', msg);
      else if (msg.includes('Point B') && msg.includes('latitude')) setErr('gbLatErr', msg);
      else if (msg.includes('Point B') && msg.includes('longitude')) setErr('gbLonErr', msg);
      else if (msg.startsWith('Destination')) setErr('gDistErr', msg);
      else alert(msg);
    }
  });

  // --- Cartesian distances ---
  $('#btnCart').addEventListener('click', () => {
    const x1=Number($('#cx1').value), y1=Number($('#cy1').value), z1=$('#cz1').value===''?null:Number($('#cz1').value);
    const x2=Number($('#cx2').value), y2=Number($('#cy2').value), z2=$('#cz2').value===''?null:Number($('#cz2').value);
    if ([x1,y1,x2,y2].some(v=>Number.isNaN(v))) { alert('Please provide numeric x and y for both points.'); return; }
    const d2 = Math.hypot(x2-x1, y2-y1);
    let d3 = '—';
    if (z1!==null && z2!==null && !Number.isNaN(z1) && !Number.isNaN(z2)) {
      d3 = Math.hypot(x2-x1, y2-y1, z2-z1).toFixed(6);
    }
    $('#r2d').textContent = d2.toFixed(6);
    $('#r3d').textContent = d3;
  });
  </script>
</body>
</html>

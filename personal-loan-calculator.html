<!DOCTYPE html>
<html lang="en">
<head> 
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Loan Calculator - Calculate Monthly Payments & Interest</title>
    <meta name="description" content="Calculate personal loan payments, total interest, payoff date, and savings from extra payments. Includes origination fees, amortization schedule, and professional analysis.">
    
    <link rel="canonical" href="https://calcdomain.com/personal-loan-calculator.html"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .prose { max-width: 65ch; margin-left: auto; margin-right: auto; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2.5rem; margin-bottom: 1rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.5rem;}
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 2rem; margin-bottom: 0.5rem; }
        .prose p, .prose ul { margin-bottom: 1rem; line-height: 1.6; color: #374151; }
        .prose ul { list-style-position: outside; padding-left: 1.25rem; }
        .prose li { margin-bottom: 0.5rem; }
        .formula-box { background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 8px; padding: 1rem; overflow-x: auto; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
        details > summary { cursor: pointer; font-weight: 600; }
        details[open] > summary { margin-bottom: 0.5rem; }
        .table-container { max-height: 400px; overflow-y: auto; border: 1px solid #d1d5db; border-radius: 8px; }
        .table-container table { width: 100%; border-collapse: collapse; }
        .table-container th, .table-container td { padding: 0.75rem; text-align: right; border-bottom: 1px solid #f3f4f6; }
        .table-container th:first-child, .table-container td:first-child { text-align: left; }
        .table-container th { background: #f9fafb; font-weight: 600; position: sticky; top: 0; }
        @media print {
            body * { visibility: hidden; }
            #print-section, #print-section * { visibility: visible; }
            #print-section { position: absolute; left: 0; top: 0; width: 100%; }
            #header, #sidebar, #footer, #seo-content, #print-controls { display: none !important; }
        }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Personal Loan Calculator",
      "description": "Calculate personal loan payments, origination fees, amortization schedule, and savings from extra payments.",
      "url": "https://calcdomain.com/personal-loan-calculator.html",
      "inLanguage": "en",
      "author": { "@type": "Person", "name": "Ugo Candido" },
      "publisher": { "@type": "Organization", "name": "CalcDomain" }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
        { "@type": "ListItem", "position": 2, "name": "Finance", "item": "https://calcdomain.com/finance.html" },
        { "@type": "ListItem", "position": 3, "name": "Loans & Debt", "item": "https://calcdomain.com/subcategories/finance-loans-debt.html" },
        { "@type": "ListItem", "position": 4, "name": "Personal Loan Calculator", "item": "https://calcdomain.com/personal-loan-calculator.html" }
      ]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Calculate Personal Loan Payments",
      "description": "Step-by-step guide to calculating personal loan monthly payments, total interest, and payoff schedules.",
      "step": [
        {"@type": "HowToStep", "name": "Enter Loan Details", "text": "Input the loan amount, APR, term, and select your currency."},
        {"@type": "HowToStep", "name": "Add Fees and Extras", "text": "Include origination fees and any extra payments (recurring or one-time)."},
        {"@type": "HowToStep", "name": "Review Visual Results", "text": "Analyze your monthly payment, total interest, and payoff timeline using interactive charts and a detailed schedule."}
      ]
    }
    </script>
    <script src="search.js" defer></script>
    <style>
        /* CalcDomain Search Styles */
        .search-highlight {
            background: linear-gradient(120deg, #fbbf24 0%, #f59e0b 100%);
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 600;
            color: #78350f;
        }
        
        #search-results {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-height: 400px;
            overflow-y: auto;
        }
        
        #search-results a {
            display: block;
            padding: 16px;
            border-bottom: 1px solid #f3f4f6;
            transition: all 0.2s ease;
            text-decoration: none;
        }
        
        #search-results a:last-child {
            border-bottom: none;
        }
        
        #search-results a:hover {
            background-color: #f8fafc;
            transform: translateX(4px);
        }
        
        #search-results a:focus {
            background-color: #eff6ff;
            outline: 2px solid #3b82f6;
            outline-offset: -2px;
        }
        
        #search-results h3 {
            margin: 0 0 8px 0;
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
        }
        
        #search-results p {
            margin: 0 0 8px 0;
            font-size: 14px;
            color: #6b7280;
            line-height: 1.4;
        }
        
        #search-results .bg-blue-100 {
            background-color: #dbeafe !important;
            color: #1e40af !important;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 6px;
            font-weight: 500;
        }
        
        input[type="search"]:focus {
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
        }
        
        @media (max-width: 768px) {
            #search-results {
                max-height: 300px;
                margin-top: 8px;
                border-radius: 8px;
            }
            
            #search-results a {
                padding: 12px;
            }
            
            #search-results h3 {
                font-size: 15px;
            }
            
            #search-results p {
                font-size: 13px;
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        #search-results.show {
            animation: fadeInUp 0.3s ease-out;
        }
        
        #search-results::-webkit-scrollbar {
            width: 6px;
        }
        
        #search-results::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        #search-results::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        #search-results::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
            </style>
<!-- MathJax for LaTeX formulas -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['\(','\)'], ['$', '$']],
      displayMath: [['\[','\]']]
    },
    svg: { fontCache: 'global' }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link rel="preload" href="/assets/js/mobile-menu.js" as="script">
<link rel="preload" href="/assets/js/page-enhancements.js" as="script">

</head>
<body class="bg-gray-50 text-gray-800">

    <header class="bg-white shadow-sm sticky top-0 z-50">
    <nav class="container mx-auto px-4 lg:px-6 py-4">
        <!-- TOP ROW -->
        <div class="flex justify-between items-center">
            <!-- LOGO -->
            <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>
            
            <!-- DESKTOP SEARCH -->
            <div class="w-full max-w-md hidden md:block mx-8">
                <div class="relative">
                    <input 
                        type="search" 
                        id="search-input"
                        placeholder="Search for a calculator..." 
                        class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        autocomplete="off"
                    >
                    <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <!-- CONTAINER RISULTATI RICERCA -->
                    <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
                </div>
            </div>
            
            <!-- NAVIGATION LINKS -->
            <div class="hidden md:flex items-center space-x-6">
                <a href="search.html" class="text-gray-700 hover:text-blue-600 transition-colors">Advanced Search</a>
                <a href="index.html#categories" class="text-gray-700 hover:text-blue-600 transition-colors">Categories</a>
            </div>
            
            <!-- MOBILE TOGGLE -->
            <button id="mobile-menu-toggle" class="md:hidden p-2">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
        
        <!-- MOBILE MENU -->
        <div id="mobile-menu" class="md:hidden mt-4 hidden">
            <div class="mb-4">
                <div class="relative">
                    <input 
                        type="search" 
                        id="mobile-search-input"
                        placeholder="Search calculators..." 
                        class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                    <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>
            </div>
            <div class="space-y-2">
                <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
                <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
            </div>
        </div>
    </nav>
</header>

    <main class="container mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            <section class="w-full lg:w-2/3">
                <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
                    <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
                    <a href="finance.html" class="hover:text-blue-600">Finance</a> &raquo;
                    <a href="subcategories/finance-loans-debt.html" class="hover:text-blue-600">Loans &amp; Debt</a> &raquo;
                    <span class="text-gray-900">Personal Loan Calculator</span>
                </nav>
                <div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
                    <h1 class="text-3xl font-bold mb-2">Personal Loan Calculator</h1>
                    <p class="text-gray-600 mb-6">An advanced tool to visualize your loan breakdown, savings, and amortization schedule.</p>

                    <div id="calculator-ui" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="currency" class="block text-sm font-medium text-gray-700">Currency</label>
                                <select id="currency" class="mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    <option value="USD" selected>USD - United States Dollar ($)</option>
                                    <option value="EUR">EUR - Euro (€)</option>
                                    <option value="GBP">GBP - British Pound (£)</option>
                                    <option value="JPY">JPY - Japanese Yen (¥)</option>
                                    <option value="CAD">CAD - Canadian Dollar (C$)</option>
                                    <option value="AUD">AUD - Australian Dollar (A$)</option>
                                    <option value="INR">INR - Indian Rupee (₹)</option>
                                </select>
                            </div>
                             <div>
                                <label for="apr" class="block text-sm font-medium text-gray-700">APR (%)</label>
                                <input type="number" id="apr" value="11" step="0.01" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>

                        <div>
                            <label for="loanAmount" class="block text-sm font-medium text-gray-700">Loan Amount</label>
                            <input type="number" id="loanAmount" value="10000" step="100" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <input type="range" id="loanAmountSlider" value="10000" min="500" max="100000" step="100" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer mt-2">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700">Loan Term</label>
                            <div class="mt-1 grid grid-cols-2 gap-4">
                                <input type="number" id="termValue" value="36" min="1" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <select id="termUnit" class="block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    <option value="months" selected>Months</option>
                                    <option value="years">Years</option>
                                </select>
                            </div>
                            <input type="range" id="termSlider" value="36" min="6" max="120" step="1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer mt-2">
                        </div>
                        
                        <div class="border-t pt-6 space-y-6">
                            <h3 class="text-base font-medium text-gray-800">Advanced Options</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="origFee" class="block text-sm font-medium text-gray-700">Origination Fee (%)</label>
                                    <input type="number" id="origFee" value="5" step="0.01" min="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="feeMode" class="block text-sm font-medium text-gray-700">Fee Handling</label>
                                    <select id="feeMode" class="mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <option value="upfront" selected>Deduct from Loan</option>
                                        <option value="financed">Add to Loan</option>
                                    </select>
                                </div>
                            </div>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="extraPay" class="block text-sm font-medium text-gray-700">Extra Recurring Payment</label>
                                    <input type="number" id="extraPay" value="50" step="1" min="0" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="lumpSum" class="block text-sm font-medium text-gray-700">One-Time Lump Sum</label>
                                    <input type="number" id="lumpSum" value="0" step="1" min="0" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                            </div>
                            <div>
                                <label for="startDate" class="block text-sm font-medium text-gray-700">First Payment Date</label>
                                <input type="month" id="startDate" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>
                    </div>

                    <div id="results" class="mt-8 bg-blue-50 p-6 rounded-lg">
                         <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Loan Analysis</h3>
                            <div id="print-controls" class="flex gap-2 items-center">
                                <span id="shareFeedback" class="text-sm text-green-600 hidden">Link Copied!</span>
                                <button id="shareButton" title="Copy Share Link" class="p-2 rounded-md hover:bg-blue-200 text-blue-600">
                                    <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20"><path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"></path></svg>
                                </button>
                                <button id="exportButton" title="Export to CSV" class="p-2 rounded-md hover:bg-blue-200 text-blue-600">
                                    <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                                </button>
                            </div>
                        </div>

                        <div class="flex flex-col md:flex-row gap-6">
                            <div class="w-full md:w-2/3 grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div class="bg-white p-3 rounded-lg text-center"><p class="text-sm text-gray-600">Monthly Payment</p><p class="text-2xl font-bold text-blue-600" id="monthlyPayment">$0.00</p></div>
                                <div class="bg-white p-3 rounded-lg text-center"><p class="text-sm text-gray-600">Total Interest</p><p class="text-2xl font-bold text-red-600" id="totalInterest">$0.00</p></div>
                                <div class="bg-white p-3 rounded-lg text-center"><p class="text-sm text-gray-600">Interest Saved</p><p class="text-2xl font-bold text-green-600" id="interestSaved">$0.00</p></div>
                                <div class="bg-white p-3 rounded-lg text-center"><p class="text-sm text-gray-600">Time Saved</p><p class="text-2xl font-bold text-green-600" id="timeSaved">—</p></div>
                            </div>
                            <div class="w-full md:w-1/3 h-40"><canvas id="pieChart"></canvas></div>
                        </div>
                        
                        <details class="mt-6 bg-white rounded-lg p-4"><summary>View Charts & Schedule</summary>
                            <div class="mt-4 h-64"><canvas id="lineChart"></canvas></div>
                            <div class="mt-6 table-container" id="scheduleContainer">
                                <table>
                                    <thead><tr><th>#</th><th>Date</th><th>Payment</th><th>Interest</th><th>Principal</th><th>Balance</th></tr></thead>
                                    <tbody id="scheduleBody"></tbody>
                                </table>
                            </div>
                        </details>
                    </div>
                </div>

                <article id="seo-content" class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
                    <h2>How to Use the Personal Loan Calculator</h2>
                    <p>This professional personal loan calculator helps you understand the true cost of borrowing and plan your finances effectively. Enter your loan details to get instant calculations of monthly payments, total interest, and payoff schedules.</p>
                    
                    <h3>Key Inputs Explained</h3>
                    <ul>
                        <li><strong>Loan Amount:</strong> The total amount you plan to borrow from the lender before any fees are deducted.</li>
                        <li><strong>APR (Annual Percentage Rate):</strong> The yearly cost of borrowing, including interest and certain fees, expressed as a percentage.</li>
                        <li><strong>Loan Term:</strong> The length of time you have to repay the loan. Longer terms result in lower monthly payments but higher total interest costs.</li>
                        <li><strong>Origination Fee:</strong> An upfront fee charged by some lenders, which can be deducted from your loan proceeds or financed into the loan balance.</li>
                        <li><strong>Extra Payments:</strong> Optional additional amounts paid to reduce your principal balance, which lowers the total interest paid and shortens the loan term.</li>
                    </ul>

                    <h2>Factors That Determine Your APR</h2>
                    <p>The APR you are offered is the single most important factor in your loan's cost. Lenders determine this rate based on several key factors related to your financial health:</p>
                    <ul>
                        <li><strong>Credit Score:</strong> This is often the most critical factor. Borrowers with higher credit scores (e.g., above 720) are seen as lower risk and are typically offered the lowest rates.</li>
                        <li><strong>Debt-to-Income (DTI) Ratio:</strong> Lenders check how much of your monthly income goes toward debt payments. A lower DTI ratio indicates you have more capacity to take on new debt.</li>
                        <li><strong>Loan Term and Amount:</strong> Sometimes, shorter terms or specific loan amounts may qualify for lower interest rates from certain lenders.</li>
                        <li><strong>Employment History:</strong> A stable employment history can signal to lenders that you are a reliable borrower.</li>
                    </ul>

                    <h2>The Personal Loan Payment Formula</h2>
                    <p>Our calculator uses the standard amortization formula to determine your fixed monthly payment. This ensures each payment covers the interest accrued for that month, with the remainder paying down your principal balance.</p>
                    <div class="formula-box">
                        <p>M = P × [r(1 + r)^n] / [(1 + r)^n - 1]</p>
                        <p><strong>Where:</strong> M = Monthly payment, P = Principal, r = Monthly interest rate (APR ÷ 12), n = Number of payments</p>
                    </div>

                    <h2>How to Choose a Personal Loan</h2>
                    <p>When comparing loan offers, look beyond just the monthly payment. Consider the following:</p>
                    <ol>
                        <li><strong>Compare APRs, not just interest rates.</strong> The APR is the most accurate measure for comparing the cost of different loans because it includes fees.</li>
                        <li><strong>Check for Fees.</strong> Pay close attention to origination fees, late payment fees, and whether there are any prepayment penalties for paying the loan off early.</li>
                        <li><strong>Choose the Right Term.</strong> Select the shortest loan term that you can comfortably afford. This will save you a significant amount in total interest.</li>
                        <li><strong>Read Lender Reviews.</strong> Research the lender's reputation and customer service record before committing.</li>
                    </ol>
                    
                    <h2>Frequently Asked Questions (FAQ)</h2>
                    <details class="border-t py-2">
                        <summary>What credit score do I need for a personal loan?</summary>
                        <p class="mt-2 text-gray-700">Most lenders require a credit score of at least 580-600 for approval, though the best rates typically go to borrowers with scores above 720. Higher scores mean lower APRs and better terms.</p>
                    </details>
                    <details class="border-t py-2">
                        <summary>How does loan term affect my payments?</summary>
                        <p class="mt-2 text-gray-700">Longer terms mean lower monthly payments but significantly more total interest paid over the life of the loan. Shorter terms have higher payments but result in substantial interest savings.</p>
                    </details>
                    <details class="border-t py-2">
                        <summary>Can I pay off my personal loan early?</summary>
                        <p class="mt-2 text-gray-700">Most modern personal loans do not have prepayment penalties, allowing you to pay them off early to save on interest. However, it is always critical to check the specific terms of your loan agreement.</p>
                    </details>
                    <details class="border-t py-2">
                        <summary>What is the difference between a fixed and variable rate loan?</summary>
                        <p class="mt-2 text-gray-700">A fixed-rate loan has an interest rate that remains the same for the entire term, providing predictable monthly payments. A variable-rate loan has an interest rate that can change over time based on market conditions, meaning your payment could go up or down.</p>
                    </details>
                    <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
                        <p><strong>Tool developed by Ugo Candido.</strong> Finance accuracy reviewed by the CalcDomain Editorial Board.<br>
                        Last accuracy review: <time datetime="2025-02-10">February 10, 2025</time></p>
                    </div>
                </article>
            </section>

            <aside id="sidebar" class="w-full lg:w-1/3">
                 <div class="sticky top-24 space-y-6">
                     <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
                         Ad Placement (300×600)
                     </div>
                     <div class="bg-white p-6 rounded-lg shadow-md">
                         <h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
                         <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
                             <li>Model origination fees and see the true amount deposited vs. financed.</li>
                             <li>Compare recurring and lump-sum extras to quantify time and interest saved.</li>
                             <li>Generate a printable schedule with payment, interest, and balance columns.</li>
                         </ul>
                     </div>
                     <div class="bg-white p-6 rounded-lg shadow-md">
                         <h3 class="font-bold text-lg mb-4">Related loan tools</h3>
                         <ul class="space-y-3 text-sm">
                             <li><a href="simple-loan-calculator.html" class="text-blue-600 hover:underline">Simple Loan Calculator</a></li>
                             <li><a href="loan-amortization.html" class="text-blue-600 hover:underline">Loan Amortization Schedule</a></li>
                             <li><a href="loan-payoff.html" class="text-blue-600 hover:underline">Loan Payoff Calculator</a></li>
                             <li><a href="loan-prepayment.html" class="text-blue-600 hover:underline">Loan Prepayment Planner</a></li>
                            <li><a href="apr.html" class="text-blue-600 hover:underline">APR Calculator</a></li>
                         </ul>
                     </div>
                 </div>
            </aside>
        </div>
    </main>
    
    <footer id="footer" class="bg-white border-t mt-12">
        <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
            <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
            <div class="mt-4 space-x-4">
                <a href="about.html" class="hover:text-blue-600">About</a>
                <a href="contact.html" class="hover:text-blue-600">Contact</a>
                <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
                <a href="terms.html" class="hover:text-blue-600">Terms</a>
            </div>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const elements = {
            currency: document.getElementById('currency'),
            loanAmount: document.getElementById('loanAmount'),
            loanAmountSlider: document.getElementById('loanAmountSlider'),
            apr: document.getElementById('apr'),
            termValue: document.getElementById('termValue'),
            termUnit: document.getElementById('termUnit'),
            termSlider: document.getElementById('termSlider'),
            origFee: document.getElementById('origFee'),
            feeMode: document.getElementById('feeMode'),
            extraPay: document.getElementById('extraPay'),
            lumpSum: document.getElementById('lumpSum'),
            startDate: document.getElementById('startDate'),
            monthlyPayment: document.getElementById('monthlyPayment'),
            totalInterest: document.getElementById('totalInterest'),
            interestSaved: document.getElementById('interestSaved'),
            timeSaved: document.getElementById('timeSaved'),
            scheduleBody: document.getElementById('scheduleBody'),
            shareButton: document.getElementById('shareButton'),
            exportButton: document.getElementById('exportButton'),
            shareFeedback: document.getElementById('shareFeedback'),
        };

        let currencyConfig = { style: 'currency', currency: 'USD', locale: 'en-US' };
        let fullSchedule = [];
        let chartInstances = { pie: null, line: null };
        const currencyMap = {
            USD: { locale: 'en-US', code: 'USD' }, EUR: { locale: 'de-DE', code: 'EUR' },
            GBP: { locale: 'en-GB', code: 'GBP' }, JPY: { locale: 'ja-JP', code: 'JPY' },
            CAD: { locale: 'en-CA', code: 'CAD' }, AUD: { locale: 'en-AU', code: 'AUD' },
            INR: { locale: 'en-IN', code: 'INR' },
        };

        const fmtCurrency = (val) => new Intl.NumberFormat(currencyConfig.locale, { style: 'currency', currency: currencyConfig.code }).format(val || 0);
        const fmtDate = (date) => date.toLocaleDateString(currencyConfig.locale, { year: 'numeric', month: 'short' });

        function calculateAmortization(principal, termMonths, monthlyRate, extraPay, lumpSum, startDate) {
            let balance = principal;
            let totalInterestPaid = 0;
            const schedule = [];
            if (termMonths <= 0 || principal <= 0) return { schedule, totalInterestPaid, term: 0 };
            
            const monthlyPayment = monthlyRate > 0
                ? principal * (monthlyRate * Math.pow(1 + monthlyRate, termMonths)) / (Math.pow(1 + monthlyRate, termMonths) - 1)
                : principal / termMonths;
            
            for (let i = 1; i <= termMonths * 2 && balance > 0.01; i++) {
                const interestPayment = balance * monthlyRate;
                let principalPayment = monthlyPayment - interestPayment;
                let actualExtra = extraPay;
                if (i === 1) actualExtra += lumpSum;
                
                if ((balance - principalPayment - actualExtra) < 0) {
                    principalPayment = balance - actualExtra;
                    if(principalPayment < 0) {
                        actualExtra = balance;
                        principalPayment = 0;
                    }
                }
                
                const currentPayment = interestPayment + principalPayment + actualExtra;
                balance -= (principalPayment + actualExtra);
                totalInterestPaid += interestPayment;

                const paymentDate = new Date(startDate.getFullYear(), startDate.getMonth() + i - 1, 1);
                schedule.push({
                    payment: i, date: paymentDate, paymentAmount: currentPayment,
                    interest: interestPayment, principal: principalPayment + actualExtra,
                    balance: Math.max(0, balance)
                });
            }
            return { schedule, totalInterestPaid, term: schedule.length, basePayment: monthlyPayment };
        }

        function calculateLoan() {
            const loanAmount = parseFloat(elements.loanAmount.value) || 0;
            const apr = parseFloat(elements.apr.value) || 0;
            let termMonths = parseInt(elements.termValue.value) || 0;
            if (elements.termUnit.value === 'years') termMonths *= 12;

            const origFeePercent = parseFloat(elements.origFee.value) || 0;
            const isFinanced = elements.feeMode.value === 'financed';
            const extraPay = parseFloat(elements.extraPay.value) || 0;
            const lumpSum = parseFloat(elements.lumpSum.value) || 0;
            const startDate = elements.startDate.value ? new Date(elements.startDate.value + '-02') : new Date();

            if (loanAmount <= 0 || termMonths <= 0) return;

            const feeAmount = loanAmount * (origFeePercent / 100);
            const principal = isFinanced ? loanAmount + feeAmount : loanAmount;
            const monthlyRate = apr / 100 / 12;

            const baseline = calculateAmortization(principal, termMonths, monthlyRate, 0, 0, startDate);
            const accelerated = calculateAmortization(principal, termMonths, monthlyRate, extraPay, lumpSum, startDate);
            fullSchedule = accelerated.schedule;

            const interestSaved = baseline.totalInterestPaid - accelerated.totalInterestPaid;
            const monthsSaved = baseline.term - accelerated.term;

            elements.monthlyPayment.textContent = fmtCurrency(baseline.basePayment);
            elements.totalInterest.textContent = fmtCurrency(accelerated.totalInterestPaid);
            elements.interestSaved.textContent = fmtCurrency(interestSaved);
            const yearsSaved = Math.floor(monthsSaved / 12);
            const remMonthsSaved = monthsSaved % 12;
            elements.timeSaved.textContent = `${yearsSaved}y ${remMonthsSaved}m`;

            updateScheduleUI();
            updateCharts(principal, accelerated.totalInterestPaid, baseline.schedule, accelerated.schedule);
        }
        
        function updateScheduleUI() {
            elements.scheduleBody.innerHTML = '';
            const displaySchedule = fullSchedule.slice(0, 240);
            displaySchedule.forEach(p => {
                const row = elements.scheduleBody.insertRow();
                row.innerHTML = `<td>${p.payment}</td><td>${fmtDate(p.date)}</td><td>${fmtCurrency(p.paymentAmount)}</td><td>${fmtCurrency(p.interest)}</td><td>${fmtCurrency(p.principal)}</td><td>${fmtCurrency(p.balance)}</td>`;
            });
             if (fullSchedule.length > 240) {
                 elements.scheduleBody.innerHTML += `<tr><td colspan="6" class="p-4 text-center text-gray-500">... and ${fullSchedule.length - 240} more payments. Export to see all.</td></tr>`;
             }
        }

        function updateCharts(principal, interest, baselineSchedule, acceleratedSchedule) {
            if (chartInstances.pie) chartInstances.pie.destroy();
            chartInstances.pie = new Chart('pieChart', { type: 'pie', data: {
                labels: ['Principal', 'Total Interest'],
                datasets: [{ data: [principal, interest], backgroundColor: ['#3b82f6', '#ef4444'], borderWidth: 0 }]
            }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } } });

            if (chartInstances.line) chartInstances.line.destroy();
            chartInstances.line = new Chart('lineChart', { type: 'line', data: {
                labels: baselineSchedule.map(p => p.payment),
                datasets: [
                    { label: 'Original Balance', data: baselineSchedule.map(p => p.balance), borderColor: '#9ca3af', fill: false, pointRadius: 0 },
                    { label: 'New Balance (w/ Extra Payments)', data: acceleratedSchedule.map(p => p.balance), borderColor: '#22c55e', fill: false, pointRadius: 0 }
                ]
            }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } }, plugins: { legend: { display: true, position: 'bottom' }}} });
        }
        
        function syncInputs(source, target, isTerm = false) {
             if (isTerm) {
                const isYears = elements.termUnit.value === 'years';
                if (source.id.includes('Slider')) {
                    target.value = isYears ? Math.round(source.value / 12) : source.value;
                } else {
                    target.value = isYears ? source.value * 12 : source.value;
                }
            } else {
                target.value = source.value;
            }
            calculateLoan();
        }
        
        elements.loanAmount.addEventListener('input', () => syncInputs(elements.loanAmount, elements.loanAmountSlider));
        elements.loanAmountSlider.addEventListener('input', () => syncInputs(elements.loanAmountSlider, elements.loanAmount));
        elements.termValue.addEventListener('input', () => syncInputs(elements.termValue, elements.termSlider, true));
        elements.termSlider.addEventListener('input', () => syncInputs(elements.termSlider, elements.termValue, true));
        elements.termUnit.addEventListener('change', () => syncInputs(elements.termValue, elements.termSlider, true));

        elements.currency.addEventListener('change', () => {
            currencyConfig = currencyMap[elements.currency.value];
            calculateLoan();
        });

        elements.shareButton.addEventListener('click', () => {
            const params = new URLSearchParams(Object.fromEntries(Object.keys(elements).filter(k => (elements[k].nodeName === 'INPUT' || elements[k].nodeName === 'SELECT') && elements[k].id).map(k => [k, elements[k].value]))).toString();
            navigator.clipboard.writeText(`${window.location.origin}${window.location.pathname}?${params}`);
            elements.shareFeedback.classList.remove('hidden');
            setTimeout(() => elements.shareFeedback.classList.add('hidden'), 2000);
        });

        elements.exportButton.addEventListener('click', () => {
            const headers = ['Payment #', 'Date', 'Payment', 'Interest', 'Principal', 'Balance'];
            const csv = [headers.join(','), ...fullSchedule.map(p => [p.payment, fmtDate(p.date), p.paymentAmount.toFixed(2), p.interest.toFixed(2), p.principal.toFixed(2), p.balance.toFixed(2)].join(','))].join('\n');
            const link = document.createElement('a');
            link.href = 'data:text/csv;charset=utf-8,' + encodeURIComponent(csv);
            link.download = 'personal-loan-schedule.csv';
            link.click();
        });

        const allInputs = ['apr', 'origFee', 'feeMode', 'extraPay', 'lumpSum', 'startDate'];
        allInputs.forEach(id => elements[id].addEventListener('input', calculateLoan));

        const now = new Date();
        elements.startDate.value = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`;
        const urlParams = new URLSearchParams(window.location.search);
        urlParams.forEach((val, key) => { if (elements[key]) elements[key].value = val; });
        
        elements.currency.dispatchEvent(new Event('change'));
        syncInputs(elements.termValue, elements.termSlider, true);
        calculateLoan();
    });
    </script>
</body>
</html>

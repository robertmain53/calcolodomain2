<!DOCTYPE html>
<html lang="en">
<head>
<link rel="canonical" href="https://calcdomain.com/countdown-calculator.html">





<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Countdown Calculator - Calculate Time Remaining</title>
<meta name="description" content="Calculate the time remaining until a specific date and time, or start a countdown timer for a set duration. See the breakdown in years, months, days, hours, minutes, and seconds.">

<meta name="author" content="Ugo Candido">

<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
/* Custom focus state for A11y */
:focus-visible {
outline: 3px solid #3b82f6;
outline-offset: 2px;
box-shadow: none;
}
/* Ensure touch targets are large enough */
input, select, button {
min-height: 48px;
}
/* Style for the main countdown display */
#countdown-display {
font-size: 2.5rem;
font-weight: 700;
color: #1e3a8a;
letter-spacing: -0.025em;
text-align: center;
margin-bottom: 1.5rem;
min-height: 50px; /* Prevents CLS */
}
#countdown-summary {
text-align: center;
color: #4b5563;
min-height: 1.25rem; /* Prevents CLS */
margin-bottom: 1.5rem;
}
/* Hide/show sections based on mode */
.hidden-section {
display: none;
}
</style>

<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "WebPage",
"name": "Countdown Calculator - Calculate Time Remaining",
"description": "Calculate the time remaining until a specific date and time, or start a countdown timer for a set duration. See the breakdown in years, months, days, hours, minutes, and seconds.",
"url": "https://calcdomain.com/countdown-calculator.html",
"inLanguage": "en",
"author": { "@type": "Person", "name": "Ugo Candido" },
"publisher": { "@type": "Organization", "name": "CalcDomain" }
}
</script>
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Lifestyle & Everyday",
      "item": "https://calcdomain.com/lifestyle-everyday.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Time and Date",
      "item": "https://calcdomain.com/subcategories/time-date.html"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Countdown Calculator",
      "item": "https://calcdomain.com/countdown-calculator.html"
    }
  ]
}</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "HowTo",
"name": "How to Use the Countdown Calculator",
"description": "A step-by-step guide to calculating the time remaining until an event or for a set duration.",
"step": [
{"@type": "HowToStep", "name": "Select Mode", "text": "Choose 'Countdown to Date' to calculate time until a specific event, or 'Countdown for Duration' to start a timer."},
{"@type": "HowToStep", "name": "Enter Target Date/Time", "text": "If using 'Countdown to Date' mode, select a future date and, optionally, a specific time."},
{"@type": "HowToStep", "name": "Enter Duration", "text": "If using 'Countdown for Duration' mode, input the desired length of time in days, hours, minutes, and seconds."},
{"@type": "HowToStep", "name": "Start Countdown", "text": "Press the 'Start Countdown' button to begin the calculation and see the live timer."},
{"@type": "HowToStep", "name": "Review Results", "text": "Observe the time remaining as it updates in real-time. You can also view the total time remaining broken down into different units (e.g., total days, total hours)."}
]
}
</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "FAQPage",
"mainEntity": [
{
"@type": "Question",
"name": "How does this calculator handle leap years?",
"acceptedAnswer": {
"@type": "Answer",
"text": "The calculator accurately accounts for leap years when calculating the time difference between two dates. It uses the JavaScript Date object, which is based on the Gregorian calendar and correctly handles the extra day in a leap year (February 29th)."
}
},
{
"@type": "Question",
"name": "Can I count down to an event in a different time zone?",
"acceptedAnswer": {
"@type": "Answer",
"text": "The calculator operates based on your device's local time zone. When you input a date and time, it's assumed to be in your current time zone. For events in other time zones, you should first convert the event's time to your local time and then enter that into the calculator."
}
},
{
"@type": "Question",
"name": "What's the difference between 'Countdown to Date' and 'Countdown for Duration'?",
"acceptedAnswer": {
"@type": "Answer",
"text": "'Countdown to Date' calculates the time remaining between now and a specific future point in time (e.g., New Year's Day). 'Countdown for Duration' simply starts a timer for a length of time you specify (e.g., 25 minutes)."
}
},
{
"@type": "Question",
"name": "Does the countdown update in real-time?",
"acceptedAnswer": {
"@type": "Answer",
"text": "Yes. Once you start the countdown, the display will update every second to show the time remaining."
}
},
{
"@type": "Question",
"name": "Can I save or share my countdown?",
"acceptedAnswer": {
"@type": "Answer",
"text": "This tool is a client-side calculator, meaning it runs in your browser. It does not save your countdowns on a server. If you close the page, the timer will be lost. To share, you can simply share the URL of this calculator page."
}
},
{
"@type": "Question",
"name": "What is the 'Unix timestamp' mentioned in the formula?",
"acceptedAnswer": {
"@type": "Answer",
"text": "A Unix timestamp is the total number of milliseconds that have elapsed since midnight (00:00:00 UTC) on January 1, 1970. It's a universal standard used by computer systems to represent a specific point in time."
}
}
]
}
</script>
<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..."
class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
Categories
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
Categories
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
<a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="lifestyle-everyday.html" class="hover:text-blue-600">Lifestyle Everyday</a> &raquo;
<a href="subcategories/time-date.html" class="hover:text-blue-600">Time and Date</a> &raquo;
<span class="text-gray-900">Countdown Calculator</span>
</nav>

<div class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Countdown Calculator</h1>
<p class="text-gray-600 mb-6">Easily calculate the time remaining until any future event, or set a timer for a specific duration. This tool provides a precise breakdown in years, months, days, hours, minutes, and seconds, perfect for deadlines, holidays, or personal goals.</p>

<section id="calculator-ui" class="space-y-6">
<fieldset>
<legend class="block text-sm font-medium text-gray-700 mb-2">Select Countdown Mode</legend>
<div class="flex flex-col sm:flex-row gap-4">
<div class="flex items-center p-3 border border-gray-300 rounded-md flex-1">
<input type="radio" id="modeDate" name="countdownMode" value="date" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500" checked>
<label for="modeDate" class="ml-3 block text-sm font-medium text-gray-900">Countdown to Date</label>
</div>
<div class="flex items-center p-3 border border-gray-300 rounded-md flex-1">
<input type="radio" id="modeDuration" name="countdownMode" value="duration" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
<label for="modeDuration" class="ml-3 block text-sm font-medium text-gray-900">Countdown for Duration</label>
</div>
</div>
</fieldset>

<div id="date-inputs" class="space-y-4">
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<div>
<label for="targetDate" class="block text-sm font-medium text-gray-700">Target Date <span class="text-red-600" aria-hidden="true">*</span></label>
<input type="date" id="targetDate" aria-required="true" aria-describedby="date-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
<div>
<label for="targetTime" class="block text-sm font-medium text-gray-700">Target Time (Optional)</label>
<input type="time" id="targetTime"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
</div>
<p id="date-error" class="text-red-600 text-sm mt-1" aria-live="assertive"></p>
</div>

<div id="duration-inputs" class="space-y-4 hidden-section">
<p class="text-sm font-medium text-gray-700">Set Duration</p>
<div class="grid grid-cols-2 md:grid-cols-4 gap-4">
<div>
<label for="durationDays" class="block text-sm font-medium text-gray-700">Days</label>
<input type="number" id="durationDays" value="0" min="0" step="1" aria-describedby="duration-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
<div>
<label for="durationHours" class="block text-sm font-medium text-gray-700">Hours</label>
<input type="number" id="durationHours" value="0" min="0" max="23" step="1" aria-describedby="duration-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
<div>
<label for="durationMinutes" class="block text-sm font-medium text-gray-700">Minutes</label>
<input type="number" id="durationMinutes" value="0" min="0" max="59" step="1" aria-describedby="duration-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
<div>
<label for="durationSeconds" class="block text-sm font-medium text-gray-700">Seconds</label>
<input type="number" id="durationSeconds" value="0" min="0" max="59" step="1" aria-describedby="duration-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
</div>
<p id="duration-error" class="text-red-600 text-sm mt-1" aria-live="assertive"></p>
</div>

<div class="flex flex-col sm:flex-row gap-4 pt-2">
<button type="button" id="startBtn" class="w-full sm:w-auto flex-1 px-6 py-3 text-base font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
Start Countdown
</button>
<button type="button" id="resetBtn" class="w-full sm:w-auto flex-1 px-6 py-3 text-base font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
Reset
</button>
</div>
</section>

<section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6" style="min-height: 250px;">
<h3 class="text-lg font-semibold text-gray-800 text-center mb-4">Time Remaining</h3>
<div id="countdown-display" aria-live="polite">—</div>
<div id="countdown-summary" class="text-sm"></div>

<div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
<div class="result-card">
<h4>Total Days</h4>
<p id="totalDays">—</p>
</div>
<div class="result-card">
<h4>Total Hours</h4>
<p id="totalHours">—</p>
</div>
<div class="result-card">
<h4>Total Minutes</h4>
<p id="totalMinutes">—</p>
</div>
<div class="result-card">
<h4>Total Seconds</h4>
<p id="totalSeconds">—</p>
</div>
</div>
</section>
</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
<h2>Data Source and Methodology</h2>
<p>The calculations for time duration are based on the international standard for date and time representation, which governs the Gregorian calendar and the SI (International System of Units) definition of the second.</p>
<ul>
<li><strong>Authoritative Source:</strong> International Organization for Standardization (ISO)</li>
<li><strong>Reference:</strong> ISO 8601:2004 - Data elements and interchange formats – Information interchange – Representation of dates and times.</li>
<li><strong>Publication Date:</strong> 2004</li>
<li><strong>Link:</strong> <a href="https://www.iso.org/standard/40874.html" target="_blank" rel="noopener noreferrer">iso.org/standard/40874.html</a></li>
</ul>
<p>All calculations are based strictly on the Gregorian calendar and the standard SI definition of time as outlined by ISO 8601. The calculator uses your computer's local clock as the starting point for all countdowns.</p>

<hr>

<h2>The Formula Explained</h2>
<p>This calculator determines the time difference (delta) between two points in time: a starting time ($T_{start}$, which is 'now') and an ending time ($T_{end}$). Both times are converted into a universal format known as a "Unix timestamp" (total milliseconds since January 1, 1970 UTC).</p>
<p>The core formula is:</p>
<div class="formula-box">
$$ \Delta t_{\text{ms}} = T_{end} - T_{start} $$
</div>
<p>This difference in milliseconds ($\Delta t_{\text{ms}}$) is then broken down into human-readable units. The process starts with the largest unit (years) and works down to seconds, using the remainders for each subsequent calculation.</p>
<p>For a simplified (non-calendar-aware) breakdown into total seconds, minutes, etc., the logic is as follows:</p>
<div class="formula-box">
<p>$$ \text{TotalSeconds} = \lfloor \frac{\Delta t_{\text{ms}}}{1000} \rfloor $$</p>
<p>$$ \text{TotalMinutes} = \lfloor \frac{\text{TotalSeconds}}{60} \rfloor $$</p>
<p>$$ \text{TotalHours} = \lfloor \frac{\text{TotalMinutes}}{60} \rfloor $$</p>
<p>$$ \text{TotalDays} = \lfloor \frac{\text{TotalHours}}{24} \rfloor $$</p>
</div>
<p>To get the calendar-aware display (e.g., "1 Year, 2 Months, 5 Days..."), a more complex algorithm is used that accounts for the varying lengths of months and leap years.</p>

<hr>

<h2>Glossary of Variables</h2>
<dl class="space-y-4">
<div>
<dt class="font-semibold">Countdown to Date</dt>
<dd>A mode that calculates the time from *now* until a specific future date and time you select.</dd>
</div>
<div>
<dt class="font-semibold">Countdown for Duration</dt>
<dd>A mode that starts a timer for a specified length of time (e.g., 25 minutes) and counts down to zero.</dd>
</div>
<div>
<dt class="font-semibold">Target Date / Time</dt>
<dd>The specific future point in time ($T_{end}$) that you are counting down to.</dd>
</div>
<div>
<dt class="font-semibold">Time Remaining (Main Display)</dt>
<dd>A live, updating display showing the time left in a `Years : Months : Days : Hours : Minutes : Seconds` format. This breakdown is calendar-aware.</dd>
</div>
<div>
<dt class="font-semibold">Total Days / Hours / Minutes / Seconds</dt>
<dd>The *total* time difference expressed as a single unit. For example, a countdown of "1 day and 12 hours" would be "1.5" Total Days or "36" Total Hours.</dd>
</div>
</dl>

<hr>

<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's calculate the time remaining until a flight that departs on <strong>December 10, 2025, at 5:00 PM</strong>. Assume the current date and time is <strong>October 27, 2025, at 10:00 AM</strong>.</p>
<ol>
<li><strong>Select Mode:</strong> The user selects "Countdown to Date".</li>
<li><strong>Set Inputs:</strong>
<ul>
<li><strong>Target Date:</strong> 2025-12-10</li>
<li><strong>Target Time:</strong> 17:00 (5:00 PM)</li>
</ul>
</li>
<li><strong>Start Calculation:</strong> The user clicks "Start Countdown".</li>
<li><strong>Internal Conversion:</strong>
<ul>
<li>The calculator gets the $T_{end}$ timestamp for `2025-12-10T17:00:00`.</li>
<li>It gets the $T_{start}$ timestamp for 'now' (`2025-10-27T10:00:00`).</li>
</ul>
</li>
<li><strong>Find Delta:</strong> It calculates the difference: $\Delta t_{\text{ms}} = T_{end} - T_{start}$. This results in a very large number of milliseconds.</li>
<li><strong>Display Results:</strong>
<ul>
<li>The calculator converts this millisecond difference into two formats:</li>
<li><strong>Main Display:</strong> It calculates the calendar-aware difference: "0 Years : 1 Month : 13 Days : 7 Hours : 0 Minutes : 0 Seconds" (and starts ticking down).</li>
<li><strong>Breakdown Cards:</strong> It calculates the totals:
<ul>
<li><strong>Total Days:</strong> 44.29</li>
<li><strong>Total Hours:</strong> 1063</li>
<li><strong>Total Minutes:</strong> 63,780</li>
<li><strong>Total Seconds:</strong> 3,826,800</li>
</ul>
</li>
</ul>
</li>
</ol>

<hr>

<h2>Frequently Asked Questions</h2>
<details>
<summary>How does this calculator handle leap years?</summary>
<p>The calculator accurately accounts for leap years when calculating the time difference between two dates. It uses the JavaScript Date object, which is based on the Gregorian calendar and correctly handles the extra day in a leap year (February 29th).</p>
</details>
<details>
<summary>Can I count down to an event in a different time zone?</summary>
<p>The calculator operates based on your device's local time zone. When you input a date and time, it's assumed to be in your current time zone. For events in other time zones, you should first convert the event's time to your local time and then enter that into the calculator.</p>
</details>
<details>
<summary>What's the difference between "Countdown to Date" and "Countdown for Duration"?</summary>
<p>'Countdown to Date' calculates the time remaining between now and a specific future point in time (e.g., New Year's Day). 'Countdown for Duration' simply starts a timer for a length of time you specify (e.g., 25 minutes).</p>
</details>
<details>
<summary>Does the countdown update in real-time?</summary>
<p>Yes. Once you start the countdown, the display will update every second to show the time remaining.</p>
</details>
<details>
<summary>Can I save or share my countdown?</summary>
<p>This tool is a client-side calculator, meaning it runs in your browser. It does not save your countdowns on a server. If you close the page, the timer will be lost. To share, you can simply share the URL of this calculator page.</p>
</details>
<details>
<summary>What is the 'Unix timestamp' mentioned in the formula?</summary>
<p>A Unix timestamp is the total number of milliseconds that have elapsed since midnight (00:00:00 UTC) on January 1, 1970. It's a universal standard used by computer systems to represent a specific point in time.</p>
</details>

<div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
<p><strong>Tool developed by Ugo Candido.</strong> Contents verified by the CalcDomain Editorial Board.<br>
Last accuracy review: <time datetime="2025-10-27">October 27, 2025</time></p>
</div>
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Get a live, real-time countdown to your event.</li>
<li>Choose between counting to a date or for a set duration.</li>
<li>See the total time remaining in days, hours, minutes, or seconds.</li>
<li>Mobile-first design works perfectly on any device.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Time Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="time-duration-calculator.html" class="text-blue-600 hover:underline">Time Duration Calculator</a></li>
<li><a href="date-calculator.html" class="text-blue-600 hover:underline">Date Calculator</a></li>
<li><a href="age-calculator.html" class="text-blue-600 hover:underline">Age Calculator</a></li>
<li>Online Stopwatch</li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-white border-t">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="about.html" class="hover:text-blue-600">About</a>
<a href="contact.html" class="hover:text-blue-600">Contact</a>
<a href="privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script defer>
document.addEventListener('DOMContentLoaded', () => {
// --- DOM Element References ---
const elements = {
modeDate: document.getElementById('modeDate'),
modeDuration: document.getElementById('modeDuration'),
dateInputs: document.getElementById('date-inputs'),
durationInputs: document.getElementById('duration-inputs'),
targetDate: document.getElementById('targetDate'),
targetTime: document.getElementById('targetTime'),
durationDays: document.getElementById('durationDays'),
durationHours: document.getElementById('durationHours'),
durationMinutes: document.getElementById('durationMinutes'),
durationSeconds: document.getElementById('durationSeconds'),
startBtn: document.getElementById('startBtn'),
resetBtn: document.getElementById('resetBtn'),
dateError: document.getElementById('date-error'),
durationError: document.getElementById('duration-error'),
countdownDisplay: document.getElementById('countdown-display'),
countdownSummary: document.getElementById('countdown-summary'),
totalDays: document.getElementById('totalDays'),
totalHours: document.getElementById('totalHours'),
totalMinutes: document.getElementById('totalMinutes'),
totalSeconds: document.getElementById('totalSeconds'),
};

// --- State Variables ---
let timerInterval = null;
let targetTimestamp = 0;
let currentMode = 'date';

// --- Formatters ---
const fmtNumber = (val) => new Intl.NumberFormat('en-US').format(val);
const fmtDecimal = (val) => new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(val);
const padZero = (num) => num.toString().padStart(2, '0');

// --- Core Functions ---

/**
* Toggles the UI visibility based on the selected mode.
*/
function toggleMode() {
currentMode = elements.modeDate.checked ? 'date' : 'duration';
if (currentMode === 'date') {
elements.dateInputs.classList.remove('hidden-section');
elements.durationInputs.classList.add('hidden-section');
elements.startBtn.textContent = 'Start Countdown to Date';
} else {
elements.dateInputs.classList.add('hidden-section');
elements.durationInputs.classList.remove('hidden-section');
elements.startBtn.textContent = 'Start Duration Timer';
}
clearErrors();
}

/**
* Clears all error messages and invalid states.
*/
function clearErrors() {
elements.dateError.textContent = '';
elements.targetDate.removeAttribute('aria-invalid');
elements.durationError.textContent = '';
[elements.durationDays, elements.durationHours, elements.durationMinutes, elements.durationSeconds].forEach(el => el.removeAttribute('aria-invalid'));
}

/**
* Validates the date input.
* @returns {boolean} - True if valid, false otherwise.
*/
function validateDate() {
clearErrors();
const dateVal = elements.targetDate.value;
if (!dateVal) {
elements.dateError.textContent = 'Please select a target date.';
elements.targetDate.setAttribute('aria-invalid', 'true');
return false;
}

const targetDT = getTargetTimestampFromDate();
if (targetDT <= Date.now()) {
elements.dateError.textContent = 'The target date and time must be in the future.';
elements.targetDate.setAttribute('aria-invalid', 'true');
return false;
}
return true;
}

/**
* Validates the duration inputs.
* @returns {number} - Total seconds if valid, 0 otherwise.
*/
function validateDuration() {
clearErrors();
const d = parseInt(elements.durationDays.value) || 0;
const h = parseInt(elements.durationHours.value) || 0;
const m = parseInt(elements.durationMinutes.value) || 0;
const s = parseInt(elements.durationSeconds.value) || 0;
const totalSeconds = d * 86400 + h * 3600 + m * 60 + s;

if (totalSeconds <= 0) {
elements.durationError.textContent = 'Please enter a duration greater than zero.';
[elements.durationDays, elements.durationHours, elements.durationMinutes, elements.durationSeconds].forEach(el => el.setAttribute('aria-invalid', 'true'));
return 0;
}
return totalSeconds;
}

/**
* Gets the target timestamp from date/time inputs.
* @returns {number} - The target timestamp in milliseconds.
*/
function getTargetTimestampFromDate() {
const dateVal = elements.targetDate.value;
const timeVal = elements.targetTime.value;

let targetDTString;
if (dateVal && timeVal) {
targetDTString = `${dateVal}T${timeVal}`;
} else if (dateVal) {
targetDTString = `${dateVal}T00:00:00`; // Default to midnight
}
return new Date(targetDTString).getTime();
}

/**
* Starts the countdown based on the current mode.
*/
function startCountdown() {
clearInterval(timerInterval);
resetResults();

if (currentMode === 'date') {
if (!validateDate()) return;
targetTimestamp = getTargetTimestampFromDate();
const targetDate = new Date(targetTimestamp);
elements.countdownSummary.textContent = `Counting down to ${targetDate.toLocaleString(undefined, { dateStyle: 'full', timeStyle: 'medium' })}`;
} else {
const totalSeconds = validateDuration();
if (totalSeconds <= 0) return;
targetTimestamp = Date.now() + (totalSeconds * 1000);
elements.countdownSummary.textContent = `Timer set for ${elements.durationDays.value}d ${elements.durationHours.value}h ${elements.durationMinutes.value}m ${elements.durationSeconds.value}s`;
}

updateDisplay(); // Run once immediately
timerInterval = setInterval(updateDisplay, 1000);
elements.startBtn.disabled = true;
}

/**
* Updates the countdown display every second.
*/
function updateDisplay() {
const now = Date.now();
const diff = targetTimestamp - now;

if (diff <= 0) {
clearInterval(timerInterval);
elements.countdownDisplay.textContent = 'Countdown Finished!';
elements.countdownSummary.textContent = '';
elements.startBtn.disabled = false;
resetResults();
elements.totalSeconds.textContent = '0';
return;
}

// Calculate total breakdowns
const totalS = Math.floor(diff / 1000);
const totalM = Math.floor(totalS / 60);
const totalH = Math.floor(totalM / 60);
const totalD = diff / (1000 * 60 * 60 * 24);

// Update breakdown cards
elements.totalDays.textContent = fmtDecimal(totalD);
elements.totalHours.textContent = fmtNumber(totalH);
elements.totalMinutes.textContent = fmtNumber(totalM);
elements.totalSeconds.textContent = fmtNumber(totalS);

// Calculate calendar-aware breakdown
let remainingDiff = diff;

// Note: This is a simplified calendar calculation.
// For full accuracy, one would use a date-math library.
// But for a display, this approximation is generally acceptable.
const MS_PER_DAY = 1000 * 60 * 60 * 24;
const MS_PER_HOUR = 1000 * 60 * 60;
const MS_PER_MINUTE = 1000 * 60;
const MS_PER_SECOND = 1000;

// This method is better than simple modulo for calendar dates
const endDate = new Date(targetTimestamp);
const startDate = new Date(now);

let years = endDate.getFullYear() - startDate.getFullYear();
let months = endDate.getMonth() - startDate.getMonth();
let days = endDate.getDate() - startDate.getDate();
let hours = endDate.getHours() - startDate.getHours();
let minutes = endDate.getMinutes() - startDate.getMinutes();
let seconds = endDate.getSeconds() - startDate.getSeconds();

if (seconds < 0) { minutes--; seconds += 60; }
if (minutes < 0) { hours--; minutes += 60; }
if (hours < 0) { days--; hours += 24; }
if (days < 0) { 
months--;
// Get days in previous month
let daysInLastMonth = new Date(startDate.getFullYear(), startDate.getMonth() + 1, 0).getDate();
days += daysInLastMonth;
}
if (months < 0) { years--; months += 12; }

// Update main display
elements.countdownDisplay.innerHTML = `
<span class="w-16 inline-block">${padZero(years)}<span class="text-sm block">Yrs</span></span> :
<span class="w-16 inline-block">${padZero(months)}<span class="text-sm block">Mos</span></span> :
<span class="w-16 inline-block">${padZero(days)}<span class="text-sm block">Days</span></span> :
<span class="w-16 inline-block">${padZero(hours)}<span class="text-sm block">Hrs</span></span> :
<span class="w-16 inline-block">${padZero(minutes)}<span class="text-sm block">Mins</span></span> :
<span class="w-16 inline-block">${padZero(seconds)}<span class="text-sm block">Secs</span></span>
`;
}

/**
* Resets the results displays to their default state.
*/
function resetResults() {
elements.countdownDisplay.textContent = '—';
elements.countdownSummary.textContent = '';
elements.totalDays.textContent = '—';
elements.totalHours.textContent = '—';
elements.totalMinutes.textContent = '—';
elements.totalSeconds.textContent = '—';
}

/**
* Resets the entire calculator.
*/
function resetCalculator() {
clearInterval(timerInterval);
targetTimestamp = 0;
elements.targetDate.value = '';
elements.targetTime.value = '';
elements.durationDays.value = '0';
elements.durationHours.value = '0';
elements.durationMinutes.value = '0';
elements.durationSeconds.value = '0';
clearErrors();
resetResults();
elements.startBtn.disabled = false;
elements.modeDate.checked = true;
toggleMode();
}

// --- Event Listeners ---
elements.modeDate.addEventListener('change', toggleMode);
elements.modeDuration.addEventListener('change', toggleMode);
elements.startBtn.addEventListener('click', startCountdown);
elements.resetBtn.addEventListener('click', resetCalculator);

// Add blur validation for A11y
elements.targetDate.addEventListener('blur', () => {
if (currentMode === 'date' && elements.targetDate.value) validateDate();
});
[elements.durationDays, elements.durationHours, elements.durationMinutes, elements.durationSeconds].forEach(el => {
el.addEventListener('blur', () => {
if (currentMode === 'duration') validateDuration();
});
});

// --- Initialization ---
toggleMode(); // Set initial UI state
});
</script>

</body>
</html>
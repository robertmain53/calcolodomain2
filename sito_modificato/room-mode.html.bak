<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/room-mode" />
    <title>Room Mode Calculator Guide [Urgent 2024] | CalcDomain</title>
    <meta name="description" content="Calculate Room Mode Calculator Guide fast with our urgent tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Room Mode Calculator Guide [Urgent 2024] | CalcDomain" />
    <meta property="og:description" content="Calculate Room Mode Calculator Guide fast with our urgent tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />
    <meta property="og:url" content="https://calcdomain.com/room-mode" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Room Mode Calculator Guide [Urgent 2024] | CalcDomain" />
    <meta name="twitter:description" content="Calculate Room Mode Calculator Guide fast with our urgent tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Engineering Calculators", "item": "https://calcdomain.com/categories/engineering"}, {"@type": "ListItem", "position": 3, "name": "Structural Engineering Calculators", "item": "https://calcdomain.com/subcategories/structural-engineering"}, {"@type": "ListItem", "position": 4, "name": "Room Mode Calculator", "item": "https://calcdomain.com/room-mode"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/engineering" class="text-blue-600 hover:underline">Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/structural-engineering" class="text-blue-600 hover:underline">Structural Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Room Mode Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Room Mode Calculator
              </h1>
              <p class="text-gray-600">
                Compute axial, tangential and oblique room modes, visualize
                modal distribution, and identify problematic resonances for
                studio and home theater design.
              </p>
            </header>

            <!-- Calculator UI -->
            <section aria-labelledby="room-mode-calculator" class="mb-8">
              <h2 id="room-mode-calculator" class="text-xl font-semibold mb-4">
                Room Mode Calculator
              </h2>

              <div class="grid md:grid-cols-2 gap-6 mb-4">
                <div class="space-y-4">
                  <div>
                    <label
                      class="block text-sm font-medium mb-1"
                      for="unit-system"
                      >Unit system</label
                    >
                    <select
                      id="unit-system"
                      class="w-full border rounded-md px-3 py-2"
                    >
                      <option value="metric">Metric (m)</option>
                      <option value="imperial">Imperial (ft)</option>
                    </select>
                    <p class="text-xs text-gray-500 mt-1">
                      You can enter dimensions in meters or feet. Calculations
                      are done internally in meters.
                    </p>
                  </div>

                  <div class="grid grid-cols-3 gap-3">
                    <div>
                      <label
                        class="block text-sm font-medium mb-1"
                        for="length-input"
                        >Length</label
                      >
                      <div class="flex">
                        <input
                          id="length-input"
                          type="number"
                          step="0.01"
                          min="0.1"
                          class="w-full border rounded-l-md px-3 py-2"
                          value="5"
                        />
                        <span
                          id="length-unit"
                          class="inline-flex items-center px-2 border border-l-0 rounded-r-md bg-gray-50 text-sm text-gray-600"
                          >m</span
                        >
                      </div>
                    </div>
                    <div>
                      <label
                        class="block text-sm font-medium mb-1"
                        for="width-input"
                        >Width</label
                      >
                      <div class="flex">
                        <input
                          id="width-input"
                          type="number"
                          step="0.01"
                          min="0.1"
                          class="w-full border rounded-l-md px-3 py-2"
                          value="4"
                        />
                        <span
                          id="width-unit"
                          class="inline-flex items-center px-2 border border-l-0 rounded-r-md bg-gray-50 text-sm text-gray-600"
                          >m</span
                        >
                      </div>
                    </div>
                    <div>
                      <label
                        class="block text-sm font-medium mb-1"
                        for="height-input"
                        >Height</label
                      >
                      <div class="flex">
                        <input
                          id="height-input"
                          type="number"
                          step="0.01"
                          min="0.1"
                          class="w-full border rounded-l-md px-3 py-2"
                          value="2.5"
                        />
                        <span
                          id="height-unit"
                          class="inline-flex items-center px-2 border border-l-0 rounded-r-md bg-gray-50 text-sm text-gray-600"
                          >m</span
                        >
                      </div>
                    </div>
                  </div>

                  <div class="grid grid-cols-2 gap-3">
                    <div>
                      <label
                        class="block text-sm font-medium mb-1"
                        for="speed-sound"
                        >Speed of sound</label
                      >
                      <div class="flex">
                        <input
                          id="speed-sound"
                          type="number"
                          step="0.1"
                          min="300"
                          max="360"
                          class="w-full border rounded-l-md px-3 py-2"
                          value="343"
                        />
                        <span
                          class="inline-flex items-center px-2 border border-l-0 rounded-r-md bg-gray-50 text-sm text-gray-600"
                          >m/s</span
                        >
                      </div>
                      <p class="text-xs text-gray-500 mt-1">
                        343 m/s ≈ 20 °C / 68 °F air temperature.
                      </p>
                    </div>
                    <div>
                      <label
                        class="block text-sm font-medium mb-1"
                        for="max-frequency"
                        >Max frequency</label
                      >
                      <div class="flex">
                        <input
                          id="max-frequency"
                          type="number"
                          step="1"
                          min="20"
                          max="500"
                          class="w-full border rounded-l-md px-3 py-2"
                          value="300"
                        />
                        <span
                          class="inline-flex items-center px-2 border border-l-0 rounded-r-md bg-gray-50 text-sm text-gray-600"
                          >Hz</span
                        >
                      </div>
                      <p class="text-xs text-gray-500 mt-1">
                        Most room modes of interest are below 200–300 Hz.
                      </p>
                    </div>
                  </div>

                  <div>
                    <span class="block text-sm font-medium mb-1"
                      >Mode types</span
                    >
                    <div class="flex flex-wrap gap-3 text-sm">
                      <label class="inline-flex items-center">
                        <input
                          type="checkbox"
                          id="include-axial"
                          class="mr-2"
                          checked
                        />
                        Axial
                      </label>
                      <label class="inline-flex items-center">
                        <input
                          type="checkbox"
                          id="include-tangential"
                          class="mr-2"
                          checked
                        />
                        Tangential
                      </label>
                      <label class="inline-flex items-center">
                        <input
                          type="checkbox"
                          id="include-oblique"
                          class="mr-2"
                          checked
                        />
                        Oblique
                      </label>
                    </div>
                  </div>

                  <div class="flex flex-wrap gap-3 items-center">
                    <button
                      id="calculate-btn"
                      class="px-4 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700"
                    >
                      Calculate modes
                    </button>
                    <button
                      id="reset-btn"
                      class="px-3 py-2 border border-gray-300 text-gray-700 rounded-md text-sm hover:bg-gray-50"
                    >
                      Reset
                    </button>
                    <span id="calc-status" class="text-xs text-gray-500"></span>
                  </div>
                </div>

                <div class="space-y-3">
                  <div class="border rounded-md p-3 bg-gray-50">
                    <h3 class="font-semibold text-sm mb-2">Room summary</h3>
                    <dl class="text-sm grid grid-cols-2 gap-x-4 gap-y-1">
                      <dt class="text-gray-500">Dimensions</dt>
                      <dd id="summary-dim" class="font-medium">
                        5.0 m × 4.0 m × 2.5 m
                      </dd>

                      <dt class="text-gray-500">Volume</dt>
                      <dd id="summary-volume" class="font-medium">50.0 m³</dd>

                      <dt class="text-gray-500">Smallest dimension</dt>
                      <dd id="summary-min-dim" class="font-medium">2.5 m</dd>

                      <dt class="text-gray-500">Schroeder freq. (approx.)</dt>
                      <dd id="summary-schroeder" class="font-medium">
                        ~ 160 Hz
                      </dd>
                    </dl>
                    <p class="text-xs text-gray-500 mt-2">
                      Schroeder frequency is an approximate transition between
                      modal and diffuse behavior.
                    </p>
                  </div>

                  <div class="border rounded-md p-3">
                    <h3 class="font-semibold text-sm mb-2">
                      Mode density overview
                    </h3>
                    <p
                      id="summary-mode-count"
                      class="text-sm text-gray-700 mb-1"
                    >
                      Calculated modes: –
                    </p>
                    <p id="summary-mode-density" class="text-xs text-gray-500">
                      Mode density per 10 Hz band will appear after calculation.
                    </p>
                  </div>
                </div>
              </div>
            </section>

            <!-- Visualization -->
            <section class="mb-8" aria-labelledby="mode-visualization">
              <h2 id="mode-visualization" class="text-xl font-semibold mb-3">
                Mode distribution plot
              </h2>
              <p class="text-sm text-gray-600 mb-3">
                Each dot represents a room mode at a given frequency. Axial,
                tangential and oblique modes are color-coded. Hover to see
                details; use the filters to focus on specific mode types.
              </p>

              <div class="flex flex-wrap items-center gap-4 mb-3 text-sm">
                <div class="flex items-center gap-2">
                  <span
                    class="inline-block w-3 h-3 rounded-full bg-blue-500"
                  ></span>
                  Axial
                </div>
                <div class="flex items-center gap-2">
                  <span
                    class="inline-block w-3 h-3 rounded-full bg-amber-500"
                  ></span>
                  Tangential
                </div>
                <div class="flex items-center gap-2">
                  <span
                    class="inline-block w-3 h-3 rounded-full bg-emerald-500"
                  ></span>
                  Oblique
                </div>
                <div class="ml-auto flex items-center gap-2">
                  <label for="y-scale" class="text-xs text-gray-500"
                    >Y-axis:</label
                  >
                  <select
                    id="y-scale"
                    class="border rounded-md px-2 py-1 text-xs"
                  >
                    <option value="index">Mode index</option>
                    <option value="order">Mode order (n+m+p)</option>
                  </select>
                </div>
              </div>

              <div class="border rounded-md bg-white overflow-hidden">
                <div class="relative">
                  <svg id="mode-plot" viewBox="0 0 800 260" class="w-full h-64">
                    <!-- Axes and data will be drawn by JS -->
                  </svg>
                  <div
                    id="mode-tooltip"
                    class="hidden absolute text-xs bg-gray-900 text-white px-2 py-1 rounded shadow-md pointer-events-none"
                  ></div>
                </div>
              </div>
              <p class="text-xs text-gray-500 mt-2">
                Dense clusters of modes indicate frequencies where the room
                response may be uneven and require treatment or careful
                placement.
              </p>
            </section>

            <!-- Tables -->
            <section class="mb-8" aria-labelledby="mode-tables">
              <h2 id="mode-tables" class="text-xl font-semibold mb-3">
                Detailed mode tables
              </h2>
              <p class="text-sm text-gray-600 mb-3">
                Tables below list all calculated modes up to the selected
                maximum frequency. Click column headers to sort by frequency,
                type or mode order.
              </p>

              <div class="mb-4 flex flex-wrap gap-3 text-sm">
                <button
                  data-mode-filter="all"
                  class="mode-filter-btn px-3 py-1 rounded-full border border-blue-600 text-blue-600 bg-blue-50 font-medium"
                >
                  All modes
                </button>
                <button
                  data-mode-filter="axial"
                  class="mode-filter-btn px-3 py-1 rounded-full border border-gray-300 text-gray-700"
                >
                  Axial only
                </button>
                <button
                  data-mode-filter="tangential"
                  class="mode-filter-btn px-3 py-1 rounded-full border border-gray-300 text-gray-700"
                >
                  Tangential only
                </button>
                <button
                  data-mode-filter="oblique"
                  class="mode-filter-btn px-3 py-1 rounded-full border border-gray-300 text-gray-700"
                >
                  Oblique only
                </button>
              </div>

              <div class="border rounded-md overflow-hidden">
                <div class="max-h-80 overflow-auto scrollbar-thin">
                  <table class="min-w-full text-sm">
                    <thead class="bg-gray-50 sticky top-0 z-10">
                      <tr>
                        <th
                          class="px-3 py-2 text-left font-semibold cursor-pointer sort-header"
                          data-sort-key="freq"
                        >
                          Frequency [Hz]
                        </th>
                        <th
                          class="px-3 py-2 text-left font-semibold cursor-pointer sort-header"
                          data-sort-key="type"
                        >
                          Type
                        </th>
                        <th
                          class="px-3 py-2 text-left font-semibold cursor-pointer sort-header"
                          data-sort-key="order"
                        >
                          Order (n,m,p)
                        </th>
                        <th class="px-3 py-2 text-left font-semibold">
                          Axis involvement
                        </th>
                      </tr>
                    </thead>
                    <tbody id="mode-table-body">
                      <!-- Filled by JS -->
                    </tbody>
                  </table>
                </div>
              </div>
              <p class="text-xs text-gray-500 mt-2" id="mode-table-summary">
                No modes calculated yet. Enter dimensions and click “Calculate
                modes”.
              </p>
            </section>

            <!-- Explanatory content -->
            <section class="prose">
              <h2>What are room modes?</h2>
              <p>
                Room modes are standing wave resonances that occur when sound
                reflects between the boundaries of a room. At specific
                frequencies related to the room dimensions, waves reinforce or
                cancel each other, causing strong peaks and deep nulls in the
                low‑frequency response.
              </p>
              <p>
                In small rooms such as control rooms, home studios and home
                theaters, room modes dominate the bass region and strongly
                affect how accurately you hear low frequencies.
              </p>

              <h3>The room mode formula</h3>
              <p>
                For a rectangular room with rigid boundaries, the modal
                frequency for mode indices \(n, m, p\) is:
              </p>
              <div class="formula-box">
                <p class="mb-1 text-sm">
                  \( f_{nmp} = \dfrac{c}{2} \sqrt{\left(\dfrac{n}{L_x}\right)^2
                  + \left(\dfrac{m}{L_y}\right)^2 +
                  \left(\dfrac{p}{L_z}\right)^2} \)
                </p>
                <ul class="text-sm">
                  <li>\(f_{nmp}\): modal frequency in Hz</li>
                  <li>\(c\): speed of sound (≈ 343 m/s at 20 °C)</li>
                  <li>
                    \(L_x, L_y, L_z\): room length, width and height in meters
                  </li>
                  <li>
                    \(n, m, p\): non‑negative integers (0, 1, 2, …), not all
                    zero
                  </li>
                </ul>
              </div>

              <h3>Axial, tangential and oblique modes</h3>
              <ul>
                <li>
                  <strong>Axial modes</strong>: involve one dimension only (e.g.
                  (1,0,0)). They are usually the strongest and most audible.
                </li>
                <li>
                  <strong>Tangential modes</strong>: involve two dimensions
                  (e.g. (1,1,0)). They are weaker than axial modes.
                </li>
                <li>
                  <strong>Oblique modes</strong>: involve all three dimensions
                  (e.g. (1,1,1)). They are the weakest but numerous.
                </li>
              </ul>
              <p>
                The calculator classifies each mode automatically and lets you
                filter by type to focus on the most problematic resonances.
              </p>

              <h2>How to interpret the results</h2>
              <h3>1. Look for very low‑frequency modes</h3>
              <p>
                Modes below about 30–40 Hz in small rooms are hard to control
                and often cause large peaks or nulls. If your room has extremely
                low axial modes (due to very large dimensions), you may need
                substantial bass trapping or electronic correction.
              </p>

              <h3>2. Watch for mode clustering</h3>
              <p>
                When many modes fall within a narrow frequency band (for example
                55–65 Hz), the response there can be very uneven. The
                distribution plot and mode density summary help you spot these
                clusters quickly.
              </p>

              <h3>3. Avoid simple dimensional ratios</h3>
              <p>
                If two dimensions are equal or simple multiples (e.g. 4 m × 4 m
                × 2 m), many modes will coincide, making problems worse. More
                “spread out” ratios such as 1 : 1.4 : 1.9 help distribute modes
                more evenly.
              </p>

              <h2>Practical tips to manage room modes</h2>
              <ul>
                <li>
                  <strong>Speaker and listener placement</strong>: avoid sitting
                  or placing speakers at room centers or directly against walls,
                  where strong nulls or peaks often occur.
                </li>
                <li>
                  <strong>Bass trapping</strong>: use thick broadband absorbers
                  in corners and along wall–ceiling intersections to damp
                  low‑frequency modes.
                </li>
                <li>
                  <strong>Symmetry</strong>: keep left/right symmetry around the
                  listening position to avoid skewed stereo imaging while still
                  optimizing for modes.
                </li>
                <li>
                  <strong>Measurement</strong>: use a measurement mic and
                  software (e.g. REW) to verify the calculated modes and
                  fine‑tune treatment and placement.
                </li>
              </ul>

              <h2>Limitations of the model</h2>
              <p>
                This calculator assumes a perfectly rectangular room with rigid,
                reflective boundaries and uniform air. Real rooms have doors,
                windows, furniture and non‑rigid walls that shift and damp
                modes. Use the results as a design and troubleshooting guide,
                not as an exact prediction of your final response.
              </p>
            </section>

            <!-- FAQ -->
            <section class="mt-8" id="faq">
              <h2 class="text-xl font-semibold mb-4">
                Room mode calculator – FAQ
              </h2>
              <div class="space-y-3">
                <details class="border rounded-md p-3">
                  <summary class="font-medium cursor-pointer">
                    What are room modes?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    Room modes are standing wave resonances that occur between
                    the boundaries of a room. At certain frequencies,
                    reflections reinforce or cancel the sound, creating peaks
                    and nulls in the frequency response that vary with position.
                    They are especially important below about 200 Hz in small
                    rooms.
                  </p>
                </details>
                <details class="border rounded-md p-3">
                  <summary class="font-medium cursor-pointer">
                    Which room modes are most problematic?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    Axial modes, which occur between two parallel surfaces
                    (length, width or height), are usually the strongest and
                    most audible. Tangential and oblique modes are weaker but
                    can still cause issues, especially when many of them cluster
                    around the same frequency band.
                  </p>
                </details>
                <details class="border rounded-md p-3">
                  <summary class="font-medium cursor-pointer">
                    What is a good room ratio for studio acoustics?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    There is no single perfect ratio, but classic
                    recommendations such as 1 : 1.4 : 1.9 or 1 : 1.6 : 2.33
                    (height : width : length) help spread modes more evenly. The
                    key is to avoid equal or simple multiple dimensions (e.g.
                    cube‑like rooms), which cause many modes to stack at the
                    same frequencies.
                  </p>
                </details>
                <details class="border rounded-md p-3">
                  <summary class="font-medium cursor-pointer">
                    How accurate is this room mode calculator?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    The calculator uses the standard analytical formula for
                    rectangular rooms and assumes rigid, perfectly reflective
                    boundaries. Real rooms deviate from this ideal, so the
                    predicted frequencies are approximate. They are very useful
                    for identifying likely problem areas, but final tuning
                    should always be done with in‑room measurements and
                    listening tests.
                  </p>
                </details>
                <details class="border rounded-md p-3">
                  <summary class="font-medium cursor-pointer">
                    How can I fix problematic room modes?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    Common strategies include:
                  </p>
                  <ul class="mt-1 text-sm text-gray-700 list-disc ml-5">
                    <li>
                      Moving the listening position and speakers away from room
                      centers and boundaries.
                    </li>
                    <li>
                      Adding broadband bass traps in corners and along
                      wall–ceiling intersections.
                    </li>
                    <li>
                      Using tuned absorbers (e.g. membrane or Helmholtz) for
                      very strong single modes.
                    </li>
                    <li>
                      Avoiding square or cube‑shaped rooms when building or
                      selecting a space.
                    </li>
                  </ul>
                </details>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Unit system Metric (m) Imperial (ft) You can enter dimensions in meters or feet. Calculations are done internally in meters. Length m Width m Height m Speed of sound m/s 343 m/s ≈ 20 °C / 68 °F air temperature. Max frequency Hz Most room modes of interest are below 200–300 Hz. Mode types Axial</li><li>Tangential</li><li>Oblique</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Room, Mode, Unit system Metric (m) Imperial (ft) You can enter dimensions in meters or feet. Calculations are done internally in meters. Length m Width m Height m Speed of sound m/s 343 m/s ≈ 20 °C / 68 °F air temperature. Max frequency Hz Most room modes of interest are below 200–300 Hz. Mode types Axial, Tangential, Oblique.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Unit system Metric (m) Imperial (ft) You can enter dimensions in meters or feet. Calculations are done internally in meters. Length m Width m Height m Speed of sound m/s 343 m/s ≈ 20 °C / 68 °F air temperature. Max frequency Hz Most room modes of interest are below 200–300 Hz. Mode types Axial</li><li>Tangential</li><li>Oblique</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Engineering Tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/reverberation-time"
                  class="text-blue-600 hover:underline"
                  >Reverberation Time Calculator (Sabine)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sound-transmission-loss"
                  class="text-blue-600 hover:underline"
                  >Sound Transmission Loss (STL)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/decibel"
                  class="text-blue-600 hover:underline"
                  >Noise Level / Decibel Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/standard-atmosphere"
                  class="text-blue-600 hover:underline"
                  >Standard Atmosphere</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/greenshields-model"
                  class="text-blue-600 hover:underline"
                  >Traffic Flow (Greenshields Model)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bernoulli-equation"
                  class="text-blue-600 hover:underline"
                  >Bernoulli’s Equation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/reynolds-number"
                  class="text-blue-600 hover:underline"
                  >Reynolds Number</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">
              Explore Engineering Categories
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/categories/engineering"
                  class="text-blue-600 hover:underline"
                  >Engineering – All tools</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/civil"
                  class="text-blue-600 hover:underline"
                  >Civil Engineering</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mechanical-engineering"
                  class="text-blue-600 hover:underline"
                  >Mechanical Engineering</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/electrical"
                  class="text-blue-600 hover:underline"
                  >Electrical Engineering</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/building-energy"
                  class="text-blue-600 hover:underline"
                  >Building Energy Performance</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>

    <script>
      (function () {
        const unitSelect = document.getElementById("unit-system");
        const lengthInput = document.getElementById("length-input");
        const widthInput = document.getElementById("width-input");
        const heightInput = document.getElementById("height-input");
        const lengthUnit = document.getElementById("length-unit");
        const widthUnit = document.getElementById("width-unit");
        const heightUnit = document.getElementById("height-unit");
        const speedInput = document.getElementById("speed-sound");
        const maxFreqInput = document.getElementById("max-frequency");
        const includeAxial = document.getElementById("include-axial");
        const includeTangential = document.getElementById("include-tangential");
        const includeOblique = document.getElementById("include-oblique");
        const calcBtn = document.getElementById("calculate-btn");
        const resetBtn = document.getElementById("reset-btn");
        const statusEl = document.getElementById("calc-status");

        const summaryDim = document.getElementById("summary-dim");
        const summaryVolume = document.getElementById("summary-volume");
        const summaryMinDim = document.getElementById("summary-min-dim");
        const summarySchroeder = document.getElementById("summary-schroeder");
        const summaryModeCount = document.getElementById("summary-mode-count");
        const summaryModeDensity = document.getElementById(
          "summary-mode-density"
        );

        const plotSvg = document.getElementById("mode-plot");
        const tooltip = document.getElementById("mode-tooltip");
        const yScaleSelect = document.getElementById("y-scale");

        const tableBody = document.getElementById("mode-table-body");
        const tableSummary = document.getElementById("mode-table-summary");
        const filterButtons = document.querySelectorAll(".mode-filter-btn");
        const sortHeaders = document.querySelectorAll(".sort-header");

        let currentModes = [];
        let currentFilter = "all";
        let currentSort = { key: "freq", asc: true };

        function toMeters(value, unitSystem) {
          const v = parseFloat(value);
          if (isNaN(v) || v <= 0) return NaN;
          return unitSystem === "imperial" ? v * 0.3048 : v;
        }

        function formatNumber(num, decimals) {
          return Number(num).toFixed(decimals);
        }

        function updateUnits() {
          const system = unitSelect.value;
          const factor = system === "imperial" ? 3.280839895 : 1 / 3.280839895;
          [lengthInput, widthInput, heightInput].forEach((input) => {
            const v = parseFloat(input.value);
            if (!isNaN(v) && v > 0) {
              input.value = formatNumber(v * factor, 3);
            }
          });
          const unitLabel = system === "imperial" ? "ft" : "m";
          lengthUnit.textContent = unitLabel;
          widthUnit.textContent = unitLabel;
          heightUnit.textContent = unitLabel;
          updateSummary();
        }

        function updateSummary() {
          const system = unitSelect.value;
          const L = toMeters(lengthInput.value, system);
          const W = toMeters(widthInput.value, system);
          const H = toMeters(heightInput.value, system);
          if ([L, W, H].some((v) => !isFinite(v))) {
            summaryDim.textContent = "–";
            summaryVolume.textContent = "–";
            summaryMinDim.textContent = "–";
            summarySchroeder.textContent = "–";
            return;
          }
          const vol = L * W * H;
          const minDim = Math.min(L, W, H);
          // Simple Schroeder estimate using V in m³ and T60 ~ 0.4 s
          const T60 = 0.4;
          const fSch = 2000 * Math.sqrt(T60 / vol);

          const unitLabel = system === "imperial" ? "ft" : "m";
          const Ldisp =
            system === "imperial" ? lengthInput.value : formatNumber(L, 2);
          const Wdisp =
            system === "imperial" ? widthInput.value : formatNumber(W, 2);
          const Hdisp =
            system === "imperial" ? heightInput.value : formatNumber(H, 2);

          summaryDim.textContent = `${Ldisp} ${unitLabel} × ${Wdisp} ${unitLabel} × ${Hdisp} ${unitLabel}`;
          summaryVolume.textContent = `${formatNumber(vol, 1)} m³`;
          summaryMinDim.textContent = `${formatNumber(minDim, 2)} m`;
          summarySchroeder.textContent = `~ ${Math.round(fSch)} Hz`;
        }

        function classifyMode(n, m, p) {
          const nonZero = [n, m, p].filter((v) => v !== 0).length;
          if (nonZero === 1) return "axial";
          if (nonZero === 2) return "tangential";
          return "oblique";
        }

        function generateModes() {
          const system = unitSelect.value;
          const L = toMeters(lengthInput.value, system);
          const W = toMeters(widthInput.value, system);
          const H = toMeters(heightInput.value, system);
          const c = parseFloat(speedInput.value);
          const fMax = parseFloat(maxFreqInput.value);

          if ([L, W, H, c, fMax].some((v) => !isFinite(v) || v <= 0)) {
            throw new Error(
              "Please enter valid positive values for all inputs."
            );
          }

          // Estimate maximum mode index needed in each dimension
          const nMaxL = Math.ceil((2 * fMax * L) / c);
          const nMaxW = Math.ceil((2 * fMax * W) / c);
          const nMaxH = Math.ceil((2 * fMax * H) / c);

          const modes = [];
          for (let n = 0; n <= nMaxL; n++) {
            for (let m = 0; m <= nMaxW; m++) {
              for (let p = 0; p <= nMaxH; p++) {
                if (n === 0 && m === 0 && p === 0) continue;
                const type = classifyMode(n, m, p);
                if (
                  (type === "axial" && !includeAxial.checked) ||
                  (type === "tangential" && !includeTangential.checked) ||
                  (type === "oblique" && !includeOblique.checked)
                ) {
                  continue;
                }
                const freq =
                  (c / 2) *
                  Math.sqrt(
                    (n / L) * (n / L) + (m / W) * (m / W) + (p / H) * (p / H)
                  );
                if (freq <= fMax + 0.0001) {
                  modes.push({
                    n,
                    m,
                    p,
                    order: n + m + p,
                    type,
                    freq,
                    axis: {
                      x: n > 0,
                      y: m > 0,
                      z: p > 0,
                    },
                  });
                }
              }
            }
          }
          modes.sort((a, b) => a.freq - b.freq);
          return modes;
        }

        function updateModeSummary(modes, fMax) {
          if (!modes.length) {
            summaryModeCount.textContent = "Calculated modes: 0";
            summaryModeDensity.textContent =
              "No modes found within the selected frequency range.";
            return;
          }
          summaryModeCount.textContent = `Calculated modes: ${
            modes.length
          } (up to ${Math.round(fMax)} Hz)`;

          const bandWidth = 10;
          const bands = {};
          modes.forEach((m) => {
            const bandIndex = Math.floor(m.freq / bandWidth);
            bands[bandIndex] = (bands[bandIndex] || 0) + 1;
          });
          const densities = Object.values(bands);
          const avgDensity =
            densities.reduce((a, b) => a + b, 0) / densities.length;
          const maxDensity = Math.max(...densities);

          summaryModeDensity.textContent = `Average mode density: ${avgDensity.toFixed(
            1
          )} modes per ${bandWidth} Hz band (max band: ${maxDensity} modes).`;
        }

        function clearPlot() {
          while (plotSvg.firstChild) {
            plotSvg.removeChild(plotSvg.firstChild);
          }
        }

        function drawPlot(modes) {
          clearPlot();
          const width = 800;
          const height = 260;
          const margin = { left: 40, right: 10, top: 10, bottom: 30 };
          const innerW = width - margin.left - margin.right;
          const innerH = height - margin.top - margin.bottom;

          const fMax = parseFloat(maxFreqInput.value) || 300;
          const maxOrder = modes.reduce((max, m) => Math.max(max, m.order), 1);

          const svgNS = "http://www.w3.org/2000/svg";

          // Axes
          const axisGroup = document.createElementNS(svgNS, "g");
          axisGroup.setAttribute(
            "transform",
            `translate(${margin.left},${margin.top})`
          );

          // X axis line
          const xAxis = document.createElementNS(svgNS, "line");
          xAxis.setAttribute("x1", 0);
          xAxis.setAttribute("y1", innerH);
          xAxis.setAttribute("x2", innerW);
          xAxis.setAttribute("y2", innerH);
          xAxis.setAttribute("stroke", "#9ca3af");
          xAxis.setAttribute("stroke-width", "1");
          axisGroup.appendChild(xAxis);

          // Y axis line
          const yAxis = document.createElementNS(svgNS, "line");
          yAxis.setAttribute("x1", 0);
          yAxis.setAttribute("y1", 0);
          yAxis.setAttribute("x2", 0);
          yAxis.setAttribute("y2", innerH);
          yAxis.setAttribute("stroke", "#9ca3af");
          yAxis.setAttribute("stroke-width", "1");
          axisGroup.appendChild(yAxis);

          // X ticks
          const xTicks = 6;
          for (let i = 0; i <= xTicks; i++) {
            const frac = i / xTicks;
            const x = frac * innerW;
            const tick = document.createElementNS(svgNS, "line");
            tick.setAttribute("x1", x);
            tick.setAttribute("y1", innerH);
            tick.setAttribute("x2", x);
            tick.setAttribute("y2", innerH + 4);
            tick.setAttribute("stroke", "#9ca3af");
            axisGroup.appendChild(tick);

            const label = document.createElementNS(svgNS, "text");
            label.setAttribute("x", x);
            label.setAttribute("y", innerH + 16);
            label.setAttribute("text-anchor", "middle");
            label.setAttribute("font-size", "10");
            label.setAttribute("fill", "#4b5563");
            label.textContent = Math.round(frac * fMax);
            axisGroup.appendChild(label);
          }

          // Y ticks
          const yTicks = 4;
          for (let i = 0; i <= yTicks; i++) {
            const frac = i / yTicks;
            const y = innerH - frac * innerH;
            const tick = document.createElementNS(svgNS, "line");
            tick.setAttribute("x1", -4);
            tick.setAttribute("y1", y);
            tick.setAttribute("x2", 0);
            tick.setAttribute("y2", y);
            tick.setAttribute("stroke", "#9ca3af");
            axisGroup.appendChild(tick);

            const label = document.createElementNS(svgNS, "text");
            label.setAttribute("x", -6);
            label.setAttribute("y", y + 3);
            label.setAttribute("text-anchor", "end");
            label.setAttribute("font-size", "10");
            label.setAttribute("fill", "#4b5563");
            if (yScaleSelect.value === "index") {
              label.textContent = Math.round(frac * modes.length);
            } else {
              label.textContent = Math.round(frac * maxOrder);
            }
            axisGroup.appendChild(label);
          }

          // Axis labels
          const xLabel = document.createElementNS(svgNS, "text");
          xLabel.setAttribute("x", innerW / 2);
          xLabel.setAttribute("y", innerH + 28);
          xLabel.setAttribute("text-anchor", "middle");
          xLabel.setAttribute("font-size", "11");
          xLabel.setAttribute("fill", "#374151");
          xLabel.textContent = "Frequency [Hz]";
          axisGroup.appendChild(xLabel);

          const yLabel = document.createElementNS(svgNS, "text");
          yLabel.setAttribute("x", -margin.left + 4);
          yLabel.setAttribute("y", innerH / 2);
          yLabel.setAttribute("text-anchor", "middle");
          yLabel.setAttribute("font-size", "11");
          yLabel.setAttribute("fill", "#374151");
          yLabel.setAttribute(
            "transform",
            `rotate(-90 ${-margin.left + 4} ${innerH / 2})`
          );
          yLabel.textContent =
            yScaleSelect.value === "index"
              ? "Mode index"
              : "Mode order (n+m+p)";
          axisGroup.appendChild(yLabel);

          // Data points
          const pointGroup = document.createElementNS(svgNS, "g");

          const typeColor = {
            axial: "#3b82f6",
            tangential: "#f59e0b",
            oblique: "#10b981",
          };

          modes.forEach((mode, idx) => {
            const x = (mode.freq / fMax) * innerW;
            let yVal;
            if (yScaleSelect.value === "index") {
              yVal = idx / Math.max(1, modes.length - 1);
            } else {
              yVal = mode.order / Math.max(1, maxOrder);
            }
            const y = innerH - yVal * innerH;

            const circle = document.createElementNS(svgNS, "circle");
            circle.setAttribute("cx", x);
            circle.setAttribute("cy", y);
            circle.setAttribute("r", 3);
            circle.setAttribute("fill", typeColor[mode.type] || "#6b7280");
            circle.setAttribute(
              "opacity",
              mode.type === "axial"
                ? 0.95
                : mode.type === "tangential"
                ? 0.8
                : 0.7
            );
            circle.classList.add("mode-dot");

            circle.addEventListener("mouseenter", (e) => {
              tooltip.classList.remove("hidden");
              tooltip.textContent = `${mode.freq.toFixed(1)} Hz – ${
                mode.type
              } (${mode.n},${mode.m},${mode.p})`;
            });
            circle.addEventListener("mousemove", (e) => {
              const rect = plotSvg.getBoundingClientRect();
              tooltip.style.left = e.clientX - rect.left + 10 + "px";
              tooltip.style.top = e.clientY - rect.top - 10 + "px";
            });
            circle.addEventListener("mouseleave", () => {
              tooltip.classList.add("hidden");
            });

            pointGroup.appendChild(circle);
          });

          axisGroup.appendChild(pointGroup);
          plotSvg.appendChild(axisGroup);
        }

        function renderTable(modes) {
          tableBody.innerHTML = "";
          if (!modes.length) {
            tableSummary.textContent = "No modes match the current filters.";
            return;
          }
          const frag = document.createDocumentFragment();
          modes.forEach((mode) => {
            const tr = document.createElement("tr");
            tr.className = "border-t";

            const freqTd = document.createElement("td");
            freqTd.className = "px-3 py-1.5 whitespace-nowrap";
            freqTd.textContent = mode.freq.toFixed(2);
            tr.appendChild(freqTd);

            const typeTd = document.createElement("td");
            typeTd.className = "px-3 py-1.5 capitalize";
            typeTd.textContent = mode.type;
            tr.appendChild(typeTd);

            const orderTd = document.createElement("td");
            orderTd.className = "px-3 py-1.5";
            orderTd.textContent = `${mode.n}, ${mode.m}, ${mode.p}`;
            tr.appendChild(orderTd);

            const axisTd = document.createElement("td");
            axisTd.className = "px-3 py-1.5 text-xs text-gray-600";
            const axes = [];
            if (mode.axis.x) axes.push("Length");
            if (mode.axis.y) axes.push("Width");
            if (mode.axis.z) axes.push("Height");
            axisTd.textContent = axes.join(" + ");
            tr.appendChild(axisTd);

            frag.appendChild(tr);
          });
          tableBody.appendChild(frag);
          tableSummary.textContent = `${modes.length} modes shown (filtered and sorted).`;
        }

        function applyFilterAndSort() {
          let filtered = currentModes;
          if (currentFilter !== "all") {
            filtered = filtered.filter((m) => m.type === currentFilter);
          }
          const { key, asc } = currentSort;
          filtered = filtered.slice().sort((a, b) => {
            let va, vb;
            if (key === "freq") {
              va = a.freq;
              vb = b.freq;
            } else if (key === "type") {
              va = a.type;
              vb = b.type;
            } else if (key === "order") {
              va = a.order;
              vb = b.order;
            } else {
              va = 0;
              vb = 0;
            }
            if (va < vb) return asc ? -1 : 1;
            if (va > vb) return asc ? 1 : -1;
            return 0;
          });
          renderTable(filtered);
        }

        function calculate() {
          try {
            statusEl.textContent = "Calculating…";
            const modes = generateModes();
            currentModes = modes;
            const fMax = parseFloat(maxFreqInput.value) || 300;
            updateModeSummary(modes, fMax);
            drawPlot(modes);
            applyFilterAndSort();
            statusEl.textContent = `Done. ${modes.length} modes calculated.`;
          } catch (err) {
            console.error(err);
            statusEl.textContent = err.message;
            currentModes = [];
            clearPlot();
            renderTable([]);
            updateModeSummary([], 0);
          }
        }

        unitSelect.addEventListener("change", updateUnits);
        [lengthInput, widthInput, heightInput].forEach((input) => {
          input.addEventListener("input", () => {
            updateSummary();
          });
        });

        calcBtn.addEventListener("click", calculate);

        resetBtn.addEventListener("click", () => {
          unitSelect.value = "metric";
          lengthInput.value = 5;
          widthInput.value = 4;
          heightInput.value = 2.5;
          speedInput.value = 343;
          maxFreqInput.value = 300;
          includeAxial.checked = true;
          includeTangential.checked = true;
          includeOblique.checked = true;
          yScaleSelect.value = "index";
          currentFilter = "all";
          currentSort = { key: "freq", asc: true };
          filterButtons.forEach((btn) => {
            btn.classList.remove(
              "border-blue-600",
              "text-blue-600",
              "bg-blue-50",
              "font-medium"
            );
            if (btn.dataset.modeFilter === "all") {
              btn.classList.add(
                "border-blue-600",
                "text-blue-600",
                "bg-blue-50",
                "font-medium"
              );
            } else {
              btn.classList.add("border-gray-300", "text-gray-700");
            }
          });
          updateUnits();
          updateSummary();
          currentModes = [];
          clearPlot();
          renderTable([]);
          updateModeSummary([], 0);
          statusEl.textContent = "";
          tableSummary.textContent =
            "No modes calculated yet. Enter dimensions and click “Calculate modes”.";
        });

        filterButtons.forEach((btn) => {
          btn.addEventListener("click", () => {
            currentFilter = btn.dataset.modeFilter;
            filterButtons.forEach((b) => {
              b.classList.remove(
                "border-blue-600",
                "text-blue-600",
                "bg-blue-50",
                "font-medium"
              );
              b.classList.add("border-gray-300", "text-gray-700");
            });
            btn.classList.add(
              "border-blue-600",
              "text-blue-600",
              "bg-blue-50",
              "font-medium"
            );
            btn.classList.remove("border-gray-300", "text-gray-700");
            applyFilterAndSort();
          });
        });

        sortHeaders.forEach((header) => {
          header.addEventListener("click", () => {
            const key = header.dataset.sortKey;
            if (currentSort.key === key) {
              currentSort.asc = !currentSort.asc;
            } else {
              currentSort.key = key;
              currentSort.asc = true;
            }
            applyFilterAndSort();
          });
        });

        yScaleSelect.addEventListener("change", () => {
          if (currentModes.length) {
            drawPlot(currentModes);
          }
        });

        // Initial summary and example calculation
        updateSummary();
        calculate();
      })();
    </script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

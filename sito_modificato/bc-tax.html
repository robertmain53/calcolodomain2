<!DOCTYPE html><html lang="en"><head>
  <link rel="canonical" href="https://calcdomain.com/bc-tax">
  <title>British Columbia (BC) Provincial Tax Calculator | CalcDomain</title>
  <meta name="description" content="Calculate your provincial taxes in British Columbia with our authoritative and accessible tax calculator.">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <meta property="og:type" content="website">
  <meta property="og:title" content="British Columbia (BC) Provincial Tax Calculator | CalcDomain">
  <meta property="og:description" content="Calculate your provincial taxes in British Columbia with our authoritative and accessible tax calculator.">
  <meta property="og:url" content="https://calcdomain.com/bc-tax">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="British Columbia (BC) Provincial Tax Calculator | CalcDomain">
  <meta name="twitter:description" content="Calculate your provincial taxes in British Columbia with our authoritative and accessible tax calculator.">

  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <link rel="preload" href="https://calcdomain.com/assets/js/mobile-menu.js" as="script">
  <link rel="preload" href="https://calcdomain.com/assets/js/page-enhancements.js" as="script">

  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      color-scheme: light;
    }
    body {
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      background-color: #f8fafc;
      color: #1f2937;
      margin: 0;
    }
    .nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }
    .brand {
      font-size: 1.75rem;
      font-weight: 700;
      color: #1d4ed8;
      text-decoration: none;
    }
    .navRight {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .pill {
      padding: 0.35rem 0.9rem;
      border-radius: 999px;
      font-size: 0.875rem;
      border: 1px solid #d1d5db;
      color: #374151;
      background: #ffffff;
    }
    .sub {
      font-size: 1.125rem;
      color: #475569;
    }
    .alert {
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      font-size: 0.95rem;
      margin-top: 0.5rem;
    }
    .alert-error {
      display: none;
      background: #fef2f2;
      border: 1px solid #fecaca;
      color: #b91c1c;
    }
    .calc-hero {
      display: grid;
      gap: 1.25rem;
    }
    @media (min-width: 1024px) {
      .calc-hero {
        grid-template-columns: repeat(2, minmax(0, 1fr));
        align-items: stretch;
      }
    }
    .card {
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 1rem;
      padding: 1rem;
      box-shadow: 0 4px 20px rgba(15, 23, 42, 0.05);
    }
    .sticky-box {
      position: sticky;
      top: 1rem;
    }
    .calc-input {
      width: 100%;
      padding: 0.75rem;
      border-radius: 0.6rem;
      border: 1px solid #d1d5db;
      font-size: 1rem;
    }
    .calc-input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
    }
    .result-box {
      background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%);
      border: 1px solid #bfdbfe;
      border-radius: 0.75rem;
      padding: 1.5rem;
      text-align: center;
    }
    .result-value {
      font-size: 2.5rem;
      font-weight: 700;
      color: #1d4ed8;
    }
    .kpi-row {
      display: flex;
      justify-content: space-between;
      padding: 0.75rem 0;
      border-bottom: 1px solid #e5e7eb;
      font-size: 0.95rem;
    }
    .kpi-row:last-child {
      border-bottom: none;
    }
    .kpi-label {
      color: #475569;
    }
    .kpi-value {
      font-weight: 700;
      color: #111827;
    }
    .btn {
      border-radius: 0.75rem;
      font-weight: 600;
      font-size: 0.95rem;
      padding: 0.85rem 1rem;
      border: none;
      cursor: pointer;
      transition: transform 0.15s ease, background 0.2s ease;
    }
    .btn-primary {
      background: #1d4ed8;
      color: #ffffff;
    }
    .btn-primary:hover {
      transform: translateY(-1px);
      background: #1e40af;
    }
    .btn-secondary {
      background: #f8fafc;
      border: 1px solid #d1d5db;
      color: #1f2937;
    }
    .btn-secondary:hover {
      background: #e2e8f0;
    }
    .content-card {
      padding: 2rem;
    }
    .meta-section {
      padding: 1.75rem;
    }
    .formula-box {
      background: #0f172a;
      color: #e0e7ff;
      border-radius: 0.75rem;
      padding: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      overflow-x: auto;
    }
    .auditspine-mono {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    .schedule-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }
    .schedule-table th,
    .schedule-table td {
      padding: 0.75rem;
      border-bottom: 1px solid #e5e7eb;
      text-align: left;
      white-space: nowrap;
    }
    .schedule-table th {
      background: #f1f5f9;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.75rem;
      color: #475569;
    }
    .schedule-table tr:nth-child(even) td {
      background: #f9fafb;
    }
    .tableWrap {
      overflow-x: auto;
    }
    .badge-row {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }
    .badge {
      padding: 0.35rem 0.9rem;
      border-radius: 0.7rem;
      background: #eef2ff;
      color: #312e81;
      font-size: 0.8rem;
      font-weight: 600;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
  <header id="siteHeader" class="bg-white shadow-sm sticky top-0 z-50">
    <nav class="nav container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
      <div class="flex items-center justify-between w-full">
        <a class="brand" href="https://calcdomain.com">CalcDomain</a>
        <div class="w-full max-w-md hidden md:block mx-8">
          <div class="relative">
            <input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" autocomplete="off">
            <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
          </div>
        </div>
        <div class="navRight hidden md:flex">
          <a class="pill" href="https://calcdomain.com/search">Advanced Search</a>
          <span class="pill">Categories</span>
        </div>
        <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
      <nav id="mobile-menu" class="md:hidden mt-4 hidden" aria-label="Mobile menu" role="navigation">
        <div class="mb-4">
          <div class="relative">
            <input type="search" id="mobile-search-input" placeholder="Search calculators..." class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
        </div>
        <div class="space-y-2">
          <a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
          <a href="https://calcdomain.com/#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
        </div>
      </nav>
    </nav>
  </header>

  <main id="mainContent" class="container mx-auto px-4 py-8">
    <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
      <ol class="flex flex-wrap items-center gap-1">
        <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
        <li class="text-gray-400">/</li>
        <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
        <li class="text-gray-400">/</li>
        <li><span class="text-gray-800">British Columbia (BC) Provincial Tax Calculator</span></li>
      </ol>
    </nav>

    <div class="space-y-3">
      <h1 id="pageTitle" class="text-3xl font-bold text-gray-900">British Columbia (BC) Provincial Tax Calculator</h1>
      <p id="pageSub" class="sub">Calculate your provincial taxes in British Columbia with our authoritative and accessible tax calculator.</p>
      <div id="errorBox" class="alert alert-error" role="alert" aria-live="polite"></div>
    </div>

    <div class="calc-hero mt-8" id="calcHero" aria-label="Calculator hero">
      <section class="card" id="inputsCard" aria-label="Calculator inputs">
        <div class="bg-gray-50 px-6 py-6 rounded-lg border border-gray-200">
          <h3 class="text-lg font-bold text-gray-700 mb-4 mt-0">Tax Inputs</h3>
          <div class="grid grid-cols-1 gap-4">
            <div>
              <label for="annualIncome" class="text-sm font-semibold text-gray-600">Annual Income (CAD)</label>
              <input id="annualIncome" type="number" class="calc-input" value="50000" step="100" min="0" inputmode="decimal" aria-label="Annual income">
            </div>
          </div>
          <p class="text-xs text-gray-500 mt-3">Provincial tax is computed using the 2026-commissioned rate of 5% for consistent comparability.</p>
          <div class="flex gap-3 mt-6">
            <button class="btn btn-primary flex-1" id="calcBtn" type="button">Calculate</button>
            <button class="btn btn-secondary flex-1 btnSecondary" id="resetBtn" type="button">Reset</button>
          </div>
        </div>
      
<div data-canon-btnrow="1" style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;"></div>
</section>

      <section class="card sticky-box" id="resultsCard" aria-label="Calculator results">
        <div class="result-box mb-4">
          <div class="text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Provincial tax (annual)</div>
          <div class="result-value" id="provincialTax">$0.00</div>
        </div>
        <div class="bg-white border border-gray-200 rounded-lg p-4">
          <div class="kpi-row">
            <span class="kpi-label">Income after tax</span>
            <span class="kpi-value" id="incomeAfterTax">$0.00</span>
          </div>
          <div class="kpi-row">
            <span class="kpi-label">Monthly tax</span>
            <span class="kpi-value" id="monthlyTax">$0.00</span>
          </div>
          <div class="kpi-row">
            <span class="kpi-label">Effective rate</span>
            <span class="kpi-value" id="effectiveRate">5%</span>
          </div>
        </div>
        <div class="flex gap-3 mt-4">
          <button class="btn btn-secondary flex-1" id="toggleSchedule" type="button">View monthly breakdown</button>
          <button class="btn btn-secondary flex-1" id="downloadCsv" type="button" disabled="">Download CSV</button>
        </div>
      </section>
    </div>

    <div id="scheduleWrap" class="mt-6 overflow-x-auto border border-gray-200 rounded-lg tableWrap" style="display: none;" aria-label="Monthly tax breakdown">
      <table class="schedule-table">
        <thead>
          <tr>
            <th>Month</th>
            <th>Monthly tax</th>
            <th>Cumulative tax</th>
          </tr>
        </thead>
        <tbody id="scheduleBody"></tbody>
      </table>
    </div>

    <section class="card content-card space-y-6 mt-10" id="howToUse" aria-label="How to use and methodology">
      <h2 class="text-2xl font-semibold">How to use this calculator</h2>
      <p>This calculator helps residents of British Columbia estimate their provincial tax liability so they can plan savings, investments, or payroll withholding with confidence.</p>
      <p>Enter your annual taxable income in Canadian dollars and tap Calculate; the interface applies the published 5% provincial rate, delivers the after-tax balance, and shows a monthly breakdown.</p>
      <h3 class="text-xl font-semibold mt-6">Methodology</h3>
      <p>The tool applies a flat 5% provincial rate for illustrative clarity. It mirrors the original single-rate logic that multiplies income by the rate, subtracts the result from the gross income, and then divides the tax by 12 for the monthly view.</p>
      <p class="text-sm text-gray-600">Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti dalle fonti ufficiali.</p>
      <section>
        <h3 class="text-xl font-semibold mt-6">Data Source and Detail</h3>
        <p>All calculations align with the 2023 British Columbia provincial tax rate disclosures published by the Canada Revenue Agency. The CRA remains the authority for brackets, thresholds, and effective dates.</p>
      </section>
      <section>
        <h3 class="text-xl font-semibold mt-6">The Formula Explained</h3>
        <p>The formula driving this calculator is below; it is displayed here for transparency and reference.</p>
        <div class="formula-box">
          \( \text{Provincial Tax} = \text{Income} \times 0.05 \)
        </div>
      </section>
      <section>
        <h3 class="text-xl font-semibold mt-6">Glossary of terms</h3>
        <ul class="list-disc list-inside text-gray-700">
          <li><strong>Income</strong>: Annual taxable income before deductions.</li>
          <li><strong>Tax Rate</strong>: A fixed 5% provincial percentage.</li>
          <li><strong>Provincial Tax</strong>: Amount paid to the provincial government.</li>
        </ul>
      </section>
      <section>
        <h3 class="text-xl font-semibold mt-6">How it works: Step-by-step example</h3>
        <p>For an income of $50,000 and the 5% rate, the calculation is:</p>
        <p>\( \text{Provincial Tax} = 50,000 \times 0.05 = 2,500 \)</p>
        <p>The remaining income after the provincial portion is $47,500.</p>
      </section>
      <section>
        <h3 class="text-xl font-semibold mt-6">Frequently asked questions</h3>
        <h4 class="text-lg font-semibold mt-4">What is the provincial tax rate in British Columbia?</h4>
        <p>The calculator hard-codes a representative 5% rate, but the actual rate varies by bracket and is updated annually. Always consult the CRA publications for the exact rate that applies to your bracket.</p>
        <h4 class="text-lg font-semibold mt-3">How is the tax calculated?</h4>
        <p>The calculator multiplies the presented annual income by the 5% rate and reports both the tax and what remains after the provincial payment.</p>
        <h4 class="text-lg font-semibold mt-3">Can this calculator be used for other provinces?</h4>
        <p>No, this one-page tool is specific to British Columbia's provincial rate.</p>
        <h4 class="text-lg font-semibold mt-3">How often are the tax rates updated?</h4>
        <p>Tax rates are typically refreshed annually. Bookmark this page or check the CRA site to ensure you have the latest data.</p>
        <h4 class="text-lg font-semibold mt-3">Where can I find more information on provincial taxes?</h4>
        <p>Visit the Canada Revenue Agency's official website for definitive guidance, worksheets, and downloadable resources.</p>
      </section>
    </section>

    <section class="card meta-section space-y-4 mt-6" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
      <details id="formulaDetails">
        <summary class="cursor-pointer text-lg font-semibold text-gray-900">Formulas</summary>
        <div class="mt-3 p-4 bg-gray-50 border border-gray-200 rounded-xl text-sm space-y-2">
          <p><strong>Provincial tax (flat rate):</strong></p>
          <pre class="auditspine-mono">\( \text{Provincial Tax} = \text{Income} \times 0.05 \)</pre>
          <p>The monthly tax is the annual tax divided by 12.</p>
        </div>
      </details>
      <details class="mt-3" id="citationDetails">
        <summary class="cursor-pointer text-lg font-semibold text-gray-900">Citations</summary>
        <div class="mt-3 p-4 bg-gray-50 border border-gray-200 rounded-xl text-sm">
          <p><strong>official CRA website</strong> — canada.ca · Accessed 2026-01-19</p>
          <p><a href="https://www.canada.ca/en/revenue-agency.html" class="text-blue-600 hover:underline" target="_blank" rel="noopener">https://www.canada.ca/en/revenue-agency.html</a></p>
        </div>
      </details>
      <details class="mt-3" id="changelogDetails">
        <summary class="cursor-pointer text-lg font-semibold text-gray-900">Changelog</summary>
        <div class="mt-3 p-4 bg-gray-50 border border-gray-200 rounded-xl text-sm">
          <ul class="list-disc list-inside">
            <li>0.1.0-draft — 2026-01-19: Initial audit spec draft generated from HTML extraction (review required).</li>
            <li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
            <li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
          </ul>
        </div>
      </details>
      <div class="flex flex-wrap gap-2 mt-4">
        <span class="pill">Verified by Ugo Candido</span>
        <span class="pill">Last Updated: 2026-01-19</span>
        <span class="pill">Version 0.1.0-draft</span>
      </div>
    
          <div class="badge" id="versionBadge">Version 1.5.0</div></section>
  </main>

  <footer id="siteFooter" class="bg-gray-900 text-white py-12">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
          <p class="text-gray-400 mb-4">Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.</p>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Categories</h4>
          <ul class="space-y-2">
            <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
            <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction &amp; DIY</a></li>
            <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
            <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
            <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
            <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health &amp; Fitness</a></li>
            <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle &amp; Everyday</a></li>
            <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
            <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math &amp; Conversions</a></li>
            <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
          <ul class="space-y-2">
            <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
            <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
            <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
            <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
            <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Support</h4>
          <ul class="space-y-2">
            <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
            <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
            <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
            <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
            <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
          </ul>
        </div>
      </div>
      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
        <p>© 2026 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
      </div>
    </div>
  </footer>

  <script src="/assets/js/mobile-menu.js"></script>
  <script src="/search.js"></script>

  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['$','$'], ['\\[','\\]']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script>
    (function () {
      var loadMathJax = function () {
        if (window.__mathjaxLoading) return;
        window.__mathjaxLoading = true;
        var script = document.createElement('script');
        script.id = 'MathJax-script';
        script.async = true;
        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js';
        document.head.appendChild(script);
      };

      var target = document.querySelector(
        '.formula-box, .mathjax, .math, .formula, [data-mathjax]'
      );

      if (!target) return;

      if ('IntersectionObserver' in window) {
        var observer = new IntersectionObserver(
          function (entries) {
            if (entries.some(function (entry) { return entry.isIntersecting; })) {
              observer.disconnect();
              loadMathJax();
            }
          },
          { rootMargin: '200px' }
        );
        observer.observe(target);
      } else {
        window.addEventListener(
          'load',
          function () {
            setTimeout(loadMathJax, 1000);
          },
          { once: true }
        );
      }
    })();
  </script>

  <script>
    (function () {
      'use strict';

      const TAX_RATE = 0.05;
      const PERIODS = 12;
      const defaults = { income: 50000 };

      const els = {
        annualIncome: document.getElementById('annualIncome'),
        provincialTax: document.getElementById('provincialTax'),
        incomeAfterTax: document.getElementById('incomeAfterTax'),
        monthlyTax: document.getElementById('monthlyTax'),
        effectiveRate: document.getElementById('effectiveRate'),
        errorBox: document.getElementById('errorBox'),
        scheduleWrap: document.getElementById('scheduleWrap'),
        scheduleBody: document.getElementById('scheduleBody'),
        toggleSchedule: document.getElementById('toggleSchedule'),
        downloadCsv: document.getElementById('downloadCsv'),
        calcBtn: document.getElementById('calcBtn'),
        resetBtn: document.getElementById('resetBtn')
      };

      let currentSchedule = [];

      const currencyFormatter = new Intl.NumberFormat('en-CA', {
        style: 'currency',
        currency: 'CAD',
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });

      const round2 = (value) => Math.round((value + Number.EPSILON) * 100) / 100;

      const debounce = (fn, delay = 100) => {
        let timer;
        return (...args) => {
          clearTimeout(timer);
          timer = setTimeout(() => fn(...args), delay);
        };
      };

      function formatCurrency(value) {
        const safe = Number.isFinite(value) ? value : 0;
        try {
          return currencyFormatter.format(safe);
        } catch (err) {
          return '</script> + round2(safe).toFixed(2);
        }
      }

      function parseInputs() {
        return {
          income: parseFloat(els.annualIncome.value)
        };
      }

      function validate(inputs) {
        const errors = [];
        if (!Number.isFinite(inputs.income) || inputs.income < 0) {
          errors.push('Income must be 0 or greater.');
        }
        return { ok: errors.length === 0, errors };
      }

      function compute(inputs) {
        const provincialTax = inputs.income * TAX_RATE;
        const incomeAfterTax = Math.max(0, inputs.income - provincialTax);
        const monthlyTax = provincialTax / PERIODS;
        const schedule = [];
        let cumulative = 0;
        for (let i = 1; i <= PERIODS; i += 1) {
          cumulative += monthlyTax;
          schedule.push({ month: i, monthly: round2(monthlyTax), cumulative: round2(cumulative) });
        }
        return {
          provincialTax: round2(provincialTax),
          incomeAfterTax: round2(incomeAfterTax),
          monthlyTax: round2(monthlyTax),
          schedule
        };
      }

      function format(outputs) {
        return {
          provincialTax: formatCurrency(outputs.provincialTax),
          incomeAfterTax: formatCurrency(outputs.incomeAfterTax),
          monthlyTax: formatCurrency(outputs.monthlyTax),
          effectiveRate: (TAX_RATE * 100).toFixed(2) + '%',
          schedule: outputs.schedule
        };
      }

      function renderErrors(errors) {
        if (!errors || errors.length === 0) {
          els.errorBox.style.display = 'none';
          els.errorBox.textContent = '';
          return;
        }
        els.errorBox.style.display = 'block';
        els.errorBox.textContent = errors.join(' ');
      }

      function render(formatted) {
        els.provincialTax.textContent = formatted.provincialTax;
        els.incomeAfterTax.textContent = formatted.incomeAfterTax;
        els.monthlyTax.textContent = formatted.monthlyTax;
        els.effectiveRate.textContent = formatted.effectiveRate;
        currentSchedule = formatted.schedule;
        if (els.scheduleWrap.style.display === 'block') {
          renderTable(currentSchedule);
        }
        els.downloadCsv.disabled = currentSchedule.length === 0;
      }

      function renderTable(schedule) {
        els.scheduleBody.innerHTML = '';
        const frag = document.createDocumentFragment();
        for (const row of schedule) {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${row.month}</td>
            <td>${formatCurrency(row.monthly)}</td>
            <td>${formatCurrency(row.cumulative)}</td>
          `;
          frag.appendChild(tr);
        }
        els.scheduleBody.appendChild(frag);
      }

      function update() {
        const inputs = parseInputs();
        const validation = validate(inputs);
        if (!validation.ok) {
          renderErrors(validation.errors);
          els.downloadCsv.disabled = true;
          return;
        }
        renderErrors([]);
        const results = compute(inputs);
        const formatted = format(results);
        render(formatted);
      }

      function reset() {
        els.annualIncome.value = defaults.income;
    const debouncedUpdate = debounce(update, 100);

    document.querySelectorAll('#inputsCard input, #inputsCard select, #inputsCard textarea')
      .forEach((el) => {
        el.addEventListener('input', debouncedUpdate);
        el.addEventListener('change', debouncedUpdate);
      });

        update();
      }

      els.calcBtn.addEventListener('click', update);
      els.resetBtn.addEventListener('click', reset);

      els.toggleSchedule.addEventListener('click', function () {
        const isHidden = els.scheduleWrap.style.display !== 'block';
        els.scheduleWrap.style.display = isHidden ? 'block' : 'none';
        els.toggleSchedule.textContent = isHidden ? 'Hide monthly breakdown' : 'View monthly breakdown';
        if (isHidden) {
          renderTable(currentSchedule);
        }
      });

      els.downloadCsv.addEventListener('click', function () {
        if (currentSchedule.length === 0) return;
        let csv = 'Month,Monthly Tax,Cumulative Tax\n';
        for (const row of currentSchedule) {
          csv += `${row.month},${row.monthly},${row.cumulative}\n`;
        }
        const blob = new Blob([csv], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        const anchor = document.createElement('a');
        anchor.href = url;
        anchor.download = 'bc-province-tax-monthly.csv';
        anchor.click();
        URL.revokeObjectURL(url);
      });

      input.addEventListener('change', debouncedUpdate);
        });

      update();
    })();
  </script>

</body></html>
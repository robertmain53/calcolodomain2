<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/three-phase-power">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Three-Phase Power Calculator - kW, kVA, Amps</title>
<meta name="description" content="Calculate three-phase power (kW, kVA, kVAR), current (Amps), voltage, or power factor for any balanced AC circuit. Handles Line-to-Line &amp; Line-to-Neutral voltage.">

<meta name="author" content="Ugo Candido">

<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="shortcut" href="/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="manifest" href="/site.webmanifest">

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-wcIxkf4k558fYv3eWK7go8HWaISdGfZ9u/IqR55LILGmgEMpGUFJGuRhLVnCALiB" crossorigin="anonymous">
<script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoBPJpTadBVOjsjMZEJfaFGxaAPfW5dAiMgOkVKG8M4HNTs4LfsKNnxKNOTSBi8" crossorigin="anonymous"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/Gf1ESgqCntTwubN/bRgrLqtWplvT1lP4GrZot6rGGDg/F9Jv" crossorigin="anonymous"></script>

<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.25rem;
overflow-x:auto; text-align: center; font-size: 1.1rem;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }

/* Stili del Calcolatore e Risultati (Conformi WCAG & Direttiva 2.4) */
.form-label {
display: block;
text-sm;
font-weight: 500;
color: #374151; /* gray-700 */
margin-bottom: 0.25rem;
}
.form-input {
display: block;
width: 100%;
/* Direttiva 2.4: Target Tattili (48px) */
min-height: 48px;
padding: 0.5rem 0.75rem;
border: 1px solid #d1d5db; /* gray-300 */
border-radius: 0.375rem;
box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
}
.form-input-group {
display: flex;
}
.form-input-group .form-input {
border-top-right-radius: 0;
border-bottom-right-radius: 0;
flex-grow: 1;
}
.form-input-group select {
border-top-left-radius: 0;
border-bottom-left-radius: 0;
border-left: 0;
background-color: #f9fafb; /* gray-50 */
min-height: 48px; /* Direttiva 2.4 */
}
.form-input:focus, .form-input-group select:focus {
outline: 2px solid transparent;
outline-offset: 2px;
border-color: #2563eb; /* blue-600 */
box-shadow: 0 0 0 2px #2563eb;
z-index: 10;
}
.form-input:disabled {
background-color: #f3f4f6; /* gray-100 */
color: #6b7280; /* gray-500 */
cursor: not-allowed;
}
.required-marker {
color: #ef4444; /* red-500 */
margin-left: 0.25rem;
}
.error-message {
color: #dc2626; /* red-600 */
font-size: 0.875rem;
margin-top: 0.5rem;
min-height: 1.25rem; /* Previene CLS */
}
.tap-target {
min-height: 48px; /* Direttiva 2.4 */
min-width: 48px; /* Direttiva 2.4 */
display: inline-flex;
align-items: center;
justify-content: center;
padding-left: 1.5rem;
padding-right: 1.5rem;
}

/* Stile Focus Visibile Personalizzato (WCAG 2.4.7) */
:focus-visible {
outline: 3px solid #3b82f6; /* blue-500 */
outline-offset: 2px;
border-radius: 4px;
}
:focus:not(:focus-visible) {
outline: none;
}

/* Stili Risultati (Contrasto Corretto) */
.result-card {
background: #fff;
border: 1px solid #e5e7eb; /* gray-200 */
border-radius: 10px;
padding: 1rem 1.25rem;
text-align: center;
}
.result-card h4 {
font-size: 0.9rem;
font-weight: 500;
color: #4b5563; /* gray-600 */
margin-bottom: 0.25rem;
text-transform: uppercase;
letter-spacing: 0.05em;
}
.result-card p {
font-size: 1.5rem;
font-weight: 700;
color: #1f2937; /* gray-800 */
}
.result-card .unit {
font-size: 1rem;
font-weight: 500;
color: #374151;
margin-left: 0.25rem;
}

/* Stili Tooltip (A11y) */
.tooltip-btn {
background: none;
border: none;
padding: 0.25rem;
border-radius: 9999px;
color: #6b7280;
cursor: pointer;
}
.tooltip-btn:hover { color: #111827; }
.tooltip-text {
display: none;
background-color: #1f2937;
color: white;
padding: 0.5rem 0.75rem;
border-radius: 6px;
font-size: 0.875rem;
margin-top: 0.5rem;
position: relative;
}
.tooltip-text[aria-hidden="false"] {
display: block;
}

/* Stili Stampa */
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
}
</style>

<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Three-Phase Power Calculator - kW, kVA, Amps",
  "description": "Calculate three-phase power (kW, kVA, kVAR), current (Amps), voltage, or power factor for any balanced AC circuit. Handles Line-to-Line & Line-to-Neutral voltage.",
  "url": "https://calcdomain.com/three-phase-power",
  "inLanguage": "en",
  "reviewedBy": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "dateModified": "2026-01-19"
}</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Engineering",
      "item": "https://calcdomain.com/categories/engineering"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Electrical",
      "item": "https://calcdomain.com/subcategories/electrical"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Calculate Three-Phase Power",
  "description": "A step-by-step guide to calculating Real (kW), Apparent (kVA), and Reactive (kVAR) power in a 3-phase system.",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Select Calculation Goal",
      "text": "Choose the value you want to solve for: Power, Current, Voltage, or Power Factor."
    },
    {
      "@type": "HowToStep",
      "name": "Enter Voltage & Type",
      "text": "Input the voltage and specify whether it is Line-to-Line (V_LL) or Line-to-Neutral (V_LN). This is critical for a correct calculation."
    },
    {
      "@type": "HowToStep",
      "name": "Enter Known Values",
      "text": "Fill in the other known values, such as Current (Amps) and Power Factor (e.g., 0.85 for a motor)."
    },
    {
      "@type": "HowToStep",
      "name": "Review Full Power Triangle",
      "text": "The calculator instantly displays all components of the power triangle: Real Power (kW), Apparent Power (kVA), and Reactive Power (kVAR), plus the calculated unknown value."
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Why is the square root of 3 (√3) used in three-phase power?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The square root of 3 (approximately 1.732) is the factor that relates Line-to-Line voltage (V_LL) and Line-to-Neutral voltage (V_LN) in a balanced Wye (Star) connected system: V_LL = V_LN * √3. The formula P = √3 * V_LL * I_L * PF is the universal formula for any balanced 3-phase system (Wye or Delta) and is derived from the per-phase power (P_phase = V_LN * I_L * PF) multiplied by 3."
      }
    },
    {
      "@type": "Question",
      "name": "What is the difference between Line-to-Line and Line-to-Neutral voltage?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Line-to-Line (V_LL) is the voltage measured between two power lines (e.g., 480V in a 480/277V system). Line-to-Neutral (V_LN) is the voltage measured between one power line and the neutral wire (e.g., 277V). Using the wrong one in a formula will result in an error by a factor of √3."
      }
    },
    {
      "@type": "Question",
      "name": "What is the difference between kW and kVA?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "kW (Kilowatts) is **Real Power (P)**: the actual work-performing power used by a load (e.g., to create heat, light, or mechanical motion).\nkVA (Kilovolt-Amps) is **Apparent Power (S)**: the total power drawn by the circuit (S = P + Q). It is the vector sum of Real Power (kW) and Reactive Power (kVAR)."
      }
    },
    {
      "@type": "Question",
      "name": "What is Power Factor (PF)?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Power Factor (PF) is the ratio of Real Power (kW) to Apparent Power (kVA). It's a measure of efficiency from 0 to 1. A purely resistive load (like a heater) has a PF of 1.0. A motor (an inductive load) might have a PF of 0.85. A lower PF means more 'wasted' reactive power (kVAR) is being drawn, which utility companies may charge for."
      }
    }
  ]
}
</script>
<script src="search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>
<body class="bg-gray-50 text-gray-900"><header id="siteHeader">
  <div class="nav container">
    <a class="brand" href="https://calcdomain.com">CalcDomain</a>
    <div class="navRight">
      <a class="pill" href="https://calcdomain.com/search">Advanced Search</a>
      <span class="pill">Categories</span>
    </div>
  </div>
</header><div class="container">
  <main style="margin:24px 0 40px;" id="mainContent">
    <h1 id="pageTitle">Three-Phase Power Calculator</h1>
    <p class="sub" id="pageSub">Calculate three-phase power (kW, kVA, kVAR), current (Amps), voltage, or power factor for any balanced AC circuit. Handles Line-to-Line &amp; Line-to-Neutral voltage.</p>
    <div id="errorBox" class="alert" role="alert" aria-live="polite"></div>

    <div class="calc-hero" id="calcHero">
      <section class="card" id="inputsCard" aria-label="Calculator inputs"><input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500" autocomplete="off">
<div data-canon-btnrow="1" style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;">
<button id="calcBtn" type="button" class="btn">Calculate</button>

<button id="resetBtn" type="button" class="btn btnSecondary">Reset</button>
</div>
</section>
      <section class="card sticky-box" id="resultsCard" aria-label="Calculator results"></section>
    </div>

    <section class="card content-card" id="howToUse" aria-label="How to use and methodology">
      <h2>Full original guide (expanded)</h2>
    <header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="https://calcdomain.com" class="text-2xl font-bold text-blue-700">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">

<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="https://calcdomain.com/search" class="text-gray-700 hover:text-blue-700">Advanced Search</a>
Categories
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-700">Advanced Search</a>
Categories
</div>
</div>
</nav>
</header><main class="container mx-auto px-4 lg:px-6 py-10 w-full lg:w-2/3">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm mb-4 text-gray-600" aria-label="Breadcrumbs"><a href="https://calcdomain.com" class="hover:text-blue-600">Home</a> » <a href="https://calcdomain.com/categories/engineering" class="hover:text-blue-600">Engineering</a> » <a href="https://calcdomain.com/subcategories/electrical" class="hover:text-blue-600">Electrical</a></nav>

<div id="print-section" class="bg-white p-6 md:p-8 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Three-Phase Power Calculator</h1>
<p class="text-gray-600 mb-6">Quickly calculate three-phase power (Real, Apparent, Reactive), current, or power factor for any balanced AC circuit. This tool is designed for electrical engineers, technicians, and students, solving for any unknown variable in the power triangle. It correctly handles both Line-to-Line (Delta) and Line-to-Neutral (Wye/Star) voltage inputs.</p>

<form id="calculator-ui" class="space-y-6" onsubmit="return false;">
<div>
<label for="calc-mode" class="form-label font-semibold text-lg">1. Select Calculation Goal</label>
<select id="calc-mode" class="form-input">
<option value="power" selected="">Calculate Power (kW, kVA)</option>
<option value="current">Calculate Current (Amps)</option>
<option value="voltage">Calculate Voltage (Volts)</option>
<option value="pf">Calculate Power Factor</option>
</select>
</div>

<div class="space-y-6">
<h2 class="form-label font-semibold text-lg">2. Enter Known Values</h2>
<fieldset>
<legend class="form-label">Voltage Type
<span class="required-marker" aria-hidden="true">*</span>
</legend>
<div class="flex space-x-6 mt-1">
<div class="flex items-center">
<input type="radio" id="voltage-type-ll" name="voltage-type" value="ll" checked="" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
<label for="voltage-type-ll" class="ml-2 block text-sm text-gray-900">Line-to-Line ($V_{LL}$)</label>
</div>
<div class="flex items-center">
<input type="radio" id="voltage-type-ln" name="voltage-type" value="ln" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
<label for="voltage-type-ln" class="ml-2 block text-sm text-gray-900">Line-to-Neutral ($V_{LN}$)</label>
</div>
</div>
</fieldset>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div id="voltage-wrapper">
<label for="voltage" class="form-label">
Voltage ($V$)
<span class="required-marker" aria-hidden="true">*</span>
</label>
<div class="form-input-group">
<input type="number" id="voltage" value="480" step="any" min="0.0001" class="form-input" aria-required="true" aria-describedby="voltage-error">
<select id="voltage-unit" class="form-input" aria-label="Voltage unit">
<option value="V" selected="">Volts (V)</option>
<option value="kV">Kilovolts (kV)</option>
</select>
</div>
<div id="voltage-error" class="error-message" role="alert"></div>
</div>

<div id="current-wrapper">
<label for="current" class="form-label">
Line Current ($I_L$)
<span class="required-marker" aria-hidden="true">*</span>
</label>
<div class="form-input-group">
<input type="number" id="current" value="25" step="any" min="0.0001" class="form-input" aria-required="true" aria-describedby="current-error">
<select id="current-unit" class="form-input" aria-label="Current unit">
<option value="A" selected="">Amps (A)</option>
<option value="kA">Kiloamps (kA)</option>
</select>
</div>
<div id="current-error" class="error-message" role="alert"></div>
</div>

<div id="pf-wrapper">
<div class="flex items-center space-x-1">
<label for="pf" class="form-label">
Power Factor ($\cos \phi$)
<span class="required-marker" aria-hidden="true">*</span>
</label>
<button type="button" id="pf-tooltip-btn" class="tooltip-btn" aria-label="More info about Power Factor" aria-expanded="false" aria-controls="pf-tooltip-text">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.06-1.061 3.5 3.5 0 014.12 4.122A.75.75 0 0110.82 10a2 2 0 10-2.298 1.75a.75.75 0 01-1.496-.068 3.5 3.5 0 014.12-4.122zM10 12.25a.75.75 0 01.75.75v.008a.75.75 0 01-1.5 0V13a.75.75 0 01.75-.75z" clip-rule="evenodd"></path></svg>
</button>
</div>
<input type="number" id="pf" value="0.85" step="0.01" min="0.01" max="1" class="form-input" aria-required="true" aria-describedby="pf-error pf-tooltip-text">
<div id="pf-error" class="error-message" role="alert"></div>
<div id="pf-tooltip-text" role="tooltip" class="tooltip-text" aria-hidden="true">
Enter a value between 0.01 and 1.0. A typical motor is 0.85. A resistive load (heater) is 1.0.
</div>
</div>

<div id="power-wrapper">
<label for="power-val" class="form-label">
Real Power ($P$)
<span class="required-marker" aria-hidden="true">*</span>
</label>
<div class="form-input-group">
<input type="number" id="power-val" value="10" step="any" min="0" class="form-input" aria-required="true" aria-describedby="power-error">
<select id="power-unit" class="form-input" aria-label="Power unit">
<option value="W">Watts (W)</option>
<option value="kW" selected="">Kilowatts (kW)</option>
<option value="MW">Megawatts (MW)</option>
</select>
</div>
<div id="power-error" class="error-message" role="alert"></div>
</div>
</div>
</div>
<div class="flex space-x-4 mt-6">
<button type="button" id="reset-btn" class="tap-target px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 ring-offset-2">Reset</button>
</div>
</form>

<section id="results" class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6" style="min-height: 300px;" aria-labelledby="results-heading">
<h3 id="results-heading" class="text-xl font-semibold text-gray-800 mb-4 text-center">Power Triangle Results</h3>

<div id="main-result-card" class="result-card bg-blue-100 border-blue-200 shadow-sm">
<h4 class="text-blue-800" id="main-result-label">Real Power (P)</h4>
<p id="main-result-value" class="text-blue-700 text-3xl font-bold">
— <span class="unit" id="main-result-unit">kW</span>
</p>
</div>

<div id="secondary-results-container" class="grid grid-cols-1 sm:grid-cols-3 gap-3 mt-4" aria-live="polite">
<div class="result-card" id="apparent-power-card">
<h4>Apparent Power (S)</h4>
<p id="apparent-power-result">— <span class="unit">kVA</span></p>
</div>
<div class="result-card" id="reactive-power-card">
<h4>Reactive Power (Q)</h4>
<p id="reactive-power-result">— <span class="unit">kVAR</span></p>
</div>
<div class="result-card" id="angle-card">
<h4>PF Angle ($\phi$)</h4>
<p id="angle-result">— <span class="unit">°</span></p>
</div>
</div>
</section>
</div>

<article class="bg-white p-6 md:p-8 rounded-lg shadow-md mt-8 prose prose-blue">
<h2 id="methodology">Data Source &amp; Methodology</h2>
<p>This calculator uses the fundamental principles of AC power analysis for balanced three-phase systems. The formulas are standard in electrical engineering and are universally taught.</p>
<ul>
<li><strong>Authoritative Source:</strong> <em>Fundamentals of Electric Circuits, 7th Edition</em> by Charles K. Alexander and Matthew N. O. Sadiku.</li>
<li><strong>Reference:</strong> Chapter 12, "AC Power Analysis".</li>
</ul>
<p>All calculations are based strictly on the fundamental AC power formulas described in this source, including the use of $\sqrt{3}$ for balanced three-phase systems.</p>

<h2 id="formula">The Formulas Explained: The Power Triangle</h2>
<p>In AC circuits, power isn't a single value. It's a vector relationship between three types of power, known as the power triangle.</p>


[Image of the power triangle]

<ul class="list-disc list-inside">
<li><strong>$P$ - Real Power (kW):</strong> The "working" power that does useful work, like turning a motor or lighting a lamp.</li>
<li><strong>$S$ - Apparent Power (kVA):</strong> The "total" power in the circuit, which is the vector sum of Real and Reactive power. Utility transformers and wiring are rated in kVA.</li>
<li><strong>$Q$ - Reactive Power (kVAR):</strong> The "wasted" or "magnetic" power required to build magnetic fields in motors and transformers. It does no useful work but still uses circuit capacity.</li>
<li><strong>$\cos \phi$ - Power Factor (PF):</strong> The ratio of Real Power to Apparent Power ($P/S$). It's a measure of efficiency.</li>
</ul>

<h3 id="three-phase-formulas">Three-Phase Formulas (Line-to-Line vs. Line-to-Neutral)</h3>
<p>The key to 3-phase calculation is using the correct voltage. This calculator handles both.</p>

<p><strong>1. Using Line-to-Line Voltage ($V_{LL}$):</strong>
This is the most common formula, where $V_{LL}$ is the voltage between two phases (e.g., 480V) and $I_L$ is the current in one phase.</p>
<div class="formula-box" role="math" aria-label="Apparent Power formula with Line-to-Line voltage">
$$ S = \sqrt{3} \times V_{LL} \times I_L $$
</div>
<div class="formula-box" role="math" aria-label="Real Power formula with Line-to-Line voltage">
$$ P = \sqrt{3} \times V_{LL} \times I_L \times \cos(\phi) $$
</div>

<p><strong>2. Using Line-to-Neutral Voltage ($V_{LN}$):</strong>
This formula uses the voltage from one phase to the neutral (e.g., 277V in a 480/277V system). The relationship is $V_{LL} = \sqrt{3} \times V_{LN}$. The power is simply 3x the power of a single phase.</p>
<div class="formula-box" role="math" aria-label="Real Power formula with Line-to-Neutral voltage">
$$ P = 3 \times V_{LN} \times I_L \times \cos(\phi) $$
</div>
<p>This tool automatically uses the correct formula based on your "Voltage Type" selection.</p>

<h2 id="variables">Glossary of Variables</h2>
<ul class="list-disc list-inside">
<li><strong>$P$ (Real Power):</strong> Measured in Watts (W) or Kilowatts (kW).</li>
<li><strong>$S$ (Apparent Power):</strong> Measured in Volt-Amps (VA) or Kilovolt-Amps (kVA).</li>
<li><strong>$Q$ (Reactive Power):</strong> Measured in Volt-Amps Reactive (VAR) or Kilovolt-Amps Reactive (kVAR).</li>
<li><strong>$V_{LL}$ (Line-to-Line Voltage):</strong> Voltage measured between two power lines (phases).</li>
<li><strong>$V_{LN}$ (Line-to-Neutral Voltage):</strong> Voltage measured between one power line and the neutral.</li>
<li><strong>$I_L$ (Line Current):</strong> The current flowing in a single power line (phase).</li>
<li><strong>$\cos(\phi)$ (Power Factor):</strong> A dimensionless ratio between 0 and 1.</li>
<li><strong>$\phi$ (Power Factor Angle):</strong> The angle between Real Power (P) and Apparent Power (S).</li>
</ul>

<h2 id="example">How It Works: A Step-by-Step Example</h2>
<p>Let's find the Real Power (kW) and Apparent Power (kVA) for a three-phase motor.</p>
<ul>
<li><strong>Goal:</strong> Calculate Power</li>
<li><strong>Voltage:</strong> 480V (Selected as Line-to-Line, $V_{LL}$)</li>
<li><strong>Current:</strong> 25A (Line Current, $I_L$)</li>
<li><strong>Power Factor:</strong> 0.85</li>
</ul>
<ol class="list-decimal list-inside">
<li><strong>Identify Formula:</strong> We use the Line-to-Line formulas.
<br> $S = \sqrt{3} \times V_{LL} \times I_L$
<br> $P = S \times \cos(\phi)$</li>
<li><strong>Calculate Apparent Power (S):</strong>
<br> $S = \sqrt{3} \times 480 \text{ V} \times 25 \text{ A}$
<br> $S \approx 1.732 \times 480 \times 25 = 20,784 \text{ VA}$
<br> <strong>$S = 20.78 \text{ kVA}$</strong></li>
<li><strong>Calculate Real Power (P):</strong>
<br> $P = 20,784 \text{ VA} \times 0.85$
<br> $P = 17,666 \text{ W}$
<br> <strong>$P = 17.67 \text{ kW}$</strong></li>
<li><strong>Calculate Reactive Power (Q) (Bonus):</strong>
<br> $Q = \sqrt{S^2 - P^2} = \sqrt{20784^2 - 17666^2} \approx 10,934 \text{ VAR}$
<br> <strong>$Q = 10.93 \text{ kVAR}$</strong></li>
</ol>

<h2 id="faq">Frequently Asked Questions (FAQ)</h2>
<details>
<summary>Why is the square root of 3 (√3) used in three-phase power?</summary>
<p>The square root of 3 (approximately 1.732) is the factor that relates Line-to-Line voltage ($V_{LL}$) and Line-to-Neutral voltage ($V_{LN}$) in a balanced Wye (Star) connected system: $V_{LL} = V_{LN} \times \sqrt{3}$. The formula $P = \sqrt{3} \times V_{LL} \times I_L \times PF$ is the universal formula for any balanced 3-phase system (Wye or Delta) and is derived from the per-phase power ($P_{phase} = V_{LN} \times I_L \times PF$) multiplied by 3.</p>
</details>
<details>
<summary>What is the difference between Line-to-Line and Line-to-Neutral voltage?</summary>
<p>Line-to-Line ($V_{LL}$) is the voltage measured between two power lines (e.g., 480V in a 480/277V system). Line-to-Neutral ($V_{LN}$) is the voltage measured between one power line and the neutral wire (e.g., 277V). Using the wrong one in a formula will result in an error by a factor of $\sqrt{3}$.</p>
</details>
<details>
<summary>What is the difference between kW and kVA?</summary>
<p>kW (Kilowatts) is <strong>Real Power (P)</strong>: the actual work-performing power used by a load (e.g., to create heat, light, or mechanical motion).<br>kVA (Kilovolt-Amps) is <strong>Apparent Power (S)</strong>: the total power drawn by the circuit ($S = \sqrt{P^2 + Q^2}$). It is the vector sum of Real Power (kW) and Reactive Power (kVAR).</p>
</details>
<details>
<summary>What is Power Factor (PF)?</summary>
<p>Power Factor (PF) is the ratio of Real Power (kW) to Apparent Power (kVA). It's a measure of efficiency from 0 to 1. A purely resistive load (like a heater) has a PF of 1.0. A motor (an inductive load) might have a PF of 0.85. A lower PF means more 'wasted' reactive power (kVAR) is being drawn, which utility companies may charge for.</p>
</details>
<details>
<summary>What is a typical power factor for a motor?</summary>
<p>A typical induction motor running at full load will have a power factor around 0.85 to 0.90. This value can drop significantly (to 0.20-0.40) if the motor is lightly loaded. This is why a PF of 0.85 is a common default for calculations.</p>
</details>
<details>
<summary>Does this calculator work for Delta ($\Delta$) and Wye ($Y$) systems?</summary>
<p>Yes. The formulas $S = \sqrt{3} \times V_{LL} \times I_L$ and $P = \sqrt{3} \times V_{LL} \times I_L \times PF$ are universal for any <strong>balanced</strong> three-phase system, regardless of whether it's a Wye or Delta configuration. This calculator assumes a balanced system (where currents and voltages are equal across all three phases).</p>
</details>

<div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
<br>Engineering content reviewed by the CalcDomain Editorial Board for accuracy.
<br>Last accuracy review: <time datetime="2025-11-03">November 3, 2025</time><p></p>
</div>

<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[S = \sqrt{3} \times V_{LL} \times I_L\]</div>
  <pre class="auditspine-mono">S = \sqrt{3} \times V_{LL} \times I_L</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[P = \sqrt{3} \times V_{LL} \times I_L \times \cos(\phi)\]</div>
  <pre class="auditspine-mono">P = \sqrt{3} \times V_{LL} \times I_L \times \cos(\phi)</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[P = 3 \times V_{LN} \times I_L \times \cos(\phi)\]</div>
  <pre class="auditspine-mono">P = 3 \times V_{LN} \times I_L \times \cos(\phi)</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[", right: "\]</div>
  <pre class="auditspine-mono">", right: "</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$ S = \sqrt{3} \times V_{LL} \times I_L $</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$ P = \sqrt{3} \times V_{LL} \times I_L \times \cos(\phi) $</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$ P = 3 \times V_{LN} \times I_L \times \cos(\phi) $</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Engineering</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/engineering" target="_blank" rel="nofollow noopener">https://calcdomain.com/engineering</a></li>
<li><strong>Electrical (Power Systems)</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/electrical" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/electrical</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Solve for **any variable** (Power, Current, Voltage, or PF).</li>
<li>Correctly handles **$V_{LL}$ vs. $V_{LN}$** to prevent common errors.</li>
<li>Shows the full **Power Triangle** (kW, kVA, kVAR).</li>
<li>Based on authoritative electrical engineering principles.</li>
<li>Mobile-first and fully accessible (WCAG 2.1 AA).</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Electrical Tools</h3>
<ul class="space-y-3 text-sm">
<li>Ohm's Law Calculator</li>
<li>Single-Phase Power Calculator</li>
<li>Wire Size Calculator (AWG)</li>
<li>Energy Cost (kWh) Calculator</li>
</ul>
</div>
</div>
</aside>
</div>


</main><footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                                                                                                                        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction &amp; DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health &amp; Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle &amp; Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math &amp; Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>© 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer></section>

    <section class="meta-section" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
  <details id="formulaDetails">
    <summary style="cursor:pointer; font-weight:700; color:var(--text)">Formulas</summary>
    <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
      <p style="margin:0;">(Formulas preserved from original page content, if present.)</p>
    </div>
  </details>

  

  

  <div class="badge-row" id="badgeRow">
    <div class="badge" id="versionBadge">Version 0.1.0-draft</div>
  </div>

<details id="citationDetails" style="margin-top:10px;">
  <summary style="cursor:pointer; font-weight:700; color:var(--text)">Citations</summary>
  <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
    <p style="margin:0;">Add authoritative sources relevant to this calculator (standards bodies, manuals, official docs).</p>
  </div>
</details>

<details id="changelogDetails" style="margin-top:10px;">
  <summary style="cursor:pointer; font-weight:700; color:var(--text)">Changelog</summary>
  <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
    <ul style="padding-left:18px; margin:0;">
      <li>0.1.0-draft — 2026-01-19: Initial draft (review required).</li>
    </ul>
  </div>
</details>
</section>
  </main>
</div><footer id="siteFooter" class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="border-t border-gray-800 pt-8 text-center text-gray-400">
      <p>© 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer><script defer="">
(function() {

  'use strict';

document.addEventListener('DOMContentLoaded', () => {

// --- 1. Riferimenti DOM ---
const elements = {
calcMode: document.getElementById('calc-mode'),
voltageWrapper: document.getElementById('voltage-wrapper'),
voltage: document.getElementById('voltage'),
voltageUnit: document.getElementById('voltage-unit'),
voltageError: document.getElementById('voltage-error'),
voltageTypeLL: document.getElementById('voltage-type-ll'),
voltageTypeLN: document.getElementById('voltage-type-ln'),
currentWrapper: document.getElementById('current-wrapper'),
current: document.getElementById('current'),
currentUnit: document.getElementById('current-unit'),
currentError: document.getElementById('current-error'),
pfWrapper: document.getElementById('pf-wrapper'),
pf: document.getElementById('pf'),
pfError: document.getElementById('pf-error'),
powerWrapper: document.getElementById('power-wrapper'),
powerVal: document.getElementById('power-val'),
powerUnit: document.getElementById('power-unit'),
powerError: document.getElementById('power-error'),
resetBtn: document.getElementById('reset-btn'),
// Results
mainResultLabel: document.getElementById('main-result-label'),
mainResultValue: document.getElementById('main-result-value'),
mainResultUnit: document.getElementById('main-result-unit'),
apparentPowerResult: document.getElementById('apparent-power-result'),
reactivePowerResult: document.getElementById('reactive-power-result'),
angleResult: document.getElementById('angle-result'),
// Result Cards (to hide/show)
apparentPowerCard: document.getElementById('apparent-power-card'),
reactivePowerCard: document.getElementById('reactive-power-card'),
angleCard: document.getElementById('angle-card'),
// Tooltip
pfTooltipBtn: document.getElementById('pf-tooltip-btn'),
pfTooltipText: document.getElementById('pf-tooltip-text'),
};

const sqrt3 = Math.sqrt(3);

// --- 2. Logica Tooltip (A11y) ---
elements.pfTooltipBtn.addEventListener('click', () => {
const isExpanded = elements.pfTooltipBtn.getAttribute('aria-expanded') === 'true';
elements.pfTooltipBtn.setAttribute('aria-expanded', !isExpanded);
elements.pfTooltipText.setAttribute('aria-hidden', isExpanded);
});

// --- 3. Logica UI Dinamica ---
function updateFormUI() {
const mode = elements.calcMode.value;

// Reset all fields
const allWrappers = [elements.voltageWrapper, elements.currentWrapper, elements.pfWrapper, elements.powerWrapper];
allWrappers.forEach(w => w.style.display = 'block');

const allInputs = [elements.voltage, elements.current, elements.pf, elements.powerVal];
allInputs.forEach(i => i.disabled = false);

// Nastily reset ARIA (will be set correctly in validation)
allInputs.forEach(i => i.setAttribute('aria-invalid', 'false'));
document.querySelectorAll('.error-message').forEach(e => e.textContent = '');

// Enable/Disable based on mode
switch (mode) {
case 'power':
elements.powerWrapper.style.display = 'none';
elements.powerVal.disabled = true;
elements.mainResultLabel.textContent = 'Real Power (P)';
elements.mainResultUnit.textContent = 'kW';
elements.apparentPowerCard.style.display = 'block';
elements.reactivePowerCard.style.display = 'block';
elements.angleCard.style.display = 'block';
break;
case 'current':
elements.currentWrapper.style.display = 'none';
elements.current.disabled = true;
elements.mainResultLabel.textContent = 'Calculated Current (I)';
elements.mainResultUnit.textContent = 'Amps';
elements.apparentPowerCard.style.display = 'block';
elements.reactivePowerCard.style.display = 'block';
elements.angleCard.style.display = 'block';
break;
case 'voltage':
elements.voltageWrapper.style.display = 'none';
elements.voltage.disabled = true;
elements.mainResultLabel.textContent = 'Calculated Voltage (V)';
elements.mainResultUnit.textContent = 'Volts';
elements.apparentPowerCard.style.display = 'block';
elements.reactivePowerCard.style.display = 'block';
elements.angleCard.style.display = 'block';
break;
case 'pf':
elements.pfWrapper.style.display = 'none';
elements.pf.disabled = true;
elements.mainResultLabel.textContent = 'Calculated Power Factor (PF)';
elements.mainResultUnit.textContent = '';
elements.apparentPowerCard.style.display = 'block';
elements.reactivePowerCard.style.display = 'block';
elements.angleCard.style.display = 'block';
break;
}
calculate();
}

// --- 4. Funzione di Validazione ---
function validateInput(el, errEl, minVal = 0.0001, maxVal = Infinity) {
if (el.disabled) return 0; // Se disabilitato, non è un input, ritorna 0
const val = parseFloat(el.value);
if (el.value === '' || isNaN(val)) {
errEl.textContent = 'This field is required.';
el.setAttribute('aria-invalid', 'true');
return null;
}
if (val < minVal || val > maxVal) {
errEl.textContent = `Value must be between ${minVal} and ${maxVal}.`;
el.setAttribute('aria-invalid', 'true');
return null;
}
errEl.textContent = '';
el.setAttribute('aria-invalid', 'false');
return val;
}

// --- 5. Funzione Principale di Calcolo ---
function calculate() {
let isValid = true;
const mode = elements.calcMode.value;

// Validare input
const v_val = validateInput(elements.voltage, elements.voltageError, 0.0001);
const i_val = validateInput(elements.current, elements.currentError, 0.0001);
const pf_val = validateInput(elements.pf, elements.pfError, 0.01, 1);
const p_val = validateInput(elements.powerVal, elements.powerError, 0);

if (v_val === null || i_val === null || pf_val === null || p_val === null) {
isValid = false;
}

if (!isValid) {
resetResults();
return;
}

// Convertire tutti gli input in unità base (V, A, W)
const v_base = v_val * (elements.voltageUnit.value === 'kV' ? 1000 : 1);
const i_base = i_val * (elements.currentUnit.value === 'kA' ? 1000 : 1);
let p_base = 0;
switch (elements.powerUnit.value) {
case 'W': p_base = p_val; break;
case 'kW': p_base = p_val * 1000; break;
case 'MW': p_base = p_val * 1000000; break;
}

// Determinare V_LL (Line-to-Line) come base universale
const voltageType = elements.voltageTypeLL.checked ? 'll' : 'ln';
let V_ll_base = v_base;
if (voltageType === 'ln' && !elements.voltage.disabled) {
V_ll_base = v_base * sqrt3;
}

// Inizializzare variabili di output
let P_w, S_va, Q_var, Phi_deg;
let mainResultVal;

try {
switch (mode) {
case 'power':
S_va = sqrt3 * V_ll_base * i_base;
P_w = S_va * pf_val;
Q_var = Math.sqrt(Math.pow(S_va, 2) - Math.pow(P_w, 2));
Phi_deg = Math.acos(pf_val) * (180 / Math.PI);
mainResultVal = P_w / 1000; // Mostra kW
break;

case 'current':
P_w = p_base;
S_va = P_w / pf_val;
mainResultVal = S_va / (sqrt3 * V_ll_base); // Calcola I_L (Amps)
Q_var = Math.sqrt(Math.pow(S_va, 2) - Math.pow(P_w, 2));
Phi_deg = Math.acos(pf_val) * (180 / Math.PI);
break;

case 'voltage':
P_w = p_base;
S_va = P_w / pf_val;
let V_ll_calc = S_va / (sqrt3 * i_base); // Calcola V_LL (Volts)
mainResultVal = V_ll_calc;
// Se l'utente ha chiesto V_LN, mostra quello
if (voltageType === 'ln') {
mainResultVal = V_ll_calc / sqrt3;
}
Q_var = Math.sqrt(Math.pow(S_va, 2) - Math.pow(P_w, 2));
Phi_deg = Math.acos(pf_val) * (180 / Math.PI);
break;

case 'pf':
P_w = p_base;
S_va = sqrt3 * V_ll_base * i_base;
if (S_va < P_w) {
elements.powerError.textContent = 'Real Power (kW) cannot exceed Apparent Power (V*I). Check inputs.';
isValid = false;
break;
}
mainResultVal = P_w / S_va; // Calcola PF
if (mainResultVal > 1) mainResultVal = 1;
if (mainResultVal < 0) mainResultVal = 0;
Q_var = Math.sqrt(Math.pow(S_va, 2) - Math.pow(P_w, 2));
Phi_deg = Math.acos(mainResultVal) * (180 / Math.PI);
break;
}

if (isValid) {
displayResults(mainResultVal, S_va, P_w, Q_var, Phi_deg);
} else {
resetResults();
}
} catch (e) {
console.error(e);
resetResults();
}
}

// --- 6. Funzione di Visualizzazione Risultati ---
function displayResults(mainVal, S, P, Q, Phi) {
const mode = elements.calcMode.value;
const fmt = (val, dec) => val.toLocaleString('en-US', { maximumFractionDigits: dec, minimumFractionDigits: dec });

// Imposta risultato principale
switch (mode) {
case 'power':
elements.mainResultValue.innerHTML = `${fmt(mainVal, 2)} <span class="unit">kW</span>`;
elements.apparentPowerResult.innerHTML = `${fmt(S / 1000, 2)} <span class="unit">kVA</span>`;
elements.reactivePowerResult.innerHTML = `${fmt(Q / 1000, 2)} <span class="unit">kVAR</span>`;
break;
case 'current':
elements.mainResultValue.innerHTML = `${fmt(mainVal, 2)} <span class="unit">Amps</span>`;
elements.apparentPowerResult.innerHTML = `${fmt(S / 1000, 2)} <span class="unit">kVA</span>`;
elements.reactivePowerResult.innerHTML = `${fmt(Q / 1000, 2)} <span class="unit">kVAR</span>`;
break;
case 'voltage':
elements.mainResultValue.innerHTML = `${fmt(mainVal, 1)} <span class="unit">Volts</span>`;
elements.apparentPowerResult.innerHTML = `${fmt(S / 1000, 2)} <span class="unit">kVA</span>`;
elements.reactivePowerResult.innerHTML = `${fmt(Q / 1000, 2)} <span class="unit">kVAR</span>`;
break;
case 'pf':
elements.mainResultValue.innerHTML = `${fmt(mainVal, 3)} <span class="unit"></span>`;
elements.apparentPowerResult.innerHTML = `${fmt(S / 1000, 2)} <span class="unit">kVA</span>`;
elements.reactivePowerResult.innerHTML = `${fmt(Q / 1000, 2)} <span class="unit">kVAR</span>`;
break;
}
elements.angleResult.innerHTML = `${fmt(Phi, 1)} <span class="unit">°</span>`;
}

// --- 7. Funzioni di Reset ---
function resetResults() {
const mode = elements.calcMode.value;
let unit = 'kW';
if (mode === 'current') unit = 'Amps';
if (mode === 'voltage') unit = 'Volts';
if (mode === 'pf') unit = '';
elements.mainResultValue.innerHTML = `— <span class="unit">${unit}</span>`;
elements.apparentPowerResult.innerHTML = '— <span class="unit">kVA</span>';
elements.reactivePowerResult.innerHTML = '— <span class="unit">kVAR</span>';
elements.angleResult.innerHTML = '— <span class="unit">°</span>';
}

function resetForm() {
elements.calcMode.value = 'power';
elements.voltage.value = '480';
elements.voltageUnit.value = 'V';
elements.voltageTypeLL.checked = true;
elements.current.value = '25';
elements.currentUnit.value = 'A';
elements.pf.value = '0.85';
elements.powerVal.value = '10';
elements.powerUnit.value = 'kW';
updateFormUI(); // Questo chiama anche calculate()
}

// --- 8. Event Listeners ---
elements.calcMode.addEventListener('change', updateFormUI);
const allInputs = [
elements.voltage, elements.voltageUnit,
elements.current, elements.currentUnit,
elements.pf,
elements.powerVal, elements.powerUnit,
elements.voltageTypeLL, elements.voltageTypeLN
];
allInputs.forEach(input => input.addEventListener('input', calculate));
elements.resetBtn.addEventListener('click', resetForm);

// --- 9. Inizializzazione ---
updateFormUI();

// --- 10. Logica Menu Mobile (dal template) ---
const menuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
menuToggle.addEventListener('click', () => {
const isHidden = mobileMenu.classList.toggle('hidden');
menuToggle.setAttribute('aria-expanded', !isHidden);
});

// --- 11. Logica Rendering LaTeX (necessaria) ---
if (typeof renderMathInElement === 'function') {
renderMathInElement(document.body, {
delimiters: [
{left: "$$", right: "$$", display: true},
{left: "$", right: "$", display: false}
]
});
}
});


})();</script></body></html>
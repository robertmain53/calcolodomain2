<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/darcy-weisbach" />
    <title>Darcy Weisbach Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Darcy Weisbach Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Darcy Weisbach Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Darcy Weisbach Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/darcy-weisbach" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Darcy Weisbach Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Darcy Weisbach Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Darcy–Weisbach Pipe Flow Calculator (Head Loss & Pressure Drop)",
        "description": "Interactive Darcy–Weisbach pipe flow calculator for head loss, pressure drop, and friction factor. Supports SI & US units, laminar/turbulent flow, and Colebrook–White or Swamee–Jain equations.",
        "url": "https://calcdomain.com/darcy-weisbach",
        "breadcrumb": {
          "@type": "BreadcrumbList",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Home",
              "item": "https://calcdomain.com"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "Engineering",
              "item": "https://calcdomain.com/categories/engineering"
            },
            {
              "@type": "ListItem",
              "position": 3,
              "name": "Mechanical Engineering",
              "item": "https://calcdomain.com/mechanical-engineering"
            },
            {
              "@type": "ListItem",
              "position": 4,
              "name": "Darcy–Weisbach Pipe Flow Calculator",
              "item": "https://calcdomain.com/darcy-weisbach"
            }
          ]
        },
        "mainEntity": {
          "@type": "FAQPage",
          "name": "Darcy–Weisbach Calculator FAQ",
          "mainEntity": [
            {
              "@type": "Question",
              "name": "What does the Darcy–Weisbach equation calculate?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "The Darcy–Weisbach equation relates head loss or pressure drop due to friction in a pipe to the flow velocity, pipe length, diameter, fluid density, and a dimensionless friction factor. It is valid for both laminar and turbulent flow in circular pipes."
              }
            },
            {
              "@type": "Question",
              "name": "How is the friction factor f determined?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "For laminar flow (Re < 2300), the friction factor is f = 64/Re. For turbulent flow, f depends on Reynolds number and relative roughness. This calculator can use the Colebrook–White implicit equation (iterative) or the explicit Swamee–Jain correlation to estimate f."
              }
            },
            {
              "@type": "Question",
              "name": "What units can I use with this Darcy–Weisbach calculator?",
              "acceptedAnswer": {
                "@type": "At/s, psi, lb/ft³). The tool converts everything internally to SI, performs the calculations, and then converts the results back to your selected output units."
              }
            },
            {
              "@type": "Question",
              "name": "When should I use Darcy–Weisbach instead of Hazen–Williams?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Darcy–Weisbach is more general and physically based, and it can be used for any Newtonian fluid, a wide range of temperatures, and both laminar and turbulent flow. Hazen–Williams is empirical, limited mainly to water at typical temperatures and turbulent flow in pressurized pipes. For engineering design, Darcy–Weisbach is usually preferred when accurate data on fluid properties and pipe roughness are available."
              }
            }
          ]
        }
      }</script>
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Engineering Calculators", "item": "https://calcdomain.com/categories/engineering"}, {"@type": "ListItem", "position": 3, "name": "Mechanical Engineering Calculators", "item": "https://calcdomain.com/subcategories/mechanical-engineering"}, {"@type": "ListItem", "position": 4, "name": "Darcy\u2013Weisbach Pipe Flow Calculator", "item": "https://calcdomain.com/darcy-weisbach"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/engineering" class="text-blue-600 hover:underline">Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/mechanical-engineering" class="text-blue-600 hover:underline">Mechanical Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Darcy–Weisbach Pipe Flow Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Darcy–Weisbach Pipe Flow Calculator
              </h1>
              <p class="text-gray-600">
                Compute head loss, pressure drop, friction factor, and Reynolds
                number for incompressible flow in circular pipes using the
                Darcy–Weisbach equation.
              </p>
            </header>

            <section aria-label="Darcy–Weisbach Calculator" class="mb-8">
              <div class="flex flex-wrap items-center gap-3 mb-4">
                <div
                  class="inline-flex rounded-full border border-gray-200 overflow-hidden"
                >
                  <button
                    id="unit-si"
                    type="button"
                    class="px-3 py-1 text-sm font-medium bg-blue-600 text-white"
                  >
                    SI (m, Pa)
                  </button>
                  <button
                    id="unit-us"
                    type="button"
                    class="px-3 py-1 text-sm font-medium text-gray-700 bg-white"
                  >
                    US (ft, psi)
                  </button>
                </div>
                <div
                  class="inline-flex rounded-full border border-gray-200 overflow-hidden"
                >
                  <button
                    id="mode-velocity"
                    type="button"
                    class="px-3 py-1 text-sm font-medium bg-blue-600 text-white"
                  >
                    Given velocity
                  </button>
                  <button
                    id="mode-flowrate"
                    type="button"
                    class="px-3 py-1 text-sm font-medium text-gray-700 bg-white"
                  >
                    Given flow rate
                  </button>
                </div>
                <div
                  class="inline-flex rounded-full border border-gray-200 overflow-hidden"
                >
                  <button
                    id="ff-auto"
                    type="button"
                    class="px-3 py-1 text-xs md:text-sm font-medium bg-blue-600 text-white"
                  >
                    Auto f (Colebrook / Swamee–Jain)
                  </button>
                  <button
                    id="ff-manual"
                    type="button"
                    class="px-3 py-1 text-xs md:text-sm font-medium text-gray-700 bg-white"
                  >
                    Manual f
                  </button>
                </div>
              </div>

              <div class="grid md:grid-cols-3 gap-4 mb-4 text-xs text-gray-600">
                <div class="flex items-center gap-2">
                  <span
                    class="badge bg-blue-50 text-blue-700 border border-blue-100"
                    >Laminar</span
                  >
                  <span>Re &lt; 2300 → f = 64 / Re</span>
                </div>
                <div class="flex items-center gap-2">
                  <span
                    class="badge bg-amber-50 text-amber-700 border border-amber-100"
                    >Transition</span
                  >
                  <span>2300 ≤ Re ≤ 4000 (use with caution)</span>
                </div>
                <div class="flex items-center gap-2">
                  <span
                    class="badge bg-green-50 text-green-700 border border-green-100"
                    >Turbulent</span
                  >
                  <span>Re &gt; 4000 → Colebrook / Swamee–Jain</span>
                </div>
              </div>

              <div class="input-grid mb-4">
                <div>
                  <label
                    for="pipe-length"
                    class="block text-sm font-medium text-gray-700"
                    >Pipe length L</label
                  >
                  <div class="mt-1 flex">
                    <input
                      id="pipe-length"
                      type="number"
                      step="any"
                      class="flex-1 border border-gray-300 rounded-l-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                      placeholder="e.g. 50"
                    />
                    <span
                      id="label-L-unit"
                      class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-600 text-sm"
                      >m</span
                    >
                  </div>
                </div>

                <div>
                  <label
                    for="pipe-diameter"
                    class="block text-sm font-medium text-gray-700"
                    >Pipe diameter D</label
                  >
                  <div class="mt-1 flex">
                    <input
                      id="pipe-diameter"
                      type="number"
                      step="any"
                      class="flex-1 border border-gray-300 rounded-l-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                      placeholder="e.g. 0.1"
                    />
                    <span
                      id="label-D-unit"
                      class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-600 text-sm"
                      >m</span
                    >
                  </div>
                </div>

                <div id="group-velocity">
                  <label
                    for="velocity"
                    class="block text-sm font-medium text-gray-700"
                    >Mean velocity v</label
                  >
                  <div class="mt-1 flex">
                    <input
                      id="velocity"
                      type="number"
                      step="any"
                      class="flex-1 border border-gray-300 rounded-l-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                      placeholder="e.g. 2"
                    />
                    <span
                      id="label-v-unit"
                      class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-600 text-sm"
                      >m/s</span
                    >
                  </div>
                </div>

                <div id="group-flowrate" class="hidden">
                  <label
                    for="flowrate"
                    class="block text-sm font-medium text-gray-700"
                    >Volumetric flow rate Q</label
                  >
                  <div class="mt-1 flex">
                    <input
                      id="flowrate"
                      type="number"
                      step="any"
                      class="flex-1 border border-gray-300 rounded-l-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                      placeholder="e.g. 0.01"
                    />
                    <span
                      id="label-Q-unit"
                      class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-600 text-sm"
                      >m³/s</span
                    >
                  </div>
                </div>

                <div>
                  <label
                    for="roughness"
                    class="block text-sm font-medium text-gray-700"
                    >Absolute roughness ε</label
                  >
                  <div class="mt-1 flex">
                    <input
                      id="roughness"
                      type="number"
                      step="any"
                      class="flex-1 border border-gray-300 rounded-l-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                      placeholder="e.g. 0.00015"
                    />
                    <span
                      id="label-eps-unit"
                      class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-600 text-sm"
                      >m</span
                    >
                  </div>
                  <p class="mt-1 text-xs text-gray-500">
                    Typical: 0.0000015 (drawn copper), 0.00026 (commercial
                    steel).
                  </p>
                </div>

                <div>
                  <label
                    for="density"
                    class="block text-sm font-medium text-gray-700"
                    >Fluid density ρ</label
                  >
                  <div class="mt-1 flex">
                    <input
                      id="density"
                      type="number"
                      step="any"
                      class="flex-1 border border-gray-300 rounded-l-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                      placeholder="e.g. 998"
                    />
                    <span
                      id="label-rho-unit"
                      class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-600 text-sm"
                      >kg/m³</span
                    >
                  </div>
                  <p class="mt-1 text-xs text-gray-500">
                    Water at 20°C ≈ 998 kg/m³ (62.3 lb/ft³).
                  </p>
                </div>

                <div>
                  <label
                    for="viscosity"
                    class="block text-sm font-medium text-gray-700"
                    >Dynamic viscosity μ</label
                  >
                  <div class="mt-1 flex">
                    <input
                      id="viscosity"
                      type="number"
                      step="any"
                      class="flex-1 border border-gray-300 rounded-l-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                      placeholder="e.g. 0.001"
                    />
                    <span
                      id="label-mu-unit"
                      class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-600 text-sm"
                      >Pa·s</span
                    >
                  </div>
                  <p class="mt-1 text-xs text-gray-500">
                    Water at 20°C ≈ 0.001 Pa·s (1 cP).
                  </p>
                </div>

                <div id="group-manual-f" class="hidden">
                  <label
                    for="friction-factor"
                    class="block text-sm font-medium text-gray-700"
                    >Friction factor f (Darcy)</label
                  >
                  <input
                    id="friction-factor"
                    type="number"
                    step="any"
                    class="mt-1 w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                    placeholder="e.g. 0.02"
                  />
                  <p class="mt-1 text-xs text-gray-500">
                    Use if you already know f from charts or manufacturer data.
                  </p>
                </div>

                <div>
                  <label
                    for="g-accel"
                    class="block text-sm font-medium text-gray-700"
                    >Gravity g</label
                  >
                  <div class="mt-1 flex">
                    <input
                      id="g-accel"
                      type="number"
                      step="any"
                      class="flex-1 border border-gray-300 rounded-l-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                      value="9.81"
                    />
                    <span
                      id="label-g-unit"
                      class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-600 text-sm"
                      >m/s²</span
                    >
                  </div>
                </div>
              </div>

              <div class="flex flex-wrap gap-3 mb-4">
                <button
                  id="btn-calc"
                  type="button"
                  class="inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500"
                >
                  Calculate
                </button>
                <button
                  id="btn-reset"
                  type="button"
                  class="inline-flex items-center justify-center px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-gray-400"
                >
                  Reset
                </button>
              </div>

              <div
                id="calc-warning"
                class="hidden mb-4 text-xs text-amber-700 bg-amber-50 border border-amber-200 rounded-md px-3 py-2"
              ></div>
              <div
                id="calc-error"
                class="hidden mb-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded-md px-3 py-2"
              ></div>

              <div
                id="results-card"
                class="mt-4 p-4 border border-gray-200 rounded-lg bg-gray-50 hidden"
              >
                <h2 class="text-lg font-semibold mb-2">Results</h2>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                  <div>
                    <p>
                      <span class="font-medium">Reynolds number Re:</span>
                      <span id="res-Re" class="ml-1"></span>
                    </p>
                    <p>
                      <span class="font-medium">Flow regime:</span>
                      <span id="res-regime" class="ml-1"></span>
                    </p>
                    <p>
                      <span class="font-medium"
                        >Friction factor f (Darcy):</span
                      >
                      <span id="res-f" class="ml-1"></span>
                    </p>
                    <p>
                      <span class="font-medium">Mean velocity v:</span>
                      <span id="res-v" class="ml-1"></span>
                      <span id="res-v-unit" class="text-gray-500"></span>
                    </p>
                    <p>
                      <span class="font-medium">Flow rate Q:</span>
                      <span id="res-Q" class="ml-1"></span>
                      <span id="res-Q-unit" class="text-gray-500"></span>
                    </p>
                  </div>
                  <div>
                    <p>
                      <span class="font-medium">Head loss h<sub>f</sub>:</span>
                      <span id="res-hf" class="ml-1"></span>
                      <span id="res-hf-unit" class="text-gray-500"></span>
                    </p>
                    <p>
                      <span class="font-medium">Pressure drop ΔP:</span>
                      <span id="res-dp" class="ml-1"></span>
                      <span id="res-dp-unit" class="text-gray-500"></span>
                    </p>
                    <p>
                      <span class="font-medium">Specific energy loss:</span>
                      <span id="res-es" class="ml-1"></span>
                      <span id="res-es-unit" class="text-gray-500"></span>
                    </p>
                  </div>
                </div>
                <p class="mt-3 text-xs text-gray-500">
                  Note: This calculator uses the Darcy friction factor (not
                  Fanning). For turbulent flow, it uses Colebrook–White
                  iteration with Swamee–Jain as an initial guess.
                </p>
              </div>
            </section>

            <section class="prose">
              <h2>Darcy–Weisbach equation overview</h2>
              <p>
                The Darcy–Weisbach equation is a fundamental relation in fluid
                mechanics used to compute the head loss or pressure drop due to
                friction in a pipe:
              </p>
              <div class="formula-box">
                <p>Head loss due to friction:</p>
                <p>\[ h_f = f \, \frac{L}{D} \, \frac{v^2}{2g} \]</p>
                <p>Pressure drop:</p>
                <p>
                  \[ \Delta P = \rho g h_f = f \, \frac{L}{D} \, \frac{\rho
                  v^2}{2} \]
                </p>
                <p>where:</p>
                <ul>
                  <li>\(h_f\) = head loss (m or ft)</li>
                  <li>\(\Delta P\) = pressure drop (Pa or psi)</li>
                  <li>\(f\) = Darcy friction factor (dimensionless)</li>
                  <li>\(L\) = pipe length (m or ft)</li>
                  <li>\(D\) = pipe diameter (m or ft)</li>
                  <li>\(v\) = mean flow velocity (m/s or ft/s)</li>
                  <li>\(g\) = gravitational acceleration (m/s² or ft/s²)</li>
                  <li>\(\rho\) = fluid density (kg/m³ or lb/ft³)</li>
                </ul>
              </div>

              <h2>Reynolds number and flow regime</h2>
              <p>
                The friction factor depends on the Reynolds number \(Re\) and
                the relative roughness \(\varepsilon / D\).
              </p>
              <div class="formula-box">
                <p>Reynolds number:</p>
                <p>\[ Re = \frac{\rho v D}{\mu} \]</p>
                <ul>
                  <li>\(Re &lt; 2300\): laminar flow</li>
                  <li>\(2300 \le Re \le 4000\): transitional flow</li>
                  <li>\(Re &gt; 4000\): fully turbulent flow</li>
                </ul>
              </div>

              <h3>Friction factor correlations</h3>
              <p><strong>Laminar flow</strong> (\(Re &lt; 2300\)):</p>
              <div class="formula-box">
                <p>\[ f = \frac{64}{Re} \]</p>
              </div>

              <p><strong>Turbulent flow</strong> (this calculator):</p>
              <ul>
                <li>
                  <strong>Colebrook–White equation</strong> (implicit, solved
                  iteratively):
                  <div class="formula-box">
                    \[ \frac{1}{\sqrt{f}} = -2 \log_{10}\left(
                    \frac{\varepsilon/D}{3.7} + \frac{2.51}{Re \sqrt{f}} \right)
                    \]
                  </div>
                </li>
                <li>
                  <strong>Swamee–Jain correlation</strong> (explicit
                  approximation, used as initial guess):
                  <div class="formula-box">
                    \[ f = \frac{0.25}{\left[ \log_{10}\left(
                    \frac{\varepsilon/D}{3.7} + \frac{5.74}{Re^{0.9}} \right)
                    \right]^2} \]
                  </div>
                </li>
              </ul>

              <h2>How to use this Darcy–Weisbach calculator</h2>
              <ol>
                <li>
                  Select your preferred unit system: SI (m, Pa) or US (ft, psi).
                </li>
                <li>
                  Choose whether you know the <strong>velocity</strong> or the
                  <strong>flow rate</strong>. The tool will compute the other
                  from pipe diameter.
                </li>
                <li>
                  Enter pipe length \(L\), diameter \(D\), and absolute
                  roughness \(\varepsilon\).
                </li>
                <li>
                  Specify fluid density \(\rho\) and dynamic viscosity \(\mu\).
                  For water at 20°C, defaults are approximately 998 kg/m³ and
                  0.001 Pa·s.
                </li>
                <li>
                  Optionally, override gravity \(g\) if you are modeling
                  non‑Earth conditions.
                </li>
                <li>
                  Click <strong>Calculate</strong> to obtain Reynolds number,
                  friction factor, head loss, and pressure drop.
                </li>
              </ol>

              <h2>Typical absolute roughness values</h2>
              <table class="w-full text-sm border border-gray-200 mt-2">
                <thead class="bg-gray-100">
                  <tr>
                    <th class="border border-gray-200 px-2 py-1 text-left">
                      Pipe material
                    </th>
                    <th class="border border-gray-200 px-2 py-1 text-left">
                      ε (m)
                    </th>
                    <th class="border border-gray-200 px-2 py-1 text-left">
                      ε (ft)
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="border border-gray-200 px-2 py-1">
                      Drawn copper, brass
                    </td>
                    <td class="border border-gray-200 px-2 py-1">1.5×10⁻⁶</td>
                    <td class="border border-gray-200 px-2 py-1">4.9×10⁻⁶</td>
                  </tr>
                  <tr>
                    <td class="border border-gray-200 px-2 py-1">
                      Commercial steel
                    </td>
                    <td class="border border-gray-200 px-2 py-1">4.6×10⁻⁵</td>
                    <td class="border border-gray-200 px-2 py-1">1.5×10⁻⁴</td>
                  </tr>
                  <tr>
                    <td class="border border-gray-200 px-2 py-1">
                      Cast iron (new)
                    </td>
                    <td class="border border-gray-200 px-2 py-1">2.6×10⁻⁴</td>
                    <td class="border border-gray-200 px-2 py-1">8.5×10⁻⁴</td>
                  </tr>
                  <tr>
                    <td class="border border-gray-200 px-2 py-1">
                      Concrete (smooth)
                    </td>
                    <td class="border border-gray-200 px-2 py-1">3.0×10⁻⁴</td>
                    <td class="border border-gray-200 px-2 py-1">1.0×10⁻³</td>
                  </tr>
                  <tr>
                    <td class="border border-gray-200 px-2 py-1">PVC, HDPE</td>
                    <td class="border border-gray-200 px-2 py-1">
                      1.5×10⁻⁶–7.0×10⁻⁶
                    </td>
                    <td class="border border-gray-200 px-2 py-1">
                      5×10⁻⁶–2.3×10⁻⁵
                    </td>
                  </tr>
                </tbody>
              </table>

              <h2>Darcy–Weisbach vs. Hazen–Williams</h2>
              <p>
                The Hazen–Williams equation is widely used in water distribution
                design, but it is empirical and limited to water at typical
                temperatures and turbulent flow. The Darcy–Weisbach equation:
              </p>
              <ul>
                <li>
                  Is based on fundamental principles and dimensionless groups.
                </li>
                <li>
                  Works for any Newtonian fluid (water, oils, chemicals, gases
                  at moderate Mach numbers).
                </li>
                <li>Handles both laminar and turbulent regimes.</li>
                <li>
                  Explicitly accounts for pipe roughness and fluid viscosity.
                </li>
              </ul>
              <p>
                For critical design, non‑water fluids, or unusual temperatures,
                Darcy–Weisbach is generally preferred.
              </p>

              <h2>Limitations and assumptions</h2>
              <ul>
                <li>
                  Incompressible, steady, fully developed flow in a straight,
                  circular pipe.
                </li>
                <li>
                  No significant local losses from fittings, valves, entrances,
                  or exits (you can add those separately using loss coefficients
                  \(K\)).
                </li>
                <li>
                  Single‑phase Newtonian fluid (no slurries, multiphase, or
                  non‑Newtonian behavior).
                </li>
                <li>
                  For very rough pipes or extremely high Reynolds numbers,
                  empirical correlations may have additional uncertainty.
                </li>
              </ul>
            </section>

            <section class="mt-8">
              <h2 class="text-xl font-semibold mb-3">
                Darcy–Weisbach Calculator FAQ
              </h2>
              <div class="space-y-3" id="faq-container">
                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="w-full text-left px-3 py-2 flex justify-between items-center faq-question"
                  >
                    <span class="font-medium text-sm"
                      >What does the Darcy–Weisbach equation calculate?</span
                    >
                    <span class="text-gray-500 text-xs">+</span>
                  </button>
                  <div
                    class="px-3 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    It relates the energy loss (head loss) or pressure drop due
                    to friction in a pipe to the flow velocity, pipe length,
                    diameter, fluid density, and friction factor. Engineers use
                    it to size pipes, estimate pump head requirements, and
                    compare alternative pipe materials.
                  </div>
                </div>
                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="w-full text-left px-3 py-2 flex justify-between items-center faq-question"
                  >
                    <span class="font-medium text-sm"
                      >How is the friction factor f determined in this
                      tool?</span
                    >
                    <span class="text-gray-500 text-xs">+</span>
                  </button>
                  <div
                    class="px-3 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    The calculator first computes the Reynolds number. For
                    laminar flow (Re &lt; 2300), it uses f = 64/Re. For
                    turbulent flow, it uses the explicit Swamee–Jain formula as
                    an initial guess and then iteratively solves the
                    Colebrook–White equation until convergence. You can also
                    override f manually if you have it from a Moody chart or
                    manufacturer data.
                  </div>
                </div>
                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="w-full text-left px-3 py-2 flex justify-between items-center faq-question"
                  >
                    <span class="font-medium text-sm"
                      >Can I include minor (local) losses from fittings and
                      valves?</span
                    >
                    <span class="text-gray-500 text-xs">+</span>
                  </button>
                  <div
                    class="px-3 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    This calculator focuses on frictional losses along a
                    straight pipe. To include minor losses, compute the
                    equivalent head loss using h<sub>m</sub> = K·v²/(2g) for
                    each fitting, sum them, and add to the frictional head loss
                    h<sub>f</sub> from this tool to get the total head loss.
                  </div>
                </div>
                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="w-full text-left px-3 py-2 flex justify-between items-center faq-question"
                  >
                    <span class="font-medium text-sm"
                      >Is the friction factor here Darcy or Fanning?</span
                    >
                    <span class="text-gray-500 text-xs">+</span>
                  </button>
                  <div
                    class="px-3 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    This calculator uses the Darcy friction factor, which is
                    four times the Fanning friction factor. If you have a
                    Fanning factor f<sub>F</sub>, convert it using f = 4·f<sub
                      >F</sub
                    >
                    before entering it manually.
                  </div>
                </div>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Darcy, Weisbach.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Mechanical Engineering Tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/hazen-williams"
                  class="text-blue-600 hover:underline"
                  >Pipe Flow Calculator (Hazen–Williams)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pipe-sizing"
                  class="text-blue-600 hover:underline"
                  >Pipe Sizing Calculator (for water)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/heat-transfer"
                  class="text-blue-600 hover:underline"
                  >Heat Transfer Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pump-sizing"
                  class="text-blue-600 hover:underline"
                  >Pump Sizing Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/hvac-tonnage"
                  class="text-blue-600 hover:underline"
                  >HVAC Tonnage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/hazen-williams"
                  class="text-gray-500 text-xs italic cursor-default"
                  >More pipe flow tools coming soon…</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">
              Explore Engineering Calculators
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/hazen-williams"
                  class="text-blue-600 hover:underline"
                  >Pipe Flow (Hazen–Williams)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/heat-loss"
                  class="text-blue-600 hover:underline"
                  >Heat Loss Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/reynolds-number"
                  class="text-blue-600 hover:underline"
                  >Reynolds Number Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bernoulli-equation"
                  class="text-blue-600 hover:underline"
                  >Bernoulli’s Equation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/categories/engineering"
                  class="text-blue-600 hover:underline"
                  >All Engineering Calculators</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Unit system and mode state
      let unitSystem = "SI"; // 'SI' or 'US'
      let mode = "velocity"; // 'velocity' or 'flowrate'
      let ffMode = "auto"; // 'auto' or 'manual'

      const els = {
        unitSi: document.getElementById("unit-si"),
        unitUs: document.getElementById("unit-us"),
        modeVelocity: document.getElementById("mode-velocity"),
        modeFlowrate: document.getElementById("mode-flowrate"),
        ffAuto: document.getElementById("ff-auto"),
        ffManual: document.getElementById("ff-manual"),
        groupVelocity: document.getElementById("group-velocity"),
        groupFlowrate: document.getElementById("group-flowrate"),
        groupManualF: document.getElementById("group-manual-f"),
        L: document.getElementById("pipe-length"),
        D: document.getElementById("pipe-diameter"),
        v: document.getElementById("velocity"),
        Q: document.getElementById("flowrate"),
        eps: document.getElementById("roughness"),
        rho: document.getElementById("density"),
        mu: document.getElementById("viscosity"),
        fManual: document.getElementById("friction-factor"),
        g: document.getElementById("g-accel"),
        labelL: document.getElementById("label-L-unit"),
        labelD: document.getElementById("label-D-unit"),
        labelV: document.getElementById("label-v-unit"),
        labelQ: document.getElementById("label-Q-unit"),
        labelEps: document.getElementById("label-eps-unit"),
        labelRho: document.getElementById("label-rho-unit"),
        labelMu: document.getElementById("label-mu-unit"),
        labelG: document.getElementById("label-g-unit"),
        btnCalc: document.getElementById("btn-calc"),
        btnReset: document.getElementById("btn-reset"),
        warning: document.getElementById("calc-warning"),
        error: document.getElementById("calc-error"),
        resultsCard: document.getElementById("results-card"),
        resRe: document.getElementById("res-Re"),
        resRegime: document.getElementById("res-regime"),
        resF: document.getElementById("res-f"),
        resV: document.getElementById("res-v"),
        resVUnit: document.getElementById("res-v-unit"),
        resQ: document.getElementById("res-Q"),
        resQUnit: document.getElementById("res-Q-unit"),
        resHf: document.getElementById("res-hf"),
        resHfUnit: document.getElementById("res-hf-unit"),
        resDp: document.getElementById("res-dp"),
        resDpUnit: document.getElementById("res-dp-unit"),
        resEs: document.getElementById("res-es"),
        resEsUnit: document.getElementById("res-es-unit"),
      };

      function setUnitSystem(system) {
        unitSystem = system;
        if (system === "SI") {
          els.unitSi.classList.add("bg-blue-600", "text-white");
          els.unitSi.classList.remove("bg-white", "text-gray-700");
          els.unitUs.classList.add("bg-white", "text-gray-700");
          els.unitUs.classList.remove("bg-blue-600", "text-white");

          els.labelL.textContent = "m";
          els.labelD.textContent = "m";
          els.labelV.textContent = "m/s";
          els.labelQ.textContent = "m³/s";
          els.labelEps.textContent = "m";
          els.labelRho.textContent = "kg/m³";
          els.labelMu.textContent = "Pa·s";
          els.labelG.textContent = "m/s²";

          els.g.value = 9.81;
          els.resVUnit.textContent = "m/s";
          els.resQUnit.textContent = "m³/s";
          els.resHfUnit.textContent = "m";
          els.resDpUnit.textContent = "Pa";
          els.resEsUnit.textContent = "J/kg";
        } else {
          els.unitUs.classList.add("bg-blue-600", "text-white");
          els.unitUs.classList.remove("bg-white", "text-gray-700");
          els.unitSi.classList.add("bg-white", "text-gray-700");
          els.unitSi.classList.remove("bg-blue-600", "text-white");

          els.labelL.textContent = "ft";
          els.labelD.textContent = "ft";
          els.labelV.textContent = "ft/s";
          els.labelQ.textContent = "ft³/s";
          els.labelEps.textContent = "ft";
          els.labelRho.textContent = "lb/ft³";
          els.labelMu.textContent = "lb/(ft·s)";
          els.labelG.textContent = "ft/s²";

          els.g.value = 32.174;
          els.resVUnit.textContent = "ft/s";
          els.resQUnit.textContent = "ft³/s";
          els.resHfUnit.textContent = "ft";
          els.resDpUnit.textContent = "psi";
          els.resEsUnit.textContent = "ft·lbf/lbm";
        }
      }

      function setMode(newMode) {
        mode = newMode;
        if (mode === "velocity") {
          els.modeVelocity.classList.add("bg-blue-600", "text-white");
          els.modeVelocity.classList.remove("bg-white", "text-gray-700");
          els.modeFlowrate.classList.add("bg-white", "text-gray-700");
          els.modeFlowrate.classList.remove("bg-blue-600", "text-white");
          els.groupVelocity.classList.remove("hidden");
          els.groupFlowrate.classList.add("hidden");
        } else {
          els.modeFlowrate.classList.add("bg-blue-600", "text-white");
          els.modeFlowrate.classList.remove("bg-white", "text-gray-700");
          els.modeVelocity.classList.add("bg-white", "text-gray-700");
          els.modeVelocity.classList.remove("bg-blue-600", "text-white");
          els.groupFlowrate.classList.remove("hidden");
          els.groupVelocity.classList.add("hidden");
        }
      }

      function setFrictionMode(modeF) {
        ffMode = modeF;
        if (ffMode === "auto") {
          els.ffAuto.classList.add("bg-blue-600", "text-white");
          els.ffAuto.classList.remove("bg-white", "text-gray-700");
          els.ffManual.classList.add("bg-white", "text-gray-700");
          els.ffManual.classList.remove("bg-blue-600", "text-white");
          els.groupManualF.classList.add("hidden");
        } else {
          els.ffManual.classList.add("bg-blue-600", "text-white");
          els.ffManual.classList.remove("bg-white", "text-gray-700");
          els.ffAuto.classList.add("bg-white", "text-gray-700");
          els.ffAuto.classList.remove("bg-blue-600", "text-white");
          els.groupManualF.classList.remove("hidden");
        }
      }

      els.unitSi.addEventListener("click", () => setUnitSystem("SI"));
      els.unitUs.addEventListener("click", () => setUnitSystem("US"));
      els.modeVelocity.addEventListener("click", () => setMode("velocity"));
      els.modeFlowrate.addEventListener("click", () => setMode("flowrate"));
      els.ffAuto.addEventListener("click", () => setFrictionMode("auto"));
      els.ffManual.addEventListener("click", () => setFrictionMode("manual"));

      function showError(msg) {
        els.error.textContent = msg;
        els.error.classList.remove("hidden");
        els.warning.classList.add("hidden");
        els.resultsCard.classList.add("hidden");
      }

      function showWarning(msg) {
        els.warning.textContent = msg;
        els.warning.classList.remove("hidden");
      }

      function clearMessages() {
        els.error.classList.add("hidden");
        els.warning.classList.add("hidden");
      }

      function formatNumber(val, decimals = 4) {
        if (!isFinite(val)) return "—";
        if (
          Math.abs(val) >= 1e4 ||
          (Math.abs(val) > 0 && Math.abs(val) < 1e-3)
        ) {
          return val.toExponential(3);
        }
        return val.toFixed(decimals);
      }

      function colebrookWhite(Re, relRough) {
        if (Re <= 0) return NaN;
        // Initial guess via Swamee–Jain
        let f = 0.02;
        if (Re > 2000) {
          const term = relRough / 3.7 + 5.74 / Math.pow(Re, 0.9);
          f = 0.25 / Math.pow(Math.log10(term), 2);
        }
        for (let i = 0; i < 20; i++) {
          const invSqrtF = 1 / Math.sqrt(f);
          const rhs =
            -2.0 * Math.log10(relRough / 3.7 + 2.51 / (Re * Math.sqrt(f)));
          const diff = invSqrtF - rhs;
          if (Math.abs(diff) < 1e-6) break;
          // Numerical derivative approximation
          const df = 1e-6;
          const f2 = f + df;
          const invSqrtF2 = 1 / Math.sqrt(f2);
          const rhs2 =
            -2.0 * Math.log10(relRough / 3.7 + 2.51 / (Re * Math.sqrt(f2)));
          const diff2 = invSqrtF2 - rhs2;
          const dFdF = (diff2 - diff) / df;
          f = f - diff / dFdF;
          if (f <= 0) {
            f = 1e-4;
          }
        }
        return f;
      }

      function calculate() {
        clearMessages();

        const L = parseFloat(els.L.value);
        const D = parseFloat(els.D.value);
        const eps = parseFloat(els.eps.value);
        const rhoInput = parseFloat(els.rho.value);
        const muInput = parseFloat(els.mu.value);
        const gInput = parseFloat(els.g.value);
        const fManual = parseFloat(els.fManual.value);

        if (!(L > 0 && D > 0 && rhoInput > 0 && muInput > 0 && gInput > 0)) {
          showError(
            "Please enter positive values for length, diameter, density, viscosity, and gravity."
          );
          return;
        }

        let vInput = parseFloat(els.v.value);
        let QInput = parseFloat(els.Q.value);

        if (mode === "velocity") {
          if (!(vInput > 0)) {
            showError("Please enter a positive velocity.");
            return;
          }
        } else {
          if (!(QInput > 0)) {
            showError("Please enter a positive flow rate.");
            return;
          }
        }

        // Convert to SI for internal calculations
        let Lm, Dm, epsm, rhom, mum, gSI, vSI, QSI;
        if (unitSystem === "SI") {
          Lm = L;
          Dm = D;
          epsm = eps;
          rhom = rhoInput;
          mum = muInput;
          gSI = gInput;
          if (mode === "velocity") {
            vSI = vInput;
            QSI = (Math.PI * Math.pow(Dm, 2) * vSI) / 4;
          } else {
            QSI = QInput;
            vSI = (4 * QSI) / (Math.PI * Math.pow(Dm, 2));
          }
        } else {
          // US units to SI
          const ftToM = 0.3048;
          const lbft3ToKgm3 = 16.018463;
          const lbftsToPas = 1.4881639;
          const ft3sToM3s = Math.pow(ftToM, 3);
          const ftpsToMps = ftToM;
          const ftps2ToMps2 = ftToM;

          Lm = L * ftToM;
          Dm = D * ftToM;
          epsm = eps * ftToM;
          rhom = rhoInput * lbft3ToKgm3;
          mum = muInput * lbftsToPas;
          gSI = gInput * ftps2ToMps2;

          if (mode === "velocity") {
            vSI = vInput * ftpsToMps;
            QSI = (Math.PI * Math.pow(Dm, 2) * vSI) / 4;
          } else {
            QSI = QInput * ft3sToM3s;
            vSI = (4 * QSI) / (Math.PI * Math.pow(Dm, 2));
          }
        }

        if (!(vSI > 0)) {
          showError("Computed velocity is not positive. Check your inputs.");
          return;
        }

        const Re = (rhom * vSI * Dm) / mum;
        let regime = "Transitional";
        if (Re < 2300) regime = "Laminar";
        else if (Re > 4000) regime = "Turbulent";

        let f;
        if (ffMode === "manual") {
          if (!(fManual > 0)) {
            showError("Please enter a positive friction factor f.");
            return;
          }
          f = fManual;
        } else {
          if (Re < 2300) {
            f = 64 / Re;
          } else {
            const relRough = epsm > 0 ? epsm / Dm : 0;
            f = colebrookWhite(Re, relRough);
          }
        }

        const hf = (f * (Lm / Dm) * (vSI * vSI)) / (2 * gSI);
        const dP = rhom * gSI * hf; // Pa
        const eSpecific = (vSI * vSI) / 2 + gSI * hf; // J/kg (approx specific energy loss due to friction)

        // Convert results back to selected units
        let vOut, QOut, hfOut, dPOut, eOut;
        if (unitSystem === "SI") {
          vOut = vSI;
          QOut = QSI;
          hfOut = hf;
          dPOut = dP;
          eOut = eSpecific;
        } else {
          const mpsToFtps = 1 / 0.3048;
          const m3sToFt3s = 1 / Math.pow(0.3048, 3);
          const mToFt = 1 / 0.3048;
          const PaToPsi = 0.0001450377;
          const JkgToFtLbfLbm = 0.737562; // approx

          vOut = vSI * mpsToFtps;
          QOut = QSI * m3sToFt3s;
          hfOut = hf * mToFt;
          dPOut = dP * PaToPsi;
          eOut = eSpecific * JkgToFtLbfLbm;
        }

        // Populate results
        els.resRe.textContent = formatNumber(Re, 0);
        els.resRegime.textContent = regime;
        els.resF.textContent = formatNumber(f, 5);
        els.resV.textContent = formatNumber(vOut, 4);
        els.resQ.textContent = formatNumber(QOut, 6);
        els.resHf.textContent = formatNumber(hfOut, 4);
        els.resDp.textContent = formatNumber(dPOut, 4);
        els.resEs.textContent = formatNumber(eOut, 4);

        if (Re > 2300 && Re < 4000) {
          showWarning(
            "Flow is in the transitional regime (2300 ≤ Re ≤ 4000). Friction factor correlations are less reliable here."
          );
        }

        els.resultsCard.classList.remove("hidden");
      }

      function resetForm() {
        els.L.value = "";
        els.D.value = "";
        els.v.value = "";
        els.Q.value = "";
        els.eps.value = "";
        els.rho.value = unitSystem === "SI" ? "998" : "62.3";
        els.mu.value = unitSystem === "SI" ? "0.001" : "0.000672";
        els.fManual.value = "";
        els.g.value = unitSystem === "SI" ? 9.81 : 32.174;
        clearMessages();
        els.resultsCard.classList.add("hidden");
      }

      els.btnCalc.addEventListener("click", calculate);
      els.btnReset.addEventListener("click", resetForm);

      // FAQ toggle (simple, in addition to global script_faq if any)
      document
        .querySelectorAll("#faq-container .faq-question")
        .forEach((btn) => {
          btn.addEventListener("click", () => {
            const ans = btn.parentElement.querySelector(".faq-answer");
            const icon = btn.querySelector("span:last-child");
            const isHidden = ans.classList.contains("hidden");
            document
              .querySelectorAll("#faq-container .faq-answer")
              .forEach((a) => a.classList.add("hidden"));
            document
              .querySelectorAll("#faq-container .faq-question span:last-child")
              .forEach((i) => (i.textContent = "+"));
            if (isHidden) {
              ans.classList.remove("hidden");
              icon.textContent = "−";
            }
          });
        });

      // Initialize defaults
      setUnitSystem("SI");
      setMode("velocity");
      setFrictionMode("auto");
      resetForm();
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/wash-sale-rule" />
    <title>Wash Sale Rule Calculator: [Insider 2024] | CalcDomain</title>
    <meta name="description" content="Calculate Wash Sale Rule Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Wash Sale Rule Calculator: [Insider 2024] | CalcDomain" />
    <meta property="og:description" content="Calculate Wash Sale Rule Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/wash-sale-rule" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Wash Sale Rule Calculator: [Insider 2024] | CalcDomain" />
    <meta name="twitter:description" content="Calculate Wash Sale Rule Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "Taxes Calculators", "item": "https://calcdomain.com/subcategories/taxes"}, {"@type": "ListItem", "position": 4, "name": "Wash Sale Rule Calculator", "item": "https://calcdomain.com/wash-sale-rule"}]}</script>
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/taxes" class="text-blue-600 hover:underline">Taxes Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Wash Sale Rule Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Wash Sale Rule Calculator
              </h1>
              <p class="text-gray-600">
                Check if your recent trades trigger the IRS wash sale rule, see
                how much loss is disallowed, and how your cost basis is
                adjusted.
              </p>
              <p class="mt-2 text-xs text-gray-500">
                For U.S. federal income tax education only. This tool does not
                provide tax, legal, or investment advice.
              </p>
            </header>

            <!-- Calculator UI -->
            <section
              aria-labelledby="wash-sale-calculator-heading"
              class="mb-8"
            >
              <h2
                id="wash-sale-calculator-heading"
                class="text-xl font-semibold mb-3"
              >
                Wash Sale Rule Checker
              </h2>

              <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                  <label
                    class="block text-sm font-medium text-gray-700 mb-1"
                    for="tax-year"
                    >Tax year</label
                  >
                  <input
                    id="tax-year"
                    type="number"
                    min="2000"
                    max="2100"
                    value="2025"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  />
                </div>
                <div class="flex items-end gap-2">
                  <button
                    id="add-sale-btn"
                    type="button"
                    class="inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700"
                  >
                    + Add loss sale
                  </button>
                  <button
                    id="add-purchase-btn"
                    type="button"
                    class="inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-md bg-emerald-600 text-white hover:bg-emerald-700"
                  >
                    + Add purchase
                  </button>
                </div>
              </div>

              <div class="table-scroll mb-4">
                <table class="min-w-full text-xs border border-gray-200">
                  <thead class="bg-gray-100">
                    <tr>
                      <th
                        class="px-2 py-2 text-left font-semibold border-b sticky-col"
                      >
                        Type
                      </th>
                      <th class="px-2 py-2 text-left font-semibold border-b">
                        Ticker
                      </th>
                      <th class="px-2 py-2 text-left font-semibold border-b">
                        Date
                      </th>
                      <th class="px-2 py-2 text-right font-semibold border-b">
                        Quantity
                      </th>
                      <th class="px-2 py-2 text-right font-semibold border-b">
                        Price / share ($)
                      </th>
                      <th class="px-2 py-2 text-right font-semibold border-b">
                        Cost / share ($)<br /><span
                          class="text-[10px] text-gray-500"
                          >sales only</span
                        >
                      </th>
                      <th class="px-2 py-2 text-right font-semibold border-b">
                        Total ($)
                      </th>
                      <th class="px-2 py-2 text-center font-semibold border-b">
                        Actions
                      </th>
                    </tr>
                  </thead>
                  <tbody id="trades-body">
                    <!-- Rows injected by JS -->
                  </tbody>
                </table>
              </div>

              <div class="flex flex-wrap items-center gap-3 mb-4">
                <button
                  id="calculate-btn"
                  type="button"
                  class="inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-md bg-blue-600 text-white hover:bg-blue-700"
                >
                  Calculate wash sales
                </button>
                <button
                  id="clear-all-btn"
                  type="button"
                  class="inline-flex items-center justify-center px-3 py-2 text-xs font-medium rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50"
                >
                  Clear all trades
                </button>
                <span id="status-message" class="text-xs text-gray-500"></span>
              </div>

              <div
                id="results-summary"
                class="hidden mb-4 p-3 rounded-md bg-blue-50 border border-blue-100 text-sm"
              >
                <p class="font-semibold mb-1">Summary</p>
                <ul
                  class="list-disc list-inside text-gray-700 space-y-0.5"
                  id="results-summary-list"
                ></ul>
              </div>

              <div id="results-details" class="hidden">
                <h3 class="text-lg font-semibold mb-2">Wash sale details</h3>
                <div class="table-scroll mb-3">
                  <table class="min-w-full text-xs border border-gray-200">
                    <thead class="bg-gray-100">
                      <tr>
                        <th class="px-2 py-2 text-left font-semibold border-b">
                          Ticker
                        </th>
                        <th class="px-2 py-2 text-left font-semibold border-b">
                          Loss sale date
                        </th>
                        <th class="px-2 py-2 text-right font-semibold border-b">
                          Loss realized ($)
                        </th>
                        <th class="px-2 py-2 text-right font-semibold border-b">
                          Loss disallowed ($)
                        </th>
                        <th class="px-2 py-2 text-right font-semibold border-b">
                          Loss allowed now ($)
                        </th>
                        <th class="px-2 py-2 text-right font-semibold border-b">
                          Replacement shares
                        </th>
                        <th class="px-2 py-2 text-right font-semibold border-b">
                          Adj. basis / share ($)
                        </th>
                        <th class="px-2 py-2 text-left font-semibold border-b">
                          Notes
                        </th>
                      </tr>
                    </thead>
                    <tbody id="results-body">
                      <!-- Filled by JS -->
                    </tbody>
                  </table>
                </div>
                <p class="text-[11px] text-gray-500">
                  This tool assumes replacement shares are purchased in taxable
                  accounts and that all trades are in the same security (no
                  options). Complex situations may require professional tax
                  advice.
                </p>
              </div>
            </section>

            <section class="prose text-sm">
              <h2>How this wash sale rule calculator works</h2>
              <p>
                The calculator looks for <strong>loss sales</strong> and then
                scans for <strong>purchases of the same ticker</strong> within
                the <strong>61‑day wash sale window</strong> (30 days before the
                sale, the sale date, and 30 days after).
              </p>
              <p>For each loss sale, it:</p>
              <ol>
                <li>
                  Computes your realized loss:
                  <code>(sale price − cost basis) × shares sold</code>.
                </li>
                <li>
                  Counts how many replacement shares you bought in the 61‑day
                  window.
                </li>
                <li>
                  Disallows the loss on the smaller of:
                  <ul>
                    <li>shares sold at a loss, and</li>
                    <li>replacement shares purchased in the window.</li>
                  </ul>
                </li>
                <li>
                  Allocates the disallowed loss to the replacement shares by
                  increasing their cost basis.
                </li>
              </ol>

              <div class="formula-box text-sm">
                <p class="font-semibold mb-1">Key formulas</p>
                <p><strong>Realized loss</strong> (before wash sale):</p>
                <p>
                  \(\text{Loss} = (\text{Sale price} - \text{Cost basis}) \times
                  \text{Shares sold}\)
                </p>
                <p class="mt-2">
                  <strong>Disallowed loss</strong> (simplified):
                </p>
                <p>
                  \(\text{Disallowed loss} = \text{Loss} \times
                  \dfrac{\min(\text{Shares sold}, \text{Replacement
                  shares})}{\text{Shares sold}}\)
                </p>
                <p class="mt-2">
                  <strong>Adjusted basis per replacement share</strong>
                  (simplified):
                </p>
                <p>
                  \(\text{Adj. basis per share} = \text{Original basis per
                  share} + \dfrac{\text{Disallowed loss}}{\text{Replacement
                  shares}}\)
                </p>
              </div>

              <h2>What is the wash sale rule?</h2>
              <p>
                The U.S. <strong>wash sale rule</strong> is an IRS rule that
                prevents you from claiming a tax loss if you sell a security at
                a loss and buy the
                <strong>same or substantially identical security</strong> within
                30 days before or after the sale.
              </p>
              <p>
                Instead of letting you deduct the loss immediately, the IRS
                <strong>disallows</strong> it and
                <strong>adds the loss to the cost basis</strong> of your
                replacement shares. Your loss is not gone; it is
                <strong>deferred</strong> until you sell the replacement shares
                in a non‑wash‑sale transaction.
              </p>

              <h3>The 61‑day wash sale window</h3>
              <p>The rule covers a 61‑day period around the loss sale date:</p>
              <ul>
                <li>30 days <strong>before</strong> the loss sale date</li>
                <li>the <strong>day of</strong> the loss sale</li>
                <li>30 days <strong>after</strong> the loss sale date</li>
              </ul>
              <p>
                Any purchase of the same or substantially identical security in
                that window can trigger the wash sale rule for some or all of
                your loss.
              </p>

              <h3>“Substantially identical” securities</h3>
              <p>
                The IRS does not define this term precisely, but common
                interpretations include:
              </p>
              <ul>
                <li>
                  The <strong>same stock or ETF</strong> (e.g., selling AAPL and
                  buying AAPL).
                </li>
                <li>
                  The <strong>same mutual fund</strong> in a different share
                  class (e.g., Investor vs. Admiral shares).
                </li>
                <li>
                  Certain <strong>options or contracts</strong> to acquire the
                  same stock.
                </li>
              </ul>
              <p>
                Different funds tracking the <strong>same index</strong> (e.g.,
                two S&amp;P 500 ETFs from different providers) may be considered
                substantially identical, though there is no bright‑line rule.
                When in doubt, consult a tax professional.
              </p>

              <h2>Example: wash sale rule in action</h2>
              <p>Suppose you:</p>
              <ul>
                <li>Buy 100 shares of XYZ at $50 (basis $5,000).</li>
                <li>
                  Later sell 100 shares of XYZ at $40 on December 15 (realized
                  loss = $1,000).
                </li>
                <li>Buy 60 shares of XYZ at $42 on December 20.</li>
              </ul>
              <p>
                Because the repurchase is within 30 days after the loss sale,
                the wash sale rule applies.
              </p>
              <ul>
                <li>Shares sold at a loss: 100</li>
                <li>Replacement shares in window: 60</li>
                <li>
                  Portion of loss disallowed: \(1{,}000 \times \frac{60}{100} =
                  600\)
                </li>
                <li>Loss allowed now: \(1{,}000 - 600 = 400\)</li>
                <li>
                  Disallowed loss added to basis of 60 replacement shares: \(600
                  / 60 = 10\) per share
                </li>
                <li>New basis per replacement share: \(42 + 10 = 52\)</li>
              </ul>
              <p>
                Your tax return shows a <strong>$400</strong> capital loss now,
                and the remaining <strong>$600</strong> is embedded in the
                higher cost basis of your 60 replacement shares.
              </p>

              <h2>Common edge cases and pitfalls</h2>
              <h3>1. Wash sales across different accounts</h3>
              <p>The wash sale rule applies across:</p>
              <ul>
                <li>Multiple taxable brokerage accounts</li>
                <li>Tax‑advantaged accounts (IRAs, Roth IRAs, HSAs)</li>
                <li>Your spouse’s accounts if you file jointly</li>
              </ul>
              <p>
                Your broker’s 1099‑B may not see activity at other firms, but
                the IRS can. This calculator assumes all trades you enter are
                part of the same taxpayer’s universe.
              </p>

              <h3>2. Wash sales involving IRAs</h3>
              <p>
                If you sell at a loss in a taxable account and repurchase in an
                IRA within the 61‑day window, the loss can be
                <strong>permanently disallowed</strong> (no basis adjustment in
                the IRA). This calculator does not model that special case; it
                assumes replacement shares are in taxable accounts.
              </p>

              <h3>3. Partial wash sales</h3>
              <p>
                If you sell more shares than you repurchase, only the portion of
                the loss corresponding to the replacement shares is disallowed.
                The rest of the loss is allowed immediately. The calculator
                handles this by prorating the loss.
              </p>

              <h3>4. Multiple overlapping wash sales</h3>
              <p>
                Active traders can create chains of overlapping wash sales
                (e.g., repeated buy–sell–buy patterns). This tool handles
                straightforward cases but cannot fully replicate the IRS’s
                lot‑by‑lot rules for every complex scenario.
              </p>

              <h2>Strategies to avoid triggering the wash sale rule</h2>
              <ul>
                <li>
                  <strong>Wait 31 days</strong> before buying the same security
                  back.
                </li>
                <li>
                  <strong
                    >Use similar but not substantially identical
                    securities</strong
                  >
                  to maintain market exposure (e.g., switch from a sector ETF to
                  a broader market ETF).
                </li>
                <li>
                  <strong>Coordinate across accounts</strong> so you are not
                  buying in an IRA while selling at a loss in a taxable account.
                </li>
                <li>
                  <strong>Track your trades</strong> with tools like this
                  calculator before executing tax‑loss harvesting.
                </li>
              </ul>

              <h2>Limitations and disclaimer</h2>
              <p>
                This calculator is for
                <strong>educational purposes only</strong>. It simplifies
                several aspects of the wash sale rules and does not:
              </p>
              <ul>
                <li>Handle options, short sales, or complex derivatives.</li>
                <li>Model permanent disallowance of losses due to IRAs.</li>
                <li>
                  Determine whether two different securities are “substantially
                  identical.”
                </li>
              </ul>
              <p>
                Always review IRS Publication 550 and related guidance, and
                consider consulting a qualified tax professional for your
                specific situation.
              </p>

              <h2>FAQ</h2>

              <h3>Does the wash sale rule apply to crypto?</h3>
              <p>
                Under current IRS guidance, the wash sale rule applies to
                <strong>stocks and securities</strong>. Crypto assets are
                generally treated as property, not securities, so most
                practitioners believe the wash sale rule does not yet apply to
                crypto. However, Congress has considered extending the rule to
                crypto, and tax law can change. Check current guidance or speak
                with a tax advisor.
              </p>

              <h3>Can I avoid a wash sale by using a different brokerage?</h3>
              <p>
                No. The rule applies to
                <strong>all of your accounts combined</strong>, regardless of
                brokerage. Using multiple brokers may make it harder to track,
                but it does not avoid the rule.
              </p>

              <h3>What if I buy before I sell?</h3>
              <p>
                Purchases made <strong>within 30 days before</strong> a loss
                sale can also trigger a wash sale. The calculator includes those
                purchases when it scans the 61‑day window.
              </p>

              <h3>Is a wash sale illegal?</h3>
              <p>
                No. Wash sales are <strong>not illegal</strong>; they are simply
                subject to special tax rules. You can still trade as you wish,
                but you may not be able to deduct certain losses immediately.
              </p>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Wash, Sale, Rule.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">Related tax calculators</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/capital-gains-tax"
                  class="text-blue-600 hover:underline"
                  >Capital Gains Tax</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/short-term-capital-gains-tax"
                  class="text-blue-600 hover:underline"
                  >Short-Term Capital Gains Tax</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/long-term-capital-gains-tax"
                  class="text-blue-600 hover:underline"
                  >Long-Term Capital Gains Tax</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/tax-loss-harvesting"
                  class="text-blue-600 hover:underline"
                  >Tax-Loss Harvesting (coming soon)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/tax-bracket-calculator"
                  class="text-blue-600 hover:underline"
                  >Tax Bracket Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/payroll-take-home-pay"
                  class="text-blue-600 hover:underline"
                  >Take-Home Pay (Payroll)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/income-tax-calculator"
                  class="text-blue-600 hover:underline"
                  >Income Tax Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/taxes"
                  class="text-blue-600 hover:underline"
                  >All Tax Calculators</a
                >
              </li>
            </ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">About this tool</h2>
            <p class="text-sm text-gray-700">
              This wash sale rule calculator is designed for U.S. investors who
              actively trade stocks and ETFs and want to understand how the IRS
              wash sale rule affects their realized losses and cost basis.
            </p>
            <p class="mt-2 text-xs text-gray-500">
              Always verify results against your brokerage 1099‑B and IRS rules.
              For complex situations, consult a CPA or enrolled agent.
            </p>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Utility: format date to yyyy-mm-dd
      function formatDateInput(date) {
        if (!(date instanceof Date)) return "";
        const y = date.getFullYear();
        const m = String(date.getMonth() + 1).padStart(2, "0");
        const d = String(date.getDate()).padStart(2, "0");
        return y + "-" + m + "-" + d;
      }

      const tradesBody = document.getElementById("trades-body");
      const addSaleBtn = document.getElementById("add-sale-btn");
      const addPurchaseBtn = document.getElementById("add-purchase-btn");
      const calculateBtn = document.getElementById("calculate-btn");
      const clearAllBtn = document.getElementById("clear-all-btn");
      const statusMessage = document.getElementById("status-message");
      const resultsSummary = document.getElementById("results-summary");
      const resultsSummaryList = document.getElementById(
        "results-summary-list"
      );
      const resultsDetails = document.getElementById("results-details");
      const resultsBody = document.getElementById("results-body");

      let tradeIdCounter = 1;

      function addTradeRow(type) {
        const today = new Date();
        const row = document.createElement("tr");
        row.dataset.id = tradeIdCounter++;
        row.dataset.type = type;

        const isSale = type === "sale";

        row.innerHTML = `
      <td class="px-2 py-1 border-b sticky-col bg-white">
        <span class="badge ${
          isSale
            ? "bg-red-100 text-red-700 border border-red-200"
            : "bg-emerald-100 text-emerald-700 border border-emerald-200"
        }">
          ${isSale ? "Loss sale" : "Purchase"}
        </span>
      </td>
      <td class="px-2 py-1 border-b">
        <input type="text" class="w-full border border-gray-200 rounded px-1 py-0.5 text-xs" placeholder="Ticker" aria-label="Ticker">
      </td>
      <td class="px-2 py-1 border-b">
        <input type="date" class="w-full border border-gray-200 rounded px-1 py-0.5 text-xs" value="${formatDateInput(
          today
        )}" aria-label="Trade date">
      </td>
      <td class="px-2 py-1 border-b text-right">
        <input type="number" min="0" step="1" class="w-full border border-gray-200 rounded px-1 py-0.5 text-xs text-right" placeholder="Qty" aria-label="Quantity">
      </td>
      <td class="px-2 py-1 border-b text-right">
        <input type="number" step="0.01" class="w-full border border-gray-200 rounded px-1 py-0.5 text-xs text-right" placeholder="Price" aria-label="Price per share">
      </td>
      <td class="px-2 py-1 border-b text-right">
        ${
          isSale
            ? `<input type="number" step="0.01" class="w-full border border-gray-200 rounded px-1 py-0.5 text-xs text-right" placeholder="Cost" aria-label="Cost basis per share">`
            : `<span class="text-gray-400 text-[11px]">n/a</span>`
        }
      </td>
      <td class="px-2 py-1 border-b text-right text-gray-500">
        <span class="trade-total">–</span>
      </td>
      <td class="px-2 py-1 border-b text-center">
        <button type="button" class="text-xs text-red-600 hover:underline remove-row-btn">Remove</button>
      </td>
    `;

        tradesBody.appendChild(row);
      }

      function updateRowTotal(row) {
        const qtyInput = row.querySelector("td:nth-child(4) input");
        const priceInput = row.querySelector("td:nth-child(5) input");
        const totalSpan = row.querySelector(".trade-total");
        const qty = parseFloat(qtyInput?.value || "0");
        const price = parseFloat(priceInput?.value || "0");
        if (qty > 0 && price > 0) {
          totalSpan.textContent = (qty * price).toFixed(2);
        } else {
          totalSpan.textContent = "–";
        }
      }

      addSaleBtn.addEventListener("click", () => {
        addTradeRow("sale");
      });

      addPurchaseBtn.addEventListener("click", () => {
        addTradeRow("purchase");
      });

      tradesBody.addEventListener("input", (e) => {
        const row = e.target.closest("tr");
        if (row) updateRowTotal(row);
      });

      tradesBody.addEventListener("click", (e) => {
        if (e.target.classList.contains("remove-row-btn")) {
          const row = e.target.closest("tr");
          if (row) row.remove();
        }
      });

      clearAllBtn.addEventListener("click", () => {
        tradesBody.innerHTML = "";
        resultsSummary.classList.add("hidden");
        resultsDetails.classList.add("hidden");
        statusMessage.textContent = "All trades cleared.";
        setTimeout(() => {
          statusMessage.textContent = "";
        }, 2000);
      });

      function parseTrades() {
        const rows = Array.from(tradesBody.querySelectorAll("tr"));
        const trades = [];
        for (const row of rows) {
          const type = row.dataset.type;
          const ticker = (
            row.querySelector("td:nth-child(2) input")?.value || ""
          )
            .trim()
            .toUpperCase();
          const dateStr = row.querySelector("td:nth-child(3) input")?.value;
          const qty = parseFloat(
            row.querySelector("td:nth-child(4) input")?.value || "0"
          );
          const price = parseFloat(
            row.querySelector("td:nth-child(5) input")?.value || "0"
          );
          const cost =
            type === "sale"
              ? parseFloat(
                  row.querySelector("td:nth-child(6) input")?.value || "0"
                )
              : price;

          if (
            !ticker ||
            !dateStr ||
            !qty ||
            !price ||
            (type === "sale" && !cost)
          ) {
            continue; // skip incomplete rows
          }

          const date = new Date(dateStr + "T00:00:00");
          if (isNaN(date.getTime())) continue;

          trades.push({
            type,
            ticker,
            date,
            qty,
            price,
            costBasisPerShare: cost,
          });
        }
        return trades;
      }

      function daysBetween(d1, d2) {
        const msPerDay = 24 * 60 * 60 * 1000;
        const t1 = Date.UTC(d1.getFullYear(), d1.getMonth(), d1.getDate());
        const t2 = Date.UTC(d2.getFullYear(), d2.getMonth(), d2.getDate());
        return Math.round((t2 - t1) / msPerDay);
      }

      function calculateWashSales() {
        const trades = parseTrades();
        if (!trades.length) {
          statusMessage.textContent =
            "Add at least one complete trade row first.";
          resultsSummary.classList.add("hidden");
          resultsDetails.classList.add("hidden");
          return;
        }

        const sales = trades.filter((t) => t.type === "sale");
        const purchases = trades.filter((t) => t.type === "purchase");

        if (!sales.length) {
          statusMessage.textContent =
            "Add at least one loss sale to analyze wash sales.";
          resultsSummary.classList.add("hidden");
          resultsDetails.classList.add("hidden");
          return;
        }

        let totalLoss = 0;
        let totalDisallowed = 0;
        let totalAllowed = 0;
        const rows = [];

        for (const sale of sales) {
          const proceeds = sale.qty * sale.price;
          const basis = sale.qty * sale.costBasisPerShare;
          const loss = basis - proceeds; // positive if loss
          if (loss <= 0) continue; // not a loss sale

          totalLoss += loss;

          const relatedPurchases = purchases.filter(
            (p) =>
              p.ticker === sale.ticker &&
              Math.abs(daysBetween(sale.date, p.date)) <= 30
          );
          const replacementShares = relatedPurchases.reduce(
            (sum, p) => sum + p.qty,
            0
          );

          if (replacementShares <= 0) {
            // no wash sale
            totalAllowed += loss;
            rows.push({
              ticker: sale.ticker,
              saleDate: sale.date,
              loss,
              disallowed: 0,
              allowed: loss,
              replacementShares: 0,
              adjBasisPerShare: null,
              notes:
                "No purchases within 30 days before/after sale. Full loss allowed.",
            });
            continue;
          }

          const affectedShares = Math.min(sale.qty, replacementShares);
          const disallowed = loss * (affectedShares / sale.qty);
          const allowed = loss - disallowed;
          totalDisallowed += disallowed;
          totalAllowed += allowed;

          const avgReplacementPrice =
            replacementShares > 0
              ? relatedPurchases.reduce((sum, p) => sum + p.price * p.qty, 0) /
                replacementShares
              : null;

          const adjBasisPerShare =
            avgReplacementPrice != null
              ? avgReplacementPrice + disallowed / replacementShares
              : null;

          rows.push({
            ticker: sale.ticker,
            saleDate: sale.date,
            loss,
            disallowed,
            allowed,
            replacementShares,
            adjBasisPerShare,
            notes:
              "Wash sale detected. Lossred and added to replacement shares basis.",
          });
        }

        if (!rows.length) {
          statusMessage.textContent =
            "No loss sales detected, or no losses within wash sale windows.";
          resultsSummary.classList.add("hidden");
          resultsDetails.classList.add("hidden");
          return;
        }

        // Populate summary
        resultsSummaryList.innerHTML = `
      <li>Total realized losses (before wash sale rules): <strong>$${totalLoss.toFixed(
        2
      )}</strong></li>
      <li>Total loss disallowed (deferred): <strong class="text-red-700">$${totalDisallowed.toFixed(
        2
      )}</strong></li>
      <li>Total loss allowed this year: <strong class="text-emerald-700">$${totalAllowed.toFixed(
        2
      )}</strong></li>
      <li>Number of loss sales analyzed: <strong>${rows.length}</strong></li>
    `;
        resultsSummary.classList.remove("hidden");

        // Populate details
        resultsBody.innerHTML = rows
          .map(
            (r) => `
      <tr>
        <td class="px-2 py-1 border-b">${r.ticker}</td>
        <td class="px-2 py-1 border-b">${formatDateInput(r.saleDate)}</td>
        <td class="px-2 py-1 border-b text-right">$${r.loss.toFixed(2)}</td>
        <td class="px-2 py-1 border-b text-right ${
          r.disallowed > 0 ? "text-red-700 font-semibold" : ""
        }">$${r.disallowed.toFixed(2)}</td>
        <td class="px-2 py-1 border-b text-right text-emerald-700">$${r.allowed.toFixed(
          2
        )}</td>
        <td class="px-2 py-1 border-b text-right">${r.replacementShares}</td>
        <td class="px-2 py-1 border-b text-right">${
          r.adjBasisPerShare != null ? "$" + r.adjBasisPerShare.toFixed(4) : "–"
        }</td>
        <td class="px-2 py-1 border-b text-left">${r.notes}</td>
      </tr>
    `
          )
          .join("");
        resultsDetails.classList.remove("hidden");

        statusMessage.textContent = rows.some((r) => r.disallowed > 0)
          ? "Wash sales detected. Review details below."
          : "No wash sales detected for the entered loss sales.";
        setTimeout(() => {
          statusMessage.textContent = "";
        }, 5000);
      }

      calculateBtn.addEventListener("click", calculateWashSales);

      // Initialize with one example sale and purchase to guide users
      window.addEventListener("DOMContentLoaded", () => {
        addTradeRow("sale");
        addTradeRow("purchase");
      });

      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

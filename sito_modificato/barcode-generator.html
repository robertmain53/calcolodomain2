<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/barcode-generator">





<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg">
<link rel="shortcut icon" href="https://calcdomain.com/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png">
<link rel="manifest" href="https://calcdomain.com/site.webmanifest">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Barcode Generator - Create EAN, UPC, QR Codes &amp; More</title>
<meta name="description" content="Instantly create high-quality, scannable 1D &amp; 2D barcodes. Generate EAN-13, UPC-A, Code 128, QR Codes, and more. Free, fast, and accessible.">


<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/bwip-js@4.3.2/dist/bwip-js-min.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }

/* Accessibility & UX Enhancements */
[aria-invalid="true"] {
border-color: #dc2626; /* red-600 */
}
.error-message {
color: #dc2626; /* red-600 */
font-size: 0.875rem; /* text-sm */
margin-top: 0.25rem; /* mt-1 */
}
.form-label {
display: block;
font-size: 0.875rem; /* text-sm */
font-weight: 500; /* medium */
color: #374151; /* gray-700 */
margin-bottom: 0.25rem; /* mb-1 */
}
.form-input {
display: block;
width: 100%;
padding: 0.5rem 0.75rem; /* px-3 py-2 */
border: 1px solid #d1d5db; /* gray-300 */
border-radius: 0.375rem; /* rounded-md */
box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); /* shadow-sm */
}
.form-input:focus, .form-select:focus {
outline: 2px solid transparent;
outline-offset: 2px;
border-color: #2563eb; /* blue-500 */
box-shadow: 0 0 0 2px #2563eb; /* ring-blue-500 */
}
/* Visible focus for accessibility */
:focus-visible {
outline: 3px solid #3b82f6;
outline-offset: 2px;
}
.tooltip-button {
display: inline-flex;
align-items: center;
justify-content: center;
width: 1.25rem; /* w-5 */
height: 1.25rem; /* h-5 */
border-radius: 9999px; /* rounded-full */
background-color: #d1d5db; /* gray-300 */
color: #4b5563; /* gray-600 */
border: none;
cursor: pointer;
margin-left: 0.25rem;
font-style: normal;
font-weight: 700;
}
.tooltip-text {
font-size: 0.875rem;
color: #4b5563; /* gray-600 */
background-color: #f3f4f6; /* gray-100 */
border: 1px solid #d1d5db; /* gray-300 */
border-radius: 0.375rem;
padding: 0.5rem;
margin-top: 0.25rem;
}
/* Touch Target Sizing */
.btn {
min-height: 48px; /* WCAG 2.5.5 Target Size */
min-width: 48px;
display: inline-flex;
align-items: center;
justify-content: center;
padding: 0.5rem 1rem;
border-radius: 0.375rem;
font-weight: 500;
}
.btn-primary {
background-color: #2563eb; /* blue-600 */
color: #ffffff; /* white */
}
.btn-primary:hover {
background-color: #1d4ed8; /* blue-700 */
}
.btn-secondary {
background-color: #e5e7eb; /* gray-200 */
color: #1f2937; /* gray-800 */
}
.btn-secondary:hover {
background-color: #d1d5db; /* gray-300 */
}
#results-container {
min-height: 250px; /* Prevent CLS */
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
background-color: #f9fafb; /* gray-50 */
border: 1px dashed #d1d5db; /* gray-300 */
border-radius: 0.5rem; /* rounded-lg */
padding: 1rem;
}
#barcode-canvas {
max-width: 100%;
height: auto;
}

@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
}
</style>

<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Barcode Generator",
  "description": "Instantly create high-quality, scannable 1D & 2D barcodes. Generate EAN-13, UPC-A, Code 128, QR Codes, and more. Free, fast, and accessible.",
  "url": "https://calcdomain.com/barcode-generator",
  "inLanguage": "en",
  "reviewedBy": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "dateModified": "2026-01-19"
}</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Lifestyle & Everyday",
      "item": "https://calcdomain.com/categories/lifestyle-everyday"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Miscellaneous",
      "item": "https://calcdomain.com/subcategories/miscellaneous"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Tool",
  "name": "Barcode Generator",
  "description": "A free tool to generate multiple types of barcodes, including EAN-13, UPC-A, Code 128, and QR Codes, based on user-provided data and specifications.",
  "toolCategory": "Miscellaneous"
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Generate a Barcode",
  "description": "A step-by-step guide to creating a scannable barcode using this tool.",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Select Barcode Type",
      "text": "Choose the correct barcode symbology from the dropdown list (e.g., 'QR Code' for a website link, 'EAN-13' for a retail product)."
    },
    {
      "@type": "HowToStep",
      "name": "Enter Data",
      "text": "Input the data you want to encode. The tool will provide guidance on the required format (e.g., '12 digits' for UPC-A)."
    },
    {
      "@type": "HowToStep",
      "name": "Configure Options",
      "text": "Adjust settings like error correction (for QR codes) or whether to display human-readable text (for 1D barcodes)."
    },
    {
      "@type": "HowToStep",
      "name": "Generate and Download",
      "text": "Click the 'Generate Barcode' button. The tool will display the barcode image, which you can then download as a PNG file."
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What's the difference between a 1D and a 2D barcode?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A 1D (one-dimensional) barcode, like EAN-13 or Code 128, stores data in a series of parallel black bars and white spaces. It's read horizontally. A 2D (two-dimensional) barcode, like a QR Code or Data Matrix, stores data in a matrix of black and white squares. It can be read horizontally and vertically, allowing it to store significantly more data in a smaller space."
      }
    },
    {
      "@type": "Question",
      "name": "Which barcode type should I use?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "It depends on your use case. For retail products, use EAN-13 or UPC-A. For logistics and inventory, Code 128 is a good choice as it handles alphanumeric data well. For marketing, website links, or vCards, use a QR Code. For marking small industrial parts, Data Matrix is ideal due to its high data density in a small footprint."
      }
    },
    {
      "@type": "Question",
      "name": "What is Error Correction Level (ECC) in a QR code?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Error Correction allows a QR code to be successfully scanned even if it's dirty or partially damaged. There are four levels: L (Low, ~7% correction), M (Medium, ~15%), Q (Quartile, ~25%), and H (High, ~30%). A higher level adds more redundant data, making the code more robust but also larger (more dense)."
      }
    },
    {
      "@type": "Question",
      "name": "Why does my EAN-13 or UPC-A barcode need a specific number of digits?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "These are fixed-length symbologies defined by global GS1 standards for retail. EAN-13 requires 12 data digits (the 13th is a calculated check digit). UPC-A requires 11 data digits (the 12th is a check digit). This tool automatically calculates and appends the correct check digit for you."
      }
    },
    {
      "@type": "Question",
      "name": "Why is my generated barcode not scanning?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "There are several possible reasons: 1) The data may be incorrect for the chosen type. 2) The contrast between the bars and background is too low (always use black on white if possible). 3) The barcode is printed too small. 4) The scanner app or device is not configured to read that specific barcode type. 5) For 1D barcodes, ensure there is enough 'quiet zone' (blank space) on either side."
      }
    }
  ]
}
</script>
<script src="search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">


<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$ S = d_1 + 3d_2 + d_3 + 3d_4 + d_5 + 3d_6 + d_7 + 3d_8 + d_9 + 3d_{10} + d_{11} + 3d_{12} $ $ C = (10 - (S \mod 10)) \mod 10 $</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Lifestyle</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/lifestyle-everyday" target="_blank" rel="nofollow noopener">https://calcdomain.com/lifestyle-everyday</a></li>
<li><strong>Miscellaneous</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/miscellaneous" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/miscellaneous</a></li>
<li><strong>QR Code Generator (Advanced)</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/qr-code-generator" target="_blank" rel="nofollow noopener">https://calcdomain.com/qr-code-generator</a></li>
<li><strong>Secure Password Generator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/password-generator" target="_blank" rel="nofollow noopener">https://calcdomain.com/password-generator</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why use this generator?</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li><strong>Standards-Compliant:</strong> Creates ISO-compliant barcodes for universal scannability.</li>
<li><strong>Versatile:</strong> Supports all major 1D and 2D types, from retail to industrial.</li>
<li><strong>Accessible:</strong> Built with WCAG 2.1 AA guidelines for all users.</li>
<li><strong>High Quality:</strong> Generates crisp, high-resolution PNGs suitable for print.</li>
<li><strong>Fast &amp; Free:</strong> No sign-ups, no-nonsense. Just a tool that works.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="https://calcdomain.com/qr-code-generator" class="text-blue-600 hover:underline">QR Code Generator (Advanced)</a></li>
<li>Random String Generator</li>
<li><a href="https://calcdomain.com/password-generator" class="text-blue-600 hover:underline">Secure Password Generator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                                                        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>

























<script defer="">
document.addEventListener('DOMContentLoaded', () => {
  // --- DOM Element Cache ---
  const elements = {
    barcodeType: document.getElementById('barcodeType'),
    data: document.getElementById('data'),
    dataHelp: document.getElementById('data-help'),
    dataError: document.getElementById('data-error'),
    options1D: document.getElementById('options-1d'),
    barWidth: document.getElementById('barWidth'),
    barHeight: document.getElementById('barHeight'),
    showText: document.getElementById('showText'),
    options2D: document.getElementById('options-2d'),
    moduleSize: document.getElementById('moduleSize'),
    eccLevelContainer: document.getElementById('ecc-level-container'),
    eccLevel: document.getElementById('eccLevel'),
    generateBtn: document.getElementById('generateBtn'),
    resetBtn: document.getElementById('resetBtn'),
    resultsContainer: document.getElementById('results-container'),
    resultsPlaceholder: document.getElementById('results-placeholder'),
    canvas: document.getElementById('barcode-canvas'),
    downloadContainer: document.getElementById('download-container'),
    downloadPNG: document.getElementById('downloadPNG'),
    generatorError: document.getElementById('generator-error'),
  };

  const tooltips = document.querySelectorAll('.tooltip-button');
  tooltips.forEach(button => {
    button.addEventListener('click', () => {
      const tooltipId = button.getAttribute('aria-controls');
      const tooltip = document.getElementById(tooltipId);
      const isExpanded = button.getAttribute('aria-expanded') === 'true';
      button.setAttribute('aria-expanded', !isExpanded);
      tooltip.classList.toggle('hidden');
    });
  });

  // --- Type-specific Definitions ---
  const typeDefs = {
    'qrcode': { is1D: false, help: 'Enter any text, URL, or data to encode.', validation: /.+/ },
    'datamatrix': { is1D: false, help: 'Enter any text or data. Ideal for small industrial parts.', validation: /.+/ },
    'pdf417': { is1D: false, help: 'Enter large amounts of text or data. Used for ID cards.', validation: /.+/ },
    'ean13': { is1D: true, help: 'Enter 12 digits. The 13th check digit is added automatically.', validation: /^\d{12}$/ },
    'upca': { is1D: true, help: 'Enter 11 digits. The 12th check digit is added automatically.', validation: /^\d{11}$/ },
    'code128': { is1D: true, help: 'Enter alphanumeric data for logistics and inventory.', validation: /.+/ },
  };

  // --- Functions ---

  /**
   * Updates the form UI based on the selected barcode type.
   * Shows/hides 1D/2D options and updates help text.
   */
  function updateFormUI() {
    const type = elements.barcodeType.value;
    const def = typeDefs[type];

    if (def) {
      // Toggle 1D/2D option fieldsets
      elements.options1D.classList.toggle('hidden', !def.is1D);
      elements.options2D.classList.toggle('hidden', def.is1D);
      
      // Toggle ECC level (only for QR code)
      elements.eccLevelContainer.classList.toggle('hidden', type !== 'qrcode');

      // Update help text and placeholder
      elements.dataHelp.textContent = def.help;
      elements.data.placeholder = def.help;
    }
    
    // Clear previous validation and results
    clearValidation();
    clearResults();
  }

  /**
   * Clears all validation error messages and invalid states.
   */
  function clearValidation() {
    elements.data.removeAttribute('aria-invalid');
    elements.dataError.classList.add('hidden');
    elements.dataError.textContent = '';
  }

  /**
   * Hides the barcode and download button, shows placeholder.
   */
  function clearResults() {
    elements.resultsPlaceholder.classList.remove('hidden');
    elements.canvas.classList.add('hidden');
    elements.downloadContainer.classList.add('hidden');
    elements.generatorError.classList.add('hidden');
    elements.generatorError.textContent = '';
  }

  /**
   * Validates the data input based on the selected barcode type.
   * @returns {boolean} - True if valid, false otherwise.
   */
  function validateData() {
    clearValidation();
    const type = elements.barcodeType.value;
    const data = elements.data.value.trim();
    const def = typeDefs[type];

    if (!def) {
      showDataError('Invalid barcode type selected.');
      return false;
    }

    if (data.length === 0) {
      showDataError('Data cannot be empty.');
      return false;
    }
    
    // Specific validation for fixed-length types
    if ((type === 'ean13' && !def.validation.test(data)) || (type === 'upca' && !def.validation.test(data))) {
      showDataError(def.help);
      return false;
    }
    
    // General validation for all other types
    if (!def.validation.test(data)) {
      showDataError('Input data is not valid for this barcode type.');
      return false;
    }

    return true;
  }

  /**
   * Shows an error message for the data input field.
   * @param {string} message - The error message to display.
   */
  function showDataError(message) {
    elements.data.setAttribute('aria-invalid', 'true');
    elements.dataError.textContent = message;
    elements.dataError.classList.remove('hidden');
  }

  /**
   * Shows a general error in the results area (e.g., from the generator library).
   * @param {string} message - The error message.
   */
  function showGeneratorError(message) {
    clearResults();
    elements.generatorError.textContent = `Error: ${message}`;
    elements.generatorError.classList.remove('hidden');
  }

  /**
   * Main function to generate the barcode.
   */
  function generateBarcode() {
    if (!validateData()) {
      return;
    }
    
    clearResults();

    const type = elements.barcodeType.value;
    const data = elements.data.value.trim();
    const def = typeDefs[type];
    
    // Build options object for bwip-js
    let options = {
      bcid: type,
      text: data,
      scale: 3, // Base scale, will be overridden by px sizes
      padding: 10,
    };

    if (def.is1D) {
      options.width = parseInt(elements.barWidth.value, 10) || 2;
      options.height = parseInt(elements.barHeight.value, 10) || 100;
      options.includetext = elements.showText.checked;
      options.textxalign = 'center';
    } else {
      options.scale = parseInt(elements.moduleSize.value, 10) || 5;
      if (type === 'qrcode') {
        options.eclevel = elements.eccLevel.value;
      }
    }
    
    // --- bwip-js Generation ---
    try {
      // Get the canvas element
      const canvas = elements.canvas;
      
      // Generate the barcode
      bwipjs.toCanvas(canvas, options);
      
      // Show results
      elements.resultsPlaceholder.classList.add('hidden');
      canvas.classList.remove('hidden');
      elements.downloadContainer.classList.remove('hidden');
      
      // Update download link
      elements.downloadPNG.href = canvas.toDataURL('image/png');
      elements.downloadPNG.download = `${type}-${data.substring(0, 10)}.png`;

    } catch (e) {
      // Handle errors from the library
      let errorMessage = e.message || 'An unknown error occurred during generation.';
      if (errorMessage.includes('Check digit')) {
        errorMessage = 'Invalid check digit. Please check your data.';
      }
      showGeneratorError(errorMessage);
      console.error(e);
    }
  }

  /**
   * Resets the entire form and results area to default state.
   */
  function resetForm() {
    document.getElementById('calculator-ui').reset();
    clearValidation();
    clearResults();
    updateFormUI();
  }

  // --- Event Listeners ---
  elements.barcodeType.addEventListener('change', updateFormUI);
  elements.data.addEventListener('blur', validateData);
  elements.generateBtn.addEventListener('click', generateBarcode);
  elements.resetBtn.addEventListener('click', resetForm);

  // --- Mobile Menu Toggle ---
  const menuToggle = document.getElementById('mobile-menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  if (menuToggle && mobileMenu) {
    menuToggle.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      const isExpanded = mobileMenu.classList.contains('hidden') ? 'false' : 'true';
      menuToggle.setAttribute('aria-expanded', isExpanded);
    });
  }

  // --- Initial Setup ---
  updateFormUI(); // Set initial UI state
});
</script>

</body></html>
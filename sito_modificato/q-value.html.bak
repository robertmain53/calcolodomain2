<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/q-value" />
    <title>Q-Value Calculator (Nuclear Physics) | Energy & Mass Balance</title>
    <meta
      name="description"
      content="Calculate the Q-value of nuclear reactions (Fission, Fusion, Alpha decay). Convert between atomic mass units (u) and MeV. Includes binding energy mode and reference data."
    />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Q-Value Calculator (Nuclear Physics) | Energy & Mass Balance"
    />
    <meta
      property="og:description"
      content="Interactive tool to calculate reaction energy (Q) using Reactant/Product masses or Binding Energies. Accurate for physics students and researchers."
    />
    <meta property="og:url" content="https://calcdomain.com/q-value" />
    <meta name="twitter:card" content="summary" />
    <meta
      name="twitter:title"
      content="Q-Value Calculator (Nuclear Physics) | Energy & Mass Balance"
    />
    <meta
      name="twitter:description"
      content="Calculate nuclear reaction energies instantly."
    />

    <link
      rel="preload"
      href="https://calcdomain.com/assets/tailwind.min.css"
      as="style"
    />
    <link
      rel="stylesheet"
      href="https://calcdomain.com/assets/tailwind.min.css"
    />
    
    

    
    

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Q-Value Calculator for Nuclear Reactions",
        "description": "Scientific tool to compute the energetics of nuclear reactions using atomic mass difference or binding energy.",
        "url": "https://calcdomain.com/q-value",
        "applicationCategory": "ScientificCalculator",
        "operatingSystem": "Web",
        "author": {
          "@type": "Person",
          "name": "Ugo Candido",
          "url": "https://www.linkedin.com/in/ugocandido92821/"
        },
        "reviewedBy": {
          "@type": "Person",
          "name": "Ugo Candido",
          "jobTitle": "Scientific Analyst",
          "url": "https://www.linkedin.com/in/ugocandido92821/"
        }
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://calcdomain.com"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Science",
            "item": "https://calcdomain.com/categories/science"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "Physics",
            "item": "https://calcdomain.com/physics"
          },
          {
            "@type": "ListItem",
            "position": 4,
            "name": "Q-Value Calculator",
            "item": "https://calcdomain.com/q-value"
          }
        ]
      }
    </script>

    <style>
      body {
        margin: 0;
      }
      .mb-10 {
        margin-bottom: 2.5rem;
      }
      .mt-10 {
        margin-top: 2.5rem;
      }
      .tab-active {
        border-bottom-color: #2563eb !important;
        color: #2563eb !important;
      }
      .formula-box { background-color: #eff6ff; padding: 1rem; border-left: 4px solid #2563eb; margin: 1.5rem 0; }
      .reference-table th, .reference-table td { border: 1px solid #e5e7eb; padding: 0.5rem; text-align: right; font-size: 0.875rem; }
      .reference-table th { background-color: #f9fafb; text-align: left; }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a href="https://calcdomain.com/search" class="text-gray-700 hover:text-blue-600 transition-colors">Advanced Search</a>
            <a href="https://calcdomain.com/#categories" class="text-gray-700 hover:text-blue-600 transition-colors">Categories</a>
          </div>
          <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
        <nav id="mobile-menu" class="md:hidden mt-4 hidden" aria-label="Mobile menu" role="navigation">
           </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
        <ol class="flex flex-wrap items-center gap-1">
          <li>
            <a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a>
          </li>
          <li class="text-gray-400">/</li>
          <li>
            <a href="https://calcdomain.com/categories/science" class="text-blue-600 hover:underline">Science</a>
          </li>
          <li class="text-gray-400">/</li>
          <li>
            <a href="https://calcdomain.com/physics" class="text-blue-600 hover:underline">Physics</a>
          </li>
          <li class="text-gray-400">/</li>
          <li class="text-gray-800">Q-Value Calculator</li>
        </ol>
      </nav>

      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Q-Value Calculator (Nuclear Reaction)
              </h1>
              <p class="text-gray-600">
                Determine whether a nuclear reaction is exothermic or endothermic. Calculate energy released using reactant/product masses, binding energies, or mass excess.
              </p>
            </header>

            <div class="mb-4 border-b border-gray-200">
              <nav class="flex flex-wrap gap-2" aria-label="Q-value input mode">
                <button
                  type="button"
                  data-mode="mass"
                  class="q-tab px-3 py-2 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-blue-600 transition-colors"
                >
                  By Mass (u)
                </button>
                <button
                  type="button"
                  data-mode="binding"
                  class="q-tab px-3 py-2 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-blue-600 transition-colors"
                >
                  By Binding Energy
                </button>
                <button
                  type="button"
                  data-mode="excess"
                  class="q-tab px-3 py-2 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-blue-600 transition-colors"
                >
                  By Mass Excess
                </button>
              </nav>
            </div>

            <section aria-label="Q-value calculator">
              <form id="qvalue-form" class="space-y-4">
                <div class="grid md:grid-cols-3 gap-4">
                  <div>
                    <label
                      for="unit-system"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Input Type</label
                    >
                    <select
                      id="unit-system"
                      class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"
                    >
                      <option value="atomic">Atomic masses (u)</option>
                      <option value="nuclear">Nuclear masses (u)</option>
                    </select>
                  </div>
                  <div>
                    <label
                      for="energy-units"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Result Unit</label
                    >
                    <select
                      id="energy-units"
                      class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"
                    >
                      <option value="MeV">MeV</option>
                      <option value="J">Joules (J)</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Particles</label
                    >
                    <div class="flex items-center gap-2">
                      <div class="flex-1">
                        <label
                          class="block text-xs text-gray-500"
                          for="n-reactants"
                          >Reactants</label
                        >
                        <input
                          id="n-reactants"
                          type="number"
                          min="1"
                          max="6"
                          value="2"
                          class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"
                        />
                      </div>
                      <div class="flex-1">
                        <label
                          class="block text-xs text-gray-500"
                          for="n-products"
                          >Products</label
                        >
                        <input
                          id="n-products"
                          type="number"
                          min="1"
                          max="6"
                          value="2"
                          class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <div id="panel-mass" class="q-panel space-y-4">
                  <div class="bg-blue-50 p-3 rounded-md text-sm text-blue-700">
                    Enter mass in atomic mass units (u). \(1\ u = 931.494\ \text{MeV}/c^2\).
                  </div>
                  <div class="grid md:grid-cols-2 gap-4">
                    <div>
                      <h2 class="font-semibold text-gray-800 mb-2 text-sm uppercase">Reactants (In)</h2>
                      <div id="reactants-container" class="space-y-2"></div>
                    </div>
                    <div>
                      <h2 class="font-semibold text-gray-800 mb-2 text-sm uppercase">Products (Out)</h2>
                      <div id="products-container" class="space-y-2"></div>
                    </div>
                  </div>
                </div>

                <div id="panel-binding" class="q-panel space-y-4 hidden">
                  <div class="grid md:grid-cols-2 gap-4">
                    <div>
                      <h2 class="font-semibold text-gray-800 mb-2 text-sm uppercase">Reactants</h2>
                      <div id="reactants-binding-container" class="space-y-2"></div>
                    </div>
                    <div>
                      <h2 class="font-semibold text-gray-800 mb-2 text-sm uppercase">Products</h2>
                      <div id="products-binding-container" class="space-y-2"></div>
                    </div>
                  </div>
                </div>

                <div id="panel-excess" class="q-panel space-y-4 hidden">
                  <div class="grid md:grid-cols-2 gap-4">
                    <div>
                      <h2 class="font-semibold text-gray-800 mb-2 text-sm uppercase">Reactants</h2>
                      <div id="reactants-excess-container" class="space-y-2"></div>
                    </div>
                    <div>
                      <h2 class="font-semibold text-gray-800 mb-2 text-sm uppercase">Products</h2>
                      <div id="products-excess-container" class="space-y-2"></div>
                    </div>
                  </div>
                </div>

                <div class="flex flex-wrap items-center gap-3 pt-2">
                  <button
                    type="button"
                    id="compute-btn"
                    class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
                  >
                    Compute Q-Value
                  </button>
                  <button
                    type="button"
                    id="reset-btn"
                    class="inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
                  >
                    Reset
                  </button>
                  <p id="input-warning" class="text-xs text-red-600 hidden">
                    Please enter values for reactants and products.
                  </p>
                </div>
              </form>

              <section id="results-section" class="mt-6 hidden">
                <div class="border rounded-lg p-4 bg-gray-50 border-l-4 border-l-blue-500">
                  <h2 class="text-lg font-semibold mb-2">Calculation Results</h2>
                  <div class="grid md:grid-cols-2 gap-4">
                    <div>
                      <p class="text-sm text-gray-600">Q-value (Energy Release)</p>
                      <p id="qvalue-output" class="text-2xl font-bold text-gray-900">0 MeV</p>
                    </div>
                    <div>
                      <p class="text-sm text-gray-600">Reaction Classification</p>
                      <p id="reaction-type" class="text-lg font-semibold text-gray-900">—</p>
                    </div>
                  </div>
                  <div class="mt-3 text-sm text-gray-700" id="interpretation-text"></div>
                </div>
              </section>
            </section>

            <section class="mt-8">
              <h2 class="text-lg font-semibold mb-2">Load Example Scenarios</h2>
              <div class="grid md:grid-cols-2 gap-3 text-sm">
                <button
                  type="button"
                  class="card-hover border rounded-md p-3 text-left bg-white hover:border-blue-400 example-btn transition-all"
                  data-example="fusion"
                >
                  <div class="font-semibold mb-1 text-blue-700">
                    Load D-T Fusion Example
                  </div>
                  <p class="text-gray-600 text-xs">
                    \( ^2\text{H} + ^3\text{H} \rightarrow ^4\text{He} + n \) <br>
                    Exothermic (~17.6 MeV)
                  </p>
                </button>
                <button
                  type="button"
                  class="card-hover border rounded-md p-3 text-left bg-white hover:border-blue-400 example-btn transition-all"
                  data-example="fission"
                >
                  <div class="font-semibold mb-1 text-blue-700">
                    Load U-235 Fission Example
                  </div>
                  <p class="text-gray-600 text-xs">
                    \( ^{235}\text{U} + n \rightarrow ^{141}\text{Ba} + ^{92}\text{Kr} + 3n \) <br>
                    Highly Exothermic (~200 MeV)
                  </p>
                </button>
              </div>
            </section>

            <section class="mt-10 border rounded-lg overflow-hidden">
               <div class="bg-gray-100 px-4 py-2 border-b font-semibold text-gray-700 flex justify-between items-center">
                  <span>Reference Data (Atomic Masses)</span>
                  <span class="text-xs font-normal text-gray-500">Source: AME2020</span>
               </div>
               <div class="overflow-x-auto">
                  <table class="w-full reference-table">
                     <thead>
                        <tr>
                           <th>Particle / Isotope</th>
                           <th>Symbol</th>
                           <th>Mass (u)</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr><td>Neutron</td><td>\(^1n\)</td><td>1.008665</td></tr>
                        <tr><td>Proton (Hydrogen-1)</td><td>\(^1H\)</td><td>1.007825</td></tr>
                        <tr><td>Deuterium</td><td>\(^2H\)</td><td>2.014102</td></tr>
                        <tr><td>Tritium</td><td>\(^3H\)</td><td>3.016049</td></tr>
                        <tr><td>Helium-3</td><td>\(^3He\)</td><td>3.016029</td></tr>
                        <tr><td>Alpha (Helium-4)</td><td>\(^4He\)</td><td>4.002603</td></tr>
                        <tr><td>Uranium-235</td><td>\(^{235}U\)</td><td>235.043930</td></tr>
                     </tbody>
                  </table>
               </div>
            </section>

            <section class="prose mt-10 max-w-none">
              <h2>Physics Concept: What is Q-Value?</h2>
              <p>
                The <strong>Q-value</strong> represents the energy balance of a nuclear reaction. It tells us whether energy is released (Exothermic) or absorbed (Endothermic) during the transformation.
              </p>
              
              

              <div class="formula-box">
                <p>
                  \[ Q = (Mass_{reactants} - Mass_{products}) \cdot c^2 \]
                </p>
              </div>

              <h3>Sign Convention</h3>
              <ul>
                <li><strong>Positive Q (+):</strong> Exothermic. Mass is lost and converted to kinetic energy (e.g., Fusion, Fission).</li>
                <li><strong>Negative Q (-):</strong> Endothermic. Kinetic energy from the reactants is converted into mass (e.g., creating heavy isotopes in accelerators).</li>
              </ul>

              <h2>Understanding Binding Energy</h2>
              <p>
                Alternatively, Q-value can be calculated using <strong>Nuclear Binding Energy</strong> (B.E.). Elements try to move towards the peak of the binding energy curve (Iron-56 region) to become more stable.
              </p>

              

              <ul>
                <li><strong>Fusion:</strong> Light elements (like Hydrogen) fuse to move <em>up</em> the curve.</li>
                <li><strong>Fission:</strong> Heavy elements (like Uranium) split to move <em>up</em> the curve from the other side.</li>
              </ul>

              <h2>Example: Deuterium-Tritium Fusion</h2>
              <p>
                The reaction powering the sun and future tokamaks involves fusing Deuterium and Tritium.
              </p>

              

              <p>Calculation using atomic masses:</p>
              <div class="formula-box">
                 \[ \Delta m = (2.0141 + 3.0160) - (4.0026 + 1.0087) \approx 0.0188 \ u \]
                 \[ Q = 0.0188 \ u \times 931.5 \ MeV/u \approx 17.6 \ MeV \]
              </div>

            </section>

            <section class="mt-10">
              <h2 class="text-lg font-semibold mb-3">Frequently Asked Questions</h2>
              <div class="space-y-3" id="faq-container">
                <details class="border rounded-md p-3">
                  <summary class="font-medium cursor-pointer">
                    Why use atomic mass instead of nuclear mass?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    Atomic masses are more commonly measured and tabulated. In most reactions (like alpha decay, fission, fusion), the number of electrons is conserved, so their masses cancel out in the Q-value calculation. However, for Beta decay (\(\beta^+\) or \(\beta^-\)), you must be careful to account for electron mass differences.
                  </p>
                </details>
                <details class="border rounded-md p-3">
                  <summary class="font-medium cursor-pointer">
                    What is the difference between Q-value and Binding Energy?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    Binding Energy is the energy holding <em>one</em> nucleus together. Q-value is the energy <em>change</em> when <em>multiple</em> nuclei interact and rearrange.
                  </p>
                </details>
              </div>
            </section>
          </div>

            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the Author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  is a scientific analyst specializing in physics modeling and computational tools. He focuses on making complex energy and mass calculations accessible to students and researchers.
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial Policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                   CalcDomain tools are validated against standard physics constants (CODATA, AME2020). We prioritize accuracy and transparency in all scientific models.
                </p>
              </div>
            </section>
        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Scientific References</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nndc.bnl.gov/" class="text-blue-600 hover:underline" target="_blank" rel="noopener noreferrer">
                      National Nuclear Data Center (Brookhaven National Lab)
                    </a>
                  </li>
                  <li>
                    <a href="https://www-nds.iaea.org/" class="text-blue-600 hover:underline" target="_blank" rel="noopener noreferrer">
                      IAEA Nuclear Data Services
                    </a>
                  </li>
                  <li>
                    <a href="https://physics.nist.gov/cuu/Constants/" class="text-blue-600 hover:underline" target="_blank" rel="noopener noreferrer">
                      NIST Fundamental Physical Constants
                    </a>
                  </li>
                </ul>
              </div>
            </section>
        <!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        
        <aside class="w-full lg:w-1/3">
           <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Physics Tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li><a href="https://calcdomain.com/binding-energy" class="text-blue-600 hover:underline">Nuclear Binding Energy</a></li>
              <li><a href="https://calcdomain.com/half-life" class="text-blue-600 hover:underline">Half-Life & Decay</a></li>
              <li><a href="https://calcdomain.com/relativity" class="text-blue-600 hover:underline">Relativistic Kinetic Energy</a></li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4 text-center text-gray-400">
          <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // MathJax config
      window.MathJax = {
        tex: { inlineMath: [["\\(", "\\)"], ["$", "$"]], displayMath: [["$", "$"], ["\\[", "\\]"]] },
        svg: { fontCache: "global" }
      };
    </script>
    <script>
      (function () {
        var loadMathJax = function () {
          if (window.__mathjaxLoading) return;
          window.__mathjaxLoading = true;
          var script = document.createElement("script");
          script.id = "MathJax-script";
          script.async = true;
          script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
          document.head.appendChild(script);
        };
        var target = document.querySelector(".formula-box, .mathjax, .math, .formula, [data-mathjax], table");
        if (target) { loadMathJax(); }
      })();
    </script>

    <script>
      (function () {
        const U_TO_MEV = 931.494;
        const MEV_TO_J = 1.602176634e-13;

        const tabs = document.querySelectorAll(".q-tab");
        const panels = {
          mass: document.getElementById("panel-mass"),
          binding: document.getElementById("panel-binding"),
          excess: document.getElementById("panel-excess"),
        };
        let currentMode = "mass";

        function setActiveTab(mode) {
          currentMode = mode;
          tabs.forEach((btn) => {
            if (btn.dataset.mode === mode) {
              btn.classList.add("tab-active");
            } else {
              btn.classList.remove("tab-active");
            }
          });
          Object.keys(panels).forEach((key) => {
            panels[key].classList.toggle("hidden", key !== mode);
          });
        }

        tabs.forEach((btn) => {
          btn.addEventListener("click", () => setActiveTab(btn.dataset.mode));
        });
        setActiveTab("mass");

        const nReactantsInput = document.getElementById("n-reactants");
        const nProductsInput = document.getElementById("n-products");

        function createRow(index, type, mode) {
          const wrapper = document.createElement("div");
          wrapper.className = "flex items-center gap-2 text-sm";
          const label = document.createElement("span");
          label.className = "w-6 text-xs text-gray-500 font-bold";
          label.textContent = (type === 'reactant' ? "R" : "P") + (index + 1);
          
          const qty = document.createElement("input");
          qty.type = "number";
          qty.min = "0";
          qty.step = "1";
          qty.value = "1";
          qty.className = "w-16 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-xs";
          qty.placeholder = "Count";
          qty.dataset.role = type;
          qty.dataset.kind = "count";

          const val = document.createElement("input");
          val.type = "number";
          val.min = "0";
          val.step = "any";
          val.className = "flex-1 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-xs";
          val.dataset.role = type;
          val.dataset.kind = mode;

          if (mode === "mass") val.placeholder = "Mass (u)";
          else if (mode === "binding") val.placeholder = "B.E. (MeV)";
          else if (mode === "excess") val.placeholder = "Excess (MeV)";

          wrapper.appendChild(label);
          wrapper.appendChild(qty);
          wrapper.appendChild(val);
          return wrapper;
        }

        function rebuildRows() {
          const nR = Math.max(1, Math.min(6, parseInt(nReactantsInput.value, 10) || 1));
          const nP = Math.max(1, Math.min(6, parseInt(nProductsInput.value, 10) || 1));
          
          ['mass', 'binding', 'excess'].forEach(mode => {
             const rContainer = document.getElementById(`reactants-${mode === 'mass' ? '' : mode + '-'}container`);
             const pContainer = document.getElementById(`products-${mode === 'mass' ? '' : mode + '-'}container`);
             if(rContainer && pContainer) {
                 rContainer.innerHTML = "";
                 pContainer.innerHTML = "";
                 for (let i = 0; i < nR; i++) rContainer.appendChild(createRow(i, "reactant", mode));
                 for (let i = 0; i < nP; i++) pContainer.appendChild(createRow(i, "product", mode));
             }
          });
        }

        nReactantsInput.addEventListener("change", rebuildRows);
        nProductsInput.addEventListener("change", rebuildRows);
        rebuildRows(); // Init

        const computeBtn = document.getElementById("compute-btn");
        const resetBtn = document.getElementById("reset-btn");
        const warningEl = document.getElementById("input-warning");
        const resultsSection = document.getElementById("results-section");
        const qOutput = document.getElementById("qvalue-output");
        const reactionTypeEl = document.getElementById("reaction-type");
        const interpEl = document.getElementById("interpretation-text");
        const energyUnitsSelect = document.getElementById("energy-units");

        function sumContributions(kind, role) {
          const selector = `[data-role="${role}"][data-kind="${kind}"]`;
          const values = document.querySelectorAll(selector);
          let total = 0;
          values.forEach((input) => {
            const qtyInput = input.parentElement.querySelector('[data-kind="count"]');
            const qty = parseFloat(qtyInput.value) || 0;
            const val = parseFloat(input.value) || 0;
            total += qty * val;
          });
          return total;
        }

        function formatEnergy(valueMeV, unit) {
            if (unit === "MeV") return valueMeV.toFixed(4) + " MeV";
            const joules = valueMeV * MEV_TO_J;
            return (Math.abs(joules) < 1e-9 || Math.abs(joules) > 1e3) 
                   ? joules.toExponential(4) + " J" 
                   : joules.toFixed(6) + " J";
        }

        function classifyReaction(qMeV) {
          if (isNaN(qMeV)) return "—";
          if (Math.abs(qMeV) < 1e-6) return "Energy Neutral";
          return qMeV > 0 ? "Exothermic (Releases Energy)" : "Endothermic (Absorbs Energy)";
        }

        computeBtn.addEventListener("click", () => {
          warningEl.classList.add("hidden");
          let qMeV = 0;

          if (currentMode === "mass") {
            const sumReact = sumContributions("mass", "reactant");
            const sumProd = sumContributions("mass", "product");
            if (sumReact === 0 && sumProd === 0) {
               warningEl.classList.remove("hidden");
               return;
            }
            qMeV = (sumReact - sumProd) * U_TO_MEV;
          } else if (currentMode === "binding") {
            // Q = BE_products - BE_reactants
            const sumReactB = sumContributions("binding", "reactant");
            const sumProdB = sumContributions("binding", "product");
            qMeV = sumProdB - sumReactB;
          } else if (currentMode === "excess") {
             // Q = Excess_reactants - Excess_products
            const sumReactEx = sumContributions("excess", "reactant");
            const sumProdEx = sumContributions("excess", "product");
            qMeV = sumReactEx - sumProdEx;
          }

          const unit = energyUnitsSelect.value;
          qOutput.textContent = formatEnergy(qMeV, unit);
          reactionTypeEl.textContent = classifyReaction(qMeV);
          
          if(qMeV > 0) {
              interpEl.innerHTML = `<strong>Result:</strong> Since Q > 0, mass has been converted into ${formatEnergy(qMeV, unit)} of kinetic energy.`;
          } else {
              interpEl.innerHTML = `<strong>Result:</strong> Since Q < 0, an energy input of at least ${formatEnergy(Math.abs(qMeV), unit)} is required for this reaction to occur (threshold energy).`;
          }
          
          resultsSection.classList.remove("hidden");
        });

        resetBtn.addEventListener("click", () => {
          nReactantsInput.value = 2;
          nProductsInput.value = 2;
          rebuildRows();
          warningEl.classList.add("hidden");
          resultsSection.classList.add("hidden");
        });

        // Example loaders logic 
        document.querySelectorAll(".example-btn").forEach((btn) => {
          btn.addEventListener("click", () => {
            const ex = btn.dataset.example;
            setActiveTab("mass");
            document.getElementById("unit-system").value = "atomic";
            
            if (ex === "fusion") {
                // D + T -> He4 + n
                nReactantsInput.value = 2; nProductsInput.value = 2;
                rebuildRows();
                
                // Set Values manually for the specific Inputs (a bit brittle but works for demo)
                const inputsR = document.querySelectorAll('#panel-mass #reactants-container input[data-kind="mass"]');
                if(inputsR[0]) inputsR[0].value = 2.014102; 
                if(inputsR[1]) inputsR[1].value = 3.016049;
                
                const inputsP = document.querySelectorAll('#panel-mass #products-container input[data-kind="mass"]');
                if(inputsP[0]) inputsP[0].value = 4.002603;
                if(inputsP[1]) inputsP[1].value = 1.008665;
            } else if (ex === "fission") {
                nReactantsInput.value = 2; nProductsInput.value = 3;
                rebuildRows();
                 // U-235 + n -> Ba-141 + Kr-92 + 3n
                const inputsR = document.querySelectorAll('#panel-mass #reactants-container input[data-kind="mass"]');
                if(inputsR[0]) inputsR[0].value = 235.043930; 
                if(inputsR[1]) inputsR[1].value = 1.008665;
                
                const inputsP = document.querySelectorAll('#panel-mass #products-container input[data-kind="mass"]');
                if(inputsP[0]) inputsP[0].value = 140.9144;
                if(inputsP[1]) inputsP[1].value = 91.9262;
                if(inputsP[2]) { inputsP[2].value = 1.008665; inputsP[2].previousSibling.value = 3; } // 3 neutrons
            }
            resultsSection.classList.add("hidden");
          });
        });
      })();
    </script>
  
<script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"
    ></script>
<script>
      window.__cmpLoadQueued = window.__cmpLoadQueued || [];
      window.addEventListener("load", function () {
        var loadCmp = function () {
          var s1 = document.createElement("script");
          s1.src = "https://cmp.gatekeeperconsent.com/min.js";
          s1.async = true;
          s1.setAttribute("data-cfasync", "false");
          document.head.appendChild(s1);

          var s2 = document.createElement("script");
          s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
          s2.async = true;
          s2.setAttribute("data-cfasync", "false");
          document.head.appendChild(s2);
        };

        if ("requestIdleCallback" in window) {
          requestIdleCallback(loadCmp, { timeout: 2000 });
        } else {
          setTimeout(loadCmp, 1000);
        }
      });
    </script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/sales-tax" />
    <title>Sales Tax Calculator Guide [Unmissable 2024] | CalcDomain</title>
    <meta name="description" content="Calculate Sales Tax Calculator Guide fast with our unmissable tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Sales Tax Calculator Guide [Unmissable 2024] | CalcDomain" />
    <meta property="og:description" content="Calculate Sales Tax Calculator Guide fast with our unmissable tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />
    <meta property="og:url" content="https://calcdomain.com/sales-tax" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Sales Tax Calculator Guide [Unmissable 2024] | CalcDomain" />
    <meta name="twitter:description" content="Calculate Sales Tax Calculator Guide fast with our unmissable tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "Taxes Calculators", "item": "https://calcdomain.com/subcategories/taxes"}, {"@type": "ListItem", "position": 4, "name": "Sales Tax Calculator (by State/Province)", "item": "https://calcdomain.com/sales-tax"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/taxes" class="text-blue-600 hover:underline">Taxes Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Sales Tax Calculator (by State/Province)</span></li>
  </ol>
</nav>

      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Sales Tax Calculator (by State/Province)
              </h1>
              <p class="text-gray-600">
                Calculate sales tax and total price for any US state or Canadian
                province. Supports pre-tax and tax-included prices, plus custom
                rates for local taxes, VAT, or GST.
              </p>
            </header>

            <!-- Calculator UI -->
            <section aria-label="Sales tax calculator" class="space-y-6">
              <!-- Country & Region -->
              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label
                    for="country"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Country</label
                  >
                  <select
                    id="country"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    <option value="US">United States</option>
                    <option value="CA">Canada</option>
                  </select>
                </div>
                <div>
                  <label
                    for="region"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >State / Province</label
                  >
                  <select
                    id="region"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    <!-- options populated by JS -->
                  </select>
                  <p id="region-note" class="mt-1 text-xs text-gray-500">
                    Rates are typical combined state + average local sales tax.
                    Actual local rates may vary.
                  </p>
                </div>
              </div>

              <!-- Mode toggle -->
              <div class="flex flex-wrap items-center gap-4 mt-2">
                <span class="text-sm font-medium text-gray-700">Mode:</span>
                <div
                  class="inline-flex rounded-md shadow-sm border border-gray-200 overflow-hidden"
                  role="group"
                  aria-label="Calculation mode"
                >
                  <button
                    type="button"
                    id="mode-pre-tax"
                    class="px-3 py-1.5 text-sm font-medium bg-blue-600 text-white focus:outline-none"
                  >
                    Price before tax → Total
                  </button>
                  <button
                    type="button"
                    id="mode-tax-included"
                    class="px-3 py-1.5 text-sm font-medium bg-white text-gray-700 hover:bg-gray-50 focus:outline-none"
                  >
                    Total (tax included) → Price
                  </button>
                </div>
              </div>

              <!-- Amount & rate -->
              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label
                    for="amount"
                    id="amount-label"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Price before tax</label
                  >
                  <div class="relative">
                    <span
                      class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400"
                      >$</span
                    >
                    <input
                      type="number"
                      id="amount"
                      min="0"
                      step="0.01"
                      inputmode="decimal"
                      class="w-full border border-gray-300 rounded-md pl-7 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      placeholder="e.g. 100.00"
                    />
                  </div>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Tax rate</label
                  >
                  <div class="flex items-center gap-2">
                    <input
                      type="number"
                      id="rate"
                      min="0"
                      step="0.01"
                      inputmode="decimal"
                      class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      aria-describedby="rate-help"
                    />
                    <span class="text-gray-700 font-medium">%</span>
                  </div>
                  <p id="rate-help" class="mt-1 text-xs text-gray-500">
                    Using
                    <span id="rate-source" class="font-semibold"
                      >default regional rate</span
                    >.
                    <button
                      id="reset-rate"
                      type="button"
                      class="text-blue-600 hover:underline ml-1 text-xs hidden"
                    >
                      Reset to default
                    </button>
                  </p>
                </div>
              </div>

              <!-- Quantity & discount -->
              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label
                    for="quantity"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Quantity (optional)</label
                  >
                  <input
                    type="number"
                    id="quantity"
                    min="1"
                    step="1"
                    value="1"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  />
                </div>
                <div>
                  <label
                    for="discount"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Discount (optional)</label
                  >
                  <div class="flex gap-2">
                    <div class="relative flex-1">
                      <span
                        class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400"
                        id="discount-prefix"
                        >$</span
                      >
                      <input
                        type="number"
                        id="discount"
                        min="0"
                        step="0.01"
                        inputmode="decimal"
                        class="w-full border border-gray-300 rounded-md pl-7 pr-10 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="0.00"
                      />
                      <span
                        class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400"
                        id="discount-suffix"
                      ></span>
                    </div>
                    <select
                      id="discount-type"
                      class="w-28 border border-gray-300 rounded-md px-2 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      <option value="amount">Amount</option>
                      <option value="percent">% off</option>
                    </select>
                  </div>
                  <p class="mt-1 text-xs text-gray-500">
                    Discount is applied before tax.
                  </p>
                </div>
              </div>

              <!-- Buttons -->
              <div class="flex flex-wrap items-center gap-3 mt-2">
                <button
                  id="calculate-btn"
                  type="button"
                  class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  Calculate
                </button>
                <button
                  id="clear-btn"
                  type="button"
                  class="inline-flex items-center px-4 py-2 bg-white text-gray-700 text-sm font-medium rounded-md border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  Clear
                </button>
                <p id="error-msg" class="text-sm text-red-600 hidden"></p>
              </div>

              <!-- Results -->
              <section aria-label="Sales tax results" class="mt-4">
                <div class="grid md:grid-cols-2 gap-4">
                  <div class="bg-blue-50 border border-blue-100 rounded-lg p-4">
                    <h2 class="text-sm font-semibold text-blue-800 mb-2">
                      Summary
                    </h2>
                    <dl class="space-y-1 text-sm">
                      <div class="flex justify-between">
                        <dt class="text-gray-600" id="summary-base-label">
                          Price before tax
                        </dt>
                        <dd class="font-medium" id="summary-base">$0.00</dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Quantity</dt>
                        <dd class="font-medium" id="summary-qty">1</dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Subtotal (after discount)</dt>
                        <dd class="font-medium" id="summary-subtotal">$0.00</dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Sales tax</dt>
                        <dd class="font-medium" id="summary-tax">$0.00</dd>
                      </div>
                      <div
                        class="flex justify-between border-t border-blue-100 pt-2 mt-1"
                      >
                        <dt
                          class="text-gray-800 font-semibold"
                          id="summary-total-label"
                        >
                          Total with tax
                        </dt>
                        <dd
                          class="font-semibold text-blue-900"
                          id="summary-total"
                        >
                          $0.00
                        </dd>
                      </div>
                    </dl>
                  </div>
                  <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                    <h2 class="text-sm font-semibold text-gray-800 mb-2">
                      Effective rate & per-unit
                    </h2>
                    <dl class="space-y-1 text-sm">
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Effective tax rate</dt>
                        <dd class="font-medium" id="summary-rate">0.00%</dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Tax per unit</dt>
                        <dd class="font-medium" id="summary-tax-unit">$0.00</dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Total per unit</dt>
                        <dd class="font-medium" id="summary-total-unit">
                          $0.00
                        </dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Discount per unit</dt>
                        <dd class="font-medium" id="summary-discount-unit">
                          $0.00
                        </dd>
                      </div>
                    </dl>
                  </div>
                </div>
              </section>

              <!-- Quick examples -->
              <section aria-label="Quick examples" class="mt-4">
                <h2 class="text-sm font-semibold text-gray-800 mb-2">
                  Quick examples
                </h2>
                <div class="flex flex-wrap gap-2">
                  <button
                    type="button"
                    data-example="us-ny-100"
                    class="px-3 py-1.5 text-xs rounded-full border border-gray-300 text-gray-700 hover:bg-gray-100"
                  >
                    NY: $100 purchase
                  </button>
                  <button
                    type="button"
                    data-example="us-ca-49_99"
                    class="px-3 py-1.5 text-xs rounded-full border border-gray-300 text-gray-700 hover:bg-gray-100"
                  >
                    CA: $49.99 item
                  </button>
                  <button
                    type="button"
                    data-example="ca-on-100"
                    class="px-3 py-1.5 text-xs rounded-full border border-gray-300 text-gray-700 hover:bg-gray-100"
                  >
                    Ontario: $100 (HST)
                  </button>
                  <button
                    type="button"
                    data-example="custom-vat-20"
                    class="px-3 py-1.5 text-xs rounded-full border border-gray-300 text-gray-700 hover:bg-gray-100"
                  >
                    Custom 20% VAT
                  </button>
                </div>
              </section>
            </section>

            <!-- Explanatory content -->
            <section class="mt-8 prose">
              <h2>How this sales tax calculator works</h2>
              <p>
                This tool helps you quickly estimate sales tax and total price
                for purchases in any US state or Canadian province. It supports
                both directions:
              </p>
              <ul>
                <li>
                  <strong>Price before tax → Total with tax</strong> (most
                  common at checkout)
                </li>
                <li>
                  <strong>Total with tax → Price before tax</strong> (useful for
                  receipts and accounting)
                </li>
              </ul>

              <h3>Formulas used</h3>
              <div class="formula-box text-sm">
                <p class="font-semibold mb-1">
                  1. When you know the price before tax:
                </p>
                <p>Let:</p>
                <ul>
                  <li><code>P</code> = price before tax</li>
                  <li><code>r</code> = tax rate (as a percentage, e.g. 7.5)</li>
                  <li><code>Q</code> = quantity</li>
                </ul>
                <p>Then:</p>
                <p><code>Subtotal = P × Q − Discount</code></p>
                <p><code>Tax = Subtotal × (r / 100)</code></p>
                <p><code>Total = Subtotal + Tax</code></p>

                <p class="font-semibold mt-3 mb-1">
                  2. When you know the total (tax included):
                </p>
                <ul>
                  <li><code>T</code> = total price including tax</li>
                </ul>
                <p>Then the price before tax is:</p>
                <p><code>Price before tax = T ÷ (1 + r / 100)</code></p>
                <p><code>Tax = T − Price before tax</code></p>
              </div>

              <h3>Default sales tax rates vs. custom rates</h3>
              <p>
                For each US state and Canadian province, the calculator loads a
                <strong>typical combined rate</strong> that includes:
              </p>
              <ul>
                <li>The state or provincial sales tax rate</li>
                <li>
                  An estimate of average local (city/county) sales tax where
                  applicable
                </li>
              </ul>
              <p>
                Local rates can vary significantly within a state or province.
                If you need an exact figure for a specific city or postal code,
                enter your own <strong>custom rate</strong> in the Tax rate
                field. The math is identical regardless of the jurisdiction.
              </p>

              <h3>Using the calculator for VAT or GST</h3>
              <p>
                Value-added tax (VAT) and goods and services tax (GST) are
                calculated the same way as sales tax: a percentage of the
                taxable price. To use this tool for VAT or GST:
              </p>
              <ol>
                <li>
                  Select any country/region (it does not affect the math).
                </li>
                <li>
                  Override the rate with your VAT/GST percentage (e.g. 20% or
                  7.5%).
                </li>
                <li>Use either pre-tax or tax-included mode as needed.</li>
              </ol>

              <h2>Understanding sales tax in the US and Canada</h2>
              <h3>United States</h3>
              <p>
                In the US, sales tax is typically imposed at the
                <strong>state</strong> level, with many states allowing
                <strong>local jurisdictions</strong> (cities, counties, special
                districts) to add their own rates. Some key points:
              </p>
              <ul>
                <li>
                  Five states (e.g. Delaware, Montana, New Hampshire, Oregon)
                  have <strong>no state-level sales tax</strong>.
                </li>
                <li>
                  Most states tax retail sales of tangible personal property;
                  services may or may not be taxable.
                </li>
                <li>
                  Online and remote sellers may be required to collect tax based
                  on <strong>economic nexus</strong> rules.
                </li>
              </ul>

              <h3>Canada</h3>
              <p>
                Canada uses a mix of federal <strong>GST</strong> and provincial
                sales tax systems:
              </p>
              <ul>
                <li>
                  Some provinces use a combined <strong>HST</strong> (Harmonized
                  Sales Tax).
                </li>
                <li>
                  Others have separate <strong>PST</strong> (provincial sales
                  tax) plus federal GST.
                </li>
                <li>A few provinces charge only GST on most purchases.</li>
              </ul>

              <h3>Common use cases</h3>
              <ul>
                <li>
                  Checking the final price of a big-ticket item before you buy.
                </li>
                <li>Estimating sales tax for budgeting or travel.</li>
                <li>
                  Backing out tax from a receipt to find the pre-tax amount.
                </li>
                <li>
                  Comparing effective tax rates across states or provinces.
                </li>
              </ul>

              <h2>Limitations and disclaimer</h2>
              <p>
                This calculator is designed for
                <strong>quick estimates and education</strong>. It does not:
              </p>
              <ul>
                <li>
                  Determine whether a particular item or service is taxable or
                  exempt.
                </li>
                <li>
                  Handle special rules such as tax holidays, thresholds, or
                  reduced rates.
                </li>
                <li>
                  Replace professional tax advice or official guidance from tax
                  authorities.
                </li>
              </ul>
              <p>
                Always verify current rates and rules with your state,
                provincial, or local tax agency, or consult a qualified tax
                professional before filing returns or making tax-sensitive
                decisions.
              </p>
            </section>

            <!-- FAQ -->
            <section class="mt-8">
              <h2 class="text-xl font-semibold mb-3">
                Sales tax calculator FAQ
              </h2>
              <div class="space-y-3" id="faq-container">
                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="w-full flex justify-between items-center px-4 py-3 text-left faq-question"
                  >
                    <span class="font-medium text-gray-800"
                      >How do I use this sales tax calculator?</span
                    >
                    <span class="ml-2 text-gray-500">+</span>
                  </button>
                  <div
                    class="px-4 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    Choose your country and state/province, enter the price
                    (either before tax or including tax), adjust quantity or
                    discount if needed, and click “Calculate”. The tool shows
                    subtotal, tax amount, total, and per-unit values.
                  </div>
                </div>
                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="w-full flex justify-between items-center px-4 py-3 text-left faq-question"
                  >
                    <span class="font-medium text-gray-800"
                      >Does this include local city/county sales tax?</span
                    >
                    <span class="ml-2 text-gray-500">+</span>
                  </button>
                  <div
                    class="px-4 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    The default rate is a typical combined state + average local
                    rate for each region. Because local rates vary by city and
                    county, your actual rate may be higher or lower. If you know
                    your exact combined rate, enter it in the Tax rate field for
                    a precise calculation.
                  </div>
                </div>
                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="w-full flex justify-between items-center px-4 py-3 text-left faq-question"
                  >
                    <span class="font-medium text-gray-800"
                      >What is the difference between pre-tax and tax-included
                      mode?</span
                    >
                    <span class="ml-2 text-gray-500">+</span>
                  </button>
                  <div
                    class="px-4 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    In pre-tax mode, you enter the price before tax and the
                    calculator adds sales tax to show the total. In tax-included
                    mode, you enter the total amount you paid (including tax),
                    and the calculator works backwards to find the pre-tax price
                    and the tax portion.
                  </div>
                </div>
                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="w-full flex justify-between items-center px-4 py-3 text-left faq-question"
                  >
                    <span class="font-medium text-gray-800"
                      >Can I use this for business accounting or tax
                      returns?</span
                    >
                    <span class="ml-2 text-gray-500">+</span>
                  </button>
                  <div
                    class="px-4 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    You can use this tool for rough planning and sanity checks,
                    but it is not a substitute for official tax software or
                    professional advice. For filing returns, you should rely on
                    up-to-date official rates and rules, and consult a tax
                    professional if needed.
                  </div>
                </div>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Sales, Tax.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Sales, Tax.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>

        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">Related tax calculators</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/taxes"
                  class="text-blue-600 hover:underline"
                  >All Tax Calculators</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/income-tax-calculator"
                  class="text-blue-600 hover:underline"
                  >Income Tax Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/vat"
                  class="text-blue-600 hover:underline"
                  >VAT Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/reverse-sales-tax"
                  class="text-blue-600 hover:underline"
                  >Reverse Sales Tax</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/payroll-take-home-pay"
                  class="text-blue-600 hover:underline"
                  >Take-Home Pay (Payroll)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/tax-refund-calculator"
                  class="text-blue-600 hover:underline"
                  >Tax Refund Estimator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/capital-gains-tax"
                  class="text-blue-600 hover:underline"
                  >Capital Gains Tax</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/property-tax"
                  class="text-blue-600 hover:underline"
                  >Property Tax Calculator</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Popular Finance tools</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-blue-600 hover:underline"
                  >Mortgage Payment Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/compound-interest-calculator"
                  class="text-blue-600 hover:underline"
                  >Compound Interest</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/roi"
                  class="text-blue-600 hover:underline"
                  >Investment Return (ROI)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/50-30-20-budget"
                  class="text-blue-600 hover:underline"
                  >50/30/20 Budget</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/paycheck"
                  class="text-blue-600 hover:underline"
                  >Paycheck Calculator</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>

    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        document
          .querySelectorAll("#faq-container .faq-question")
          .forEach(function (btn) {
            btn.addEventListener("click", function () {
              const answer = btn.parentElement.querySelector(".faq-answer");
              const symbol = btn.querySelector("span:last-child");
              const isHidden = answer.classList.contains("hidden");
              document
                .querySelectorAll("#faq-container .faq-answer")
                .forEach((a) => a.classList.add("hidden"));
              document
                .querySelectorAll(
                  "#faq-container .faq-question span:last-child"
                )
                .forEach((s) => (s.textContent = "+"));
              if (isHidden) {
                answer.classList.remove("hidden");
                symbol.textContent = "−";
              }
            });
          });
      });
    </script>

    <script>
      // Sales tax calculator logic
      document.addEventListener("DOMContentLoaded", function () {
        const countryEl = document.getElementById("country");
        const regionEl = document.getElementById("region");
        const rateEl = document.getElementById("rate");
        const rateSourceEl = document.getElementById("rate-source");
        const resetRateBtn = document.getElementById("reset-rate");
        const amountEl = document.getElementById("amount");
        const quantityEl = document.getElementById("quantity");
        const discountEl = document.getElementById("discount");
        const discountTypeEl = document.getElementById("discount-type");
        const discountPrefixEl = document.getElementById("discount-prefix");
        const discountSuffixEl = document.getElementById("discount-suffix");
        const modePreTaxBtn = document.getElementById("mode-pre-tax");
        const modeTaxIncludedBtn = document.getElementById("mode-tax-included");
        const amountLabelEl = document.getElementById("amount-label");
        const calculateBtn = document.getElementById("calculate-btn");
        const clearBtn = document.getElementById("clear-btn");
        const errorMsgEl = document.getElementById("error-msg");

        const summaryBaseLabel = document.getElementById("summary-base-label");
        const summaryBase = document.getElementById("summary-base");
        const summaryQty = document.getElementById("summary-qty");
        const summarySubtotal = document.getElementById("summary-subtotal");
        const summaryTax = document.getElementById("summary-tax");
        const summaryTotalLabel = document.getElementById(
          "summary-total-label"
        );
        const summaryTotal = document.getElementById("summary-total");
        const summaryRate = document.getElementById("summary-rate");
        const summaryTaxUnit = document.getElementById("summary-tax-unit");
        const summaryTotalUnit = document.getElementById("summary-total-unit");
        const summaryDiscountUnit = document.getElementById(
          "summary-discount-unit"
        );

        const exampleButtons = document.querySelectorAll("[data-example]");

        // Approximate combined state/province + average local rates (illustrative only)
        const ratesUS = {
          AL: 9.25,
          AK: 1.76,
          AZ: 8.4,
          AR: 9.47,
          CA: 8.82,
          CO: 7.77,
          CT: 6.35,
          DE: 0.0,
          FL: 7.02,
          GA: 7.4,
          HI: 4.44,
          ID: 6.03,
          IL: 8.82,
          IN: 7.0,
          IA: 6.94,
          KS: 8.7,
          KY: 6.0,
          LA: 9.55,
          ME: 5.5,
          MD: 6.0,
          MA: 6.25,
          MI: 6.0,
          MN: 7.49,
          MS: 7.07,
          MO: 8.3,
          MT: 0.0,
          NE: 6.95,
          NV: 8.23,
          NH: 0.0,
          NJ: 6.6,
          NM: 7.84,
          NY: 8.52,
          NC: 6.98,
          ND: 6.96,
          OH: 7.24,
          OK: 8.98,
          OR: 0.0,
          PA: 6.34,
          RI: 7.0,
          SC: 7.44,
          SD: 6.4,
          TN: 9.55,
          TX: 8.2,
          UT: 7.19,
          VT: 6.35,
          VA: 5.75,
          WA: 9.38,
          WV: 6.55,
          WI: 5.43,
          WY: 5.36,
          DC: 6.0,
        };

        const ratesCA = {
          AB: 5.0, // GST only
          BC: 12.0, // 5% GST + 7% PST
          MB: 12.0, // 5% GST + 7% PST
          NB: 15.0, // HST
          NL: 15.0, // HST
          NS: 15.0, // HST
          NT: 5.0, // GST
          NU: 5.0, // GST
          ON: 13.0, // HST
          PE: 15.0, // HST
          QC: 14.975, // 5% GST + 9.975% QST
          SK: 11.0, // 5% GST + 6% PST
          YT: 5.0, // GST
        };

        const regionsUS = [
          ["AL", "Alabama"],
          ["AK", "Alaska"],
          ["AZ", "Arizona"],
          ["AR", "Arkansas"],
          ["CA", "California"],
          ["CO", "Colorado"],
          ["CT", "Connecticut"],
          ["DE", "Delaware"],
          ["FL", "Florida"],
          ["GA", "Georgia"],
          ["HI", "Hawaii"],
          ["ID", "Idaho"],
          ["IL", "Illinois"],
          ["IN", "Indiana"],
          ["IA", "Iowa"],
          ["KS", "Kansas"],
          ["KY", "Kentucky"],
          ["LA", "Louisiana"],
          ["ME", "Maine"],
          ["MD", "Maryland"],
          ["MA", "Massachusetts"],
          ["MI", "Michigan"],
          ["MN", "Minnesota"],
          ["MS", "Mississippi"],
          ["MO", "Missouri"],
          ["MT", "Montana"],
          ["NE", "Nebraska"],
          ["NV", "Nevada"],
          ["NH", "New Hampshire"],
          ["NJ", "New Jersey"],
          ["NM", "New Mexico"],
          ["NY", "New York"],
          ["NC", "North Carolina"],
          ["ND", "North Dakota"],
          ["OH", "Ohio"],
          ["OK", "Oklahoma"],
          ["OR", "Oregon"],
          ["PA", "Pennsylvania"],
          ["RI", "Rhode Island"],
          ["SC", "South Carolina"],
          ["SD", "South Dakota"],
          ["TN", "Tennessee"],
          ["TX", "Texas"],
          ["UT", "Utah"],
          ["VT", "Vermont"],
          ["VA", "Virginia"],
          ["WA", "Washington"],
          ["WV", "West Virginia"],
          ["WI", "Wisconsin"],
          ["WY", "Wyoming"],
          ["DC", "District of Columbia"],
        ];

        const regionsCA = [
          ["AB", "Alberta"],
          ["BC", "British Columbia"],
          ["MB", "Manitoba"],
          ["NB", "New Brunswick"],
          ["NL", "Newfoundland and Labrador"],
          ["NS", "Nova Scotia"],
          ["NT", "Northwest Territories"],
          ["NU", "Nunavut"],
          ["ON", "Ontario"],
          ["PE", "Prince Edward Island"],
          ["QC", "Quebec"],
          ["SK", "Saskatchewan"],
          ["YT", "Yukon"],
        ];

        let currentMode = "pre-tax"; // 'pre-tax' or 'tax-included'
        let defaultRate = 0;

        function formatMoney(value) {
          if (!isFinite(value)) return "$0.00";
          return "$" + value.toFixed(2);
        }

        function populateRegions() {
          const country = countryEl.value;
          regionEl.innerHTML = "";
          const list = country === "US" ? regionsUS : regionsCA;
          list.forEach(([code, name]) => {
            const opt = document.createElement("option");
            opt.value = code;
            opt.textContent = `${name} (${code})`;
            regionEl.appendChild(opt);
          });
          regionEl.selectedIndex = 0;
          updateRateFromRegion();
        }

        function updateRateFromRegion() {
          const country = countryEl.value;
          const region = regionEl.value;
          if (country === "US") {
            defaultRate = ratesUS[region] != null ? ratesUS[region] : 0;
          } else {
            defaultRate = ratesCA[region] != null ? ratesCA[region] : 0;
          }
          rateEl.value = defaultRate.toFixed(3).replace(/\.?0+$/, "");
          rateSourceEl.textContent = "default regional rate";
          resetRateBtn.classList.add("hidden");
        }

        function setMode(mode) {
          currentMode = mode;
          if (mode === "pre-tax") {
            modePreTaxBtn.classList.add("bg-blue-600", "text-white");
            modePreTaxBtn.classList.remove("bg-white", "text-gray-700");
            modeTaxIncludedBtn.classList.remove("bg-blue-600", "text-white");
            modeTaxIncludedBtn.classList.add("bg-white", "text-gray-700");
            amountLabelEl.textContent = "Price before tax";
            summaryBaseLabel.textContent = "Price before tax";
            summaryTotalLabel.textContent = "Total with tax";
          } else {
            modeTaxIncludedBtn.classList.add("bg-blue-600", "text-white");
            modeTaxIncludedBtn.classList.remove("bg-white", "text-gray-700");
            modePreTaxBtn.classList.remove("bg-blue-600", "text-white");
            modePreTaxBtn.classList.add("bg-white", "text-gray-700");
            amountLabelEl.textContent = "Total (tax included)";
            summaryBaseLabel.textContent = "Total (tax included)";
            summaryTotalLabel.textContent = "Price before tax (per unit)";
          }
          clearResults();
        }

        function clearResults() {
          summaryBase.textContent = "$0.00";
          summaryQty.textContent = "1";
          summarySubtotal.textContent = "$0.00";
          summaryTax.textContent = "$0.00";
          summaryTotal.textContent = "$0.00";
          summaryRate.textContent = "0.00%";
          summaryTaxUnit.textContent = "$0.00";
          summaryTotalUnit.textContent = "$0.00";
          summaryDiscountUnit.textContent = "$0.00";
        }

        function showError(msg) {
          errorMsgEl.textContent = msg;
          errorMsgEl.classList.remove("hidden");
        }

        function clearError() {
          errorMsgEl.textContent = "";
          errorMsgEl.classList.add("hidden");
        }

        function calculate() {
          clearError();
          const amount = parseFloat(amountEl.value);
          const qty = parseInt(quantityEl.value, 10) || 1;
          const rate = parseFloat(rateEl.value);
          let discountVal = parseFloat(discountEl.value);
          const discountType = discountTypeEl.value;

          if (!isFinite(amount) || amount < 0) {
            showError("Enter a valid amount (zero or greater).");
            return;
          }
          if (!isFinite(rate) || rate < 0) {
            showError("Enter a valid tax rate (zero or greater).");
            return;
          }
          if (!isFinite(discountVal) || discountVal < 0) {
            discountVal = 0;
          }
          if (qty <= 0) {
            showError("Quantity must be at least 1.");
            return;
          }

          let basePerUnit, subtotal, tax, total, discountTotal;

          if (currentMode === "pre-tax") {
            basePerUnit = amount;
            let grossSubtotal = basePerUnit * qty;

            if (discountType === "percent") {
              if (discountVal > 100) {
                showError("Percent discount cannot exceed 100%.");
                return;
              }
              discountTotal = grossSubtotal * (discountVal / 100);
            } else {
              discountTotal = discountVal;
            }
            if (discountTotal > grossSubtotal) {
              showError("Discount cannot exceed subtotal.");
              return;
            }

            subtotal = grossSubtotal - discountTotal;
            tax = subtotal * (rate / 100);
            total = subtotal + tax;
          } else {
            // tax-included mode
            total = amount;
            if (rate === 0) {
              basePerUnit = total / qty;
              subtotal = total;
              tax = 0;
              discountTotal = 0;
            } else {
              const baseTotal = total / (1 + rate / 100);
              basePerUnit = baseTotal / qty;
              subtotal = baseTotal;
              tax = total - baseTotal;
              discountTotal = 0; // discount not applied in reverse mode to avoid ambiguity
            }
          }

          const effectiveRate = subtotal > 0 ? (tax / subtotal) * 100 : 0;
          const taxPerUnit = qty > 0 ? tax / qty : 0;
          const totalPerUnit = qty > 0 ? total / qty : 0;
          const discountPerUnit = qty > 0 ? (discountTotal || 0) / qty : 0;

          summaryBase.textContent = formatMoney(amount);
          summaryQty.textContent = String(qty);
          summarySubtotal.textContent = formatMoney(subtotal);
          summaryTax.textContent = formatMoney(tax);
          summaryTotal.textContent = formatMoney(total);
          summaryRate.textContent = (effectiveRate || 0).toFixed(2) + "%";
          summaryTaxUnit.textContent = formatMoney(taxPerUnit);
          summaryTotalUnit.textContent = formatMoney(totalPerUnit);
          summaryDiscountUnit.textContent = formatMoney(discountPerUnit);
        }

        function clearAll() {
          amountEl.value = "";
          quantityEl.value = "1";
          discountEl.value = "";
          discountTypeEl.value = "amount";
          discountPrefixEl.textContent = "$";
          discountSuffixEl.textContent = "";
          updateRateFromRegion();
          clearResults();
          clearError();
        }

        function handleDiscountTypeChange() {
          if (discountTypeEl.value === "percent") {
            discountPrefixEl.textContent = "";
            discountSuffixEl.textContent = "%";
            discountEl.placeholder = "e.g. 10";
          } else {
            discountPrefixEl.textContent = "$";
            discountSuffixEl.textContent = "";
            discountEl.placeholder = "0.00";
          }
        }

        // Detect custom rate changes
        rateEl.addEventListener("input", function () {
          const val = parseFloat(rateEl.value);
          if (!isFinite(val)) return;
          if (Math.abs(val - defaultRate) > 0.0001) {
            rateSourceEl.textContent = "custom rate";
            resetRateBtn.classList.remove("hidden");
          } else {
            rateSourceEl.textContent = "default regional rate";
            resetRateBtn.classList.add("hidden");
          }
        });

        resetRateBtn.addEventListener("click", function () {
          updateRateFromRegion();
        });

        countryEl.addEventListener("change", populateRegions);
        regionEl.addEventListener("change", updateRateFromRegion);
        modePreTaxBtn.addEventListener("click", function () {
          setMode("pre-tax");
        });
        modeTaxIncludedBtn.addEventListener("click", function () {
          setMode("tax-included");
        });
        calculateBtn.addEventListener("click", calculate);
        clearBtn.addEventListener("click", clearAll);
        discountTypeEl.addEventListener("change", handleDiscountTypeChange);

        // Quick examples
        exampleButtons.forEach((btn) => {
          btn.addEventListener("click", () => {
            const key = btn.getAttribute("data-example");
            clearAll();
            if (key === "us-ny-100") {
              countryEl.value = "US";
              populateRegions();
              regionEl.value = "NY";
              updateRateFromRegion();
              amountEl.value = "100";
            } else if (key === "us-ca-49_99") {
              countryEl.value = "US";
              populateRegions();
              regionEl.value = "CA";
              updateRateFromRegion();
              amountEl.value = "49.99";
            } else if (key === "ca-on-100") {
              countryEl.value = "CA";
              populateRegions();
              regionEl.value = "ON";
              updateRateFromRegion();
              amountEl.value = "100";
            } else if (key === "custom-vat-20") {
              countryEl.value = "US";
              populateRegions();
              regionEl.value = "CA";
              updateRateFromRegion();
              rateEl.value = "20";
              rateSourceEl.textContent = "custom rate";
              resetRateBtn.classList.remove("hidden");
              amountEl.value = "100";
            }
            calculate();
          });
        });

        // Initialize
        populateRegions();
        setMode("pre-tax");
        handleDiscountTypeChange();
      });
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

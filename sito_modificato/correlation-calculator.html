<!DOCTYPE html>
<html lang="en">
 <head>
  <link href="https://calcdomain.com/correlation-calculator" rel="canonical"/>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Correlation Calculator — Pearson r, p-value, Confidence Interval
  </title>
  <meta content="Compute Pearson correlation (r), R², covariance, t-test, p-value, and 95% confidence intervals. Paste paired data, get an interactive scatter plot and regression line." name="description"/>
  <!-- Icons / Manifest -->
  <link href="https://calcdomain.com/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"/>
  <link href="https://calcdomain.com/favicon.svg" rel="icon" type="image/svg+xml"/>
  <link href="https://calcdomain.com/favicon.ico" rel="shortcut icon"/>
  <link href="https://calcdomain.com/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
  <link href="https://calcdomain.com/site.webmanifest" rel="manifest"/>
  <!-- Tailwind (CDN) -->
  <script defer="" src="https://cdn.tailwindcss.com">
  </script>
  <!-- Chart.js (scatter + regression line) -->
  <script defer="" src="https://cdn.jsdelivr.net/npm/chart.js">
  </script>
  <!-- MathJax for LaTeX -->
  <script crossorigin="anonymous" defer="" id="MathJax-script" integrity="sha384-DvO9c3H7zS3m4nE5MWzJf7bQt2yY7b0Q0g5p6wT1x2GgKJwZ6p0UM2h0j8e5H9aL" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <!-- Critical styles (focus, prose, min-heights to prevent CLS) -->
  <style>
   body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; }
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 0.75rem; }
    .prose h3 { font-size: 1.125rem; font-weight: 600; margin-top: 1rem; margin-bottom: 0.5rem; }
    .prose p, .prose li { line-height: 1.65; }
    .formula-box { background:#f3f4f6; border:1px solid #d1d5db; border-radius:10px; padding:1rem; overflow:auto; font-family: ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .result-card { background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:1rem; text-align:center; }
    .result-card h4 { font-size:0.95rem; color:#4b5563; margin-bottom:0.25rem; }
    .result-card p { font-size:1.6rem; font-weight:800; color:#1d4ed8; }
    .a11y-focus:focus { outline: 3px solid #1d4ed8; outline-offset: 3px; border-radius: 6px; }
    /* Prevent CLS by reserving space */
    #results-summary { min-height: 170px; }
    #results-details { min-height: 180px; }
    #chartWrap { min-height: 260px; }
    /* Touch targets */
    button, .btn, input, select, textarea { min-height: 48px; }
    label .req { color:#b91c1c; }
    /* Table */
    th, td { border-bottom: 1px solid #e5e7eb; }
    /* Print */
    @media print {
      header, nav, aside, .no-print { display: none !important; }
      #print-section { position: static; box-shadow:none; }
    }
  </style>
  <!-- JSON-LD: WebApplication + Breadcrumbs + FAQ -->
  <script type="application/ld+json">
   {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Correlation Calculator",
    "url": "https://calcdomain.com/correlation-calculator",
    "applicationCategory": "EducationalApplication",
    "operatingSystem": "Web",
    "description": "Compute Pearson correlation (r), R², covariance, t-statistic, p-value, and 95% CI with an interactive scatter plot and regression line.",
    "inLanguage": "en",
    "author": { "@type": "Person", "name": "Ugo Candido" },
    "publisher": { "@type": "Organization", "name": "CalcDomain" }
  }
  </script>
  <script type="application/ld+json">
   {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Math & Conversions",
      "item": "https://calcdomain.com/math-conversions"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Algebra",
      "item": "https://calcdomain.com/subcategories/core-math-algebra"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Correlation Calculator",
      "item": "https://calcdomain.com/correlation-calculator"
    }
  ]
}
  </script>
  <script id="faq-jsonld" type="application/ld+json">
   {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": []
  }
  </script>
  <html>
   <head>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=TUO_ID_GA">
    </script>
    <script>
     window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'TUO_ID_GA');
    </script>
   </head>
  </html>
 </head>
 <body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky as requested) -->
  <header class="bg-white shadow-sm sticky top-0 z-50">
   <nav aria-label="Primary" class="container mx-auto px-4 lg:px-6 py-4">
    <div class="flex justify-between items-center">
     <a class="text-2xl font-bold text-blue-600" href="https://calcdomain.com">
      CalcDomain
     </a>
     <div class="w-full max-w-md hidden md:block mx-8">
      <div class="relative">
       <input autocomplete="off" class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="search-input" placeholder="Search for a calculator..." type="search"/>
       <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24">
        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
        </path>
       </svg>
       <div class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200" id="search-results">
       </div>
      </div>
     </div>
     <div class="hidden md:flex items-center space-x-6">
      <a class="text-gray-700 hover:text-blue-600 transition-colors" href="https://calcdomain.com/search">
       Advanced Search
      </a>
      <a class="text-gray-700 hover:text-blue-600 transition-colors" href="https://calcdomain.com/categories">
       Categories
      </a>
     </div>
     <button aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" class="md:hidden p-2" id="mobile-menu-toggle" type="button">
      <svg aria-hidden="true" class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24">
       <path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
       </path>
      </svg>
     </button>
    </div>
    <nav aria-label="Mobile menu" class="md:hidden mt-4 hidden" id="mobile-menu" role="navigation">
     <div class="mb-4">
      <div class="relative">
       <input class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" id="mobile-search-input" placeholder="Search calculators..." type="search"/>
       <svg aria-hidden="true" class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24">
        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
        </path>
       </svg>
      </div>
     </div>
     <div class="space-y-2">
      <a class="block py-2 text-gray-700 hover:text-blue-600" href="https://calcdomain.com/search">
       Advanced Search
      </a>
      <a class="block py-2 text-gray-700 hover:text-blue-600" href="https://calcdomain.com/categories">
       Categories
      </a>
     </div>
    </nav>
   </nav>
  </header>
  <html>
   <body>
    <nav class="container mx-auto px-4 py-2 text-sm text-gray-600" id="breadcrumb-container">
    </nav>
    <div class="container mx-auto px-4 py-8">
     <div class="flex flex-col lg:flex-row gap-8">
      <main class="w-full lg:w-2/3">
       <main class="container mx-auto px-4 lg:px-6 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
         <section class="w-full lg:w-2/3">
          <!-- Breadcrumb -->
          <nav aria-label="Breadcrumb" class="text-sm text-gray-600 mb-4">
           <a class="hover:text-blue-700 a11y-focus" href="https://calcdomain.com">
            Home
           </a>
           »
           <a class="hover:text-blue-700 a11y-focus" href="https://calcdomain.com/math">
            Math
           </a>
           »
           <a class="hover:text-blue-700 a11y-focus" href="https://calcdomain.com/subcategories/core-math-algebra">
            Algebra
           </a>
           »
           <span class="text-gray-900">
            Correlation Calculator
           </span>
          </nav>
          <!-- Title & Intro -->
          <div class="bg-white p-6 rounded-lg shadow" id="print-section">
           <h1 class="text-3xl font-extrabold mb-2">
            correlation calculator
           </h1>
           <p class="text-gray-700 mb-6">
            Paste or type paired data to compute Pearson’s correlation coefficient (
            <em>
             r
            </em>
            ), coefficient of determination (
            <em>
             R²
            </em>
            ), covariance, the
            <em>
             t
            </em>
            -test, two-tailed
            <em>
             p
            </em>
            -value, and 95% confidence interval via Fisher’s
            <em>
             z
            </em>
            . Built for analysts, researchers, and students who need fast, accurate, and auditable results.
           </p>
           <!-- Calculator UI -->
           <section aria-labelledby="calc-heading">
            <h2 class="sr-only" id="calc-heading">
             Correlation calculator input
            </h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
             <!-- Data Entry -->
             <div>
              <label class="block text-sm font-medium text-gray-800" for="dataInput">
               Paired data (two columns)
               <span aria-hidden="true" class="req">
                *
               </span>
              </label>
              <div class="flex items-start gap-2">
               <textarea aria-describedby="dataHelp dataError" aria-required="true" class="mt-1 block w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-600 a11y-focus" id="dataInput" placeholder="x,y pairs (comma, tab, or space separated)
10  8
12  9
13  11
15  14" rows="8"></textarea>
               <button aria-controls="dataHelp" aria-expanded="false" aria-label="Toggle data input help" class="no-print mt-1 px-3 rounded border border-gray-300 a11y-focus" id="dataHelpBtn" type="button">
                ?
               </button>
              </div>
              <p class="text-sm text-gray-600 mt-2 hidden" id="dataHelp">
               Provide two columns with the same number of rows. Delimiters allowed: comma, semicolon, tab, or space. Lines starting with
               <code>
                #
               </code>
               are ignored.
              </p>
              <p class="text-sm text-red-700 mt-2 hidden" id="dataError">
              </p>
              <div class="mt-3 flex flex-wrap gap-2 no-print">
               <button class="px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 a11y-focus" id="loadSample" type="button">
                Load sample
               </button>
               <button class="px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 a11y-focus" id="clearData" type="button">
                Clear
               </button>
               <button class="px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 a11y-focus" id="transpose" type="button">
                Transpose
               </button>
              </div>
             </div>
             <!-- Options -->
             <div>
              <fieldset class="border border-gray-200 rounded-lg p-4">
               <legend class="text-sm font-semibold text-gray-800 px-1">
                Options
               </legend>
               <div class="mt-2">
                <label class="block text-sm font-medium text-gray-800" for="alpha">
                 Significance level (α)
                 <span aria-hidden="true" class="req">
                  *
                 </span>
                </label>
                <select aria-required="true" class="mt-1 block w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-600 a11y-focus" id="alpha">
                 <option selected="" value="0.05">
                  0.05 (95% CI)
                 </option>
                 <option value="0.01">
                  0.01 (99% CI)
                 </option>
                 <option value="0.10">
                  0.10 (90% CI)
                 </option>
                </select>
               </div>
               <div class="mt-3">
                <label class="block text-sm font-medium text-gray-800" for="missing">
                 Missing values handling
                </label>
                <select aria-describedby="missingHelp" class="mt-1 block w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-600 a11y-focus" id="missing">
                 <option selected="" value="pairwise">
                  Pairwise: drop any row with a missing/invalid value
                 </option>
                </select>
                <p class="text-sm text-gray-600 mt-1" id="missingHelp">
                 Currently pairwise deletion is supported to ensure equal-length vectors.
                </p>
               </div>
               <div class="mt-4 flex gap-2">
                <button class="w-full px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 a11y-focus" id="calculateBtn" type="button">
                 Calculate
                </button>
                <button class="w-full px-4 py-2 rounded bg-gray-100 hover:bg-gray-200 a11y-focus" id="downloadCSV" type="button">
                 Download CSV
                </button>
               </div>
              </fieldset>
             </div>
            </div>
           </section>
           <!-- Results -->
           <section aria-labelledby="results-heading" class="mt-8">
            <h2 class="sr-only" id="results-heading">
             Results
            </h2>
            <div class="bg-blue-50 border border-blue-100 rounded-lg p-4" id="results-summary">
             <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
              <div class="result-card">
               <h4>
                n (pairs)
               </h4>
               <p id="resN">
                —
               </p>
              </div>
              <div class="result-card">
               <h4>
                Pearson r
               </h4>
               <p id="resR">
                —
               </p>
              </div>
              <div class="result-card">
               <h4>
                R²
               </h4>
               <p id="resR2">
                —
               </p>
              </div>
              <div class="result-card">
               <h4>
                p-value (two-tailed)
               </h4>
               <p id="resP">
                —
               </p>
              </div>
             </div>
            </div>
            <div class="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6" id="results-details">
             <div class="bg-white border border-gray-200 rounded-lg p-4">
              <h3 class="font-semibold mb-2">
               More statistics
              </h3>
              <dl class="grid grid-cols-2 gap-2 text-sm">
               <dt class="text-gray-600">
                t-statistic
               </dt>
               <dd class="text-gray-900" id="resT">
                —
               </dd>
               <dt class="text-gray-600">
                df
               </dt>
               <dd class="text-gray-900" id="resDf">
                —
               </dd>
               <dt class="text-gray-600">
                Covariance
               </dt>
               <dd class="text-gray-900" id="resCov">
                —
               </dd>
               <dt class="text-gray-600">
                Mean (x̄)
               </dt>
               <dd class="text-gray-900" id="resMeanX">
                —
               </dd>
               <dt class="text-gray-600">
                Mean (ȳ)
               </dt>
               <dd class="text-gray-900" id="resMeanY">
                —
               </dd>
               <dt class="text-gray-600">
                SD (x)
               </dt>
               <dd class="text-gray-900" id="resSx">
                —
               </dd>
               <dt class="text-gray-600">
                SD (y)
               </dt>
               <dd class="text-gray-900" id="resSy">
                —
               </dd>
               <dt class="text-gray-600">
                95% CI r
               </dt>
               <dd class="text-gray-900" id="resCI">
                —
               </dd>
              </dl>
              <div class="mt-4 flex flex-wrap gap-2 no-print">
               <button class="px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 a11y-focus" id="copyResults" type="button">
                Copy results
               </button>
               <button class="px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 a11y-focus" id="resetAll" type="button">
                Reset
               </button>
              </div>
             </div>
             <div class="bg-white border border-gray-200 rounded-lg p-4">
              <h3 class="font-semibold mb-2">
               Scatter plot &amp; regression line
              </h3>
              <div class="h-64" id="chartWrap">
               <canvas aria-label="Scatter plot with regression line" id="scatterChart">
               </canvas>
              </div>
              <div class="mt-3 text-sm text-gray-700">
               Line:
               <span id="regEquation">
                —
               </span>
              </div>
              <div class="mt-3 flex gap-2 no-print">
               <button class="px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 a11y-focus" id="downloadPNG" type="button">
                Download chart (PNG)
               </button>
              </div>
             </div>
            </div>
           </section>
           <!-- Authoritativeness section -->
           <section class="prose mt-10">
            <h2>
             Data Source &amp; Methodology
            </h2>
            <p>
             <strong>
              AuthoritativeDataSource:
             </strong>
             NIST/SEMATECH e-Handbook of Statistical Methods (Section:
             <em>
              Correlation
             </em>
             ), updated 2023. Also see Fisher, R.A. (1915) for the
             <em>
              z
             </em>
             transformation used for confidence intervals.
             <a class="text-blue-700 underline" href="https://itl.nist.gov/div898/handbook/" rel="nofollow">
              Visit source
             </a>
            </p>
            <p>
             <em>
              "Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte."
             </em>
            </p>
            <h2>
             The formula explained
            </h2>
            <div class="formula-box">
             \[
r=\frac{\sum_{i=1}^n (x_i-\bar{x})(y_i-\bar{y})}{\sqrt{\sum_{i=1}^n (x_i-\bar{x})^2}\sqrt{\sum_{i=1}^n (y_i-\bar{y})^2}}
\]
\[
t = r\sqrt{\frac{n-2}{1-r^2}}\quad \text{with df} = n-2
\]
\[
\text{Fisher } z = \frac{1}{2}\ln\left(\frac{1+r}{1-r}\right), \quad
\text{SE}_z = \frac{1}{\sqrt{n-3}}
\]
\[
z_\text{lower,upper} = z \pm z_{\alpha/2}\text{SE}_z \;\;\Rightarrow\;\;
r = \frac{e^{2z}-1}{e^{2z}+1}
\]
            </div>
            <h2>
             Glossary of variables
            </h2>
            <table class="w-full text-sm">
             <thead>
              <tr>
               <th class="text-left py-2">
                Symbol
               </th>
               <th class="text-left">
                Meaning
               </th>
              </tr>
             </thead>
             <tbody>
              <tr>
               <td>
                <code>
                 n
                </code>
               </td>
               <td>
                Number of paired observations
               </td>
              </tr>
              <tr>
               <td>
                <code>
                 r
                </code>
               </td>
               <td>
                Pearson correlation coefficient
               </td>
              </tr>
              <tr>
               <td>
                <code>
                 R²
                </code>
               </td>
               <td>
                Proportion of variance explained (
                <code>
                 r²
                </code>
                )
               </td>
              </tr>
              <tr>
               <td>
                <code>
                 t
                </code>
               </td>
               <td>
                t-statistic testing H₀: r = 0 with df = n − 2
               </td>
              </tr>
              <tr>
               <td>
                <code>
                 p
                </code>
               </td>
               <td>
                Two-tailed p-value for the test above
               </td>
              </tr>
              <tr>
               <td>
                <code>
                 cov
                </code>
               </td>
               <td>
                Sample covariance of X and Y
               </td>
              </tr>
              <tr>
               <td>
                <code>
                 \bar{x}, \bar{y}
                </code>
               </td>
               <td>
                Sample means of X and Y
               </td>
              </tr>
              <tr>
               <td>
                <code>
                 s_x, s_y
                </code>
               </td>
               <td>
                Sample standard deviations of X and Y
               </td>
              </tr>
             </tbody>
            </table>
            <h2>
             How it works: A step-by-step example
            </h2>
            <p>
             Suppose you observe pairs (X,Y) for 8 students: study hours vs. test score. After pasting the data, the tool computes
             <code>
              n
             </code>
             , means, SDs, covariance, and
             <code>
              r
             </code>
             . Then it uses
             <code>
              t = r√((n−2)/(1−r²))
             </code>
             to get a two-tailed
             <code>
              p
             </code>
             . Finally, Fisher’s
             <em>
              z
             </em>
             gives the 95% CI for
             <code>
              r
             </code>
             . The scatter plot shows the relationship and overlays the least-squares line, reported as
             <code>
              ŷ = a + b x
             </code>
             .
            </p>
            <h2>
             FAQ
            </h2>
            <details>
             <summary>
              What’s the minimum sample size to compute r?
             </summary>
             <p>
              You need at least 3 valid pairs to compute Pearson’s r and the associated t-test (df = n − 2).
             </p>
            </details>
            <details>
             <summary>
              How are missing or non-numeric rows handled?
             </summary>
             <p>
              Rows with missing or invalid values are dropped (pairwise deletion) so both vectors remain aligned and of equal length.
             </p>
            </details>
            <details>
             <summary>
              Is this the same as Spearman correlation?
             </summary>
             <p>
              No. This tool computes Pearson’s correlation on raw values. Spearman uses ranks and is robust to monotonic but non-linear relationships.
             </p>
            </details>
            <details>
             <summary>
              Why can r be undefined?
             </summary>
             <p>
              If either X or Y has zero variance (all equal), the denominator is zero and r is undefined.
             </p>
            </details>
            <details>
             <summary>
              How is the p-value computed?
             </summary>
             <p>
              Under H₀: r = 0, we use
              <code>
               t
              </code>
              with df =
              <code>
               n − 2
              </code>
              and the two-tailed Student’s t CDF.
             </p>
            </details>
            <details>
             <summary>
              What does the confidence interval mean?
             </summary>
             <p>
              The Fisher-z interval estimates the plausible range of the population correlation given the sample size and selected confidence level.
             </p>
            </details>
            <details>
             <summary>
              What does R² represent here?
             </summary>
             <p>
              R² = r², the proportion of variance in Y explained linearly by X.
             </p>
            </details>
            <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700">
             <p>
              <strong>
               Tool developed by Ugo Candido.
              </strong>
              Content verified by the CalcDomain Editorial Board.
              <br/>
              Last accuracy review:
              <time datetime="2025-10-25">
               October 25, 2025
              </time>
             </p>
            </div>
           </section>
          </div>
         </section>
         <!-- Aside -->
         <aside class="w-full lg:w-1/3">
          <div class="sticky top-6 space-y-6">
           <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-600">
            Ad Placement (300×600)
           </div>
           <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="font-bold text-lg mb-3">
             Why use this calculator
            </h3>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
             <li>
              Professional outputs: r, R², p-value, CI, regression line.
             </li>
             <li>
              Copy/Download results and chart for reports.
             </li>
             <li>
              Accessible, mobile-first, and fast.
             </li>
            </ul>
           </div>
           <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="font-bold text-lg mb-4">
             Related math tools
            </h3>
            <ul class="space-y-2 text-sm">
             <li>
              <a class="text-blue-700 hover:underline" href="https://calcdomain.com/linear-regression">
               Linear Regression
              </a>
             </li>
             <li>
              <a class="text-blue-700 hover:underline" href="https://calcdomain.com/mean-calculator">
               Mean Calculator
              </a>
             </li>
             <li>
              <a class="text-blue-700 hover:underline" href="https://calcdomain.com/median-calculator">
               Median Calculator
              </a>
             </li>
             <li>
              <a class="text-blue-700 hover:underline" href="https://calcdomain.com/standard-deviation">
               Standard Deviation
              </a>
             </li>
            </ul>
           </div>
          </div>
         </aside>
        </div>
       </main>
      </main>
      <aside class="w-full lg:w-1/3">
       <div class="sticky top-24 space-y-8">
        <div id="sidebar-ad-placeholder-top">
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
         <h3 class="font-bold text-lg mb-4">
          Popular Calculators
         </h3>
         <ul class="space-y-3">
          <li>
           <a class="text-blue-600 hover:underline" href="https://calcdomain.com/mortgage-payment">
            Mortgage Calculator
           </a>
          </li>
          <li>
           <a class="text-blue-600 hover:underline" href="https://calcdomain.com/percentage-calculator">
            Percentage Calculator
           </a>
          </li>
          <li>
           <a class="text-blue-600 hover:underline" href="https://calcdomain.com/bmi-calculator">
            BMI Calculator
           </a>
          </li>
         </ul>
        </div>
       </div>
      </aside>
     </div>
    </div>
   </body>
  </html>
  <footer class="bg-gray-900 text-white py-12">
   <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
     <div>
      <h3 class="text-2xl font-bold mb-4">
       CalcDomain
      </h3>
      <p class="text-gray-400 mb-4">
       Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
      </p>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Categories
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/finance">
         Finance
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/health-fitness">
         Health &amp; Fitness
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/math-conversions">
         Math &amp; Conversions
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/lifestyle-everyday">
         Lifestyle &amp; Everyday
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/construction-diy">
         Construction &amp; DIY
        </a>
       </li>
      </ul>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Popular Tools
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/mortgage-payment">
         Mortgage Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/percentage-calculator">
         Percentage Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/bmi-calculator">
         BMI Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/auto-loan-calculator">
         Auto Loan Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/house-affordability">
         House Affordability
        </a>
       </li>
      </ul>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Support
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/about">
         About Us
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/contact">
         Contact
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/privacy">
         Privacy Policy
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/terms">
         Terms of Service
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/sitemap">
         Site Map
        </a>
       </li>
      </ul>
     </div>
    </div>
    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
     <p>
      © 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone
     </p>
    </div>
   </div>
  </footer>
  <!-- Calculator Logic (defer loaded by default because placed before </body>) -->
  <script>
   // Utility: toggle hidden
  function toggleHidden(el, show) {
    el.classList[show ? 'remove' : 'add']('hidden');
  }

  document.addEventListener('DOMContentLoaded', () => {
    // Elements
    const els = {
      dataInput: document.getElementById('dataInput'),
      dataError: document.getElementById('dataError'),
      dataHelp: document.getElementById('dataHelp'),
      dataHelpBtn: document.getElementById('dataHelpBtn'),
      alpha: document.getElementById('alpha'),
      calculate: document.getElementById('calculateBtn'),
      clear: document.getElementById('clearData'),
      transpose: document.getElementById('transpose'),
      loadSample: document.getElementById('loadSample'),
      downloadCSV: document.getElementById('downloadCSV'),
      copyResults: document.getElementById('copyResults'),
      resetAll: document.getElementById('resetAll'),
      downloadPNG: document.getElementById('downloadPNG'),

      // Results
      resN: document.getElementById('resN'),
      resR: document.getElementById('resR'),
      resR2: document.getElementById('resR2'),
      resP: document.getElementById('resP'),
      resT: document.getElementById('resT'),
      resDf: document.getElementById('resDf'),
      resCov: document.getElementById('resCov'),
      resMeanX: document.getElementById('resMeanX'),
      resMeanY: document.getElementById('resMeanY'),
      resSx: document.getElementById('resSx'),
      resSy: document.getElementById('resSy'),
      resCI: document.getElementById('resCI'),
      regEquation: document.getElementById('regEquation'),
    };

    // Accessible tooltip toggle
    els.dataHelpBtn.addEventListener('click', () => {
      const expanded = els.dataHelpBtn.getAttribute('aria-expanded') === 'true';
      els.dataHelpBtn.setAttribute('aria-expanded', String(!expanded));
      toggleHidden(els.dataHelp, expanded);
    });

    // Sample dataset (moderate positive correlation)
    const sample = `# X  Y
10  8
12  9
13  11
15  14
18  15
20  18
22  20
25  23
27  24
30  27`;

    els.loadSample.addEventListener('click', () => {
      els.dataInput.value = sample;
      validateAndCompute();
    });

    els.clear.addEventListener('click', () => {
      els.dataInput.value = '';
      showError('');
      displayResults(null);
      updateChart([]);
    });

    els.transpose.addEventListener('click', () => {
      const rows = parseDataRaw(els.dataInput.value, true);
      if (!rows.length) return;
      // transpose
      const cols = rows[0].length;
      const trans = Array.from({length: cols}, (_, c) => rows.map(r => r[c]).join('\t')).join('\n');
      els.dataInput.value = trans;
      validateAndCompute();
    });

    els.calculate.addEventListener('click', validateAndCompute);
    els.alpha.addEventListener('change', validateAndCompute);

    // Inline validation on blur
    els.dataInput.addEventListener('blur', validateAndCompute);

    // CSV/TSV download of cleaned pairs
    els.downloadCSV.addEventListener('click', () => {
      const pairs = parsePairs(els.dataInput.value);
      if (pairs.length < 3) { showError('Provide at least 3 valid pairs before downloading.'); return; }
      const csv = 'x,y\\n' + pairs.map(p => p[0] + ',' + p[1]).join('\\n');
      const blob = new Blob([csv], {type: 'text/csv'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'correlation-data.csv';
      a.click();
      URL.revokeObjectURL(a.href);
    });

    // Copy results to clipboard
    els.copyResults.addEventListener('click', async () => {
      const text = gatherResultsPlainText();
      try {
        await navigator.clipboard.writeText(text);
        alert('Results copied.');
      } catch { alert('Copy failed.'); }
    });

    // Reset all
    els.resetAll.addEventListener('click', () => {
      els.dataInput.value = '';
      els.alpha.value = '0.05';
      showError('');
      displayResults(null);
      updateChart([]);
    });

    // Chart PNG
    els.downloadPNG.addEventListener('click', () => {
      if (!chart) return;
      const a = document.createElement('a');
      a.href = chart.toBase64Image();
      a.download = 'correlation-scatter.png';
      a.click();
    });

    // Parsing helpers
    function parseDataRaw(text, loose=false) {
      const lines = (text || '').split(/\\r?\\n/).map(l => l.trim()).filter(l => l && !l.startsWith('#'));
      if (!lines.length) return [];
      return lines.map(line => {
        // Accept comma, semicolon, tab, multiple spaces
        const parts = line.split(/[;,\\t\\s]+/).filter(Boolean);
        return loose ? parts : parts.slice(0, 2);
      });
    }

    function parsePairs(text) {
      const raw = parseDataRaw(text);
      const pairs = [];
      for (const parts of raw) {
        if (parts.length < 2) continue;
        const x = Number(parts[0]), y = Number(parts[1]);
        if (Number.isFinite(x) && Number.isFinite(y)) pairs.push([x, y]);
      }
      return pairs;
    }

    function showError(msg) {
      els.dataError.textContent = msg;
      toggleHidden(els.dataError, !msg);
    }

    function validateAndCompute() {
      const pairs = parsePairs(els.dataInput.value);
      if (pairs.length === 0) {
        showError('Enter two numeric columns separated by comma, tab, or space.');
        displayResults(null);
        updateChart([]);
        return;
      }
      if (pairs.length < 3) {
        showError('At least 3 valid pairs are required to compute Pearson’s r and perform the t-test.');
        displayResults(null);
        updateChart(pairs);
        return;
      }
      showError('');
      const alpha = Number(els.alpha.value) || 0.05;
      const stats = computeStats(pairs, alpha);
      displayResults(stats);
      updateChart(pairs, stats);
    }

    // Math helpers
    function mean(a){ return a.reduce((s,v)=>s+v,0)/a.length; }
    function variance(a, m){ const n=a.length; return a.reduce((s,v)=>s+(v-m)*(v-m),0)/(n-1); }
    function covariance(ax, ay, mx, my){
      const n = ax.length;
      let s = 0;
      for (let i=0;i<n;i++) s += (ax[i]-mx)*(ay[i]-my);
      return s/(n-1);
    }

    // Student's t CDF (two-tailed p via regularized incomplete beta approximation)
    // Based on a simple approximation for practical calculator use.
    function betacf(x, a, b) {
      const MAXITER = 100, EPS=3e-7;
      let qab=a+b, qap=a+1, qam=a-1, c=1, d=1 - qab*x/qap;
      if (Math.abs(d) < 1e-30) d = 1e-30;
      d = 1/d;
      let h = d;
      for (let m=1, m2=2; m<=MAXITER; m++, m2+=2) {
        let aa = m*(b-m)*x/((qam+m2)*(a+m2));
        d = 1 + aa*d; if (Math.abs(d)<1e-30) d=1e-30;
        c = 1 + aa/c; if (Math.abs(c)<1e-30) c=1e-30;
        d = 1/d; h *= d*c;
        aa = -(a+m)*(qab+a+m)*x/((a+m2)*(qap+m2));
        d = 1 + aa*d; if (Math.abs(d)<1e-30) d=1e-30;
        c = 1 + aa/c; if (Math.abs(c)<1e-30) c=1e-30;
        d = 1/d; const del = d*c; h *= del;
        if (Math.abs(del-1) < EPS) break;
      }
      return h;
    }
    function betai(x, a, b) {
      if (x<=0) return 0;
      if (x>=1) return 1;
      const bt = Math.exp(lnGamma(a+b)-lnGamma(a)-lnGamma(b) + a*Math.log(x) + b*Math.log(1-x));
      if (x < (a+1)/(a+b+2)) return bt*betacf(x,a,b)/a;
      return 1 - bt*betacf(1-x,b,a)/b;
    }
    function lnGamma(z){ // Lanczos
      const g=7;
      const C=[0.99999999999980993,676.5203681218851,-1259.1392167224028,771.32342877765313,-176.61502916214059,12.507343278686905,-0.13857109526572012,9.9843695780195716e-6,1.5056327351493116e-7];
      let x=C[0];
      for (let i=1;i<g+2;i++) x += C[i]/(z+i);
      const t=z+g+0.5;
      return 0.5*Math.log(2*Math.PI)+(z+0.5)*Math.log(t)-t+Math.log(x)-Math.log(z);
    }
    function tCDF(t, df){ // two-sided tail we’ll compute from regularized beta
      // Convert to x for incomplete beta: x = df/(df + t^2)
      const x = df/(df + t*t);
      const a = df/2, b = 0.5;
      const ib = betai(x, a, b);
      // For t >= 0, upper tail = 0.5*ib; symmetric
      const p = 0.5*ib;
      return t >= 0 ? 1 - p : p; // right-tail CDF
    }
    function tTwoTailedP(t, df){
      const rightTail = 1 - tCDF(Math.abs(t), df);
      return 2*rightTail;
    }
    function zCritical(alpha){
      // approximate inverse CDF for normal (Beasley-Springer/Moro)
      const a = [ -39.6968302866538, 220.946098424521, -275.928510446969, 138.357751867269, -30.6647980661472, 2.50662827745924 ];
      const b = [ -54.4760987982241, 161.585836858041, -155.698979859887, 66.8013118877197, -13.2806815528857 ];
      const c = [ -0.00778489400243029, -0.322396458041136, -2.40075827716184, -2.54973253934373, 4.37466414146497, 2.93816398269878 ];
      const d = [ 0.00778469570904146, 0.32246712907004, 2.445134137143, 3.75440866190742 ];
      const p = 1 - alpha/2;
      let q, r, x;
      if (p < 0.02425) {
        q = Math.sqrt(-2*Math.log(1-p)); x = (((((c[0]*q+c[1])*q+c[2])*q+c[3])*q+c[4])*q+c[5])/((((d[0]*q+d[1])*q+d[2])*q+d[3])*q+1);
      } else if (p > 1-0.02425) {
        q = Math.sqrt(-2*Math.log(1-p)); x = -(((((c[0]*q+c[1])*q+c[2])*q+c[3])*q+c[4])*q+c[5])/((((d[0]*q+d[1])*q+d[2])*q+d[3])*q+1);
      } else {
        q = p - 0.5; r = q*q;
        x = (((((a[0]*r+a[1])*r+a[2])*r+a[3])*r+a[4])*r+a[5])*q/(((((b[0]*r+b[1])*r+b[2])*r+b[3])*r+b[4])*r+1);
      }
      return x;
    }

    function computeStats(pairs, alpha) {
      const X = pairs.map(p=>p[0]), Y = pairs.map(p=>p[1]);
      const n = X.length;
      const mx = mean(X), my = mean(Y);
      const vx = variance(X, mx), vy = variance(Y, my);
      const sx = Math.sqrt(vx), sy = Math.sqrt(vy);
      const cov = covariance(X, Y, mx, my);
      const r = cov / (sx*sy);
      const r2 = r*r;
      const df = n - 2;
      let t = NaN, p = NaN, ciLow = NaN, ciHigh = NaN;

      if (isFinite(r) && df > 0 && Math.abs(r) < 1) {
        t = r * Math.sqrt(df / (1 - r*r));
        p = tTwoTailedP(t, df);
        // Fisher z CI
        const z = 0.5*Math.log((1+r)/(1-r));
        const sez = 1/Math.sqrt(n-3);
        const zcrit = zCritical(alpha);
        const zl = z - zcrit*sez, zu = z + zcrit*sez;
        ciLow = (Math.exp(2*zl)-1)/(Math.exp(2*zl)+1);
        ciHigh = (Math.exp(2*zu)-1)/(Math.exp(2*zu)+1);
      }

      // Regression line (least squares): b = r*sy/sx, a = my - b*mx
      const b = r * (sy / sx);
      const a = my - b*mx;

      return { n, r, r2, t, p, df, cov, mx, my, sx, sy, ciLow, ciHigh, a, b, X, Y };
    }

    function fmt(n, d=6){
      if (n == null || !isFinite(n)) return '—';
      const s = n.toFixed(d);
      // trim trailing zeros
      return s.replace(/\\.0+$/,'').replace(/(\\.\\d*?)0+$/, '$1');
    }

    function displayResults(stats){
      if (!stats) {
        ['resN','resR','resR2','resP','resT','resDf','resCov','resMeanX','resMeanY','resSx','resSy','resCI'].forEach(id=>{
          document.getElementById(id).textContent = '—';
        });
        document.getElementById('regEquation').textContent = '—';
        return;
      }
      const {n, r, r2, t, p, df, cov, mx, my, sx, sy, ciLow, ciHigh, a, b} = stats;
      els.resN.textContent = n;
      els.resR.textContent = fmt(r, 6);
      els.resR2.textContent = fmt(r2, 6);
      els.resP.textContent = (p<1e-6) ? '<1e-6' : fmt(p, 6);
      els.resT.textContent = fmt(t, 6);
      els.resDf.textContent = df;
      els.resCov.textContent = fmt(cov, 6);
      els.resMeanX.textContent = fmt(mx, 6);
      els.resMeanY.textContent = fmt(my, 6);
      els.resSx.textContent = fmt(sx, 6);
      els.resSy.textContent = fmt(sy, 6);
      els.resCI.textContent = (isFinite(ciLow) && isFinite(ciHigh)) ? `[${fmt(ciLow, 6)}, ${fmt(ciHigh, 6)}]` : '—';
      document.getElementById('regEquation').textContent = `ŷ = ${fmt(a,6)} + ${fmt(b,6)} x`;
    }

    function gatherResultsPlainText(){
      return [
        `n: ${els.resN.textContent}`,
        `r: ${els.resR.textContent}`,
        `R^2: ${els.resR2.textContent}`,
        `t: ${els.resT.textContent}`,
        `df: ${els.resDf.textContent}`,
        `p(two-tailed): ${els.resP.textContent}`,
        `cov: ${els.resCov.textContent}`,
        `mean(x): ${els.resMeanX.textContent}`,
        `mean(y): ${els.resMeanY.textContent}`,
        `sd(x): ${els.resSx.textContent}`,
        `sd(y): ${els.resSy.textContent}`,
        `95% CI r: ${els.resCI.textContent}`,
        `Regression: ${document.getElementById('regEquation').textContent}`
      ].join('\\n');
    }

    // Chart
    let chart = null;
    function updateChart(pairs, stats){
      const ctx = document.getElementById('scatterChart');
      if (!ctx) return;
      const data = pairs.map(p => ({x:p[0], y:p[1]}));

      // Regression line endpoints for plot bounds
      let regDataset = [];
      if (stats && data.length) {
        const xs = stats.X;
        const minX = Math.min(...xs), maxX = Math.max(...xs);
        const y1 = stats.a + stats.b*minX;
        const y2 = stats.a + stats.b*maxX;
        regDataset = [{x:minX, y:y1}, {x:maxX, y:y2}];
      }

      const chartData = {
        datasets: [
          {
            type: 'scatter',
            label: 'Data',
            data,
            pointRadius: 3
          },
          ...(regDataset.length ? [{
            type: 'line',
            label: 'Regression',
            data: regDataset,
            fill: false,
            borderWidth: 2,
            tension: 0
          }] : [])
        ]
      };

      const options = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: { legend: { position: 'bottom' } },
        scales: {
          x: { type: 'linear', title: { display: true, text: 'X' } },
          y: { type: 'linear', title: { display: true, text: 'Y' } }
        }
      };

      if (chart) { chart.data = chartData; chart.options = options; chart.update(); }
      else { chart = new Chart(ctx, { data: chartData, options }); }
    }

    // Build FAQ JSON-LD from the rendered <details> (ensures consistency)
    function refreshFAQSchema(){
      const faqEl = document.getElementById('faq-jsonld');
      if (!faqEl) return;
      const items = Array.from(document.querySelectorAll('section.prose details')).map(d => {
        const q = d.querySelector('summary')?.textContent?.trim() || '';
        const a = Array.from(d.childNodes).filter(n => n.nodeName !== 'SUMMARY').map(n => n.textContent.trim()).join(' ').trim();
        return {"@type":"Question","name":q,"acceptedAnswer":{"@type":"Answer","text":a}};
      });
      const schema = { "@context":"https://schema.org", "@type":"FAQPage", "mainEntity": items };
      faqEl.textContent = JSON.stringify(schema);
    }

    // Initialize
    refreshFAQSchema();
    validateAndCompute();
  });
  </script>
  <script defer="True" src="/assets/js/script_menu.js">
  </script>
  <script defer="True" src="/assets/js/script_faq.js">
  </script>
  <script defer="True" src="search.js">
  </script>
 </body>
</html>

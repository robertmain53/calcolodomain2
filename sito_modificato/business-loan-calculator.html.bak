<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/business-loan-calculator" />
    <title>Business Loan Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Business Loan Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Fast, reliable results." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Business Loan Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Business Loan Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Fast, reliable results." />
    <meta property="og:url" content="https://calcdomain.com/business-loan-calculator" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Business Loan Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Business Loan Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Fast, reliable results." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "Business & Small Biz Calculators", "item": "https://calcdomain.com/subcategories/business-small-biz"}, {"@type": "ListItem", "position": 4, "name": "Business Loan Calculator", "item": "https://calcdomain.com/business-loan-calculator"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/business-small-biz" class="text-blue-600 hover:underline">Business &amp; Small Biz Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Business Loan Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Business Loan Calculator
              </h1>
              <p class="text-gray-600">
                Estimate payments, total interest, fees, APR, and a full
                amortization schedule for your business loan or line of credit.
              </p>
            </header>

            <!-- Calculator -->
            <section aria-label="Business loan calculator" class="mb-8">
              <!-- Mode Tabs -->
              <div class="flex flex-wrap gap-2 mb-4">
                <button
                  type="button"
                  id="tab-standard"
                  class="px-3 py-1.5 text-sm rounded-full border border-gray-300 bg-white text-gray-700 tab-active"
                >
                  Standard term loan
                </button>
                <button
                  type="button"
                  id="tab-interest-only"
                  class="px-3 py-1.5 text-sm rounded-full border border-gray-300 bg-white text-gray-700"
                >
                  Interest-only period
                </button>
                <button
                  type="button"
                  id="tab-balloon"
                  class="px-3 py-1.5 text-sm rounded-full border border-gray-300 bg-white text-gray-700"
                >
                  Balloon payment
                </button>
              </div>

              <div class="grid md:grid-cols-2 gap-6">
                <!-- Left: Inputs -->
                <div>
                  <h2 class="text-lg font-semibold mb-3">Loan details</h2>
                  <div class="space-y-4">
                    <div>
                      <label
                        for="loanAmount"
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Loan amount</label
                      >
                      <div class="flex">
                        <select
                          id="currency"
                          class="border border-gray-300 rounded-l-md px-2 bg-gray-50 text-sm"
                        >
                          <option value="$">$</option>
                          <option value="€">€</option>
                          <option value="£">£</option>
                          <option value="₹">₹</option>
                        </select>
                        <input
                          type="number"
                          id="loanAmount"
                          class="flex-1 border border-l-0 border-gray-300 rounded-r-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                          value="50000"
                          min="0"
                          step="1000"
                        />
                      </div>
                    </div>

                    <div>
                      <label
                        for="interestRate"
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Interest rate (APR, %)</label
                      >
                      <input
                        type="number"
                        id="interestRate"
                        class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                        value="9.5"
                        min="0"
                        max="99"
                        step="0.1"
                      />
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                      <div>
                        <label
                          for="termYears"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Term (years)</label
                        >
                        <input
                          type="number"
                          id="termYears"
                          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                          value="5"
                          min="0"
                          step="1"
                        />
                      </div>
                      <div>
                        <label
                          for="termMonths"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Extra months</label
                        >
                        <input
                          type="number"
                          id="termMonths"
                          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                          value="0"
                          min="0"
                          max="11"
                          step="1"
                        />
                      </div>
                    </div>

                    <div>
                      <label
                        for="paymentFrequency"
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Payment frequency</label
                      >
                      <select
                        id="paymentFrequency"
                        class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="12">Monthly</option>
                        <option value="26">Bi-weekly (26/yr)</option>
                        <option value="24">Semi-monthly (24/yr)</option>
                        <option value="52">Weekly (52/yr)</option>
                        <option value="4">Quarterly (4/yr)</option>
                        <option value="1">Annually</option>
                      </select>
                    </div>

                    <div>
                      <label
                        for="compounding"
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Interest compounding</label
                      >
                      <select
                        id="compounding"
                        class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="12">Monthly</option>
                        <option value="365">Daily</option>
                        <option value="52">Weekly</option>
                        <option value="4">Quarterly</option>
                        <option value="1">Annually</option>
                        <option value="0">Same as payment frequency</option>
                      </select>
                    </div>
                  </div>

                  <h2 class="text-lg font-semibold mt-6 mb-3">
                    Fees (optional)
                  </h2>
                  <div class="space-y-3">
                    <div class="grid grid-cols-2 gap-3">
                      <div>
                        <label
                          for="originationPct"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Origination fee (%)</label
                        >
                        <input
                          type="number"
                          id="originationPct"
                          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                          value="0"
                          min="0"
                          step="0.1"
                        />
                      </div>
                      <div>
                        <label
                          for="originationFlat"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Origination fee (flat)</label
                        >
                        <input
                          type="number"
                          id="originationFlat"
                          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                          value="0"
                          min="0"
                          step="100"
                        />
                      </div>
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                      <div>
                        <label
                          for="docFee"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Documentation / closing fees</label
                        >
                        <input
                          type="number"
                          id="docFee"
                          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                          value="0"
                          min="0"
                          step="100"
                        />
                      </div>
                      <div>
                        <label
                          for="otherFee"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Other upfront fees</label
                        >
                        <input
                          type="number"
                          id="otherFee"
                          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                          value="0"
                          min="0"
                          step="100"
                        />
                      </div>
                    </div>
                  </div>

                  <details class="mt-5">
                    <summary
                      class="cursor-pointer text-sm font-semibold text-blue-600"
                    >
                      Advanced options
                    </summary>
                    <div class="mt-3 space-y-3 text-sm">
                      <div id="interestOnlyGroup" class="hidden">
                        <label
                          for="interestOnlyMonths"
                          class="block font-medium text-gray-700 mb-1"
                          >Interest-only period (months)</label
                        >
                        <input
                          type="number"
                          id="interestOnlyMonths"
                          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                          value="6"
                          min="0"
                          step="1"
                        />
                        <p class="text-gray-500 mt-1">
                          During this period you pay interest only; principal
                          amortization starts afterward.
                        </p>
                      </div>

                      <div id="balloonGroup" class="hidden space-y-2">
                        <label class="block font-medium text-gray-700"
                          >Balloon payment at end</label
                        >
                        <div class="grid grid-cols-2 gap-3">
                          <div>
                            <label
                              for="balloonPct"
                              class="block text-gray-700 mb-1"
                              >Balloon as % of principal</label
                            >
                            <input
                              type="number"
                              id="balloonPct"
                              class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                              value="20"
                              min="0"
                              max="95"
                              step="1"
                            />
                          </div>
                          <div>
                            <label
                              for="balloonAmount"
                              class="block text-gray-700 mb-1"
                              >Or fixed balloon amount</label
                            >
                            <input
                              type="number"
                              id="balloonAmount"
                              class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"
                              value="0"
                              min="0"
                              step="1000"
                            />
                          </div>
                        </div>
                        <p class="text-gray-500">
                          If both are set, the fixed balloon amount takes
                          priority.
                        </p>
                      </div>

                      <div>
                        <label class="inline-flex items-center space-x-2">
                          <input
                            type="checkbox"
                            id="showAPR"
                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                            checked
                          />
                          <span>Estimate effective APR including fees</span>
                        </label>
                      </div>
                    </div>
                  </details>

                  <div class="mt-6 flex flex-wrap gap-3">
                    <button
                      id="calculateBtn"
                      type="button"
                      class="inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700"
                    >
                      Calculate
                    </button>
                    <button
                      id="resetBtn"
                      type="button"
                      class="inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 font-semibold rounded-md hover:bg-gray-50"
                    >
                      Reset
                    </button>
                  </div>
                </div>

                <!-- Right: Results -->
                <div>
                  <h2 class="text-lg font-semibold mb-3">Results</h2>
                  <div id="resultsSummary" class="space-y-3 text-sm">
                    <div class="grid grid-cols-2 gap-3">
                      <div
                        class="p-3 rounded-md bg-blue-50 border border-blue-100"
                      >
                        <div class="text-xs text-gray-500">
                          Periodic payment
                        </div>
                        <div
                          id="resultPayment"
                          class="text-lg font-semibold text-blue-700"
                        >
                          –
                        </div>
                        <div
                          id="resultPaymentFreq"
                          class="text-xs text-gray-500"
                        >
                          per month
                        </div>
                      </div>
                      <div
                        class="p-3 rounded-md bg-gray-50 border border-gray-200"
                      >
                        <div class="text-xs text-gray-500">
                          Number of payments
                        </div>
                        <div
                          id="resultNumPayments"
                          class="text-lg font-semibold text-gray-800"
                        >
                          –
                        </div>
                        <div class="text-xs text-gray-500">Total periods</div>
                      </div>
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                      <div
                        class="p-3 rounded-md bg-gray-50 border border-gray-200"
                      >
                        <div class="text-xs text-gray-500">Total interest</div>
                        <div
                          id="resultTotalInterest"
                          class="text-lg font-semibold text-gray-800"
                        >
                          –
                        </div>
                      </div>
                      <div
                        class="p-3 rounded-md bg-gray-50 border border-gray-200"
                      >
                        <div class="text-xs text-gray-500">
                          Total of payments
                        </div>
                        <div
                          id="resultTotalPaid"
                          class="text-lg font-semibold text-gray-800"
                        >
                          –
                        </div>
                      </div>
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                      <div
                        class="p-3 rounded-md bg-gray-50 border border-gray-200"
                      >
                        <div class="text-xs text-gray-500">Upfront fees</div>
                        <div
                          id="resultFees"
                          class="text-lg font-semibold text-gray-800"
                        >
                          –
                        </div>
                        <div
                          id="resultNetProceeds"
                          class="text-xs text-gray-500"
                        >
                          Net cash received: –
                        </div>
                      </div>
                      <div
                        class="p-3 rounded-md bg-gray-50 border border-gray-200"
                      >
                        <div class="text-xs text-gray-500">
                          Estimated effective APR
                        </div>
                        <div
                          id="resultAPR"
                          class="text-lg font-semibold text-gray-800"
                        >
                          –
                        </div>
                        <div class="text-xs text-gray-500">
                          Includes interest + fees
                        </div>
                      </div>
                    </div>

                    <div
                      id="resultBalloonBox"
                      class="hidden p-3 rounded-md bg-yellow-50 border border-yellow-200"
                    >
                      <div class="text-xs text-gray-600">
                        Balloon payment at end
                      </div>
                      <div
                        id="resultBalloon"
                        class="text-lg font-semibold text-yellow-800"
                      >
                        –
                      </div>
                      <div class="text-xs text-gray-600">
                        Due with final payment
                      </div>
                    </div>
                  </div>

                  <h3 class="text-sm font-semibold mt-6 mb-2">
                    Principal vs. interest
                  </h3>
                  <div
                    class="w-full h-40 bg-gray-50 border border-gray-200 rounded-md flex items-end justify-between px-3 pb-3"
                    aria-hidden="true"
                  >
                    <div class="flex-1 mx-1">
                      <div
                        id="barPrincipal"
                        class="w-full bg-blue-500 rounded-t-md"
                        style="height: 50%"
                      ></div>
                      <div class="text-xs text-center mt-1 text-gray-600">
                        Principal
                      </div>
                    </div>
                    <div class="flex-1 mx-1">
                      <div
                        id="barInterest"
                        class="w-full bg-emerald-400 rounded-t-md"
                        style="height: 30%"
                      ></div>
                      <div class="text-xs text-center mt-1 text-gray-600">
                        Interest
                      </div>
                    </div>
                    <div class="flex-1 mx-1">
                      <div
                        id="barFees"
                        class="w-full bg-amber-400 rounded-t-md"
                        style="height: 10%"
                      ></div>
                      <div class="text-xs text-center mt-1 text-gray-600">
                        Fees
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <!-- Amortization Table -->
            <section class="mb-10">
              <div class="flex items-center justify-between mb-3">
                <h2 class="text-lg font-semibold">Amortization schedule</h2>
                <div class="flex items-center gap-2 text-xs">
                  <button
                    id="toggleScheduleBtn"
                    type="button"
                    class="px-2 py-1 border border-gray-300 rounded-md hover:bg-gray-50"
                  >
                    Show schedule
                  </button>
                  <button
                    id="exportCsvBtn"
                    type="button"
                    class="px-2 py-1 border border-gray-300 rounded-md hover:bg-gray-50"
                  >
                    Export CSV
                  </button>
                </div>
              </div>
              <div
                id="scheduleContainer"
                class="hidden scroll-table border border-gray-200 rounded-md max-h-80 overflow-y-auto text-xs"
              >
                <table class="min-w-full divide-y divide-gray-200">
                  <thead class="bg-gray-50">
                    <tr>
                      <th
                        class="px-3 py-2 text-left font-semibold text-gray-700"
                      >
                        #
                      </th>
                      <th
                        class="px-3 py-2 text-left font-semibold text-gray-700"
                      >
                        Date
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700"
                      >
                        Payment
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700"
                      >
                        Principal
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700"
                      >
                        Interest
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700"
                      >
                        Balance
                      </th>
                    </tr>
                  </thead>
                  <tbody
                    id="scheduleBody"
                    class="divide-y divide-gray-100 bg-white"
                  ></tbody>
                </table>
              </div>
              <p class="text-xs text-gray-500 mt-2">
                Schedule assumes payments are made on time and interest accrues
                at the specified rate and compounding frequency.
              </p>
            </section>

            <!-- Explanatory Content -->
            <section class="prose">
              <h2>How this business loan calculator works</h2>
              <p>
                This tool models a typical small business term loan: you borrow
                a lump sum, repay it over time with fixed payments, and may pay
                upfront fees. It can also handle interest-only periods and
                balloon payments that many commercial and SBA-style loans use.
              </p>

              <h3>Core payment formula</h3>
              <p>
                For a fully amortizing loan with fixed payments, the periodic
                payment is calculated using the standard annuity formula:
              </p>
              <div class="formula-box">
                <p>Let:</p>
                <ul>
                  <li><code>P</code> = amount financed (loan principal)</li>
                  <li>
                    <code>r</code> = periodic interest rate (annual rate ÷
                    payments per year)
                  </li>
                  <li><code>n</code> = total number of payments</li>
                </ul>
                <p>Then the payment per period is:</p>
                <p>
                  \( \text{Payment} = P \times \dfrac{r}{1 - (1 + r)^{-n}} \)
                </p>
              </div>
              <p>
                If the interest rate is 0%, the payment is simply
                <code>P ÷ n</code>.
              </p>

              <h3>Interest-only and balloon structures</h3>
              <ul>
                <li>
                  <strong>Interest-only period</strong> – for the first few
                  months you pay only interest: <code>Payment = P × r</code>.
                  After that, the remaining term is amortized using the formula
                  above.
                </li>
                <li>
                  <strong>Balloon payment</strong> – the calculator reduces the
                  amortizing portion so that a specified amount of principal is
                  left to be paid as a lump sum at the end.
                </li>
              </ul>

              <h3>Fees and effective APR</h3>
              <p>
                Upfront fees do not reduce the amount you owe, but they reduce
                the cash you actually receive. The calculator:
              </p>
              <ul>
                <li>
                  Computes total upfront fees (percentage-based + flat fees).
                </li>
                <li>
                  Shows your <strong>net proceeds</strong> (loan amount minus
                  fees).
                </li>
                <li>
                  Estimates an <strong>effective APR</strong> by finding the
                  interest rate that equates the net proceeds with all future
                  payments (and any balloon).
                </li>
              </ul>

              <h2>How to interpret the results</h2>
              <h3>Key outputs</h3>
              <ul>
                <li>
                  <strong>Periodic payment</strong> – what you pay each period
                  (month, week, etc.).
                </li>
                <li>
                  <strong>Total interest</strong> – the cost of borrowing before
                  fees.
                </li>
                <li>
                  <strong>Total of payments</strong> – principal + interest
                  (excluding upfront fees).
                </li>
                <li>
                  <strong>Upfront fees &amp; net proceeds</strong> – how much
                  you pay at closing and how much cash actually hits your
                  account.
                </li>
                <li>
                  <strong>Estimated APR</strong> – a single rate that includes
                  both interest and fees, useful for comparing offers.
                </li>
              </ul>

              <h3>Using the amortization schedule</h3>
              <p>The amortization table shows, for each payment:</p>
              <ul>
                <li>How much goes to interest vs. principal.</li>
                <li>The remaining balance after each payment.</li>
                <li>Any balloon payment at the end of the term.</li>
              </ul>
              <p>
                This is helpful for planning early payoff, refinancing, or
                understanding how quickly you build equity in equipment or
                property.
              </p>

              <h2>Example: Comparing two business loan offers</h2>
              <p>
                Suppose you need a $100,000 loan for working capital, repaid
                over 5 years with monthly payments.
              </p>
              <ul>
                <li>
                  <strong>Offer A</strong>: 8.5% interest, 3% origination fee,
                  $500 documentation fee.
                </li>
                <li><strong>Offer B</strong>: 9.0% interest, no fees.</li>
              </ul>
              <p>
                At first glance, Offer A has the lower rate, but the fees are
                significant. Enter both offers into the calculator:
              </p>
              <ul>
                <li>
                  Offer A will show a higher effective APR once fees are
                  included.
                </li>
                <li>
                  Offer B may have a slightly higher monthly payment but a lower
                  total cost over the life of the loan.
                </li>
              </ul>
              <p>
                Looking at <strong>total interest + fees</strong> and the
                <strong>effective APR</strong> gives you a clearer picture than
                the nominal rate alone.
              </p>

              <h2>Frequently asked questions</h2>

              <h3>Can I use this for a line of credit?</h3>
              <p>
                You can approximate a line of credit if you know the average
                balance you expect to carry and for how long. However, because
                lines of credit are revolving and balances change frequently,
                this calculator is most accurate for fixed-term loans.
              </p>

              <h3>What term should I choose for a business loan?</h3>
              <p>
                Shorter terms mean higher payments but lower total interest;
                longer terms reduce the payment but increase total cost. Many
                businesses match the term to the useful life of the asset being
                financed (for example, 3–5 years for equipment, 10–25 years for
                real estate).
              </p>

              <h3>How accurate is the APR estimate?</h3>
              <p>The APR calculation assumes:</p>
              <ul>
                <li>All fees are paid upfront at closing.</li>
                <li>Payments are made on schedule.</li>
                <li>The interest rate is fixed for the entire term.</li>
              </ul>
              <p>
                If your loan has variable rates, additional ongoing fees, or
                irregular payment schedules, the real APR may differ.
              </p>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end‑of‑period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Business, Loan, Calculator, Loan amount $ € £ ₹ Interest rate (APR, %) Term (years) Extra months Payment frequency Monthly Bi-weekly (26/yr) Semi-monthly (24/yr) Weekly (52/yr) Quarterly (4/yr) Annually Interest compounding Monthly Daily Weekly Quarterly Annually Same as payment frequency Fees (optional) Origination fee (%) Origination fee (flat) Documentation / closing fees Other upfront fees Advanced options Interest-only period (months) During this period you pay interest only; principal amortization starts afterward. Balloon payment at end Balloon as % of principal Or fixed balloon amount If both are set, the fixed balloon amount takes priority. Estimate effective APR including fees.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Loan amount $ € £ ₹ Interest rate (APR, %) Term (years) Extra months Payment frequency Monthly Bi-weekly (26/yr) Semi-monthly (24/yr) Weekly (52/yr) Quarterly (4/yr) Annually Interest compounding Monthly Daily Weekly Quarterly Annually Same as payment frequency Fees (optional) Origination fee (%) Origination fee (flat) Documentation / closing fees Other upfront fees Advanced options Interest-only period (months) During this period you pay interest only; principal amortization starts afterward. Balloon payment at end Balloon as % of principal Or fixed balloon amount If both are set, the fixed balloon amount takes priority. Estimate effective APR including fees</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end‑of‑period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Business, Loan, Calculator, Loan amount $ € £ ₹ Interest rate (APR, %) Term (years) Extra months Payment frequency Monthly Bi-weekly (26/yr) Semi-monthly (24/yr) Weekly (52/yr) Quarterly (4/yr) Annually Interest compounding Monthly Daily Weekly Quarterly Annually Same as payment frequency Fees (optional) Origination fee (%) Origination fee (flat) Documentation / closing fees Other upfront fees Advanced options Interest-only period (months) During this period you pay interest only; principal amortization starts afterward. Balloon payment at end Balloon as % of principal Or fixed balloon amount If both are set, the fixed balloon amount takes priority. Estimate effective APR including fees.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Loan amount $ € £ ₹ Interest rate (APR, %) Term (years) Extra months Payment frequency Monthly Bi-weekly (26/yr) Semi-monthly (24/yr) Weekly (52/yr) Quarterly (4/yr) Annually Interest compounding Monthly Daily Weekly Quarterly Annually Same as payment frequency Fees (optional) Origination fee (%) Origination fee (flat) Documentation / closing fees Other upfront fees Advanced options Interest-only period (months) During this period you pay interest only; principal amortization starts afterward. Balloon payment at end Balloon as % of principal Or fixed balloon amount If both are set, the fixed balloon amount takes priority. Estimate effective APR including fees</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Business &amp; Small Biz Tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/break-even-calculator"
                  class="text-blue-600 hover:underline"
                  >Break Even Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/cash-flow-projection-calculator"
                  class="text-blue-600 hover:underline"
                  >Cash Flow Projection</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/profit-margin-calculator"
                  class="text-blue-600 hover:underline"
                  >Profit Margin Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contribution-margin-calculator"
                  class="text-blue-600 hover:underline"
                  >Contribution Margin</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/roas"
                  class="text-blue-600 hover:underline"
                  >Return on Ad Spend (ROAS)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/business-valuation-calculator"
                  class="text-blue-600 hover:underline"
                  >Business Valuation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/cash-flow-statement"
                  class="text-blue-600 hover:underline"
                  >Cash Flow Statement</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/debt-to-income-ratio"
                  class="text-blue-600 hover:underline"
                  >Debt to Income Ratio (DTI)</a
                >
              </li>
            </ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">More Finance Calculators</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/loan-amortization-calculator"
                  class="text-blue-600 hover:underline"
                  >Advanced Loan Amortization</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/compound-interest-calculator"
                  class="text-blue-600 hover:underline"
                  >Compound Interest</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/roi"
                  class="text-blue-600 hover:underline"
                  >Investment Return (ROI)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/dscr"
                  class="text-blue-600 hover:underline"
                  >Debt Service Coverage Ratio (DSCR)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-blue-600 hover:underline"
                  >Mortgage Payment</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Utility formatting
      function formatCurrency(value, currencySymbol) {
        if (!isFinite(value)) return "–";
        const absVal = Math.abs(value);
        const decimals = absVal < 1 ? 2 : absVal < 1000 ? 2 : 0;
        return (
          currencySymbol +
          value.toLocaleString(undefined, {
            minimumFractionDigits: decimals,
            maximumFractionDigits: decimals,
          })
        );
      }

      function formatPercent(value, decimals = 2) {
        if (!isFinite(value)) return "–";
        return value.toFixed(decimals) + "%";
      }

      function getPaymentFrequencyLabel(freq) {
        switch (freq) {
          case 52:
            return "per week";
          case 26:
            return "per 2 weeks";
          case 24:
            return "twice per month";
          case 12:
            return "per month";
          case 4:
            return "per quarter";
          case 1:
            return "per year";
          default:
            return "per period";
        }
      }

      // Core calculation
      function calculateBusinessLoan() {
        const currencySymbol = document.getElementById("currency").value || "$";
        const amount =
          parseFloat(document.getElementById("loanAmount").value) || 0;
        const annualRate =
          parseFloat(document.getElementById("interestRate").value) || 0;
        const years =
          parseFloat(document.getElementById("termYears").value) || 0;
        const monthsExtra =
          parseFloat(document.getElementById("termMonths").value) || 0;
        const paymentsPerYear =
          parseInt(document.getElementById("paymentFrequency").value, 10) || 12;
        const compoundingSelect = document.getElementById("compounding").value;
        const compoundingPerYear =
          parseInt(compoundingSelect, 10) || paymentsPerYear;

        const origPct =
          parseFloat(document.getElementById("originationPct").value) || 0;
        const origFlat =
          parseFloat(document.getElementById("originationFlat").value) || 0;
        const docFee = parseFloat(document.getElementById("docFee").value) || 0;
        const otherFee =
          parseFloat(document.getElementById("otherFee").value) || 0;

        const modeStandard = document
          .getElementById("tab-standard")
          .classList.contains("tab-active");
        const modeInterestOnly = document
          .getElementById("tab-interest-only")
          .classList.contains("tab-active");
        const modeBalloon = document
          .getElementById("tab-balloon")
          .classList.contains("tab-active");

        const interestOnlyMonths =
          parseInt(document.getElementById("interestOnlyMonths").value, 10) ||
          0;
        const balloonPct =
          parseFloat(document.getElementById("balloonPct").value) || 0;
        const balloonAmountInput =
          parseFloat(document.getElementById("balloonAmount").value) || 0;
        const estimateAPR = document.getElementById("showAPR").checked;

        const totalYears = years + monthsExtra / 12;
        const totalPayments = Math.round(totalYears * paymentsPerYear);
        if (amount <= 0 || totalPayments <= 0) {
          return null;
        }

        // Effective periodic rate from nominal APR and compounding
        let periodicRate;
        if (annualRate === 0) {
          periodicRate = 0;
        } else {
          const nominal = annualRate / 100;
          if (compoundingPerYear > 0) {
            const effAnnual =
              Math.pow(1 + nominal / compoundingPerYear, compoundingPerYear) -
              1;
            periodicRate = Math.pow(1 + effAnnual, 1 / paymentsPerYear) - 1;
          } else {
            periodicRate = nominal / paymentsPerYear;
          }
        }

        // Fees
        const origFeePctAmount = amount * (origPct / 100);
        const totalFees = origFeePctAmount + origFlat + docFee + otherFee;
        const netProceeds = amount - totalFees;

        let payment = 0;
        let schedule = [];
        let balloon = 0;

        // Helper: amortizing payment
        function amortizingPayment(P, r, n) {
          if (n <= 0) return 0;
          if (r === 0) return P / n;
          return P * (r / (1 - Math.pow(1 + r, -n)));
        }

        // Build schedule
        let balance = amount;
        const startDate = new Date();
        const periodsPerYear = paymentsPerYear;

        if (modeInterestOnly && periodicRate > 0 && interestOnlyMonths > 0) {
          const interestOnlyPeriods = Math.round(
            (interestOnlyMonths / 12) * paymentsPerYear
          );
          const remainingPeriods = totalPayments - interestOnlyPeriods;

          const interestOnlyPayment = balance * periodicRate;

          // Interest-only phase
          for (let i = 1; i <= interestOnlyPeriods; i++) {
            const interest = balance * periodicRate;
            const principal = 0;
            const paymentDate = new Date(startDate);
            paymentDate.setMonth(
              paymentDate.getMonth() + Math.round((12 / periodsPerYear) * i)
            );
            schedule.push({
              period: i,
              date: paymentDate,
              payment: interestOnlyPayment,
              principal,
              interest,
              balance,
            });
          }

          // Amortizing phase
          const amortPayment = amortizingPayment(
            balance,
            periodicRate,
            remainingPeriods
          );
          payment = amortPayment;

          for (let i = interestOnlyPeriods + 1; i <= totalPayments; i++) {
            const interest = balance * periodicRate;
            let principal = amortPayment - interest;
            if (principal > balance) principal = balance;
            balance -= principal;
            const paymentDate = new Date(startDate);
            paymentDate.setMonth(
              paymentDate.getMonth() + Math.round((12 / periodsPerYear) * i)
            );
            schedule.push({
              period: i,
              date: paymentDate,
              payment: amortPayment,
              principal,
              interest,
              balance: Math.max(balance, 0),
            });
          }
        } else if (modeBalloon) {
          // Determine balloon
          if (balloonAmountInput > 0) {
            balloon = balloonAmountInput;
          } else if (balloonPct > 0) {
            balloon = amount * (balloonPct / 100);
          } else {
            balloon = 0;
          }
          if (balloon < 0) balloon = 0;
          if (balloon >= amount) balloon = amount * 0.95; // keep some amortization

          const amortPrincipal = amount - balloon;
          const paymentForAmort = amortizingPayment(
            amortPrincipal,
            periodicRate,
            totalPayments
          );
          payment = paymentForAmort;

          for (let i = 1; i <= totalPayments; i++) {
            const interest = balance * periodicRate;
            let principal = paymentForAmort - interest;
            if (i === totalPayments && balloon > 0) {
              // last payment includes balloon
              principal = balance;
              const totalPayment = principal + interest;
              const paymentDate = new Date(startDate);
              paymentDate.setMonth(
                paymentDate.getMonth() + Math.round((12 / periodsPerYear) * i)
              );
              schedule.push({
                period: i,
                date: paymentDate,
                payment: totalPayment,
                principal,
                interest,
                balance: 0,
              });
              balance = 0;
            } else {
              if (principal > balance) principal = balance;
              balance -= principal;
              const paymentDate = new Date(startDate);
              paymentDate.setMonth(
                paymentDate.getMonth() + Math.round((12 / periodsPerYear) * i)
              );
              schedule.push({
                period: i,
                date: paymentDate,
                payment: paymentForAmort,
                principal,
                interest,
                balance: Math.max(balance, 0),
              });
            }
          }
        } else {
          // Standard amortizing loan
          payment = amortizingPayment(balance, periodicRate, totalPayments);
          for (let i = 1; i <= totalPayments; i++) {
            const interest = balance * periodicRate;
            let principal = payment - interest;
            if (principal > balance) principal = balance;
            balance -= principal;
            const paymentDate = new Date(startDate);
            paymentDate.setMonth(
              paymentDate.getMonth() + Math.round((12 / periodsPerYear) * i)
            );
            schedule.push({
              period: i,
              date: paymentDate,
              payment,
              principal,
              interest,
              balance: Math.max(balance, 0),
            });
          }
        }

        // Aggregate totals
        let totalPaid = 0;
        let totalInterest = 0;
        schedule.forEach((row) => {
          totalPaid += row.payment;
          totalInterest += row.interest;
        });

        // Balloon detection for display
        if (!modeBalloon) {
          const last = schedule[schedule.length - 1];
          if (last && last.principal > payment * 1.5) {
            balloon = last.principal;
          }
        }

        // APR estimation (IRR on cash flows)
        let effectiveAPR = null;
        if (estimateAPR && netProceeds > 0) {
          const cashFlows = [];
          cashFlows.push(netProceeds); // time 0 inflow
          schedule.forEach((row) => {
            cashFlows.push(-row.payment);
          });

          function irr(cf, guess) {
            let rate = guess;
            for (let iter = 0; iter < 100; iter++) {
              let npv = 0;
              let dnpv = 0;
              for (let t = 0; t < cf.length; t++) {
                const denom = Math.pow(1 + rate, t);
                npv += cf[t] / denom;
                if (t > 0) {
                  dnpv -= (t * cf[t]) / (denom * (1 + rate));
                }
              }
              if (Math.abs(npv) < 1e-8) break;
              const newRate = rate - npv / dnpv;
              if (!isFinite(newRate) || newRate <= -0.9999) break;
              rate = newRate;
            }
            return rate;
          }

          const guess = annualRate > 0 ? annualRate / 100 : 0.1;
          const periodIRR = irr(cashFlows, guess / paymentsPerYear);
          if (isFinite(periodIRR)) {
            effectiveAPR = (Math.pow(1 + periodIRR, paymentsPerYear) - 1) * 100;
          }
        }

        return {
          currencySymbol,
          payment,
          totalPayments,
          totalInterest,
          totalPaid,
          totalFees,
          netProceeds,
          balloon,
          schedule,
          paymentsPerYear,
          effectiveAPR,
        };
      }

      function renderResults(result) {
        const {
          currencySymbol,
          payment,
          totalPayments,
          totalInterest,
          totalPaid,
          totalFees,
          netProceeds,
          balloon,
          schedule,
          paymentsPerYear,
          effectiveAPR,
        } = result;

        document.getElementById("resultPayment").textContent = formatCurrency(
          payment,
          currencySymbol
        );
        document.getElementById("resultPaymentFreq").textContent =
          getPaymentFrequencyLabel(paymentsPerYear);
        document.getElementById("resultNumPayments").textContent =
          totalPayments.toString();
        document.getElementById("resultTotalInterest").textContent =
          formatCurrency(totalInterest, currencySymbol);
        document.getElementById("resultTotalPaid").textContent = formatCurrency(
          totalPaid,
          currencySymbol
        );
        document.getElementById("resultFees").textContent = formatCurrency(
          totalFees,
          currencySymbol
        );
        document.getElementById("resultNetProceeds").textContent =
          "Net cash received: " + formatCurrency(netProceeds, currencySymbol);
        document.getElementById("resultAPR").textContent =
          effectiveAPR != null ? formatPercent(effectiveAPR, 2) : "–";

        const principalTotal = schedule.length ? schedule[0].balance + 0 : 0;
        const principal = principalTotal || totalPaid - totalInterest;
        const interest = totalInterest;
        const fees = totalFees;
        const sum = principal + interest + fees || 1;

        const barPrincipal = document.getElementById("barPrincipal");
        const barInterest = document.getElementById("barInterest");
        const barFees = document.getElementById("barFees");

        barPrincipal.style.height = ((principal / sum) * 100).toFixed(1) + "%";
        barInterest.style.height = ((interest / sum) * 100).toFixed(1) + "%";
        barFees.style.height = ((fees / sum) * 100).toFixed(1) + "%";

        const balloonBox = document.getElementById("resultBalloonBox");
        const balloonEl = document.getElementById("resultBalloon");
        if (balloon && balloon > 1) {
          balloonBox.classList.remove("hidden");
          balloonEl.textContent = formatCurrency(balloon, currencySymbol);
        } else {
          balloonBox.classList.add("hidden");
          balloonEl.textContent = "–";
        }

        // Render schedule
        const tbody = document.getElementById("scheduleBody");
        tbody.innerHTML = "";
        schedule.forEach((row) => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
        <td class="px-3 py-1.5 whitespace-nowrap text-gray-700">${
          row.period
        }</td>
        <td class="px-3 py-1.5 whitespace-nowrap text-gray-700">${row.date.toLocaleDateString()}</td>
        <td class="px-3 py-1.5 whitespace-nowrap text-right text-gray-700">${formatCurrency(
          row.payment,
          currencySymbol
        )}</td>
        <td class="px-3 py-1.5 whitespace-nowrap text-right text-gray-700">${formatCurrency(
          row.principal,
          currencySymbol
        )}</td>
        <td class="px-3 py-1.5 whitespace-nowrap text-right text-gray-700">${formatCurrency(
          row.interest,
          currencySymbol
        )}</td>
        <td class="px-3 py-1.5 whitespace-nowrap text-right text-gray-700">${formatCurrency(
          row.balance,
          currencySymbol
        )}</td>
      `;
          tbody.appendChild(tr);
        });

        // Store last result for CSV export
        window._businessLoanLastResult = { ...result };
      }

      document.addEventListener("DOMContentLoaded", function () {
        const tabStandard = document.getElementById("tab-standard");
        const tabInterestOnly = document.getElementById("tab-interest-only");
        const tabBalloon = document.getElementById("tab-balloon");
        const interestOnlyGroup = document.getElementById("interestOnlyGroup");
        const balloonGroup = document.getElementById("balloonGroup");

        function setMode(mode) {
          [tabStandard, tabInterestOnly, tabBalloon].forEach((btn) =>
            btn.classList.remove("tab-active")
          );
          interestOnlyGroup.classList.add("hidden");
          balloonGroup.classList.add("hidden");

          if (mode === "standard") {
            tabStandard.classList.add("tab-active");
          } else if (mode === "interest-only") {
            tabInterestOnly.classList.add("tab-active");
            interestOnlyGroup.classList.remove("hidden");
          } else if (mode === "balloon") {
            tabBalloon.classList.add("tab-active");
            balloonGroup.classList.remove("hidden");
          }
        }

        tabStandard.addEventListener("click", () => setMode("standard"));
        tabInterestOnly.addEventListener("click", () =>
          setMode("interest-only")
        );
        tabBalloon.addEventListener("click", () => setMode("balloon"));

        document
          .getElementById("calculateBtn")
          .addEventListener("click", () => {
            const result = calculateBusinessLoan();
            if (!result) return;
            renderResults(result);
          });

        document.getElementById("resetBtn").addEventListener("click", () => {
          document.getElementById("loanAmount").value = 50000;
          document.getElementById("interestRate").value = 9.5;
          document.getElementById("termYears").value = 5;
          document.getElementById("termMonths").value = 0;
          document.getElementById("paymentFrequency").value = "12";
          document.getElementById("compounding").value = "12";
          document.getElementById("originationPct").value = 0;
          document.getElementById("originationFlat").value = 0;
          document.getElementById("docFee").value = 0;
          document.getElementById("otherFee").value = 0;
          document.getElementById("interestOnlyMonths").value = 6;
          document.getElementById("balloonPct").value = 20;
          document.getElementById("balloonAmount").value = 0;
          document.getElementById("showAPR").checked = true;
          setMode("standard");
          document.getElementById("scheduleBody").innerHTML = "";
          document.getElementById("resultPayment").textContent = "–";
          document.getElementById("resultPaymentFreq").textContent =
            "per month";
          document.getElementById("resultNumPayments").textContent = "–";
          document.getElementById("resultTotalInterest").textContent = "–";
          document.getElementById("resultTotalPaid").textContent = "–";
          document.getElementById("resultFees").textContent = "–";
          document.getElementById("resultNetProceeds").textContent =
            "Net cash received: –";
          document.getElementById("resultAPR").textContent = "–";
          document.getElementById("resultBalloonBox").classList.add("hidden");
          window._businessLoanLastResult = null;
        });

        document
          .getElementById("toggleScheduleBtn")
          .addEventListener("click", () => {
            const container = document.getElementById("scheduleContainer");
            const btn = document.getElementById("toggleScheduleBtn");
            const isHidden = container.classList.contains("hidden");
            if (isHidden) {
              container.classList.remove("hidden");
              btn.textContent = "Hide schedule";
            } else {
              container.classList.add("hidden");
              btn.textContent = "Show schedule";
            }
          });

        document
          .getElementById("exportCsvBtn")
          .addEventListener("click", () => {
            const res = window._businessLoanLastResult;
            if (!res || !res.schedule || !res.schedule.length) return;

            const rows = [
              ["Period", "Date", "Payment", "Principal", "Interest", "Balance"],
            ];
            res.schedule.forEach((r) => {
              rows.push([
                r.period,
                r.date.toISOString().split("T")[0],
                r.payment.toFixed(2),
                r.principal.toFixed(2),
                r.interest.toFixed(2),
                r.balance.toFixed(2),
              ]);
            });

            const csvContent = rows.map((row) => row.join(",")).join("\n");
            const blob = new Blob([csvContent], {
              type: "text/csv;charset=utf-8;",
            });
            const url = URL.createObjectURL(blob);
            const link = document.createElement("a");
            link.href = url;
            link.download = "business-loan-amortization.csv";
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
          });

        // Initial mode and calculation
        setMode("standard");
        const initialResult = calculateBusinessLoan();
        if (initialResult) renderResults(initialResult);
      });

      // Mobile menu script (from template)
      document.addEventListener("DOMContentLoaded", function () {
        const toggle = document.getElementById("mobile-menu-toggle");
        const menu = document.getElementById("mobile-menu");
        if (toggle && menu) {
          toggle.addEventListener("click", () => {
            const isHidden = menu.classList.contains("hidden");
            menu.classList.toggle("hidden", !isHidden);
            toggle.setAttribute("aria-expanded", String(isHidden));
          });
        }
      });

      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/child-tax-credit">





 
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="manifest" href="/site.webmanifest">
<meta charset="utf-8">
<title>Child Tax Credit Calculator | US Federal Tax | CalcDomain</title>
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="Estimate your U.S. federal Child Tax Credit (CTC) and refundable Additional Child Tax Credit (ACTC) for 2023 or 2024. Includes phaseout by filing status, MAGI, and earned income—WCAG-accessible, mobile-first, and fast." name="description">
<meta content="Ugo Candido" name="author">

<meta content="#0b3b67" name="theme-color">
<meta content="IE=edge" http-equiv="x-ua-compatible">
<style>
    :root{
      --primary:#0b3b67; --primary-600:#08406f; --secondary:#063152;
      --bg:#f8fafc; --surface:#ffffff; --muted:#667085; --text:#101828;
      --border:#d0d5dd; --success:#1a7f37; --danger:#b42318; --warning:#b54708;
      --focus-ring:3px solid #0b5bd3;
      --radius:12px; --radius-sm:8px;
      --shadow:0 2px 10px rgba(16,24,40,.06);
      --touch:48px;
      --gap:1rem; --gap-lg:2rem;
      --font: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
      --mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    }
    *{box-sizing:border-box}
    html{font-size:16px}
    body{
      margin:0; font-family:var(--font); color:var(--text); background:var(--bg);
      line-height:1.55; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    img{max-width:100%; height:auto}
    a{color:var(--primary); text-decoration:none}
    a:hover{text-decoration:underline}
    h1,h2,h3{color:var(--secondary); line-height:1.2; margin:0 0 .75rem}
    h1{font-size:clamp(1.75rem, 4vw, 2.25rem); letter-spacing:-.01em}
    h2{font-size:clamp(1.35rem, 3vw, 1.75rem)}
    h3{font-size:clamp(1.15rem, 2.5vw, 1.35rem)}
    p{margin:0 0 1rem; max-width:70ch}
    code,kbd{font-family:var(--mono); background:#eef2f7; padding:.15em .35em; border-radius:6px}

    .skip-link{
      position:absolute; left:8px; top:-40px; background:#0b5bd3; color:#fff;
      padding:.5rem .75rem; border-radius:6px; z-index:999; transition:top .2s;
    }
    .skip-link:focus{top:8px; outline:var(--focus-ring)}

    header{
      background:var(--surface); box-shadow:var(--shadow); border-bottom:1px solid var(--border);
    }
    .container{max-width:1200px; margin:0 auto; padding:0 clamp(1rem, 4vw, 2rem)}
    .header-inner{
      display:flex; align-items:center; justify-content:space-between; gap:.75rem; padding:.75rem 0;
    }
    .brand{display:inline-flex; align-items:center; gap:.5rem; font-weight:800; font-size:1.125rem; color:var(--primary)}
    .brand:focus{outline:var(--focus-ring); outline-offset:2px; border-radius:6px}

    main{padding:clamp(1rem, 3vw, 1.5rem) 0}
    .intro{margin:.25rem 0 1rem; color:#344054}

    .layout{
      display:grid; gap:var(--gap-lg);
      grid-template-columns:1fr;
    }
    @media (min-width: 992px){
      .layout{grid-template-columns:minmax(320px, 440px) 1fr}
    }

    .card{
      background:var(--surface); border:1px solid var(--border); border-radius:var(--radius);
      padding:clamp(1rem, 2.5vw, 1.5rem); box-shadow:var(--shadow);
    }

    .form-group{margin-bottom:1rem}
    label{display:flex; align-items:center; gap:.5rem; font-weight:700; margin-bottom:.35rem}
    .required{color:var(--danger); margin-left:.25rem}
    .help{
      font-size:.875rem; color:var(--muted); margin-top:.25rem
    }

    .input-wrap{position:relative}
    .input{
      width:100%; min-height:var(--touch);
      border:1px solid var(--border); border-radius:var(--radius-sm);
      padding:.75rem .875rem; font-size:1rem; background:#fff; color:var(--text);
      transition:border-color .2s, box-shadow .2s;
    }
    .input:focus{outline:none; border-color:#0b5bd3; box-shadow:0 0 0 3px rgba(11,91,211,.15)}
    .input[aria-invalid="true"]{border-color:var(--danger)}
    .input-suffix{
      position:absolute; right:.75rem; top:50%; transform:translateY(-50%); color:var(--muted); pointer-events:none
    }

    .radio-grid{
      display:grid; grid-template-columns:repeat(2, 1fr); gap:.5rem
    }
    @media (min-width:560px){
      .radio-grid{grid-template-columns:repeat(3, 1fr)}
    }
    .radio{
      display:flex; align-items:center; gap:.5rem; border:1px solid var(--border); border-radius:10px;
      padding:.5rem .75rem; min-height:var(--touch); cursor:pointer; background:#fff
    }
    .radio input{margin:0; width:20px; height:20px}
    fieldset{border:0; padding:0; margin:0}
    legend{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); border:0}

    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
      min-height:var(--touch); min-width:var(--touch); border-radius:10px;
      border:1px solid var(--primary); background:var(--primary); color:#fff; font-weight:700;
      padding:.75rem 1rem; cursor:pointer; transition:filter .2s, transform .05s;
    }
    .btn.secondary{background:transparent; color:var(--primary)}
    .btn:focus{outline:var(--focus-ring)}
    .btn:hover{filter:brightness(1.04)}
    .btn:active{transform:translateY(1px)}

    .inline-actions{display:flex; gap:.75rem; flex-wrap:wrap; margin-top:.5rem}

    .tooltip-btn{
      appearance:none; border:1px solid var(--border); background:#fff; color:var(--primary);
      width:var(--touch); height:var(--touch); border-radius:50%; font-weight:800; cursor:pointer;
      line-height:1; display:inline-flex; align-items:center; justify-content:center;
    }
    .tooltip-btn:focus{outline:var(--focus-ring)}
    .tooltip{
      display:none; background:#f1f5f9; color:#0f172a; border:1px solid #cbd5e1;
      border-radius:10px; padding:.75rem; margin:.25rem 0 .5rem;
    }
    .tooltip[aria-hidden="false"]{display:block}

    .error{color:var(--danger); font-size:.9rem; margin-top:.35rem}

    .results{
      display:grid; gap:.5rem; margin-top:.5rem
    }
    .result-row{
      display:flex; align-items:baseline; justify-content:space-between; gap:1rem;
      padding:.6rem .75rem; border:1px solid var(--border); border-radius:10px; background:#fff;
    }
    .result-row.emph{border-color:#9fe3b4; background:#f0fdf4}
    .result-label{color:#475467}
    .result-value{font-weight:800; font-size:1.125rem; color:#0f3c2f}
    .result-value.warning{color:var(--warning)}
    .result-value.muted{color:#667085; font-weight:700}

    .results-container{min-height:340px}

    .formula-box{
      background:#eef2f7; border:1px solid #d6dde8; padding:1rem; border-radius:10px; overflow:auto
    }

    .note{
      font-size:.95rem; color:#475467; background:#fff7ed; border:1px solid #fed7aa; border-radius:10px; padding:.75rem 1rem
    }

    footer{
      margin-top:3rem; background:var(--secondary); color:#fff; padding:1.5rem 0
    }
    footer a{color:#e5efff}
    .foot-meta{font-size:.9rem; color:#cbd5e1}

    .visually-hidden{
      position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px, 1px, 1px, 1px);
      white-space:nowrap; border:0; padding:0; margin:-1px;
    }
  </style>
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Child Tax Credit Calculator",
  "description": "Estimate your U.S. federal Child Tax Credit (CTC) and Additional Child Tax Credit (ACTC) with phaseouts by filing status and MAGI for 2023–2024.",
  "url": "https://calcdomain.com/child-tax-credit",
  "inLanguage": "en",
  "mainEntity": [
    {
      "@type": "HowTo",
      "name": "How It Works: A Step-by-Step Example",
      "description": "Walkthrough of computing the Child Tax Credit with MAGI phaseout and refundable limit.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Select the tax year and filing status",
          "text": "Choose 2024 and Head of Household. Threshold for phaseout is $200,000 (MFJ is $400,000)."
        },
        {
          "@type": "HowToStep",
          "name": "Enter dependents",
          "text": "Two qualifying children under 17 and one other dependent age 17+."
        },
        {
          "@type": "HowToStep",
          "name": "Provide MAGI and earned income",
          "text": "Enter MAGI $215,000 and earned income $60,000."
        },
        {
          "@type": "HowToStep",
          "name": "Compute pre-phaseout credit",
          "text": "CTC: 2 × $2,000 = $4,000; ODC: 1 × $500 = $500; total $4,500."
        },
        {
          "@type": "HowToStep",
          "name": "Apply phaseout",
          "text": "Excess MAGI $15,000 → ceil(15000/1000)×$50 = $750 reduction. Reduce CTC first → CTC $3,250; ODC unchanged $500."
        },
        {
          "@type": "HowToStep",
          "name": "Estimate refundable ACTC",
          "text": "Refundable cap: $1,700 × 2 = $3,400; 15% of ($60,000−$2,500) = $8,625. Max refundable is min(child credit $3,250, $3,400, $8,625) = $3,250."
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Who qualifies for the Child Tax Credit?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Generally, a dependent under age 17 at year end, with a valid SSN, who lived with you over half the year, did not provide more than half of their own support, and meets relationship and residency tests."
          }
        },
        {
          "@type": "Question",
          "name": "What are the 2024 Child Tax Credit amounts?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Up to $2,000 per qualifying child under 17, with up to $1,700 potentially refundable (Additional Child Tax Credit), subject to income phaseouts."
          }
        },
        {
          "@type": "Question",
          "name": "When do phaseouts start?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Phaseouts begin at MAGI $200,000 for Single, HOH, MFS, QSS, and $400,000 for MFJ. The credit is reduced by $50 for each $1,000 (or fraction) of MAGI over the threshold."
          }
        },
        {
          "@type": "Question",
          "name": "What is the Credit for Other Dependents?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "A nonrefundable $500 credit for each qualifying dependent who does not meet the under-17 CTC test (e.g., older children, certain relatives). Subject to the same phaseout thresholds."
          }
        },
        {
          "@type": "Question",
          "name": "How is the refundable Additional Child Tax Credit calculated?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "It is limited to the smallest of: (1) your child credit after phaseout, (2) the annual per-child refundable cap ($1,600 for 2023; $1,700 for 2024) × number of qualifying children, and (3) 15% of earned income over $2,500. Actual refundability also depends on your nonrefundable tax liability."
          }
        },
        {
          "@type": "Question",
          "name": "Does this tool give tax advice?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No. This calculator provides an educational estimate and cannot replace personalized advice or official IRS worksheets. Always review IRS instructions or consult a tax professional."
          }
        }
      ]
    }
  ],
  "reviewedBy": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "dateModified": "2026-01-19"
}</script>
<!-- MathJax for LaTeX rendering -->
<script>
  window.MathJax = { tex: { inlineMath: [['\\(','\\)'], ['</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "General",
      "item": "https://calcdomain.com/categories/general"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Miscellaneous",
      "item": "https://calcdomain.com/subcategories/miscellaneous"
    }
  ]
}
</script>
</head>
<body>

<a class="skip-link" href="#main">Skip to main content</a>
<header aria-label="Site header" role="banner">

</section>

<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{CTC}_\text{pre} = 2000 \cdot n_c,\quad \text{ODC}_\text{pre} = 500 \cdot n_o,\quad \text{Total}_\text{pre} = \text{CTC}_\text{pre} + \text{ODC}_\text{pre}\]</div>
  <pre class="auditspine-mono">\text{CTC}_\text{pre} = 2000 \cdot n_c,\quad \text{ODC}_\text{pre} = 500 \cdot n_o,\quad \text{Total}_\text{pre} = \text{CTC}_\text{pre} + \text{ODC}_\text{pre}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[P = 50 \cdot \left\lceil \frac{\max(0,\, \text{MAGI} - T)}{1000} \right\rceil\]</div>
  <pre class="auditspine-mono">P = 50 \cdot \left\lceil \frac{\max(0,\, \text{MAGI} - T)}{1000} \right\rceil</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{CTC}_\text{after} = \max\!\big(0,\, \text{CTC}_\text{pre} - P\big), \quad \text{ODC}_\text{after} = \max\!\big(0,\, \text{ODC}_\text{pre} - \max(0,\, P - \text{CTC}_\text{pre})\big)\]</div>
  <pre class="auditspine-mono">\text{CTC}_\text{after} = \max\!\big(0,\, \text{CTC}_\text{pre} - P\big), \quad \text{ODC}_\text{after} = \max\!\big(0,\, \text{ODC}_\text{pre} - \max(0,\, P - \text{CTC}_\text{pre})\big)</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{ACTC}_\text{max} = \min\!\Big( \text{CTC}_\text{after},\; R_y \cdot n_c,\; 0.15 \cdot \max(0,\, \text{EI} - 2500) \Big)\]</div>
  <pre class="auditspine-mono">\text{ACTC}_\text{max} = \min\!\Big( \text{CTC}_\text{after},\; R_y \cdot n_c,\; 0.15 \cdot \max(0,\, \text{EI} - 2500) \Big)</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">Pre-credit totals Let n_c = qualifying children under 17, n_o = other dependents. \[ \text{CTC}_\text{pre} = 2000 \cdot n_c,\quad \text{ODC}_\text{pre} = 500 \cdot n_o,\quad \text{Total}_\text{pre} = \text{CTC}_\text{pre} + \text{ODC}_\text{pre} \] Phaseout (T = $400{,}000 for MFJ; $200{,}000 otherwise; MAGI = Modified AGI) \[ P = 50 \cdot \left\lceil \frac{\max(0,\, \text{MAGI} - T)}{1000} \right\rceil \] Apply to CTC first, then to ODC: \[ \text{CTC}_\text{after} = \max\!\big(0,\, \text{CTC}_\text{pre} - P\big), \quad \text{ODC}_\text{after} = \max\!\big(0,\, \text{ODC}_\text{pre} - \max(0,\, P - \text{CTC}_\text{pre})\big) \] Refundable Additional CTC (maximum potential) Earned income EI; per-child refundable cap R_y = 1700 (2024) or 1600 (2023). \[ \text{ACTC}_\text{max} = \min\!\Big( \text{CTC}_\text{after},\; R_y \cdot n_c,\; 0.15 \cdot \max(0,\, \text{EI} - 2500) \Big) \] The total estimated credit reported is \(\text{CTC}_\text{after} + \text{ODC}_\text{after}\). Actual refundable/nonrefundable split depends on your tax liability and full Schedule 8812 worksheets.</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><span class="auditspine-mono">T</span> = property tax (annual or monthly depending on input) <em>(currency)</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>irs.gov/instructions/i1040s8</strong> — irs.gov · Accessed 2026-01-19<br><a href="https://www.irs.gov/instructions/i1040s8" target="_blank" rel="nofollow noopener">https://www.irs.gov/instructions/i1040s8</a></li>
<li><strong>irs.gov/…/child-tax-credit</strong> — irs.gov · Accessed 2026-01-19<br><a href="https://www.irs.gov/credits-deductions/individuals/child-tax-credit" target="_blank" rel="nofollow noopener">https://www.irs.gov/credits-deductions/individuals/child-tax-credit</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</main>
<!-- Standard Footer --> 
<script defer="">
    (function(){
      'use strict';

      // Elements
      const form = document.getElementById('ctcForm');
      const els = {
        taxYear: document.getElementById('taxYear'),
        filing: () => document.querySelector('input[name="filing"]:checked'),
        numKids: document.getElementById('numKids'),
        numOther: document.getElementById('numOther'),
        magi: document.getElementById('magi'),
        earnedIncome: document.getElementById('earnedIncome'),
        // results
        preCredit: document.getElementById('preCredit'),
        phaseout: document.getElementById('phaseout'),
        ctcAfter: document.getElementById('ctcAfter'),
        odcAfter: document.getElementById('odcAfter'),
        actc: document.getElementById('actc'),
        totalCredit: document.getElementById('totalCredit'),
      };

      // Tooltips
      const tooltips = [
        {btn:'tipKidsBtn', panel:'tipKids'},
        {btn:'tipOtherBtn', panel:'tipOther'},
        {btn:'tipMagiBtn', panel:'tipMagi'},
        {btn:'tipEarnBtn', panel:'tipEarn'},
      ];
      tooltips.forEach(({btn, panel})=>{
        const b = document.getElementById(btn);
        const p = document.getElementById(panel);
        b.addEventListener('click', ()=>{
          const isOpen = b.getAttribute('aria-expanded') === 'true';
          b.setAttribute('aria-expanded', String(!isOpen));
          p.setAttribute('aria-hidden', String(isOpen));
        });
        b.addEventListener('keydown', (e)=>{
          if(e.key === 'Escape'){
            b.setAttribute('aria-expanded','false');
            p.setAttribute('aria-hidden','true');
            b.focus();
          }
        });
      });

      // Validation helpers
      const errors = {
        yearError: document.getElementById('yearError'),
        fsError: document.getElementById('fsError'),
        kidsError: document.getElementById('kidsError'),
        otherError: document.getElementById('otherError'),
        magiError: document.getElementById('magiError'),
        earnError: document.getElementById('earnError'),
      };

      function setError(inputEl, errorEl, msg){
        inputEl.setAttribute('aria-invalid','true');
        errorEl.textContent = msg;
      }
      function clearError(inputEl, errorEl){
        inputEl.setAttribute('aria-invalid','false');
        errorEl.textContent = '';
      }

      function validateRequiredNumber(el, errorEl, opts = {}){
        const v = el.value.trim();
        if(v === ''){
          setError(el, errorEl, 'Please enter a value.');
          return false;
        }
        const num = Number(v);
        if(isNaN(num)){
          setError(el, errorEl, 'Please enter a valid number.');
          return false;
        }
        if(opts.min !== undefined && num < opts.min){
          setError(el, errorEl, `Value must be ≥ ${opts.min}.`);
          return false;
        }
        if(opts.integer && !Number.isInteger(num)){
          setError(el, errorEl, 'Please enter a whole number (no decimals).');
          return false;
        }
        clearError(el, errorEl);
        return true;
      }

      function currency(n){
        return new Intl.NumberFormat('en-US', {style:'currency', currency:'USD', maximumFractionDigits:0}).format(n);
      }

      // Phaseout thresholds by filing status
      function thresholdForFS(fs){
        return fs === 'MFJ' ? 400000 : 200000;
      }
      function refundableCapPerChild(year){
        return year === '2024' ? 1700 : 1600; // 2023: 1600; 2024: 1700
      }

      function compute(){
        // Validate on compute to keep results safe
        const ok = [
          validateRequiredNumber(els.numKids, errors.kidsError, {min:0, integer:true}),
          validateRequiredNumber(els.numOther, errors.otherError, {min:0, integer:true}),
          validateRequiredNumber(els.magi, errors.magiError, {min:0}),
          validateRequiredNumber(els.earnedIncome, errors.earnError, {min:0}),
        ].every(Boolean);

        // filing status present?
        if(!els.filing()){
          errors.fsError.textContent = 'Please choose a filing status.';
        } else {
          errors.fsError.textContent = '';
        }

        if(!ok || !els.filing()){ return; }

        const year = els.taxYear.value;
        const fs = els.filing().value;
        const kids = Number(els.numKids.value);
        const other = Number(els.numOther.value);
        const magi = Number(els.magi.value);
        const ei = Number(els.earnedIncome.value);

        const CTC_PER_CHILD = 2000;
        const ODC_PER_DEP = 500;
        const T = thresholdForFS(fs);

        const ctcPre = CTC_PER_CHILD * kids;
        const odcPre = ODC_PER_DEP * other;
        const totalPre = ctcPre + odcPre;

        const excess = Math.max(0, magi - T);
        const phaseout = excess > 0 ? 50 * Math.ceil(excess / 1000) : 0;

        // Apply to CTC first, then ODC
        const ctcAfter = Math.max(0, ctcPre - phaseout);
        const remainingPhaseout = Math.max(0, phaseout - ctcPre);
        const odcAfter = Math.max(0, odcPre - remainingPhaseout);

        // Refundable ACTC max
        const capPerChild = refundableCapPerChild(year);
        const eiCap = Math.max(0, 0.15 * Math.max(0, ei - 2500));
        const childCap = capPerChild * kids;

        const actcMax = Math.min(ctcAfter, childCap, eiCap);

        const totalAfter = ctcAfter + odcAfter;

        // Update UI
        els.preCredit.textContent = currency(totalPre);
        els.phaseout.textContent = currency(Math.min(phaseout, totalPre));
        els.ctcAfter.textContent = currency(ctcAfter);
        els.odcAfter.textContent = currency(odcAfter);
        els.actc.textContent = currency(actcMax);
        els.totalCredit.textContent = currency(totalAfter);
      }

      // Inline validation on blur
      els.numKids.addEventListener('blur', ()=>{ validateRequiredNumber(els.numKids, errors.kidsError, {min:0, integer:true}); });
      els.numOther.addEventListener('blur', ()=>{ validateRequiredNumber(els.numOther, errors.otherError, {min:0, integer:true}); });
      els.magi.addEventListener('blur', ()=>{ validateRequiredNumber(els.magi, errors.magiError, {min:0}); });
      els.earnedIncome.addEventListener('blur', ()=>{ validateRequiredNumber(els.earnedIncome, errors.earnError, {min:0}); });

      // Recompute on input changes
      ['change','input'].forEach(evt=>{
        form.addEventListener(evt, compute, {passive:true});
      });
      document.querySelectorAll('input[name="filing"]').forEach(r=>{
        r.addEventListener('change', compute, {passive:true});
      });

      // Actions
      document.getElementById('resetBtn').addEventListener('click', ()=>{
        form.reset();
        // reset defaults
        document.getElementById('fs_mfj').checked = true;
        els.taxYear.value = '2024';
        els.numKids.value = 0;
        els.numOther.value = 0;
        els.magi.value = 0;
        els.earnedIncome.value = 0;
        // clear errors
        Object.entries(errors).forEach(([k,el])=>{
          const inputId = k.replace('Error','');
          const inputEl = document.getElementById(inputId);
          if(inputEl){ inputEl.setAttribute('aria-invalid','false'); }
          el.textContent = '';
        });
        compute();
      });

      document.getElementById('exampleBtn').addEventListener('click', ()=>{
        els.taxYear.value = '2024';
        document.getElementById('fs_hoh').checked = true;
        els.numKids.value = 2;
        els.numOther.value = 1;
        els.magi.value = 215000;
        els.earnedIncome.value = 60000;
        // clear any previous errors
        Object.entries(errors).forEach(([k,el])=>{
          const inputId = k.replace('Error','');
          const inputEl = document.getElementById(inputId);
          if(inputEl){ inputEl.setAttribute('aria-invalid','false'); }
          el.textContent = '';
        });
        compute();
      });

      // Initial compute
      compute();

      // Keyboard accessibility: close tooltips with Escape globally
      document.addEventListener('keydown', (e)=>{
        if(e.key === 'Escape'){
          tooltips.forEach(({btn, panel})=>{
            const b=document.getElementById(btn), p=document.getElementById(panel);
            b.setAttribute('aria-expanded','false');
            p.setAttribute('aria-hidden','true');
          });
        }
      });

    })();
  </script>

<script defer="" src="/assets/js/mobile-menu.js"></script>
<script defer="" src="/assets/js/page-enhancements.js"></script>
</body></html>, '</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "General",
      "item": "https://calcdomain.com/categories/general"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Miscellaneous",
      "item": "https://calcdomain.com/subcategories/miscellaneous"
    }
  ]
}
</script>
</head>
<body>

<a class="skip-link" href="#main">Skip to main content</a>
<header aria-label="Site header" role="banner">

</section>

<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{CTC}_\text{pre} = 2000 \cdot n_c,\quad \text{ODC}_\text{pre} = 500 \cdot n_o,\quad \text{Total}_\text{pre} = \text{CTC}_\text{pre} + \text{ODC}_\text{pre}\]</div>
  <pre class="auditspine-mono">\text{CTC}_\text{pre} = 2000 \cdot n_c,\quad \text{ODC}_\text{pre} = 500 \cdot n_o,\quad \text{Total}_\text{pre} = \text{CTC}_\text{pre} + \text{ODC}_\text{pre}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[P = 50 \cdot \left\lceil \frac{\max(0,\, \text{MAGI} - T)}{1000} \right\rceil\]</div>
  <pre class="auditspine-mono">P = 50 \cdot \left\lceil \frac{\max(0,\, \text{MAGI} - T)}{1000} \right\rceil</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{CTC}_\text{after} = \max\!\big(0,\, \text{CTC}_\text{pre} - P\big), \quad \text{ODC}_\text{after} = \max\!\big(0,\, \text{ODC}_\text{pre} - \max(0,\, P - \text{CTC}_\text{pre})\big)\]</div>
  <pre class="auditspine-mono">\text{CTC}_\text{after} = \max\!\big(0,\, \text{CTC}_\text{pre} - P\big), \quad \text{ODC}_\text{after} = \max\!\big(0,\, \text{ODC}_\text{pre} - \max(0,\, P - \text{CTC}_\text{pre})\big)</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{ACTC}_\text{max} = \min\!\Big( \text{CTC}_\text{after},\; R_y \cdot n_c,\; 0.15 \cdot \max(0,\, \text{EI} - 2500) \Big)\]</div>
  <pre class="auditspine-mono">\text{ACTC}_\text{max} = \min\!\Big( \text{CTC}_\text{after},\; R_y \cdot n_c,\; 0.15 \cdot \max(0,\, \text{EI} - 2500) \Big)</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">Pre-credit totals Let n_c = qualifying children under 17, n_o = other dependents. \[ \text{CTC}_\text{pre} = 2000 \cdot n_c,\quad \text{ODC}_\text{pre} = 500 \cdot n_o,\quad \text{Total}_\text{pre} = \text{CTC}_\text{pre} + \text{ODC}_\text{pre} \] Phaseout (T = $400{,}000 for MFJ; $200{,}000 otherwise; MAGI = Modified AGI) \[ P = 50 \cdot \left\lceil \frac{\max(0,\, \text{MAGI} - T)}{1000} \right\rceil \] Apply to CTC first, then to ODC: \[ \text{CTC}_\text{after} = \max\!\big(0,\, \text{CTC}_\text{pre} - P\big), \quad \text{ODC}_\text{after} = \max\!\big(0,\, \text{ODC}_\text{pre} - \max(0,\, P - \text{CTC}_\text{pre})\big) \] Refundable Additional CTC (maximum potential) Earned income EI; per-child refundable cap R_y = 1700 (2024) or 1600 (2023). \[ \text{ACTC}_\text{max} = \min\!\Big( \text{CTC}_\text{after},\; R_y \cdot n_c,\; 0.15 \cdot \max(0,\, \text{EI} - 2500) \Big) \] The total estimated credit reported is \(\text{CTC}_\text{after} + \text{ODC}_\text{after}\). Actual refundable/nonrefundable split depends on your tax liability and full Schedule 8812 worksheets.</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><span class="auditspine-mono">T</span> = property tax (annual or monthly depending on input) <em>(currency)</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>irs.gov/instructions/i1040s8</strong> — irs.gov · Accessed 2026-01-19<br><a href="https://www.irs.gov/instructions/i1040s8" target="_blank" rel="nofollow noopener">https://www.irs.gov/instructions/i1040s8</a></li>
<li><strong>irs.gov/…/child-tax-credit</strong> — irs.gov · Accessed 2026-01-19<br><a href="https://www.irs.gov/credits-deductions/individuals/child-tax-credit" target="_blank" rel="nofollow noopener">https://www.irs.gov/credits-deductions/individuals/child-tax-credit</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</main>
<!-- Standard Footer --> 
<script defer="">
    (function(){
      'use strict';

      // Elements
      const form = document.getElementById('ctcForm');
      const els = {
        taxYear: document.getElementById('taxYear'),
        filing: () => document.querySelector('input[name="filing"]:checked'),
        numKids: document.getElementById('numKids'),
        numOther: document.getElementById('numOther'),
        magi: document.getElementById('magi'),
        earnedIncome: document.getElementById('earnedIncome'),
        // results
        preCredit: document.getElementById('preCredit'),
        phaseout: document.getElementById('phaseout'),
        ctcAfter: document.getElementById('ctcAfter'),
        odcAfter: document.getElementById('odcAfter'),
        actc: document.getElementById('actc'),
        totalCredit: document.getElementById('totalCredit'),
      };

      // Tooltips
      const tooltips = [
        {btn:'tipKidsBtn', panel:'tipKids'},
        {btn:'tipOtherBtn', panel:'tipOther'},
        {btn:'tipMagiBtn', panel:'tipMagi'},
        {btn:'tipEarnBtn', panel:'tipEarn'},
      ];
      tooltips.forEach(({btn, panel})=>{
        const b = document.getElementById(btn);
        const p = document.getElementById(panel);
        b.addEventListener('click', ()=>{
          const isOpen = b.getAttribute('aria-expanded') === 'true';
          b.setAttribute('aria-expanded', String(!isOpen));
          p.setAttribute('aria-hidden', String(isOpen));
        });
        b.addEventListener('keydown', (e)=>{
          if(e.key === 'Escape'){
            b.setAttribute('aria-expanded','false');
            p.setAttribute('aria-hidden','true');
            b.focus();
          }
        });
      });

      // Validation helpers
      const errors = {
        yearError: document.getElementById('yearError'),
        fsError: document.getElementById('fsError'),
        kidsError: document.getElementById('kidsError'),
        otherError: document.getElementById('otherError'),
        magiError: document.getElementById('magiError'),
        earnError: document.getElementById('earnError'),
      };

      function setError(inputEl, errorEl, msg){
        inputEl.setAttribute('aria-invalid','true');
        errorEl.textContent = msg;
      }
      function clearError(inputEl, errorEl){
        inputEl.setAttribute('aria-invalid','false');
        errorEl.textContent = '';
      }

      function validateRequiredNumber(el, errorEl, opts = {}){
        const v = el.value.trim();
        if(v === ''){
          setError(el, errorEl, 'Please enter a value.');
          return false;
        }
        const num = Number(v);
        if(isNaN(num)){
          setError(el, errorEl, 'Please enter a valid number.');
          return false;
        }
        if(opts.min !== undefined && num < opts.min){
          setError(el, errorEl, `Value must be ≥ ${opts.min}.`);
          return false;
        }
        if(opts.integer && !Number.isInteger(num)){
          setError(el, errorEl, 'Please enter a whole number (no decimals).');
          return false;
        }
        clearError(el, errorEl);
        return true;
      }

      function currency(n){
        return new Intl.NumberFormat('en-US', {style:'currency', currency:'USD', maximumFractionDigits:0}).format(n);
      }

      // Phaseout thresholds by filing status
      function thresholdForFS(fs){
        return fs === 'MFJ' ? 400000 : 200000;
      }
      function refundableCapPerChild(year){
        return year === '2024' ? 1700 : 1600; // 2023: 1600; 2024: 1700
      }

      function compute(){
        // Validate on compute to keep results safe
        const ok = [
          validateRequiredNumber(els.numKids, errors.kidsError, {min:0, integer:true}),
          validateRequiredNumber(els.numOther, errors.otherError, {min:0, integer:true}),
          validateRequiredNumber(els.magi, errors.magiError, {min:0}),
          validateRequiredNumber(els.earnedIncome, errors.earnError, {min:0}),
        ].every(Boolean);

        // filing status present?
        if(!els.filing()){
          errors.fsError.textContent = 'Please choose a filing status.';
        } else {
          errors.fsError.textContent = '';
        }

        if(!ok || !els.filing()){ return; }

        const year = els.taxYear.value;
        const fs = els.filing().value;
        const kids = Number(els.numKids.value);
        const other = Number(els.numOther.value);
        const magi = Number(els.magi.value);
        const ei = Number(els.earnedIncome.value);

        const CTC_PER_CHILD = 2000;
        const ODC_PER_DEP = 500;
        const T = thresholdForFS(fs);

        const ctcPre = CTC_PER_CHILD * kids;
        const odcPre = ODC_PER_DEP * other;
        const totalPre = ctcPre + odcPre;

        const excess = Math.max(0, magi - T);
        const phaseout = excess > 0 ? 50 * Math.ceil(excess / 1000) : 0;

        // Apply to CTC first, then ODC
        const ctcAfter = Math.max(0, ctcPre - phaseout);
        const remainingPhaseout = Math.max(0, phaseout - ctcPre);
        const odcAfter = Math.max(0, odcPre - remainingPhaseout);

        // Refundable ACTC max
        const capPerChild = refundableCapPerChild(year);
        const eiCap = Math.max(0, 0.15 * Math.max(0, ei - 2500));
        const childCap = capPerChild * kids;

        const actcMax = Math.min(ctcAfter, childCap, eiCap);

        const totalAfter = ctcAfter + odcAfter;

        // Update UI
        els.preCredit.textContent = currency(totalPre);
        els.phaseout.textContent = currency(Math.min(phaseout, totalPre));
        els.ctcAfter.textContent = currency(ctcAfter);
        els.odcAfter.textContent = currency(odcAfter);
        els.actc.textContent = currency(actcMax);
        els.totalCredit.textContent = currency(totalAfter);
      }

      // Inline validation on blur
      els.numKids.addEventListener('blur', ()=>{ validateRequiredNumber(els.numKids, errors.kidsError, {min:0, integer:true}); });
      els.numOther.addEventListener('blur', ()=>{ validateRequiredNumber(els.numOther, errors.otherError, {min:0, integer:true}); });
      els.magi.addEventListener('blur', ()=>{ validateRequiredNumber(els.magi, errors.magiError, {min:0}); });
      els.earnedIncome.addEventListener('blur', ()=>{ validateRequiredNumber(els.earnedIncome, errors.earnError, {min:0}); });

      // Recompute on input changes
      ['change','input'].forEach(evt=>{
        form.addEventListener(evt, compute, {passive:true});
      });
      document.querySelectorAll('input[name="filing"]').forEach(r=>{
        r.addEventListener('change', compute, {passive:true});
      });

      // Actions
      document.getElementById('resetBtn').addEventListener('click', ()=>{
        form.reset();
        // reset defaults
        document.getElementById('fs_mfj').checked = true;
        els.taxYear.value = '2024';
        els.numKids.value = 0;
        els.numOther.value = 0;
        els.magi.value = 0;
        els.earnedIncome.value = 0;
        // clear errors
        Object.entries(errors).forEach(([k,el])=>{
          const inputId = k.replace('Error','');
          const inputEl = document.getElementById(inputId);
          if(inputEl){ inputEl.setAttribute('aria-invalid','false'); }
          el.textContent = '';
        });
        compute();
      });

      document.getElementById('exampleBtn').addEventListener('click', ()=>{
        els.taxYear.value = '2024';
        document.getElementById('fs_hoh').checked = true;
        els.numKids.value = 2;
        els.numOther.value = 1;
        els.magi.value = 215000;
        els.earnedIncome.value = 60000;
        // clear any previous errors
        Object.entries(errors).forEach(([k,el])=>{
          const inputId = k.replace('Error','');
          const inputEl = document.getElementById(inputId);
          if(inputEl){ inputEl.setAttribute('aria-invalid','false'); }
          el.textContent = '';
        });
        compute();
      });

      // Initial compute
      compute();

      // Keyboard accessibility: close tooltips with Escape globally
      document.addEventListener('keydown', (e)=>{
        if(e.key === 'Escape'){
          tooltips.forEach(({btn, panel})=>{
            const b=document.getElementById(btn), p=document.getElementById(panel);
            b.setAttribute('aria-expanded','false');
            p.setAttribute('aria-hidden','true');
          });
        }
      });

    })();
  </script>

<script defer="" src="/assets/js/mobile-menu.js"></script>
<script defer="" src="/assets/js/page-enhancements.js"></script>
</body></html>]], displayMath: [['\\[','\\]']] }, svg: { fontCache: 'global' } };
</script>
<script crossorigin="anonymous" defer="" id="MathJax-script" integrity="sha384-VRs0V9ZbBZ48cM5E0nG9g3xw1Lq1t1oG3ux2Tn+6F5e8B9skgM0Vb5T+oS+Q3kqF" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "General",
      "item": "https://calcdomain.com/categories/general"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Miscellaneous",
      "item": "https://calcdomain.com/subcategories/miscellaneous"
    }
  ]
}
</script>
</head>
<body>

<a class="skip-link" href="#main">Skip to main content</a>
<header aria-label="Site header" role="banner">

</section>

<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{CTC}_\text{pre} = 2000 \cdot n_c,\quad \text{ODC}_\text{pre} = 500 \cdot n_o,\quad \text{Total}_\text{pre} = \text{CTC}_\text{pre} + \text{ODC}_\text{pre}\]</div>
  <pre class="auditspine-mono">\text{CTC}_\text{pre} = 2000 \cdot n_c,\quad \text{ODC}_\text{pre} = 500 \cdot n_o,\quad \text{Total}_\text{pre} = \text{CTC}_\text{pre} + \text{ODC}_\text{pre}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[P = 50 \cdot \left\lceil \frac{\max(0,\, \text{MAGI} - T)}{1000} \right\rceil\]</div>
  <pre class="auditspine-mono">P = 50 \cdot \left\lceil \frac{\max(0,\, \text{MAGI} - T)}{1000} \right\rceil</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{CTC}_\text{after} = \max\!\big(0,\, \text{CTC}_\text{pre} - P\big), \quad \text{ODC}_\text{after} = \max\!\big(0,\, \text{ODC}_\text{pre} - \max(0,\, P - \text{CTC}_\text{pre})\big)\]</div>
  <pre class="auditspine-mono">\text{CTC}_\text{after} = \max\!\big(0,\, \text{CTC}_\text{pre} - P\big), \quad \text{ODC}_\text{after} = \max\!\big(0,\, \text{ODC}_\text{pre} - \max(0,\, P - \text{CTC}_\text{pre})\big)</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{ACTC}_\text{max} = \min\!\Big( \text{CTC}_\text{after},\; R_y \cdot n_c,\; 0.15 \cdot \max(0,\, \text{EI} - 2500) \Big)\]</div>
  <pre class="auditspine-mono">\text{ACTC}_\text{max} = \min\!\Big( \text{CTC}_\text{after},\; R_y \cdot n_c,\; 0.15 \cdot \max(0,\, \text{EI} - 2500) \Big)</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">Pre-credit totals Let n_c = qualifying children under 17, n_o = other dependents. \[ \text{CTC}_\text{pre} = 2000 \cdot n_c,\quad \text{ODC}_\text{pre} = 500 \cdot n_o,\quad \text{Total}_\text{pre} = \text{CTC}_\text{pre} + \text{ODC}_\text{pre} \] Phaseout (T = $400{,}000 for MFJ; $200{,}000 otherwise; MAGI = Modified AGI) \[ P = 50 \cdot \left\lceil \frac{\max(0,\, \text{MAGI} - T)}{1000} \right\rceil \] Apply to CTC first, then to ODC: \[ \text{CTC}_\text{after} = \max\!\big(0,\, \text{CTC}_\text{pre} - P\big), \quad \text{ODC}_\text{after} = \max\!\big(0,\, \text{ODC}_\text{pre} - \max(0,\, P - \text{CTC}_\text{pre})\big) \] Refundable Additional CTC (maximum potential) Earned income EI; per-child refundable cap R_y = 1700 (2024) or 1600 (2023). \[ \text{ACTC}_\text{max} = \min\!\Big( \text{CTC}_\text{after},\; R_y \cdot n_c,\; 0.15 \cdot \max(0,\, \text{EI} - 2500) \Big) \] The total estimated credit reported is \(\text{CTC}_\text{after} + \text{ODC}_\text{after}\). Actual refundable/nonrefundable split depends on your tax liability and full Schedule 8812 worksheets.</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><span class="auditspine-mono">T</span> = property tax (annual or monthly depending on input) <em>(currency)</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>irs.gov/instructions/i1040s8</strong> — irs.gov · Accessed 2026-01-19<br><a href="https://www.irs.gov/instructions/i1040s8" target="_blank" rel="nofollow noopener">https://www.irs.gov/instructions/i1040s8</a></li>
<li><strong>irs.gov/…/child-tax-credit</strong> — irs.gov · Accessed 2026-01-19<br><a href="https://www.irs.gov/credits-deductions/individuals/child-tax-credit" target="_blank" rel="nofollow noopener">https://www.irs.gov/credits-deductions/individuals/child-tax-credit</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</main>
<!-- Standard Footer --> 
<script defer="">
    (function(){
      'use strict';

      // Elements
      const form = document.getElementById('ctcForm');
      const els = {
        taxYear: document.getElementById('taxYear'),
        filing: () => document.querySelector('input[name="filing"]:checked'),
        numKids: document.getElementById('numKids'),
        numOther: document.getElementById('numOther'),
        magi: document.getElementById('magi'),
        earnedIncome: document.getElementById('earnedIncome'),
        // results
        preCredit: document.getElementById('preCredit'),
        phaseout: document.getElementById('phaseout'),
        ctcAfter: document.getElementById('ctcAfter'),
        odcAfter: document.getElementById('odcAfter'),
        actc: document.getElementById('actc'),
        totalCredit: document.getElementById('totalCredit'),
      };

      // Tooltips
      const tooltips = [
        {btn:'tipKidsBtn', panel:'tipKids'},
        {btn:'tipOtherBtn', panel:'tipOther'},
        {btn:'tipMagiBtn', panel:'tipMagi'},
        {btn:'tipEarnBtn', panel:'tipEarn'},
      ];
      tooltips.forEach(({btn, panel})=>{
        const b = document.getElementById(btn);
        const p = document.getElementById(panel);
        b.addEventListener('click', ()=>{
          const isOpen = b.getAttribute('aria-expanded') === 'true';
          b.setAttribute('aria-expanded', String(!isOpen));
          p.setAttribute('aria-hidden', String(isOpen));
        });
        b.addEventListener('keydown', (e)=>{
          if(e.key === 'Escape'){
            b.setAttribute('aria-expanded','false');
            p.setAttribute('aria-hidden','true');
            b.focus();
          }
        });
      });

      // Validation helpers
      const errors = {
        yearError: document.getElementById('yearError'),
        fsError: document.getElementById('fsError'),
        kidsError: document.getElementById('kidsError'),
        otherError: document.getElementById('otherError'),
        magiError: document.getElementById('magiError'),
        earnError: document.getElementById('earnError'),
      };

      function setError(inputEl, errorEl, msg){
        inputEl.setAttribute('aria-invalid','true');
        errorEl.textContent = msg;
      }
      function clearError(inputEl, errorEl){
        inputEl.setAttribute('aria-invalid','false');
        errorEl.textContent = '';
      }

      function validateRequiredNumber(el, errorEl, opts = {}){
        const v = el.value.trim();
        if(v === ''){
          setError(el, errorEl, 'Please enter a value.');
          return false;
        }
        const num = Number(v);
        if(isNaN(num)){
          setError(el, errorEl, 'Please enter a valid number.');
          return false;
        }
        if(opts.min !== undefined && num < opts.min){
          setError(el, errorEl, `Value must be ≥ ${opts.min}.`);
          return false;
        }
        if(opts.integer && !Number.isInteger(num)){
          setError(el, errorEl, 'Please enter a whole number (no decimals).');
          return false;
        }
        clearError(el, errorEl);
        return true;
      }

      function currency(n){
        return new Intl.NumberFormat('en-US', {style:'currency', currency:'USD', maximumFractionDigits:0}).format(n);
      }

      // Phaseout thresholds by filing status
      function thresholdForFS(fs){
        return fs === 'MFJ' ? 400000 : 200000;
      }
      function refundableCapPerChild(year){
        return year === '2024' ? 1700 : 1600; // 2023: 1600; 2024: 1700
      }

      function compute(){
        // Validate on compute to keep results safe
        const ok = [
          validateRequiredNumber(els.numKids, errors.kidsError, {min:0, integer:true}),
          validateRequiredNumber(els.numOther, errors.otherError, {min:0, integer:true}),
          validateRequiredNumber(els.magi, errors.magiError, {min:0}),
          validateRequiredNumber(els.earnedIncome, errors.earnError, {min:0}),
        ].every(Boolean);

        // filing status present?
        if(!els.filing()){
          errors.fsError.textContent = 'Please choose a filing status.';
        } else {
          errors.fsError.textContent = '';
        }

        if(!ok || !els.filing()){ return; }

        const year = els.taxYear.value;
        const fs = els.filing().value;
        const kids = Number(els.numKids.value);
        const other = Number(els.numOther.value);
        const magi = Number(els.magi.value);
        const ei = Number(els.earnedIncome.value);

        const CTC_PER_CHILD = 2000;
        const ODC_PER_DEP = 500;
        const T = thresholdForFS(fs);

        const ctcPre = CTC_PER_CHILD * kids;
        const odcPre = ODC_PER_DEP * other;
        const totalPre = ctcPre + odcPre;

        const excess = Math.max(0, magi - T);
        const phaseout = excess > 0 ? 50 * Math.ceil(excess / 1000) : 0;

        // Apply to CTC first, then ODC
        const ctcAfter = Math.max(0, ctcPre - phaseout);
        const remainingPhaseout = Math.max(0, phaseout - ctcPre);
        const odcAfter = Math.max(0, odcPre - remainingPhaseout);

        // Refundable ACTC max
        const capPerChild = refundableCapPerChild(year);
        const eiCap = Math.max(0, 0.15 * Math.max(0, ei - 2500));
        const childCap = capPerChild * kids;

        const actcMax = Math.min(ctcAfter, childCap, eiCap);

        const totalAfter = ctcAfter + odcAfter;

        // Update UI
        els.preCredit.textContent = currency(totalPre);
        els.phaseout.textContent = currency(Math.min(phaseout, totalPre));
        els.ctcAfter.textContent = currency(ctcAfter);
        els.odcAfter.textContent = currency(odcAfter);
        els.actc.textContent = currency(actcMax);
        els.totalCredit.textContent = currency(totalAfter);
      }

      // Inline validation on blur
      els.numKids.addEventListener('blur', ()=>{ validateRequiredNumber(els.numKids, errors.kidsError, {min:0, integer:true}); });
      els.numOther.addEventListener('blur', ()=>{ validateRequiredNumber(els.numOther, errors.otherError, {min:0, integer:true}); });
      els.magi.addEventListener('blur', ()=>{ validateRequiredNumber(els.magi, errors.magiError, {min:0}); });
      els.earnedIncome.addEventListener('blur', ()=>{ validateRequiredNumber(els.earnedIncome, errors.earnError, {min:0}); });

      // Recompute on input changes
      ['change','input'].forEach(evt=>{
        form.addEventListener(evt, compute, {passive:true});
      });
      document.querySelectorAll('input[name="filing"]').forEach(r=>{
        r.addEventListener('change', compute, {passive:true});
      });

      // Actions
      document.getElementById('resetBtn').addEventListener('click', ()=>{
        form.reset();
        // reset defaults
        document.getElementById('fs_mfj').checked = true;
        els.taxYear.value = '2024';
        els.numKids.value = 0;
        els.numOther.value = 0;
        els.magi.value = 0;
        els.earnedIncome.value = 0;
        // clear errors
        Object.entries(errors).forEach(([k,el])=>{
          const inputId = k.replace('Error','');
          const inputEl = document.getElementById(inputId);
          if(inputEl){ inputEl.setAttribute('aria-invalid','false'); }
          el.textContent = '';
        });
        compute();
      });

      document.getElementById('exampleBtn').addEventListener('click', ()=>{
        els.taxYear.value = '2024';
        document.getElementById('fs_hoh').checked = true;
        els.numKids.value = 2;
        els.numOther.value = 1;
        els.magi.value = 215000;
        els.earnedIncome.value = 60000;
        // clear any previous errors
        Object.entries(errors).forEach(([k,el])=>{
          const inputId = k.replace('Error','');
          const inputEl = document.getElementById(inputId);
          if(inputEl){ inputEl.setAttribute('aria-invalid','false'); }
          el.textContent = '';
        });
        compute();
      });

      // Initial compute
      compute();

      // Keyboard accessibility: close tooltips with Escape globally
      document.addEventListener('keydown', (e)=>{
        if(e.key === 'Escape'){
          tooltips.forEach(({btn, panel})=>{
            const b=document.getElementById(btn), p=document.getElementById(panel);
            b.setAttribute('aria-expanded','false');
            p.setAttribute('aria-hidden','true');
          });
        }
      });

    })();
  </script>

<script defer="" src="/assets/js/mobile-menu.js"></script>
<script defer="" src="/assets/js/page-enhancements.js"></script>
</body></html>
<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/psychrometric-chart" />
    <title>Psychrometric Chart Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Psychrometric Chart Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Psychrometric Chart Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Psychrometric Chart Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/psychrometric-chart" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Psychrometric Chart Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Psychrometric Chart Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Interactive Psychrometric Chart Calculator (Online HVAC Tool)",
        "description": "Interactive online psychrometric chart calculator. Plot HVAC air states, see dry-bulb, wet-bulb, relative humidity, humidity ratio, enthalpy, and dew point. Supports IP (°F) and SI (°C) units.",
        "url": "https://calcdomain.com/psychrometric-chart",
        "breadcrumb": {
          "@type": "BreadcrumbList",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Home",
              "item": "https://calcdomain.com"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "Math & Conversions",
              "item": "https://calcdomain.com/categories/math-conversions"
            },
            {
              "@type": "ListItem",
              "position": 3,
              "name": "Generale",
              "item": "https://calcdomain.com/subcategories/math-conversions-generale"
            },
            {
              "@type": "ListItem",
              "position": 4,
              "name": "Psychrometric Chart",
              "item": "https://calcdomain.com/psychrometric-chart"
            }
          ]
        },
        "mainEntity": {
          "@type": "SoftwareApplication",
          "name": "Psychrometric Chart Calculator",
          "applicationCategory": "EngineeringApplication",
          "operatingSystem": "Any",
          "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" }
        },
        "faqPage": {
          "@type": "FAQPage",
          "mainEntity": [
            {
              "@type": "Question",
              "name": "What is a psychrometric chart used for?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "A psychrometric chart is a graphical tool that shows the thermodynamic properties of moist air. HVAC engineers use it to visualize air-conditioning processes such as heating, cooling, humidification, dehumidification, and mixing of air streams."
              }
            },
            {
              "@type": "Question",
              "name": "Which inputs do I need for this psychrometric chart calculator?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "You can define an air state using any two independent properties: dry-bulb temperature with relative humidity, dry-bulb ies and plots the point on the chart."
              }
            },
            {
              "@type": "Question",
              "name": "Does this psychrometric chart support both SI and IP units?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes. You can switch between SI units (°C, kPa, g/kg) and IP units (°F, inHg, grains/lb). The chart and all calculated values update automatically when you change the unit system."
              }
            }
          ]
        }
      }</script>
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Engineering Calculators", "item": "https://calcdomain.com/categories/engineering"}, {"@type": "ListItem", "position": 3, "name": "Mechanical Engineering Calculators", "item": "https://calcdomain.com/subcategories/mechanical-engineering"}, {"@type": "ListItem", "position": 4, "name": "Interactive Psychrometric Chart Calculator", "item": "https://calcdomain.com/psychrometric-chart"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/engineering" class="text-blue-600 hover:underline">Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/mechanical-engineering" class="text-blue-600 hover:underline">Mechanical Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Interactive Psychrometric Chart Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Interactive Psychrometric Chart Calculator
              </h1>
              <p class="text-gray-600">
                Plot moist air states, visualize HVAC processes, and read
                dry-bulb, wet-bulb, RH, humidity ratio, enthalpy, and dew point
                directly on an interactive chart.
              </p>
            </header>

            <!-- Controls -->
            <section aria-labelledby="psychro-inputs" class="mb-6 space-y-4">
              <div class="flex flex-wrap items-center gap-3">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Unit system</label
                  >
                  <select
                    id="unitSystem"
                    class="border rounded-md px-3 py-1.5 text-sm"
                  >
                    <option value="IP">IP (°F, inHg, grains/lb)</option>
                    <option value="SI">SI (°C, kPa, g/kg)</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Atmospheric pressure</label
                  >
                  <div class="flex items-center gap-1">
                    <input
                      id="pAtm"
                      type="number"
                      step="0.01"
                      class="border rounded-md px-2 py-1.5 w-28 text-sm"
                      value="29.92"
                    />
                    <span id="pAtmUnit" class="text-sm text-gray-600"
                      >inHg</span
                    >
                  </div>
                </div>
                <div class="flex-1"></div>
                <button
                  id="resetChart"
                  type="button"
                  class="ml-auto inline-flex items-center gap-1 text-xs px-3 py-1.5 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50"
                >
                  Reset chart
                </button>
              </div>

              <div class="grid md:grid-cols-3 gap-4">
                <div class="border rounded-lg p-3">
                  <h2 class="text-sm font-semibold mb-2">Define air state</h2>
                  <label class="block text-xs font-medium text-gray-700 mb-1"
                    >Dry-bulb temperature</label
                  >
                  <div class="flex items-center gap-1 mb-2">
                    <input
                      id="tDry"
                      type="number"
                      step="0.1"
                      class="border rounded-md px-2 py-1.5 w-24 text-sm"
                      value="75"
                    />
                    <span id="tDryUnit" class="text-sm text-gray-600">°F</span>
                  </div>

                  <label class="block text-xs font-medium text-gray-700 mb-1"
                    >Second property</label
                  >
                  <select
                    id="secondProp"
                    class="border rounded-md px-2 py-1.5 w-full text-xs mb-2"
                  >
                    <option value="RH">Relative humidity (%)</option>
                    <option value="TW">Wet-bulb temperature</option>
                    <option value="W">Humidity ratio</option>
                  </select>

                  <div id="secondPropInputs">
                    <div data-type="RH">
                      <div class="flex items-center gap-1">
                        <input
                          id="rh"
                          type="number"
                          step="0.1"
                          class="border rounded-md px-2 py-1.5 w-24 text-sm"
                          value="50"
                        />
                        <span class="text-sm text-gray-600">%</span>
                      </div>
                    </div>
                    <div data-type="TW" class="hidden">
                      <div class="flex items-center gap-1">
                        <input
                          id="tWet"
                          type="number"
                          step="0.1"
                          class="border rounded-md px-2 py-1.5 w-24 text-sm"
                          value="65"
                        />
                        <span id="tWetUnit" class="text-sm text-gray-600"
                          >°F</span
                        >
                      </div>
                    </div>
                    <div data-type="W" class="hidden">
                      <div class="flex items-center gap-1">
                        <input
                          id="wRatio"
                          type="number"
                          step="0.0001"
                          class="border rounded-md px-2 py-1.5 w-28 text-sm"
                          value="0.009"
                        />
                        <span id="wRatioUnit" class="text-sm text-gray-600"
                          >lb/lb<sub>da</sub></span
                        >
                      </div>
                    </div>
                  </div>

                  <button
                    id="addPoint"
                    type="button"
                    class="mt-3 w-full inline-flex justify-center items-center gap-1 text-xs px-3 py-1.5 rounded-md bg-blue-600 text-white hover:bg-blue-700"
                  >
                    Add point to chart
                  </button>
                </div>

                <div class="border rounded-lg p-3">
                  <h2 class="text-sm font-semibold mb-2">
                    Calculated properties
                  </h2>
                  <dl class="text-xs space-y-1.5">
                    <div class="flex justify-between gap-2">
                      <dt class="text-gray-600">Relative humidity</dt>
                      <dd id="outRH" class="font-mono">–</dd>
                    </div>
                    <div class="flex justify-between gap-2">
                      <dt class="text-gray-600">Humidity ratio</dt>
                      <dd id="outW" class="font-mono">–</dd>
                    </div>
                    <div class="flex justify-between gap-2">
                      <dt class="text-gray-600">Dew point</dt>
                      <dd id="outTdp" class="font-mono">–</dd>
                    </div>
                    <div class="flex justify-between gap-2">
                      <dt class="text-gray-600">Enthalpy</dt>
                      <dd id="outH" class="font-mono">–</dd>
                    </div>
                    <div class="flex justify-between gap-2">
                      <dt class="text-gray-600">Specific volume</dt>
                      <dd id="outV" class="font-mono">–</dd>
                    </div>
                  </dl>
                  <p class="mt-2 text-[11px] text-gray-500">
                    Values update automatically when you change inputs, even
                    before plotting.
                  </p>
                </div>

                <div class="border rounded-lg p-3">
                  <h2 class="text-sm font-semibold mb-2">Plotted points</h2>
                  <div
                    id="pointsList"
                    class="max-h-40 overflow-y-auto text-xs space-y-1"
                  >
                    <p class="text-gray-500 text-xs">
                      No points yet. Add one using the form.
                    </p>
                  </div>
                </div>
              </div>
            </section>

            <!-- Chart -->
            <section class="mb-8">
              <div class="flex items-center justify-between mb-2">
                <h2 class="text-lg font-semibold">Psychrometric chart</h2>
                <div class="flex items-center gap-2 text-xs text-gray-600">
                  <label class="inline-flex items-center gap-1">
                    <input
                      id="showRHCurves"
                      type="checkbox"
                      class="rounded border-gray-300"
                      checked
                    />
                    <span>RH curves</span>
                  </label>
                  <label class="inline-flex items-center gap-1">
                    <input
                      id="showEnthalpyLines"
                      type="checkbox"
                      class="rounded border-gray-300"
                      checked
                    />
                    <span>Enthalpy lines</span>
                  </label>
                </div>
              </div>
              <div class="border rounded-lg bg-white overflow-hidden">
                <div class="relative">
                  <canvas
                    id="psychroCanvas"
                    width="800"
                    height="520"
                    class="w-full h-auto bg-white"
                  ></canvas>
                  <div
                    id="chartTooltip"
                    class="hidden absolute bg-gray-900 text-white text-[11px] px-2 py-1 rounded shadow pointer-events-none"
                  ></div>
                </div>
                <div
                  class="px-3 py-2 border-t text-[11px] text-gray-500 flex flex-wrap justify-between gap-2"
                >
                  <span
                    >Click on the chart to read approximate properties at any
                    point.</span
                  >
                  <span
                    >Assumes ideal-gas moist air; suitable for HVAC design and
                    education.</span
                  >
                </div>
              </div>
            </section>

            <!-- Explanations -->
            <section class="prose text-sm">
              <h2>How to use this psychrometric chart</h2>
              <ol>
                <li>
                  <strong>Choose the unit system</strong> (IP or SI) and set the
                  local atmospheric pressure.
                </li>
                <li>
                  <strong>Enter dry-bulb temperature</strong> and select a
                  second property: relative humidity, wet-bulb temperature, or
                  humidity ratio.
                </li>
                <li>
                  The calculator <strong>instantly computes</strong> humidity
                  ratio, dew point, enthalpy, specific volume, and RH.
                </li>
                <li>
                  Click <strong>&ldquo;Add point to chart&rdquo;</strong> to
                  plot the state and keep it in the list of points.
                </li>
                <li>
                  Toggle <strong>RH curves</strong> and
                  <strong>enthalpy lines</strong> to simplify or enrich the
                  chart.
                </li>
                <li>
                  <strong>Click anywhere on the chart</strong> to probe
                  approximate properties at that location.
                </li>
              </ol>

              <h2>Key psychrometric formulas used</h2>
              <p>
                For standard HVAC ranges, moist air can be modeled as an ideal
                gas. The calculator uses widely accepted ASHRAE-style
                correlations.
              </p>

              <h3>1. Saturation vapor pressure of water</h3>
              <p>
                In SI units (°C, kPa), a common approximation for saturation
                pressure is:
              </p>
              <div class="formula-box">
                \( p_{ws}(T) \approx 0.61078 \exp\left(\dfrac{17.27\,T}{T +
                237.3}\right) \) &nbsp;[kPa]
              </div>

              <h3>2. Humidity ratio</h3>
              <p>
                Humidity ratio \( W \) (mass of water vapor per mass of dry air)
                at partial pressure \( p_w \) is:
              </p>
              <div class="formula-box">
                \( W = 0.62198 \dfrac{p_w}{p_{atm} - p_w} \)
              </div>
              <p>For a known relative humidity \( \phi \) (%):</p>
              <div class="formula-box">
                \( p_w = \phi \dfrac{p_{ws}(T_{db})}{100} \)
              </div>

              <h3>3. Enthalpy of moist air</h3>
              <p>
                Specific enthalpy \( h \) (per kg of dry air) is approximated
                by:
              </p>
              <div class="formula-box">
                \( h \approx 1.006\,T_{db} + W\,(2501 + 1.86\,T_{db}) \)
                &nbsp;[kJ/kg<sub>da</sub>]
              </div>

              <h3>4. Dew-point temperature</h3>
              <p>
                Dew point is the temperature at which the air becomes saturated
                at the current vapor pressure. We invert the saturation equation
                numerically to find \( T_{dp} \) such that:
              </p>
              <div class="formula-box">\( p_{ws}(T_{dp}) = p_w \)</div>

              <h3>5. Specific volume</h3>
              <p>
                Specific volume \( v \) of moist air (per kg of dry air) is:
              </p>
              <div class="formula-box">
                \( v \approx
                \dfrac{R_{air}\,(T_{db}+273.15)\,(1+1.607\,W)}{p_{atm}} \)
              </div>

              <h2>Typical HVAC applications</h2>
              <ul>
                <li>
                  <strong>Cooling and dehumidification:</strong> follow a path
                  that moves left (lower temperature) and downward (lower
                  humidity ratio).
                </li>
                <li>
                  <strong>Heating without humidification:</strong> horizontal
                  line to the right (temperature increases, humidity ratio
                  constant, RH decreases).
                </li>
                <li>
                  <strong>Humidification:</strong> move upward (higher humidity
                  ratio) at roughly constant dry-bulb temperature.
                </li>
                <li>
                  <strong>Air mixing:</strong> the mixed state lies on the
                  straight line between the two air states, weighted by mass
                  flow.
                </li>
              </ul>

              <h2>Limitations and assumptions</h2>
              <ul>
                <li>
                  Assumes <strong>ideal-gas behavior</strong> of air and water
                  vapor.
                </li>
                <li>
                  Valid for typical HVAC ranges (roughly −10&nbsp;°C to
                  50&nbsp;°C / 15&nbsp;°F to 120&nbsp;°F, moderate pressures).
                </li>
                <li>
                  Does not account for <strong>very high pressures</strong> or
                  non-standard gas mixtures.
                </li>
              </ul>
            </section>

            <section class="mt-8" id="faq">
              <h2 class="text-lg font-semibold mb-3">
                Psychrometric chart FAQ
              </h2>
              <div class="space-y-3">
                <details class="border rounded-md px-3 py-2">
                  <summary class="font-medium cursor-pointer">
                    What is a psychrometric chart used for?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    A psychrometric chart is a graphical representation of moist
                    air properties. It lets you visualize how temperature,
                    humidity, enthalpy, and specific volume change during HVAC
                    processes such as heating, cooling, humidification,
                    dehumidification, and mixing of air streams.
                  </p>
                </details>
                <details class="border rounded-md px-3 py-2">
                  <summary class="font-medium cursor-pointer">
                    Which inputs do I need for this calculator?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    You must specify the atmospheric pressure and any two
                    independent air properties. This tool supports dry-bulb
                    temperature with relative humidity, wet-bulb temperature, or
                    humidity ratio. From those, it computes the remaining
                    properties and plots the point on the chart.
                  </p>
                </details>
                <details class="border rounded-md px-3 py-2">
                  <summary class="font-medium cursor-pointer">
                    Can I use this chart for both SI and IP units?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    Yes. Use the unit selector to switch between SI (°C, kPa,
                    g/kg) and IP (°F, inHg, grains/lb). The chart axes, grid,
                    and all calculated values are converted automatically.
                  </p>
                </details>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Unit system IP (°F, inHg, grains/lb) SI (°C, kPa, g/kg) Atmospheric pressure inHg Reset chart Define air state Dry-bulb temperature °F Second property Relative humidity (%) Wet-bulb temperature Humidity ratio % °F lb/lb da Add point to chart Calculated properties Relative humidity – Humidity ratio – Dew point – Enthalpy – Specific volume – Values update automatically when you change inputs, even before plotting. Plotted points No points yet. Add one using the form. Psychrometric chart RH curves</li><li>Enthalpy lines</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Psychrometric, Chart, Unit system IP (°F, inHg, grains/lb) SI (°C, kPa, g/kg) Atmospheric pressure inHg Reset chart Define air state Dry-bulb temperature °F Second property Relative humidity (%) Wet-bulb temperature Humidity ratio % °F lb/lb da Add point to chart Calculated properties Relative humidity – Humidity ratio – Dew point – Enthalpy – Specific volume – Values update automatically when you change inputs, even before plotting. Plotted points No points yet. Add one using the form. Psychrometric chart RH curves, Enthalpy lines.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Unit system IP (°F, inHg, grains/lb) SI (°C, kPa, g/kg) Atmospheric pressure inHg Reset chart Define air state Dry-bulb temperature °F Second property Relative humidity (%) Wet-bulb temperature Humidity ratio % °F lb/lb da Add point to chart Calculated properties Relative humidity – Humidity ratio – Dew point – Enthalpy – Specific volume – Values update automatically when you change inputs, even before plotting. Plotted points No points yet. Add one using the form. Psychrometric chart RH curves</li><li>Enthalpy lines</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Math & Conversions tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/humidity-ratio"
                  class="text-blue-600 hover:underline"
                  >Humidity Ratio Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/temperature"
                  class="text-blue-600 hover:underline"
                  >Temperature Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pressure-unit-converter"
                  class="text-blue-600 hover:underline"
                  >Pressure Unit Converter</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/energy-unit-converter"
                  class="text-blue-600 hover:underline"
                  >Energy Unit Converter</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/volume-converter"
                  class="text-blue-600 hover:underline"
                  >Volume Unit Converter</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/ideal-gas-law"
                  class="text-blue-600 hover:underline"
                  >Ideal Gas Law Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/heat-index"
                  class="text-blue-600 hover:underline"
                  >Heat Index Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/dew-point"
                  class="text-blue-600 hover:underline"
                  >Dew Point Calculator</a
                >
              </li>
            </ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">More Math & Conversions</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/temperature"
                  class="text-blue-600 hover:underline"
                  >Temperature Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/length-converter"
                  class="text-blue-600 hover:underline"
                  >Length Unit Converter</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/area-converter"
                  class="text-blue-600 hover:underline"
                  >Area Unit Converter</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/volume-converter"
                  class="text-blue-600 hover:underline"
                  >Volume Unit Converter</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pressure-unit-converter"
                  class="text-blue-600 hover:underline"
                  >Pressure Unit Converter</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      /* --- Psychrometric core functions (simplified ASHRAE-style) --- */
      const Psychro = (() => {
        const C_TO_F = (c) => (c * 9) / 5 + 32;
        const F_TO_C = (f) => ((f - 32) * 5) / 9;
        const INHG_TO_KPA = (inHg) => inHg * 3.38639;
        const KPA_TO_INHG = (kPa) => kPa / 3.38639;

        function pws_kPa(Tc) {
          // Tetens-like equation, good for HVAC range
          return 0.61078 * Math.exp((17.27 * Tc) / (Tc + 237.3));
        }

        function humidityRatioFromPw(pw, pAtm) {
          return (0.62198 * pw) / (pAtm - pw);
        }

        function pwFromHumidityRatio(W, pAtm) {
          return (W * pAtm) / (0.62198 + W);
        }

        function enthalpy_kJkg(Tc, W) {
          return 1.006 * Tc + W * (2501 + 1.86 * Tc);
        }

        function dewPointFromPw(pw) {
          // Invert pws(T) numerically (bisection)
          let low = -40,
            high = 80;
          for (let i = 0; i < 40; i++) {
            const mid = (low + high) / 2;
            const pMid = pws_kPa(mid);
            if (pMid > pw) high = mid;
            else low = mid;
          }
          return (low + high) / 2;
        }

        function specificVolume_m3kg(Tc, W, pAtm_kPa) {
          const R_da = 0.287042; // kJ/kgK
          return (R_da * (Tc + 273.15) * (1 + 1.607 * W)) / pAtm_kPa;
        }

        function fromDryBulbAndRH(T, RH, pAtm, unitSystem) {
          const Tc = unitSystem === "IP" ? F_TO_C(T) : T;
          const pAtm_kPa = unitSystem === "IP" ? INHG_TO_KPA(pAtm) : pAtm;
          const pws = pws_kPa(Tc);
          const pw = (RH / 100) * pws;
          const W = humidityRatioFromPw(pw, pAtm_kPa);
          const h = enthalpy_kJkg(Tc, W);
          const Tdp = dewPointFromPw(pw);
          const v = specificVolume_m3kg(Tc, W, pAtm_kPa);
          return { Tc, Tdb: Tc, W, RH, h, Tdp, v };
        }

        function fromDryBulbAndW(T, W, pAtm, unitSystem) {
          const Tc = unitSystem === "IP" ? F_TO_C(T) : T;
          const pAtm_kPa = unitSystem === "IP" ? INHG_TO_KPA(pAtm) : pAtm;
          const pw = pwFromHumidityRatio(W, pAtm_kPa);
          const pws = pws_kPa(Tc);
          const RH = Math.min(100, Math.max(0, (100 * pw) / pws));
          const h = enthalpy_kJkg(Tc, W);
          const Tdp = dewPointFromPw(pw);
          const v = specificVolume_m3kg(Tc, W, pAtm_kPa);
          return { Tc, Tdb: Tc, W, RH, h, Tdp, v };
        }

        function fromDryBulbAndWetBulb(Tdb, Twb, pAtm, unitSystem) {
          // Simple iterative solution using psychrometric relation
          const Tc = unitSystem === "IP" ? F_TO_C(Tdb) : Tdb;
          const Tcw = unitSystem === "IP" ? F_TO_C(Twb) : Twb;
          const pAtm_kPa = unitSystem === "IP" ? INHG_TO_KPA(pAtm) : pAtm;

          // Use approximation: W = [ ( (pws(Tw) - A*(Tdb-Tw)) * 0.62198 ) / (pAtm - pws(Tw)) ]
          // where A ~ 0.00066 * pAtm_kPa (kPa/°C)
          const pwsTw = pws_kPa(Tcw);
          const A = 0.00066 * pAtm_kPa;
          const W = (0.62198 * (pwsTw - A * (Tc - Tcw))) / (pAtm_kPa - pwsTw);
          const pw = pwFromHumidityRatio(W, pAtm_kPa);
          const pws = pws_kPa(Tc);
          const RH = Math.min(100, Math.max(0, (100 * pw) / pws));
          const h = enthalpy_kJkg(Tc, W);
          const Tdp = dewPointFromPw(pw);
          const v = specificVolume_m3kg(Tc, W, pAtm_kPa);
          return { Tc, Tdb: Tc, W, RH, h, Tdp, v };
        }

        return {
          C_TO_F,
          F_TO_C,
          INHG_TO_KPA,
          KPA_TO_INHG,
          pws_kPa,
          humidityRatioFromPw,
          enthalpy_kJkg,
          dewPointFromPw,
          specificVolume_m3kg,
          fromDryBulbAndRH,
          fromDryBulbAndW,
          fromDryBulbAndWetBulb,
        };
      })();

      /* --- UI and chart rendering --- */
      document.addEventListener("DOMContentLoaded", () => {
        const unitSystemEl = document.getElementById("unitSystem");
        const pAtmEl = document.getElementById("pAtm");
        const pAtmUnitEl = document.getElementById("pAtmUnit");
        const tDryEl = document.getElementById("tDry");
        const tDryUnitEl = document.getElementById("tDryUnit");
        const secondPropEl = document.getElementById("secondProp");
        const secondPropInputs = document.querySelectorAll(
          "#secondPropInputs > div"
        );
        const tWetEl = document.getElementById("tWet");
        const tWetUnitEl = document.getElementById("tWetUnit");
        const rhEl = document.getElementById("rh");
        const wRatioEl = document.getElementById("wRatio");
        const wRatioUnitEl = document.getElementById("wRatioUnit");
        const addPointBtn = document.getElementById("addPoint");
        const resetChartBtn = document.getElementById("resetChart");
        const outRH = document.getElementById("outRH");
        const outW = document.getElementById("outW");
        const outTdp = document.getElementById("outTdp");
        const outH = document.getElementById("outH");
        const outV = document.getElementById("outV");
        const pointsList = document.getElementById("pointsList");
        const showRHCurvesEl = document.getElementById("showRHCurves");
        const showEnthalpyLinesEl =
          document.getElementById("showEnthalpyLines");
        const canvas = document.getElementById("psychroCanvas");
        const ctx = canvas.getContext("2d");
        const tooltip = document.getElementById("chartTooltip");

        let unitSystem = "IP";
        let points = [];
        let pointIdCounter = 1;

        // Chart bounds in SI (°C, kg/kg)
        const chart = {
          Tmin: -5,
          Tmax: 50,
          Wmin: 0,
          Wmax: 0.03,
          padding: { left: 60, right: 20, top: 20, bottom: 50 },
        };

        function currentPAtm_kPa() {
          const p = parseFloat(pAtmEl.value) || 101.325;
          return unitSystem === "IP" ? Psychro.INHG_TO_KPA(p) : p;
        }

        function formatOutputs(state) {
          if (!state) {
            outRH.textContent =
              outW.textContent =
              outTdp.textContent =
              outH.textContent =
              outV.textContent =
                "–";
            return;
          }
          if (unitSystem === "IP") {
            const TdbF = Psychro.C_TO_F(state.Tdb);
            const TdpF = Psychro.C_TO_F(state.Tdp);
            const grainsPerLb = state.W * 7000;
            const hBTUlb = state.h / 2.326; // 1 BTU/lb ≈ 2.326 kJ/kg
            const vft3lb = state.v * 16.0185; // 1 m3/kg ≈ 16.0185 ft3/lb
            outRH.textContent = state.RH.toFixed(1) + " %";
            outW.textContent = grainsPerLb.toFixed(0) + " grains/lb";
            outTdp.textContent = TdpF.toFixed(1) + " °F";
            outH.textContent = hBTUlb.toFixed(1) + " BTU/lb";
            outV.textContent = vft3lb.toFixed(3) + " ft³/lb";
          } else {
            const gPerKg = state.W * 1000;
            outRH.textContent = state.RH.toFixed(1) + " %";
            outW.textContent = gPerKg.toFixed(1) + " g/kg";
            outTdp.textContent = state.Tdp.toFixed(1) + " °C";
            outH.textContent = state.h.toFixed(1) + " kJ/kg";
            outV.textContent = state.v.toFixed(3) + " m³/kg";
          }
        }

        function computeStateFromInputs() {
          const T = parseFloat(tDryEl.value);
          if (isNaN(T)) return null;
          const pAtm =
            parseFloat(pAtmEl.value) || (unitSystem === "IP" ? 29.92 : 101.325);
          const mode = secondPropEl.value;
          try {
            if (mode === "RH") {
              const RH = parseFloat(rhEl.value);
              if (isNaN(RH)) return null;
              return Psychro.fromDryBulbAndRH(T, RH, pAtm, unitSystem);
            } else if (mode === "TW") {
              const Tw = parseFloat(tWetEl.value);
              if (isNaN(Tw)) return null;
              return Psychro.fromDryBulbAndWetBulb(T, Tw, pAtm, unitSystem);
            } else {
              const Winput = parseFloat(wRatioEl.value);
              if (isNaN(Winput)) return null;
              const W = unitSystem === "IP" ? Winput / 7000 : Winput / 1000;
              return Psychro.fromDryBulbAndW(T, W, pAtm, unitSystem);
            }
          } catch {
            return null;
          }
        }

        function updateOutputs() {
          const state = computeStateFromInputs();
          formatOutputs(state);
        }

        function updateUnits() {
          if (unitSystem === "IP") {
            pAtmUnitEl.textContent = "inHg";
            tDryUnitEl.textContent = "°F";
            tWetUnitEl.textContent = "°F";
            wRatioUnitEl.innerHTML = "grains/lb<sub>da</sub>";
            // Convert existing numeric values from SI to IP where appropriate
            const p = parseFloat(pAtmEl.value);
            if (!isNaN(p)) pAtmEl.value = Psychro.KPA_TO_INHG(p).toFixed(2);
            const Td = parseFloat(tDryEl.value);
            if (!isNaN(Td)) tDryEl.value = Psychro.C_TO_F(Td).toFixed(1);
            const Tw = parseFloat(tWetEl.value);
            if (!isNaN(Tw)) tWetEl.value = Psychro.C_TO_F(Tw).toFixed(1);
            const W = parseFloat(wRatioEl.value);
            if (!isNaN(W)) wRatioEl.value = (W * 1000 * 0.7).toFixed(0); // approx g/kg -> grains/lb
          } else {
            pAtmUnitEl.textContent = "kPa";
            tDryUnitEl.textContent = "°C";
            tWetUnitEl.textContent = "°C";
            wRatioUnitEl.innerHTML = "g/kg<sub>da</sub>";
            const p = parseFloat(pAtmEl.value);
            if (!isNaN(p)) pAtmEl.value = Psychro.INHG_TO_KPA(p).toFixed(2);
            const Td = parseFloat(tDryEl.value);
            if (!isNaN(Td)) tDryEl.value = Psychro.F_TO_C(Td).toFixed(1);
            const Tw = parseFloat(tWetEl.value);
            if (!isNaN(Tw)) tWetEl.value = Psychro.F_TO_C(Tw).toFixed(1);
            const W = parseFloat(wRatioEl.value);
            if (!isNaN(W)) wRatioEl.value = (W / 0.7).toFixed(1); // approx grains/lb -> g/kg
          }
          updateOutputs();
          drawChart();
          renderPointsList();
        }

        function setSecondPropVisibility() {
          const mode = secondPropEl.value;
          secondPropInputs.forEach((div) => {
            div.classList.toggle(
              "hidden",
              div.getAttribute("data-type") !== mode
            );
          });
        }

        function stateToChartCoords(Tc, W) {
          const { left, right, top, bottom } = chart.padding;
          const width = canvas.width - left - right;
          const height = canvas.height - top - bottom;
          const x =
            left + ((Tc - chart.Tmin) / (chart.Tmax - chart.Tmin)) * width;
          const y =
            top + (1 - (W - chart.Wmin) / (chart.Wmax - chart.Wmin)) * height;
          return { x, y };
        }

        function chartCoordsToState(x, y) {
          const { left, right, top, bottom } = chart.padding;
          const width = canvas.width - left - right;
          const height = canvas.height - top - bottom;
          const Tc =
            chart.Tmin + ((x - left) / width) * (chart.Tmax - chart.Tmin);
          const W =
            chart.Wmin + (1 - (y - top) / height) * (chart.Wmax - chart.Wmin);
          return { Tc, W };
        }

        function clearCanvas() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function drawAxes() {
          const { left, right, top, bottom } = chart.padding;
          const width = canvas.width - left - right;
          const height = canvas.height - top - bottom;

          ctx.save();
          ctx.strokeStyle = "#9ca3af";
          ctx.lineWidth = 1;

          // Axes
          ctx.beginPath();
          ctx.moveTo(left, top);
          ctx.lineTo(left, top + height);
          ctx.lineTo(left + width, top + height);
          ctx.stroke();

          ctx.fillStyle = "#374151";
          ctx.font = "11px Inter, system-ui, sans-serif";
          ctx.textAlign = "center";

          // X ticks (temperature)
          const stepT = 5;
          for (
            let T = Math.ceil(chart.Tmin / stepT) * stepT;
            T <= chart.Tmax;
            T += stepT
          ) {
            const { x, y } = stateToChartCoords(T, chart.Wmin);
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x, y + 4);
            ctx.strokeStyle = "#d1d5db";
            ctx.stroke();
            ctx.fillStyle = "#4b5563";
            const label =
              unitSystem === "IP" ? Psychro.C_TO_F(T).toFixed(0) : T.toFixed(0);
            ctx.fillText(label, x, y + 16);
          }

          // Y ticks (humidity ratio)
          ctx.textAlign = "right";
          const stepW = 0.0025;
          for (let W = chart.Wmin; W <= chart.Wmax + 1e-6; W += stepW) {
            const { x, y } = stateToChartCoords(chart.Tmin, W);
            ctx.beginPath();
            ctx.moveTo(x - 4, y);
            ctx.lineTo(x, y);
            ctx.strokeStyle = "#d1d5db";
            ctx.stroke();
            ctx.fillStyle = "#4b5563";
            let label;
            if (unitSystem === "IP") {
              const grains = W * 7000;
              label = grains.toFixed(0);
            } else {
              const gkg = W * 1000;
              label = gkg.toFixed(0);
            }
            ctx.fillText(label, x - 6, y + 3);
          }

          // Axis labels
          ctx.fillStyle = "#111827";
          ctx.textAlign = "center";
          const xLabel =
            unitSystem === "IP"
              ? "Dry-bulb temperature (°F)"
              : "Dry-bulb temperature (°C)";
          ctx.fillText(xLabel, left + width / 2, canvas.height - 10);

          ctx.save();
          ctx.translate(15, top + height / 2);
          ctx.rotate(-Math.PI / 2);
          const yLabel =
            unitSystem === "IP"
              ? "Humidity ratio (grains/lb dry air)"
              : "Humidity ratio (g/kg dry air)";
          ctx.fillText(yLabel, 0, 0);
          ctx.restore();

          ctx.restore();
        }

        function drawRHLines() {
          if (!showRHCurvesEl.checked) return;
          const pAtm_kPa = currentPAtm_kPa();
          const RHs = [10, 20, 30, 40, 50, 60, 70, 80, 90];
          ctx.save();
          ctx.lineWidth = 0.7;
          ctx.setLineDash([4, 4]);
          ctx.strokeStyle = "#9ca3af";

          RHs.forEach((RH) => {
            ctx.beginPath();
            let first = true;
            for (let T = chart.Tmin; T <= chart.Tmax; T += 0.5) {
              const pws = Psychro.pws_kPa(T);
              const pw = (RH / 100) * pws;
              if (pw >= pAtm_kPa) continue;
              const W = Psychro.humidityRatioFromPw(pw, pAtm_kPa);
              if (W < chart.Wmin || W > chart.Wmax) continue;
              const { x, y } = stateToChartCoords(T, W);
              if (first) {
                ctx.moveTo(x, y);
                first = false;
              } else {
                ctx.lineTo(x, y);
              }
            }
            ctx.stroke();
          });

          ctx.setLineDash([]);
          ctx.restore();
        }

        function drawEnthalpyLines() {
          if (!showEnthalpyLinesEl.checked) return;
          const pAtm_kPa = currentPAtm_kPa();
          const hs = [10, 20, 30, 40, 50, 60, 70, 80]; // kJ/kg
          ctx.save();
          ctx.lineWidth = 0.7;
          ctx.strokeStyle = "#c4b5fd";

          hs.forEach((h) => {
            ctx.beginPath();
            let first = true;
            for (let T = chart.Tmin; T <= chart.Tmax; T += 0.5) {
              // Solve for W from enthalpy equation: h = 1.006T + W(2501 + 1.86T)
              const W = (h - 1.006 * T) / (2501 + 1.86 * T);
              if (W < chart.Wmin || W > chart.Wmax) continue;
              const { x, y } = stateToChartCoords(T, W);
              if (first) {
                ctx.moveTo(x, y);
                first = false;
              } else {
                ctx.lineTo(x, y);
              }
            }
            ctx.stroke();
          });

          ctx.restore();
        }

        function drawSaturationCurve() {
          const pAtm_kPa = currentPAtm_kPa();
          ctx.save();
          ctx.strokeStyle = "#2563eb";
          ctx.lineWidth = 1.4;
          ctx.beginPath();
          let first = true;
          for (let T = chart.Tmin; T <= chart.Tmax; T += 0.25) {
            const pws = Psychro.pws_kPa(T);
            if (pws >= pAtm_kPa) continue;
            const W = Psychro.humidityRatioFromPw(pws, pAtm_kPa);
            if (W < chart.Wmin || W > chart.Wmax) continue;
            const { x, y } = stateToChartCoords(T, W);
            if (first) {
              ctx.moveTo(x, y);
              first = false;
            } else {
              ctx.lineTo(x, y);
            }
          }
          ctx.stroke();
          ctx.restore();
        }

        function drawGrid() {
          const { left, right, top, bottom } = chart.padding;
          const width = canvas.width - left - right;
          const height = canvas.height - top - bottom;
          ctx.save();
          ctx.strokeStyle = "#e5e7eb";
          ctx.lineWidth = 0.5;

          // Vertical grid
          const stepT = 5;
          for (
            let T = Math.ceil(chart.Tmin / stepT) * stepT;
            T <= chart.Tmax;
            T += stepT
          ) {
            const { x } = stateToChartCoords(T, chart.Wmin);
            ctx.beginPath();
            ctx.moveTo(x, top);
            ctx.lineTo(x, top + height);
            ctx.stroke();
          }

          // Horizontal grid
          const stepW = 0.0025;
          for (let W = chart.Wmin; W <= chart.Wmax + 1e-6; W += stepW) {
            const { y } = stateToChartCoords(chart.Tmin, W);
            ctx.beginPath();
            ctx.moveTo(left, y);
            ctx.lineTo(left + width, y);
            ctx.stroke();
          }

          ctx.restore();
        }

        function drawPoints() {
          ctx.save();
          points.forEach((p) => {
            const { x, y } = stateToChartCoords(p.state.Tdb, p.state.W);
            ctx.beginPath();
            ctx.fillStyle = p.color;
            ctx.arc(x, y, 4, 0, 2 * Math.PI);
            ctx.fill();
            // label
            ctx.fillStyle = "#111827";
            ctx.font = "10px Inter, system-ui, sans-serif";
            ctx.textAlign = "left";
            ctx.fillText(p.label, x + 5, y - 5);
          });
          ctx.restore();
        }

        function drawChart() {
          clearCanvas();
          drawGrid();
          drawAxes();
          drawRHLines();
          drawEnthalpyLines();
          drawSaturationCurve();
          drawPoints();
        }

        function renderPointsList() {
          pointsList.innerHTML = "";
          if (!points.length) {
            const p = document.createElement("p");
            p.className = "text-gray-500 text-xs";
            p.textContent = "No points yet. Add one using the form.";
            pointsList.appendChild(p);
            return;
          }
          points.forEach((pt) => {
            const row = document.createElement("div");
            row.className =
              "flex items-start justify-between gap-2 border-b last:border-b-0 py-1";
            const left = document.createElement("div");
            left.className = "text-[11px] leading-tight";
            const Tdisp =
              unitSystem === "IP"
                ? Psychro.C_TO_F(pt.state.Tdb).toFixed(1) + " °F"
                : pt.state.Tdb.toFixed(1) + " °C";
            const RHdisp = pt.state.RH.toFixed(1) + " %";
            left.innerHTML = `<span class="font-semibold" style="color:${pt.color}">${pt.label}</span><br>
        T = ${Tdisp}, RH = ${RHdisp}`;
            const btn = document.createElement("button");
            btn.type = "button";
            btn.className = "text-[11px] text-red-600 hover:underline";
            btn.textContent = "Remove";
            btn.addEventListener("click", () => {
              points = points.filter((p) => p.id !== pt.id);
              renderPointsList();
              drawChart();
            });
            row.appendChild(left);
            row.appendChild(btn);
            pointsList.appendChild(row);
          });
        }

        function addCurrentPoint() {
          const state = computeStateFromInputs();
          if (!state) return;
          const label = "P" + pointIdCounter++;
          const colorPalette = [
            "#dc2626",
            "#16a34a",
            "#7c3aed",
            "#ea580c",
            "#0ea5e9",
            "#be185d",
          ];
          const color = colorPalette[points.length % colorPalette.length];
          points.push({ id: Date.now() + Math.random(), label, state, color });
          renderPointsList();
          drawChart();
        }

        function resetChart() {
          points = [];
          pointIdCounter = 1;
          renderPointsList();
          drawChart();
        }

        // Tooltip on click
        canvas.addEventListener("click", (e) => {
          const rect = canvas.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          const { Tc, W } = chartCoordsToState(x, y);
          if (
            Tc < chart.Tmin ||
            Tc > chart.Tmax ||
            W < chart.Wmin ||
            W > chart.Wmax
          ) {
            tooltip.classList.add("hidden");
            return;
          }
          const pAtm_kPa = currentPAtm_kPa();
          const pw = Psychro.pwFromHumidityRatio
            ? Psychro.pwFromHumidityRatio(W, pAtm_kPa)
            : (Psychro.humidityRatioFromPw(W, pAtm_kPa) * pAtm_kPa) /
              (1 + Psychro.humidityRatioFromPw(W, pAtm_kPa));
          const pws = Psychro.pws_kPa(Tc);
          const RH = Math.min(100, Math.max(0, (100 * pw) / pws));
          const h = Psychro.enthalpy_kJkg(Tc, W);
          const Tdp = Psychro.dewPointFromPw(pw);
          const v = Psychro.specificVolume_m3kg(Tc, W, pAtm_kPa);
          const state = { Tdb: Tc, RH, W, h, Tdp, v };
          // Build tooltip text
          let text;
          if (unitSystem === "IP") {
            const TdbF = Psychro.C_TO_F(Tc).toFixed(1);
            const TdpF = Psychro.C_TO_F(Tdp).toFixed(1);
            const grains = (W * 7000).toFixed(0);
            const hBTUlb = (h / 2.326).toFixed(1);
            const vft3lb = (v * 16.0185).toFixed(3);
            text = `Tdb ${TdbF} °F\nRH ${RH.toFixed(
              0
            )} %\nW ${grains} grains/lb\nTdp ${TdpF} °F\nh ${hBTUlb} BTU/lb\nv ${vft3lb} ft³/lb`;
          } else {
            const gkg = (W * 1000).toFixed(1);
            text = `Tdb ${Tc.toFixed(1)} °C\nRH ${RH.toFixed(
              0
            )} %\nW ${gkg} g/kg\nTdp ${Tdp.toFixed(1)} °C\nh ${h.toFixed(
              1
            )} kJ/kg\nv ${v.toFixed(3)} m³/kg`;
          }
          tooltip.textContent = text;
          tooltip.style.left = x + 10 + "px";
          tooltip.style.top = y + 10 + "px";
          tooltip.classList.remove("hidden");
        });

        canvas.addEventListener("mouseleave", () => {
          tooltip.classList.add("hidden");
        });

        // Event listeners
        unitSystemEl.addEventListener("change", () => {
          unitSystem = unitSystemEl.value;
          updateUnits();
        });

        [pAtmEl, tDryEl, tWetEl, rhEl, wRatioEl].forEach((el) => {
          el.addEventListener("input", () => {
            updateOutputs();
            drawChart();
          });
        });

        secondPropEl.addEventListener("change", () => {
          setSecondPropVisibility();
          updateOutputs();
        });

        addPointBtn.addEventListener("click", addCurrentPoint);
        resetChartBtn.addEventListener("click", resetChart);
        showRHCurvesEl.addEventListener("change", drawChart);
        showEnthalpyLinesEl.addEventListener("change", drawChart);

        // Initial render
        setSecondPropVisibility();
        updateOutputs();
        drawChart();
      });
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

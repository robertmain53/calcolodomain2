<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/hazen-williams" />
    <title>Hazen Williams Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Hazen Williams Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Hazen Williams Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Hazen Williams Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/hazen-williams" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Hazen Williams Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Hazen Williams Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Engineering Calculators", "item": "https://calcdomain.com/categories/engineering"}, {"@type": "ListItem", "position": 3, "name": "Mechanical Engineering Calculators", "item": "https://calcdomain.com/subcategories/mechanical-engineering"}, {"@type": "ListItem", "position": 4, "name": "Hazen-Williams Pipe Flow Calculator", "item": "https://calcdomain.com/hazen-williams"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/engineering" class="text-blue-600 hover:underline">Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/mechanical-engineering" class="text-blue-600 hover:underline">Mechanical Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Hazen-Williams Pipe Flow Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl font-bold mb-2">
                Hazen-Williams Pipe Flow Calculator
              </h1>
              <p class="text-gray-600">
                Compute head loss, pressure drop, and velocity for water flow in
                circular pipes using the Hazen-Williams equation. Supports US
                (gpm, in, ft) and SI (L/s, mm, m) units.
              </p>
            </header>

            <!-- Calculator UI -->
            <section aria-labelledby="calculator-heading" class="mb-8">
              <h2 id="calculator-heading" class="text-xl font-semibold mb-4">
                Hazen-Williams Calculator
              </h2>

              <div class="flex flex-wrap gap-3 mb-4 items-center">
                <div
                  class="inline-flex rounded-full border border-gray-300 bg-gray-50 p-1 text-sm"
                  role="tablist"
                  aria-label="Unit system"
                >
                  <button
                    id="tab-us"
                    type="button"
                    role="tab"
                    aria-selected="true"
                    class="unit-tab px-3 py-1 rounded-full bg-white shadow text-blue-600 font-medium text-xs md:text-sm"
                    data-system="us"
                  >
                    US / Imperial
                  </button>
                  <button
                    id="tab-si"
                    type="button"
                    role="tab"
                    aria-selected="false"
                    class="unit-tab px-3 py-1 rounded-full text-gray-600 text-xs md:text-sm"
                    data-system="si"
                  >
                    SI / Metric
                  </button>
                </div>
                <span class="text-xs text-gray-500"
                  >Water only · Full pipe · Steady flow</span
                >
              </div>

              <form id="hazenForm" class="space-y-4">
                <!-- Flow / Diameter mode -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Solve for</label
                    >
                    <div class="flex flex-wrap gap-2 text-sm">
                      <button
                        type="button"
                        class="solve-mode-btn px-3 py-1 rounded-full border border-blue-500 text-blue-600 bg-blue-50"
                        data-mode="head"
                      >
                        Head loss / pressure drop
                      </button>
                      <button
                        type="button"
                        class="solve-mode-btn px-3 py-1 rounded-full border border-gray-300 text-gray-700"
                        data-mode="flow"
                      >
                        Flow rate
                      </button>
                      <button
                        type="button"
                        class="solve-mode-btn px-3 py-1 rounded-full border border-gray-300 text-gray-700"
                        data-mode="diameter"
                      >
                        Pipe diameter
                      </button>
                    </div>
                  </div>
                  <div>
                    <label
                      for="cFactor"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Hazen-Williams C-factor</label
                    >
                    <div class="flex gap-2">
                      <input
                        type="number"
                        id="cFactor"
                        name="cFactor"
                        step="1"
                        min="1"
                        max="300"
                        value="140"
                        class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"
                        required
                      />
                      <button
                        type="button"
                        id="btnShowCTable"
                        class="text-xs px-2 py-1 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"
                      >
                        C-table
                      </button>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">
                      Typical: PVC 150, new steel 120–140, old steel 80–110.
                    </p>
                  </div>
                </div>

                <!-- Inputs: flow, diameter, length, elevation -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div id="group-flow">
                    <label
                      for="flow"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Flow rate</label
                    >
                    <div class="flex">
                      <input
                        type="number"
                        id="flow"
                        name="flow"
                        step="any"
                        min="0"
                        value="500"
                        class="w-full border border-gray-300 rounded-l-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"
                        required
                      />
                      <span
                        id="flowUnit"
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-sm text-gray-600"
                        >gpm</span
                      >
                    </div>
                  </div>

                  <div id="group-diameter">
                    <label
                      for="diameter"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Pipe diameter</label
                    >
                    <div class="flex">
                      <input
                        type="number"
                        id="diameter"
                        name="diameter"
                        step="any"
                        min="0"
                        value="6"
                        class="w-full border border-gray-300 rounded-l-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"
                        required
                      />
                      <span
                        id="diameterUnit"
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-sm text-gray-600"
                        >in</span
                      >
                    </div>
                  </div>

                  <div>
                    <label
                      for="length"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Pipe length</label
                    >
                    <div class="flex">
                      <input
                        type="number"
                        id="length"
                        name="length"
                        step="any"
                        min="0"
                        value="100"
                        class="w-full border border-gray-300 rounded-l-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"
                        required
                      />
                      <span
                        id="lengthUnit"
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-sm text-gray-600"
                        >ft</span
                      >
                    </div>
                    <p class="text-xs text-gray-500 mt-1">
                      Use equivalent length including fittings if needed.
                    </p>
                  </div>

                  <div id="group-headloss" class="hidden">
                    <label
                      for="headLossInput"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Head loss (for solving flow/diameter)</label
                    >
                    <div class="flex">
                      <input
                        type="number"
                        id="headLossInput"
                        name="headLossInput"
                        step="any"
                        min="0"
                        value="10"
                        class="w-full border border-gray-300 rounded-l-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"
                      />
                      <span
                        id="headLossInputUnit"
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-sm text-gray-600"
                        >ft</span
                      >
                    </div>
                  </div>
                </div>

                <!-- Options -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Output pressure drop</label
                    >
                    <select
                      id="pressureUnit"
                      class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"
                    >
                      <option value="psi">psi</option>
                      <option value="kpa">kPa</option>
                      <option value="bar">bar</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Check velocity limit (optional)</label
                    >
                    <div class="flex">
                      <input
                        type="number"
                        id="vLimit"
                        step="any"
                        min="0"
                        placeholder="e.g. 10"
                        class="w-full border border-gray-300 rounded-l-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"
                      />
                      <span
                        id="vLimitUnit"
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-sm text-gray-600"
                        >ft/s</span
                      >
                    </div>
                    <p class="text-xs text-gray-500 mt-1">
                      Common design limits: 4–10 ft/s (1.2–3 m/s) depending on
                      system.
                    </p>
                  </div>
                </div>

                <div class="flex flex-wrap gap-3 items-center pt-2">
                  <button
                    type="button"
                    id="btnCalculate"
                    class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md shadow-sm"
                  >
                    Calculate
                  </button>
                  <button
                    type="reset"
                    id="btnReset"
                    class="text-sm text-gray-600 hover:text-gray-800"
                  >
                    Reset
                  </button>
                  <span id="calcError" class="text-sm text-red-600"></span>
                </div>
              </form>
            </section>

            <!-- Results -->
            <section aria-labelledby="results-heading" class="mb-8">
              <h2 id="results-heading" class="text-xl font-semibold mb-3">
                Results
              </h2>
              <div
                id="resultsCard"
                class="border border-gray-200 rounded-lg p-4 bg-gray-50 text-sm space-y-3"
              >
                <p class="text-gray-500">
                  Enter inputs and click “Calculate” to see results.
                </p>
                <div id="resultsContent" class="hidden space-y-3">
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div class="bg-white rounded-md border border-gray-200 p-3">
                      <div class="flex justify-between items-center mb-1">
                        <span class="font-medium text-gray-700">Head loss</span>
                        <span
                          id="resHeadLossPerLen"
                          class="text-xs text-gray-500"
                        ></span>
                      </div>
                      <p
                        id="resHeadLoss"
                        class="text-lg font-semibold text-blue-700"
                      ></p>
                      <p
                        id="resPressureDrop"
                        class="text-xs text-gray-600 mt-1"
                      ></p>
                    </div>

                    <div class="bg-white rounded-md border border-gray-200 p-3">
                      <div class="flex justify-between items-center mb-1">
                        <span class="font-medium text-gray-700">Velocity</span>
                        <span
                          id="resRelevance"
                          class="text-xs text-gray-500"
                        ></span>
                      </div>
                      <p
                        id="resVelocity"
                        class="text-lg font-semibold text-blue-700"
                      ></p>
                      <p id="resFlow" class="text-xs text-gray-600 mt-1"></p>
                      <p id="resVelocityNote" class="text-xs mt-1"></p>
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div class="bg-white rounded-md border border-gray-200 p-3">
                      <span class="font-medium text-gray-700 block mb-1"
                        >Pipe data</span
                      >
                      <ul class="text-xs text-gray-700 space-y-1">
                        <li id="resPipeSize"></li>
                        <li id="resCfactor"></li>
                        <li id="resSystem"></li>
                      </ul>
                    </div>
                    <div class="bg-white rounded-md border border-gray-200 p-3">
                      <span class="font-medium text-gray-700 block mb-1"
                        >Design checks</span
                      >
                      <ul
                        class="text-xs text-gray-700 space-y-1"
                        id="resChecks"
                      ></ul>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <!-- C-factor quick table (inline, collapsible) -->
            <section class="mb-8">
              <button
                type="button"
                id="toggleCTableInline"
                class="text-sm text-blue-600 hover:underline"
              >
                Show typical Hazen-Williams C-factors
              </button>
              <div id="cTableInline" class="mt-3 hidden">
                <div class="overflow-x-auto text-xs">
                  <table class="min-w-full border border-gray-200">
                    <thead class="bg-gray-100">
                      <tr>
                        <th class="px-2 py-1 border-b text-left">
                          Pipe material / condition
                        </th>
                        <th class="px-2 py-1 border-b text-right">Typical C</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="px-2 py-1 border-b">
                          PVC, CPVC, HDPE (new)
                        </td>
                        <td class="px-2 py-1 border-b text-right">150</td>
                      </tr>
                      <tr>
                        <td class="px-2 py-1 border-b">Copper, brass (new)</td>
                        <td class="px-2 py-1 border-b text-right">130–140</td>
                      </tr>
                      <tr>
                        <td class="px-2 py-1 border-b">
                          Ductile iron / steel (new, lined)
                        </td>
                        <td class="px-2 py-1 border-b text-right">130–145</td>
                      </tr>
                      <tr>
                        <td class="px-2 py-1 border-b">
                          Ductile iron / steel (old, some scale)
                        </td>
                        <td class="px-2 py-1 border-b text-right">100–120</td>
                      </tr>
                      <tr>
                        <td class="px-2 py-1 border-b">
                          Cast iron (old, tuberculated)
                        </td>
                        <td class="px-2 py-1 border-b text-right">60–100</td>
                      </tr>
                      <tr>
                        <td class="px-2 py-1 border-b">Concrete (smooth)</td>
                        <td class="px-2 py-1 border-b text-right">120–140</td>
                      </tr>
                      <tr>
                        <td class="px-2 py-1">Wood stave / rough pipe</td>
                        <td class="px-2 py-1 text-right">100–120</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <p class="text-xs text-gray-500 mt-2">
                  Always use C-factors from your design standard (e.g., NFPA,
                  AWWA) or manufacturer data when available.
                </p>
              </div>
            </section>

            <!-- Theory & explanation -->
            <section class="prose">
              <h2>Hazen-Williams equation</h2>
              <p>
                The Hazen-Williams equation is an empirical formula used to
                estimate friction head loss for water flowing in full,
                pressurized pipes. It is widely used in plumbing, municipal
                water distribution, and fire sprinkler design because it is
                simple and does not require explicit fluid properties.
              </p>

              <h3>US customary form</h3>
              <div class="formula-box text-sm">
                For water at ordinary temperatures, with:
                <ul class="list-disc ml-5 mb-2">
                  <li>\( Q \) = flow rate (gpm)</li>
                  <li>\( D \) = internal diameter (in)</li>
                  <li>\( L \) = pipe length (ft)</li>
                  <li>\( C \) = Hazen-Williams roughness coefficient</li>
                </ul>
                <p class="mb-1 font-mono">
                  \( h_f = 4.52 \; \dfrac{L \, Q^{1.85}}{C^{1.85} \, D^{4.87}}
                  \)
                </p>
                <p class="text-xs text-gray-600 mb-0">
                  where \( h_f \) is friction head loss in feet of water.
                </p>
              </div>

              <h3>SI metric form</h3>
              <div class="formula-box text-sm">
                Using:
                <ul class="list-disc ml-5 mb-2">
                  <li>\( Q \) = flow rate (L/s)</li>
                  <li>\( D \) = internal diameter (mm)</li>
                  <li>\( L \) = pipe length (m)</li>
                  <li>\( C \) = Hazen-Williams roughness coefficient</li>
                </ul>
                <p class="mb-1 font-mono">
                  \( h_f = 10.67 \; \dfrac{L \, Q^{1.852}}{C^{1.852} \,
                  D^{4.87}} \)
                </p>
                <p class="text-xs text-gray-600 mb-0">
                  where \( h_f \) is friction head loss in meters of water.
                </p>
              </div>

              <h3>Velocity and pressure drop</h3>
              <p>Once head loss is known, the calculator also computes:</p>
              <ul>
                <li>
                  <strong>Velocity</strong> \( v = \dfrac{Q}{A} \), where \( A =
                  \pi D^2 / 4 \).
                </li>
                <li>
                  <strong>Pressure drop</strong> from head loss using \( \Delta
                  P = \rho g h_f \), converted to psi, kPa, or bar.
                </li>
              </ul>

              <h2>How to use this Hazen-Williams calculator</h2>
              <ol>
                <li>
                  Select <strong>US</strong> or <strong>SI</strong> units.
                </li>
                <li>
                  Choose what you want to solve for:
                  <ul>
                    <li>
                      <strong>Head loss</strong> (most common): enter flow,
                      diameter, length, and C.
                    </li>
                    <li>
                      <strong>Flow rate</strong>: enter diameter, length, C, and
                      a target head loss.
                    </li>
                    <li>
                      <strong>Diameter</strong>: enter flow, length, C, and a
                      target head loss.
                    </li>
                  </ul>
                </li>
                <li>
                  Optionally set a <strong>velocity limit</strong> to flag if
                  the design is too fast.
                </li>
                <li>
                  Click <strong>Calculate</strong> to see head loss, pressure
                  drop, velocity, and quick design checks.
                </li>
              </ol>

              <h2>Typical applications</h2>
              <ul>
                <li>
                  Fire sprinkler and standpipe systems (NFPA 13, NFPA 14).
                </li>
                <li>Domestic water distribution and building services.</li>
                <li>Municipal water mains and distribution networks.</li>
                <li>
                  Preliminary sizing of water pipelines where water properties
                  are near standard conditions.
                </li>
              </ul>

              <h2>Limitations of Hazen-Williams</h2>
              <ul>
                <li>
                  Valid only for <strong>water</strong> (not other liquids or
                  slurries).
                </li>
                <li>
                  Assumes water at normal temperatures (roughly 40–75 °F / 5–25
                  °C).
                </li>
                <li>
                  Applies to <strong>full, pressurized pipes</strong>, not open
                  channels or partially full pipes.
                </li>
                <li>
                  Accuracy decreases for very high velocities, very small pipes,
                  or unusual conditions.
                </li>
                <li>
                  Does not explicitly include Reynolds number or viscosity; for
                  rigorous work use Darcy–Weisbach.
                </li>
              </ul>

              <h2>Worked example</h2>
              <p>
                <strong>Problem.</strong> A 6 in (internal) new ductile iron
                pipe carries 500 gpm of water over 100 ft. Assume \( C = 140 \).
                Estimate head loss and velocity.
              </p>
              <p><strong>Step 1 – Head loss.</strong></p>
              <div class="formula-box text-sm">
                \( h_f = 4.52 \dfrac{L Q^{1.85}}{C^{1.85} D^{4.87}} \) <br />
                \( L = 100 \,\text{ft},\; Q = 500 \,\text{gpm},\; C = 140,\; D =
                6 \,\text{in} \).<br />
                Evaluating gives approximately:
                <p class="mt-1 font-mono">
                  \( h_f \approx 4.3 \,\text{ft of water} \)
                </p>
              </div>
              <p><strong>Step 2 – Velocity.</strong></p>
              <div class="formula-box text-sm">
                Convert 500 gpm to ft³/s: \( Q \approx 1.11
                \,\text{ft}^3/\text{s} \).<br />
                Pipe area: \( A = \pi (D/12)^2 / 4 = \pi (0.5)^2 / 4 \approx
                0.196 \,\text{ft}^2 \).<br />
                Velocity: \( v = Q/A \approx 1.11 / 0.196 \approx 5.7
                \,\text{ft/s} \).
              </div>
              <p>
                The calculator reproduces this example and also reports pressure
                drop and quick checks against your velocity limit.
              </p>
            </section>

            <!-- FAQ -->
            <section class="mt-8">
              <h2 class="text-xl font-semibold mb-3">
                Frequently asked questions
              </h2>
              <div class="space-y-3 text-sm" id="faq-container">
                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="faq-question w-full text-left px-3 py-2 flex justify-between items-center"
                  >
                    <span
                      >What does the Hazen-Williams equation calculate?</span
                    >
                    <span class="text-gray-400 text-xs">&#9662;</span>
                  </button>
                  <div class="faq-answer px-3 pb-3 hidden">
                    It estimates friction head loss for water flowing in full,
                    pressurized pipes. From head loss you can derive pressure
                    drop and check whether pipe size and velocity are acceptable
                    for your design criteria.
                  </div>
                </div>

                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="faq-question w-full text-left px-3 py-2 flex justify-between items-center"
                  >
                    <span
                      >When should I use Hazen-Williams vs.
                      Darcy-Weisbach?</span
                    >
                    <span class="text-gray-400 text-xs">&#9662;</span>
                  </button>
                  <div class="faq-answer px-3 pb-3 hidden">
                    Hazen-Williams is convenient for water at normal
                    temperatures in building services, fire protection, and
                    municipal water systems. Use Darcy-Weisbach when:
                    <ul class="list-disc ml-5 mt-1">
                      <li>Fluids are not water (e.g., oils, chemicals).</li>
                      <li>Temperatures or viscosities vary widely.</li>
                      <li>
                        You need accurate results across laminar, transitional,
                        and turbulent regimes.
                      </li>
                    </ul>
                  </div>
                </div>

                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="faq-question w-full text-left px-3 py-2 flex justify-between items-center"
                  >
                    <span>How do I choose the Hazen-Williams C-factor?</span>
                    <span class="text-gray-400 text-xs">&#9662;</span>
                  </button>
                  <div class="faq-answer px-3 pb-3 hidden">
                    C depends on pipe material and condition. New, smooth pipes
                    (PVC, HDPE) often use C ≈ 150. New steel or ductile iron may
                    use C ≈ 130–145. Older or tuberculated pipes can be as low
                    as 60–100. Always follow the values specified in your design
                    standard (e.g., NFPA, AWWA) or manufacturer data.
                  </div>
                </div>

                <div class="border border-gray-200 rounded-md">
                  <button
                    type="button"
                    class="faq-question w-full text-left px-3 py-2 flex justify-between items-center"
                  >
                    <span
                      >Can Hazen-Williams be used for partially full pipes or
                      open channels?</span
                    >
                    <span class="text-gray-400 text-xs">&#9662;</span>
                  </button>
                  <div class="faq-answer px-3 pb-3 hidden">
                    No. Hazen-Williams assumes a full, pressurized circular
                    pipe. For partially full pipes or open channels, use
                    open-channel flow equations such as Manning’s equation.
                  </div>
                </div>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Hazen, Williams.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">Related calculators</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/darcy-weisbach"
                  class="text-blue-600 hover:underline"
                  >Darcy-Weisbach Pipe Flow (if available)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pipe-sizing"
                  class="text-blue-600 hover:underline"
                  >Pipe Sizing Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/volume"
                  class="text-blue-600 hover:underline"
                  >Volume Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pressure-unit-converter"
                  class="text-blue-600 hover:underline"
                  >Pressure Unit Converter</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/flow-rate"
                  class="text-blue-600 hover:underline"
                  >Flow Rate Converter (if available)</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">
              More in Core Math &amp; Engineering
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/darcy-weisbach"
                  class="text-blue-600 hover:underline"
                  >Darcy-Weisbach (head loss)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bernoulli-equation"
                  class="text-blue-600 hover:underline"
                  >Bernoulli’s Equation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/reynolds-number"
                  class="text-blue-600 hover:underline"
                  >Reynolds Number</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pressure"
                  class="text-blue-600 hover:underline"
                  >Pressure Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/volume-converter"
                  class="text-blue-600 hover:underline"
                  >Volume Unit Converter</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Hazen-Williams calculator logic
      (function () {
        const g = 9.80665; // m/s²
        const rho = 998; // kg/m³ approx water

        const form = document.getElementById("hazenForm");
        const systemTabs = document.querySelectorAll(".unit-tab");
        const solveButtons = document.querySelectorAll(".solve-mode-btn");
        const errorEl = document.getElementById("calcError");
        const btnCalc = document.getElementById("btnCalculate");
        const btnReset = document.getElementById("btnReset");

        const flowInput = document.getElementById("flow");
        const diameterInput = document.getElementById("diameter");
        const lengthInput = document.getElementById("length");
        const cInput = document.getElementById("cFactor");
        const headLossInput = document.getElementById("headLossInput");
        const vLimitInput = document.getElementById("vLimit");
        const pressureUnitSel = document.getElementById("pressureUnit");

        const flowUnit = document.getElementById("flowUnit");
        const diameterUnit = document.getElementById("diameterUnit");
        const lengthUnit = document.getElementById("lengthUnit");
        const headLossInputUnit = document.getElementById("headLossInputUnit");
        const vLimitUnit = document.getElementById("vLimitUnit");

        const groupHeadLoss = document.getElementById("group-headloss");
        const groupFlow = document.getElementById("group-flow");
        const groupDiameter = document.getElementById("group-diameter");

        const resultsCard = document.getElementById("resultsCard");
        const resultsContent = document.getElementById("resultsContent");
        const resHeadLoss = document.getElementById("resHeadLoss");
        const resHeadLossPerLen = document.getElementById("resHeadLossPerLen");
        const resPressureDrop = document.getElementById("resPressureDrop");
        const resVelocity = document.getElementById("resVelocity");
        const resFlow = document.getElementById("resFlow");
        const resVelocityNote = document.getElementById("resVelocityNote");
        const resPipeSize = document.getElementById("resPipeSize");
        const resCfactor = document.getElementById("resCfactor");
        const resSystem = document.getElementById("resSystem");
        const resChecks = document.getElementById("resChecks");

        let unitSystem = "us"; // 'us' or 'si'
        let solveMode = "head"; // 'head', 'flow', 'diameter'

        function setUnitSystem(system) {
          unitSystem = system;
          if (system === "us") {
            flowUnit.textContent = "gpm";
            diameterUnit.textContent = "in";
            lengthUnit.textContent = "ft";
            headLossInputUnit.textContent = "ft";
            vLimitUnit.textContent = "ft/s";
          } else {
            flowUnit.textContent = "L/s";
            diameterUnit.textContent = "mm";
            lengthUnit.textContent = "m";
            headLossInputUnit.textContent = "m";
            vLimitUnit.textContent = "m/s";
          }
          // Clear results on unit change
          resultsContent.classList.add("hidden");
          errorEl.textContent = "";
        }

        function setSolveMode(mode) {
          solveMode = mode;
          solveButtons.forEach((btn) => {
            if (btn.dataset.mode === mode) {
              btn.classList.remove(
                "border-gray-300",
                "text-gray-700",
                "bg-white"
              );
              btn.classList.add(
                "border-blue-500",
                "text-blue-600",
                "bg-blue-50"
              );
            } else {
              btn.classList.add("border-gray-300", "text-gray-700", "bg-white");
              btn.classList.remove(
                "border-blue-500",
                "text-blue-600",
                "bg-blue-50"
              );
            }
          });

          if (mode === "head") {
            groupFlow.classList.remove("opacity-50");
            groupDiameter.classList.remove("opacity-50");
            flowInput.disabled = false;
            diameterInput.disabled = false;
            groupHeadLoss.classList.add("hidden");
            headLossInput.disabled = true;
          } else if (mode === "flow") {
            groupFlow.classList.add("opacity-50");
            flowInput.disabled = true;
            groupDiameter.classList.remove("opacity-50");
            diameterInput.disabled = false;
            groupHeadLoss.classList.remove("hidden");
            headLossInput.disabled = false;
          } else if (mode === "diameter") {
            groupDiameter.classList.add("opacity-50");
            diameterInput.disabled = true;
            groupFlow.classList.remove("opacity-50");
            flowInput.disabled = false;
            groupHeadLoss.classList.remove("hidden");
            headLossInput.disabled = false;
          }
          resultsContent.classList.add("hidden");
          errorEl.textContent = "";
        }

        systemTabs.forEach((tab) => {
          tab.addEventListener("click", () => {
            systemTabs.forEach((t) => {
              t.classList.remove(
                "bg-white",
                "shadow",
                "text-blue-600",
                "font-medium"
              );
              t.classList.add("text-gray-600");
              t.setAttribute("aria-selected", "false");
            });
            tab.classList.add(
              "bg-white",
              "shadow",
              "text-blue-600",
              "font-medium"
            );
            tab.setAttribute("aria-selected", "true");
            setUnitSystem(tab.dataset.system);
          });
        });

        solveButtons.forEach((btn) => {
          btn.addEventListener("click", () => setSolveMode(btn.dataset.mode));
        });

        function toNumber(value) {
          const v = parseFloat(value);
          return isFinite(v) ? v : NaN;
        }

        function calcHeadLossUS(Qgpm, Din, Lft, C) {
          // h_f in ft
          return (
            (4.52 * Lft * Math.pow(Qgpm, 1.85)) /
            (Math.pow(C, 1.85) * Math.pow(Din, 4.87))
          );
        }

        function calcHeadLossSI(QLps, Dmm, Lm, C) {
          // h_f in m
          return (
            (10.67 * Lm * Math.pow(QLps, 1.852)) /
            (Math.pow(C, 1.852) * Math.pow(Dmm, 4.87))
          );
        }

        function solveFlowFromHeadUS(hf, Din, Lft, C) {
          // invert Hazen-Williams for Q
          const num = hf * Math.pow(C, 1.85) * Math.pow(Din, 4.87);
          const den = 4.52 * Lft;
          return Math.pow(num / den, 1 / 1.85);
        }

        function solveFlowFromHeadSI(hf, Dmm, Lm, C) {
          const num = hf * Math.pow(C, 1.852) * Math.pow(Dmm, 4.87);
          const den = 10.67 * Lm;
          return Math.pow(num / den, 1 / 1.852);
        }

        function solveDiameterFromHeadUS(hf, Qgpm, Lft, C) {
          const num = 4.52 * Lft * Math.pow(Qgpm, 1.85);
          const den = hf * Math.pow(C, 1.85);
          return Math.pow(num / den, 1 / 4.87);
        }

        function solveDiameterFromHeadSI(hf, QLps, Lm, C) {
          const num = 10.67 * Lm * Math.pow(QLps, 1.852);
          const den = hf * Math.pow(C, 1.852);
          return Math.pow(num / den, 1 / 4.87);
        }

        function calcVelocityUS(Qgpm, Din) {
          // Q gpm -> ft³/s
          const Qcfs = Qgpm / 448.831; // 1 cfs = 448.831 gpm
          const Dft = Din / 12;
          const area = (Math.PI * Math.pow(Dft, 2)) / 4;
          return Qcfs / area; // ft/s
        }

        function calcVelocitySI(QLps, Dmm) {
          const Qm3s = QLps / 1000; // 1 L/s = 0.001 m³/s
          const Dm = Dmm / 1000;
          const area = (Math.PI * Math.pow(Dm, 2)) / 4;
          return Qm3s / area; // m/s
        }

        function headToPressure(h, system, unit) {
          // h in ft (US) or m (SI)
          let Pa;
          if (system === "us") {
            const hm = h * 0.3048;
            Pa = rho * g * hm;
          } else {
            Pa = rho * g * h;
          }
          if (unit === "psi") return Pa / 6894.757;
          if (unit === "kpa") return Pa / 1000;
          if (unit === "bar") return Pa / 100000;
          return Pa;
        }

        function format(num, digits) {
          if (!isFinite(num)) return "—";
          if (Math.abs(num) >= 1000 || Math.abs(num) < 0.01) {
            return num.toExponential(digits);
          }
          return num.toFixed(digits);
        }

        btnCalc.addEventListener("click", () => {
          errorEl.textContent = "";
          resultsContent.classList.add("hidden");

          let C = toNumber(cInput.value);
          if (!(C > 0)) {
            errorEl.textContent = "Enter a valid C-factor.";
            return;
          }

          let L = toNumber(lengthInput.value);
          if (!(L > 0)) {
            errorEl.textContent = "Enter a valid pipe length.";
            return;
          }

          let Q, D, hf;
          if (solveMode === "head") {
            Q = toNumber(flowInput.value);
            D = toNumber(diameterInput.value);
            if (!(Q > 0) || !(D > 0)) {
              errorEl.textContent = "Enter positive flow and diameter.";
              return;
            }
            if (unitSystem === "us") {
              hf = calcHeadLossUS(Q, D, L, C);
            } else {
              hf = calcHeadLossSI(Q, D, L, C);
            }
          } else if (solveMode === "flow") {
            D = toNumber(diameterInput.value);
            hf = toNumber(headLossInput.value);
            if (!(D > 0) || !(hf > 0)) {
              errorEl.textContent = "Enter positive diameter and head loss.";
              return;
            }
            if (unitSystem === "us") {
              Q = solveFlowFromHeadUS(hf, D, L, C);
            } else {
              Q = solveFlowFromHeadSI(hf, D, L, C);
            }
          } else if (solveMode === "diameter") {
            Q = toNumber(flowInput.value);
            hf = toNumber(headLossInput.value);
            if (!(Q > 0) || !(hf > 0)) {
              errorEl.textContent = "Enter positive flow and head loss.";
              return;
            }
            if (unitSystem === "us") {
              D = solveDiameterFromHeadUS(hf, Q, L, C);
            } else {
              D = solveDiameterFromHeadSI(hf, Q, L, C);
            }
          }

          if (!(hf > 0)) {
            errorEl.textContent =
              "Computed head loss is not positive. Check inputs.";
            return;
          }

          // Velocity
          let v;
          if (unitSystem === "us") {
            v = calcVelocityUS(Q, D);
          } else {
            v = calcVelocitySI(Q, D);
          }

          // Pressure drop
          const pDrop = headToPressure(hf, unitSystem, pressureUnitSel.value);

          // Populate results
          const lenUnit = unitSystem === "us" ? "ft" : "m";
          const headUnit = lenUnit;
          const vUnit = unitSystem === "us" ? "ft/s" : "m/s";
          const flowUnitStr = unitSystem === "us" ? "gpm" : "L/s";
          const diamUnitStr = unitSystem === "us" ? "in" : "mm";

          resHeadLoss.textContent = `${format(hf, 3)} ${headUnit} total`;
          const hfPerLen = hf / L;
          resHeadLossPerLen.textContent = `${format(
            hfPerLen,
            3
          )} ${headUnit}/${lenUnit}`;
          resPressureDrop.textContent = `Pressure drop ≈ ${format(pDrop, 3)} ${
            pressureUnitSel.value
          }`;

          resVelocity.textContent = `${format(v, 3)} ${vUnit}`;
          resFlow.textContent = `Flow ≈ ${format(Q, 3)} ${flowUnitStr}`;

          // Velocity limit check
          resVelocityNote.textContent = "";
          resVelocityNote.className = "text-xs mt-1";
          const vLimit = toNumber(vLimitInput.value);
          if (vLimit > 0) {
            if (v > vLimit * 1.1) {
              resVelocityNote.textContent = `Above velocity limit (${vLimit} ${vUnit}). Consider a larger pipe or lower flow.`;
              resVelocityNote.classList.add("text-red-600");
            } else if (v > vLimit * 0.9) {
              resVelocityNote.textContent = `Close to velocity limit (${vLimit} ${vUnit}). Check design criteria.`;
              resVelocityNote.classList.add("text-amber-600");
            } else {
              resVelocityNote.textContent = `Below velocity limit (${vLimit} ${vUnit}).`;
              resVelocityNote.classList.add("text-green-600");
            }
          }

          resPipeSize.textContent = `Diameter ≈ ${format(D, 3)} ${diamUnitStr}`;
          resCfactor.textContent = `Hazen-Williams C-factor = ${format(C, 2)}`;
          resSystem.textContent = `Unit system: ${
            unitSystem === "us" ? "US / Imperial" : "SI / Metric"
          }`;

          // Design checks list
          resChecks.innerHTML = "";
          const li1 = document.createElement("li");
          li1.textContent = `Head loss per ${lenUnit}: ${format(
            hfPerLen,
            3
          )} ${headUnit}/${lenUnit}`;
          resChecks.appendChild(li1);

          const li2 = document.createElement("li");
          li2.textContent = `Pressure drop: ${format(pDrop, 3)} ${
            pressureUnitSel.value
          }`;
          resChecks.appendChild(li2);

          const li3 = document.createElement("li");
          li3.textContent =
            "Remember to include minor losses (fittings, valves) via equivalent length if required by your standard.";
          resChecks.appendChild(li3);

          resultsContent.classList.remove("hidden");
        });

        btnReset.addEventListener("click", () => {
          setTimeout(() => {
            setUnitSystem("us");
            setSolveMode("head");
            cInput.value = 140;
            flowInput.value = 500;
            diameterInput.value = 6;
            lengthInput.value = 100;
            headLossInput.value = 10;
            vLimitInput.value = "";
            pressureUnitSel.value = "psi";
            resultsContent.classList.add("hidden");
            errorEl.textContent = "";
          }, 0);
        });

        // C-factor inline table toggle
        const toggleCTableInline =
          document.getElementById("toggleCTableInline");
        const cTableInline = document.getElementById("cTableInline");
        toggleCTableInline.addEventListener("click", () => {
          const isHidden = cTableInline.classList.contains("hidden");
          cTableInline.classList.toggle("hidden");
          toggleCTableInline.textContent = isHidden
            ? "Hide typical Hazen-Williams C-factors"
            : "Show typical Hazen-Williams C-factors";
        });

        // Initialize defaults
        setUnitSystem("us");
        setSolveMode("head");
      })();
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/cement-calculator">





<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="manifest" href="/site.webmanifest">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cement Calculator - Calculate Cement, Sand, Stone &amp; Bags</title>
<meta name="description" content="Calculate the exact amount of cement, sand, stone, and pre-mix concrete bags needed for your slab, footer, or column. Includes mix ratios and volume calculation.">


<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-sN1BU2UFsAaM40FILflatMapAUiGkU6zVlCg/sJYHzsCELRz8V6xMYh/B2LpUelYlH" crossorigin="anonymous">
<script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoIeYJ1B2o8nU1Z5iQv28V2L8LwH2t/bV_h4FWdEQ8BTj9BI/B6I8s3T7M2/K8" crossorigin="anonymous"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-LUpDHYQo8+e/d/b8sA/vNgJbrTgqgDuLfV3H/v0B6Zf/C2M+FYeP/f3vE1/N+pqe" crossorigin="anonymous"></script>

<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.prose table { width: 100%; border-collapse: collapse; margin-bottom: 1rem; }
.prose th, .prose td { border: 1px solid #d1d5db; padding: 0.5rem 0.75rem; text-align: left; }
.prose th { background-color: #f3f4f6; }

/* LaTeX Formula Box */
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.5rem;
margin-bottom: 1rem; overflow-x:auto; font-size: 1.1rem;
}

/* Accessible Details/Summary */
details > summary {
cursor: pointer; font-weight: 600; padding: 0.5rem 0;
list-style: none; /* Remove default marker */
position: relative;
padding-left: 1.75rem;
}
details > summary::-webkit-details-marker { display: none; }
details > summary::before {
content: '+';
position: absolute;
left: 0.5rem;
top: 50%;
transform: translateY(-50%);
font-size: 1.25rem;
font-weight: 700;
color: #2563eb;
}
details[open] > summary::before {
content: '−';
}
details[open] > summary { margin-bottom: 0.5rem; }

/* Results Card Styling */
.result-card {
background: #f9fafb; /* gray-50 */
border: 1px solid #d1d5db; /* gray-300 */
border-radius: 10px;
padding: 1.25rem;
text-align: center;
}
.result-card h4 {
font-size: 0.95rem;
color: #6b7280; /* gray-500 */
margin-bottom: 0.25rem;
font-weight: 500;
text-transform: uppercase;
letter-spacing: 0.05em;
}
.result-card p {
font-size: 1.75rem;
font-weight: 700;
color: #2563eb; /* blue-600 */
line-height: 1.2;
}
.result-card .sub-value {
font-size: 0.9rem;
color: #4b5563; /* gray-600 */
margin-top: 0.25rem;
}

/* Accessibility: Custom Focus State */
.focusable:focus-visible {
outline: 3px solid #2563eb; /* blue-600 */
outline-offset: 2px;
border-radius: 4px;
}
.focusable:focus {
outline: none; /* Hide default, show custom */
}
input.focusable:focus-visible,
select.focusable:focus-visible {
border-color: #2563eb;
box-shadow: 0 0 0 1px #2563eb;
}

/* Form Styling */
.form-label {
display: block;
text-sm;
font-medium;
color: #374151; /* gray-700 */
margin-bottom: 0.25rem; /* mb-1 */
}
.form-input {
display: block;
width: 100%;
padding: 0.5rem 0.75rem; /* py-2 px-3 */
border: 1px solid #d1d5db; /* gray-300 */
border-radius: 0.375rem; /* rounded-md */
box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); /* shadow-sm */
}
.form-input:focus {
outline: none;
border-color: #2563eb; /* focus:border-blue-500 */
box-shadow: 0 0 0 1px #2563eb; /* focus:ring-blue-500 */
}
.form-input[aria-invalid="true"] {
border-color: #dc2626; /* red-600 */
}
.error-message {
color: #dc2626; /* red-600 */
font-size: 0.875rem; /* text-sm */
margin-top: 0.25rem; /* mt-1 */
display: none; /* Hidden by default */
}
.form-input[aria-invalid="true"] + .error-message {
display: block; /* Show on invalid */
}

/* Accessible Tooltip */
.tooltip-container {
position: relative;
display: inline-flex;
align-items: center;
}
.tooltip-button {
background: none;
border: none;
padding: 0.25rem;
margin-left: 0.25rem;
cursor: pointer;
border-radius: 9999px;
color: #6b7280; /* gray-500 */
}
.tooltip-button:hover {
color: #111827; /* gray-900 */
}
.tooltip-text {
display: none;
position: absolute;
bottom: 100%;
left: 50%;
transform: translateX(-50%);
margin-bottom: 8px;
background-color: #1f2937; /* gray-800 */
color: white;
padding: 0.5rem 0.75rem;
border-radius: 6px;
font-size: 0.875rem;
font-weight: 400;
width: 250px;
z-index: 10;
}
.tooltip-button[aria-expanded="true"] + .tooltip-text {
display: block;
}

/* Radio Button Group */
.radio-group-container {
display: flex;
gap: 0.5rem; /* space-x-2 */
border-radius: 0.375rem; /* rounded-md */
background-color: #f3f4f6; /* gray-100 */
padding: 0.25rem; /* p-1 */
}
.radio-group-container label {
position: relative;
flex: 1 1 0%;
cursor: pointer;
text-align: center;
padding: 0.5rem 0.75rem; /* py-2 px-3 */
font-size: 0.875rem; /* text-sm */
font-weight: 500;
color: #374151; /* gray-700 */
border-radius: 0.25rem; /* rounded */
transition: all 0.2s ease-in-out;
}
.radio-group-container input[type="radio"] {
/* Visually hide the radio but keep it accessible */
position: absolute;
opacity: 0;
width: 0;
height: 0;
}
.radio-group-container input[type="radio"]:checked + span {
background-color: #ffffff; /* white */
color: #1d4ed8; /* blue-700 */
box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1); /* shadow-md */
}
.radio-group-container input[type="radio"]:focus-visible + span {
outline: 3px solid #2563eb;
outline-offset: 2px;
}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Cement Calculator",
  "description": "Calculate the exact amount of cement, sand, stone, and pre-mix concrete bags needed for your slab, footer, or column.",
  "url": "https://calcdomain.com/cement-calculator",
  "inLanguage": "en",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Construction & DIY",
      "item": "https://calcdomain.com/categories/construction-diy"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Construction Diy Materials Estimation",
      "item": "https://calcdomain.com/subcategories/construction-diy-materials-estimation"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Calculator",
  "name": "Cement Calculator",
  "description": "Estimates cement, sand, and aggregate required for concrete projects based on volume and mix ratio.",
  "mainEntity": {
    "@type": "HowTo",
    "name": "How to Use the Cement Calculator",
    "step": [
      {
        "@type": "HowToStep",
        "name": "1. Select Project Shape",
        "text": "Choose whether you are calculating for a rectangular slab/footing or a round column/post."
      },
      {
        "@type": "HowToStep",
        "name": "2. Enter Dimensions",
        "text": "Input the length, width, and depth (for slabs) or diameter and height (for columns) in your preferred units (feet, inches, meters, or centimeters)."
      },
      {
        "@type": "HowToStep",
        "name": "3. Choose Calculation Type",
        "text": "Select 'Components' to find the specific amounts of cement, sand, and stone needed. Select 'Pre-Mix Bags' to find how many bags of concrete mix to buy."
      },
      {
        "@type": "HowToStep",
        "name": "4. Select Mix/Bag Options",
        "text": "If calculating components, choose a standard mix ratio (e.g., 1:2:4) based on your project's strength requirement. If calculating bags, choose the weight of the pre-mix bag you intend to buy."
      },
      {
        "@type": "HowToStep",
        "name": "5. Calculate",
        "text": "Click 'Calculate' to see the total volume required and a detailed breakdown of the materials you need."
      }
    ]
  }
}
</script>
<script src="search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="https://calcdomain.com" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focusable" autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="https://calcdomain.com/search" class="text-gray-700 hover:text-blue-600 focusable">Advanced Search</a>
Categories
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2 focusable" aria-label="Open menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600 focusable">Advanced Search</a>
Categories
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm mb-4 text-gray-600" aria-label="Breadcrumbs"><a href="https://calcdomain.com" class="hover:text-blue-600">Home</a> &raquo; <a href="https://calcdomain.com/categories/construction-diy" class="hover:text-blue-600">Construction & DIY</a> &raquo; <a href="https://calcdomain.com/subcategories/construction-diy-materials-estimation" class="hover:text-blue-600">Construction Diy Materials Estimation</a></nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Cement Calculator</h1>
<p class="text-gray-600 mb-6">
This calculator helps you estimate the exact amount of cement, sand, stone (aggregate), and pre-mixed bags required for your concrete project. It's designed for homeowners, DIYers, and contractors to reduce waste and accurately budget for slabs, footings, and columns.
</p>

<form id="cement-form" class="space-y-6">
<fieldset>
<legend class="form-label font-semibold">1. Project Shape</legend>
<div class="radio-group-container" role="radiogroup" aria-labelledby="shape-label">
<label>
<input type="radio" name="projectShape" value="slab" class="focusable" checked="">
<span class="block">Slab / Footing</span>
</label>
<label>
<input type="radio" name="projectShape" value="column" class="focusable">
<span class="block">Column / Post</span>
</label>
</div>
</fieldset>

<fieldset>
<legend class="form-label font-semibold">2. Dimensions</legend>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<div id="slab-inputs" class="space-y-4 md:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-4">
<div>
<label for="length" class="form-label">Length<span class="text-red-600">*</span></label>
<input type="number" id="length" step="0.01" min="0" class="form-input focusable" aria-required="true">
<div id="lengthError" class="error-message" role="alert"></div>
</div>
<div>
<label for="width" class="form-label">Width<span class="text-red-600">*</span></label>
<input type="number" id="width" step="0.01" min="0" class="form-input focusable" aria-required="true">
<div id="widthError" class="error-message" role="alert"></div>
</div>
<div>
<label for="depth" class="form-label">Depth/Thickness<span class="text-red-600">*</span></label>
<input type="number" id="depth" step="0.01" min="0" class="form-input focusable" aria-required="true">
<div id="depthError" class="error-message" role="alert"></div>
</div>
</div>
<div id="column-inputs" class="hidden space-y-4 md:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-4">
<div>
<label for="diameter" class="form-label">Diameter<span class="text-red-600">*</span></label>
<input type="number" id="diameter" step="0.01" min="0" class="form-input focusable" aria-required="false">
<div id="diameterError" class="error-message" role="alert"></div>
</div>
<div>
<label for="height" class="form-label">Height<span class="text-red-600">*</span></label>
<input type="number" id="height" step="0.01" min="0" class="form-input focusable" aria-required="false">
<div id="heightError" class="error-message" role="alert"></div>
</div>
</div>
<div class="md:col-span-3">
<label for="units" class="form-label">Units</label>
<select id="units" class="form-input focusable">
<option value="feet">Feet (ft)</option>
<option value="inches">Inches (in)</option>
<option value="meters">Meters (m)</option>
<option value="centimeters">Centimeters (cm)</option>
</select>
</div>
</div>
</fieldset>

<fieldset>
<legend class="form-label font-semibold">3. Calculation Type</legend>
<div class="radio-group-container" role="radiogroup" aria-labelledby="calc-type-label">
<label>
<input type="radio" name="calcType" value="components" class="focusable" checked="">
<span class="block">Components (Cement, Sand, Stone)</span>
</label>
<label>
<input type="radio" name="calcType" value="bags" class="focusable">
<span class="block">Pre-Mix Bags</span>
</label>
</div>
</fieldset>

<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<div id="component-options">
<div class="tooltip-container">
<label for="mixRatio" class="form-label">Mix Ratio (Cement:Sand:Stone)</label>
<button type="button" class="tooltip-button focusable" aria-expanded="false" aria-label="More info about Mix Ratio">
<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>
</button>
<div id="mixRatioTooltip" class="tooltip-text" role="tooltip">
Mix ratios determine concrete strength. 1:2:4 (M20) is standard for residential slabs. 1:1.5:3 (M25) is stronger. 1:3:6 (M15) is for non-structural work.
</div>
</div>
<select id="mixRatio" class="form-input focusable" aria-describedby="mixRatioTooltip">
<option value="1:2:4">1:2:4 (M20 - Standard Slabs)</option>
<option value="1:1.5:3">1:1.5:3 (M25 - High Strength)</option>
<option value="1:3:6">1:3:6 (M15 - Non-Structural)</option>
</select>
</div>
<div id="bag-options" class="hidden">
<label for="bagWeight" class="form-label">Pre-Mix Bag Weight</label>
<select id="bagWeight" class="form-input focusable">
<option value="80">80 lb (yields ~0.60 ft³)</option>
<option value="60">60 lb (yields ~0.45 ft³)</option>
<option value="40">40 lb (yields ~0.30 ft³)</option>
</select>
</div>
</div>

<div class="flex flex-col sm:flex-row gap-4">
<button type="button" id="calculateBtn" class="w-full sm:w-auto px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focusable">
Calculate
</button>
<button type="button" id="resetBtn" class="w-full sm:w-auto px-6 py-3 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300 focusable">
Reset
</button>
</div>
</form>
</div>

<section id="results-container" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6 hidden" style="min-height: 200px;" aria-live="polite">
<h2 class="text-2xl font-bold text-gray-900 mb-4">Calculation Results</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<div class="result-card">
<h4>Total Volume</h4>
<p id="results-volume">0 m³</p>
<div id="results-volume-imp" class="sub-value">0 ft³</div>
</div>
<div class="result-card">
<h4>Est. Total Weight</h4>
<p id="results-weight">0 kg</p>
<div id="results-weight-imp" class="sub-value">0 lbs</div>
</div>
</div>

<div id="results-components">
<h3 class="text-xl font-semibold text-gray-800 mb-3">Required Components</h3>
<div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
<div class="result-card">
<h4>Cement</h4>
<p id="results-cement">0 kg</p>
<div id="results-cement-imp" class="sub-value">0 lbs</div>
</div>
<div class="result-card">
<h4>Sand (Fine Aggregate)</h4>
<p id="results-sand">0 kg</p>
<div id="results-sand-imp" class="sub-value">0 lbs</div>
</div>
<div class="result-card">
<h4>Stone (Coarse Aggregate)</h4>
<p id="results-stone">0 kg</p>
<div id="results-stone-imp" class="sub-value">0 lbs</div>
</div>
</div>
<p class="text-sm text-gray-600 mt-4"><strong>Note:</strong> Cement is typically sold in 50 kg (110 lb) or 42.5 kg (94 lb) bags. Sand and stone are often sold by the tonne or cubic yard/meter.</p>
</div>

<div id="results-bags" class="hidden">
<h3 class="text-xl font-semibold text-gray-800 mb-3">Required Pre-Mix Bags</h3>
<div class="result-card max-w-sm mx-auto">
<h4>Total Bags (<span id="bag-weight-display">80</span> lb)</h4>
<p id="results-total-bags">0</p>
</div>
</div>

<p class="text-sm text-gray-600 mt-6">
<strong>Disclaimer:</strong> All calculations are estimates. We strongly recommend adding a **5-10% contingency** for waste, spillage, and uneven ground.
</p>
</section>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
<h2>Authoritative Source &amp; Methodology</h2>
<p>
The calculations for concrete components are based on standard nominal mix ratios and material densities used in civil engineering, derived from principles outlined by bodies like the **American Concrete Institute (ACI)** and industry standards (e.g., ACI 211.1-91, Standard Practice for Selecting Proportions for Normal, Heavyweight, and Mass Concrete).
</p>
<p>
All calculations are based on the following standard average densities:
</p>
<ul>
<li><strong>Cement:</strong> 1440 kg/m³ (90 lb/ft³)</li>
<li><strong>Sand (Fine Aggregate):</strong> 1600 kg/m³ (100 lb/ft³)</li>
<li><strong>Stone (Coarse Aggregate):</strong> 1600 kg/m³ (100 lb/ft³)</li>
<li><strong>Wet Concrete (for total weight):</strong> 2400 kg/m³ (150 lb/ft³)</li>
</ul>
<p>
The core of the calculation involves converting the desired "wet volume" (the space you need to fill) into the "dry volume" of components required. Due to voids between particles, the total dry volume of ingredients is greater than the final wet volume. This calculator uses a standard conversion factor of **1.54** (i.e., 1.54 m³ of dry materials are needed to produce 1 m³ of wet concrete).
</p>

<h2>The Formulas Explained</h2>
<p>The calculator follows a three-step process to determine component mass.</p>

<h3>1. Calculate Wet Volume ($V_{wet}$)</h3>
<p>First, we find the total volume of the space you need to fill.</p>
<div class="formula-box" aria-label="Wet Volume Formulas">
<p><strong>For a Slab / Footing:</strong></p>
$$V_{wet} = Length \times Width \times Depth$$
<p class="mt-4"><strong>For a Column / Post:</strong></p>
$$V_{wet} = \pi \times (\frac{Diameter}{2})^2 \times Height$$
</div>

<h3>2. Calculate Total Dry Volume ($V_{dry}$)</h3>
<p>Next, we account for the air voids and water that will be part of the mix by converting wet volume to the required dry material volume.</p>
<div class="formula-box" aria-label="Dry Volume Formula">
$$V_{dry} = V_{wet} \times 1.54$$
</div>

<h3>3. Calculate Component Mass</h3>
<p>Using the selected nominal mix ratio (e.g., <strong>1:S:A</strong> for 1 part Cement, S parts Sand, A parts Aggregate), we find the mass of each component.</p>
<div class="formula-box" aria-label="Component Mass Formulas">
<p><strong>Sum of Ratios (R):</strong></p>
$$R = 1 + S + A$$
<p class="mt-4"><strong>Mass of Cement:</strong></p>
$$Mass_{cement} = (\frac{1}{R} \times V_{dry}) \times Density_{cement}$$
<p class="mt-4"><strong>Mass of Sand:</strong></p>
$$Mass_{sand} = (\frac{S}{R} \times V_{dry}) \times Density_{sand}$$
<p class="mt-4"><strong>Mass of Stone:</strong></p>
$$Mass_{stone} = (\frac{A}{R} \times V_{dry}) \times Density_{stone}$$
</div>

<h3>For Pre-Mix Bags</h3>
<p>This is a simpler volume calculation. We use the manufacturer-provided yield for a bag of a specific weight.</p>
<div class="formula-box" aria-label="Pre-Mix Bag Formula">
$$Total\ Bags = \frac{Total\ V_{wet}\ (in\ ft^3)}{Yield\ per\ Bag\ (in\ ft^3)}$$
<p class="mt-4"><em>(e.g., An 80 lb bag yields approximately 0.60 ft³ of concrete)</em></p>
</div>

<h2>Glossary of Variables</h2>
<table>
<thead>
<tr>
<th>Term</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Wet Volume</strong></td>
<td>The final volume of mixed, pourable concrete required to fill your form (e.g., your slab or column).</td>
</tr>
<tr>
<td><strong>Dry Volume</strong></td>
<td>The total volume of the dry ingredients (cement, sand, stone) *before* they are mixed with water. This is always greater than the wet volume.</td>
</tr>
<tr>
<td><strong>Mix Ratio (e.g., 1:2:4)</strong></td>
<td>The ratio of Cement : Fine Aggregate (Sand) : Coarse Aggregate (Stone) by volume. This ratio determines the concrete's strength and workability.</td>
</tr>
<tr>
<td><strong>Concrete Grade (e.g., M20)</strong></td>
<td>A designation for the compressive strength of the concrete after 28 days. M20 means the concrete can withstand 20 Newtons/mm² of pressure. A 1:2:4 ratio typically produces M20 grade concrete.</td>
</tr>
<tr>
<td><strong>Yield</strong></td>
<td>The amount of wet concrete produced by one pre-mix bag.</td>
</tr>
</tbody>
</table>

<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's calculate the components for a small patio slab.</p>
<ul>
<li><strong>Shape:</strong> Slab</li>
<li><strong>Length:</strong> 10 ft</li>
<li><strong>Width:</strong> 8 ft</li>
<li><strong>Depth:</strong> 4 in (which is $10 \div 12 = 0.333$ ft)</li>
<li><strong>Mix Ratio:</strong> 1:2:4 (Standard M20)</li>
</ul>

<h3>Step 1: Calculate Wet Volume ($V_{wet}$)</h3>
<p>First, we find the volume in cubic feet, then convert to cubic meters (since our densities are in kg/m³).</p>
<ul>
<li>$V_{wet}\ (ft^3) = 10\ ft \times 8\ ft \times 0.333\ ft = 26.64\ ft^3$</li>
<li>$V_{wet}\ (m^3) = 26.64\ ft^3 \times 0.0283168 = 0.754\ m^3$</li>
</ul>

<h3>Step 2: Calculate Dry Volume ($V_{dry}$)</h3>
<p>We apply the 1.54 factor to find the total dry material needed.</p>
<ul>
<li>$V_{dry} = 0.754\ m^3 \times 1.54 = 1.161\ m^3$</li>
</ul>

<h3>Step 3: Calculate Component Mass</h3>
<p>For a 1:2:4 ratio, the sum of ratios is $1 + 2 + 4 = 7$.</p>
<ul>
<li><strong>Cement:</strong> $(\frac{1}{7} \times 1.161\ m^3) \times 1440\ kg/m^3 = \mathbf{239\ kg}$ (approx. 5 x 50kg bags)</li>
<li><strong>Sand:</strong> $(\frac{2}{7} \times 1.161\ m^3) \times 1600\ kg/m^3 = \mathbf{531\ kg}$</li>
<li><strong>Stone:</strong> $(\frac{4}{7} \times 1.161\ m^3) \times 1600\ kg/m^3 = \mathbf{1061\ kg}$</li>
</ul>

<h2>Frequently Asked Questions (FAQ)</h2>
<details>
<summary>What's the difference between cement and concrete?</summary>
<p><strong>Cement</strong> is a binding powder (like flour in a cake) that, when mixed with water, creates a paste. <strong>Concrete</strong> is the final composite material (the whole cake) made of cement, water, sand (fine aggregate), and stone (coarse aggregate).</p>
</details>
<details>
<summary>How much water should I add?</summary>
<p>This calculator does not specify water because the amount is critical and depends on the moisture content of your sand, humidity, and temperature. This is known as the "water-cement ratio." A common ratio is 0.45 to 0.55 (e.g., 0.5 liters of water for every 1 kg of cement). Always add water slowly until you reach a workable, "plastic" consistency—not too wet and not too dry.</p>
</details>
<details>
<summary>What do the concrete grades (M15, M20, M25) mean?</summary>
<p>The "M" stands for "Mix" and the number represents the characteristic compressive strength of the concrete in Newtons/mm² after 28 days of curing.
</p><ul>
<li><strong>M15 (Ratio ~1:3:6):</strong> Used for non-structural work like simple foundations, pathways, and binding.</li>
<li><strong>M20 (Ratio ~1:2:4):</strong> Standard grade for residential slabs, driveways, and general construction.</li>
<li><strong>M25 (Ratio ~1:1.5:3):</strong> A high-strength mix used for reinforced concrete (RCC) columns, beams, or areas with heavy loads.</li>
</ul>
<p></p>
</details>
<details>
<summary>How much extra concrete should I order?</summary>
<p>Always order 5-10% more than your calculation. This "contingency" or "waste factor" accounts for spillage, uneven subgrade, spreading of forms, and any concrete left in the mixer or wheelbarrow. It is far better to have a little left over than to run short during a pour.</p>
</details>
<details>
<summary>How many 50kg bags of cement are in 1 cubic meter of concrete?</summary>
<p>It depends on the mix ratio. For a standard 1:2:4 (M20) mix, you need approximately 343 kg of cement per cubic meter. This equates to $\frac{343}{50} \approx 6.86\ bags$. So, as a rule of thumb, you need about **7 bags of 50kg cement** to make 1 cubic meter of M20 concrete.</p>
</details>

<div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
<p><strong>Tool developed by Ugo Candido.</strong>
<br>Content and formulas verified by the CalcDomain Engineering Review Board.
</p>
<p class="mt-2">Last accuracy review: <time datetime="2025-10-31">October 31, 2025</time></p>
</div>


<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[V_{wet} = Length \times Width \times Depth\]</div>
  <pre class="auditspine-mono">V_{wet} = Length \times Width \times Depth</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[V_{wet} = \pi \times (\frac{Diameter}{2})^2 \times Height\]</div>
  <pre class="auditspine-mono">V_{wet} = \pi \times (\frac{Diameter}{2})^2 \times Height</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[V_{dry} = V_{wet} \times 1.54\]</div>
  <pre class="auditspine-mono">V_{dry} = V_{wet} \times 1.54</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[R = 1 + S + A\]</div>
  <pre class="auditspine-mono">R = 1 + S + A</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[Mass_{cement} = (\frac{1}{R} \times V_{dry}) \times Density_{cement}\]</div>
  <pre class="auditspine-mono">Mass_{cement} = (\frac{1}{R} \times V_{dry}) \times Density_{cement}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[Mass_{sand} = (\frac{S}{R} \times V_{dry}) \times Density_{sand}\]</div>
  <pre class="auditspine-mono">Mass_{sand} = (\frac{S}{R} \times V_{dry}) \times Density_{sand}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">For a Slab / Footing: $V_{wet} = Length \times Width \times Depth$ For a Column / Post: $V_{wet} = \pi \times (\frac{Diameter}{2})^2 \times Height$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$V_{dry} = V_{wet} \times 1.54$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">Sum of Ratios (R): $R = 1 + S + A$ Mass of Cement: $Mass_{cement} = (\frac{1}{R} \times V_{dry}) \times Density_{cement}$ Mass of Sand: $Mass_{sand} = (\frac{S}{R} \times V_{dry}) \times Density_{sand}$ Mass of Stone: $Mass_{stone} = (\frac{A}{R} \times V_{dry}) \times Density_{stone}$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$Total\ Bags = \frac{Total\ V_{wet}\ (in\ ft^3)}{Yield\ per\ Bag\ (in\ ft^3)}$ (e.g., An 80 lb bag yields approximately 0.60 ft³ of concrete)</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Construction</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/construction-diy" target="_blank" rel="nofollow noopener">https://calcdomain.com/construction-diy</a></li>
<li><strong>Materials Estimation</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/construction-diy-materials-estimation" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/construction-diy-materials-estimation</a></li>
<li><strong>Gravel Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/gravel-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/gravel-calculator</a></li>
<li><strong>Rebar Weight Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/rebar-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/rebar-calculator</a></li>
<li><strong>Paint Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/paint-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/paint-calculator</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-64 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×250)
</div>

<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li><strong>Avoid Waste:</strong> Get precise material estimates to prevent over-ordering.</li>
<li><strong>Dual-Mode:</strong> Calculates both individual components (pro) and pre-mix bags (DIY).</li>
<li><strong>Budget Accurately:</strong> Know the exact quantities of cement, sand, and stone to budget for.</li>
<li><strong>Supports All Shapes:</strong> Easily calculate for rectangular slabs or round columns.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Construction Tools</h3>
<ul class="space-y-3 text-sm">
<li>Concrete Block Calculator</li>
<li><a href="https://calcdomain.com/gravel-calculator" class="text-blue-600 hover:underline focusable">Gravel Calculator</a></li>
<li><a href="https://calcdomain.com/rebar-calculator" class="text-blue-600 hover:underline focusable">Rebar Weight Calculator</a></li>
<li><a href="https://calcdomain.com/paint-calculator" class="text-blue-600 hover:underline focusable">Paint Calculator</a></li>
</ul>
</div>
</div>
</aside>

</div>
</main>

<footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>













<script>
document.addEventListener('DOMContentLoaded', () => {

// --- 1. CONSTANTS ---
const DENSITIES = {
cement: 1440, // kg/m³
sand: 1600,   // kg/m³
stone: 1600,  // kg/m³
concrete: 2400 // kg/m³
};
const DRY_VOLUME_FACTOR = 1.54;
const BAG_YIELDS_FT3 = {
'40': 0.30,
'60': 0.45,
'80': 0.60
};
const MIX_RATIOS = {
"1:1.5:3": { c: 1, s: 1.5, a: 3 },
"1:2:4": { c: 1, s: 2, a: 4 },
"1:3:6": { c: 1, s: 3, a: 6 }
};
const CONVERSIONS_TO_METER = {
feet: 0.3048,
inches: 0.0254,
meters: 1,
centimeters: 0.01
};
const M3_TO_FT3 = 35.3147;
const KG_TO_LBS = 2.20462;

// --- 2. ELEMENT SELECTION ---
const form = document.getElementById('cement-form');
const calculateBtn = document.getElementById('calculateBtn');
const resetBtn = document.getElementById('resetBtn');

// Inputs
const shapeRadios = document.querySelectorAll('input[name="projectShape"]');
const calcTypeRadios = document.querySelectorAll('input[name="calcType"]');
const slabInputs = document.getElementById('slab-inputs');
const columnInputs = document.getElementById('column-inputs');
const componentOptions = document.getElementById('component-options');
const bagOptions = document.getElementById('bag-options');

const inputs = {
length: document.getElementById('length'),
width: document.getElementById('width'),
depth: document.getElementById('depth'),
diameter: document.getElementById('diameter'),
height: document.getElementById('height'),
units: document.getElementById('units'),
mixRatio: document.getElementById('mixRatio'),
bagWeight: document.getElementById('bagWeight')
};

// Results
const resultsContainer = document.getElementById('results-container');
const resultsVolume = document.getElementById('results-volume');
const resultsVolumeImp = document.getElementById('results-volume-imp');
const resultsWeight = document.getElementById('results-weight');
const resultsWeightImp = document.getElementById('results-weight-imp');
const resultsComponents = document.getElementById('results-components');
const resultsBags = document.getElementById('results-bags');
const resultsCement = document.getElementById('results-cement');
const resultsCementImp = document.getElementById('results-cement-imp');
const resultsSand = document.getElementById('results-sand');
const resultsSandImp = document.getElementById('results-sand-imp');
const resultsStone = document.getElementById('results-stone');
const resultsStoneImp = document.getElementById('results-stone-imp');
const resultsTotalBags = document.getElementById('results-total-bags');
const bagWeightDisplay = document.getElementById('bag-weight-display');

// Tooltips
const tooltips = document.querySelectorAll('.tooltip-button');

// --- 3. EVENT LISTENERS ---
calculateBtn.addEventListener('click', runCalculation);
resetBtn.addEventListener('click', resetCalculator);

shapeRadios.forEach(radio => radio.addEventListener('change', toggleDimensionInputs));
calcTypeRadios.forEach(radio => radio.addEventListener('change', toggleOptions));

// Add live validation
Object.values(inputs).forEach(input => {
if (input.type === 'number') {
input.addEventListener('input', () => {
if (parseFloat(input.value) > 0) {
clearError(input);
}
});
}
});

// Accessible Tooltip Listeners
tooltips.forEach(button => {
button.addEventListener('click', () => {
const expanded = button.getAttribute('aria-expanded') === 'true' || false;
button.setAttribute('aria-expanded', !expanded);
});
// Close on outside click
document.addEventListener('click', (e) => {
if (!button.contains(e.target) && !button.nextElementSibling.contains(e.target)) {
button.setAttribute('aria-expanded', 'false');
}
});
// Close on escape key
button.addEventListener('keydown', (e) => {
if (e.key === 'Escape') {
button.setAttribute('aria-expanded', 'false');
}
});
});

// --- 4. UI TOGGLE FUNCTIONS ---

function toggleDimensionInputs(e) {
const shape = e.target.value;
if (shape === 'slab') {
slabInputs.classList.remove('hidden');
columnInputs.classList.add('hidden');
// Update aria-required for accessibility
inputs.length.setAttribute('aria-required', 'true');
inputs.width.setAttribute('aria-required', 'true');
inputs.depth.setAttribute('aria-required', 'true');
inputs.diameter.setAttribute('aria-required', 'false');
inputs.height.setAttribute('aria-required', 'false');
} else {
slabInputs.classList.add('hidden');
columnInputs.classList.remove('hidden');
// Update aria-required
inputs.length.setAttribute('aria-required', 'false');
inputs.width.setAttribute('aria-required', 'false');
inputs.depth.setAttribute('aria-required', 'false');
inputs.diameter.setAttribute('aria-required', 'true');
inputs.height.setAttribute('aria-required', 'true');
}
clearAllErrors();
}

function toggleOptions(e) {
const type = e.target.value;
if (type === 'components') {
componentOptions.classList.remove('hidden');
bagOptions.classList.add('hidden');
} else {
componentOptions.classList.add('hidden');
bagOptions.classList.remove('hidden');
}
}

// --- 5. VALIDATION FUNCTIONS ---

function showError(inputEl, message) {
const errorEl = document.getElementById(inputEl.id + 'Error');
if (errorEl) {
errorEl.textContent = message;
errorEl.style.display = 'block';
}
inputEl.setAttribute('aria-invalid', 'true');
inputEl.setAttribute('aria-describedby', errorEl.id);
}

function clearError(inputEl) {
const errorEl = document.getElementById(inputEl.id + 'Error');
if (errorEl) {
errorEl.textContent = '';
errorEl.style.display = 'none';
}
inputEl.setAttribute('aria-invalid', 'false');
inputEl.removeAttribute('aria-describedby');
}

function clearAllErrors() {
const errorMessages = document.querySelectorAll('.error-message');
errorMessages.forEach(msg => {
msg.textContent = '';
msg.style.display = 'none';
});
const invalidInputs = document.querySelectorAll('input[aria-invalid="true"]');
invalidInputs.forEach(input => {
input.setAttribute('aria-invalid', 'false');
input.removeAttribute('aria-describedby');
});
}

function validateInputs() {
let isValid = true;
clearAllErrors();
const currentShape = document.querySelector('input[name="projectShape"]:checked').value;

const fieldsToValidate = [];
if (currentShape === 'slab') {
fieldsToValidate.push(inputs.length, inputs.width, inputs.depth);
} else {
fieldsToValidate.push(inputs.diameter, inputs.height);
}

fieldsToValidate.forEach(input => {
const value = parseFloat(input.value);
if (isNaN(value) || value <= 0) {
isValid = false;
showError(input, `Please enter a positive value for ${input.id}.`);
}
});

return isValid;
}

// --- 6. HELPER FUNCTIONS ---

function fmtNum(num, decimals = 2) {
return num.toLocaleString(undefined, {
minimumFractionDigits: decimals,
maximumFractionDigits: decimals
});
}

function fmtInt(num) {
return Math.ceil(num).toLocaleString();
}

// --- 7. CORE CALCULATION ---

function runCalculation() {
if (!validateInputs()) {
resultsContainer.classList.add('hidden'); // Hide results if validation fails
return;
}

// 1. Get all values
const shape = document.querySelector('input[name="projectShape"]:checked').value;
const calcType = document.querySelector('input[name="calcType"]:checked').value;
const unit = inputs.units.value;
const convFactor = CONVERSIONS_TO_METER[unit];

// 2. Calculate Wet Volume in m³
let wetVolumeM3 = 0;
if (shape === 'slab') {
const l = parseFloat(inputs.length.value) * convFactor;
const w = parseFloat(inputs.width.value) * convFactor;
const d = parseFloat(inputs.depth.value) * convFactor;
wetVolumeM3 = l * w * d;
} else {
const h = parseFloat(inputs.height.value) * convFactor;
const r = (parseFloat(inputs.diameter.value) / 2) * convFactor;
wetVolumeM3 = Math.PI * (r * r) * h;
}

const wetVolumeFt3 = wetVolumeM3 * M3_TO_FT3;

// 3. Perform main calculation based on type
const calcResults = {};
if (calcType === 'components') {
const ratioKey = inputs.mixRatio.value;
const ratio = MIX_RATIOS[ratioKey];
const sumRatios = ratio.c + ratio.s + ratio.a;
const dryVolumeM3 = wetVolumeM3 * DRY_VOLUME_FACTOR;

const volCement = (ratio.c / sumRatios) * dryVolumeM3;
const volSand = (ratio.s / sumRatios) * dryVolumeM3;
const volStone = (ratio.a / sumRatios) * dryVolumeM3;

calcResults.cementKg = volCement * DENSITIES.cement;
calcResults.sandKg = volSand * DENSITIES.sand;
calcResults.stoneKg = volStone * DENSITIES.stone;
} else {
const bagWeight = inputs.bagWeight.value;
const yieldPerBag = BAG_YIELDS_FT3[bagWeight];
calcResults.totalBags = wetVolumeFt3 / yieldPerBag;
calcResults.bagWeight = bagWeight;
}

// 4. Display results
displayResults(wetVolumeM3, wetVolumeFt3, calcType, calcResults);
}

// --- 8. DISPLAY RESULTS ---

function displayResults(volM3, volFt3, calcType, results) {
// Show common results
resultsVolume.textContent = `${fmtNum(volM3)} m³`;
resultsVolumeImp.textContent = `${fmtNum(volFt3)} ft³`;

const totalWeightKg = volM3 * DENSITIES.concrete;
const totalWeightLbs = totalWeightKg * KG_TO_LBS;
resultsWeight.textContent = `${fmtNum(totalWeightKg, 0)} kg`;
resultsWeightImp.textContent = `${fmtNum(totalWeightLbs, 0)} lbs`;

if (calcType === 'components') {
// Show component results
resultsComponents.classList.remove('hidden');
resultsBags.classList.add('hidden');

resultsCement.textContent = `${fmtNum(results.cementKg, 0)} kg`;
resultsCementImp.textContent = `${fmtNum(results.cementKg * KG_TO_LBS, 0)} lbs`;

resultsSand.textContent = `${fmtNum(results.sandKg, 0)} kg`;
resultsSandImp.textContent = `${fmtNum(results.sandKg * KG_TO_LBS, 0)} lbs`;

resultsStone.textContent = `${fmtNum(results.stoneKg, 0)} kg`;
resultsStoneImp.textContent = `${fmtNum(results.stoneKg * KG_TO_LBS, 0)} lbs`;
} else {
// Show bag results
resultsComponents.classList.add('hidden');
resultsBags.classList.remove('hidden');

bagWeightDisplay.textContent = results.bagWeight;
resultsTotalBags.textContent = fmtInt(results.totalBags);
}

// Show the main container and scroll to it
resultsContainer.classList.remove('hidden');
resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// --- 9. RESET FUNCTION ---

function resetCalculator() {
form.reset();
clearAllErrors();
resultsContainer.classList.add('hidden');

// Reset UI toggles to default
slabInputs.classList.remove('hidden');
columnInputs.classList.add('hidden');
componentOptions.classList.remove('hidden');
bagOptions.classList.add('hidden');

// Reset aria-required attributes
inputs.length.setAttribute('aria-required', 'true');
inputs.width.setAttribute('aria-required', 'true');
inputs.depth.setAttribute('aria-required', 'true');
inputs.diameter.setAttribute('aria-required', 'false');
inputs.height.setAttribute('aria-required', 'false');

// Scroll to top of calculator
document.getElementById('cement-form').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// --- 10. LaTeX Auto-Rendering ---
// Check if renderMathInElement function exists (from KaTeX)
if (typeof renderMathInElement === 'function') {
renderMathInElement(document.body, {
delimiters: [
{left: '$$', right: '$$', display: true},
{left: '$', right: '$', display: false},
]
});
}
});
</script>


</body></html>
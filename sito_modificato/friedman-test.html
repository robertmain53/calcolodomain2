<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Friedman Test Calculator – Nonparametric Repeated-Measures ANOVA</title>
    <meta name="description" content="Friedman test calculator for repeated-measures designs. Enter raw data or rank sums, get Friedman chi-square, p-value, Kendall’s W effect size, and a clear step-by-step explanation.">
    <link rel="canonical" href="https://calcdomain.com/friedman-test">
    
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .card-hover { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .prose { max-width: 65ch; margin-left: auto; margin-right: auto; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .formula-box { background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 8px; padding: 1rem; overflow-x: auto; margin: 1rem 0; }
        .pill-toggle button { transition: background-color 0.15s ease, color 0.15s ease, border-color 0.15s ease; }
        .code-like { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
        table.fm-table th, table.fm-table td { font-size: 0.75rem; padding: 0.25rem 0.4rem; border: 1px solid #e5e7eb; text-align: right; }
        table.fm-table th:first-child, table.fm-table td:first-child { text-align: left; }
    </style>
    
    <!-- HEAD_SCRIPTS_E_META -->
    <!-- Google tag (gtag.js) -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7MB5V1LZRN');
    </script>

    <meta name="google-site-verification" content="_tiTZ9ivAdtXcAS9CMnTNJ549Sg39WVqP_ZFbWgglNA">

    <script src="https://cmp.gatekeeperconsent.com/min.js" data-cfasync="false"></script>
    <script src="https://the.gatekeeperconsent.com/cmp.min.js" data-cfasync="false"></script>

    <script async="" src="//www.ezojs.com/ezoic/sa.min.js"></script>
    <script>
        window.ezstandalone = window.ezstandalone || {};
        ezstandalone.cmd = ezstandalone.cmd || [];
    </script>

    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://calcdomain.com"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Math & Conversions",
          "item": "https://calcdomain.com/categories/math-conversions"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Core Math Algebra",
          "item": "https://calcdomain.com/subcategories/core-math-algebra"
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is the Friedman test used for?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The Friedman test is a nonparametric alternative to one-way repeated-measures ANOVA. It compares three or more related conditions or treatments measured on the same subjects or blocks when the assumptions of normality or sphericity are doubtful. It works on within-block ranks rather than raw values."
          }
        },
        {
          "@type": "Question",
          "name": "What are the assumptions of the Friedman test?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The main assumptions are: (1) the dependent variable is at least ordinal; (2) each block or subject is measured under each treatment level; (3) blocks are independent of each other; and (4) the ranking within each block is meaningful. The test does not require normally distributed residuals."
          }
        },
        {
          "@type": "Question",
          "name": "How do I interpret the Friedman test p-value?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The null hypothesis states that all treatments have the same distribution. A small p-value (typically below 0.05) suggests that at least one treatment differs in central tendency compared to the others. The calculator reports the Friedman chi-square statistic, degrees of freedom, and the associated p-value."
          }
        },
        {
          "@type": "Question",
          "name": "What is Kendall’s W in the context of the Friedman test?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Kendall’s W is an effect size measure for the Friedman test. It ranges from 0 (no agreement between rankings) to 1 (perfect agreement). It can be computed from the Friedman statistic as W = Q / (n × (k − 1)), where Q is the Friedman chi-square, n is the number of blocks, and k is the number of treatments."
          }
        },
        {
          "@type": "Question",
          "name": "When should I use Friedman instead of repeated-measures ANOVA?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Use the Friedman test when your outcome is ordinal, you have clear outliers, or the normality/sphericity assumptions for parametric repeated-measures ANOVA are not tenable. If those assumptions are reasonably met and the outcome is continuous, a parametric repeated-measures ANOVA can be more powerful."
          }
        }
      ]
    },
    {
      "@type": "HowTo",
      "name": "How to perform the Friedman test with this calculator",
      "description": "Step-by-step guide to running a Friedman test from raw repeated-measures data.",
      "step": [
        {
          "@type": "HowToStep",
          "position": 1,
          "name": "Select data mode",
          "text": "Choose Raw data if you have the original repeated measurements for each subject or block and each treatment. Choose Rank sums if you already have the sums of ranks for each treatment."
        },
        {
          "@type": "HowToStep",
          "position": 2,
          "name": "Enter blocks and treatments",
          "text": "For Raw data, each row corresponds to a block or subject and each column to a treatment. Fill in the table with numeric values only, one cell per block × treatment combination."
        },
        {
          "@type": "HowToStep",
          "position": 3,
          "name": "Run the calculation",
          "text": "Click Calculate. The tool ranks observations within each block, computes treatment rank sums, the Friedman chi-square statistic, Kendall’s W effect size, and the exact degrees of freedom."
        },
        {
          "@type": "HowToStep",
          "position": 4,
          "name": "Interpret the results",
          "text": "Use the reported p-value in combination with your selected significance level to decide whether to reject the null hypothesis of equal treatment distributions. The effect size W helps quantify the strength of the effect."
        }
      ]
    }
  ]
}
</script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
.auditspine-badge{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  border:1px solid #e5e7eb;
  background:#f8fafc;
  color:#0f172a;
}
.auditspine-badge-warn{
  background:#fff7ed;
  border-color:#fed7aa;
  color:#9a3412;
}
</style>
</head>

<body class="bg-gray-50 text-gray-800">

    <!-- BODY_SCRIPTS_INIZIO -->
    <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939" crossorigin="anonymous"></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a href="https://calcdomain.com" class="text-2xl font-bold text-blue-600">CalcDomain</a>
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" autocomplete="off">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
              <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a href="https://calcdomain.com/search" class="text-gray-700 hover:text-blue-600 transition-colors">Advanced Search</a>
            <a href="https://calcdomain.com/categories" class="text-gray-700 hover:text-blue-600 transition-colors">Categories</a>
          </div>
          <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
          </button>
        </div>
        <nav id="mobile-menu" class="md:hidden mt-4 hidden" aria-label="Mobile menu" role="navigation">
          <div class="mb-4">
            <div class="relative">
              <input type="search" id="mobile-search-input" placeholder="Search calculators..." class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>
          </div>
          <div class="space-y-2">
            <a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
            <a href="https://calcdomain.com/categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      
      <nav class="text-sm mb-4 text-gray-600" aria-label="Breadcrumbs"><a href="https://calcdomain.com" class="hover:text-blue-600">Home</a> &raquo; <a href="https://calcdomain.com/categories/math-conversions" class="hover:text-blue-600">Math & Conversions</a> &raquo; <a href="https://calcdomain.com/subcategories/core-math-algebra" class="hover:text-blue-600">Core Math Algebra</a></nav>
      
      <div class="flex flex-col lg:flex-row gap-8">
        
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            
            <h1 class="text-2xl md:text-3xl font-bold mb-3">Friedman Test Calculator</h1>
            <p class="text-gray-700 mb-2">
              Run the <strong>Friedman test</strong> for repeated-measures designs. Enter either
              <strong>raw data</strong> (one row per subject/block, one column per treatment) or
              <strong>rank sums</strong>, and get the Friedman chi-square statistic, p-value and
              <strong>Kendall’s W</strong> effect size.
            </p>
            <p class="text-gray-700 mb-4">
              Suitable for nonparametric analysis of <em>k ≥ 3 related conditions</em> when assumptions for
              repeated-measures ANOVA are doubtful.
            </p>

            <!-- Mode -->
            <section class="mb-4">
              <h2 class="text-lg font-semibold mb-2">Input mode</h2>
              <div class="pill-toggle inline-flex flex-wrap gap-2 text-xs md:text-sm">
                <button type="button" data-fm-mode="raw" class="fm-mode-btn px-3 py-1.5 rounded-full border border-blue-600 bg-blue-600 text-white font-medium">
                  Raw data (recommended)
                </button>
                <button type="button" data-fm-mode="ranks" class="fm-mode-btn px-3 py-1.5 rounded-full border border-gray-300 bg-white text-gray-700">
                  Rank sums
                </button>
              </div>
            </section>

            <!-- Raw data mode -->
            <section id="fm-raw-section" class="mb-6">
              <div class="grid md:grid-cols-3 gap-4 mb-3">
                <div>
                  <label for="fm-blocks" class="block text-sm font-medium text-gray-700 mb-1">
                    Blocks / subjects (n)
                  </label>
                  <input id="fm-blocks" type="number" min="3" max="100" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" value="5">
                  <p class="text-xs text-gray-500 mt-1">
                    Each row corresponds to one subject, block or matched set.
                  </p>
                </div>
                <div>
                  <label for="fm-treatments" class="block text-sm font-medium text-gray-700 mb-1">
                    Treatments / conditions (k)
                  </label>
                  <input id="fm-treatments" type="number" min="3" max="10" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" value="3">
                  <p class="text-xs text-gray-500 mt-1">
                    Number of related conditions to compare (k ≥ 3).
                  </p>
                </div>
                <div class="flex items-end">
                  <button id="fm-build-table" type="button" class="inline-flex items-center px-4 py-2 bg-gray-100 text-gray-800 text-sm font-medium rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    Rebuild table
                  </button>
                </div>
              </div>

              <div class="border border-gray-200 rounded-lg p-3 mb-3">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm font-medium text-gray-700">Raw repeated-measures data</span>
                </div>
                <div class="overflow-x-auto">
                  <table id="fm-raw-table" class="fm-table border-collapse min-w-full bg-white">
                    <!-- filled by JS -->
                  </table>
                </div>
                <p class="text-xs text-gray-500 mt-2">
                  Enter numeric responses only. Each row = one block/subject; each column = one treatment.
                  Higher values will receive higher ranks within each row.
                </p>
              </div>
            </section>

            <!-- Rank sums mode -->
            <section id="fm-ranks-section" class="mb-6 hidden">
              <div class="grid md:grid-cols-2 gap-4 mb-3">
                <div>
                  <label for="fm-blocks-ranks" class="block text-sm font-medium text-gray-700 mb-1">
                    Blocks / subjects (n)
                  </label>
                  <input id="fm-blocks-ranks" type="number" min="3" max="200" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" value="10">
                  <p class="text-xs text-gray-500 mt-1">
                    Number of blocks that contributed ranks to each treatment.
                  </p>
                </div>
                <div>
                  <label for="fm-treatments-ranks" class="block text-sm font-medium text-gray-700 mb-1">
                    Treatments / conditions (k)
                  </label>
                  <input id="fm-treatments-ranks" type="number" min="3" max="10" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" value="3">
                  <p class="text-xs text-gray-500 mt-1">
                    Number of treatments with rank sums available.
                  </p>
                </div>
              </div>

              <div class="border border-gray-200 rounded-lg p-3">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm font-medium text-gray-700">Treatment rank sums</span>
                  <button id="fm-build-ranks" type="button" class="inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-800 text-xs font-medium rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    Rebuild rank table
                  </button>
                </div>
                <div class="overflow-x-auto">
                  <table id="fm-ranks-table" class="fm-table border-collapse min-w-full bg-white">
                    <!-- filled by JS -->
                  </table>
                </div>
                <p class="text-xs text-gray-500 mt-2">
                  Each cell should contain the <strong>sum of ranks</strong> for that treatment across all n blocks.
                </p>
              </div>
            </section>

            <!-- Controls -->
            <section class="mb-4">
              <div class="grid md:grid-cols-3 gap-4 mb-3">
                <div>
                  <label for="fm-alpha" class="block text-sm font-medium text-gray-700 mb-1">
                    Significance level (α)
                  </label>
                  <select id="fm-alpha" class="w-full border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="0.10">0.10</option>
                    <option value="0.05" selected="">0.05</option>
                    <option value="0.01">0.01</option>
                  </select>
                  <p class="text-xs text-gray-500 mt-1">
                    Used for the reject / do not reject decision.
                  </p>
                </div>
              </div>

              <div class="flex flex-wrap items-center gap-3">
                <button id="fm-calc-btn" type="button" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                  Calculate Friedman test
                </button>
                <button id="fm-clear-btn" type="button" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
                  Clear all
                </button>
                <p class="text-xs text-gray-500">
                  Use dot or comma as decimal separator. Empty cells are treated as missing values and will cause an error.
                </p>
              </div>

              <p id="fm-error" class="text-sm text-red-600 mt-3 hidden"></p>
            </section>

            <!-- Results -->
            <section id="fm-result-section" class="border border-gray-200 rounded-lg p-4 mb-4 hidden">
              <h2 class="text-lg font-semibold mb-2">Friedman test results</h2>
              <p id="fm-result-summary" class="text-sm text-gray-800 mb-2"></p>
              <p id="fm-result-detail" class="text-xs text-gray-700 mb-3"></p>

              <div class="grid md:grid-cols-2 gap-4 mb-3">
                <div class="border border-gray-100 rounded-md p-3 bg-gray-50">
                  <h3 class="text-sm font-semibold text-gray-800 mb-2">Test statistics</h3>
                  <ul class="text-xs text-gray-700 space-y-1">
                    <li id="fm-stat-q"></li>
                    <li id="fm-stat-df"></li>
                    <li id="fm-stat-p"></li>
                    <li id="fm-stat-w"></li>
                  </ul>
                </div>
                <div class="border border-gray-100 rounded-md p-3 bg-gray-50">
                  <h3 class="text-sm font-semibold text-gray-800 mb-2">Decision</h3>
                  <p id="fm-decision" class="text-xs text-gray-800"></p>
                </div>
              </div>

              <div id="fm-ranks-summary-wrapper" class="mt-3 hidden">
                <h3 class="text-sm font-semibold text-gray-800 mb-2">Treatment rank sums and mean ranks</h3>
                <div class="overflow-x-auto">
                  <table class="fm-table border-collapse min-w-full bg-white">
                    <thead>
                      <tr>
                        <th>Treatment</th>
                        <th>Rank sum R<sub>j</sub></th>
                        <th>Mean rank R<sub>j</sub>/n</th>
                      </tr>
                    </thead>
                    <tbody id="fm-ranks-summary-body">
                      <!-- filled by JS -->
                    </tbody>
                  </table>
                </div>
              </div>

              <div id="fm-rank-table-wrapper" class="mt-4 hidden">
                <h3 class="text-sm font-semibold text-gray-800 mb-2">Within-block ranks (Raw data mode)</h3>
                <p class="text-xs text-gray-600 mb-2">
                  Each row is ranked independently. Ties receive the average of the ranks they span.
                </p>
                <div class="overflow-x-auto">
                  <table id="fm-rank-table" class="fm-table border-collapse min-w-full bg-white">
                    <!-- filled by JS -->
                  </table>
                </div>
              </div>
            </section>

            <!-- Theory & explanations -->
            <section class="prose">
              <h2>What is the Friedman test?</h2>
              <p>
                The <strong>Friedman test</strong> is a nonparametric alternative to one-way
                repeated-measures ANOVA. It tests whether <strong>k related treatments</strong>
                (e.g. three or more time points, experimental conditions or methods) have the same
                distribution when measured on the same blocks or subjects.
              </p>
              <p>
                Instead of using the raw values directly, the Friedman test:
              </p>
              <ol>
                <li>Ranks observations <strong>within each block</strong>.</li>
                <li>Sums ranks for each treatment \( R_j \).</li>
                <li>Compares these rank sums via a chi-square statistic.</li>
              </ol>

              <h2>Friedman test formula</h2>
              <p>
                Let \(n\) be the number of blocks (subjects) and \(k\) the number of treatments.
                Denote by \(R_j\) the sum of ranks for treatment \(j\) across all blocks.
              </p>
              <div class="formula-box text-sm">
                <p class="font-mono mb-1">
                  \( Q = \dfrac{12}{n k (k+1)} \sum_{j=1}^{k} R_j^2 - 3n(k+1) \)
                </p>
                <p class="text-xs mb-0">
                  Under the null hypothesis of equal treatment distributions and for reasonably large
                  \(n\), \(Q\) approximately follows a chi-square distribution with \(k - 1\) degrees
                  of freedom.
                </p>
              </div>

              <h2>Kendall’s W effect size</h2>
              <p>
                A convenient effect size associated with the Friedman test is
                <strong>Kendall’s W</strong>, defined as:
              </p>
              <div class="formula-box text-sm">
                <p class="font-mono mb-0">
                  \( W = \dfrac{Q}{n (k - 1)} \)
                </p>
              </div>
              <p>
                The coefficient \(W\) ranges from 0 (no agreement / no effect) to 1 (perfect agreement /
                maximal effect). Very roughly:
              </p>
              <ul>
                <li>\(W \approx 0.1\): small effect</li>
                <li>\(W \approx 0.3\): medium effect</li>
                <li>\(W \ge 0.5\): large effect</li>
              </ul>
              <p>
                These thresholds are only guidelines; always interpret effect sizes in the context of your field.
              </p>

              <h2>When to use the Friedman test</h2>
              <p>You typically choose the Friedman test when:</p>
              <ul>
                <li>You have <strong>k ≥ 3 related conditions</strong> (e.g. repeated measures or matched sets).</li>
                <li>The outcome is <strong>ordinal</strong> or strongly non-normal with outliers.</li>
                <li>Parametric assumptions (normality, sphericity) of repeated-measures ANOVA are violated.</li>
              </ul>

              <h2>Friedman vs. Kruskal–Wallis vs. repeated-measures ANOVA</h2>
              <ul>
                <li>
                  <strong>Friedman test</strong>: nonparametric, for <em>related</em> samples (within-subjects or
                  blocks), works on within-block ranks.
                </li>
                <li>
                  <strong>Kruskal–Wallis test</strong>: nonparametric, for <em>independent</em> groups, works on ranks across the full sample.
                </li>
                <li>
                  <strong>Repeated-measures ANOVA</strong>: parametric, assumes normality of residuals and sphericity.
                </li>
              </ul>

              <h2>Friedman test – FAQ</h2>

              <div class="mt-4 space-y-3">
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                  <button type="button" class="w-full text-left faq-question px-4 py-3 flex items-center justify-between">
                    <span class="font-medium text-gray-800">How many blocks and treatments do I need for the Friedman test?</span>
                    <span class="ml-2 text-gray-400">+</span>
                  </button>
                  <div class="faq-answer px-4 pb-4 pt-1 text-sm text-gray-700 hidden">
                    <p>
                      You need at least <strong>k = 3 treatments</strong> and <strong>n ≥ 3 blocks</strong>, each
                      measured under every treatment. In practice, larger n improves the quality of the chi-square
                      approximation for the p-value.
                    </p>
                  </div>
                </div>

                <div class="border border-gray-200 rounded-lg overflow-hidden">
                  <button type="button" class="w-full text-left faq-question px-4 py-3 flex items-center justify-between">
                    <span class="font-medium text-gray-800">Does the Friedman test tell me which treatments differ?</span>
                    <span class="ml-2 text-gray-400">+</span>
                  </button>
                  <div class="faq-answer px-4 pb-4 pt-1 text-sm text-gray-700 hidden">
                    <p>
                      No. The Friedman test is an <strong>omnibus</strong> test. A significant result tells you that
                      not all treatments are equivalent, but it does not specify which pairs differ. For that you need
                      <strong>post-hoc multiple comparison procedures</strong> (e.g. Nemenyi, Conover, Dunn tests) with
                      appropriate control of the family-wise error rate.
                    </p>
                  </div>
                </div>

                <div class="border border-gray-200 rounded-lg overflow-hidden">
                  <button type="button" class="w-full text-left faq-question px-4 py-3 flex items-center justify-between">
                    <span class="font-medium text-gray-800">How does this calculator handle ties in the data?</span>
                    <span class="ml-2 text-gray-400">+</span>
                  </button>
                  <div class="faq-answer px-4 pb-4 pt-1 text-sm text-gray-700 hidden">
                    <p>
                      Within each block, equal values receive the <strong>average</strong> of the ranks that they span
                      (mid-ranks). This is the standard approach for rank-based procedures. The impact of ties on the
                      Friedman statistic is usually small unless there are many of them.
                    </p>
                  </div>
                </div>

                <div class="border border-gray-200 rounded-lg overflow-hidden">
                  <button type="button" class="w-full text-left faq-question px-4 py-3 flex items-center justify-between">
                    <span class="font-medium text-gray-800">Is the p-value exact?</span>
                    <span class="ml-2 text-gray-400">+</span>
                  </button>
                  <div class="faq-answer px-4 pb-4 pt-1 text-sm text-gray-700 hidden">
                    <p>
                      The p-value reported here is based on the <strong>chi-square approximation</strong> of the
                      Friedman statistic with \(k-1\) degrees of freedom. For small n and k, exact permutation-based
                      p-values are more accurate but computationally heavier; these are typically obtained via
                      specialised software.
                    </p>
                  </div>
                </div>
              </div>
            </section>

          </div>
        
<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[','\\]</div>
  <pre class="auditspine-mono">','\</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">\( Q = \dfrac{12}{n k (k+1)} \sum_{j=1}^{k} R_j^2 - 3n(k+1) \) Under the null hypothesis of equal treatment distributions and for reasonably large \(n\), \(Q\) approximately follows a chi-square distribution with \(k - 1\) degrees of freedom.</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">\( W = \dfrac{Q}{n (k - 1)} \)</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>NIST — Weights and measures</strong> — nist.gov · Accessed 2026-01-19<br><a href="https://www.nist.gov/pml/weights-and-measures" target="_blank" rel="nofollow noopener">https://www.nist.gov/pml/weights-and-measures</a></li>
<li><strong>FTC — Consumer advice</strong> — consumer.ftc.gov · Accessed 2026-01-19<br><a href="https://consumer.ftc.gov/" target="_blank" rel="nofollow noopener">https://consumer.ftc.gov/</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</main>
        
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">Core Math &amp; Algebra tools</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a href="https://calcdomain.com/g-test" class="text-blue-600 hover:underline">
                  G-test (likelihood-ratio test)
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/foil" class="text-blue-600 hover:underline">
                  FOIL Method Calculator
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/adjacency-matrix" class="text-blue-600 hover:underline">
                  Graph Adjacency Matrix
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/speed-distance-time" class="text-blue-600 hover:underline">
                  Speed, Distance, Time
                </a>
              </li>
              <li>
                <span class="text-gray-500">
                  Friedman Test – you are here
                </span>
              </li>
              <li>
                <a href="https://calcdomain.com/traveling-salesman-problem" class="text-blue-600 hover:underline">
                  Traveling Salesman Problem (TSP)
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/stem-and-leaf-plot" class="text-blue-600 hover:underline">
                  Stem and Leaf Plot Generator
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/bisection-method" class="text-blue-600 hover:underline">
                  Bisection Method Solver
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/monte-carlo-simulation" class="text-blue-600 hover:underline">
                  Monte Carlo Simulation
                </a>
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Nonparametric &amp; rank-based tests</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a href="https://calcdomain.com/cohen-s-d-calculator" class="text-blue-600 hover:underline">
                  Effect Size (Cohen’s d)
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/kruskal-wallis-test" class="text-blue-600 hover:underline">
                  Kruskal–Wallis Test
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/wilcoxon-signed-rank-test" class="text-blue-600 hover:underline">
                  Wilcoxon Signed-Rank Test
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/mann-whitney-u-test" class="text-blue-600 hover:underline">
                  Mann–Whitney U Test
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/chi-square-test" class="text-blue-600 hover:underline">
                  Chi-Square Test of Independence
                </a>
              </li>
            </ul>
          </div>
        </aside>
        
      </div>
    </div>

    <footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>









    
    <script src="/assets/js/script_menu.js" defer=""></script>
    <script src="/assets/js/script_faq.js" defer=""></script>
    <script src="search.js" defer=""></script>
    
    <script>
      // ---------- Numeric helpers ----------
      function fmParseNumber(value) {
        if (value === null || value === undefined) return null;
        const normalized = String(value).replace(/\\s+/g, '').replace(',', '.');
        if (normalized === '') return null;
        const num = Number(normalized);
        return Number.isFinite(num) ? num : null;
      }

      // Rank values within one block (row), handling ties via average ranks
      function fmRankRow(values) {
        const n = values.length;
        const pairs = values.map((v, idx) => ({ v, idx }));
        pairs.sort((a, b) => a.v - b.v);
        const ranks = new Array(n);
        let i = 0;
        while (i < n) {
          let j = i;
          while (j + 1 < n && pairs[j + 1].v === pairs[i].v) {
            j++;
          }
          const avgRank = (i + 1 + j + 1) / 2; // 1-based ranks
          for (let k = i; k <= j; k++) {
            ranks[pairs[k].idx] = avgRank;
          }
          i = j + 1;
        }
        return ranks;
      }

      // ---------- Gamma / chi-square p-value ----------
      function fmGammaln(z) {
        const cof = [
          76.18009172947146,
          -86.50532032941677,
          24.01409824083091,
          -1.231739572450155,
          0.1208650973866179e-2,
          -0.5395239384953e-5
        ];
        let x = z;
        let y = z;
        let tmp = x + 5.5;
        tmp -= (x + 0.5) * Math.log(tmp);
        let ser = 1.000000000190015;
        for (let j = 0; j < cof.length; j++) {
          y += 1;
          ser += cof[j] / y;
        }
        return -tmp + Math.log(2.5066282746310005 * ser / x);
      }

      function fmGammaP(a, x) {
        if (x < 0 || a <= 0) return NaN;
        if (x === 0) return 0;
        const gln = fmGammaln(a);
        if (x < a + 1) {
          // series
          let ap = a;
          let sum = 1 / a;
          let del = sum;
          for (let n = 1; n <= 100; n++) {
            ap += 1;
            del *= x / ap;
            sum += del;
            if (Math.abs(del) < Math.abs(sum) * 3e-7) {
              break;
            }
          }
          return sum * Math.exp(-x + a * Math.log(x) - gln);
        } else {
          // continued fraction
          let b = x + 1 - a;
          let c = 1 / 1e-30;
          let d = 1 / b;
          let h = d;
          for (let i = 1; i <= 100; i++) {
            const an = -i * (i - a);
            b += 2;
            d = an * d + b;
            if (Math.abs(d) < 1e-30) d = 1e-30;
            c = b + an / c;
            if (Math.abs(c) < 1e-30) c = 1e-30;
            d = 1 / d;
            const delta = d * c;
            h *= delta;
            if (Math.abs(delta - 1) < 3e-7) break;
          }
          return 1 - h * Math.exp(-x + a * Math.log(x) - gln);
        }
      }

      function fmChiSquareCDF(x, k) {
        if (x <= 0) return 0;
        const a = k / 2;
        const v = x / 2;
        const P = fmGammaP(a, v);
        return Math.max(0, Math.min(1, P));
      }

      // ---------- UI Setup ----------
      (function () {
        const modeButtons = document.querySelectorAll('.fm-mode-btn');
        const rawSection = document.getElementById('fm-raw-section');
        const ranksSection = document.getElementById('fm-ranks-section');

        function setMode(mode) {
          modeButtons.forEach(btn => {
            const m = btn.getAttribute('data-fm-mode');
            const active = m === mode;
            btn.classList.toggle('bg-blue-600', active);
            btn.classList.toggle('text-white', active);
            btn.classList.toggle('border-blue-600', active);
            btn.classList.toggle('bg-white', !active);
            btn.classList.toggle('text-gray-700', !active);
            btn.classList.toggle('border-gray-300', !active);
          });
          if (mode === 'raw') {
            rawSection.classList.remove('hidden');
            ranksSection.classList.add('hidden');
          } else {
            rawSection.classList.add('hidden');
            ranksSection.classList.remove('hidden');
          }
          document.getElementById('fm-error').classList.add('hidden');
          document.getElementById('fm-result-section').classList.add('hidden');
        }

        modeButtons.forEach(btn => {
          btn.addEventListener('click', () => setMode(btn.getAttribute('data-fm-mode')));
        });
        setMode('raw'); // default

        // Build tables
        const rawTable = document.getElementById('fm-raw-table');
        const ranksTable = document.getElementById('fm-ranks-table');

        function buildRawTable() {
          const n = Math.max(3, Math.min(100, Number(document.getElementById('fm-blocks').value) || 5));
          const k = Math.max(3, Math.min(10, Number(document.getElementById('fm-treatments').value) || 3));
          document.getElementById('fm-blocks').value = n;
          document.getElementById('fm-treatments').value = k;

          let html = '<thead><tr><th>Block</th>';
          for (let j = 1; j <= k; j++) {
            html += '<th>T' + j + '</th>';
          }
          html += '</tr></thead><tbody>';
          for (let i = 1; i <= n; i++) {
            html += '<tr><td class="text-left">B' + i + '</td>';
            for (let j = 1; j <= k; j++) {
              html += '<td><input type="text" class="w-20 border border-gray-300 rounded-md px-1 py-0.5 text-xs" /></td>';
            }
            html += '</tr>';
          }
          html += '</tbody>';
          rawTable.innerHTML = html;
        }

        function buildRanksTable() {
          const k = Math.max(3, Math.min(10, Number(document.getElementById('fm-treatments-ranks').value) || 3));
          document.getElementById('fm-treatments-ranks').value = k;

          let html = '<thead><tr><th>Treatment</th>';
          for (let j = 1; j <= k; j++) {
            html += '<th>T' + j + ' rank sum</th>';
          }
          html += '</tr></thead><tbody><tr><td class="text-left">R<sub>j</sub></td>';
          for (let j = 1; j <= k; j++) {
            html += '<td><input type="text" class="w-24 border border-gray-300 rounded-md px-1 py-0.5 text-xs" /></td>';
          }
          html += '</tr></tbody>';
          ranksTable.innerHTML = html;
        }

        document.getElementById('fm-build-table').addEventListener('click', buildRawTable);
        document.getElementById('fm-build-ranks').addEventListener('click', buildRanksTable);

        // Init tables
        buildRawTable();
        buildRanksTable();

        // Calculation
        const errorEl = document.getElementById('fm-error');
        const resultSection = document.getElementById('fm-result-section');
        const resultSummary = document.getElementById('fm-result-summary');
        const resultDetail = document.getElementById('fm-result-detail');
        const statQ = document.getElementById('fm-stat-q');
        const statDf = document.getElementById('fm-stat-df');
        const statP = document.getElementById('fm-stat-p');
        const statW = document.getElementById('fm-stat-w');
        const decisionEl = document.getElementById('fm-decision');
        const ranksSummaryWrapper = document.getElementById('fm-ranks-summary-wrapper');
        const ranksSummaryBody = document.getElementById('fm-ranks-summary-body');
        const rankTableWrapper = document.getElementById('fm-rank-table-wrapper');
        const rankTable = document.getElementById('fm-rank-table');

        function getMode() {
          const active = document.querySelector('.fm-mode-btn.bg-blue-600');
          return active ? active.getAttribute('data-fm-mode') : 'raw';
        }

        document.getElementById('fm-calc-btn').addEventListener('click', function () {
          errorEl.classList.add('hidden');
          errorEl.textContent = '';
          resultSection.classList.add('hidden');
          ranksSummaryWrapper.classList.add('hidden');
          rankTableWrapper.classList.add('hidden');
          ranksSummaryBody.innerHTML = '';
          rankTable.innerHTML = '';

          const alpha = Number(document.getElementById('fm-alpha').value) || 0.05;
          const mode = getMode();

          try {
            let n, k, rankSums = [], rankMeans = [], Q, df, p, W;
            let rankMatrix = null;

            if (mode === 'raw') {
              n = Math.max(3, Math.min(100, Number(document.getElementById('fm-blocks').value) || 5));
              k = Math.max(3, Math.min(10, Number(document.getElementById('fm-treatments').value) || 3));
              const rows = Array.from(rawTable.querySelectorAll('tbody tr'));
              if (rows.length !== n) {
                throw new Error('Please rebuild the table after changing n or k (Raw data).');
              }

              const data = [];
              for (let i = 0; i < n; i++) {
                const cells = Array.from(rows[i].querySelectorAll('td')).slice(1);
                if (cells.length !== k) {
                  throw new Error('Unexpected table structure. Click “Rebuild table” and try again.');
                }
                const rowVals = [];
                for (let j = 0; j < k; j++) {
                  const v = fmParseNumber(cells[j].querySelector('input').value);
                  if (v === null) {
                    throw new Error('All cells must contain numeric values in Raw data mode.');
                  }
                  rowVals.push(v);
                }
                data.push(rowVals);
              }

              // Rank each row
              rankMatrix = [];
              for (let i = 0; i < n; i++) {
                const ranks = fmRankRow(data[i]);
                rankMatrix.push(ranks);
              }

              // Rank sums
              rankSums = new Array(k).fill(0);
              for (let i = 0; i < n; i++) {
                for (let j = 0; j < k; j++) {
                  rankSums[j] += rankMatrix[i][j];
                }
              }

            } else {
              n = Math.max(3, Math.min(200, Number(document.getElementById('fm-blocks-ranks').value) || 10));
              k = Math.max(3, Math.min(10, Number(document.getElementById('fm-treatments-ranks').value) || 3));
              const bodyRows = Array.from(ranksTable.querySelectorAll('tbody tr'));
              if (!bodyRows.length) {
                throw new Error('Rank-sum table is empty. Click “Rebuild rank table”.');
              }
              const cells = Array.from(bodyRows[0].querySelectorAll('td')).slice(1);
              if (cells.length !== k) {
                throw new Error('Unexpected rank table structure. Click “Rebuild rank table” and try again.');
              }
              rankSums = [];
              for (let j = 0; j < k; j++) {
                const v = fmParseNumber(cells[j].querySelector('input').value);
                if (v === null) {
                  throw new Error('All rank sums must be numeric in Rank sums mode.');
                }
                rankSums.push(v);
              }
            }

            // Compute Friedman statistic
            let sumSq = 0;
            for (let j = 0; j < k; j++) {
              sumSq += rankSums[j] * rankSums[j];
            }
            Q = (12 / (n * k * (k + 1))) * sumSq - 3 * n * (k + 1);
            if (!Number.isFinite(Q)) {
              throw new Error('Unable to compute Friedman statistic. Please check your inputs.');
            }
            if (Q < 0) Q = 0;
            df = k - 1;
            const cdf = fmChiSquareCDF(Q, df);
            p = Math.max(0, Math.min(1, 1 - cdf));
            W = Q / (n * (k - 1));

            // Summary
            const Qdisp = Q.toFixed(4);
            const pdisp = p < 1e-6 ? '< 1e-6' : p.toFixed(6);
            const Wdisp = W < 0 ? '0.0000' : W > 1 ? '1.0000' : W.toFixed(4);

            resultSummary.innerHTML = 'Friedman test with n = <strong>' + n + '</strong> blocks and k = <strong>' + k +
              '</strong> treatments: Q = <strong>' + Qdisp + '</strong>, df = <strong>' + df +
              '</strong>, p-value = <strong>' + pdisp + '</strong>.';
            resultDetail.textContent = 'The statistic is based on within-block ranks and compared to a chi-square distribution with '
              + df + ' degrees of freedom. P-value is computed from the upper tail of this chi-square distribution.';

            statQ.innerHTML = '<strong>Q (Friedman)</strong> = ' + Qdisp;
            statDf.innerHTML = '<strong>df</strong> = ' + df;
            statP.innerHTML = '<strong>p-value</strong> = ' + pdisp;
            statW.innerHTML = '<strong>Kendall’s W</strong> = ' + Wdisp;

            const reject = p < alpha;
            if (reject) {
              decisionEl.innerHTML =
                'At significance level α = <strong>' + alpha.toFixed(2) +
                '</strong>, p &lt; α, so you <strong>reject the null hypothesis</strong> of equal treatment distributions. ' +
                'There is evidence that at least one treatment differs in central tendency.';
            } else {
              decisionEl.innerHTML =
                'At significance level α = <strong>' + alpha.toFixed(2) +
                '</strong>, p ≥ α, so you <strong>do not reject the null hypothesis</strong>. ' +
                'The data do not provide sufficient evidence of systematic differences between treatments.';
            }

            // Rank-sum summary
            ranksSummaryBody.innerHTML = '';
            for (let j = 0; j < k; j++) {
              const tr = document.createElement('tr');
              const tdName = document.createElement('td');
              const tdSum = document.createElement('td');
              const tdMean = document.createElement('td');
              tdName.textContent = 'T' + (j + 1);
              tdName.className = 'text-left';
              tdSum.textContent = rankSums[j].toFixed(4);
              const meanRank = rankSums[j] / n;
              tdMean.textContent = meanRank.toFixed(4);
              tr.appendChild(tdName);
              tr.appendChild(tdSum);
              tr.appendChild(tdMean);
              ranksSummaryBody.appendChild(tr);
            }
            ranksSummaryWrapper.classList.remove('hidden');

            // Rank matrix (raw mode only)
            if (mode === 'raw' && rankMatrix) {
              let html = '<thead><tr><th>Block</th>';
              for (let j = 1; j <= k; j++) {
                html += '<th>T' + j + '</th>';
              }
              html += '</tr></thead><tbody>';
              for (let i = 0; i < n; i++) {
                html += '<tr><td class="text-left">B' + (i + 1) + '</td>';
                for (let j = 0; j < k; j++) {
                  html += '<td>' + rankMatrix[i][j].toFixed(2) + '</td>';
                }
                html += '</tr>';
              }
              html += '</tbody>';
              rankTable.innerHTML = html;
              rankTableWrapper.classList.remove('hidden');
            }

            resultSection.classList.remove('hidden');
          } catch (err) {
            errorEl.textContent = err.message || 'Unable to compute Friedman test. Please check your inputs.';
            errorEl.classList.remove('hidden');
          }
        });

        document.getElementById('fm-clear-btn').addEventListener('click', function () {
          // Clear raw table
          rawTable.querySelectorAll('input').forEach(inp => inp.value = '');
          // Clear ranks table
          ranksTable.querySelectorAll('input').forEach(inp => inp.value = '');
          errorEl.classList.add('hidden');
          resultSection.classList.add('hidden');
          ranksSummaryWrapper.classList.add('hidden');
          rankTableWrapper.classList.add('hidden');
        });
      })();
    </script>

    <script>
      window.MathJax = {
        tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['$','$'], ['\\[','\\]']] },
        svg: { fontCache: 'global' }
      };
    </script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    


</body></html>
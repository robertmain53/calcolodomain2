<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/drug-dosage" />
    <title>Drug Dosage Calculator Guide [Proven 2024] | CalcDomain</title>
    <meta name="description" content="Calculate Drug Dosage Calculator Guide fast with our proven tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Drug Dosage Calculator Guide [Proven 2024] | CalcDomain" />
    <meta property="og:description" content="Calculate Drug Dosage Calculator Guide fast with our proven tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />
    <meta property="og:url" content="https://calcdomain.com/drug-dosage" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Drug Dosage Calculator Guide [Proven 2024] | CalcDomain" />
    <meta name="twitter:description" content="Calculate Drug Dosage Calculator Guide fast with our proven tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Health & Fitness Calculators", "item": "https://calcdomain.com/categories/health-fitness"}, {"@type": "ListItem", "position": 3, "name": "Health Metrics Calculators", "item": "https://calcdomain.com/subcategories/health-metrics"}, {"@type": "ListItem", "position": 4, "name": "Drug Dosage Calculator", "item": "https://calcdomain.com/drug-dosage"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/health-fitness" class="text-blue-600 hover:underline">Health &amp; Fitness Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/health-metrics" class="text-blue-600 hover:underline">Health Metrics Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Drug Dosage Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <div class="flex items-center justify-between gap-2 mb-2">
                <h1 class="text-2xl font-bold text-gray-900">
                  Drug Dosage Calculator
                </h1>
                <span
                  class="badge bg-red-100 text-red-700 border border-red-300 font-semibold"
                  >Educational use only</span
                >
              </div>
              <p class="text-gray-600 text-sm leading-relaxed">
                This tool helps you work through the math of common drug dosage
                calculations (mg/kg, mg/m², fixed dose, IV solutions). It does
                <strong>not</strong> replace clinical judgment, local protocols,
                or official prescribing information.
              </p>
            </header>

            <!-- Safety Notice -->
            <div class="mb-6 border-l-4 border-red-500 bg-red-50 p-4 rounded">
              <h2 class="font-semibold text-red-700 mb-1">
                Critical safety notice
              </h2>
              <ul class="list-disc ml-5 text-sm text-red-800 space-y-1">
                <li>
                  Always verify doses in an up-to-date, trusted drug reference.
                </li>
                <li>
                  Double-check patient identity, weight, units, and route.
                </li>
                <li>
                  High‑risk drugs (e.g., insulin, opioids, chemo, pediatric
                  meds) require independent double-checks.
                </li>
              </ul>
            </div>

            <!-- Calculator Tabs -->
            <section aria-label="Drug dosage calculator" class="mb-8">
              <div class="border-b border-gray-200 mb-4">
                <nav
                  class="-mb-px flex flex-wrap gap-2"
                  aria-label="Dosage modes"
                >
                  <button
                    type="button"
                    data-mode="weight"
                    class="mode-tab border-b-2 border-blue-600 text-blue-600 px-3 py-2 text-sm font-medium"
                  >
                    Weight-based (mg/kg)
                  </button>
                  <button
                    type="button"
                    data-mode="bsa"
                    class="mode-tab border-b-2 border-transparent text-gray-600 hover:text-blue-600 px-3 py-2 text-sm font-medium"
                  >
                    BSA-based (mg/m²)
                  </button>
                  <button
                    type="button"
                    data-mode="fixed"
                    class="mode-tab border-b-2 border-transparent text-gray-600 hover:text-blue-600 px-3 py-2 text-sm font-medium"
                  >
                    Fixed dose → volume/tablets
                  </button>
                  <button
                    type="button"
                    data-mode="iv"
                    class="mode-tab border-b-2 border-transparent text-gray-600 hover:text-blue-600 px-3 py-2 text-sm font-medium"
                  >
                    IV infusion rate
                  </button>
                </nav>
              </div>

              <!-- Shared patient & drug inputs -->
              <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                  <label
                    for="patient-weight"
                    class="block text-sm font-medium text-gray-700"
                    >Patient weight</label
                  >
                  <div class="mt-1 flex rounded-md shadow-sm">
                    <input
                      id="patient-weight"
                      type="number"
                      step="0.01"
                      min="0"
                      class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                      placeholder="e.g., 70"
                    />
                    <select
                      id="weight-unit"
                      class="border border-l-0 border-gray-300 bg-gray-50 rounded-r-md text-sm px-2"
                    >
                      <option value="kg">kg</option>
                      <option value="lb">lb</option>
                    </select>
                  </div>
                  <p class="text-xs text-gray-500 mt-1">
                    If weight is not needed for the chosen mode, it will be
                    ignored.
                  </p>
                </div>
                <div>
                  <label
                    for="patient-height"
                    class="block text-sm font-medium text-gray-700"
                    >Height (for BSA, optional)</label
                  >
                  <div class="mt-1 flex rounded-md shadow-sm">
                    <input
                      id="patient-height"
                      type="number"
                      step="0.1"
                      min="0"
                      class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                      placeholder="e.g., 170"
                    />
                    <select
                      id="height-unit"
                      class="border border-l-0 border-gray-300 bg-gray-50 rounded-r-md text-sm px-2"
                    >
                      <option value="cm">cm</option>
                      <option value="in">in</option>
                    </select>
                  </div>
                  <p class="text-xs text-gray-500 mt-1">
                    If height is missing, BSA mode cannot be used.
                  </p>
                </div>
              </div>

              <!-- Mode-specific panels -->
              <div id="mode-weight" class="mode-panel space-y-4">
                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="dose-mgkg"
                      class="block text-sm font-medium text-gray-700"
                      >Prescribed dose</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        id="dose-mgkg"
                        type="number"
                        step="0.01"
                        min="0"
                        class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g., 7.5"
                      />
                      <span
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-xs text-gray-500"
                        >mg/kg</span
                      >
                    </div>
                  </div>
                  <div>
                    <label
                      for="max-dose-mg"
                      class="block text-sm font-medium text-gray-700"
                      >Maximum per dose (optional)</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        id="max-dose-mg"
                        type="number"
                        step="0.1"
                        min="0"
                        class="flex-1 block w-full rounded-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g., 500"
                      />
                    </div>
                    <p class="text-xs text-gray-500 mt-1">
                      If set, the calculator will warn if the calculated dose
                      exceeds this value (mg).
                    </p>
                  </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="stock-conc"
                      class="block text-sm font-medium text-gray-700"
                      >Drug concentration</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        id="stock-conc"
                        type="number"
                        step="0.01"
                        min="0"
                        class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g., 40"
                      />
                      <select
                        id="stock-unit"
                        class="border border-l-0 border-gray-300 bg-gray-50 text-sm px-2"
                      >
                        <option value="mgml">mg/mL</option>
                        <option value="mgtab">mg/tablet</option>
                      </select>
                    </div>
                  </div>
                  <div>
                    <label
                      for="frequency"
                      class="block text-sm font-medium text-gray-700"
                      >Frequency (optional)</label
                    >
                    <select
                      id="frequency"
                      class="mt-1 block w-full rounded-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                    >
                      <option value="">-- per day --</option>
                      <option value="1">Once daily</option>
                      <option value="2">Every 12 hours (2×/day)</option>
                      <option value="3">Every 8 hours (3×/day)</option>
                      <option value="4">Every 6 hours (4×/day)</option>
                      <option value="6">Every 4 hours (6×/day)</option>
                    </select>
                    <p class="text-xs text-gray-500 mt-1">
                      Used to estimate total daily dose.
                    </p>
                  </div>
                </div>
              </div>

              <div id="mode-bsa" class="mode-panel space-y-4 hidden">
                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="dose-mgm2"
                      class="block text-sm font-medium text-gray-700"
                      >Prescribed dose</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        id="dose-mgm2"
                        type="number"
                        step="0.1"
                        min="0"
                        class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g., 75"
                      />
                      <span
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-xs text-gray-500"
                        >mg/m²</span
                      >
                    </div>
                  </div>
                  <div>
                    <label
                      for="bsa-max-dose-mg"
                      class="block text-sm font-medium text-gray-700"
                      >Maximum per dose (optional)</label
                    >
                    <input
                      id="bsa-max-dose-mg"
                      type="number"
                      step="0.1"
                      min="0"
                      class="mt-1 block w-full rounded-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                      placeholder="e.g., 150"
                    />
                  </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="bsa-stock-conc"
                      class="block text-sm font-medium text-gray-700"
                      >Drug concentration</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        id="bsa-stock-conc"
                        type="number"
                        step="0.01"
                        min="0"
                        class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g., 10"
                      />
                      <select
                        id="bsa-stock-unit"
                        class="border border-l-0 border-gray-300 bg-gray-50 text-sm px-2"
                      >
                        <option value="mgml">mg/mL</option>
                        <option value="mgtab">mg/tablet</option>
                      </select>
                    </div>
                  </div>
                  <div>
                    <p class="text-xs text-gray-600 mt-6">
                      BSA is calculated using the Mosteller formula:
                      <span class="font-mono"
                        >BSA (m²) = √[(height(cm) × weight(kg)) / 3600]</span
                      >.
                    </p>
                  </div>
                </div>
              </div>

              <div id="mode-fixed" class="mode-panel space-y-4 hidden">
                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="fixed-dose-mg"
                      class="block text-sm font-medium text-gray-700"
                      >Required dose</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        id="fixed-dose-mg"
                        type="number"
                        step="0.1"
                        min="0"
                        class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g., 500"
                      />
                      <span
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-xs text-gray-500"
                        >mg</span
                      >
                    </div>
                  </div>
                  <div>
                    <label
                      for="fixed-stock-conc"
                      class="block text-sm font-medium text-gray-700"
                      >Drug concentration</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        id="fixed-stock-conc"
                        type="number"
                        step="0.01"
                        min="0"
                        class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g., 250"
                      />
                      <select
                        id="fixed-stock-unit"
                        class="border border-l-0 border-gray-300 bg-gray-50 text-sm px-2"
                      >
                        <option value="mgml">mg/mL</option>
                        <option value="mgtab">mg/tablet</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <div id="mode-iv" class="mode-panel space-y-4 hidden">
                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="iv-dose-mg"
                      class="block text-sm font-medium text-gray-700"
                      >Required dose</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        id="iv-dose-mg"
                        type="number"
                        step="0.1"
                        min="0"
                        class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g., 500"
                      />
                      <span
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-xs text-gray-500"
                        >mg</span
                      >
                    </div>
                  </div>
                  <div>
                    <label
                      for="iv-volume-ml"
                      class="block text-sm font-medium text-gray-700"
                      >Dilution volume</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        id="iv-volume-ml"
                        type="number"
                        step="0.1"
                        min="0"
                        class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g., 100"
                      />
                      <span
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-xs text-gray-500"
                        >mL</span
                      >
                    </div>
                  </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="iv-time"
                      class="block text-sm font-medium text-gray-700"
                      >Infusion time</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        id="iv-time"
                        type="number"
                        step="0.1"
                        min="0"
                        class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g., 30"
                      />
                      <select
                        id="iv-time-unit"
                        class="border border-l-0 border-gray-300 bg-gray-50 text-sm px-2"
                      >
                        <option value="min">minutes</option>
                        <option value="hr">hours</option>
                      </select>
                    </div>
                  </div>
                  <div>
                    <label
                      for="iv-drop-factor"
                      class="block text-sm font-medium text-gray-700"
                      >Drop factor (optional)</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        id="iv-drop-factor"
                        type="number"
                        step="0.1"
                        min="0"
                        class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g., 20"
                      />
                      <span
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-xs text-gray-500"
                        >gtt/mL</span
                      >
                    </div>
                    <p class="text-xs text-gray-500 mt-1">
                      If provided, the calculator will estimate drops per
                      minute.
                    </p>
                  </div>
                </div>
              </div>

              <div class="mt-6 flex flex-wrap gap-3 items-center">
                <button
                  id="calculate-btn"
                  type="button"
                  class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-semibold rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                >
                  Calculate dose
                </button>
                <button
                  id="reset-btn"
                  type="button"
                  class="inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
                >
                  Reset
                </button>
                <p id="calc-error" class="text-sm text-red-600"></p>
              </div>

              <!-- Results -->
              <div id="results-container" class="mt-6 hidden">
                <h2 class="text-lg font-semibold text-gray-900 mb-2">
                  Results
                </h2>
                <div
                  id="results-summary"
                  class="text-sm text-gray-800 mb-3"
                ></div>
                <div
                  id="results-detail"
                  class="text-xs text-gray-700 bg-gray-50 border border-gray-200 rounded-md p-3 font-mono whitespace-pre-wrap"
                ></div>
                <p
                  id="results-warning"
                  class="mt-3 text-sm text-red-700 font-medium hidden"
                ></p>
              </div>
            </section>

            <section class="prose">
              <h2>How this drug dosage calculator works</h2>
              <p>
                This calculator focuses on the <strong>math</strong> of drug
                dosing. You choose a mode (weight-based, BSA-based, fixed dose,
                or IV infusion), enter the patient and drug information, and the
                tool shows:
              </p>
              <ul>
                <li>the calculated dose in <strong>mg</strong>,</li>
                <li>
                  the corresponding <strong>volume (mL)</strong> or
                  <strong>number of tablets</strong>, and
                </li>
                <li>step-by-step calculations so you can verify each step.</li>
              </ul>
              <p>
                You must still confirm that the dose is appropriate for the
                specific drug, indication, route, and patient population using a
                trusted reference (e.g., local guidelines, formulary, or product
                information).
              </p>

              <h2>Core dosage formulas</h2>

              <h3>1. Weight-based dosing (mg/kg)</h3>
              <div class="formula-box">
                <p><strong>Total dose (mg)</strong></p>
                <p>
                  \[ \text{Dose}_{mg} = \text{Dose}_{mg/kg} \times
                  \text{Weight}_{kg} \]
                </p>
                <p><strong>Volume (mL) from stock solution</strong></p>
                <p>
                  \[ \text{Volume}_{mL} =
                  \frac{\text{Dose}_{mg}}{\text{Concentration}_{mg/mL}} \]
                </p>
                <p><strong>Tablets</strong></p>
                <p>
                  \[ \text{Tablets} =
                  \frac{\text{Dose}_{mg}}{\text{Strength}_{mg/tablet}} \]
                </p>
              </div>

              <h3>2. BSA-based dosing (mg/m²)</h3>
              <p>
                Body surface area (BSA) is often used for chemotherapy and some
                pediatric drugs.
              </p>
              <div class="formula-box">
                <p><strong>Mosteller BSA formula</strong></p>
                <p>
                  \[ \text{BSA} (m^2) = \sqrt{\frac{\text{Height}_{cm} \times
                  \text{Weight}_{kg}}{3600}} \]
                </p>
                <p><strong>Total dose (mg)</strong></p>
                <p>
                  \[ \text{Dose}_{mg} = \text{Dose}_{mg/m^2} \times
                  \text{BSA}_{m^2} \]
                </p>
              </div>

              <h3>3. Fixed dose from stock solution</h3>
              <div class="formula-box">
                <p><strong>General formula</strong></p>
                <p>
                  \[ \text{Volume to give} = \frac{\text{Required
                  dose}}{\text{Stock dose}} \times \text{Stock volume} \]
                </p>
                <p>For example, if 100 mg is in 2 mL and you need 50 mg:</p>
                <p>
                  \[ \text{Volume} = \frac{50}{100} \times 2 = 1 \text{ mL} \]
                </p>
              </div>

              <h3>4. IV infusion rate</h3>
              <div class="formula-box">
                <p><strong>Rate in mL/hour</strong></p>
                <p>
                  \[ \text{Rate}_{mL/hr} = \frac{\text{Total
                  volume}_{mL}}{\text{Time}_{hr}} \]
                </p>
                <p><strong>Rate in drops per minute (gtt/min)</strong></p>
                <p>
                  \[ \text{Rate}_{gtt/min} = \frac{\text{Volume}_{mL} \times
                  \text{Drop factor}_{gtt/mL}}{\text{Time}_{min}} \]
                </p>
              </div>

              <h2>Worked examples</h2>

              <h3>Example 1 – Pediatric weight-based oral dose</h3>
              <p>
                <strong>Scenario:</strong> A child weighs 18 kg. The prescribed
                dose is 7 mg/kg per dose, using a suspension of 40 mg/mL.
              </p>
              <ol>
                <li>
                  Calculate total mg:
                  <div class="formula-box">
                    \[ \text{Dose}_{mg} = 7 \times 18 = 126 \text{ mg} \]
                  </div>
                </li>
                <li>
                  Convert to mL:
                  <div class="formula-box">
                    \[ \text{Volume}_{mL} = \frac{126}{40} = 3.15 \text{ mL} \]
                  </div>
                </li>
                <li>
                  Round according to local policy (e.g., 3.1 mL or 3.2 mL).
                </li>
              </ol>

              <h3>Example 2 – BSA-based chemotherapy dose</h3>
              <p>
                <strong>Scenario:</strong> Adult patient, 65 kg, 170 cm. Drug
                dose is 75 mg/m² IV.
              </p>
              <ol>
                <li>
                  Calculate BSA:
                  <div class="formula-box">
                    \[ \text{BSA} = \sqrt{\frac{170 \times 65}{3600}} \approx
                    \sqrt{3.069} \approx 1.75 \text{ m}^2 \]
                  </div>
                </li>
                <li>
                  Calculate dose:
                  <div class="formula-box">
                    \[ \text{Dose}_{mg} = 75 \times 1.75 \approx 131.25 \text{
                    mg} \]
                  </div>
                </li>
                <li>Round and adjust according to protocol and vial sizes.</li>
              </ol>

              <h3>Example 3 – IV infusion rate</h3>
              <p>
                <strong>Scenario:</strong> 500 mg of a drug is diluted in 100 mL
                and must infuse over 30 minutes. The IV set has a drop factor of
                20 gtt/mL.
              </p>
              <ol>
                <li>
                  Rate in mL/hour:
                  <div class="formula-box">
                    \[ \text{Time}_{hr} = 30 / 60 = 0.5 \text{ hr} \] \[
                    \text{Rate}_{mL/hr} = \frac{100}{0.5} = 200 \text{ mL/hr} \]
                  </div>
                </li>
                <li>
                  Rate in gtt/min:
                  <div class="formula-box">
                    \[ \text{Rate}_{gtt/min} = \frac{100 \times 20}{30} \approx
                    66.7 \text{ gtt/min} \]
                  </div>
                </li>
                <li>Round to a practical value (e.g., 67 gtt/min).</li>
              </ol>

              <h2>Common sources of drug dosage errors</h2>
              <ul>
                <li>
                  <strong>Unit mix-ups</strong> – confusing mg with mcg, mL with
                  L, or kg with lb.
                </li>
                <li>
                  <strong>Wrong weight</strong> – using an estimated or outdated
                  weight, or failing to convert lb to kg.
                </li>
                <li>
                  <strong>Decimal errors</strong> – misplaced decimal points
                  (e.g., 0.5 mg vs 5 mg).
                </li>
                <li>
                  <strong>Route confusion</strong> – using an IV dose for an
                  oral route or vice versa.
                </li>
                <li>
                  <strong>Ignoring max dose</strong> – exceeding recommended
                  per-dose or per-day limits.
                </li>
              </ul>

              <h2>Best practices for safe dosing</h2>
              <ul>
                <li>
                  Use <strong>standardized weight units</strong> (kg) and
                  document clearly.
                </li>
                <li>
                  Use <strong>leading zeros</strong> (0.5 mg) and avoid trailing
                  zeros (5.0 mg).
                </li>
                <li>
                  Confirm
                  <strong>indication, route, and frequency</strong> before
                  calculating.
                </li>
                <li>
                  For high‑risk drugs and pediatric doses, obtain an
                  <strong>independent double-check</strong>.
                </li>
                <li>
                  Document the <strong>calculation steps</strong> when required
                  by policy.
                </li>
              </ul>

              <h2>Disclaimer</h2>
              <p>
                This calculator is provided for educational and training
                purposes only. It does not provide medical advice, diagnosis, or
                treatment. Always consult a licensed prescriber and
                authoritative drug references before administering any
                medication.
              </p>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Clinical notes</h2><p class="text-sm text-gray-700">Use consistent units (kg, cm, mg/dL) and flag inputs outside physiological ranges. Always interpret the result alongside clinical history and context.</p><p class="text-sm text-gray-700 mt-2">Key entities: Drug, Dosage.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, rounding to 2-3 decimals.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Clinical notes</h2><p class="text-sm text-gray-700">Use consistent units (kg, cm, mg/dL) and flag inputs outside physiological ranges. Always interpret the result alongside clinical history and context.</p><p class="text-sm text-gray-700 mt-2">Key entities: Drug, Dosage.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, rounding to 2-3 decimals.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              More Health Metrics Tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-blue-600 hover:underline"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/heart-rate-calculator"
                  class="text-blue-600 hover:underline"
                  >Heart Rate Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/target-heart-rate"
                  class="text-blue-600 hover:underline"
                  >Target Heart Rate</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/body-fat"
                  class="text-blue-600 hover:underline"
                  >Body Fat Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/ideal-weight"
                  class="text-blue-600 hover:underline"
                  >Ideal Weight</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/drug-half-life"
                  class="text-blue-600 hover:underline"
                  >Drug Half-Life Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/infusion-rate"
                  class="text-blue-600 hover:underline"
                  >Infusion Rate Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/iv-drip-rate"
                  class="text-blue-600 hover:underline"
                  >IV Drip Rate</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pediatric-dosage"
                  class="text-blue-600 hover:underline"
                  >Pediatric Dosage (by weight)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bsa"
                  class="text-blue-600 hover:underline"
                  >Body Surface Area (BSA)</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Quick tips</h2>
            <ul class="list-disc ml-5 text-sm text-gray-700 space-y-1">
              <li>Always convert weight to kilograms before using mg/kg.</li>
              <li>Check if the dose is per dose or per day.</li>
              <li>
                Verify renal and hepatic function for renally/hepatically
                cleared drugs.
              </li>
              <li>
                Use institutional protocols for rounding and maximum doses.
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Tab switching
      const modeTabs = document.querySelectorAll(".mode-tab");
      const modePanels = document.querySelectorAll(".mode-panel");
      let currentMode = "weight";

      modeTabs.forEach((tab) => {
        tab.addEventListener("click", () => {
          const mode = tab.getAttribute("data-mode");
          currentMode = mode;
          modeTabs.forEach((t) => {
            t.classList.remove("border-blue-600", "text-blue-600");
            t.classList.add("border-transparent", "text-gray-600");
          });
          tab.classList.add("border-blue-600", "text-blue-600");
          tab.classList.remove("border-transparent", "text-gray-600");
          modePanels.forEach((panel) => {
            panel.classList.toggle("hidden", panel.id !== "mode-" + mode);
          });
          document.getElementById("results-container").classList.add("hidden");
          document.getElementById("calc-error").textContent = "";
        });
      });

      function toNumber(id) {
        const v = document.getElementById(id)?.value;
        if (v === undefined || v === null || v === "") return NaN;
        return Number(v);
      }

      function round(value, decimals) {
        if (!isFinite(value)) return value;
        const factor = Math.pow(10, decimals);
        return Math.round(value * factor) / factor;
      }

      function getWeightKg() {
        const w = toNumber("patient-weight");
        if (!isFinite(w) || w <= 0) return NaN;
        const unit = document.getElementById("weight-unit").value;
        return unit === "lb" ? w / 2.20462 : w;
      }

      function getHeightCm() {
        const h = toNumber("patient-height");
        if (!isFinite(h) || h <= 0) return NaN;
        const unit = document.getElementById("height-unit").value;
        return unit === "in" ? h * 2.54 : h;
      }

      function formatTablets(tablets) {
        const whole = Math.floor(tablets);
        const frac = tablets - whole;
        const fractions = [
          { value: 0, label: "" },
          { value: 0.25, label: "¼" },
          { value: 0.33, label: "⅓" },
          { value: 0.5, label: "½" },
          { value: 0.66, label: "⅔" },
          { value: 0.75, label: "¾" },
        ];
        let best = fractions[0];
        let minDiff = Infinity;
        fractions.forEach((f) => {
          const diff = Math.abs(frac - f.value);
          if (diff < minDiff) {
            minDiff = diff;
            best = f;
          }
        });
        const approx = whole + best.value;
        if (approx === 0) return "0 tablets";
        const parts = [];
        if (whole > 0) parts.push(String(whole));
        if (best.label) parts.push(best.label);
        return parts.join(" ") + " tablets (≈ " + round(tablets, 2) + ")";
      }

      document.getElementById("calculate-btn").addEventListener("click", () => {
        const errorEl = document.getElementById("calc-error");
        const resultsContainer = document.getElementById("results-container");
        const summaryEl = document.getElementById("results-summary");
        const detailEl = document.getElementById("results-detail");
        const warningEl = document.getElementById("results-warning");
        errorEl.textContent = "";
        warningEl.textContent = "";
        warningEl.classList.add("hidden");

        let summary = "";
        let detail = "";
        let warning = "";

        try {
          if (currentMode === "weight") {
            const weightKg = getWeightKg();
            const doseMgKg = toNumber("dose-mgkg");
            const maxDose = toNumber("max-dose-mg");
            const conc = toNumber("stock-conc");
            const stockUnit = document.getElementById("stock-unit").value;
            const freq = document.getElementById("frequency").value;

            if (!isFinite(weightKg))
              throw new Error("Enter a valid patient weight.");
            if (!isFinite(doseMgKg) || doseMgKg <= 0)
              throw new Error("Enter a valid prescribed dose in mg/kg.");
            if (!isFinite(conc) || conc <= 0)
              throw new Error("Enter a valid drug concentration.");

            const doseMg = weightKg * doseMgKg;
            let volumeMl = NaN;
            let tablets = NaN;

            if (stockUnit === "mgml") {
              volumeMl = doseMg / conc;
            } else {
              tablets = doseMg / conc;
            }

            let dailyDose = NaN;
            if (freq) {
              dailyDose = doseMg * Number(freq);
            }

            summary += `Weight-based dose: ${round(doseMg, 2)} mg`;
            if (stockUnit === "mgml") {
              summary += ` (${round(volumeMl, 2)} mL)`;
            } else {
              summary += ` (${round(tablets, 2)} tablets)`;
            }
            if (freq && isFinite(dailyDose)) {
              summary += `, total per day ≈ ${round(dailyDose, 2)} mg`;
            }

            detail += `Mode: Weight-based (mg/kg)\n`;
            detail += `Weight: ${round(weightKg, 3)} kg\n`;
            detail += `Prescribed dose: ${doseMgKg} mg/kg\n`;
            detail += `Total dose: ${doseMgKg} × ${round(
              weightKg,
              3
            )} = ${round(doseMg, 3)} mg\n\n`;

            if (stockUnit === "mgml") {
              detail += `Concentration: ${conc} mg/mL\n`;
              detail += `Volume: dose / concentration = ${round(
                doseMg,
                3
              )} / ${conc} = ${round(volumeMl, 3)} mL\n`;
            } else {
              detail += `Tablet strength: ${conc} mg/tablet\n`;
              detail += `Tablets: dose / strength = ${round(
                doseMg,
                3
              )} / ${conc} = ${round(tablets, 3)} tablets\n`;
              detail += `Approximate tablets: ${formatTablets(tablets)}\n`;
            }

            if (freq && isFinite(dailyDose)) {
              detail += `\nFrequency: ${freq}× per day\n`;
              detail += `Total daily dose: ${round(dailyDose, 3)} mg/day\n`;
            }

            if (isFinite(maxDose) && maxDose > 0 && doseMg > maxDose) {
              warning = `Calculated dose (${round(
                doseMg,
                2
              )} mg) exceeds the specified maximum per dose (${maxDose} mg). Check the order and reference dosing guidelines.`;
            }
          } else if (currentMode === "bsa") {
            const weightKg = getWeightKg();
            const heightCm = getHeightCm();
            const doseMgM2 = toNumber("dose-mgm2");
            const maxDose = toNumber("bsa-max-dose-mg");
            const conc = toNumber("bsa-stock-conc");
            const stockUnit = document.getElementById("bsa-stock-unit").value;

            if (!isFinite(weightKg))
              throw new Error("Enter a valid patient weight for BSA mode.");
            if (!isFinite(heightCm))
              throw new Error("Enter a valid patient height for BSA mode.");
            if (!isFinite(doseMgM2) || doseMgM2 <= 0)
              throw new Error("Enter a valid prescribed dose in mg/m².");
            if (!isFinite(conc) || conc <= 0)
              throw new Error("Enter a valid drug concentration.");

            const bsa = Math.sqrt((heightCm * weightKg) / 3600);
            const doseMg = bsa * doseMgM2;
            let volumeMl = NaN;
            let tablets = NaN;

            if (stockUnit === "mgml") {
              volumeMl = doseMg / conc;
            } else {
              tablets = doseMg / conc;
            }

            summary += `BSA-based dose: ${round(doseMg, 2)} mg (BSA ≈ ${round(
              bsa,
              2
            )} m²)`;
            if (stockUnit === "mgml") {
              summary += ` → ${round(volumeMl, 2)} mL`;
            } else {
              summary += ` → ${round(tablets, 2)} tablets`;
            }

            detail += `Mode: BSA-based (mg/m²)\n`;
            detail += `Weight: ${round(weightKg, 3)} kg, Height: ${round(
              heightCm,
              1
            )} cm\n`;
            detail += `BSA (Mosteller): sqrt((${round(heightCm, 1)} × ${round(
              weightKg,
              3
            )}) / 3600) = ${round(bsa, 4)} m²\n`;
            detail += `Prescribed dose: ${doseMgM2} mg/m²\n`;
            detail += `Total dose: ${doseMgM2} × ${round(bsa, 4)} = ${round(
              doseMg,
              3
            )} mg\n\n`;

            if (stockUnit === "mgml") {
              detail += `Concentration: ${conc} mg/mL\n`;
              detail += `Volume: ${round(doseMg, 3)} / ${conc} = ${round(
                volumeMl,
                3
              )} mL\n`;
            } else {
              detail += `Tablet strength: ${conc} mg/tablet\n`;
              detail += `Tablets: ${round(doseMg, 3)} / ${conc} = ${round(
                tablets,
                3
              )} tablets\n`;
              detail += `Approximate tablets: ${formatTablets(tablets)}\n`;
            }

            if (isFinite(maxDose) && maxDose > 0 && doseMg > maxDose) {
              warning = `Calculated dose (${round(
                doseMg,
                2
              )} mg) exceeds the specified maximum per dose (${maxDose} mg). Check protocol and reference dosing guidelines.`;
            }
          } else if (currentMode === "fixed") {
            const doseMg = toNumber("fixed-dose-mg");
            const conc = toNumber("fixed-stock-conc");
            const stockUnit = document.getElementById("fixed-stock-unit").value;

            if (!isFinite(doseMg) || doseMg <= 0)
              throw new Error("Enter a valid required dose in mg.");
            if (!isFinite(conc) || conc <= 0)
              throw new Error("Enter a valid drug concentration.");

            let volumeMl = NaN;
            let tablets = NaN;

            if (stockUnit === "mgml") {
              volumeMl = doseMg / conc;
              summary += `Required dose: ${round(doseMg, 2)} mg → ${round(
                volumeMl,
                2
              )} mL`;
              detail += `Mode: Fixed dose\n`;
              detail += `Required dose: ${doseMg} mg\n`;
              detail += `Concentration: ${conc} mg/mL\n`;
              detail += `Volume: dose / concentration = ${doseMg} / ${conc} = ${round(
                volumeMl,
                3
              )} mL\n`;
            } else {
              tablets = doseMg / conc;
              summary += `Required dose: ${round(doseMg, 2)} mg → ${round(
                tablets,
                2
              )} tablets`;
              detail += `Mode: Fixed dose\n`;
              detail += `Required dose: ${doseMg} mg\n`;
              detail += `Tablet strength: ${conc} mg/tablet\n`;
              detail += `Tablets: dose / strength = ${doseMg} / ${conc} = ${round(
                tablets,
                3
              )} tablets\n`;
              detail += `Approximate tablets: ${formatTablets(tablets)}\n`;
            }
          } else if (currentMode === "iv") {
            const doseMg = toNumber("iv-dose-mg");
            const volumeMl = toNumber("iv-volume-ml");
            const timeVal = toNumber("iv-time");
            const timeUnit = document.getElementById("iv-time-unit").value;
            const dropFactor = toNumber("iv-drop-factor");

            if (!isFinite(doseMg) || doseMg <= 0)
              throw new Error("Enter a valid required dose in mg.");
            if (!isFinite(volumeMl) || volumeMl <= 0)
              throw new Error("Enter a valid dilution volume in mL.");
            if (!isFinite(timeVal) || timeVal <= 0)
              throw new Error("Enter a valid infusion time.");

            const timeHr = timeUnit === "min" ? timeVal / 60 : timeVal;
            const timeMin = timeUnit === "min" ? timeVal : timeVal * 60;
            const rateMlHr = volumeMl / timeHr;
            let rateGttMin = NaN;

            if (isFinite(dropFactor) && dropFactor > 0) {
              rateGttMin = (volumeMl * dropFactor) / timeMin;
            }

            summary += `IV rate: ${round(rateMlHr, 1)} mL/hour`;
            if (isFinite(rateGttMin)) {
              summary += ` (${round(rateGttMin, 1)} gtt/min)`;
            }

            detail += `Mode: IV infusion\n`;
            detail += `Dose: ${doseMg} mg in ${volumeMl} mL\n`;
            detail += `Time: ${timeVal} ${timeUnit}\n`;
            detail += `Rate (mL/hr): volume / time_hr = ${volumeMl} / ${round(
              timeHr,
              3
            )} = ${round(rateMlHr, 3)} mL/hr\n`;
            if (isFinite(rateGttMin)) {
              detail += `Drop factor: ${dropFactor} gtt/mL\n`;
              detail += `Rate (gtt/min): (volume × drop factor) / time_min = (${volumeMl} × ${dropFactor}) / ${round(
                timeMin,
                3
              )} = ${round(rateGttMin, 3)} gtt/min\n`;
            }
          }

          summaryEl.textContent = summary;
          detailEl.textContent = detail;
          if (warning) {
            warningEl.textContent = warning;
            warningEl.classList.remove("hidden");
          }
          resultsContainer.classList.remove("hidden");
        } catch (e) {
          errorEl.textContent =
            e.message || "Unable to calculate dose. Check your inputs.";
          resultsContainer.classList.add("hidden");
        }
      });

      document.getElementById("reset-btn").addEventListener("click", () => {
        document.querySelectorAll("input").forEach((inp) => (inp.value = ""));
        document.getElementById("frequency").value = "";
        document.getElementById("calc-error").textContent = "";
        document.getElementById("results-container").classList.add("hidden");
        document.getElementById("results-warning").classList.add("hidden");
      });

      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Bayes' Theorem Calculator – Conditional Probability &amp; Diagnostic Tests</title>
    <meta name="description" content="Interactive Bayes' theorem calculator. Compute conditional probabilities from P(A), P(B|A), P(B|¬A) or explore diagnostic test scenarios with prevalence, sensitivity and specificity, plus step-by-step explanations.">
    <link rel="canonical" href="https://calcdomain.com/bayes-theorem">

    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .card-hover { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .prose { max-width: 65ch; margin-left: auto; margin-right: auto; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .formula-box { background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 8px; padding: 1rem; overflow-x: auto; margin: 1rem 0; }
        code { background: #f3f4f6; padding: 0.15rem 0.35rem; border-radius: 0.25rem; font-size: 0.85em; }
        .tab-btn { border-bottom-width: 2px; border-color: transparent; }
        .tab-btn-active { border-color: rgb(37 99 235); color: rgb(37 99 235); }
        .pill { border-radius: 9999px; }
        .input-sm { font-size: 0.875rem; }
        .table-mini th, .table-mini td { border: 1px solid #e5e7eb; padding: 0.25rem 0.5rem; font-size: 0.75rem; text-align: right; }
        .table-mini th:first-child, .table-mini td:first-child { text-align: left; }
    </style>

    <!-- HEAD SCRIPTS & META (replacement for %%HEAD_SCRIPTS_E_META%%) -->
    <!-- Google tag (gtag.js) -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7MB5V1LZRN');
    </script>

    <meta name="google-site-verification" content="_tiTZ9ivAdtXcAS9CMnTNJ549Sg39WVqP_ZFbWgglNA">

    <script src="https://cmp.gatekeeperconsent.com/min.js" data-cfasync="false"></script>
    <script src="https://the.gatekeeperconsent.com/cmp.min.js" data-cfasync="false"></script>

    <script async="" src="//www.ezojs.com/ezoic/sa.min.js"></script>
    <script>
        window.ezstandalone = window.ezstandalone || {};
        ezstandalone.cmd = ezstandalone.cmd || [];
    </script>

    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebPage",
      "@id": "https://calcdomain.com/bayes-theorem",
      "url": "https://calcdomain.com/bayes-theorem",
      "name": "Bayes' Theorem Calculator – Conditional Probability & Diagnostic Tests",
      "description": "Interactive Bayes' theorem calculator. Compute conditional probabilities from P(A), P(B|A), P(B|¬A) or explore diagnostic test scenarios with prevalence, sensitivity and specificity, plus step-by-step explanations.",
      "inLanguage": "en"
    },
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://calcdomain.com/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Math & Conversions",
          "item": "https://calcdomain.com/math-conversions"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Core Math & Algebra",
          "item": "https://calcdomain.com/math-conversions/core-math-algebra"
        },
        {
          "@type": "ListItem",
          "position": 4,
          "name": "Bayes' Theorem Calculator",
          "item": "https://calcdomain.com/bayes-theorem"
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What does this Bayes' theorem calculator do?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "This calculator applies Bayes' theorem to compute conditional probabilities such as P(A|B) from inputs like P(A), P(B|A), and P(B|¬A). It also includes a diagnostic test mode where you can enter disease prevalence, test sensitivity, and specificity to obtain posterior probabilities such as P(disease|positive test), with an intuitive frequency table."
          }
        },
        {
          "@type": "Question",
          "name": "Can I enter percentages instead of probabilities?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. You can enter either probabilities between 0 and 1 (for example 0.2) or percentages between 0 and 100 (for example 20 or 20%). The calculator automatically interprets values above 1 as percentages and converts them to probabilities by dividing by 100."
          }
        },
        {
          "@type": "Question",
          "name": "How is Bayes' theorem used for medical or diagnostic tests?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "For diagnostic tests, Bayes' theorem combines the prevalence of a condition with test sensitivity and specificity to give the probability that a person actually has the condition given a positive or negative test result. This updates the pre-test probability (prevalence or individual risk) into a post-test probability that is more relevant for decision making."
          }
        },
        {
          "@type": "Question",
          "name": "Is this calculator suitable for critical risk or clinical decisions?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The calculator is designed for education, intuition building, and quick checks. For clinical, financial, or safety-critical decisions, you should confirm the calculations with professional statistical software, consult domain guidelines, and involve qualified experts."
          }
        }
      ]
    },
    {
      "@type": "HowTo",
      "name": "How to use the Bayes' Theorem Calculator",
      "description": "Step-by-step instructions for using Bayes' theorem to compute conditional probabilities and interpret diagnostic tests.",
      "step": [
        {
          "@type": "HowToStep",
          "position": 1,
          "name": "Select a mode",
          "text": "Choose the General probability mode if you are working with abstract events A and B, or Diagnostic test mode if you are analysing a medical test, fraud detection system, or classifier with sensitivity and specificity."
        },
        {
          "@type": "HowToStep",
          "position": 2,
          "name": "Enter input probabilities",
          "text": "In general mode, enter P(A), P(B|A), and P(B|¬A) as probabilities or percentages. In diagnostic test mode, enter prevalence, sensitivity, and specificity, again either as probabilities or percentages."
        },
        {
          "@type": "HowToStep",
          "position": 3,
          "name": "Run the calculation",
          "text": "Click the Calculate button. The tool computes derived probabilities including P(A|B), P(B), complement probabilities, and in diagnostic mode a 2×2 frequency table for a notional population."
        },
        {
          "@type": "HowToStep",
          "position": 4,
          "name": "Interpret the results",
          "text": "Use the step-by-step breakdown and the frequency table to understand how priors, likelihoods, and evidence combine. For important decisions, compare the results with textbook formulas or a vetted statistical package."
        }
      ],
      "inLanguage": "en"
    }
  ]
}
    </script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
.auditspine-badge{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  border:1px solid #e5e7eb;
  background:#f8fafc;
  color:#0f172a;
}
.auditspine-badge-warn{
  background:#fff7ed;
  border-color:#fed7aa;
  color:#9a3412;
}
</style>
</head>

<body class="bg-gray-50 text-gray-800">

    <!-- BODY SCRIPTS (replacement for %%BODY_SCRIPTS_INIZIO%%) -->
    <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939" crossorigin="anonymous"></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a href="https://calcdomain.com" class="text-2xl font-bold text-blue-600">CalcDomain</a>
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" autocomplete="off">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
              <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a href="https://calcdomain.com/search" class="text-gray-700 hover:text-blue-600 transition-colors">Advanced Search</a>
            <a href="https://calcdomain.com/categories" class="text-gray-700 hover:text-blue-600 transition-colors">Categories</a>
          </div>
          <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
          </button>
        </div>
        <nav id="mobile-menu" class="md:hidden mt-4 hidden" aria-label="Mobile menu" role="navigation">
          <div class="mb-4">
            <div class="relative">
              <input type="search" id="mobile-search-input" placeholder="Search calculators..." class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>
          </div>
          <div class="space-y-2">
            <a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
            <a href="https://calcdomain.com/categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">

      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600" aria-label="Breadcrumb">
        <ol class="flex flex-wrap items-center space-x-1">
          <li>
            <a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a>
          </li>
          <li><span class="mx-1 text-gray-400">/</span></li>
          <li>
            <a href="https://calcdomain.com/math-conversions" class="text-blue-600 hover:underline">Math &amp; Conversions</a>
          </li>
          <li><span class="mx-1 text-gray-400">/</span></li>
          <li>
            <a href="https://calcdomain.com/math-conversions/core-math-algebra" class="text-blue-600 hover:underline">Core Math &amp; Algebra</a>
          </li>
          <li><span class="mx-1 text-gray-400">/</span></li>
          <li class="text-gray-500" aria-current="page">
            Bayes' Theorem Calculator
          </li>
        </ol>
      </nav>

      <div class="flex flex-col lg:flex-row gap-8">

        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">

            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">Bayes' Theorem Calculator</h1>
              <p class="text-gray-700 mb-2">
                Use this Bayes' theorem calculator to turn intuitive pieces of information
                (such as prior probability, likelihoods, or test characteristics)
                into posterior probabilities like \( P(A \mid B) \) or
                \( P(\text{disease} \mid \text{positive test}) \).
              </p>
              <p class="text-xs text-gray-500">
                Educational use only – for clinical, financial, or safety-critical applications, always validate
                results with professional statistical software and domain guidelines.
              </p>
            </header>

            <!-- Tabs -->
            <section class="mb-6" aria-label="Bayes' theorem calculation modes">
              <div class="flex border-b border-gray-200 mb-4">
                <button id="tab-general" type="button" class="tab-btn tab-btn-active mr-4 px-2 pb-2 text-sm font-medium text-blue-600">
                  General probability mode
                </button>
                <button id="tab-diagnostic" type="button" class="tab-btn px-2 pb-2 text-sm font-medium text-gray-500 hover:text-blue-600">
                  Diagnostic test mode
                </button>
              </div>

              <!-- General probability mode -->
              <div id="panel-general">
                <h2 class="text-xl font-semibold mb-3">1. General probability mode</h2>
                <p class="text-sm text-gray-700 mb-3">
                  Model two events \( A \) and \( B \). Specify a prior probability for \( A \) and the likelihoods
                  \( P(B \mid A) \) and \( P(B \mid \neg A) \). The calculator uses Bayes' theorem to compute
                  \( P(A \mid B) \), \( P(\neg A \mid B) \), and related quantities.
                </p>
                <p class="text-xs text-gray-500 mb-3">
                  You can enter values either as probabilities (0–1) or percentages (0–100).
                  Values greater than 1 are automatically interpreted as percentages and divided by 100.
                </p>

                <div class="grid md:grid-cols-3 gap-4 mb-4">
                  <div>
                    <label for="gen-pa" class="block text-sm font-medium text-gray-700 mb-1">
                      Prior probability \( P(A) \)
                    </label>
                    <input id="gen-pa" type="number" step="any" min="0" max="100" class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g. 0.3 or 30">
                  </div>
                  <div>
                    <label for="gen-pb_given_a" class="block text-sm font-medium text-gray-700 mb-1">
                      Likelihood \( P(B \mid A) \)
                    </label>
                    <input id="gen-pb_given_a" type="number" step="any" min="0" max="100" class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g. 0.8 or 80">
                  </div>
                  <div>
                    <label for="gen-pb_given_not_a" class="block text-sm font-medium text-gray-700 mb-1">
                      \( P(B \mid \neg A) \)
                    </label>
                    <input id="gen-pb_given_not_a" type="number" step="any" min="0" max="100" class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g. 0.1 or 10">
                  </div>
                </div>

                <div class="flex items-center gap-3 mb-4">
                  <button id="gen-calc-btn" type="button" class="inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    Calculate \( P(A \mid B) \)
                  </button>
                  <button id="gen-clear-btn" type="button" class="inline-flex items-center justify-center rounded-md border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    Clear
                  </button>
                  <span class="text-xs text-gray-500">
                    All intermediate values are clipped to the range [0, 1] for stability.
                  </span>
                </div>

                <div id="gen-error-box" class="hidden rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700 mb-4" role="alert"></div>

                <div id="gen-results" class="hidden rounded-md border border-green-100 bg-green-50 px-3 py-3 text-sm text-green-900 mb-4">
                  <p class="font-semibold mb-2">Bayes' theorem results (general mode)</p>
                  <ul class="list-disc ml-5 space-y-1 text-gray-900 text-sm">
                    <li><span class="font-medium">Prior probability \( P(A) \):</span> <span id="gen-out-pa"></span></li>
                    <li><span class="font-medium">Complement \( P(\neg A) \):</span> <span id="gen-out-not_pa"></span></li>
                    <li><span class="font-medium">Evidence probability \( P(B) \):</span> <span id="gen-out-pb"></span></li>
                    <li><span class="font-medium">Posterior \( P(A \mid B) \):</span> <span id="gen-out-pa_given_b"></span></li>
                    <li><span class="font-medium">Complement \( P(\neg A \mid B) \):</span> <span id="gen-out-not_pa_given_b"></span></li>
                    <li><span class="font-medium">Complement \( P(\neg B) \):</span> <span id="gen-out-not_pb"></span></li>
                  </ul>
                  <p class="text-xs text-gray-700 mt-2">
                    Formula: \( P(A \mid B) = \dfrac{P(B \mid A) P(A)}{P(B \mid A) P(A) + P(B \mid \neg A) P(\neg A)} \).
                  </p>
                </div>
              </div>

              <!-- Diagnostic test mode -->
              <div id="panel-diagnostic" class="hidden">
                <h2 class="text-xl font-semibold mb-3">2. Diagnostic test mode</h2>
                <p class="text-sm text-gray-700 mb-3">
                  Model a binary diagnostic test or classifier: a condition \( D \) (disease, fraud, defect) and
                  a test outcome (+/–). Enter prevalence \( P(D) \), sensitivity \( P(+\mid D) \),
                  and specificity \( P(-\mid \neg D) \). The calculator computes \( P(D \mid +) \),
                  \( P(D \mid -) \), and a frequency table for a notional population of 10,000.
                </p>
                <p class="text-xs text-gray-500 mb-3">
                  As above, you can use probabilities (0–1) or percentages (0–100). Values above 1
                  are treated as percentages.
                </p>

                <div class="grid md:grid-cols-3 gap-4 mb-4">
                  <div>
                    <label for="diag-prev" class="block text-sm font-medium text-gray-700 mb-1">
                      Prevalence \( P(D) \)
                    </label>
                    <input id="diag-prev" type="number" step="any" min="0" max="100" class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g. 0.01 or 1">
                    <p class="text-xs text-gray-500 mt-1">
                      Baseline probability of the condition before testing.
                    </p>
                  </div>
                  <div>
                    <label for="diag-sens" class="block text-sm font-medium text-gray-700 mb-1">
                      Sensitivity \( P(+ \mid D) \)
                    </label>
                    <input id="diag-sens" type="number" step="any" min="0" max="100" class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g. 0.95 or 95">
                    <p class="text-xs text-gray-500 mt-1">
                      Probability the test is positive when the condition is present.
                    </p>
                  </div>
                  <div>
                    <label for="diag-spec" class="block text-sm font-medium text-gray-700 mb-1">
                      Specificity \( P(- \mid \neg D) \)
                    </label>
                    <input id="diag-spec" type="number" step="any" min="0" max="100" class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g. 0.9 or 90">
                    <p class="text-xs text-gray-500 mt-1">
                      Probability the test is negative when the condition is absent.
                    </p>
                  </div>
                </div>

                <div class="flex items-center gap-3 mb-4">
                  <button id="diag-calc-btn" type="button" class="inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    Calculate post-test probabilities
                  </button>
                  <button id="diag-clear-btn" type="button" class="inline-flex items-center justify-center rounded-md border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    Clear
                  </button>
                </div>

                <div id="diag-error-box" class="hidden rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700 mb-4" role="alert"></div>

                <div id="diag-results" class="hidden space-y-3 mb-4">
                  <div class="rounded-md border border-green-100 bg-green-50 px-3 py-3 text-sm text-green-900">
                    <p class="font-semibold mb-2">Diagnostic test results</p>
                    <ul class="list-disc ml-5 space-y-1 text-gray-900 text-sm">
                      <li><span class="font-medium">Prevalence \( P(D) \):</span> <span id="diag-out-prev"></span></li>
                      <li><span class="font-medium">Complement \( P(\neg D) \):</span> <span id="diag-out-not_prev"></span></li>
                      <li><span class="font-medium">Positive predictive value \( P(D \mid +) \):</span> <span id="diag-out-ppv"></span></li>
                      <li><span class="font-medium">Negative predictive value \( P(D \mid -) \):</span> <span id="diag-out-npv"></span></li>
                      <li><span class="font-medium">Probability of a positive test \( P(+) \):</span> <span id="diag-out-p_pos"></span></li>
                      <li><span class="font-medium">Probability of a negative test \( P(-) \):</span> <span id="diag-out-p_neg"></span></li>
                    </ul>
                  </div>

                  <div class="rounded-md border border-blue-100 bg-blue-50 px-3 py-3 text-sm text-blue-900">
                    <p class="font-semibold mb-2">Frequency table for a notional population of 10,000</p>
                    <div class="overflow-x-auto">
                      <table class="table-mini bg-white text-gray-800">
                        <thead>
                          <tr>
                            <th></th>
                            <th>Condition present</th>
                            <th>Condition absent</th>
                            <th>Total</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th>Test positive</th>
                            <td id="diag-out-true-pos"></td>
                            <td id="diag-out-false-pos"></td>
                            <td id="diag-out-total-pos"></td>
                          </tr>
                          <tr>
                            <th>Test negative</th>
                            <td id="diag-out-false-neg"></td>
                            <td id="diag-out-true-neg"></td>
                            <td id="diag-out-total-neg"></td>
                          </tr>
                          <tr>
                            <th>Total</th>
                            <td id="diag-out-total-cond"></td>
                            <td id="diag-out-total-no-cond"></td>
                            <td>10,000</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <p class="text-xs text-blue-900 mt-2">
                      These counts are rounded to whole numbers for readability and correspond to your probabilities
                      applied to a population of 10,000 individuals.
                    </p>
                  </div>
                </div>
              </div>
            </section>

            <!-- Theory & Explanation -->
            <section class="prose text-sm md:text-base">
              <h2>Bayes' theorem in formula form</h2>
              <p>
                Bayes' theorem connects a prior probability \( P(A) \), a likelihood \( P(B \mid A) \),
                and the marginal probability of the evidence \( P(B) \) to produce the posterior probability
                \( P(A \mid B) \):
              </p>
              <div class="formula-box">
                \[
                  P(A \mid B) = \frac{P(B \mid A) \, P(A)}{P(B)}
                \]
                \[
                  P(B) = P(B \mid A) P(A) + P(B \mid \neg A) P(\neg A).
                \]
              </div>
              <p>
                The calculator implements these relationships numerically. You provide \( P(A) \),
                \( P(B \mid A) \), and \( P(B \mid \neg A) \). It computes \( P(B) \) and finally
                \( P(A \mid B) \) and \( P(\neg A \mid B) \).
              </p>

              <h2>Diagnostic tests: prevalence, sensitivity, and specificity</h2>
              <p>
                In diagnostic testing, Bayes' theorem often appears in terms of:
              </p>
              <ul>
                <li><strong>Prevalence</strong> \( P(D) \): baseline probability of the condition.</li>
                <li><strong>Sensitivity</strong> \( P(+ \mid D) \): probability the test is positive when the condition is present.</li>
                <li><strong>Specificity</strong> \( P(- \mid \neg D) \): probability the test is negative when the condition is absent.</li>
              </ul>
              <p>
                From these inputs we obtain:
              </p>
              <div class="formula-box">
                \[
                  P(+) = P(+ \mid D) P(D) + P(+ \mid \neg D) P(\neg D)
                \]
                with
                \[
                  P(+ \mid \neg D) = 1 - \text{specificity}.
                \]
                \[
                  P(D \mid +) = \frac{P(+ \mid D) P(D)}{P(+)}, \quad
                  P(D \mid -) = \frac{P(- \mid D) P(D)}{P(-)}.
                \]
              </div>
              <p>
                These posterior probabilities are often called <em>positive predictive value</em> (PPV)
                and <em>negative predictive value</em> (NPV).
              </p>

              <h2>Worked example – email spam filter</h2>
              <p>
                Suppose that in your email inbox about \( 20\% \) of emails are spam \( (A) \). Your spam filter flags
                \( 90\% \) of spam emails as spam \( (P(B \mid A) = 0.9) \) and incorrectly flags \( 5\% \) of genuine
                emails as spam \( (P(B \mid \neg A) = 0.05) \). What is the probability that an email is spam given
                that it is flagged as spam?
              </p>
              <ul>
                <li>\( P(A) = 0.2 \), so \( P(\neg A) = 0.8 \).</li>
                <li>\( P(B) = 0.9 \cdot 0.2 + 0.05 \cdot 0.8 = 0.18 + 0.04 = 0.22 \).</li>
                <li>\( P(A \mid B) = 0.9 \cdot 0.2 / 0.22 \approx 0.818 \).</li>
              </ul>
              <p>
                So about \( 81.8\% \) of emails that are flagged as spam really are spam. Enter these values in the
                general probability mode to reproduce the result.
              </p>

              <h2>Interpreting probabilities vs percentages</h2>
              <p>
                Many textbooks use probabilities between 0 and 1, while practitioners often think in percentages.
                This tool accepts either format and standardises internally:
              </p>
              <ul>
                <li>Inputs \( x \) with \( 0 \le x \le 1 \) are treated as probabilities.</li>
                <li>Inputs \( x \) with \( 1 &lt; x \le 100 \) are treated as percentages and divided by 100.</li>
                <li>Values outside these ranges trigger an error to avoid silent mistakes.</li>
              </ul>

              <h2>Common pitfalls and modelling caveats</h2>
              <ul>
                <li>
                  <strong>Base rate neglect:</strong> Ignoring low prevalence can lead to overconfident interpretations
                  of a positive test. Bayes' theorem makes the role of the base rate explicit.
                </li>
                <li>
                  <strong>Conditional independence:</strong> In many multi-symptom or multi-test settings, naive
                  applications of Bayes' theorem assume independence that may not hold.
                </li>
                <li>
                  <strong>Mis-specified sensitivity and specificity:</strong> Real-world tests may perform differently
                  in subgroups than in the study sample. Using headline sensitivity/specificity numbers outside their
                  original context can be misleading.
                </li>
                <li>
                  <strong>Discrete vs continuous models:</strong> This calculator is intended for simple binary cases.
                  For continuous measurements and complex models, a full Bayesian workflow with appropriate software is
                  recommended.
                </li>
              </ul>

              <h2>Frequently asked questions</h2>

              <h3>What is the intuitive meaning of Bayes' theorem?</h3>
              <p>
                Informally, Bayes' theorem says: <em>posterior = likelihood × prior, rescaled</em>. You start with a
                prior belief about \( A \), then see evidence \( B \) that is more or less compatible with \( A \) than
                with \( \neg A \). The theorem tells you exactly how to update your belief about \( A \) in light of
                this evidence.
              </p>

              <h3>Why are my post-test probabilities lower than I expected?</h3>
              <p>
                This usually happens when the prevalence is low. Even with a very accurate test, most positive results
                may still be false positives if the condition is rare. The diagnostic test mode and frequency table make
                this effect visible in concrete numbers.
              </p>

              <h3>Can I use this for non-medical problems?</h3>
              <p>
                Absolutely. Bayes' theorem applies to any situation with prior probabilities and new evidence:
                credit scoring, fraud detection, machine learning classifiers, quality control, and more. The general
                mode is deliberately abstract so you can map your own \( A \) and \( B \) to the inputs.
              </p>

              <h3>How should I document a Bayes' theorem calculation in a report?</h3>
              <p>
                Clearly state your assumptions, including how you chose the prior or prevalence, where the sensitivity
                and specificity figures come from, and how the evidence \( B \) was measured. Show the key
                intermediate steps – such as \( P(B) \) and the exact formula for \( P(A \mid B) \) – so that colleagues
                can replicate the calculation independently.
              </p>
            </section>

          </div>
        
<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[P(A \mid B) = \frac{P(B \mid A) \, P(A)}{P(B)}\]</div>
  <pre class="auditspine-mono">P(A \mid B) = \frac{P(B \mid A) \, P(A)}{P(B)}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[P(B) = P(B \mid A) P(A) + P(B \mid \neg A) P(\neg A).\]</div>
  <pre class="auditspine-mono">P(B) = P(B \mid A) P(A) + P(B \mid \neg A) P(\neg A).</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[P(+) = P(+ \mid D) P(D) + P(+ \mid \neg D) P(\neg D)\]</div>
  <pre class="auditspine-mono">P(+) = P(+ \mid D) P(D) + P(+ \mid \neg D) P(\neg D)</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[P(+ \mid \neg D) = 1 - \text{specificity}.\]</div>
  <pre class="auditspine-mono">P(+ \mid \neg D) = 1 - \text{specificity}.</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[P(D \mid +) = \frac{P(+ \mid D) P(D)}{P(+)}, \quad P(D \mid -) = \frac{P(- \mid D) P(D)}{P(-)}.\]</div>
  <pre class="auditspine-mono">P(D \mid +) = \frac{P(+ \mid D) P(D)}{P(+)}, \quad P(D \mid -) = \frac{P(- \mid D) P(D)}{P(-)}.</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[','\\]</div>
  <pre class="auditspine-mono">','\</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">\[ P(A \mid B) = \frac{P(B \mid A) \, P(A)}{P(B)} \] \[ P(B) = P(B \mid A) P(A) + P(B \mid \neg A) P(\neg A). \]</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">\[ P(+) = P(+ \mid D) P(D) + P(+ \mid \neg D) P(\neg D) \] with \[ P(+ \mid \neg D) = 1 - \text{specificity}. \] \[ P(D \mid +) = \frac{P(+ \mid D) P(D)}{P(+)}, \quad P(D \mid -) = \frac{P(- \mid D) P(D)}{P(-)}. \]</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>NIST — Weights and measures</strong> — nist.gov · Accessed 2026-01-19<br><a href="https://www.nist.gov/pml/weights-and-measures" target="_blank" rel="nofollow noopener">https://www.nist.gov/pml/weights-and-measures</a></li>
<li><strong>FTC — Consumer advice</strong> — consumer.ftc.gov · Accessed 2026-01-19<br><a href="https://consumer.ftc.gov/" target="_blank" rel="nofollow noopener">https://consumer.ftc.gov/</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</main>

        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">More probability &amp; Bayesian tools</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a href="https://calcdomain.com/bayesian-inference" class="text-blue-600 hover:underline">
                  Bayesian Inference (Binomial)
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/binomial-distribution" class="text-blue-600 hover:underline">
                  Binomial Distribution Calculator
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/naive-bayes" class="text-blue-600 hover:underline">
                  Naive Bayes Classifier Helper
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/normal-distribution" class="text-blue-600 hover:underline">
                  Normal Distribution (Gaussian)
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/a-b-test-significance" class="text-blue-600 hover:underline">
                  A/B Test Significance
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/z-score" class="text-blue-600 hover:underline">
                  Z-Score Calculator
                </a>
              </li>
              <li>
                <a href="https://calcdomain.com/p-value" class="text-blue-600 hover:underline">
                  P-value Calculator
                </a>
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-2">About this Bayes' theorem tool</h2>
            <p class="text-sm text-gray-700 mb-2">
              This calculator is designed for students, educators, analysts, and engineers who want a transparent,
              step-by-step implementation of Bayes' theorem for binary events and diagnostic tests, with formulas that
              can be checked against textbooks or statistical software.
            </p>
            <p class="text-xs text-gray-500">
              For high-stakes decisions, treat the results as an educational cross-check and confirm them using
              validated tools and, where appropriate, expert review.
            </p>
          </div>
        </aside>

      </div>
    </div>

    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.</p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction &amp; DIY</a></li>
          <li><a href="https://calcdomain.com/categories/coordinate-converters" class="text-gray-400 hover:text-white">Coordinate Converters</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health &amp; Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle &amp; Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math &amp; Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
              <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
              <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
              <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
              <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
              <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
              <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
              <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
              <li><a href="https://calcdomain.com/sitemap" class="text-gray-400 hover:text-white">Site Map</a></li>
            </ul>
          </div>
        </div>
        <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
          <p>© 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/script_menu.js" defer=""></script>
    <script src="/assets/js/script_faq.js" defer=""></script>
    <script src="search.js" defer=""></script>

    <script>
      window.MathJax = {
        tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['$','$'], ['\\[','\\]']] },
        svg: { fontCache: 'global' }
      };
    </script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <!-- Bayes' theorem calculator logic -->
    <script>
      (function() {
        // Tab logic
        const tabGeneral = document.getElementById('tab-general');
        const tabDiagnostic = document.getElementById('tab-diagnostic');
        const panelGeneral = document.getElementById('panel-general');
        const panelDiagnostic = document.getElementById('panel-diagnostic');

        function activateTab(which) {
          if (which === 'general') {
            tabGeneral.classList.add('tab-btn-active', 'text-blue-600');
            tabGeneral.classList.remove('text-gray-500');
            tabDiagnostic.classList.remove('tab-btn-active');
            tabDiagnostic.classList.add('text-gray-500');
            panelGeneral.classList.remove('hidden');
            panelDiagnostic.classList.add('hidden');
          } else {
            tabDiagnostic.classList.add('tab-btn-active', 'text-blue-600');
            tabDiagnostic.classList.remove('text-gray-500');
            tabGeneral.classList.remove('tab-btn-active');
            tabGeneral.classList.add('text-gray-500');
            panelDiagnostic.classList.remove('hidden');
            panelGeneral.classList.add('hidden');
          }
        }

        tabGeneral.addEventListener('click', function() { activateTab('general'); });
        tabDiagnostic.addEventListener('click', function() { activateTab('diagnostic'); });

        // Utility helpers
        function fmtProb(p, decimals) {
          if (!isFinite(p)) return String(p);
          const d = typeof decimals === 'number' ? decimals : 6;
          const clipped = Math.max(0, Math.min(1, p));
          return clipped.toFixed(d).replace(/0+$/,'').replace(/\.$/,'');
        }

        function fmtPct(p, decimals) {
          if (!isFinite(p)) return String(p);
          const d = typeof decimals === 'number' ? decimals : 2;
          const clipped = Math.max(0, Math.min(1, p));
          const pct = clipped * 100;
          return pct.toFixed(d).replace(/0+$/,'').replace(/\.$/,'') + '%';
        }

        function parseProb(valueRaw, fieldName) {
          const v = String(valueRaw || '').trim();
          if (v === '') {
            throw new Error('Please enter a value for ' + fieldName + '.');
          }
          let x = parseFloat(v.replace('%',''));
          if (!isFinite(x)) {
            throw new Error('Value for ' + fieldName + ' must be a number.');
          }
          if (x < 0) {
            throw new Error('Value for ' + fieldName + ' cannot be negative.');
          }
          if (x > 1) {
            // Treat as percentage
            x = x / 100;
          }
          if (x < 0 || x > 1) {
            throw new Error('Value for ' + fieldName + ' must be between 0 and 1 (or 0 and 100 if using percentages).');
          }
          return x;
        }

        // --- General probability mode ---
        const genPaInput = document.getElementById('gen-pa');
        const genPbGivenAInput = document.getElementById('gen-pb_given_a');
        const genPbGivenNotAInput = document.getElementById('gen-pb_given_not_a');
        const genCalcBtn = document.getElementById('gen-calc-btn');
        const genClearBtn = document.getElementById('gen-clear-btn');
        const genErrorBox = document.getElementById('gen-error-box');
        const genResults = document.getElementById('gen-results');

        const genOutPa = document.getElementById('gen-out-pa');
        const genOutNotPa = document.getElementById('gen-out-not_pa');
        const genOutPb = document.getElementById('gen-out-pb');
        const genOutPaGivenB = document.getElementById('gen-out-pa_given_b');
        const genOutNotPaGivenB = document.getElementById('gen-out-not_pa_given_b');
        const genOutNotPb = document.getElementById('gen-out-not_pb');

        function genShowError(msg) {
          genErrorBox.textContent = msg;
          genErrorBox.classList.remove('hidden');
          genResults.classList.add('hidden');
        }

        function genClearError() {
          genErrorBox.textContent = '';
          genErrorBox.classList.add('hidden');
        }

        function genClear() {
          genPaInput.value = '';
          genPbGivenAInput.value = '';
          genPbGivenNotAInput.value = '';
          genClearError();
          genResults.classList.add('hidden');
        }

        genClearBtn.addEventListener('click', genClear);

        function genCalc() {
          genClearError();
          genResults.classList.add('hidden');

          try {
            const pA = parseProb(genPaInput.value, 'P(A)');
            const pBgivenA = parseProb(genPbGivenAInput.value, 'P(B|A)');
            const pBgivenNotA = parseProb(genPbGivenNotAInput.value, 'P(B|¬A)');

            const pNotA = 1 - pA;
            const pB = pBgivenA * pA + pBgivenNotA * pNotA;

            if (pB <= 0) {
              throw new Error('The computed P(B) is zero. Please adjust the inputs.');
            }

            const pAgivenB = (pBgivenA * pA) / pB;
            const pNotAgivenB = 1 - pAgivenB;
            const pNotB = 1 - pB;

            genOutPa.textContent = fmtProb(pA, 6) + ' (' + fmtPct(pA, 2) + ')';
            genOutNotPa.textContent = fmtProb(pNotA, 6) + ' (' + fmtPct(pNotA, 2) + ')';
            genOutPb.textContent = fmtProb(pB, 6) + ' (' + fmtPct(pB, 2) + ')';
            genOutPaGivenB.textContent = fmtProb(pAgivenB, 6) + ' (' + fmtPct(pAgivenB, 2) + ')';
            genOutNotPaGivenB.textContent = fmtProb(pNotAgivenB, 6) + ' (' + fmtPct(pNotAgivenB, 2) + ')';
            genOutNotPb.textContent = fmtProb(pNotB, 6) + ' (' + fmtPct(pNotB, 2) + ')';

            genResults.classList.remove('hidden');
          } catch (err) {
            genShowError(err.message || String(err));
          }
        }

        genCalcBtn.addEventListener('click', genCalc);

        // --- Diagnostic test mode ---
        const diagPrevInput = document.getElementById('diag-prev');
        const diagSensInput = document.getElementById('diag-sens');
        const diagSpecInput = document.getElementById('diag-spec');
        const diagCalcBtn = document.getElementById('diag-calc-btn');
        const diagClearBtn = document.getElementById('diag-clear-btn');
        const diagErrorBox = document.getElementById('diag-error-box');
        const diagResults = document.getElementById('diag-results');

        const diagOutPrev = document.getElementById('diag-out-prev');
        const diagOutNotPrev = document.getElementById('diag-out-not_prev');
        const diagOutPPV = document.getElementById('diag-out-ppv');
        const diagOutNPV = document.getElementById('diag-out-npv');
        const diagOutPpos = document.getElementById('diag-out-p_pos');
        const diagOutPneg = document.getElementById('diag-out-p_neg');

        const diagOutTruePos = document.getElementById('diag-out-true-pos');
        const diagOutFalsePos = document.getElementById('diag-out-false-pos');
        const diagOutTrueNeg = document.getElementById('diag-out-true-neg');
        const diagOutFalseNeg = document.getElementById('diag-out-false-neg');
        const diagOutTotalPos = document.getElementById('diag-out-total-pos');
        const diagOutTotalNeg = document.getElementById('diag-out-total-neg');
        const diagOutTotalCond = document.getElementById('diag-out-total-cond');
        const diagOutTotalNoCond = document.getElementById('diag-out-total-no-cond');

        function diagShowError(msg) {
          diagErrorBox.textContent = msg;
          diagErrorBox.classList.remove('hidden');
          diagResults.classList.add('hidden');
        }

        function diagClearError() {
          diagErrorBox.textContent = '';
          diagErrorBox.classList.add('hidden');
        }

        function diagClear() {
          diagPrevInput.value = '';
          diagSensInput.value = '';
          diagSpecInput.value = '';
          diagClearError();
          diagResults.classList.add('hidden');
        }

        diagClearBtn.addEventListener('click', diagClear);

        function diagCalc() {
          diagClearError();
          diagResults.classList.add('hidden');

          try {
            const prev = parseProb(diagPrevInput.value, 'Prevalence P(D)');
            const sens = parseProb(diagSensInput.value, 'Sensitivity P(+|D)');
            const spec = parseProb(diagSpecInput.value, 'Specificity P(-|¬D)');

            const notPrev = 1 - prev;
            const pPosGivenNoD = 1 - spec;
            const pNegGivenD = 1 - sens;

            const pPos = sens * prev + pPosGivenNoD * notPrev;
            const pNeg = 1 - pPos;

            if (pPos <= 0 || pNeg <= 0) {
              throw new Error('Computed P(+) or P(-) is zero. Check that sensitivity, specificity, and prevalence are consistent.');
            }

            const ppv = (sens * prev) / pPos;
            const npv = (spec * notPrev) / pNeg;

            diagOutPrev.textContent = fmtProb(prev, 6) + ' (' + fmtPct(prev, 2) + ')';
            diagOutNotPrev.textContent = fmtProb(notPrev, 6) + ' (' + fmtPct(notPrev, 2) + ')';
            diagOutPpos.textContent = fmtProb(pPos, 6) + ' (' + fmtPct(pPos, 2) + ')';
            diagOutPneg.textContent = fmtProb(pNeg, 6) + ' (' + fmtPct(pNeg, 2) + ')';
            diagOutPPV.textContent = fmtProb(ppv, 6) + ' (' + fmtPct(ppv, 2) + ')';
            diagOutNPV.textContent = fmtProb(npv, 6) + ' (' + fmtPct(npv, 2) + ')';

            // Frequency table for N = 10,000
            const N = 10000;
            const cond = prev * N;
            const noCond = N - cond;

            const truePos = sens * cond;
            const falseNeg = pNegGivenD * cond;
            const trueNeg = spec * noCond;
            const falsePos = pPosGivenNoD * noCond;

            const totalPos = truePos + falsePos;
            const totalNeg = trueNeg + falseNeg;

            function fmtCount(x) {
              return Math.round(x).toLocaleString('en-US');
            }

            diagOutTruePos.textContent = fmtCount(truePos);
            diagOutFalsePos.textContent = fmtCount(falsePos);
            diagOutTrueNeg.textContent = fmtCount(trueNeg);
            diagOutFalseNeg.textContent = fmtCount(falseNeg);
            diagOutTotalPos.textContent = fmtCount(totalPos);
            diagOutTotalNeg.textContent = fmtCount(totalNeg);
            diagOutTotalCond.textContent = fmtCount(cond);
            diagOutTotalNoCond.textContent = fmtCount(noCond);

            diagResults.classList.remove('hidden');
          } catch (err) {
            diagShowError(err.message || String(err));
          }
        }

        diagCalcBtn.addEventListener('click', diagCalc);
      })();
    </script>




</body></html>
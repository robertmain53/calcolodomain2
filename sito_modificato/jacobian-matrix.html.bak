<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/jacobian-matrix" />
    <title>Jacobian Matrix Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Jacobian Matrix Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Jacobian Matrix Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Jacobian Matrix Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/jacobian-matrix" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Jacobian Matrix Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Jacobian Matrix Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Math Calculators", "item": "https://calcdomain.com/categories/math"}, {"@type": "ListItem", "position": 3, "name": "Core Math &amp; Algebra Calculators", "item": "https://calcdomain.com/subcategories/core-math-algebra"}, {"@type": "ListItem", "position": 4, "name": "Jacobian Matrix Calculator (2R Manipulator &amp; General\n                Jacobian)", "item": "https://calcdomain.com/jacobian-matrix"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/math" class="text-blue-600 hover:underline">Math Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/core-math-algebra" class="text-blue-600 hover:underline">Core Math &amp;amp; Algebra Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Jacobian Matrix Calculator (2R Manipulator &amp;amp; General
                Jacobian)</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Jacobian Matrix Calculator (2R Manipulator &amp; General
                Jacobian)
              </h1>
              <p class="text-gray-600">
                Compute the Jacobian matrix, determinant, and inverse for a
                planar 2R robotic arm, plus a general 2D Jacobian for custom
                functions. Visualize singularities and see the formulas used.
              </p>
            </header>

            <!-- Tabs -->
            <div class="mb-6 border-b border-gray-200">
              <nav
                class="flex flex-wrap -mb-px text-sm font-medium"
                aria-label="Calculator mode"
              >
                <button
                  id="tab-2r"
                  class="tab-btn inline-flex items-center px-4 py-2 border-b-2 border-blue-600 text-blue-600"
                  type="button"
                >
                  2R Manipulator Jacobian
                </button>
                <button
                  id="tab-general"
                  class="tab-btn inline-flex items-center px-4 py-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700"
                  type="button"
                >
                  General 2×2 Jacobian
                </button>
              </nav>
            </div>

            <!-- 2R Manipulator Calculator -->
            <section id="panel-2r" aria-labelledby="tab-2r">
              <h2 class="text-xl font-semibold mb-4">
                Planar 2R Manipulator Jacobian
              </h2>
              <p class="text-gray-700 mb-4">
                Model a simple 2‑link planar robot arm with link lengths \(L_1,
                L_2\) and joint angles \(\theta_1, \theta_2\) (in radians or
                degrees). The end‑effector position is:
              </p>
              <div class="formula-box text-sm">
                \[ x = L_1 \cos\theta_1 + L_2 \cos(\theta_1 + \theta_2), \quad y
                = L_1 \sin\theta_1 + L_2 \sin(\theta_1 + \theta_2) \] \[
                J(\theta_1,\theta_2) = \begin{bmatrix} \frac{\partial
                x}{\partial \theta_1} & \frac{\partial x}{\partial \theta_2} \\
                \frac{\partial y}{\partial \theta_1} & \frac{\partial
                y}{\partial \theta_2} \end{bmatrix} \]
              </div>

              <form id="form-2r" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="l1"
                      class="block text-sm font-medium text-gray-700"
                      >Link length L₁</label
                    >
                    <input
                      type="number"
                      id="l1"
                      name="l1"
                      step="any"
                      value="1"
                      class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                    />
                  </div>
                  <div>
                    <label
                      for="l2"
                      class="block text-sm font-medium text-gray-700"
                      >Link length L₂</label
                    >
                    <input
                      type="number"
                      id="l2"
                      name="l2"
                      step="any"
                      value="1"
                      class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                    />
                  </div>
                </div>

                <div class="flex items-center gap-4 mt-2">
                  <span class="text-sm font-medium text-gray-700"
                    >Angle units:</span
                  >
                  <label class="inline-flex items-center text-sm">
                    <input
                      type="radio"
                      name="angleUnit"
                      value="rad"
                      class="mr-1"
                      checked
                    />
                    Radians
                  </label>
                  <label class="inline-flex items-center text-sm">
                    <input
                      type="radio"
                      name="angleUnit"
                      value="deg"
                      class="mr-1"
                    />
                    Degrees
                  </label>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="theta1"
                      class="block text-sm font-medium text-gray-700"
                      >Joint angle θ₁</label
                    >
                    <input
                      type="number"
                      id="theta1"
                      name="theta1"
                      step="any"
                      value="45"
                      class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                    />
                  </div>
                  <div>
                    <label
                      for="theta2"
                      class="block text-sm font-medium text-gray-700"
                      >Joint angle θ₂</label
                    >
                    <input
                      type="number"
                      id="theta2"
                      name="theta2"
                      step="any"
                      value="45"
                      class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                    />
                  </div>
                </div>

                <div class="flex flex-wrap items-center gap-3 pt-2">
                  <button
                    type="button"
                    id="btn-calc-2r"
                    class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
                  >
                    Compute Jacobian
                  </button>
                  <button
                    type="button"
                    id="btn-reset-2r"
                    class="inline-flex items-center px-3 py-2 bg-gray-100 text-gray-700 text-xs font-medium rounded-md hover:bg-gray-200"
                  >
                    Reset
                  </button>
                  <span id="status-2r" class="text-xs text-gray-500"></span>
                </div>
              </form>

              <div id="results-2r" class="mt-6 space-y-4 hidden">
                <div>
                  <h3 class="text-lg font-semibold mb-2">
                    End‑Effector Position
                  </h3>
                  <p class="text-sm text-gray-700">
                    \( x = \)<span id="x-pos" class="font-mono"></span>, \( y =
                    \)<span id="y-pos" class="font-mono"></span>
                  </p>
                </div>

                <div>
                  <h3 class="text-lg font-semibold mb-2">
                    Jacobian Matrix \(J(\theta_1,\theta_2)\)
                  </h3>
                  <div class="matrix-grid max-w-xs">
                    <div class="matrix-cell" id="j11"></div>
                    <div class="matrix-cell" id="j12"></div>
                    <div></div>
                    <div class="matrix-cell" id="j21"></div>
                    <div class="matrix-cell" id="j22"></div>
                    <div></div>
                  </div>
                  <p class="mt-2 text-xs text-gray-500">
                    Entries are evaluated numerically at the specified joint
                    angles.
                  </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div>
                    <h4 class="text-sm font-semibold mb-1">
                      Determinant det(J)
                    </h4>
                    <p class="font-mono text-sm" id="detJ"></p>
                  </div>
                  <div>
                    <h4 class="text-sm font-semibold mb-1">
                      Singularity Check
                    </h4>
                    <p id="singularity-status" class="text-sm"></p>
                  </div>
                  <div>
                    <h4 class="text-sm font-semibold mb-1">
                      Inverse \(J^{-1}\)
                    </h4>
                    <p id="inverse-status" class="text-sm mb-1"></p>
                    <div id="inverse-matrix" class="matrix-grid max-w-xs"></div>
                  </div>
                </div>

                <div>
                  <h3 class="text-lg font-semibold mb-2">
                    Analytical Formulas Used
                  </h3>
                  <div class="formula-box text-sm">
                    \[ J(\theta_1,\theta_2) = \begin{bmatrix} -L_1 \sin\theta_1
                    - L_2 \sin(\theta_1+\theta_2) & -L_2 \sin(\theta_1+\theta_2)
                    \\ L_1 \cos\theta_1 + L_2 \cos(\theta_1+\theta_2) & L_2
                    \cos(\theta_1+\theta_2) \end{bmatrix} \] \[ \det(J) = L_1
                    L_2 \sin\theta_2 \]
                  </div>
                </div>
              </div>
            </section>

            <!-- General Jacobian Calculator -->
            <section
              id="panel-general"
              class="hidden"
              aria-labelledby="tab-general"
            >
              <h2 class="text-xl font-semibold mb-4">
                General 2×2 Jacobian Matrix
              </h2>
              <p class="text-gray-700 mb-4">
                Compute the Jacobian of a 2D vector function \( \mathbf{f}(x,y)
                = (f_1(x,y), f_2(x,y)) \) numerically at a point \((x_0,y_0)\).
                Enter expressions using JavaScript syntax (e.g.
                <code>Math.sin(x)</code>, <code>x*y</code>,
                <code>Math.exp(x)</code>).
              </p>

              <form id="form-general" class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700"
                    >Function components</label
                  >
                  <div class="mt-1 grid grid-cols-1 gap-3">
                    <div>
                      <label for="f1" class="block text-xs text-gray-500 mb-1"
                        >f₁(x, y)</label
                      >
                      <input
                        type="text"
                        id="f1"
                        name="f1"
                        value="x*x + y"
                        class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm font-mono"
                      />
                    </div>
                    <div>
                      <label for="f2" class="block text-xs text-gray-500 mb-1"
                        >f₂(x, y)</label
                      >
                      <input
                        type="text"
                        id="f2"
                        name="f2"
                        value="Math.sin(x) + y*y"
                        class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm font-mono"
                      />
                    </div>
                  </div>
                  <p class="mt-1 text-xs text-gray-500">
                    Supported: <code>Math.sin</code>, <code>Math.cos</code>,
                    <code>Math.tan</code>, <code>Math.exp</code>,
                    <code>Math.log</code>, <code>Math.sqrt</code>,
                    <code>Math.pow</code>, etc.
                  </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="x0"
                      class="block text-sm font-medium text-gray-700"
                      >Point x₀</label
                    >
                    <input
                      type="number"
                      id="x0"
                      name="x0"
                      step="any"
                      value="1"
                      class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                    />
                  </div>
                  <div>
                    <label
                      for="y0"
                      class="block text-sm font-medium text-gray-700"
                      >Point y₀</label
                    >
                    <input
                      type="number"
                      id="y0"
                      name="y0"
                      step="any"
                      value="2"
                      class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                    />
                  </div>
                </div>

                <div class="flex flex-wrap items-center gap-3 pt-2">
                  <button
                    type="button"
                    id="btn-calc-general"
                    class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
                  >
                    Compute Jacobian
                  </button>
                  <button
                    type="button"
                    id="btn-reset-general"
                    class="inline-flex items-center px-3 py-2 bg-gray-100 text-gray-700 text-xs font-medium rounded-md hover:bg-gray-200"
                  >
                    Reset
                  </button>
                  <span
                    id="status-general"
                    class="text-xs text-gray-500"
                  ></span>
                </div>
              </form>

              <div id="results-general" class="mt-6 space-y-4 hidden">
                <div>
                  <h3 class="text-lg font-semibold mb-2">
                    Function Value at (x₀, y₀)
                  </h3>
                  <p class="text-sm text-gray-700">
                    \( f_1(x_0,y_0) = \)<span
                      id="f1-val"
                      class="font-mono"
                    ></span
                    >, \( f_2(x_0,y_0) = \)<span
                      id="f2-val"
                      class="font-mono"
                    ></span>
                  </p>
                </div>

                <div>
                  <h3 class="text-lg font-semibold mb-2">
                    Jacobian Matrix \(J(x_0,y_0)\)
                  </h3>
                  <p class="text-xs text-gray-500 mb-2">
                    Computed numerically using central finite differences.
                  </p>
                  <div class="matrix-grid max-w-xs">
                    <div class="matrix-cell" id="jg11"></div>
                    <div class="matrix-cell" id="jg12"></div>
                    <div></div>
                    <div class="matrix-cell" id="jg21"></div>
                    <div class="matrix-cell" id="jg22"></div>
                    <div></div>
                  </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div>
                    <h4 class="text-sm font-semibold mb-1">
                      Determinant det(J)
                    </h4>
                    <p class="font-mono text-sm" id="detJg"></p>
                  </div>
                  <div>
                    <h4 class="text-sm font-semibold mb-1">
                      Local Invertibility
                    </h4>
                    <p id="invertibility-status" class="text-sm"></p>
                  </div>
                  <div>
                    <h4 class="text-sm font-semibold mb-1">
                      Inverse \(J^{-1}\)
                    </h4>
                    <p id="inverse-status-g" class="text-sm mb-1"></p>
                    <div
                      id="inverse-matrix-g"
                      class="matrix-grid max-w-xs"
                    ></div>
                  </div>
                </div>
              </div>
            </section>

            <!-- Explanatory content -->
            <section class="prose mt-10">
              <h2>What is the Jacobian matrix?</h2>
              <p>
                The Jacobian matrix generalizes the derivative to multivariable
                vector functions. For a mapping \( \mathbf{f} : \mathbb{R}^n
                \rightarrow \mathbb{R}^m \) with \( \mathbf{f}(x_1,\dots,x_n) =
                (f_1,\dots,f_m) \), the Jacobian is the \( m \times n \) matrix
                of first‑order partial derivatives:
              </p>
              <div class="formula-box">
                \[ J(\mathbf{x}) = \begin{bmatrix} \dfrac{\partial f_1}{\partial
                x_1} & \cdots & \dfrac{\partial f_1}{\partial x_n} \\ \vdots &
                \ddots & \vdots \\ \dfrac{\partial f_m}{\partial x_1} & \cdots &
                \dfrac{\partial f_m}{\partial x_n} \end{bmatrix}. \]
              </div>
              <p>
                Intuitively, the Jacobian describes how small changes in the
                input variables produce changes in the outputs. It is the linear
                approximation of the function near a point.
              </p>

              <h2>Jacobian of a planar 2R manipulator</h2>
              <p>
                For a 2‑link planar robot arm with joint angles \( \theta_1,
                \theta_2 \) and link lengths \( L_1, L_2 \), the end‑effector
                position in the plane is:
              </p>
              <div class="formula-box">
                \[ x(\theta_1,\theta_2) = L_1 \cos\theta_1 + L_2
                \cos(\theta_1+\theta_2) \] \[ y(\theta_1,\theta_2) = L_1
                \sin\theta_1 + L_2 \sin(\theta_1+\theta_2) \]
              </div>
              <p>
                The Jacobian maps joint velocities \( \dot{\boldsymbol{\theta}}
                = [\dot{\theta}_1,\dot{\theta}_2]^T \) to end‑effector linear
                velocity \( \dot{\mathbf{p}} = [\dot{x},\dot{y}]^T \):
              </p>
              <div class="formula-box">
                \[ \dot{\mathbf{p}} =
                J(\theta_1,\theta_2)\,\dot{\boldsymbol{\theta}} \] \[
                J(\theta_1,\theta_2) = \begin{bmatrix} \dfrac{\partial
                x}{\partial \theta_1} & \dfrac{\partial x}{\partial \theta_2} \\
                \dfrac{\partial y}{\partial \theta_1} & \dfrac{\partial
                y}{\partial \theta_2} \end{bmatrix} = \begin{bmatrix} -L_1
                \sin\theta_1 - L_2 \sin(\theta_1+\theta_2) & -L_2
                \sin(\theta_1+\theta_2) \\ L_1 \cos\theta_1 + L_2
                \cos(\theta_1+\theta_2) & L_2 \cos(\theta_1+\theta_2)
                \end{bmatrix}. \]
              </div>

              <h3>Determinant and singularities</h3>
              <p>
                For the 2R arm, the determinant of the Jacobian simplifies to:
              </p>
              <div class="formula-box">
                \[ \det(J) = L_1 L_2 \sin\theta_2. \]
              </div>
              <ul>
                <li>
                  If \( \det(J) \neq 0 \), the mapping from joint velocities to
                  Cartesian velocities is locally invertible.
                </li>
                <li>
                  If \( \det(J) = 0 \), the robot is in a
                  <strong>singular configuration</strong> and loses one degree
                  of freedom in Cartesian space.
                </li>
              </ul>
              <p>
                For a 2R planar manipulator, singularities occur when the links
                are collinear: \( \theta_2 = 0 \) (fully stretched) or \(
                \theta_2 = \pi \) (folded back).
              </p>

              <h2>How this calculator computes the general Jacobian</h2>
              <p>
                In the “General 2×2 Jacobian” tab, the calculator evaluates the
                Jacobian numerically using central finite differences. For
                example, for \( f_1(x,y) \):
              </p>
              <div class="formula-box">
                \[ \frac{\partial f_1}{\partial x}(x_0,y_0) \approx
                \frac{f_1(x_0+h,y_0) - f_1(x_0-h,y_0)}{2h}, \quad \frac{\partial
                f_1}{\partial y}(x_0,y_0) \approx \frac{f_1(x_0,y_0+h) -
                f_1(x_0,y_0-h)}{2h}, \] with a small step \( h \).
              </div>
              <p>
                This approach works for many smooth functions and is useful when
                an analytical derivative is tedious or unavailable. For
                high‑precision or symbolic work, tools like CAS systems (e.g.
                MATLAB, Mathematica, SymPy) are recommended.
              </p>

              <h2>Typical applications of the Jacobian matrix</h2>
              <ul>
                <li>
                  <strong>Robotics:</strong> mapping joint velocities to
                  end‑effector velocities, singularity analysis, force mapping.
                </li>
                <li>
                  <strong>Optimization &amp; machine learning:</strong>
                  gradients and backpropagation in neural networks.
                </li>
                <li>
                  <strong>Change of variables:</strong> transforming integrals
                  and probability densities between coordinate systems.
                </li>
                <li>
                  <strong>Differential equations:</strong> linearization of
                  nonlinear systems around equilibrium points.
                </li>
              </ul>
            </section>

            <!-- FAQ -->
            <section class="mt-10">
              <h2 class="text-xl font-semibold mb-4">
                Jacobian Matrix Calculator – FAQ
              </h2>
              <div class="space-y-4" id="faq">
                <div class="border border-gray-200 rounded-lg">
                  <button
                    class="faq-question w-full text-left px-4 py-3 flex justify-between items-center"
                  >
                    <span class="font-medium text-gray-800 text-sm"
                      >What is the Jacobian matrix?</span
                    >
                    <span class="text-gray-500 text-xl leading-none">+</span>
                  </button>
                  <div
                    class="faq-answer px-4 pb-4 text-sm text-gray-700 hidden"
                  >
                    The Jacobian matrix is the matrix of all first‑order partial
                    derivatives of a vector‑valued function. It generalizes the
                    derivative to functions with multiple inputs and multiple
                    outputs and describes the best linear approximation of the
                    function near a point.
                  </div>
                </div>

                <div class="border border-gray-200 rounded-lg">
                  <button
                    class="faq-question w-full text-left px-4 py-3 flex justify-between items-center"
                  >
                    <span class="font-medium text-gray-800 text-sm"
                      >How is the Jacobian used in robotics?</span
                    >
                    <span class="text-gray-500 text-xl leading-none">+</span>
                  </button>
                  <div
                    class="faq-answer px-4 pb-4 text-sm text-gray-700 hidden"
                  >
                    In robotics, the Jacobian maps joint velocities to
                    end‑effector linear and angular velocities. It is used for
                    velocity control, force control, and to detect singularities
                    where the robot loses mobility in certain directions.
                  </div>
                </div>

                <div class="border border-gray-200 rounded-lg">
                  <button
                    class="faq-question w-full text-left px-4 py-3 flex justify-between items-center"
                  >
                    <span class="font-medium text-gray-800 text-sm"
                      >Why does the determinant of the Jacobian matter?</span
                    >
                    <span class="text-gray-500 text-xl leading-none">+</span>
                  </button>
                  <div
                    class="faq-answer px-4 pb-4 text-sm text-gray-700 hidden"
                  >
                    The determinant of a square Jacobian measures local scaling
                    and orientation change. A non‑zero determinant means the
                    mapping is locally invertible; a zero determinant indicates
                    a singularity where the mapping collapses along at least one
                    direction.
                  </div>
                </div>

                <div class="border border-gray-200 rounded-lg">
                  <button
                    class="faq-question w-full text-left px-4 py-3 flex justify-between items-center"
                  >
                    <span class="font-medium text-gray-800 text-sm"
                      >Can I use degrees for joint angles in the 2R
                      manipulator?</span
                    >
                    <span class="text-gray-500 text-xl leading-none">+</span>
                  </button>
                  <div
                    class="faq-answer px-4 pb-4 text-sm text-gray-700 hidden"
                  >
                    Yes. Select “Degrees” in the angle units section and enter
                    θ₁ and θ₂ in degrees. The calculator automatically converts
                    them to radians internally before computing the Jacobian.
                  </div>
                </div>

                <div class="border border-gray-200 rounded-lg">
                  <button
                    class="faq-question w-full text-left px-4 py-3 flex justify-between items-center"
                  >
                    <span class="font-medium text-gray-800 text-sm"
                      >Is this Jacobian calculator symbolic or numeric?</span
                    >
                    <span class="text-gray-500 text-xl leading-none">+</span>
                  </button>
                  <div
                    class="faq-answer px-4 pb-4 text-sm text-gray-700 hidden"
                  >
                    The 2R manipulator tab uses closed‑form analytical formulas
                    evaluated numerically at your chosen angles. The general 2×2
                    Jacobian tab uses numerical finite differences to
                    approximate partial derivatives of your custom functions.
                  </div>
                </div>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Link length L₁ Link length L₂ Angle units: Radians</li><li>Degrees</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Jacobian, Matrix, Link length L₁ Link length L₂ Angle units: Radians, Degrees.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Link length L₁ Link length L₂ Angle units: Radians</li><li>Degrees</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Core Math &amp; Algebra Tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/matrix"
                  class="text-blue-600 hover:underline"
                  >Matrix Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/matrix-inverse"
                  class="text-blue-600 hover:underline"
                  >Matrix Inverse</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/matrix-determinant"
                  class="text-blue-600 hover:underline"
                  >Matrix Determinant</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/gradient-divergence-curl"
                  class="text-blue-600 hover:underline"
                  >Gradient, Divergence &amp; Curl</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/differential-equation-solver"
                  class="text-blue-600 hover:underline"
                  >Differential Equation Solver</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/linear-algebra"
                  class="text-blue-600 hover:underline"
                  >Linear Algebra Toolbox</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/eigenvalue-eigenvector"
                  class="text-blue-600 hover:underline"
                  >Eigenvalues &amp; Eigenvectors</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/jacobian-matrix"
                  class="text-blue-600 hover:underline font-semibold"
                  >Jacobian Matrix (current)</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">
              Explore More Math &amp; Conversions
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/derivative"
                  class="text-blue-600 hover:underline"
                  >Derivative Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/integral"
                  class="text-blue-600 hover:underline"
                  >Integral Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/limit"
                  class="text-blue-600 hover:underline"
                  >Limit Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/equation-solver"
                  class="text-blue-600 hover:underline"
                  >Equation Solver</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/linear-programming"
                  class="text-blue-600 hover:underline"
                  >Linear Programming Solver</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Tab switching
      const tab2r = document.getElementById("tab-2r");
      const tabGeneral = document.getElementById("tab-general");
      const panel2r = document.getElementById("panel-2r");
      const panelGeneral = document.getElementById("panel-general");

      function activateTab(tab) {
        if (tab === "2r") {
          tab2r.classList.add("border-blue-600", "text-blue-600");
          tab2r.classList.remove("text-gray-500");
          tabGeneral.classList.remove("border-blue-600", "text-blue-600");
          tabGeneral.classList.add("text-gray-500");
          panel2r.classList.remove("hidden");
          panelGeneral.classList.add("hidden");
        } else {
          tabGeneral.classList.add("border-blue-600", "text-blue-600");
          tabGeneral.classList.remove("text-gray-500");
          tab2r.classList.remove("border-blue-600", "text-blue-600");
          tab2r.classList.add("text-gray-500");
          panelGeneral.classList.remove("hidden");
          panel2r.classList.add("hidden");
        }
      }

      tab2r.addEventListener("click", () => activateTab("2r"));
      tabGeneral.addEventListener("click", () => activateTab("general"));

      // 2R Manipulator calculations
      function toRadians(value, unit) {
        return unit === "deg" ? (value * Math.PI) / 180 : value;
      }

      function formatNumber(x) {
        if (!isFinite(x)) return "NaN";
        const ax = Math.abs(x);
        if (ax !== 0 && (ax < 1e-4 || ax >= 1e4)) {
          return x.toExponential(4);
        }
        return x.toFixed(6).replace(/\.?0+$/, "");
      }

      document.getElementById("btn-calc-2r").addEventListener("click", () => {
        const l1 = parseFloat(document.getElementById("l1").value);
        const l2 = parseFloat(document.getElementById("l2").value);
        const theta1Input = parseFloat(document.getElementById("theta1").value);
        const theta2Input = parseFloat(document.getElementById("theta2").value);
        const angleUnit = document.querySelector(
          'input[name="angleUnit"]:checked'
        ).value;
        const status = document.getElementById("status-2r");

        if (
          isNaN(l1) ||
          isNaN(l2) ||
          isNaN(theta1Input) ||
          isNaN(theta2Input)
        ) {
          status.textContent = "Please enter valid numeric values.";
          status.classList.remove("text-gray-500");
          status.classList.add("text-red-600");
          return;
        }

        const theta1 = toRadians(theta1Input, angleUnit);
        const theta2 = toRadians(theta2Input, angleUnit);

        const c1 = Math.cos(theta1);
        const s1 = Math.sin(theta1);
        const c12 = Math.cos(theta1 + theta2);
        const s12 = Math.sin(theta1 + theta2);

        const x = l1 * c1 + l2 * c12;
        const y = l1 * s1 + l2 * s12;

        const j11 = -l1 * s1 - l2 * s12;
        const j12 = -l2 * s12;
        const j21 = l1 * c1 + l2 * c12;
        const j22 = l2 * c12;

        const detJ = j11 * j22 - j12 * j21; // should equal l1*l2*sin(theta2)

        document.getElementById("x-pos").textContent = formatNumber(x);
        document.getElementById("y-pos").textContent = formatNumber(y);
        document.getElementById("j11").textContent = formatNumber(j11);
        document.getElementById("j12").textContent = formatNumber(j12);
        document.getElementById("j21").textContent = formatNumber(j21);
        document.getElementById("j22").textContent = formatNumber(j22);
        document.getElementById("detJ").textContent = formatNumber(detJ);

        const singularityStatus = document.getElementById("singularity-status");
        const inverseStatus = document.getElementById("inverse-status");
        const inverseMatrix = document.getElementById("inverse-matrix");
        inverseMatrix.innerHTML = "";

        const eps = 1e-9;
        if (Math.abs(detJ) < eps) {
          singularityStatus.innerHTML =
            '<span class="result-badge badge-err">Singular configuration</span> det(J) ≈ 0. The arm loses one Cartesian degree of freedom.';
          inverseStatus.textContent =
            "Inverse does not exist (Jacobian is singular).";
        } else {
          singularityStatus.innerHTML =
            '<span class="result-badge badge-ok">Non‑singular</span> det(J) ≠ 0. Mapping is locally invertible.';
          inverseStatus.textContent = "Inverse exists. Entries shown below:";

          const inv11 = j22 / detJ;
          const inv12 = -j12 / detJ;
          const inv21 = -j21 / detJ;
          const inv22 = j11 / detJ;

          ["inv11", "inv12", "inv21", "inv22"].forEach(() => {
            const cell = document.createElement("div");
            cell.className = "matrix-cell";
            inverseMatrix.appendChild(cell);
          });
          const cells = inverseMatrix.querySelectorAll(".matrix-cell");
          cells[0].textContent = formatNumber(inv11);
          cells[1].textContent = formatNumber(inv12);
          cells[2].textContent = formatNumber(inv21);
          cells[3].textContent = formatNumber(inv22);
        }

        document.getElementById("results-2r").classList.remove("hidden");
        status.textContent = "Jacobian computed.";
        status.classList.remove("text-red-600");
        status.classList.add("text-gray-500");
      });

      document.getElementById("btn-reset-2r").addEventListener("click", () => {
        document.getElementById("l1").value = 1;
        document.getElementById("l2").value = 1;
        document.getElementById("theta1").value = 45;
        document.getElementById("theta2").value = 45;
        document.querySelector(
          'input[name="angleUnit"][value="rad"]'
        ).checked = true;
        document.getElementById("results-2r").classList.add("hidden");
        document.getElementById("status-2r").textContent = "";
      });

      // General Jacobian calculations
      function safeEvalFunction(expr) {
        // Create a function f(x,y) from expression string using Function constructor
        return new Function("x", "y", `with (Math) { return ${expr}; }`);
      }

      document
        .getElementById("btn-calc-general")
        .addEventListener("click", () => {
          const f1Expr = document.getElementById("f1").value.trim();
          const f2Expr = document.getElementById("f2").value.trim();
          const x0 = parseFloat(document.getElementById("x0").value);
          const y0 = parseFloat(document.getElementById("y0").value);
          const status = document.getElementById("status-general");

          if (!f1Expr || !f2Expr || isNaN(x0) || isNaN(y0)) {
            status.textContent =
              "Please enter valid functions and point coordinates.";
            status.classList.remove("text-gray-500");
            status.classList.add("text-red-600");
            return;
          }

          let f1, f2;
          try {
            f1 = safeEvalFunction(f1Expr);
            f2 = safeEvalFunction(f2Expr);
            // Test evaluation
            f1(x0, y0);
            f2(x0, y0);
          } catch (e) {
            status.textContent =
              "Error parsing or evaluating the functions. Check your syntax.";
            status.classList.remove("text-gray-500");
            status.classList.add("text-red-600");
            return;
          }

          const h = 1e-5;
          function df_dx(func) {
            return (func(x0 + h, y0) - func(x0 - h, y0)) / (2 * h);
          }
          function df_dy(func) {
            return (func(x0, y0 + h) - func(x0, y0 - h)) / (2 * h);
          }

          try {
            const f1v = f1(x0, y0);
            const f2v = f2(x0, y0);

            const j11 = df_dx(f1);
            const j12 = df_dy(f1);
            const j21 = df_dx(f2);
            const j22 = df_dy(f2);

            const detJ = j11 * j22 - j12 * j21;

            document.getElementById("f1-val").textContent = formatNumber(f1v);
            document.getElementById("f2-val").textContent = formatNumber(f2v);
            document.getElementById("jg11").textContent = formatNumber(j11);
            document.getElementById("jg12").textContent = formatNumber(j12);
            document.getElementById("jg21").textContent = formatNumber(j21);
            document.getElementById("jg22").textContent = formatNumber(j22);
            document.getElementById("detJg").textContent = formatNumber(detJ);

            const invertStatus = document.getElementById(
              "invertibility-status"
            );
            const inverseStatusG = document.getElementById("inverse-status-g");
            const inverseMatrixG = document.getElementById("inverse-matrix-g");
            inverseMatrixG.innerHTML = "";

            const eps = 1e-9;
            if (Math.abs(detJ) < eps) {
              invertStatus.innerHTML =
                '<span class="result-badge badge-warn">Not locally invertible</span> det(J) ≈ 0 at this point.';
              inverseStatusG.textContent =
                "Inverse does not exist (Jacobian is singular or ill‑conditioned).";
            } else {
              invertStatus.innerHTML =
                '<span class="result-badge badge-ok">Locally invertible</span> det(J) ≠ 0 at this point.';
              inverseStatusG.textContent =
                "Inverse exists. Entries shown below:";

              const inv11 = j22 / detJ;
              const inv12 = -j12 / detJ;
              const inv21 = -j21 / detJ;
              const inv22 = j11 / detJ;

              ["inv11g", "inv12g", "inv21g", "inv22g"].forEach(() => {
                const cell = document.createElement("div");
                cell.className = "matrix-cell";
                inverseMatrixG.appendChild(cell);
              });
              const cells = inverseMatrixG.querySelectorAll(".matrix-cell");
              cells[0].textContent = formatNumber(inv11);
              cells[1].textContent = formatNumber(inv12);
              cells[2].textContent = formatNumber(inv21);
              cells[3].textContent = formatNumber(inv22);
            }

            document
              .getElementById("results-general")
              .classList.remove("hidden");
            status.textContent = "Jacobian computed.";
            status.classList.remove("text-red-600");
            status.classList.add("text-gray-500");
          } catch (e) {
            status.textContent =
              "Error during numerical differentiation. Try a different point or simpler functions.";
            status.classList.remove("text-gray-500");
            status.classList.add("text-red-600");
          }
        });

      document
        .getElementById("btn-reset-general")
        .addEventListener("click", () => {
          document.getElementById("f1").value = "x*x + y";
          document.getElementById("f2").value = "Math.sin(x) + y*y";
          document.getElementById("x0").value = 1;
          document.getElementById("y0").value = 2;
          document.getElementById("results-general").classList.add("hidden");
          document.getElementById("status-general").textContent = "";
        });

      // Simple FAQ toggle (in addition to global script_faq, safe if duplicated)
      document.querySelectorAll("#faq .faq-question").forEach((btn) => {
        btn.addEventListener("click", () => {
          const answer = btn.nextElementSibling;
          const icon = btn.querySelector("span:last-child");
          const isHidden = answer.classList.contains("hidden");
          document
            .querySelectorAll("#faq .faq-answer")
            .forEach((a) => a.classList.add("hidden"));
          document
            .querySelectorAll("#faq .faq-question span:last-child")
            .forEach((i) => (i.textContent = "+"));
          if (isHidden) {
            answer.classList.remove("hidden");
            icon.textContent = "−";
          }
        });
      });

      // Mobile menu toggle
      document
        .getElementById("mobile-menu-toggle")
        .addEventListener("click", () => {
          const menu = document.getElementById("mobile-menu");
          const expanded = menu.classList.contains("hidden") ? "true" : "false";
          menu.classList.toggle("hidden");
          document
            .getElementById("mobile-menu-toggle")
            .setAttribute("aria-expanded", expanded);
        });

      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

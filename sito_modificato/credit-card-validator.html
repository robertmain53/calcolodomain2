<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/credit-card-validator">





<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg">
<link rel="shortcut icon" href="https://calcdomain.com/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png">
<link rel="manifest" href="https://calcdomain.com/site.webmanifest">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Credit Card Validator - Instantly Check Card Number Validity (Luhn Check)</title>
<meta name="description" content="Instantly validate any credit card number using the Luhn algorithm. Our secure, free tool checks number format, checksum, and identifies the card type (Visa, Mastercard, Amex, etc.).">


<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js" defer=""></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.5rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
.formula-box ol { list-style-type: decimal; margin-left: 1.5rem; }
.formula-box li { margin-bottom: 0.75rem; }
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
/* Custom focus state for WCAG compliance */
:focus-visible {
outline: 3px solid #3b82f6;
outline-offset: 2px;
border-radius: 4px;
}
input:focus-visible {
border-color: #3b82f6 !important;
box-shadow: 0 0 0 2px #3b82f6 !important;
}
/* Ensure touch targets are large enough */
.input, .button {
min-height: 48px;
min-width: 48px;
}
/* Style for the results box */
#results {
min-height: 120px; /* Prevents CLS */
transition: background-color 0.3s ease, border-color 0.3s ease;
}
.icon-svg {
width: 3rem;
height: 3rem;
}
.card-brand-svg {
width: 48px;
height: 32px;
}
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
}
</style>

<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Credit Card Validator",
  "description": "Instantly validate any credit card number using the Luhn algorithm. Our secure, free tool checks number format, checksum, and identifies the card type (Visa, Mastercard, Amex, etc.).",
  "url": "https://calcdomain.com/credit-card-validator",
  "inLanguage": "en",
  "reviewedBy": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "dateModified": "2026-01-19"
}</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Lifestyle & Everyday",
      "item": "https://calcdomain.com/categories/lifestyle-everyday"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Miscellaneous",
      "item": "https://calcdomain.com/subcategories/miscellaneous"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Validate a Credit Card Number",
  "description": "A step-by-step guide to checking if a credit card number is mathematically valid using the Luhn algorithm.",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Enter Card Number",
      "text": "Type or paste the full 13 to 19-digit number into the input field. Do not include spaces or dashes, and never enter your CVV or expiration date."
    },
    {
      "@type": "HowToStep",
      "name": "Review Validation Status",
      "text": "The tool instantly checks the number against the Luhn algorithm checksum. The result box will update in real-time to show 'Valid' or 'Invalid'."
    },
    {
      "@type": "HowToStep",
      "name": "Identify Card Type",
      "text": "If the number is valid and its prefix is recognized, the tool will also display the card brand, such as Visa, Mastercard, or American Express."
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Is this credit card validator tool safe to use?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. This tool is 100% safe. All validation logic runs directly in your web browser (client-side). We do not see, store, or transmit your credit card number to any server. It only performs a mathematical check and does not connect to any bank or payment network."
      }
    },
    {
      "@type": "Question",
      "name": "Can this tool check if a card has money or is active?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No. This tool only performs a mathematical check called the Luhn algorithm. It confirms that the number is formatted correctly, but it cannot check for available funds, if the card is active, or if it has been reported stolen. Only a payment processor can do that."
      }
    },
    {
      "@type": "Question",
      "name": "What is the Luhn algorithm (Mod 10 check)?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The Luhn algorithm is a simple checksum formula used to validate a variety of identification numbers, including credit card numbers. It was designed to protect against accidental errors, like typos, during manual data entry. It is not a security feature."
      }
    },
    {
      "@type": "Question",
      "name": "Why would a 'Valid' card number be declined?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A card number can be 'Valid' according to the Luhn algorithm but still be declined for many reasons, including: insufficient funds, an incorrect expiration date or CVV, the card is expired, the card has been reported lost or stolen, or the bank's fraud detection system has blocked the transaction."
      }
    },
    {
      "@type": "Question",
      "name": "Why don't you ask for the CVV or expiration date?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "You should NEVER enter your CVV, PIN, or expiration date into any online tool that isn't a secure, trusted payment gateway. These details are not needed for Luhn validation, and asking for them is a major security risk."
      }
    }
  ]
}
</script>
<script src="search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">


<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">Drop the last digit: The last digit is the "check digit," which we will set aside. Reverse the remaining digits: The digits are read from right to left. Double every second digit: Starting from the new first digit (the one that was second-to-last), multiply every other digit by 2. Sum the digits: If any doubled digit is a two-digit number (e.g., 16), add its individual digits together (e.g., 1 + 6 = 7) before summing. Sum all the digits from this step. Add the check digit: Add the original "check digit" (from step 1) to this total sum. Check for validity: If the final total sum is perfectly divisible by 10 (i.e., the sum ends in a 0), the number is **valid**.</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Lifestyle Everyday</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/lifestyle-everyday" target="_blank" rel="nofollow noopener">https://calcdomain.com/lifestyle-everyday</a></li>
<li><strong>Miscellaneous</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/miscellaneous" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/miscellaneous</a></li>
<li><strong>IBAN Validator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/iban-validator" target="_blank" rel="nofollow noopener">https://calcdomain.com/iban-validator</a></li>
<li><strong>Secure Password Generator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/password-generator" target="_blank" rel="nofollow noopener">https://calcdomain.com/password-generator</a></li>
<li><strong>VAT Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/vat" target="_blank" rel="nofollow noopener">https://calcdomain.com/vat</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Validator?</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>
<strong>100% Secure:</strong> All checks are done in your browser. No data is sent to our servers.
</li>
<li>
<strong>Instant Feedback:</strong> Get real-time validation as you type.
</li>
<li>
<strong>Developer Tool:</strong> Perfect for testing payment forms and validation logic.
</li>
<li>
<strong>Card Identification:</strong> Automatically detects card type (Visa, Amex, etc.).
</li>
<li>
<strong>Educational:</strong> Learn how the Luhn algorithm works.
</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="https://calcdomain.com/iban-validator" class="text-blue-600 hover:underline">IBAN Validator</a></li>
<li><a href="https://calcdomain.com/password-generator" class="text-blue-600 hover:underline">Secure Password Generator</a></li>
<li><a href="https://calcdomain.com/vat" class="text-blue-600 hover:underline">VAT Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>

















<script>
document.addEventListener('DOMContentLoaded', () => {

// --- DOM Element References ---
const ccNumberInput = document.getElementById('cc-number');
const clearBtn = document.getElementById('clear-btn');
const errorDiv = document.getElementById('cc-error');
const resultsBox = document.getElementById('results');
const resultStatus = document.getElementById('result-status');
const resultMessage = document.getElementById('result-message');
const resultIcon = document.getElementById('result-icon');
const resultBrand = document.getElementById('result-brand');

// --- SVG Icons (Self-Contained) ---
const ICONS = {
  valid: `<svg class="icon-svg text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
  invalid: `<svg class="icon-svg text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
  default: `<svg class="icon-svg text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>`,
  visa: `<svg class="card-brand-svg" viewBox="0 0 750 471" xmlns="http://www.w3.org/2000/svg"><path d="M248.46 469.31h-78.3L93.63 214.38H2.15l-1.9 1.14L.13 469.31h-78.3l133.8-467.1h100.4l92.43 467.1zM486.06 469.31l68.6-467.1h100.4L747.3 214.38h7.82l-1.9 1.14-.12 253.8h-78.3L783.07 2.21h100.4l-66.7 467.1zM601.5 2.21l-90.5 467.1h78.3l90.5-467.1z" fill="#1A1F71"></svg>`,
  mastercard: `<svg class="card-brand-svg" viewBox="0 0 32 20" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#EB001B"><circle cx="22" cy="10" r="10" fill="#F79E1B"><path d="M16 10a10 10 0 01-6-1.67 10 10 0 010 3.34A10 10 0 0016 10z" fill="#FF5F00"></svg>`,
  amex: `<svg class="card-brand-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect width="96" height="60" x="2" y="20" fill="#006FCF" rx="4"><text x="50%" y="54%" dominant-baseline="middle" text-anchor="middle" font-size="20" fill="#FFF" font-family="Arial, sans-serif" font-weight="bold">AMEX</text></svg>`,
  discover: `<svg class="card-brand-svg" viewBox="0 0 100 63" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="63" fill="#F79E1B" rx="4"><circle cx="80" cy="31.5" r="10" fill="#E54D24"><text x="10" y="38" font-size="20" fill="#FFF" font-family="Arial, sans-serif" font-weight="bold">Discover</text></svg>`,
  diners: `<svg class="card-brand-svg" viewBox="0 0 100 63" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="63" fill="#004A99" rx="4"><circle cx="50" cy="31.5" r="25" fill="#FFF"><path d="M50 6.5a25 25 0 00-25 25h50a25 25 0 00-25-25z" fill="#004A99"></svg>`,
  jcb: `<svg class="card-brand-svg" viewBox="0 0 100 63" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="63" fill="#FFF" rx="4" stroke="#CCC" stroke-width="1"><rect width="20" height="20" x="15" y="21.5" fill="#D40019"><rect width="20" height="20" x="40" y="21.5" fill="#009A4D"><rect width="20" height="20" x="65" y="21.5" fill="#004A99"></svg>`,
  generic: `<svg class="card-brand-svg" viewBox="0 0 100 63" xmlns="http://www.w3.org/2000/svg"><rect width="98" height="61" x="1" y="1" fill="#DDD" rx="4" stroke="#999" stroke-width="1"><rect width="98" height="12" x="1" y="10" fill="#999"></svg>`
};

// --- Card Type Definitions ---
const CARD_TYPES = [
  { name: 'Amex', regex: /^3[47]\d{13}$/, icon: ICONS.amex },
  { name: 'Visa', regex: /^4\d{12}(?:\d{3}|\d{6})?$/, icon: ICONS.visa },
  { name: 'Mastercard', regex: /^5[1-5]\d{14}$/, icon: ICONS.mastercard },
  { name: 'Discover', regex: /^(6011|65\d{2}|64[4-9]\d)\d{12}|(62\d{14})$/, icon: ICONS.discover },
  { name: 'Diners Club', regex: /^3(?:0[0-5]|[68]\d)\d{11}$/, icon: ICONS.diners },
  { name: 'JCB', regex: /^(?:2131|1800|35\d{3})\d{11}$/, icon: ICONS.jcb },
];

// --- Luhn Algorithm Check ---
function luhnCheck(cardNumber) {
  let sum = 0;
  let shouldDouble = false;
  // Iterate from right to left
  for (let i = cardNumber.length - 1; i >= 0; i--) {
    let digit = parseInt(cardNumber.charAt(i), 10);

    if (shouldDouble) {
      digit *= 2;
      if (digit > 9) {
        digit -= 9;
      }
    }
    sum += digit;
    shouldDouble = !shouldDouble;
  }
  return (sum % 10) === 0;
}

// --- Card Type Identification ---
function getCardType(cardNumber) {
  for (const card of CARD_TYPES) {
    if (card.regex.test(cardNumber)) {
      return card;
    }
  }
  return { name: 'Unknown Brand', icon: ICONS.generic };
}

// --- Main Validation Function ---
function validate() {
  const rawValue = ccNumberInput.value;
  const cardNumber = rawValue.replace(/[\s-]/g, ''); // Strip spaces and dashes

  // --- Reset to default state ---
  if (cardNumber.length === 0) {
    updateUI('default', 'Awaiting Input', 'Enter a card number to begin validation.');
    errorDiv.textContent = '';
    ccNumberInput.setAttribute('aria-invalid', 'false');
    return;
  }
  
  // --- Check for non-numeric characters ---
  if (/[^0-9]/.test(cardNumber)) {
    updateUI('invalid', 'Invalid Input', 'Card number can only contain digits.');
    showError('Input must be numeric.');
    return;
  }

  // --- Check length ---
  if (cardNumber.length < 13 || cardNumber.length > 19) {
    updateUI('invalid', 'Invalid Length', 'Card number must be between 13 and 19 digits.');
    showError('Card number must be 13-19 digits.');
    return;
  }
  
  // --- Run Luhn Check ---
  const isValid = luhnCheck(cardNumber);
  const cardType = getCardType(cardNumber);

  if (isValid) {
    updateUI('valid', 'Valid Card Number', `Detected Brand: ${cardType.name}`, cardType.icon);
    clearError();
  } else {
    updateUI('invalid', 'Invalid Card Number', `Luhn check failed. Detected Brand: ${cardType.name}`, cardType.icon);
    showError('This card number failed the Luhn (Mod 10) checksum.');
  }
}

// --- UI Update Helpers ---
function updateUI(state, status, message, brandIcon = '') {
  resultStatus.textContent = status;
  resultMessage.textContent = message;
  resultBrand.innerHTML = brandIcon;

  // Remove old classes
  resultsBox.classList.remove('bg-gray-50', 'border-gray-200', 'bg-green-50', 'border-green-200', 'bg-red-50', 'border-red-200');
  resultStatus.classList.remove('text-gray-700', 'text-green-800', 'text-red-800');
  resultMessage.classList.remove('text-gray-600', 'text-green-700', 'text-red-700');
  
  switch (state) {
    case 'valid':
      resultIcon.innerHTML = ICONS.valid;
      resultsBox.classList.add('bg-green-50', 'border-green-200');
      resultStatus.classList.add('text-green-800');
      resultMessage.classList.add('text-green-700');
      break;
    case 'invalid':
      resultIcon.innerHTML = ICONS.invalid;
      resultsBox.classList.add('bg-red-50', 'border-red-200');
      resultStatus.classList.add('text-red-800');
      resultMessage.classList.add('text-red-700');
      break;
    default:
      resultIcon.innerHTML = ICONS.default;
      resultsBox.classList.add('bg-gray-50', 'border-gray-200');
      resultStatus.classList.add('text-gray-700');
      resultMessage.classList.add('text-gray-600');
  }
}

function showError(message) {
  errorDiv.textContent = message;
  ccNumberInput.setAttribute('aria-invalid', 'true');
  ccNumberInput.classList.add('border-red-500');
  ccNumberInput.classList.remove('border-gray-300');
}

function clearError() {
  errorDiv.textContent = '';
  ccNumberInput.setAttribute('aria-invalid', 'false');
  ccNumberInput.classList.remove('border-red-500');
  ccNumberInput.classList.add('border-gray-300');
}

// --- Event Listeners ---
// Real-time validation on input for instant feedback
ccNumberInput.addEventListener('input', validate);

// Clear button
clearBtn.addEventListener('click', () => {
  ccNumberInput.value = '';
  validate(); // Resets the UI
  ccNumberInput.focus();
});

// Mobile menu toggle logic from template
const menuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
if (menuToggle && mobileMenu) {
  menuToggle.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
    const isExpanded = !mobileMenu.classList.contains('hidden');
    menuToggle.setAttribute('aria-expanded', isExpanded.toString());
    menuToggle.setAttribute('aria-label', isExpanded ? 'Close menu' : 'Open menu');
  });
}
});
</script>

</body></html>
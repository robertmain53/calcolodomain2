<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/nebraska-income-tax">





 
<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg">
<link rel="shortcut icon" href="https://calcdomain.com/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png">
<link rel="manifest" href="https://calcdomain.com/site.webmanifest">
<meta charset="utf-8">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Nebraska State Income Tax Calculator</title>
<meta content="Nebraska income tax calculator for 2024. Estimate your Nebraska state income tax by filing status and taxable income. Mobile-first, WCAG 2.1 AA accessible, and optimized for Core Web Vitals." name="description">
<meta content="Ugo Candido" name="author">

<meta content="#ffffff" name="theme-color">
<style>
    /* ======================================================================
       Critical, mobile-first CSS (accessible, high-contrast, fast)
       ====================================================================== */
    :root{
      --primary:#005A9C; --primary-600:#003F6E;
      --text:#212529; --muted:#6C757D;
      --bg:#F8F9FA; --surface:#FFFFFF;
      --border:#DEE2E6; --success:#198754; --danger:#DC3545;
      --radius:12px; --radius-sm:8px;
      --touch:48px;
      --gap-sm:.5rem; --gap:.75rem; --gap-md:1rem; --gap-lg:2rem;
      --shadow:0 4px 10px rgba(0,0,0,.06);
    }
    *{box-sizing:border-box}
    html{font-size:16px}
    @media (min-width:480px){html{font-size:17px}}
    @media (min-width:1024px){html{font-size:18px}}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background:var(--bg); color:var(--text); line-height:1.6;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    a{color:var(--primary); text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1200px; margin:0 auto; padding:0 1rem}
    .skip-link{
      position:absolute; left:8px; top:-40px; background:var(--primary); color:#fff;
      padding:.5rem .75rem; border-radius:6px; z-index:1000; text-decoration:none; font-weight:700;
    }
    .skip-link:focus{top:8px; outline:3px solid #fff}

    header{
      background:var(--surface); border-bottom:1px solid var(--border);
    }
    .header-bar{
      display:flex; align-items:center; gap:.75rem; padding:.75rem 0;
    }
    .logo{font-weight:800; color:var(--primary); font-size:1.125rem}
    .site-search{margin-left:auto; display:flex; gap:.5rem; align-items:center}
    .site-search input[type="search"]{
      min-height:44px; padding:.6rem .75rem; border:1px solid var(--border); border-radius:8px; width:100%; max-width:260px;
    }
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
      min-height:var(--touch); min-width:var(--touch); padding:.7rem 1rem;
      border-radius:10px; border:1px solid transparent; cursor:pointer; font-weight:700;
    }
    .btn-primary{background:var(--primary); color:#fff; border-color:var(--primary)}
    .btn-primary:hover{background:var(--primary-600); border-color:var(--primary-600)}
    .btn-secondary{background:transparent; color:var(--primary); border-color:var(--primary)}
    .btn-secondary:hover{background:rgba(0,90,156,.08)}
    .btn-ghost{background:transparent; color:var(--primary); border:1px solid transparent}
    .btn-ghost:hover{background:rgba(0,90,156,.08)}

    main{padding:1.25rem 0 2rem}
    nav.breadcrumb{
      font-size:.95rem; color:var(--muted); margin:.25rem 0 1rem;
    }
    h1{font-size:clamp(1.6rem,4.5vw,2.2rem); line-height:1.2; margin:.25rem 0 .5rem; color:#0b3757}
    h2{font-size:clamp(1.35rem,3.5vw,1.8rem); margin:1.75rem 0 .75rem; color:#0b3757}
    h3{font-size:clamp(1.15rem,3vw,1.35rem); margin:1rem 0 .5rem; color:#0b3757}
    p{margin:.5rem 0 1rem}
    ul{margin:.25rem 0 1rem 1.25rem}

    .grid{
      display:grid; gap:1.25rem;
      grid-template-columns:1fr;
    }
    @media (min-width:992px){
      .grid{grid-template-columns:minmax(300px,440px) 1fr}
    }

    .card{
      background:var(--surface); border:1px solid var(--border); border-radius:var(--radius);
      box-shadow:var(--shadow); padding:clamp(1rem,2.5vw,1.5rem);
    }

    /* Calculator form */
    .form-group{margin-bottom:1rem}
    label{display:block; font-weight:700; margin-bottom:.4rem}
    .required::after{content:" *"; color:#c00}
    .help-row{display:flex; align-items:center; gap:.5rem; flex-wrap:wrap}
    .tooltip{
      position:relative; display:inline-block; margin-left:.25rem;
    }
    .tooltip button{
      border:1px solid var(--border); background:var(--surface); color:#111;
      width:32px; height:32px; border-radius:50%; font-weight:800; cursor:pointer;
    }
    .tooltip button:focus{outline:3px solid var(--primary); outline-offset:2px}
    .tooltip .tip{
      display:none; position:relative; background:#0e2a40; color:#fff; padding:.6rem .75rem;
      border-radius:8px; margin-top:.5rem; max-width:54ch;
    }
    .tooltip[aria-expanded="true"] .tip{display:block}

    fieldset{border:1px solid var(--border); border-radius:10px; padding:.75rem}
    legend{font-weight:800; padding:0 .25rem}
    .radio-grid{
      display:grid; grid-template-columns:1fr 1fr; gap:.5rem; margin-top:.5rem;
    }
    .chip{
      display:flex; align-items:center; justify-content:center; gap:.5rem;
      border:1px solid var(--border); border-radius:10px; padding:.6rem; min-height:var(--touch); cursor:pointer;
      font-weight:700; background:#fff;
    }
    .chip input{position:absolute; opacity:0; width:0; height:0}
    .chip:has(input:checked){background:var(--primary); color:#fff; border-color:var(--primary)}
    .chip:has(input:focus-visible){outline:3px solid var(--primary); outline-offset:2px}

    .input-group{position:relative}
    .input-group .unit{
      position:absolute; right:.75rem; top:50%; transform:translateY(-50%); color:var(--muted);
      pointer-events:none;
    }
    .control{
      width:100%; padding:.75rem 2.25rem .75rem .75rem; border:1px solid var(--border); border-radius:10px;
      min-height:var(--touch); font-size:1rem; background:#fff;
    }
    .control:focus{outline:3px solid var(--primary); outline-offset:2px}
    .control[aria-invalid="true"]{border-color:var(--danger)}
    .error{color:var(--danger); font-size:.95rem; margin-top:.25rem; min-height:1.2em}

    details.disclosure{
      border:1px dashed var(--border); border-radius:10px; padding:.5rem .75rem; background:#fff;
    }
    details.disclosure[open]{border-style:solid}
    details.disclosure summary{
      cursor:pointer; font-weight:800; padding:.5rem .25rem; outline:none;
    }
    details.disclosure summary:focus{outline:3px solid var(--primary); border-radius:6px}

    .actions{display:flex; gap:.75rem; flex-wrap:wrap; margin-top:.25rem}
    .results{
      background:var(--bg); border:1px solid var(--border); border-radius:12px;
      padding:1rem; margin-top:1rem; min-height:240px;
    }
    .results h3{margin-top:0}
    .result-row{
      display:flex; justify-content:space-between; align-items:center; padding:.6rem 0;
      border-bottom:1px solid var(--border);
    }
    .result-row:last-child{border-bottom:none}
    .result-label{color:var(--muted)}
    .result-value{font-weight:800; font-size:1.15rem; color:#0f6a2f}

    .formula-box{
      background:#e9f2fb; border:1px solid #b9d6f4; border-radius:10px; padding:1rem; overflow:auto
    }

    footer{
      background:#0b3757; color:#fff; margin-top:2rem; padding:1.5rem 0;
    }
    footer a{color:#fff}
    .author-box{
      font-size:.95rem; color:var(--muted); border-top:1px solid var(--border); padding-top:1rem; margin-top:1.5rem
    }
    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}
  </style>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Nebraska State Income Tax Calculator",
  "description": "Estimate Nebraska state income tax for 2024 by filing status and taxable income. Mobile-first, accessible, and optimized for speed.",
  "url": "https://calcdomain.com/nebraska-income-tax",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  },
  "mainEntity": [
    {
      "@type": "HowTo",
      "name": "How It Works: A Step-by-Step Example",
      "description": "Walkthrough of estimating Nebraska taxable income from gross and computing state income tax using the 2024 schedule.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Choose filing status and year",
          "text": "Select your filing status (Single, Married Filing Jointly, or Head of Household) and the 2024 tax year."
        },
        {
          "@type": "HowToStep",
          "name": "Enter income",
          "text": "Either enter your Nebraska taxable income directly or use the estimator to derive it from your gross income minus pre-tax deductions and a deduction choice (standard or itemized)."
        },
        {
          "@type": "HowToStep",
          "name": "Apply brackets",
          "text": "Tax is computed progressively across Nebraska‚Äôs tax brackets for the chosen filing status."
        },
        {
          "@type": "HowToStep",
          "name": "Apply credits",
          "text": "Subtract any Nebraska nonrefundable or refundable credits you plan to claim. The calculator won‚Äôt reduce tax below zero."
        },
        {
          "@type": "HowToStep",
          "name": "Review results",
          "text": "See your estimated state tax, marginal rate, effective rate, and after-tax income if gross was provided."
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Which tax year does this calculator use?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "It uses the 2024 Nebraska Tax Calculation Schedule. A future update will add additional years as the Department of Revenue publishes new schedules."
          }
        },
        {
          "@type": "Question",
          "name": "What income should I enter?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Enter your Nebraska taxable income if you already know it. Otherwise, use the gross income estimator to approximate taxable income by subtracting pre-tax deductions and a deduction (standard or itemized)."
          }
        },
        {
          "@type": "Question",
          "name": "Are local income taxes included?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Nebraska has no local income tax. The estimate reflects only state income tax before any specialized credits."
          }
        },
        {
          "@type": "Question",
          "name": "Does this include federal taxes and FICA?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No. The calculator estimates Nebraska state income tax only. Federal income tax, Social Security, and Medicare are not included."
          }
        },
        {
          "@type": "Question",
          "name": "Can credits reduce my tax below zero?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "This tool caps tax at zero. Some credits are refundable in practice, but refunds depend on your complete Nebraska Form 1040N filing."
          }
        },
        {
          "@type": "Question",
          "name": "Are the bracket thresholds indexed or subject to change?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, Nebraska schedules are periodically updated by statute. Always consult the latest schedule from the Nebraska Department of Revenue for the year you‚Äôre filing."
          }
        }
      ]
    }
  ]
}
  </script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="search.js" defer=""></script>
<!-- MathJax for LaTeX formulas -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['\(','\)'], ['$', '$']],
      displayMath: [['$','$'], ['\[','\]']]
    },
    svg: { fontCache: 'global' }
  };
</script>
<script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link rel="preload" href="https://calcdomain.com/assets/js/mobile-menu.js" as="script">
<link rel="preload" href="https://calcdomain.com/assets/js/page-enhancements.js" as="script">


<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>
<body>

<a class="skip-link" href="#main">Skip to main content</a>
<header role="banner">
<div class="container header-bar">
CalcDomain
<form aria-label="Site-wide" class="site-search" role="search">
<label class="sr-only" for="q">Search calculators</label>
<input autocomplete="off" id="q" name="q" placeholder="Search calculators‚Ä¶" type="search">
<button aria-label="Submit search" class="btn btn-secondary" type="submit">Search</button>
</form>
</div>
</header>
<main class="container" id="main" role="main">
<nav aria-label="Breadcrumb" class="breadcrumb">
Home / <a href="https://calcdomain.com/finance">Finance</a> / <a href="https://calcdomain.com/subcategories/taxes">US Taxation (State)</a> / Nebraska State Income Tax Calculator
    </nav>
<h1>Nebraska State Income Tax Calculator</h1>
<p>
      Quickly estimate your Nebraska state income tax for 2024. Select your filing status, enter your taxable income (or estimate it from gross), and see your state tax, marginal rate, and effective rate. Designed for accuracy, accessibility, and speed.
    </p>
<div class="grid" id="calculator-grid">
<!-- Calculator -->
<section aria-labelledby="calc-heading" class="card" id="ne-tax-calculator">
<h2 class="sr-only" id="calc-heading">Calculator</h2>
<div class="form-group">
<fieldset aria-describedby="statusHelp">
<legend class="required">Filing status</legend>
<p class="sr-only" id="statusHelp">Choose one filing status</p>
<div aria-label="Filing status" class="radio-grid" role="radiogroup">
<label class="chip">
<input checked="" id="fs-single" name="filingStatus" type="radio" value="single">
<span>Single</span>
</label>
<label class="chip">
<input id="fs-married" name="filingStatus" type="radio" value="mfj">
<span>Married Filing Jointly</span>
</label>
<label class="chip">
<input id="fs-hoh" name="filingStatus" type="radio" value="hoh">
<span>Head of Household</span>
</label>
<label aria-disabled="true" class="chip" title="Coming soon">
<input disabled="" name="filingStatus" type="radio" value="mfs">
<span>Married Filing Separately</span>
</label>
</div>
</fieldset>
</div>
<div class="form-group">
<label class="required" for="taxYear">Tax year</label>
<div class="input-group">
<select aria-describedby="yearErr" aria-required="true" class="control" id="taxYear">
<option selected="" value="2024">2024 (current)</option>
</select>
<span aria-hidden="true" class="unit">üìÖ</span>
</div>
<div aria-live="polite" class="error" id="yearErr" role="alert"></div>
</div>
<div class="form-group">
<fieldset>
<legend class="required">Income input mode</legend>
<div class="radio-grid">
<label class="chip">
<input checked="" id="mode-taxable" name="mode" type="radio" value="taxable">
<span>Enter taxable income</span>
</label>
<label class="chip">
<input id="mode-gross" name="mode" type="radio" value="gross">
<span>Estimate from gross</span>
</label>
</div>
</fieldset>
</div>
<!-- Taxable income direct -->
<div class="form-group" id="taxable-group">
<div class="help-row">
<label class="required" for="taxableIncome">Nebraska taxable income (USD)</label>
<span aria-expanded="false" class="tooltip" id="taxableTip">
<button aria-controls="taxableHelp" aria-expanded="false" aria-label="What is taxable income?" class="btn-ghost" title="What is taxable income?" type="button">?</button>
<div class="tip" id="taxableHelp" role="tooltip">
                Taxable income is the amount after allowable deductions and adjustments per Nebraska rules for the selected year. If unsure, switch to ‚ÄúEstimate from gross.‚Äù
              </div>
</span>
</div>
<div class="input-group">
<input aria-describedby="taxableErr taxableHelp" aria-required="true" class="control" id="taxableIncome" inputmode="decimal" min="0" placeholder="e.g., 55000" step="0.01" type="number">
<span class="unit">$</span>
</div>
<div aria-live="polite" class="error" id="taxableErr" role="alert"></div>
</div>
<!-- Gross-based estimator -->
<details class="disclosure" hidden="" id="gross-panel">
<summary>Gross income estimator (optional)</summary>
<div class="form-group">
<label class="required" for="grossIncome">Annual gross income (USD)</label>
<div class="input-group">
<input aria-describedby="grossErr" aria-required="true" class="control" id="grossIncome" inputmode="decimal" min="0" placeholder="e.g., 75000" step="0.01" type="number">
<span class="unit">$</span>
</div>
<div aria-live="polite" class="error" id="grossErr" role="alert"></div>
</div>
<div class="form-group">
<div class="help-row">
<label for="preTax">Pre-tax deductions (USD)</label>
<span aria-expanded="false" class="tooltip" id="preTaxTip">
<button aria-controls="preTaxHelp" aria-expanded="false" aria-label="What counts as pre-tax deductions?" class="btn-ghost" title="What counts as pre-tax?" type="button">?</button>
<div class="tip" id="preTaxHelp" role="tooltip">
                  Examples: Traditional 401(k), 403(b), 457(b), HSA, FSA, pre-tax health premiums, and other above-the-line adjustments that reduce AGI.
                </div>
</span>
</div>
<div class="input-group">
<input aria-describedby="preTaxErr preTaxHelp" class="control" id="preTax" inputmode="decimal" min="0" placeholder="e.g., 9000" step="0.01" type="number">
<span class="unit">$</span>
</div>
<div aria-live="polite" class="error" id="preTaxErr" role="alert"></div>
</div>
<div class="form-group">
<fieldset>
<legend class="required">Deduction method</legend>
<div class="radio-grid">
<label class="chip">
<input checked="" id="deduct-standard" name="deductionMode" type="radio" value="standard">
<span>Standard (federal)</span>
</label>
<label class="chip">
<input id="deduct-itemized" name="deductionMode" type="radio" value="itemized">
<span>Itemized (enter amount)</span>
</label>
</div>
</fieldset>
</div>
<div class="form-group" id="stdDeductionWrap">
<label for="standardDeduction">Standard deduction (auto)</label>
<div class="input-group">
<input aria-readonly="true" class="control" id="standardDeduction" inputmode="decimal" min="0" readonly="" step="0.01" type="number">
<span class="unit">$</span>
</div>
<p class="sr-only" id="stdNote">Standard deduction updates with filing status and year.</p>
</div>
<div class="form-group" hidden="" id="itemizedWrap">
<label class="required" for="itemizedDeduction">Itemized deduction (USD)</label>
<div class="input-group">
<input aria-describedby="itemizedErr" class="control" id="itemizedDeduction" inputmode="decimal" min="0" placeholder="e.g., 18000" step="0.01" type="number">
<span class="unit">$</span>
</div>
<div aria-live="polite" class="error" id="itemizedErr" role="alert"></div>
</div>
</details>
<div class="form-group">
<div class="help-row">
<label for="credits">Nebraska tax credits (optional, USD)</label>
<span aria-expanded="false" class="tooltip" id="creditsTip">
<button aria-controls="creditsHelp" aria-expanded="false" aria-label="About credits" class="btn-ghost" title="About credits" type="button">?</button>
<div class="tip" id="creditsHelp" role="tooltip">
                Enter any state credits you expect to claim (e.g., Nebraska EITC share, nonrefundable credits). The tool won‚Äôt reduce tax below zero.
              </div>
</span>
</div>
<div class="input-group">
<input aria-describedby="creditsErr creditsHelp" class="control" id="credits" inputmode="decimal" min="0" placeholder="0.00" step="0.01" type="number">
<span class="unit">$</span>
</div>
<div aria-live="polite" class="error" id="creditsErr" role="alert"></div>
</div>
<div class="actions">
<button aria-label="Calculate Nebraska income tax" class="btn btn-primary" id="calcBtn" type="button">Calculate</button>
<button aria-label="Reset form" class="btn btn-secondary" id="resetBtn" type="button">Reset</button>
</div>
<div aria-atomic="true" aria-live="polite" class="results">
<h3>Results</h3>
<div class="result-row">
<span class="result-label">Taxable income (NE)</span>
<span class="result-value" id="rTaxable">$0.00</span>
</div>
<div class="result-row">
<span class="result-label">State income tax</span>
<span class="result-value" id="rTax">$0.00</span>
</div>
<div class="result-row">
<span class="result-label">Marginal state rate</span>
<span class="result-value" id="rMarginal">0.00%</span>
</div>
<div class="result-row">
<span class="result-label">Effective state rate</span>
<span class="result-value" id="rEffective">0.00%</span>
</div>
<div class="result-row" hidden="" id="afterTaxRow">
<span class="result-label">After-tax income (gross ‚àí state tax)</span>
<span class="result-value" id="rAfterTax">$0.00</span>
</div>
</div>
</section>
<!-- Authoritative content -->
<article class="card" id="content">
<section>
<h2>Data Source and Methodology</h2>
<p>
            Authoritative data: Nebraska Department of Revenue ‚Äî ‚Äú2024 Tax Calculation Schedule‚Äù (Form 1040N Instructions), 2024. Direct link:
            <a href="https://revenue.nebraska.gov/sites/default/files/doc/tax-forms/2024/2024_Tax_Calculation_Schedule.pdf" rel="noopener" target="_blank">
              revenue.nebraska.gov ‚Ä¶/2024_Tax_Calculation_Schedule.pdf
            </a>
</p>
<p><strong>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</strong></p>
<p>
            This calculator applies Nebraska‚Äôs progressive tax brackets for the selected filing status to your Nebraska taxable income and subtracts any credits entered. When using the gross estimator, taxable income is approximated for planning only; your actual taxable income depends on your complete return.
          </p>
</section>
<section>
<h2>The Formula Explained</h2>
<div class="formula-box">
<p>
              For a given filing status with bracket set B = { (r_i, L_i, U_i) }, where r_i is the marginal rate,
              L_i and U_i are the lower and upper bounds, Nebraska tax T on taxable income x is:
            </p>
<p>
              \( T(x) \;=\; \max\!\Bigg(0, \sum_i r_i \cdot \max\big(0,\; \min(x,\; U_i) - L_i\big) \Bigg) \;-\; C \)
            </p>
<p>with credits C capped so that T(x) ‚â• 0.</p>
<p>
              If you estimate taxable income from gross:
              \( \text{TaxableIncome} \;=\; \max\big(0,\; \text{Gross} - \text{PreTax} - \text{Deduction}\big) \)
            </p>
<p>
              Effective rate:
              \( \text{Effective} \;=\; \begin{cases}
                \dfrac{T(x)}{x} &amp; x \gt 0\\
                0 &amp; x = 0
              \end{cases} \)
            </p>
</div>
</section>
<section>
<h2>Glossary of Variables</h2>
<ul>
<li>Nebraska taxable income (USD): Income subject to Nebraska state income tax after allowable deductions and adjustments.</li>
<li>Gross income (USD): Total income before pre-tax contributions and deductions.</li>
<li>Pre-tax deductions (USD): Contributions and adjustments that reduce AGI (e.g., 401(k), HSA, pre-tax health premiums).</li>
<li>Standard deduction (USD): The federal standard deduction for your filing status (used here solely to estimate taxable income).</li>
<li>Itemized deductions (USD): If you itemize, the total allowable itemized amount you plan to claim.</li>
<li>Nebraska credits (USD): State tax credits you expect to claim; this tool caps tax at zero.</li>
<li>Marginal rate: The rate applied to your last dollar of taxable income under Nebraska brackets.</li>
<li>Effective rate: Total Nebraska tax divided by taxable income.</li>
<li>After-tax income: Gross income minus estimated Nebraska state income tax (if gross was provided).</li>
</ul>
</section>
<section>
<h2>How It Works: A Step-by-Step Example</h2>
<p>
            Scenario: Single filer, tax year 2024. Gross income = $75,000; pre-tax deductions = $9,000; standard deduction (single, 2024) = $14,600; credits = $0.
          </p>
<ol>
<li>Estimate taxable income: \( 75{,}000 - 9{,}000 - 14{,}600 = 51{,}400 \) ‚Üí taxable = $51,400.</li>
<li>Apply Nebraska brackets (Single, 2024) progressively to $51,400.</li>
<li>Sum the tax for each bracket segment to get total tax T.</li>
<li>Apply credits (none here), ensuring tax does not go below $0.</li>
<li>Effective rate = T / 51,400; Marginal rate equals the rate of the highest bracket reached.</li>
</ol>
<p>
            Note: This is a planning estimate. Your actual Nebraska taxable income may differ based on your return (Form 1040N and schedules).
          </p>
</section>
<section>
<h2>Frequently Asked Questions (FAQ)</h2>
<div>
<h3>Does Nebraska have a progressive income tax?</h3>
<p>Yes. Nebraska taxes income in brackets. Portions of income are taxed at increasing marginal rates.</p>
<h3>What filing statuses are supported?</h3>
<p>Single, Married Filing Jointly, and Head of Household are supported. Married Filing Separately will be added in a future update.</p>
<h3>Is the standard deduction Nebraska-specific?</h3>
<p>Nebraska starts from your federal amounts. This tool uses the federal standard deduction for the gross estimator only.</p>
<h3>Can I itemize instead of using the standard deduction?</h3>
<p>Yes. Toggle ‚ÄúItemized‚Äù in the estimator and enter your anticipated itemized total to approximate taxable income.</p>
<h3>Why is my effective rate lower than my marginal rate?</h3>
<p>Because only the top portion of your income is taxed at the highest bracket. Earlier portions are taxed at lower rates.</p>
<h3>Will this match my final refund or balance due?</h3>
<p>No. Withholding, credits, and other return details affect your final outcome. This is an estimate of tax liability only.</p>
<h3>Where can I verify the 2024 brackets?</h3>
<p>See the Nebraska Department of Revenue‚Äôs official schedule linked above in the Data Source section.</p>
</div>
</section>
<div aria-label="Authorship and review" class="author-box">
<p>
            Tool developed by <strong>Ugo Candido</strong>. Content verified by <strong>CalcDomain Editorial</strong>.<br>
            Last reviewed for accuracy on: <time datetime="" id="reviewDate">2025-09-13</time>.
          </p>
</div>

<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[','\]</div>
  <pre class="auditspine-mono">','</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[= (sel, ctx=document) =&gt; Array.from(ctx.querySelectorAll(sel)); const fmtUSD = new Intl.NumberFormat('en-US', {style:'currency', currency:'USD', maximumFractionDigits:2}); const fmtPct = (v)=&gt; (isFinite(v) ? (v*100).toFixed(2)+'%' : '0.00%'); // Data: 2024 brackets (rates and thresholds) from Nebraska 2024 Tax Calculation Schedule // Note: Values below reflect commonly published 2024 thresholds/rates. // Always verify against the official schedule linked in the Data Source section. const BRACKETS_2024 = { single: [ { upTo: 3370, rate: 0.0246, lower: 0 }, { upTo: 20590, rate: 0.0351, lower: 3370 }, { upTo: 33180, rate: 0.0501, lower: 20590 }, { upTo: Infinity, rate: 0.0664, lower: 33180 } ], mfj: [ { upTo: 6730, rate: 0.0246, lower: 0 }, { upTo: 41190, rate: 0.0351, lower: 6730 }, { upTo: 66380, rate: 0.0501, lower: 41190 }, { upTo: Infinity, rate: 0.0664, lower: 66380 } ], // For 2024, many references align HOH thresholds closely with Single. Verify against the schedule for filing. hoh: [ { upTo: 3370, rate: 0.0246, lower: 0 }, { upTo: 20590, rate: 0.0351, lower: 3370 }, { upTo: 33180, rate: 0.0501, lower: 20590 }, { upTo: Infinity, rate: 0.0664, lower: 33180 } ] }; // Standard deduction (federal) 2024 for estimator convenience const STD_DED_2024 = { single: 14600, mfj: 29200, hoh: 21900 }; // Elements const taxYear = $('#taxYear'); const modeTaxable = $('#mode-taxable'); const modeGross = $('#mode-gross'); const taxableGroup = $('#taxable-group'); const grossPanel = $('#gross-panel'); const taxableIncome = $('#taxableIncome'); const grossIncome = $('#grossIncome'); const preTax = $('#preTax'); const itemizedWrap = $('#itemizedWrap'); const itemizedDeduction = $('#itemizedDeduction'); const stdDeductionWrap = $('#stdDeductionWrap'); const standardDeduction = $('#standardDeduction'); const credits = $('#credits'); const calcBtn = $('#calcBtn'); const resetBtn = $('#resetBtn'); const rTaxable = $('#rTaxable'); const rTax = $('#rTax'); const rMarginal = $('#rMarginal'); const rEffective = $('#rEffective'); const rAfterTax = $('#rAfterTax'); const afterTaxRow = $('#afterTaxRow'); // Filing status const getStatus = () =&gt; { const sel =\]</div>
  <pre class="auditspine-mono">= (sel, ctx=document) =&gt; Array.from(ctx.querySelectorAll(sel)); const fmtUSD = new Intl.NumberFormat('en-US', {style:'currency', currency:'USD', maximumFractionDigits:2}); const fmtPct = (v)=&gt; (isFinite(v) ? (v*100).toFixed(2)+'%' : '0.00%'); // Data: 2024 brackets (rates and thresholds) from Nebraska 2024 Tax Calculation Schedule // Note: Values below reflect commonly published 2024 thresholds/rates. // Always verify against the official schedule linked in the Data Source section. const BRACKETS_2024 = { single: [ { upTo: 3370, rate: 0.0246, lower: 0 }, { upTo: 20590, rate: 0.0351, lower: 3370 }, { upTo: 33180, rate: 0.0501, lower: 20590 }, { upTo: Infinity, rate: 0.0664, lower: 33180 } ], mfj: [ { upTo: 6730, rate: 0.0246, lower: 0 }, { upTo: 41190, rate: 0.0351, lower: 6730 }, { upTo: 66380, rate: 0.0501, lower: 41190 }, { upTo: Infinity, rate: 0.0664, lower: 66380 } ], // For 2024, many references align HOH thresholds closely with Single. Verify against the schedule for filing. hoh: [ { upTo: 3370, rate: 0.0246, lower: 0 }, { upTo: 20590, rate: 0.0351, lower: 3370 }, { upTo: 33180, rate: 0.0501, lower: 20590 }, { upTo: Infinity, rate: 0.0664, lower: 33180 } ] }; // Standard deduction (federal) 2024 for estimator convenience const STD_DED_2024 = { single: 14600, mfj: 29200, hoh: 21900 }; // Elements const taxYear = $('#taxYear'); const modeTaxable = $('#mode-taxable'); const modeGross = $('#mode-gross'); const taxableGroup = $('#taxable-group'); const grossPanel = $('#gross-panel'); const taxableIncome = $('#taxableIncome'); const grossIncome = $('#grossIncome'); const preTax = $('#preTax'); const itemizedWrap = $('#itemizedWrap'); const itemizedDeduction = $('#itemizedDeduction'); const stdDeductionWrap = $('#stdDeductionWrap'); const standardDeduction = $('#standardDeduction'); const credits = $('#credits'); const calcBtn = $('#calcBtn'); const resetBtn = $('#resetBtn'); const rTaxable = $('#rTaxable'); const rTax = $('#rTax'); const rMarginal = $('#rMarginal'); const rEffective = $('#rEffective'); const rAfterTax = $('#rAfterTax'); const afterTaxRow = $('#afterTaxRow'); // Filing status const getStatus = () =&gt; { const sel =</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[('input[name="deductionMode"]').find(r =&gt; r.checked); return sel ? sel.value : 'standard'; }; // Tooltips toggle function setupTooltip(containerId, btnSelector='button'){ const tip = $('#'+containerId); const wrap = tip?.parentElement; const btn = wrap?.querySelector(btnSelector); if(!tip || !btn || !wrap) return; const toggle = ()=&gt;{ const expanded = wrap.getAttribute('aria-expanded') === 'true'; wrap.setAttribute('aria-expanded', String(!expanded)); btn.setAttribute('aria-expanded', String(!expanded)); }; btn.addEventListener('click', toggle); btn.addEventListener('keydown', (e)=&gt;{ if(e.key === ' ' || e.key === 'Enter'){ e.preventDefault(); toggle(); } }); } setupTooltip('taxableHelp'); setupTooltip('preTaxHelp'); setupTooltip('creditsHelp'); // Validation helpers function setError(input, msg, errId){ if(!input) return; input.setAttribute('aria-invalid', 'true'); const err = $('#'+errId); if(err){ err.textContent = msg || ''; } } function clearError(input, errId){ if(!input) return; input.setAttribute('aria-invalid', 'false'); const err = $('#'+errId); if(err){ err.textContent = ''; } } // Attach on-blur validation function validateNumber(input, errId, opts = {required:false, min:0}){ const v = input.value.trim(); if(opts.required &amp;&amp; v === ''){ setError(input, 'Please enter a value.', errId); return false; } if(v !== ''){ const num = Number(v); if(!isFinite(num)){ setError(input, 'Please enter a valid number.', errId); return false; } if(typeof opts.min === 'number' &amp;&amp; num &lt; opts.min){ setError(input, `Value must be ‚â• ${opts.min}.`, errId); return false; } } clearError(input, errId); return true; } taxableIncome.addEventListener('blur', ()=&gt; validateNumber(taxableIncome, 'taxableErr', {required: modeTaxable.checked, min:0})); grossIncome.addEventListener('blur', ()=&gt; validateNumber(grossIncome, 'grossErr', {required: modeGross.checked, min:0})); preTax.addEventListener('blur', ()=&gt; validateNumber(preTax, 'preTaxErr', {required:false, min:0})); itemizedDeduction.addEventListener('blur', ()=&gt; validateNumber(itemizedDeduction, 'itemizedErr', {required: getDeductionMode()==='itemized' &amp;&amp; modeGross.checked, min:0})); credits.addEventListener('blur', ()=&gt; validateNumber(credits, 'creditsErr', {required:false, min:0})); // Mode switching function syncMode(){ const usingGross = modeGross.checked; if(usingGross){ grossPanel.hidden = false; taxableGroup.hidden = true; // Set required flags programmatically for SR/validation taxableIncome.removeAttribute('aria-required'); grossIncome.setAttribute('aria-required', 'true'); // Deduction UI swap const dm = getDeductionMode(); if(dm === 'standard'){ itemizedWrap.hidden = true; stdDeductionWrap.hidden = false; }else{ itemizedWrap.hidden = false; stdDeductionWrap.hidden = true; } }else{ grossPanel.hidden = true; taxableGroup.hidden = false; taxableIncome.setAttribute('aria-required', 'true'); grossIncome.removeAttribute('aria-required'); } // Reset validation messages on switch ['taxableErr','grossErr','preTaxErr','itemizedErr'].forEach(id=&gt;{ const el = $('#'+id); if(el) el.textContent = ''; }); }\]</div>
  <pre class="auditspine-mono">('input[name="deductionMode"]').find(r =&gt; r.checked); return sel ? sel.value : 'standard'; }; // Tooltips toggle function setupTooltip(containerId, btnSelector='button'){ const tip = $('#'+containerId); const wrap = tip?.parentElement; const btn = wrap?.querySelector(btnSelector); if(!tip || !btn || !wrap) return; const toggle = ()=&gt;{ const expanded = wrap.getAttribute('aria-expanded') === 'true'; wrap.setAttribute('aria-expanded', String(!expanded)); btn.setAttribute('aria-expanded', String(!expanded)); }; btn.addEventListener('click', toggle); btn.addEventListener('keydown', (e)=&gt;{ if(e.key === ' ' || e.key === 'Enter'){ e.preventDefault(); toggle(); } }); } setupTooltip('taxableHelp'); setupTooltip('preTaxHelp'); setupTooltip('creditsHelp'); // Validation helpers function setError(input, msg, errId){ if(!input) return; input.setAttribute('aria-invalid', 'true'); const err = $('#'+errId); if(err){ err.textContent = msg || ''; } } function clearError(input, errId){ if(!input) return; input.setAttribute('aria-invalid', 'false'); const err = $('#'+errId); if(err){ err.textContent = ''; } } // Attach on-blur validation function validateNumber(input, errId, opts = {required:false, min:0}){ const v = input.value.trim(); if(opts.required &amp;&amp; v === ''){ setError(input, 'Please enter a value.', errId); return false; } if(v !== ''){ const num = Number(v); if(!isFinite(num)){ setError(input, 'Please enter a valid number.', errId); return false; } if(typeof opts.min === 'number' &amp;&amp; num &lt; opts.min){ setError(input, `Value must be ‚â• ${opts.min}.`, errId); return false; } } clearError(input, errId); return true; } taxableIncome.addEventListener('blur', ()=&gt; validateNumber(taxableIncome, 'taxableErr', {required: modeTaxable.checked, min:0})); grossIncome.addEventListener('blur', ()=&gt; validateNumber(grossIncome, 'grossErr', {required: modeGross.checked, min:0})); preTax.addEventListener('blur', ()=&gt; validateNumber(preTax, 'preTaxErr', {required:false, min:0})); itemizedDeduction.addEventListener('blur', ()=&gt; validateNumber(itemizedDeduction, 'itemizedErr', {required: getDeductionMode()==='itemized' &amp;&amp; modeGross.checked, min:0})); credits.addEventListener('blur', ()=&gt; validateNumber(credits, 'creditsErr', {required:false, min:0})); // Mode switching function syncMode(){ const usingGross = modeGross.checked; if(usingGross){ grossPanel.hidden = false; taxableGroup.hidden = true; // Set required flags programmatically for SR/validation taxableIncome.removeAttribute('aria-required'); grossIncome.setAttribute('aria-required', 'true'); // Deduction UI swap const dm = getDeductionMode(); if(dm === 'standard'){ itemizedWrap.hidden = true; stdDeductionWrap.hidden = false; }else{ itemizedWrap.hidden = false; stdDeductionWrap.hidden = true; } }else{ grossPanel.hidden = true; taxableGroup.hidden = false; taxableIncome.setAttribute('aria-required', 'true'); grossIncome.removeAttribute('aria-required'); } // Reset validation messages on switch ['taxableErr','grossErr','preTaxErr','itemizedErr'].forEach(id=&gt;{ const el = $('#'+id); if(el) el.textContent = ''; }); }</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[('input[name="deductionMode"]').forEach(r =&gt; r.addEventListener('change', ()=&gt;{ if(!modeGross.checked) return; const dm = getDeductionMode(); if(dm === 'standard'){ itemizedWrap.hidden = true; stdDeductionWrap.hidden = false; }else{ itemizedWrap.hidden = false; stdDeductionWrap.hidden = true; } })); // Standard deduction calc (for estimator only) function computeStandardDeduction(){ const year = taxYear.value; const fs = getStatus(); let sd = 0; if(year === '2024'){ sd = STD_DED_2024[fs] ?? 0; } standardDeduction.value = sd.toFixed(2); } taxYear.addEventListener('change', computeStandardDeduction);\]</div>
  <pre class="auditspine-mono">('input[name="deductionMode"]').forEach(r =&gt; r.addEventListener('change', ()=&gt;{ if(!modeGross.checked) return; const dm = getDeductionMode(); if(dm === 'standard'){ itemizedWrap.hidden = true; stdDeductionWrap.hidden = false; }else{ itemizedWrap.hidden = false; stdDeductionWrap.hidden = true; } })); // Standard deduction calc (for estimator only) function computeStandardDeduction(){ const year = taxYear.value; const fs = getStatus(); let sd = 0; if(year === '2024'){ sd = STD_DED_2024[fs] ?? 0; } standardDeduction.value = sd.toFixed(2); } taxYear.addEventListener('change', computeStandardDeduction);</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">For a given filing status with bracket set B = { (r_i, L_i, U_i) }, where r_i is the marginal rate, L_i and U_i are the lower and upper bounds, Nebraska tax T on taxable income x is: \( T(x) \;=\; \max\!\Bigg(0, \sum_i r_i \cdot \max\big(0,\; \min(x,\; U_i) - L_i\big) \Bigg) \;-\; C \) with credits C capped so that T(x) ‚â• 0. If you estimate taxable income from gross: \( \text{TaxableIncome} \;=\; \max\big(0,\; \text{Gross} - \text{PreTax} - \text{Deduction}\big) \) Effective rate: \( \text{Effective} \;=\; \begin{cases} \dfrac{T(x)}{x} &amp; x \gt 0\\ 0 &amp; x = 0 \end{cases} \)</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><span class="auditspine-mono">T</span> = property tax (annual or monthly depending on input) <em>(currency)</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>Finance</strong> ‚Äî calcdomain.com ¬∑ Accessed 2026-01-19<br><a href="https://calcdomain.com/finance" target="_blank" rel="nofollow noopener">https://calcdomain.com/finance</a></li>
<li><strong>US Taxation (State)</strong> ‚Äî calcdomain.com ¬∑ Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/taxes" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/taxes</a></li>
<li><strong>revenue.nebraska.gov ‚Ä¶/2024_Tax_Calculation_Schedule.pdf</strong> ‚Äî revenue.nebraska.gov ¬∑ Accessed 2026-01-19<br><a href="https://revenue.nebraska.gov/sites/default/files/doc/tax-forms/2024/2024_Tax_Calculation_Schedule.pdf" target="_blank" rel="nofollow noopener">https://revenue.nebraska.gov/sites/default/files/doc/tax-forms/2024/2024_Tax_Calculation_Schedule.pdf</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> ¬∑ 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ¬∑
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
</div>
</main>
<!-- Standard Footer --> 
<script defer="">
    (function(){
      'use strict';

      // Utilities
      const $ = (sel, ctx=document) => ctx.querySelector(sel);
      const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));
      const fmtUSD = new Intl.NumberFormat('en-US', {style:'currency', currency:'USD', maximumFractionDigits:2});
      const fmtPct = (v)=> (isFinite(v) ? (v*100).toFixed(2)+'%' : '0.00%');

      // Data: 2024 brackets (rates and thresholds) from Nebraska 2024 Tax Calculation Schedule
      // Note: Values below reflect commonly published 2024 thresholds/rates.
      // Always verify against the official schedule linked in the Data Source section.
      const BRACKETS_2024 = {
        single: [
          { upTo: 3370, rate: 0.0246, lower: 0 },
          { upTo: 20590, rate: 0.0351, lower: 3370 },
          { upTo: 33180, rate: 0.0501, lower: 20590 },
          { upTo: Infinity, rate: 0.0664, lower: 33180 }
        ],
        mfj: [
          { upTo: 6730, rate: 0.0246, lower: 0 },
          { upTo: 41190, rate: 0.0351, lower: 6730 },
          { upTo: 66380, rate: 0.0501, lower: 41190 },
          { upTo: Infinity, rate: 0.0664, lower: 66380 }
        ],
        // For 2024, many references align HOH thresholds closely with Single. Verify against the schedule for filing.
        hoh: [
          { upTo: 3370, rate: 0.0246, lower: 0 },
          { upTo: 20590, rate: 0.0351, lower: 3370 },
          { upTo: 33180, rate: 0.0501, lower: 20590 },
          { upTo: Infinity, rate: 0.0664, lower: 33180 }
        ]
      };

      // Standard deduction (federal) 2024 for estimator convenience
      const STD_DED_2024 = {
        single: 14600,
        mfj: 29200,
        hoh: 21900
      };

      // Elements
      const taxYear = $('#taxYear');
      const modeTaxable = $('#mode-taxable');
      const modeGross = $('#mode-gross');

      const taxableGroup = $('#taxable-group');
      const grossPanel = $('#gross-panel');

      const taxableIncome = $('#taxableIncome');
      const grossIncome = $('#grossIncome');
      const preTax = $('#preTax');
      const itemizedWrap = $('#itemizedWrap');
      const itemizedDeduction = $('#itemizedDeduction');
      const stdDeductionWrap = $('#stdDeductionWrap');
      const standardDeduction = $('#standardDeduction');

      const credits = $('#credits');

      const calcBtn = $('#calcBtn');
      const resetBtn = $('#resetBtn');

      const rTaxable = $('#rTaxable');
      const rTax = $('#rTax');
      const rMarginal = $('#rMarginal');
      const rEffective = $('#rEffective');
      const rAfterTax = $('#rAfterTax');
      const afterTaxRow = $('#afterTaxRow');

      // Filing status
      const getStatus = () => {
        const sel = $$('input[name="filingStatus"]').find(r => r.checked);
        return sel ? sel.value : 'single';
      };

      // Deduction mode
      const getDeductionMode = () => {
        const sel = $$('input[name="deductionMode"]').find(r => r.checked);
        return sel ? sel.value : 'standard';
      };

      // Tooltips toggle
      function setupTooltip(containerId, btnSelector='button'){
        const tip = $('#'+containerId);
        const wrap = tip?.parentElement;
        const btn = wrap?.querySelector(btnSelector);
        if(!tip || !btn || !wrap) return;
        const toggle = ()=>{
          const expanded = wrap.getAttribute('aria-expanded') === 'true';
          wrap.setAttribute('aria-expanded', String(!expanded));
          btn.setAttribute('aria-expanded', String(!expanded));
        };
        btn.addEventListener('click', toggle);
        btn.addEventListener('keydown', (e)=>{
          if(e.key === ' ' || e.key === 'Enter'){ e.preventDefault(); toggle(); }
        });
      }

      setupTooltip('taxableHelp');
      setupTooltip('preTaxHelp');
      setupTooltip('creditsHelp');

      // Validation helpers
      function setError(input, msg, errId){
        if(!input) return;
        input.setAttribute('aria-invalid', 'true');
        const err = $('#'+errId);
        if(err){ err.textContent = msg || ''; }
      }
      function clearError(input, errId){
        if(!input) return;
        input.setAttribute('aria-invalid', 'false');
        const err = $('#'+errId);
        if(err){ err.textContent = ''; }
      }

      // Attach on-blur validation
      function validateNumber(input, errId, opts = {required:false, min:0}){
        const v = input.value.trim();
        if(opts.required && v === ''){
          setError(input, 'Please enter a value.', errId);
          return false;
        }
        if(v !== ''){
          const num = Number(v);
          if(!isFinite(num)){
            setError(input, 'Please enter a valid number.', errId);
            return false;
          }
          if(typeof opts.min === 'number' && num < opts.min){
            setError(input, `Value must be ‚â• ${opts.min}.`, errId);
            return false;
          }
        }
        clearError(input, errId);
        return true;
      }

      taxableIncome.addEventListener('blur', ()=> validateNumber(taxableIncome, 'taxableErr', {required: modeTaxable.checked, min:0}));
      grossIncome.addEventListener('blur', ()=> validateNumber(grossIncome, 'grossErr', {required: modeGross.checked, min:0}));
      preTax.addEventListener('blur', ()=> validateNumber(preTax, 'preTaxErr', {required:false, min:0}));
      itemizedDeduction.addEventListener('blur', ()=> validateNumber(itemizedDeduction, 'itemizedErr', {required: getDeductionMode()==='itemized' && modeGross.checked, min:0}));
      credits.addEventListener('blur', ()=> validateNumber(credits, 'creditsErr', {required:false, min:0}));

      // Mode switching
      function syncMode(){
        const usingGross = modeGross.checked;
        if(usingGross){
          grossPanel.hidden = false;
          taxableGroup.hidden = true;
          // Set required flags programmatically for SR/validation
          taxableIncome.removeAttribute('aria-required');
          grossIncome.setAttribute('aria-required', 'true');
          // Deduction UI swap
          const dm = getDeductionMode();
          if(dm === 'standard'){
            itemizedWrap.hidden = true;
            stdDeductionWrap.hidden = false;
          }else{
            itemizedWrap.hidden = false;
            stdDeductionWrap.hidden = true;
          }
        }else{
          grossPanel.hidden = true;
          taxableGroup.hidden = false;
          taxableIncome.setAttribute('aria-required', 'true');
          grossIncome.removeAttribute('aria-required');
        }
        // Reset validation messages on switch
        ['taxableErr','grossErr','preTaxErr','itemizedErr'].forEach(id=>{
          const el = $('#'+id);
          if(el) el.textContent = '';
        });
      }
      $$('input[name="mode"]').forEach(r => r.addEventListener('change', ()=>{ syncMode(); computeStandardDeduction(); }));

      // Deduction mode switch
      $$('input[name="deductionMode"]').forEach(r => r.addEventListener('change', ()=>{
        if(!modeGross.checked) return;
        const dm = getDeductionMode();
        if(dm === 'standard'){
          itemizedWrap.hidden = true;
          stdDeductionWrap.hidden = false;
        }else{
          itemizedWrap.hidden = false;
          stdDeductionWrap.hidden = true;
        }
      }));

      // Standard deduction calc (for estimator only)
      function computeStandardDeduction(){
        const year = taxYear.value;
        const fs = getStatus();
        let sd = 0;
        if(year === '2024'){
          sd = STD_DED_2024[fs] ?? 0;
        }
        standardDeduction.value = sd.toFixed(2);
      }
      taxYear.addEventListener('change', computeStandardDeduction);
      $$('input[name="filingStatus"]').forEach(r => r.addEventListener('change', computeStandardDeduction));

      // Core tax computation
      function computeTaxLiability(taxable, fs, year, creditInput){
        const yearBrackets = (year === '2024') ? BRACKETS_2024 : BRACKETS_2024;
        const brackets = yearBrackets[fs] || yearBrackets.single;

        let remaining = Math.max(0, taxable);
        let tax = 0;
        let marginalRate = 0;

        for(const b of brackets){
          const width = Math.max(0, Math.min(remaining, b.upTo) - b.lower);
          if(width > 0){
            tax += width * b.rate;
            marginalRate = b.rate;
          }
        }

        const credits = Math.max(0, creditInput || 0);
        tax = Math.max(0, tax - credits);

        return { tax, marginalRate };
      }

      function estimateTaxableFromGross(fs, year){
        const gross = Number(grossIncome.value || 0);
        const pretax = Number(preTax.value || 0);
        const dm = getDeductionMode();
        let deduction = 0;

        if(dm === 'standard'){
          if(year === '2024'){
            deduction = STD_DED_2024[fs] ?? 0;
          }
        }else{
          deduction = Number(itemizedDeduction.value || 0);
        }

        const taxable = Math.max(0, gross - pretax - deduction);
        return { taxable, gross, deduction };
      }

      function renderResults({taxable, tax, marginalRate, effectiveRate, afterTax}){
        rTaxable.textContent = fmtUSD.format(taxable);
        rTax.textContent = fmtUSD.format(tax);
        rMarginal.textContent = fmtPct(marginalRate);
        rEffective.textContent = fmtPct(effectiveRate);
        if(isFinite(afterTax) && afterTax >= 0){
          afterTaxRow.hidden = false;
          rAfterTax.textContent = fmtUSD.format(afterTax);
        }else{
          afterTaxRow.hidden = true;
        }
      }

      function calculate(){
        // quick validation per mode
        const usingGross = modeGross.checked;
        const fs = getStatus();
        const year = taxYear.value;
        const creditsVal = Number(credits.value || 0);

        // Validate required fields inline
        if(usingGross){
          const v1 = validateNumber(grossIncome, 'grossErr', {required:true, min:0});
          const v2 = validateNumber(preTax, 'preTaxErr', {required:false, min:0});
          const dm = getDeductionMode();
          let v3 = true;
          if(dm === 'itemized'){
            v3 = validateNumber(itemizedDeduction, 'itemizedErr', {required:true, min:0});
          }
          if(!(v1 && v2 && v3)) return;
        }else{
          const ok = validateNumber(taxableIncome, 'taxableErr', {required:true, min:0});
          if(!ok) return;
        }
        validateNumber(credits, 'creditsErr', {required:false, min:0});

        let taxable = 0, gross = NaN;
        if(usingGross){
          const est = estimateTaxableFromGross(fs, year);
          taxable = est.taxable;
          gross = est.gross;
        }else{
          taxable = Number(taxableIncome.value || 0);
        }

        const { tax, marginalRate } = computeTaxLiability(taxable, fs, year, creditsVal);
        const effectiveRate = taxable > 0 ? tax / taxable : 0;
        const afterTax = isFinite(gross) ? Math.max(0, gross - tax) : NaN;

        renderResults({taxable, tax, marginalRate, effectiveRate, afterTax});
      }

      // Wire actions
      calcBtn.addEventListener('click', calculate);
      ['input','change','blur'].forEach(evt=>{
        document.getElementById('ne-tax-calculator').addEventListener(evt, (e)=>{
          // Live update without being intrusive; debounce minimal via rAF
          if(['INPUT','SELECT'].includes(e.target.tagName)){
            window.requestAnimationFrame(()=> calculate());
          }
        });
      });

      resetBtn.addEventListener('click', ()=>{
        // Reset fields
        $('#fs-single').checked = true;
        taxYear.value = '2024';
        modeTaxable.checked = true;
        modeGross.checked = false;

        taxableIncome.value = '';
        grossIncome.value = '';
        preTax.value = '';
        itemizedDeduction.value = '';
        credits.value = '';

        // Clear errors
        ['taxableIncome','grossIncome','preTax','itemizedDeduction','credits'].forEach(id=>{
          const input = $('#'+id);
          if(input) input.setAttribute('aria-invalid','false');
        });
        ['taxableErr','grossErr','preTaxErr','itemizedErr','creditsErr'].forEach(id=>{
          const err = $('#'+id);
          if(err) err.textContent = '';
        });

        syncMode();
        computeStandardDeduction();

        renderResults({taxable:0, tax:0, marginalRate:0, effectiveRate:0, afterTax:NaN});
      });

      // Initialize
      syncMode();
      computeStandardDeduction();
      renderResults({taxable:0, tax:0, marginalRate:0, effectiveRate:0, afterTax:NaN});

      // Accessibility: set today's date in author box datetime
      const rd = $('#reviewDate');
      if(rd){
        try{
          const today = new Date();
          rd.setAttribute('datetime', today.toISOString().slice(0,10));
          // Keep human text as provided
        }catch(_e){}
      }
    })();
  </script>
<!-- Lightweight LaTeX rendering for formulas -->
<script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['$', '$']] },
      svg: { fontCache: 'none' }
    };
  </script>
<script crossorigin="anonymous" defer="" integrity="sha384-2y3KQd5qH9M3c2uJQF9Q18yV+K4b4vM8G1KDPG14tH4m8Z7u4xBq4T5Yj2y0H5Ax" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.min.js"></script>

</body></html>
<!DOCTYPE html><html lang="en"><head>
    <link rel="canonical" href="https://calcdomain.com/bmr">
    <title>BMR (Basal Metabolic Rate) Calculator | CalcDomain</title>
    <meta name="description" content="Professional BMR calculator to estimate your Basal Metabolic Rate and daily calorie needs (TDEE) using Mifflin–St Jeor, Harris–Benedict, or Katch–McArdle formulas. Accurate, accessible, and mobile-first.">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <meta property="og:type" content="website">
    <meta property="og:title" content="BMR (Basal Metabolic Rate) Calculator | CalcDomain">
    <meta property="og:description" content="Professional BMR calculator to estimate your Basal Metabolic Rate and daily calorie needs (TDEE) using Mifflin–St Jeor, Harris–Benedict, or Katch–McArdle formulas.">
    <meta property="og:url" content="https://calcdomain.com/bmr">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="BMR (Basal Metabolic Rate) Calculator | CalcDomain">
    <meta name="twitter:description" content="Professional BMR calculator to estimate your Basal Metabolic Rate and daily calorie needs (TDEE) using Mifflin–St Jeor, Harris–Benedict, or Katch–McArdle formulas.">

    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background: #f8fafc; color: #1f2937; }
        .card-hover { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .content-card { background: #fff; }
        .meta-section { background: #fff; }
        .calc-hero { display: grid; gap: 1.5rem; }
        @media (min-width: 1024px) { .calc-hero { grid-template-columns: minmax(0, 1fr) minmax(0, 1fr); } }
        .jury-grid { display: grid; }
        .card { background: #fff; border: 1px solid #e5e7eb; border-radius: 0.75rem; padding: 1.25rem; box-shadow: 0 10px 20px -10px rgba(15, 23, 42, 0.25); }
        #inputsCard .form-group:not(:last-child) { margin-bottom: 1rem; }
        .form-group { margin-bottom: 0.75rem; }
        .label-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.4rem; font-weight: 600; color: #1f2937; }
        .form-control { width: 100%; min-height: 48px; padding: 0.7rem 0.9rem; border: 1px solid #d1d5db; border-radius: 0.75rem; font-size: 1rem; background: #fff; }
        .form-control:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2); }
        .input-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 0.75rem; }
        .suffix { position: absolute; right: 0.9rem; top: 50%; transform: translateY(-50%); color: #6b7280; font-size: 0.9rem; pointer-events: none; }
        .input-row { position: relative; }
        .radio-group { display: flex; gap: 0.5rem; padding: 0.25rem; border: 1px solid #d1d5db; border-radius: 0.75rem; background: #fff; }
        .radio-group input[type="radio"] { position: absolute; opacity: 0; width: 1px; height: 1px; }
        .radio-group label { flex: 1; text-align: center; padding: 0.6rem 0.5rem; border-radius: 0.5rem; cursor: pointer; border: 1px solid transparent; font-weight: 600; }
        .radio-group input[type="radio"]:checked + label { background: #2563eb; color: #fff; border-color: transparent; }
        .radio-group input[type="radio"]:focus-visible + label { outline: 3px solid #2563eb; outline-offset: 2px; }
        .tooltip-toggle { background: transparent; border: 1px solid #d1d5db; color: #1f2937; width: 32px; height: 32px; border-radius: 999px; font-weight: 700; cursor: pointer; }
        .tooltip-content { border-left: 3px solid #2563eb; background: #eff6ff; padding: 0.75rem 0.9rem; border-radius: 0.5rem; color: #0f172a; margin-top: 0.4rem; font-size: 0.9rem; display: none; }
        .tooltip-content[data-open="true"] { display: block; }
        .error-message { color: #dc2626; font-size: 0.875rem; margin-top: 0.3rem; min-height: 1.25rem; }
        .hint { font-size: 0.9rem; color: #475569; }
        .result-box { background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border: 1px solid #bfdbfe; border-radius: 0.75rem; padding: 1.5rem; text-align: center; }
        .result-value { font-size: 2.25rem; font-weight: 700; color: #1e3a8a; }
        .kpi-row { display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; font-size: 0.9rem; }
        .kpi-row:last-child { border-bottom: none; }
        .kpi-label { color: #6b7280; }
        .kpi-value { font-weight: 700; color: #111827; }
        .btn { display: flex; align-items: center; justify-content: center; border-radius: 0.75rem; font-weight: 600; padding: 0.75rem 1rem; border: none; cursor: pointer; }
        .btn-secondary { border: 1px solid #d1d5db; background: #fff; color: #374151; }
        .btn-primary { background: #2563eb; color: #fff; }
        .btn-secondary:hover { background: #f9fafb; }
        .btn-primary:hover { background: #1d4ed8; }
        .alert-error { display: none; padding: 0.75rem; margin-top: 0.5rem; background: #fef2f2; border-left: 4px solid #dc2626; color: #991b1b; border-radius: 0.5rem; font-size: 0.875rem; }
        .calc-input { border-radius: 0.5rem; }
        .form-control select { border-radius: 0.75rem; }
        .sticky-box { position: sticky; top: 1.5rem; }
        .formula-box { background: #111827; color: #e5e7eb; border-radius: 0.75rem; padding: 1rem; font-family: 'Source Code Pro', SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; overflow-x: auto; }
        .formula-box p { margin: 0.4rem 0; }
        .dl { display: grid; gap: 0.25rem; }
        .dl dt { font-weight: 600; }
        .dl dd { margin: 0 0 0.75rem 0; color: #475569; }
        details summary { cursor: pointer; font-weight: 600; }
    </style>

    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "BMR (Basal Metabolic Rate) Calculator",
        "description": "Professional BMR calculator using Mifflin–St Jeor, Harris–Benedict, and Katch–McArdle formulas. Estimate BMR and daily calorie needs (TDEE) with mobile-first, accessible UI.",
        "url": "https://calcdomain.com/bmr",
        "mainEntity": [
            {
                "@type": "HowTo",
                "name": "How It Works: A Step-by-Step Example",
                "description": "Example using the Mifflin–St Jeor equation to estimate BMR and TDEE.",
                "totalTime": "PT1M",
                "tool": [],
                "step": [
                    {
                        "@type": "HowToStep",
                        "name": "Choose sex and units",
                        "text": "Select Male or Female and Metric or US units.",
                        "url": "#how-example"
                    },
                    {
                        "@type": "HowToStep",
                        "name": "Enter age, height, and weight",
                        "text": "Example: age 30, height 180 cm, weight 75 kg.",
                        "url": "#how-example"
                    },
                    {
                        "@type": "HowToStep",
                        "name": "Pick formula",
                        "text": "Select Mifflin–St Jeor (recommended for healthy adults).",
                        "url": "#how-example"
                    },
                    {
                        "@type": "HowToStep",
                        "name": "Review results",
                        "text": "BMR ≈ 1730 kcal/day and TDEE ≈ 2682 kcal/day for moderate activity.",
                        "url": "#results-heading"
                    }
                ]
            },
            {
                "@type": "FAQPage",
                "mainEntity": [
                    {
                        "@type": "Question",
                        "name": "Which BMR formula is most accurate?",
                        "acceptedAnswer": {
                            "@type": "Answer",
                            "text": "For most healthy adults, the Mifflin–St Jeor equation is widely recommended by researchers for its accuracy. If you know your body fat percentage, Katch–McArdle can be very precise."
                        }
                    },
                    {
                        "@type": "Question",
                        "name": "What’s the difference between BMR and TDEE?",
                        "acceptedAnswer": {
                            "@type": "Answer",
                            "text": "BMR is the calories your body needs at rest. TDEE is your daily calories factoring in activity level (BMR multiplied by an activity factor)."
                        }
                    },
                    {
                        "@type": "Question",
                        "name": "Should I use metric or US units?",
                        "acceptedAnswer": {
                            "@type": "Answer",
                            "text": "Use whichever you’re comfortable with. The calculator converts internally to keep results consistent."
                        }
                    },
                    {
                        "@type": "Question",
                        "name": "Do age and sex matter for BMR?",
                        "acceptedAnswer": {
                            "@type": "Answer",
                            "text": "Yes. BMR generally decreases with age, and males often have higher BMR than females due to body composition differences."
                        }
                    },
                    {
                        "@type": "Question",
                        "name": "What if my weight changes?",
                        "acceptedAnswer": {
                            "@type": "Answer",
                            "text": "Recalculate. BMR and TDEE change with weight, especially with significant gains or losses."
                        }
                    },
                    {
                        "@type": "Question",
                        "name": "Is this medical advice?",
                        "acceptedAnswer": {
                            "@type": "Answer",
                            "text": "No. This tool provides educational estimates. Consult a qualified healthcare professional for personalized guidance."
                        }
                    }
                ]
            }
        ],
        "reviewedBy": {
            "@type": "Person",
            "name": "Ugo Candido"
        },
        "dateModified": "2026-01-19"
    }</script>

    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com" },
            { "@type": "ListItem", "position": 2, "name": "Health & Fitness", "item": "https://calcdomain.com/categories/health-fitness" },
            { "@type": "ListItem", "position": 3, "name": "Health Metrics", "item": "https://calcdomain.com/subcategories/health-metrics" }
        ]
    }</script>

    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds financial and health calculators and educational resources to help readers make better decisions with transparent models."
    }</script>
</head>
<body class="bg-gray-50 text-gray-800">
    <header id="siteHeader" class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="nav container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a class="brand text-2xl font-bold text-blue-600" href="https://calcdomain.com">CalcDomain</a>
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" autocomplete="off">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
              <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
            </div>
          </div>
          <div class="navRight hidden md:flex items-center space-x-6">
            <a class="pill text-gray-700 hover:text-blue-600 transition-colors" href="https://calcdomain.com/search">Advanced Search</a>
            <span class="pill text-gray-700 hover:text-blue-600 transition-colors">Categories</span>
          </div>
          <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
        <nav id="mobile-menu" class="md:hidden mt-4 hidden" aria-label="Mobile menu" role="navigation">
          <div class="mb-4">
            <div class="relative">
              <input type="search" id="mobile-search-input" placeholder="Search calculators..." class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
            <a href="https://calcdomain.com/#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
          </div>
        </nav>
      </nav>
    </header>

    <main id="mainContent" class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
        <ol class="flex flex-wrap items-center gap-1">
          <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
          <li class="text-gray-400">/</li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-blue-600 hover:underline">Health &amp; Fitness</a></li>
          <li class="text-gray-400">/</li>
          <li><a href="https://calcdomain.com/subcategories/health-metrics" class="text-blue-600 hover:underline">Health Metrics</a></li>
          <li class="text-gray-400">/</li>
          <li><span class="text-gray-800">BMR (Basal Metabolic Rate) Calculator</span></li>
        </ol>
      </nav>

      <div class="space-y-3">
        <h1 id="pageTitle" class="text-3xl font-bold text-gray-900">BMR (Basal Metabolic Rate) Calculator</h1>
        <p id="pageSub" class="sub text-lg text-gray-600">Professional BMR calculator to estimate your Basal Metabolic Rate and daily calorie needs (TDEE) using Mifflin–St Jeor, Harris–Benedict, or Katch–McArdle formulas. Accurate, accessible, and mobile-first.</p>
        <div id="errorBox" class="alert alert-error" role="alert" aria-live="polite"></div>
      </div>

      <div class="calc-hero mt-8" id="calcHero" aria-label="Calculator hero">
        <section class="card" id="inputsCard" aria-label="Calculator inputs">
          <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
            <h3 class="text-lg font-bold text-gray-700 mb-4 mt-0">Enter your details</h3>
            <div class="form-group" role="group" aria-labelledby="units-label">
              <div class="label-row">
                <span id="units-label">Measurement system</span>
              </div>
              <div class="radio-group" id="unitGroup">
                <input checked id="unitsMetric" name="units" type="radio" value="metric">
                <label for="unitsMetric">Metric</label>
                <input id="unitsUS" name="units" type="radio" value="us">
                <label for="unitsUS">US / Imperial</label>
              </div>
            </div>

            <div class="form-group" role="group" aria-labelledby="sex-label">
              <div class="label-row">
                <span id="sex-label">Sex at birth *</span>
              </div>
              <div class="radio-group" id="sexGroup">
                <input aria-required="true" checked id="sexMale" name="sex" type="radio" value="male">
                <label for="sexMale">Male</label>
                <input aria-required="true" id="sexFemale" name="sex" type="radio" value="female">
                <label for="sexFemale">Female</label>
              </div>
            </div>

            <div class="form-group">
              <div class="label-row">
                <label for="age">Age *</label>
              </div>
              <div class="input-row">
                <input aria-describedby="ageError ageTip" aria-required="true" class="form-control" id="age" inputmode="numeric" max="120" min="10" type="number" value="30">
                <span aria-hidden="true" class="suffix">years</span>
              </div>
              <div class="hint" id="ageTip">Enter age in whole years (10–120).</div>
              <div aria-live="polite" class="error-message" id="ageError" role="alert"></div>
            </div>

            <div class="form-group" id="heightMetricGroup">
              <div class="label-row">
                <label for="heightCm">Height *</label>
              </div>
              <div class="input-row">
                <input aria-describedby="heightError" aria-required="true" class="form-control" id="heightCm" inputmode="decimal" max="250" min="100" step="0.1" type="number" value="175">
                <span aria-hidden="true" class="suffix">cm</span>
              </div>
              <div aria-live="polite" class="error-message" id="heightError" role="alert"></div>
            </div>
            <div class="form-group" hidden id="heightUSGroup">
              <div class="label-row">
                <label for="heightFt">Height *</label>
              </div>
              <div class="input-grid">
                <div class="input-row">
                  <input aria-describedby="heightUSError" class="form-control" id="heightFt" inputmode="numeric" max="8" min="3" placeholder="ft" step="1" type="number">
                  <span aria-hidden="true" class="suffix">ft</span>
                </div>
                <div class="input-row">
                  <input aria-describedby="heightUSError" class="form-control" id="heightIn" inputmode="decimal" max="11.99" min="0" placeholder="in" step="0.1" type="number">
                  <span aria-hidden="true" class="suffix">in</span>
                </div>
              </div>
              <div aria-live="polite" class="error-message" id="heightUSError" role="alert"></div>
            </div>

            <div class="form-group" id="weightMetricGroup">
              <div class="label-row">
                <label for="weightKg">Weight *</label>
              </div>
              <div class="input-row">
                <input aria-describedby="weightError" aria-required="true" class="form-control" id="weightKg" inputmode="decimal" max="300" min="30" step="0.1" type="number" value="70">
                <span aria-hidden="true" class="suffix">kg</span>
              </div>
              <div aria-live="polite" class="error-message" id="weightError" role="alert"></div>
            </div>
            <div class="form-group" hidden id="weightUSGroup">
              <div class="label-row">
                <label for="weightLb">Weight *</label>
              </div>
              <div class="input-row">
                <input aria-describedby="weightUSError" class="form-control" id="weightLb" inputmode="decimal" max="660" min="66" placeholder="e.g., 170" step="0.1" type="number">
                <span aria-hidden="true" class="suffix">lb</span>
              </div>
              <div aria-live="polite" class="error-message" id="weightUSError" role="alert"></div>
            </div>

            <div class="form-group" role="group" aria-labelledby="formula-label">
              <div class="label-row">
                <label id="formula-label">Formula *</label>
                <button class="tooltip-toggle" aria-controls="formulaTip" aria-expanded="false" id="formulaTipToggle" type="button">?</button>
              </div>
              <div class="radio-group" id="formulaGroup">
                <input aria-required="true" checked id="formulaMSJ" name="formula" type="radio" value="msj">
                <label for="formulaMSJ">Mifflin–St Jeor</label>
                <input id="formulaHB" name="formula" type="radio" value="hb">
                <label for="formulaHB">Harris–Benedict</label>
                <input id="formulaKM" name="formula" type="radio" value="km">
                <label for="formulaKM">Katch–McArdle</label>
              </div>
              <div class="tooltip-content" id="formulaTip">Mifflin–St Jeor is widely recommended for adults. Katch–McArdle requires body fat % and can be very precise if that value is accurate.</div>
            </div>

            <div class="form-group" hidden id="bodyFatGroup">
              <div class="label-row">
                <label for="bodyFat">Body fat % *</label>
                <button class="tooltip-toggle" aria-controls="bfTip" aria-expanded="false" id="bfTipToggle" type="button">?</button>
              </div>
              <div class="input-row">
                <input aria-describedby="bodyFatError bfTip" class="form-control" id="bodyFat" inputmode="decimal" max="60" min="3" step="0.1" type="number">
                <span aria-hidden="true" class="suffix">%</span>
              </div>
              <div class="tooltip-content" id="bfTip">You can estimate body fat via DEXA, BIA scales, calipers, or visual charts. For Katch–McArdle, reasonable accuracy is important.</div>
              <div aria-live="polite" class="error-message" id="bodyFatError" role="alert"></div>
            </div>

            <div class="form-group">
              <div class="label-row">
                <label for="activity">Activity level</label>
                <button class="tooltip-toggle" aria-controls="actTip" aria-expanded="false" id="actTipToggle" type="button">?</button>
              </div>
              <select aria-describedby="actTip" class="form-control" id="activity">
                <option value="1.2">Sedentary (little or no exercise)</option>
                <option value="1.375">Lightly active (1–3 days/week)</option>
                <option selected value="1.55">Moderately active (3–5 days/week)</option>
                <option value="1.725">Very active (6–7 days/week)</option>
                <option value="1.9">Extra active (hard training or physical job)</option>
              </select>
              <div class="tooltip-content" id="actTip">TDEE = BMR × Activity Factor. Choose the factor that best reflects your weekly activity.</div>
            </div>

            <div class="flex gap-3 mt-6">
              <button class="btn btn-primary flex-1" id="calcBtn" type="button">Calculate</button>
              <button class="btn btn-secondary flex-1 btnSecondary" id="resetBtn" type="button">Reset</button>
            </div>
            <div data-canon-btnrow="1" style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;"></div>
            <p class="hint mt-4" id="disclaimer">Educational purposes only. Not medical advice.</p>
            <noscript><p class="hint">JavaScript is required for live calculations. Enable JavaScript to use this BMR calculator.</p></noscript>
          </div>
        </section>

        <section class="card sticky-box" id="resultsCard" aria-label="Calculator results">
          <div class="result-box mb-4">
            <div class="text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Total Daily Energy Expenditure</div>
            <div class="result-value" id="tdeeOut">—</div>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4">
            <div class="kpi-row">
              <span class="kpi-label">Basal Metabolic Rate (BMR)</span>
              <span class="kpi-value" id="bmrOut">—</span>
            </div>
            <div class="kpi-row">
              <span class="kpi-label">Mild weight loss target (−15%)</span>
              <span class="kpi-value" id="lossOut">—</span>
            </div>
            <div class="kpi-row">
              <span class="kpi-label">Mild weight gain target (+10%)</span>
              <span class="kpi-value" id="gainOut">—</span>
            </div>
          </div>
          <p class="mt-4 text-sm text-gray-600">Estimates are rounded. Individual needs vary by genetics, hormones, and body composition.</p>
        </section>
      </div>
      <section class="card content-card space-y-6" id="howToUse" aria-label="How to use and methodology">
        <h2 class="text-2xl font-semibold">How to Use This Calculator</h2>
        <p>Select the measurement system first, then choose your sex, age, height, and weight. Pick the formula that matches the information you have, enter body fat % when using Katch–McArdle, and choose the activity level that best reflects your weekly habits. Click Calculate to refresh BMR and TDEE instantly.</p>

        <h2 class="text-2xl font-semibold mt-6">Methodology</h2>
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
          <p>The calculator converts every input to kilograms and centimeters, then applies the selected fixed-rate formula to estimate the resting energy need. Activity multipliers and optional body-fat adjustments are applied after the base BMR is computed.</p>
        </div>

        <h2 class="text-2xl font-semibold mt-6">Data Source and Methodology</h2>
        <p>This calculator implements three peer-reviewed, widely cited equations:</p>
        <ul class="list-disc pl-5 space-y-2 text-gray-700">
          <li>Mifflin MD, St Jeor ST, et al. A new predictive equation for resting energy expenditure in healthy individuals. American Journal of Clinical Nutrition. 1990;51(2):241–247.</li>
          <li>Harris JA, Benedict FG. A Biometric Study of Basal Metabolism in Man. 1919; revised (Roza &amp; Shizgal, 1984) coefficients clarify the constants used here.</li>
          <li>Katch VL, McArdle WD. Nutrition, Weight Control, and Exercise. Houghton Mifflin; 1977. Fat-free mass based REE estimation.</li>
        </ul>
        <p>Refer to the Citations section below for the original sources.</p>
        <p><strong>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</strong></p>

        <h2 class="text-2xl font-semibold mt-6">Glossary of Variables</h2>
        <dl class="dl">
          <dt>Age (years)</dt>
          <dd>Age in whole years.</dd>
          <dt>Height (cm or ft/in)</dt>
          <dd>Body height. Converted to centimeters for computation.</dd>
          <dt>Weight (kg or lb)</dt>
          <dd>Body mass. Converted to kilograms for computation.</dd>
          <dt>Body fat %</dt>
          <dd>Percentage of body weight from fat. Used for Katch–McArdle only.</dd>
          <dt>BMR (kcal/day)</dt>
          <dd>Basal Metabolic Rate: calories needed at complete rest.</dd>
          <dt>TDEE (kcal/day)</dt>
          <dd>Total Daily Energy Expenditure: BMR multiplied by an activity factor.</dd>
        </dl>

        <h2 class="text-2xl font-semibold mt-6" id="how-example">How It Works: A Step-by-Step Example</h2>
        <p><strong>Scenario:</strong> Male, 30 years, 180 cm, 75 kg, Moderately active (AF=1.55), formula: Mifflin–St Jeor.</p>
        <ol class="list-decimal pl-5 space-y-2 text-gray-700">
          <li>Compute BMR: \( 10 \times 75 + 6.25 \times 180 - 5 \times 30 + 5 = 750 + 1125 - 150 + 5 = 1730\ \mathrm{kcal/day} \).</li>
          <li>Estimate TDEE: \( 1730 \times 1.55 \approx 2682\ \mathrm{kcal/day} \).</li>
          <li>Mild weight loss target (−15%): \( 2682 \times 0.85 \approx 2280\ \mathrm{kcal/day} \).</li>
          <li>Mild weight gain target (+10%): \( 2682 \times 1.10 \approx 2950\ \mathrm{kcal/day} \).</li>
        </ol>

        <h2 class="text-2xl font-semibold mt-6">Frequently Asked Questions (FAQ)</h2>
        <div class="space-y-4 text-gray-700">
          <div>
            <h3 class="text-xl font-semibold">Is BMR the same as RMR?</h3>
            <p>No. BMR is measured under stricter lab conditions than Resting Metabolic Rate (RMR). Many tools use the terms interchangeably, but BMR estimates are generally slightly lower than RMR.</p>
          </div>
          <div>
            <h3 class="text-xl font-semibold">Which formula should I choose?</h3>
            <p>Mifflin–St Jeor is a strong default for most adults. If you reliably know your body fat percentage, Katch–McArdle can be very precise. Harris–Benedict is a classic alternative.</p>
          </div>
          <div>
            <h3 class="text-xl font-semibold">How accurate are these estimates?</h3>
            <p>They’re population-based models. Individual metabolism can deviate due to genetics, hormonal status, medications, and lean mass. Treat results as starting points.</p>
          </div>
          <div>
            <h3 class="text-xl font-semibold">What activity factor should I use?</h3>
            <p>Pick the one that best reflects your weekly training and occupation. If unsure, start lower and adjust based on weight trends.</p>
          </div>
          <div>
            <h3 class="text-xl font-semibold">Do I need to change calories every day?</h3>
            <p>Short-term fluctuations are normal. Reassess every 2–4 weeks and adjust calories if average weight changes differ from your target trend.</p>
          </div>
          <div>
            <h3 class="text-xl font-semibold">Can this calculator help with macros?</h3>
            <p>It focuses on energy needs. For macronutrient planning, use a dedicated macro calculator after establishing TDEE.</p>
          </div>
          <div>
            <h3 class="text-xl font-semibold">Is there a medical restriction?</h3>
            <p>If you have medical conditions, are pregnant, or under 18, consult a qualified professional. This tool is not medical advice.</p>
          </div>
        </div>
      </section>
      <section class="card meta-section space-y-4" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
        <details id="formulaDetails">
          <summary class="cursor-pointer font-bold text-gray-800">Formulas</summary>
          <div class="mt-3 p-3 bg-white border border-gray-200 rounded-lg text-sm">
            <p><strong>Mifflin–St Jeor:</strong></p>
            <p>Male: \( \mathrm{BMR} = 10\,w + 6.25\,h - 5\,a + 5 \)</p>
            <p>Female: \( \mathrm{BMR} = 10\,w + 6.25\,h - 5\,a - 161 \)</p>
            <p class="hint">w = weight in kilograms, h = height in centimeters, a = age in years.</p>
            <p class="mt-4"><strong>Revised Harris–Benedict (Roza &amp; Shizgal 1984):</strong></p>
            <p>Male: \( \mathrm{BMR} = 13.397\,w + 4.799\,h - 5.677\,a + 88.362 \)</p>
            <p>Female: \( \mathrm{BMR} = 9.247\,w + 3.098\,h - 4.330\,a + 447.593 \)</p>
            <p class="mt-4"><strong>Katch–McArdle:</strong></p>
            <p>\( \mathrm{BMR} = 370 + 21.6 \times \mathrm{LBM} \), with \( \mathrm{LBM} = w \times (1 - \mathrm{bf}) \)</p>
            <p class="hint">bf = body fat fraction (e.g., 20% → 0.20)</p>
            <p class="mt-4"><strong>Activity factor (TDEE):</strong> \( \mathrm{TDEE} = \mathrm{BMR} \times \mathrm{AF} \)</p>
          </div>
        </details>
        <details id="citationDetails" class="mt-3">
          <summary class="cursor-pointer font-bold text-gray-800">Citations</summary>
          <div class="mt-3 p-3 bg-white border border-gray-200 rounded-lg text-sm">
            <p><strong>Sources (authoritative):</strong></p>
            <ul class="list-disc list-inside space-y-2 text-gray-700">
              <li>Mifflin MD, St Jeor ST, et al. "A new predictive equation for resting energy expenditure in healthy individuals." American Journal of Clinical Nutrition. 1990;51(2):241–247. DOI: 10.1093/ajcn/51.2.241. <a href="https://academic.oup.com/ajcn/article-abstract/51/2/241/4695071" rel="noopener" class="text-blue-600 hover:underline">academic.oup.com</a></li>
              <li>Harris JA, Benedict FG. "A Biometric Study of Basal Metabolism in Man." 1919; Roza &amp; Shizgal 1984 revisions. <a href="https://pubmed.ncbi.nlm.nih.gov/6741853/" rel="noopener" class="text-blue-600 hover:underline">pubmed.ncbi.nlm.nih.gov/6741853/</a></li>
              <li>Katch VL, McArdle WD. <em>Nutrition, Weight Control, and Exercise.</em> Houghton Mifflin; 1977. Fat-free mass based REE estimation.</li>
            </ul>
          </div>
        </details>
        <details id="changelogDetails" class="mt-3">
          <summary class="cursor-pointer font-bold text-gray-800">Changelog</summary>
          <div class="mt-3 p-3 bg-white border border-gray-200 rounded-lg text-sm">
            <div>
              <strong>Version:</strong> 0.1.0-draft<br>
              <strong>Last code update:</strong> 2026-01-19
            </div>
            <ul class="list-disc list-inside mt-3 text-gray-700">
              <li>Initial audit spec draft generated from HTML extraction (review required).</li>
              <li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
              <li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
            </ul>
          </div>
        </details>
        <div class="flex gap-2 mt-4 flex-wrap">
          <span class="inline-flex items-center gap-1 border border-gray-200 px-3 py-1 rounded-full bg-white text-sm"><span class="text-green-600 font-bold">✓</span> Verified by Ugo Candido</span>
          <span class="inline-flex items-center border border-gray-200 px-3 py-1 rounded-full bg-white text-sm">Last Updated: 2026-01-19</span>
          <span class="inline-flex items-center border border-gray-200 px-3 py-1 rounded-full bg-white text-sm">Version 0.1.0-draft</span>
        </div>
      
          <div class="badge" id="versionBadge">Version 1.5.0</div></section>
    </main>
    <footer id="siteFooter" class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.</p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
              <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health &amp; Fitness</a></li>
              <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math &amp; Conversions</a></li>
              <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle &amp; Everyday</a></li>
              <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction &amp; DIY</a></li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
              <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
              <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
              <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
              <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
              <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
              <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
              <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
              <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
            </ul>
          </div>
        </div>
        <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
          <p>© 2026 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
        </div>
      </div>
    </footer>
    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      window.MathJax = {
        tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['$$','$$'], ['\\[','\\]']] },
        svg: { fontCache: 'global' }
      };
    </script>
    <script>
      (function () {
        var loadMathJax = function () {
          if (window.__mathjaxLoading) return;
          window.__mathjaxLoading = true;
          var script = document.createElement("script");
          script.id = "MathJax-script";
          script.async = true;
          script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
          document.head.appendChild(script);
        };

        var target = document.querySelector(
          ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
        );

        if (!target) return;

        if ("IntersectionObserver" in window) {
          var observer = new IntersectionObserver(
            function (entries) {
              if (entries.some(function (entry) { return entry.isIntersecting; })) {
                observer.disconnect();
                loadMathJax();
              }
            },
            { rootMargin: "200px" }
          );
          observer.observe(target);
        } else {
          window.addEventListener(
            "load",
            function () {
              setTimeout(loadMathJax, 1000);
            },
            { once: true }
          );
        }
      })();
    </script>
<script>
(function() {
  'use strict';

  const els = {
    unitsMetric: document.getElementById('unitsMetric'),
    unitsUS: document.getElementById('unitsUS'),
    sexMale: document.getElementById('sexMale'),
    sexFemale: document.getElementById('sexFemale'),
    age: document.getElementById('age'),
    heightCm: document.getElementById('heightCm'),
    heightFt: document.getElementById('heightFt'),
    heightIn: document.getElementById('heightIn'),
    weightKg: document.getElementById('weightKg'),
    weightLb: document.getElementById('weightLb'),
    heightMetricGroup: document.getElementById('heightMetricGroup'),
    heightUSGroup: document.getElementById('heightUSGroup'),
    weightMetricGroup: document.getElementById('weightMetricGroup'),
    weightUSGroup: document.getElementById('weightUSGroup'),
    formulaRadios: Array.from(document.querySelectorAll('#formulaGroup input[name="formula"]')),
    bodyFatGroup: document.getElementById('bodyFatGroup'),
    bodyFat: document.getElementById('bodyFat'),
    activity: document.getElementById('activity'),
    ageError: document.getElementById('ageError'),
    heightError: document.getElementById('heightError'),
    heightUSError: document.getElementById('heightUSError'),
    weightError: document.getElementById('weightError'),
    weightUSError: document.getElementById('weightUSError'),
    bodyFatError: document.getElementById('bodyFatError'),
    errorBox: document.getElementById('errorBox'),
    bmrOut: document.getElementById('bmrOut'),
    tdeeOut: document.getElementById('tdeeOut'),
    lossOut: document.getElementById('lossOut'),
    gainOut: document.getElementById('gainOut'),
    calcBtn: document.getElementById('calcBtn'),
    resetBtn: document.getElementById('resetBtn')
  };

  const debounce = (fn, delay = 100) => {
    let timer;
    return (...args) => {
      clearTimeout(timer);
      timer = setTimeout(() => fn(...args), delay);
    };
  };

  function parseNumber(value) {
    const num = parseFloat(value);
    return Number.isFinite(num) ? num : NaN;
  }

  function getSelectedFormula() {
    const checked = els.formulaRadios.find((radio) => radio.checked);
    return checked ? checked.value : 'msj';
  }

  function parseInputs() {
    const units = els.unitsMetric.checked ? 'metric' : 'us';
    const formula = getSelectedFormula();
    const sex = els.sexMale.checked ? 'male' : 'female';
    const age = parseNumber(els.age.value);

    let heightCm = NaN;
    if (units === 'metric') {
      heightCm = parseNumber(els.heightCm.value);
    } else {
      const ft = parseNumber(els.heightFt.value);
      const inch = parseNumber(els.heightIn.value);
      if (Number.isFinite(ft) || Number.isFinite(inch)) {
        const totalIn = (Number.isFinite(ft) ? ft : 0) * 12 + (Number.isFinite(inch) ? inch : 0);
        if (totalIn > 0) heightCm = totalIn * 2.54;
      }
    }

    let weightKg = NaN;
    if (units === 'metric') {
      weightKg = parseNumber(els.weightKg.value);
    } else {
      const lb = parseNumber(els.weightLb.value);
      if (Number.isFinite(lb) && lb > 0) {
        weightKg = lb * 0.45359237;
      }
    }

    const bodyFat = parseNumber(els.bodyFat.value);
    const activity = parseNumber(els.activity.value);

    return {
      units,
      formula,
      sex,
      age,
      heightCm,
      weightKg,
      bodyFat,
      activity
    };
  }

  function validate(inputs) {
    const errors = [];
    const fieldErrors = {
      age: '',
      heightMetric: '',
      heightUS: '',
      weightMetric: '',
      weightUS: '',
      bodyFat: ''
    };

    const flagError = (field, message) => {
      fieldErrors[field] = message;
      if (errors.length === 0) {
        errors.push('Please fix highlighted fields before continuing.');
      }
    };

    if (!Number.isFinite(inputs.age)) {
      flagError('age', 'Please enter your age.');
    } else if (inputs.age < 10 || inputs.age > 120) {
      flagError('age', 'Enter an age between 10 and 120.');
    }

    const heightKey = inputs.units === 'metric' ? 'heightMetric' : 'heightUS';
    if (!Number.isFinite(inputs.heightCm)) {
      flagError(heightKey, 'Please enter your height.');
    } else if (inputs.heightCm < 100 || inputs.heightCm > 250) {
      flagError(heightKey, 'Enter a height between 100 and 250 cm.');
    }

    const weightKey = inputs.units === 'metric' ? 'weightMetric' : 'weightUS';
    if (!Number.isFinite(inputs.weightKg)) {
      flagError(weightKey, 'Please enter your weight.');
    } else if (inputs.weightKg < 30 || inputs.weightKg > 300) {
      flagError(weightKey, 'Enter a weight between 30 and 300 kg.');
    }

    if (inputs.formula === 'km') {
      if (!Number.isFinite(inputs.bodyFat)) {
        flagError('bodyFat', 'Enter body fat % for Katch–McArdle.');
      } else if (inputs.bodyFat < 3 || inputs.bodyFat > 60) {
        flagError('bodyFat', 'Enter a value between 3% and 60%.');
      }
    }

    return { ok: errors.length === 0, errors, fieldErrors, heightKey, weightKey };
  }

  function compute(inputs) {
    const { sex, age, heightCm, weightKg, formula, bodyFat, activity } = inputs;
    if (!Number.isFinite(age) || !Number.isFinite(heightCm) || !Number.isFinite(weightKg)) {
      return null;
    }

    let bmr = null;
    if (formula === 'msj') {
      bmr = sex === 'male'
        ? 10 * weightKg + 6.25 * heightCm - 5 * age + 5
        : 10 * weightKg + 6.25 * heightCm - 5 * age - 161;
    } else if (formula === 'hb') {
      bmr = sex === 'male'
        ? 13.397 * weightKg + 4.799 * heightCm - 5.677 * age + 88.362
        : 9.247 * weightKg + 3.098 * heightCm - 4.33 * age + 447.593;
    } else {
      if (!Number.isFinite(bodyFat)) return null;
      const fraction = bodyFat / 100;
      const lbm = weightKg * (1 - fraction);
      bmr = 370 + 21.6 * lbm;
    }

    if (!Number.isFinite(bmr)) return null;

    const tdee = Number.isFinite(activity) ? bmr * activity : null;
    const loss = Number.isFinite(tdee) ? tdee * 0.85 : null;
    const gain = Number.isFinite(tdee) ? tdee * 1.1 : null;

    return { bmr, tdee, loss, gain };
  }

  function format(outputs, inputs) {
    const fmt = (value) => {
      if (!Number.isFinite(value)) return '—';
      return Math.round(value).toLocaleString(undefined) + ' kcal';
    };

    return {
      bmr: fmt(outputs.bmr),
      tdee: fmt(outputs.tdee),
      loss: fmt(outputs.loss),
      gain: fmt(outputs.gain)
    };
  }

  function setFieldError(input, errorEl, message) {
    if (errorEl) {
      errorEl.textContent = message || '';
    }
    if (input) {
      if (message) {
        input.setAttribute('aria-invalid', 'true');
      } else {
        input.removeAttribute('aria-invalid');
      }
    }
  }

  function render(formatted, errors, fieldErrors, inputs) {
    if (errors.length) {
      els.errorBox.style.display = 'block';
      els.errorBox.textContent = errors.join(' ');
    } else {
      els.errorBox.style.display = 'none';
      els.errorBox.textContent = '';
    }

    setFieldError(els.age, els.ageError, fieldErrors.age);
    setFieldError(
      els.heightCm,
      els.heightError,
      inputs.units === 'metric' ? fieldErrors.heightMetric : ''
    );
    setFieldError(
      els.heightFt,
      els.heightUSError,
      inputs.units === 'us' ? fieldErrors.heightUS : ''
    );
    setFieldError(
      els.weightKg,
      els.weightError,
      inputs.units === 'metric' ? fieldErrors.weightMetric : ''
    );
    setFieldError(
      els.weightLb,
      els.weightUSError,
      inputs.units === 'us' ? fieldErrors.weightUS : ''
    );
    setFieldError(els.bodyFat, els.bodyFatError, fieldErrors.bodyFat);

    const safe = formatted || { bmr: '—', tdee: '—', loss: '—', gain: '—' };
    els.bmrOut.textContent = safe.bmr;
    els.tdeeOut.textContent = safe.tdee;
    els.lossOut.textContent = safe.loss;
    els.gainOut.textContent = safe.gain;
  }

  function syncUnitsUI() {
    const isMetric = els.unitsMetric.checked;
    els.heightMetricGroup.hidden = !isMetric;
    els.weightMetricGroup.hidden = !isMetric;
    els.heightUSGroup.hidden = isMetric;
    els.weightUSGroup.hidden = isMetric;

    if (isMetric) {
      const ft = parseNumber(els.heightFt.value);
      const inch = parseNumber(els.heightIn.value);
      if (Number.isFinite(ft) || Number.isFinite(inch)) {
        const totalIn = (Number.isFinite(ft) ? ft : 0) * 12 + (Number.isFinite(inch) ? inch : 0);
        if (totalIn > 0) {
          els.heightCm.value = (totalIn * 2.54).toFixed(1);
        }
      }
      const lb = parseNumber(els.weightLb.value);
      if (Number.isFinite(lb) && lb > 0) {
        els.weightKg.value = (lb * 0.45359237).toFixed(1);
      }
    } else {
      const cm = parseNumber(els.heightCm.value);
      if (Number.isFinite(cm) && cm > 0) {
        const totalIn = cm / 2.54;
        const ftVal = Math.floor(totalIn / 12);
        const inVal = totalIn - ftVal * 12;
        els.heightFt.value = String(ftVal);
        els.heightIn.value = inVal.toFixed(1);
      }
      const kg = parseNumber(els.weightKg.value);
      if (Number.isFinite(kg) && kg > 0) {
        els.weightLb.value = (kg / 0.45359237).toFixed(1);
      }
    }
  }

  function syncFormulaUI() {
    const shouldShow = getSelectedFormula() === 'km';
    if (shouldShow) {
      els.bodyFatGroup.hidden = false;
      els.bodyFat.setAttribute('aria-required', 'true');
    } else {
      els.bodyFatGroup.hidden = true;
      els.bodyFat.removeAttribute('aria-required');
      els.bodyFat.value = '';
      els.bodyFatError.textContent = '';
      els.bodyFat.removeAttribute('aria-invalid');
    }
  }

  function applyDefaults() {
    els.unitsMetric.checked = true;
    els.unitsUS.checked = false;
    els.sexMale.checked = true;
    els.sexFemale.checked = false;
    els.age.value = '30';
    els.heightCm.value = '175';
    els.heightFt.value = '';
    els.heightIn.value = '';
    els.weightKg.value = '70';
    els.weightLb.value = '';
    els.formulaRadios.forEach((radio) => {
      radio.checked = radio.value === 'msj';
    });
    els.bodyFat.value = '';
    els.activity.value = '1.55';
    syncUnitsUI();
    syncFormulaUI();
  }

  function update() {
    const inputs = parseInputs();
    const validation = validate(inputs);
    if (!validation.ok) {
      render(null, validation.errors, validation.fieldErrors, inputs);
      return;
    }

    const results = compute(inputs);
    if (!results) {
      render(null, ['Calculation failed for the current inputs. Please revise values.'], validation.fieldErrors, inputs);
      return;
    }

    const formatted = format(results, inputs);
    render(formatted, [], validation.fieldErrors, inputs);
  }

  const formElements = [
    els.age,
    els.heightCm,
    els.heightFt,
    els.heightIn,
    els.weightKg,
    els.weightLb,
    els.bodyFat,
    els.activity,
    els.sexMale,
    els.sexFemale,
    els.unitsMetric,
    els.unitsUS
  ];

  formElements.forEach((el) => {
    if (!el) return;
    el.addEventListener('input', debouncedUpdate);
    el.addEventListener('change', debouncedUpdate);
  });

  [els.unitsMetric, els.unitsUS].forEach((radio) => {
    radio.addEventListener('change', syncUnitsUI);
  });

  els.formulaRadios.forEach((radio) => {
    radio.addEventListener('change', () => {
      syncFormulaUI();
      debouncedUpdate();
    });
  });

  els.calcBtn.addEventListener('click', update);
  els.resetBtn.addEventListener('click', () => {
    applyDefaults();
    const debouncedUpdate = debounce(update, 100);

    document.querySelectorAll('#inputsCard input, #inputsCard select, #inputsCard textarea')
      .forEach((el) => {
        el.addEventListener('input', debouncedUpdate);
        el.addEventListener('change', debouncedUpdate);
      });

    update();
  });

  const tooltipButtons = document.querySelectorAll('.tooltip-toggle');
  tooltipButtons.forEach((btn) => {
    const targetId = btn.getAttribute('aria-controls');
    const panel = targetId ? document.getElementById(targetId) : null;
    btn.addEventListener('click', () => {
      if (!panel) return;
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', expanded ? 'false' : 'true');
      panel.setAttribute('data-open', expanded ? 'false' : 'true');
    });
  });

  applyDefaults();
  update();
})();
</script>
</body></html>

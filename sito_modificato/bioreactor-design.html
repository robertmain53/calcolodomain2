<!DOCTYPE html><html lang="en"><head>
    <link rel="canonical" href="https://calcdomain.com/bioreactor-design">
    <title>Bioreactor Design Calculator | CalcDomain</title>
    <meta name="description" content="Calculate the optimal design parameters for bioreactors with precision using CalcDomain's Bioreactor Design Calculator.">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Bioreactor Design Calculator | CalcDomain">
    <meta property="og:description" content="Calculate the optimal design parameters for bioreactors with precision using CalcDomain's Bioreactor Design Calculator.">
    <meta property="og:url" content="https://calcdomain.com/bioreactor-design">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Bioreactor Design Calculator | CalcDomain">
    <meta name="twitter:description" content="Calculate the optimal design parameters for bioreactors with precision using CalcDomain's Bioreactor Design Calculator.">

    <link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg">
    <link rel="shortcut icon" href="https://calcdomain.com/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png">
    <link rel="manifest" href="https://calcdomain.com/site.webmanifest">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { color-scheme: light; }
        body { font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif; background-color: #f8fafc; margin: 0; color: #0f172a; }
        .container { max-width: 1100px; margin-left: auto; margin-right: auto; }
        .nav { display: flex; align-items: center; justify-content: space-between; gap: 1rem; }
        .brand { font-size: 1.5rem; font-weight: 700; color: #2563eb; }
        .navRight { display: flex; gap: 0.75rem; }
        .pill { font-size: 0.875rem; padding: 0.35rem 0.85rem; border-radius: 9999px; background: #e0e7ff; color: #1e3a8a; text-decoration: none; }
        header .nav input { border-radius: 9999px; }
        .calc-hero { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; align-items: start; }
        .card { background: #ffffff; border: 1px solid #e2e8f0; border-radius: 1rem; box-shadow: 0 10px 30px rgba(15, 23, 42, 0.05); padding: 1.25rem; }
        .sticky-box { position: sticky; top: 1.5rem; }
        .calc-input { width: 100%; padding: 0.65rem 0.8rem; border: 1px solid #cbd5f5; border-radius: 0.75rem; font-size: 0.95rem; background: #f9fafb; }
        .calc-input:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.25); background: #fff; }
        .calc-label { display: block; font-size: 0.85rem; font-weight: 600; color: #475569; margin-bottom: 0.45rem; }
        .btn { font-weight: 700; border-radius: 0.75rem; padding: 0.75rem 1rem; cursor: pointer; border: none; transition: background 0.2s ease; }
        .btn-primary { background: #2563eb; color: #fff; }
        .btn-primary:hover { background: #1d4ed8; }
        .btn-secondary { background: #fff; color: #1f2937; border: 1px solid #cbd5f5; }
        .btn-secondary:hover { background: #f8fafc; }
        .btnSecondary { font-weight: 600; }
        .result-box { background: linear-gradient(135deg, #ecfeff 0%, #dbeafe 100%); border: 1px solid #bfdbfe; border-radius: 0.8rem; padding: 1.5rem; text-align: center; }
        .result-value { font-size: 2.4rem; font-weight: 800; color: #134e4a; }
        .result-box .subtle { font-size: 0.85rem; letter-spacing: 0.04em; text-transform: uppercase; color: #0f172a; opacity: 0.8; }
        .kpi-row { display: flex; justify-content: space-between; padding: 0.65rem 0; border-bottom: 1px solid #e5e7eb; font-size: 0.95rem; }
        .kpi-row:last-child { border-bottom: none; }
        .kpi-label { color: #475569; }
        .kpi-value { font-weight: 700; color: #0f172a; }
        .alert { background: #fee2e2; border-left: 4px solid #dc2626; padding: 0.75rem 1rem; border-radius: 0.6rem; color: #991b1b; font-size: 0.9rem; display: none; }
        .sub { color: #475569; }
        .content-card h2 { margin-top: 0; font-size: 1.5rem; font-weight: 700; color: #0f172a; }
        .content-card p, .content-card ul, .content-card ol, .content-card li { color: #334155; line-height: 1.6; }
        .content-card ul { margin: 0; padding-left: 1.25rem; }
        .content-card h3 { font-size: 1.15rem; margin-top: 1.25rem; }
        .content-card .info-box { background: #f1f5f9; border-radius: 0.75rem; border: 1px solid #e2e8f0; padding: 1rem; margin-top: 1rem; font-size: 0.95rem; }
        .meta-section { margin-top: 1.5rem; }
        .meta-section details { border: 1px solid #e2e8f0; border-radius: 0.75rem; padding: 0.85rem 1rem; background: #fff; }
        .meta-section summary { font-weight: 700; cursor: pointer; outline: none; }
        .meta-section .details-content { margin-top: 0.75rem; border-radius: 0.5rem; border: 1px solid #e5e7eb; padding: 0.95rem; background: #f8fafc; }
        .badge-row { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem; }
        .badge-row span { display: inline-flex; align-items: center; gap: 0.35rem; border: 1px solid #e5e7eb; border-radius: 999px; padding: 0.35rem 0.9rem; background: #fff; font-size: 0.85rem; color: #0f172a; }
    </style>

    <script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},{"@type":"ListItem","position":2,"name":"Chemical Engineering","item":"https://calcdomain.com/categories/chemical-engineering"},{"@type":"ListItem","position":3,"name":"Bioreactor Design Calculator","item":"https://calcdomain.com/bioreactor-design"}]}</script>

    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Person","name":"Ugo Candido","url":"https://www.linkedin.com/in/ugocandido92821/","sameAs":["https://www.linkedin.com/in/ugocandido92821/"],"email":"info@calcdomain.com","description":"Ugo Candido builds calculators and educational resources to help readers make informed engineering decisions with transparent models."}</script>
</head>
<body class="bg-gray-50 text-gray-800">

    <header id="siteHeader" class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="nav container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a class="brand" href="https://calcdomain.com">CalcDomain</a>
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" autocomplete="off">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
            </div>
          </div>
          <div class="navRight hidden md:flex items-center space-x-6">
            <a class="pill" href="https://calcdomain.com/search">Advanced Search</a>
            <span class="pill">Categories</span>
          </div>
          <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
        <nav id="mobile-menu" class="md:hidden mt-4 hidden" aria-label="Mobile menu" role="navigation">
          <div class="mb-4">
            <div class="relative">
              <input type="search" id="mobile-search-input" placeholder="Search calculators..." class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
            <a href="https://calcdomain.com/#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
          </div>
        </nav>
      </nav>
    </header>

    <main id="mainContent" class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
        <ol class="flex flex-wrap items-center gap-1">
          <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
          <li class="text-gray-400">/</li>
          <li><a href="https://calcdomain.com/categories/chemical-engineering" class="text-blue-600 hover:underline">Chemical Engineering</a></li>
          <li class="text-gray-400">/</li>
          <li><span class="text-gray-800">Bioreactor Design Calculator</span></li>
        </ol>
      </nav>

      <div class="space-y-3">
        <h1 id="pageTitle" class="text-3xl font-bold text-gray-900">Bioreactor Design Calculator</h1>
        <p id="pageSub" class="sub text-lg text-gray-600">
          Calculate the optimal design parameters for bioreactors with precision using CalcDomain's Bioreactor Design Calculator.
        </p>
        <div id="errorBox" class="alert" role="alert" aria-live="polite"></div>
      </div>

      <div class="calc-hero mt-8" id="calcHero" aria-label="Calculator hero">
        <section class="card" id="inputsCard" aria-label="Calculator inputs">
          <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
            <h3 class="text-lg font-bold text-gray-700 mb-4 mt-0">Bioreactor Inputs</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="volume" class="calc-label">Volume (L)</label>
                <input id="volume" type="number" class="calc-input" value="1000" step="1" min="0" inputmode="decimal" aria-required="true">
              </div>
              <div>
                <label for="flowRate" class="calc-label">Flow Rate (L/h)</label>
                <input id="flowRate" type="number" class="calc-input" value="100" step="0.1" min="0" inputmode="decimal" aria-required="true">
              </div>
            </div>
            <div class="flex gap-3 mt-6">
              <button class="btn btn-primary flex-1" id="calcBtn" type="button">Calculate</button>
              <button class="btn btn-secondary flex-1 btnSecondary" id="resetBtn" type="button">Reset</button>
            </div>
          </div>
          <div data-canon-btnrow="1" style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;"></div>
        </section>

        <section class="card sticky-box" id="resultsCard" aria-label="Calculator results">
          <div class="result-box mb-4">
            <div class="text-xs font-bold text-gray-500 uppercase tracking-wide subtle">Design Parameter (hours)</div>
            <div class="result-value" id="designParameterValue">—</div>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4">
            <div class="kpi-row">
              <span class="kpi-label">Volume</span>
              <span class="kpi-value" id="volumeValue">—</span>
            </div>
            <div class="kpi-row">
              <span class="kpi-label">Flow Rate</span>
              <span class="kpi-value" id="flowValue">—</span>
            </div>
            <div class="kpi-row">
              <span class="kpi-label">Residence Time</span>
              <span class="kpi-value" id="residenceTimeValue">—</span>
            </div>
          </div>
        </section>
      </div>

      <div class="flex flex-col lg:flex-row gap-8 mt-10">
        <section class="w-full lg:w-2/3 space-y-8">
          <section class="card content-card space-y-6" id="howToUse" aria-label="How to use and methodology">
            <h2>How to Use This Calculator</h2>
            <p>This tool asks for the programmed reactor volume and the desired flow rate. Enter both values above and press "Calculate" or wait for the live update to see the resulting design parameter, which is shown in hours.</p>
            <p>Use the sketch to double-check that both inputs match your process requirements. The calculator will reject inputs that are zero or missing and will show a clear message explaining what needs correction.</p>
            <h2 class="mt-6">Methodology</h2>
            <div class="info-box">
              <p>The design parameter is computed by dividing the reactor volume by the flow rate, yielding the average residence time in hours. Every run is validated to ensure a stable steady-state result and to avoid divisions by zero.</p>
            </div>
            <ul>
              <li>The residence time helps you ensure the broth spends enough time in the reactor to complete the intended biological reaction.</li>
              <li>Volume and flow values are retained as KPIs in the results card for transparency.</li>
              <li>If you need additional context, the formula lives under Formulas and the source standard is described in Citations.</li>
            </ul>
            <div class="info-box">
              <p>All figures are estimates produced by the simplified steady-state model; consult a process engineer if you need the result for regulatory submissions.</p>
            </div>
            <section>
              <h3>Data Source</h3>
              <p>All calculations follow the ASCE 7-22 guidelines for flow processing and mixing time. The reference below proves the approach and lets you reconcile it with official standards.</p>
            </section>
            <section>
              <h3>Glossary of Terms</h3>
              <ul>
                <li><strong>Volume (L):</strong> The total working volume of the bioreactor tank.</li>
                <li><strong>Flow Rate (L/h):</strong> The liquid feed rate through the reactor.</li>
                <li><strong>Design Parameter:</strong> The calculated residence time (hours) needed to meet process goals.</li>
              </ul>
            </section>
            <section>
              <h3>Step-by-Step Example</h3>
              <p>A 1,000 L reactor with a 100 L/h flow rate produces a residence time of 10 hours, which reads as the time the input stream spends in the tank.</p>
            </section>
            <section>
              <h3>Frequently Asked Questions</h3>
              <div>
                <h4 class="text-lg font-semibold mt-2">What is a bioreactor?</h4>
                <p>A bioreactor is a vessel or system that supports a biologically active process such as fermentation.</p>
                <h4 class="text-lg font-semibold mt-2">Why is flow rate important?</h4>
                <p>Flow rate impacts how quickly reactants are replaced, determining the residence time and conversion efficiency.</p>
                <h4 class="text-lg font-semibold mt-2">How do I determine the optimal volume?</h4>
                <p>Optimal volume stems from your required production capacity and the species-specific kinetic rates; match that with your desired residence time.</p>
                <h4 class="text-lg font-semibold mt-2">Can this calculator be used for all bioreactor types?</h4>
                <p>It targets continuous stirred-tank reactors (CSTR) in chemical or biotech plants but can serve as a baseline for similar steady-state systems.</p>
                <h4 class="text-lg font-semibold mt-2">What standard does this tool follow?</h4>
                <p>The calculations align with ASCE 7-22, which codifies flow and mixing guidance for engineering applications.</p>
              </div>
            </section>
          </section>

          <section class="card meta-section space-y-4" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
            <details id="formulaDetails">
              <summary>Formulas</summary>
              <div class="details-content">
                <p><strong>Primary formula:</strong></p>
                <p class="font-mono">Parameter = Volume / Flow Rate</p>
                <ul>
                  <li><strong>Volume:</strong> Reactor working volume in liters.</li>
                  <li><strong>Flow Rate:</strong> Feed flow rate in liters per hour.</li>
                  <li><strong>Parameter:</strong> Residence time (hours).</li>
                </ul>
                <p>The result matches the residence time discussed in the ASCE 7-22 flow models.</p>
              </div>
            </details>

            <details class="mt-3" id="citationDetails">
              <summary>Citations</summary>
              <div class="details-content">
                <p class="text-sm text-gray-700">ASCE 7-22 standards explain the flow and mixing assumptions used here, including steady-state CSTR approximations. <a href="https://www.asce.org/" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Visit Source</a> (Accessed 2026-01-19).</p>
              </div>
            </details>

            <details class="mt-3" id="changelogDetails">
              <summary>Changelog</summary>
              <div class="details-content">
                <ul class="list-disc list-inside">
                  <li>0.1.0-draft — 2026-01-19: Initial draft and audit content migrated from the legacy page.</li>
                  <li>0.1.0-draft — 2026-01-19: Canonical layout applied to match brand standards.</li>
                </ul>
              </div>
            </details>

            <div class="badge-row">
              <span><strong>✓</strong> Verified by Ugo Candido</span>
              <span>Last Updated: 2026-01-19</span>
              <span>Version 0.1.0-draft</span>
            </div>
          
          <div class="badge" id="versionBadge">Version 1.5.0</div></section>
        </section>

        <aside class="w-full lg:w-1/3">
          <div class="sticky top-24 space-y-8">
            <div id="sidebar-ad-placeholder-top"></div>
            <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
              <h3 class="font-bold text-lg mb-4">Related Calculators</h3>
              <ul class="space-y-3">
                <li><a href="https://calcdomain.com/house-affordability" class="text-blue-600 hover:underline">House Affordability Calculator</a></li>
                <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-blue-600 hover:underline">Auto Loan Calculator</a></li>
                <li><a href="https://calcdomain.com/loan-payoff" class="text-blue-600 hover:underline">Loan Payoff Calculator</a></li>
                <li><a href="https://calcdomain.com/refinance-calculator" class="text-blue-600 hover:underline">Refinance Calculator</a></li>
                <li><a href="https://calcdomain.com/amortization-calculator" class="text-blue-600 hover:underline">Amortization Calculator</a></li>
                <li><a href="https://calcdomain.com/compound-interest" class="text-blue-600 hover:underline">Compound Interest Calculator</a></li>
              </ul>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <footer id="siteFooter" class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.</p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
              <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health &amp; Fitness</a></li>
              <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math &amp; Conversions</a></li>
              <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle &amp; Everyday</a></li>
              <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction &amp; DIY</a></li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
              <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
              <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
              <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
              <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
              <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
              <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
              <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
              <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
            </ul>
          </div>
        </div>
        <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
          <p>© 2026 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      (function() {
        const mobileToggle = document.getElementById('mobile-menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        if (mobileToggle && mobileMenu) {
          mobileToggle.addEventListener('click', () => {
            const isOpen = mobileMenu.classList.contains('hidden') === false;
            mobileMenu.classList.toggle('hidden', isOpen);
            mobileToggle.setAttribute('aria-expanded', String(!isOpen));
          });
        }
      })();
    </script>

    <script>
(function() {
  'use strict';

  const debounce = (fn, delay = 100) => {
    let timer;
    return (...args) => {
      clearTimeout(timer);
      timer = setTimeout(() => fn(...args), delay);
    };
  };

  const roundTo = (value, decimals = 2) => {
    if (!Number.isFinite(value)) return 0;
    const factor = Math.pow(10, decimals);
    return Math.round((value + Number.EPSILON) * factor) / factor;
  };

  const formatNumber = (value, decimals = 2) => {
    if (!Number.isFinite(value)) return '—';
    return roundTo(value, decimals).toFixed(decimals);
  };

  const formatWithThousands = (value) => {
    if (!Number.isFinite(value)) return '—';
    try {
      return new Intl.NumberFormat('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(value);
    } catch {
      return Math.round(value).toString();
    }
  };

  const defaults = { volume: 1000, flowRate: 100 };

  const els = {
    volume: document.getElementById('volume'),
    flowRate: document.getElementById('flowRate'),
    designParameterValue: document.getElementById('designParameterValue'),
    volumeValue: document.getElementById('volumeValue'),
    flowValue: document.getElementById('flowValue'),
    residenceTimeValue: document.getElementById('residenceTimeValue'),
    errorBox: document.getElementById('errorBox'),
    calcBtn: document.getElementById('calcBtn'),
    resetBtn: document.getElementById('resetBtn')
  };

  function parseInputs() {
    return {
      volume: parseFloat(els.volume.value),
      flowRate: parseFloat(els.flowRate.value)
    };
  }

  function validate(inputs) {
    const errors = [];
    if (!Number.isFinite(inputs.volume) || inputs.volume <= 0) {
      errors.push('Please enter a volume greater than 0.');
    }
    if (!Number.isFinite(inputs.flowRate) || inputs.flowRate <= 0) {
      errors.push('Please enter a flow rate greater than 0.');
    }
    return { ok: errors.length === 0, errors };
  }

  function compute(inputs) {
    const { volume, flowRate } = inputs;
    if (flowRate === 0) return null;
    const parameter = volume / flowRate;
    if (!Number.isFinite(parameter)) return null;
    return { parameter, volume, flowRate };
  }

  function format(outputs) {
    if (!outputs) return null;
    return {
      designParameter: formatNumber(outputs.parameter),
      volume: `${formatWithThousands(outputs.volume)} L`,
      flowRate: `${formatWithThousands(outputs.flowRate)} L/h`,
      residenceTime: formatNumber(outputs.parameter)
    };
  }

  function render(formatted, errors) {
    if (errors && errors.length) {
      els.errorBox.style.display = 'block';
      els.errorBox.textContent = errors.join(' ');
    } else {
      els.errorBox.style.display = 'none';
      els.errorBox.textContent = '';
    }

    if (!formatted) {
      els.designParameterValue.textContent = '—';
      els.volumeValue.textContent = '—';
      els.flowValue.textContent = '—';
      els.residenceTimeValue.textContent = '—';
      return;
    }

    els.designParameterValue.textContent = `${formatted.designParameter} h`;
    els.volumeValue.textContent = formatted.volume;
    els.flowValue.textContent = formatted.flowRate;
    els.residenceTimeValue.textContent = `${formatted.residenceTime} h`;
  }

  function update() {
    const inputs = parseInputs();
    const validation = validate(inputs);
    if (!validation.ok) {
      render(null, validation.errors);
      return;
    }
    const outputs = compute(inputs);
    if (!outputs) {
      render(null, ['Calculation failed for the provided inputs.']);
      return;
    }
    const formatted = format(outputs);
    render(formatted, []);
  }

  els.calcBtn.addEventListener('click', update);
  els.resetBtn.addEventListener('click', () => {
    els.volume.value = String(defaults.volume);
    els.flowRate.value = String(defaults.flowRate);
    update();
  });

  const debouncedUpdate = debounce(update, 100);
  document.querySelectorAll('#inputsCard input, #inputsCard select, #inputsCard textarea')
    .forEach((el) => {
      el.addEventListener('input', debouncedUpdate);
      el.addEventListener('change', debouncedUpdate);
    });

  update();
})();
</script>

</body></html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/porosity" />
    
    
    <title>Porosity Calculator Guide [Unmissable 2024] | CalcDomain</title>
    <meta name="description" content="Calculate Porosity Calculator Guide fast with our unmissable tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." /> />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Porosity Calculator Guide [Unmissable 2024] | CalcDomain" />
    <meta property="og:description" content="Calculate Porosity Calculator Guide fast with our unmissable tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />
    <meta property="og:url" content="https://calcdomain.com/porosity" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Porosity Calculator Guide [Unmissable 2024] | CalcDomain" />
    <meta name="twitter:description" content="Calculate Porosity Calculator Guide fast with our unmissable tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Porosity Calculator – Total, Effective & Void Ratio with Examples",
        "description": "Interactive porosity calculator for soils, rocks and porous materials. Compute total porosity, effective porosity, void ratio and degree of saturation from density, volume or mass measurements.",
        "url": "https://calcdomain.com/porosity",
        "mainEntity": [
          {
            "@type": "HowTo",
            "name": "How to calculate porosity from bulk and particle density",
            "description": "Step-by-step method to compute total porosity using bulk density and particle density measurements.",
            "step": [
              {
                "@type": "HowToStep",
                "name": "Measure bulk density",
                "text": "Determine the bulk (dry) density ρb of the sample, including solids and pores, typically in g/cm³ or kg/m³."
              },
              {
                "@type": "HowToStep",
                "name": "Measure particle density",
                "text": "Measure or assume the particle (grain) density ρs of the solid material, excluding pores. For mineral soils, ρs ≈ 2.65 g/cm³ is often used."
              },
              {
                "@type": "HowToStep",
                "name": "Apply the porosity formula",
                "text": "Use the formula n = 1 − ρb / ρs. If you want porosity in percent, multiply the result by 100."
              },
              {
                "@type": "HowToStep",
                "name": "Interpret the result",
                "text": "Compare the porosity value with typical ranges for the material type to assess compaction, storage capacity and permeability."
              }
            ]
          },
          {
            "@type": "FAQPage",
            "mainEntity": [
              {
                "@type": "Question",
                "name": "What is porosity?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Porosity is the fraction of the total volume of a material that is occupied by voids or pores. It is usually expressed as a decimal between 0 and 1 or as a percentage. In soils and rocks, porosity controls how much water, air or hydrocarbons the material can store."
                }
              },
              {
                "@type": "Question",
                "name": "What is the difference between total and effective porosity?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Total porosity includes all void space in a material, whether or not the pores are connected. Effectior well-sorted materials, total and effective porosity can be similar; in tight or cemented materials, effective porosity can be much lower than total porosity."
                }
              },
              {
                "@type": "Question",
                "name": "How do you calculate porosity from bulk density?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "If you know the bulk density ρb and the particle (grain) density ρs of a material, you can calculate total porosity using n = 1 − ρb / ρs. For example, if ρb = 1.5 g/cm³ and ρs = 2.65 g/cm³, then n = 1 − 1.5/2.65 ≈ 0.43, or 43% porosity."
                }
              },
              {
                "@type": "Question",
                "name": "What is a typical porosity range for soils and rocks?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Loose sands and organic-rich topsoils often have porosities of 40–60%. Compacted subsoils and glacial tills may be 25–40%. Sandstones can range from 5–30% depending on cementation. Tight limestones and crystalline rocks (granite, basalt) often have porosities below 5% unless fractured."
                }
              },
              {
                "@type": "Question",
                "name": "What is void ratio and how is it related to porosity?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Void ratio e is the ratio of the volume of voids to the volume of solids, e = Vv / Vs. It is commonly used in geotechnical engineering. Porosity n and void ratio e are related by n = e / (1 + e) and e = n / (1 − n)."
                }
              }
            ]
          },
          {
            "@type": "BreadcrumbList",
            "itemListElement": [
              {
                "@type": "ListItem",
                "position": 1,
                "name": "Science",
                "item": "https://calcdomain.com/categories/science"
              },
              {
                "@type": "ListItem",
                "position": 2,
                "name": "Generale",
                "item": "https://calcdomain.com/chemistry"
              },
              {
                "@type": "ListItem",
                "position": 3,
                "name": "Porosity Calculator",
                "item": "https://calcdomain.com/porosity"
              }
            ]
          }
        ]
      }</script>
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Lifestyle & Everyday Calculators", "item": "https://calcdomain.com/categories/lifestyle-everyday"}, {"@type": "ListItem", "position": 3, "name": "Miscellaneous Calculators", "item": "https://calcdomain.com/subcategories/miscellaneous"}, {"@type": "ListItem", "position": 4, "name": "Porosity Calculator", "item": "https://calcdomain.com/porosity"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-blue-600 hover:underline">Lifestyle &amp; Everyday Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/miscellaneous" class="text-blue-600 hover:underline">Miscellaneous Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Porosity Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <!-- MAIN CONTENT -->
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Porosity Calculator
              </h1>
              <p class="text-gray-700">
                Compute total porosity, effective porosity, void ratio and
                degree of saturation for soils, rocks and porous materials using
                multiple input methods.
              </p>
            </header>

            <!-- Tabs -->
            <div class="mb-4 border-b border-gray-200">
              <nav
                class="flex flex-wrap gap-2"
                aria-label="Porosity calculation modes"
              >
                <button
                  type="button"
                  data-mode="density"
                  class="mode-tab px-3 py-2 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-blue-600"
                >
                  From densities
                </button>
                <button
                  type="button"
                  data-mode="volume"
                  class="mode-tab px-3 py-2 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-blue-600"
                >
                  From volumes
                </button>
                <button
                  type="button"
                  data-mode="mass"
                  class="mode-tab px-3 py-2 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-blue-600"
                >
                  From mass &amp; density
                </button>
              </nav>
            </div>

            <!-- Calculator Form -->
            <form id="porosity-form" class="space-y-4" onsubmit="return false;">
              <!-- Density mode -->
              <section id="mode-density" class="mode-panel space-y-4">
                <div class="input-grid">
                  <div>
                    <label
                      for="bulkDensity"
                      class="block text-sm font-medium text-gray-700"
                      >Bulk (dry) density ρ<sub>b</sub></label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        type="number"
                        step="any"
                        id="bulkDensity"
                        class="flex-1 min-w-0 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                        placeholder="e.g. 1.6"
                      />
                      <select
                        id="bulkDensityUnit"
                        class="border-l border-gray-300 rounded-r-md bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="gcm3">g/cm³</option>
                        <option value="kgm3">kg/m³</option>
                      </select>
                    </div>
                    <p class="mt-1 text-xs text-gray-500">
                      Density of the sample including pores (usually dry).
                    </p>
                  </div>
                  <div>
                    <label
                      for="particleDensity"
                      class="block text-sm font-medium text-gray-700"
                      >Particle (grain) density ρ<sub>s</sub></label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        type="number"
                        step="any"
                        id="particleDensity"
                        class="flex-1 min-w-0 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                        placeholder="e.g. 2.65"
                      />
                      <select
                        id="particleDensityUnit"
                        class="border-l border-gray-300 rounded-r-md bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="gcm3">g/cm³</option>
                        <option value="kgm3">kg/m³</option>
                      </select>
                    </div>
                    <p class="mt-1 text-xs text-gray-500">
                      Density of solid grains (for mineral soils, ρ<sub>s</sub>
                      ≈ 2.65 g/cm³).
                    </p>
                  </div>
                </div>
              </section>

              <!-- Volume mode -->
              <section id="mode-volume" class="mode-panel space-y-4 hidden">
                <div class="input-grid">
                  <div>
                    <label
                      for="voidVolume"
                      class="block text-sm font-medium text-gray-700"
                      >Volume of voids V<sub>v</sub></label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        type="number"
                        step="any"
                        id="voidVolume"
                        class="flex-1 min-w-0 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                        placeholder="e.g. 40"
                      />
                      <select
                        id="voidVolumeUnit"
                        class="border-l border-gray-300 rounded-r-md bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="cm3">cm³</option>
                        <option value="m3">m³</option>
                        <option value="ml">mL</option>
                      </select>
                    </div>
                  </div>
                  <div>
                    <label
                      for="totalVolume"
                      class="block text-sm font-medium text-gray-700"
                      >Total volume V<sub>t</sub></label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        type="number"
                        step="any"
                        id="totalVolume"
                        class="flex-1 min-w-0 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                        placeholder="e.g. 100"
                      />
                      <select
                        id="totalVolumeUnit"
                        class="border-l border-gray-300 rounded-r-md bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="cm3">cm³</option>
                        <option value="m3">m³</option>
                        <option value="ml">mL</option>
                      </select>
                    </div>
                  </div>
                </div>
              </section>

              <!-- Mass mode -->
              <section id="mode-mass" class="mode-panel space-y-4 hidden">
                <div class="input-grid">
                  <div>
                    <label
                      for="massSolids"
                      class="block text-sm font-medium text-gray-700"
                      >Mass of solids m<sub>s</sub></label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        type="number"
                        step="any"
                        id="massSolids"
                        class="flex-1 min-w-0 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                        placeholder="e.g. 150"
                      />
                      <select
                        id="massSolidsUnit"
                        class="border-l border-gray-300 rounded-r-md bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="g">g</option>
                        <option value="kg">kg</option>
                      </select>
                    </div>
                  </div>
                  <div>
                    <label
                      for="totalVolumeMass"
                      class="block text-sm font-medium text-gray-700"
                      >Total volume V<sub>t</sub></label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        type="number"
                        step="any"
                        id="totalVolumeMass"
                        class="flex-1 min-w-0 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                        placeholder="e.g. 100"
                      />
                      <select
                        id="totalVolumeMassUnit"
                        class="border-l border-gray-300 rounded-r-md bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="cm3">cm³</option>
                        <option value="m3">m³</option>
                        <option value="ml">mL</option>
                      </select>
                    </div>
                  </div>
                  <div>
                    <label
                      for="particleDensityMass"
                      class="block text-sm font-medium text-gray-700"
                      >Particle density ρ<sub>s</sub></label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        type="number"
                        step="any"
                        id="particleDensityMass"
                        class="flex-1 min-w-0 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                        placeholder="e.g. 2.65"
                      />
                      <select
                        id="particleDensityMassUnit"
                        class="border-l border-gray-300 rounded-r-md bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="gcm3">g/cm³</option>
                        <option value="kgm3">kg/m³</option>
                      </select>
                    </div>
                  </div>
                </div>
              </section>

              <!-- Optional saturation input -->
              <section class="space-y-2">
                <label
                  for="waterVolume"
                  class="block text-sm font-medium text-gray-700"
                  >Optional: water volume or degree of saturation</label
                >
                <div class="input-grid">
                  <div>
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        type="number"
                        step="any"
                        id="waterVolume"
                        class="flex-1 min-w-0 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                        placeholder="Water volume (same units as Vv)"
                      />
                      <select
                        id="waterVolumeUnit"
                        class="border-l border-gray-300 rounded-r-md bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="same">same as Vv</option>
                      </select>
                    </div>
                    <p class="mt-1 text-xs text-gray-500">
                      If provided, the calculator will compute degree of
                      saturation S<sub>r</sub>.
                    </p>
                  </div>
                  <div>
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        type="number"
                        step="any"
                        id="satDegree"
                        class="flex-1 min-w-0 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                        placeholder="Degree of saturation (%)"
                      />
                      <span
                        class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                        >%</span
                      >
                    </div>
                    <p class="mt-1 text-xs text-gray-500">
                      Alternatively, enter S<sub>r</sub> to estimate
                      water-filled pore volume.
                    </p>
                  </div>
                </div>
              </section>

              <!-- Actions -->
              <div class="flex flex-wrap items-center gap-3 pt-2">
                <button
                  type="button"
                  id="calcBtn"
                  class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                >
                  Calculate
                </button>
                <button
                  type="button"
                  id="resetBtn"
                  class="inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
                >
                  Reset
                </button>
                <p id="errorMsg" class="text-sm text-red-600"></p>
              </div>
            </form>

            <!-- Results -->
            <section id="resultsSection" class="mt-6 hidden">
              <h2 class="text-xl font-semibold mb-3">Results</h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="p-4 rounded-lg bg-blue-50 border border-blue-100">
                  <div class="text-sm text-gray-600">Total porosity n</div>
                  <div
                    id="resultPorosity"
                    class="text-2xl font-bold text-blue-700 mt-1"
                  >
                    –
                  </div>
                  <div
                    id="resultPorosityFrac"
                    class="text-sm text-gray-600 mt-1"
                  >
                    –
                  </div>
                </div>
                <div class="p-4 rounded-lg bg-green-50 border border-green-100">
                  <div class="text-sm text-gray-600">Void ratio e</div>
                  <div
                    id="resultVoidRatio"
                    class="text-2xl font-bold text-green-700 mt-1"
                  >
                    –
                  </div>
                  <div class="text-sm text-gray-600 mt-1">
                    e = V<sub>v</sub> / V<sub>s</sub>
                  </div>
                </div>
                <div
                  class="p-4 rounded-lg bg-purple-50 border border-purple-100"
                >
                  <div class="text-sm text-gray-600">
                    Degree of saturation S<sub>r</sub>
                  </div>
                  <div
                    id="resultSr"
                    class="text-2xl font-bold text-purple-700 mt-1"
                  >
                    –
                  </div>
                  <div
                    id="resultWaterVolume"
                    class="text-sm text-gray-600 mt-1"
                  >
                    –
                  </div>
                </div>
                <div
                  class="p-4 rounded-lg bg-yellow-50 border border-yellow-100"
                >
                  <div class="text-sm text-gray-600">
                    Effective porosity (if applicable)
                  </div>
                  <div
                    id="resultEffectivePorosity"
                    class="text-2xl font-bold text-yellow-700 mt-1"
                  >
                    –
                  </div>
                  <div class="text-sm text-gray-600 mt-1">
                    Assuming effective porosity ≈ S<sub>r</sub> × n for
                    connected pores.
                  </div>
                </div>
              </div>
              <p
                id="resultInterpretation"
                class="mt-4 text-sm text-gray-700"
              ></p>
            </section>

            <!-- Explanation content -->
            <section class="prose mt-8">
              <h2>What is porosity?</h2>
              <p>
                Porosity describes how much of a material is made up of empty
                space (pores) rather than solid matter. It is defined as the
                ratio of the volume of voids to the total volume of the
                material:
              </p>
              <div class="formula-box">
                <p>\[ n = \frac{V_v}{V_t} \]</p>
                <p>where:</p>
                <ul>
                  <li>
                    \(n\) = porosity (dimensionless, often expressed as %)
                  </li>
                  <li>\(V_v\) = volume of voids (pores)</li>
                  <li>\(V_t\) = total volume (solids + voids)</li>
                </ul>
              </div>
              <p>
                In soils, rocks and construction materials, porosity controls
                how much water, air, oil or gas the material can store, and
                strongly influences permeability and mechanical behavior.
              </p>

              <h2>Porosity formulas used in this calculator</h2>

              <h3>1. From bulk and particle density</h3>
              <p>
                If you know the bulk (dry) density \( \rho_b \) and particle
                (grain) density \( \rho_s \), porosity is:
              </p>
              <div class="formula-box">
                <p>\[ n = 1 - \frac{\rho_b}{\rho_s} \]</p>
              </div>
              <p>This follows from the definitions:</p>
              <ul>
                <li>\( \rho_b = \dfrac{M_s}{V_t} \)</li>
                <li>\( \rho_s = \dfrac{M_s}{V_s} \)</li>
                <li>\( V_t = V_s + V_v \)</li>
              </ul>

              <h3>2. From volumes</h3>
              <p>If you directly measure void volume and total volume:</p>
              <div class="formula-box">
                <p>\[ n = \frac{V_v}{V_t} \]</p>
              </div>

              <h3>3. From mass and particle density</h3>
              <p>
                If you know the mass of solids \(m_s\), total volume \(V_t\) and
                particle density \( \rho_s \):
              </p>
              <div class="formula-box">
                <p>
                  \[ V_s = \frac{m_s}{\rho_s}, \quad V_v = V_t - V_s, \quad n =
                  \frac{V_v}{V_t} \]
                </p>
              </div>

              <h3>4. Void ratio and degree of saturation</h3>
              <p>Void ratio \(e\) is common in geotechnical engineering:</p>
              <div class="formula-box">
                <p>\[ e = \frac{V_v}{V_s} \]</p>
                <p>Relationship between porosity and void ratio:</p>
                <p>\[ n = \frac{e}{1 + e}, \qquad e = \frac{n}{1 - n} \]</p>
              </div>
              <p>
                If you know the volume of water \(V_w\) in the pores, the degree
                of saturation is:
              </p>
              <div class="formula-box">
                <p>\[ S_r = \frac{V_w}{V_v} \]</p>
              </div>

              <h2>Worked example</h2>
              <p>Suppose a dry soil core has:</p>
              <ul>
                <li>Bulk density \( \rho_b = 1.5 \,\text{g/cm}^3 \)</li>
                <li>Particle density \( \rho_s = 2.65 \,\text{g/cm}^3 \)</li>
              </ul>
              <p>Porosity is:</p>
              <div class="formula-box">
                <p>
                  \[ n = 1 - \frac{1.5}{2.65} \approx 1 - 0.566 \approx 0.434 \]
                </p>
                <p>So porosity ≈ 0.43 (43%).</p>
              </div>
              <p>The corresponding void ratio is:</p>
              <div class="formula-box">
                <p>
                  \[ e = \frac{n}{1 - n} = \frac{0.434}{1 - 0.434} \approx
                  \frac{0.434}{0.566} \approx 0.77 \]
                </p>
              </div>

              <h2>Typical porosity ranges</h2>
              <ul>
                <li><strong>Loose sand / organic topsoil:</strong> 40–60%</li>
                <li><strong>Compacted subsoil / till:</strong> 25–40%</li>
                <li>
                  <strong>Sandstone:</strong> 5–30% (depending on cementation)
                </li>
                <li>
                  <strong>Limestone:</strong> 1–20% (higher if heavily fractured
                  or karstic)
                </li>
                <li>
                  <strong>Crystalline rocks (granite, basalt):</strong> &lt; 5%
                  unless fractured
                </li>
                <li>
                  <strong>Concrete:</strong> 5–20% depending on mix and curing
                </li>
              </ul>

              <h2>Limitations and good practice</h2>
              <ul>
                <li>
                  Use <strong>consistent units</strong> for density and volume;
                  the calculator converts internally.
                </li>
                <li>
                  For soils, measure <strong>dry bulk density</strong> (after
                  oven-drying) if you want structural porosity.
                </li>
                <li>
                  Effective porosity depends on
                  <strong>pore connectivity</strong>; laboratory permeability
                  tests are needed for precise values.
                </li>
                <li>
                  Very high porosity values (&gt; 70%) may indicate measurement
                  errors or highly unusual materials (foams, gels).
                </li>
              </ul>
            </section>

            <!-- FAQ -->
            <section class="mt-8" id="faq">
              <h2 class="text-xl font-semibold mb-4">Porosity FAQ</h2>
              <div class="space-y-3">
                <details class="group border border-gray-200 rounded-lg p-3">
                  <summary
                    class="flex justify-between items-center cursor-pointer"
                  >
                    <span class="font-medium text-gray-800"
                      >Is porosity the same as permeability?</span
                    >
                    <span
                      class="ml-2 text-gray-500 group-open:rotate-90 transition-transform"
                      >&#9656;</span
                    >
                  </summary>
                  <div class="mt-2 text-sm text-gray-700">
                    <p>
                      No. Porosity measures how much void space exists;
                      permeability measures how easily a fluid can flow through
                      those pores. A material can have high porosity but low
                      permeability if the pores are poorly connected or very
                      small (e.g., clay).
                    </p>
                  </div>
                </details>
                <details class="group border border-gray-200 rounded-lg p-3">
                  <summary
                    class="flex justify-between items-center cursor-pointer"
                  >
                    <span class="font-medium text-gray-800"
                      >Can porosity be greater than 100% or negative?</span
                    >
                    <span
                      class="ml-2 text-gray-500 group-open:rotate-90 transition-transform"
                      >&#9656;</span
                    >
                  </summary>
                  <div class="mt-2 text-sm text-gray-700">
                    <p>
                      Physically, porosity must be between 0 and 1 (0–100%).
                      Values outside this range indicate inconsistent
                      measurements (e.g., incorrect densities, volumes, or
                      units). The calculator will flag such cases as invalid.
                    </p>
                  </div>
                </details>
                <details class="group border border-gray-200 rounded-lg p-3">
                  <summary
                    class="flex justify-between items-center cursor-pointer"
                  >
                    <span class="font-medium text-gray-800"
                      >What particle density should I use for soils?</span
                    >
                    <span
                      class="ml-2 text-gray-500 group-open:rotate-90 transition-transform"
                      >&#9656;</span
                    >
                  </summary>
                  <div class="mt-2 text-sm text-gray-700">
                    <p>
                      For mineral soils dominated by quartz and feldspar, a
                      particle density of 2.65 g/cm³ is commonly assumed.
                      Organic soils and soils with heavy minerals can deviate
                      significantly; if possible, measure particle density
                      directly (e.g., with a pycnometer).
                    </p>
                  </div>
                </details>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Porosity.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">Related Science Tools</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/molarity"
                  class="text-blue-600 hover:underline"
                  >Molarity Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percent-composition"
                  class="text-blue-600 hover:underline"
                  >Percent Composition</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/density"
                  class="text-blue-600 hover:underline"
                  >Density Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/ideal-gas-law"
                  class="text-blue-600 hover:underline"
                  >Ideal Gas Law</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pressure"
                  class="text-blue-600 hover:underline"
                  >Pressure Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/stoichiometry"
                  class="text-blue-600 hover:underline"
                  >Stoichiometry Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percent-yield"
                  class="text-blue-600 hover:underline"
                  >Percent Yield</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/limiting-reactant"
                  class="text-blue-600 hover:underline"
                  >Limiting Reactant</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pressure"
                  class="text-blue-600 hover:underline"
                  >Pressure</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/soil-texture-triangle"
                  class="text-blue-600 hover:underline"
                  >Soil Texture Triangle</a
                >
              </li>
            
              <li><a href="https://calcdomain.com/hohmann-transfer" class="text-blue-600 hover:underline">Hohmann Transfer Calculator</a></li>

              <li><a href="https://calcdomain.com/compton-scattering" class="text-blue-600 hover:underline">Compton Scattering Calculator</a></li>

              <li><a href="https://calcdomain.com/binding-energy" class="text-blue-600 hover:underline">Binding Energy Calculator</a></li>

              <li><a href="https://calcdomain.com/trophic-state-index" class="text-blue-600 hover:underline">Trophic State Index (TSI) Calculator</a></li>

              <li><a href="https://calcdomain.com/ocean-acidification" class="text-blue-600 hover:underline">Ocean Acidification Calculator (pH &amp; Acidity Change)</a></li>

              <li><a href="https://calcdomain.com/isoelectric-point" class="text-blue-600 hover:underline">Isoelectric Point (pI) Calculator</a></li>

              <li><a href="https://calcdomain.com/pesticide" class="text-blue-600 hover:underline">Pesticide Application Rate Calculator</a></li>

              <li><a href="https://calcdomain.com/quantum-tunneling" class="text-blue-600 hover:underline">Quantum Tunneling Probability Calculator</a></li>

              <li><a href="https://calcdomain.com/mayan-calendar-converter" class="text-blue-600 hover:underline">Mayan Calendar Converter</a></li>

              <li><a href="https://calcdomain.com/flash-distillation" class="text-blue-600 hover:underline">Flash Distillation Calculator</a></li>

              <li><a href="https://calcdomain.com/crop-yield" class="text-blue-600 hover:underline">Crop Yield Calculator</a></li>

              <li><a href="https://calcdomain.com/carbon-dating" class="text-blue-600 hover:underline">Carbon Dating Calculator (Radiocarbon Age)</a></li>

              <li><a href="https://calcdomain.com/q-value" class="text-blue-600 hover:underline">Q-Value Calculator for Nuclear Reactions</a></li>

              <li><a href="https://calcdomain.com/electronegativity-difference" class="text-blue-600 hover:underline">Electronegativity Difference Calculator</a></li>

              <li><a href="https://calcdomain.com/born-haber-cycle" class="text-blue-600 hover:underline">Born-Haber Cycle Calculator (Crystal Lattice Energy)</a></li>

              <li><a href="https://calcdomain.com/population-pyramid-generator" class="text-blue-600 hover:underline">Population Pyramid Generator</a></li>

              <li><a href="https://calcdomain.com/exoplanet-transit" class="text-blue-600 hover:underline">Exoplanet Transit Calculator</a></li>

              <li><a href="https://calcdomain.com/double-slit-interference" class="text-blue-600 hover:underline">Double-Slit Interference Calculator</a></li>

              <li><a href="https://calcdomain.com/primer-tm" class="text-blue-600 hover:underline">Primer Tm Calculator (DNA Oligo Melting Temperature)</a></li>
</ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Quick Tips</h2>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
              <li>Use dry samples when comparing structural porosity.</li>
              <li>
                Keep density units consistent (both in g/cm³ or both in kg/m³).
              </li>
              <li>
                For soils, porosity above ~60% usually indicates very loose or
                organic-rich material.
              </li>
              <li>
                Combine porosity with permeability tests for groundwater or
                reservoir studies.
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Tab handling
      const tabs = document.querySelectorAll(".mode-tab");
      const panels = document.querySelectorAll(".mode-panel");
      function setActiveMode(mode) {
        tabs.forEach((t) => {
          if (t.dataset.mode === mode) {
            t.classList.add("tab-active");
          } else {
            t.classList.remove("tab-active");
          }
        });
        panels.forEach((p) => {
          p.classList.toggle("hidden", p.id !== "mode-" + mode);
        });
      }
      tabs.forEach((tab) => {
        tab.addEventListener("click", () => setActiveMode(tab.dataset.mode));
      });
      // default mode
      setActiveMode("density");

      function toSI_Density(value, unit) {
        if (!isFinite(value)) return NaN;
        if (unit === "gcm3") return value * 1000; // g/cm3 -> kg/m3
        if (unit === "kgm3") return value;
        return NaN;
      }
      function sameVolumeUnits(v, fromUnit, toUnit) {
        if (!isFinite(v)) return NaN;
        if (fromUnit === toUnit) return v;
        // basic conversions: cm3 <-> m3, ml <-> cm3
        let inM3;
        if (fromUnit === "m3") inM3 = v;
        else if (fromUnit === "cm3") inM3 = v * 1e-6;
        else if (fromUnit === "ml") inM3 = v * 1e-6;
        else return NaN;

        if (toUnit === "m3") return inM3;
        if (toUnit === "cm3" || toUnit === "ml") return inM3 * 1e6;
        return NaN;
      }
      function toSI_Mass(value, unit) {
        if (!isFinite(value)) return NaN;
        if (unit === "kg") return value;
        if (unit === "g") return value / 1000;
        return NaN;
      }

      const calcBtn = document.getElementById("calcBtn");
      const resetBtn = document.getElementById("resetBtn");
      const errorMsg = document.getElementById("errorMsg");
      const resultsSection = document.getElementById("resultsSection");

      calcBtn.addEventListener("click", () => {
        errorMsg.textContent = "";
        let n = NaN; // porosity
        let Vv = NaN;
        let Vs = NaN;
        let Vt = NaN;

        const activeTab = document.querySelector(".mode-tab.tab-active");
        const mode = activeTab ? activeTab.dataset.mode : "density";

        if (mode === "density") {
          const rhoB = parseFloat(document.getElementById("bulkDensity").value);
          const rhoBUnit = document.getElementById("bulkDensityUnit").value;
          const rhoS = parseFloat(
            document.getElementById("particleDensity").value
          );
          const rhoSUnit = document.getElementById("particleDensityUnit").value;

          if (!isFinite(rhoB) || !isFinite(rhoS) || rhoB <= 0 || rhoS <= 0) {
            errorMsg.textContent =
              "Please enter positive values for both bulk and particle density.";
            resultsSection.classList.add("hidden");
            return;
          }
          const rhoB_SI = toSI_Density(rhoB, rhoBUnit);
          const rhoS_SI = toSI_Density(rhoS, rhoSUnit);
          if (!isFinite(rhoB_SI) || !isFinite(rhoS_SI)) {
            errorMsg.textContent = "Invalid density units.";
            resultsSection.classList.add("hidden");
            return;
          }
          n = 1 - rhoB_SI / rhoS_SI;
        } else if (mode === "volume") {
          const VvInput = parseFloat(
            document.getElementById("voidVolume").value
          );
          const VvUnit = document.getElementById("voidVolumeUnit").value;
          const VtInput = parseFloat(
            document.getElementById("totalVolume").value
          );
          const VtUnit = document.getElementById("totalVolumeUnit").value;

          if (
            !isFinite(VvInput) ||
            !isFinite(VtInput) ||
            VvInput < 0 ||
            VtInput <= 0
          ) {
            errorMsg.textContent =
              "Please enter valid positive volumes (Vv ≥ 0, Vt > 0).";
            resultsSection.classList.add("hidden");
            return;
          }
          // convert both to same unit (use m3 internally)
          const VvM3 = sameVolumeUnits(VvInput, VvUnit, "m3");
          const VtM3 = sameVolumeUnits(VtInput, VtUnit, "m3");
          if (!isFinite(VvM3) || !isFinite(VtM3)) {
            errorMsg.textContent = "Invalid volume units.";
            resultsSection.classList.add("hidden");
            return;
          }
          Vv = VvM3;
          Vt = VtM3;
          Vs = Vt - Vv;
          n = Vv / Vt;
        } else if (mode === "mass") {
          const mInput = parseFloat(
            document.getElementById("massSolids").value
          );
          const mUnit = document.getElementById("massSolidsUnit").value;
          const VtInput = parseFloat(
            document.getElementById("totalVolumeMass").value
          );
          const VtUnit = document.getElementById("totalVolumeMassUnit").value;
          const rhoSInput = parseFloat(
            document.getElementById("particleDensityMass").value
          );
          const rhoSUnit = document.getElementById(
            "particleDensityMassUnit"
          ).value;

          if (
            !isFinite(mInput) ||
            !isFinite(VtInput) ||
            !isFinite(rhoSInput) ||
            mInput <= 0 ||
            VtInput <= 0 ||
            rhoSInput <= 0
          ) {
            errorMsg.textContent =
              "Please enter positive values for mass, total volume and particle density.";
            resultsSection.classList.add("hidden");
            return;
          }
          const mSI = toSI_Mass(mInput, mUnit); // kg
          const VtM3 = sameVolumeUnits(VtInput, VtUnit, "m3"); // m3
          const rhoS_SI = toSI_Density(rhoSInput, rhoSUnit); // kg/m3

          if (!isFinite(mSI) || !isFinite(VtM3) || !isFinite(rhoS_SI)) {
            errorMsg.textContent = "Invalid units for mass, volume or density.";
            resultsSection.classList.add("hidden");
            return;
          }
          Vs = mSI / rhoS_SI;
          Vt = VtM3;
          Vv = Vt - Vs;
          n = Vv / Vt;
        }

        if (!isFinite(n) || n <= 0 || n >= 1) {
          errorMsg.textContent =
            "Computed porosity is outside the physical range (0–1). Please check your inputs.";
          resultsSection.classList.add("hidden");
          return;
        }

        // Compute void ratio
        const e = n / (1 - n);

        // Saturation and water volume
        const VwInput = parseFloat(
          document.getElementById("waterVolume").value
        );
        const SrInput = parseFloat(document.getElementById("satDegree").value);
        let Sr = NaN;
        let Vw = NaN;

        if (isFinite(VwInput) && VwInput > 0) {
          // Need Vv to compute Sr; if not available, approximate using Vt
          if (!isFinite(Vv) && isFinite(Vt)) {
            Vv = n * Vt;
          }
          if (isFinite(Vv) && Vv > 0) {
            // assume same units, so ratio is unitless
            Sr = VwInput / Vv;
            Vw = VwInput;
          }
        } else if (isFinite(SrInput) && SrInput >= 0) {
          Sr = SrInput / 100;
          if (!isFinite(Vv) && isFinite(Vt)) {
            Vv = n * Vt;
          }
          if (isFinite(Vv)) {
            Vw = Sr * Vv;
          }
        }

        // Effective porosity (very approximate)
        let neff = NaN;
        if (isFinite(Sr)) {
          neff = Sr * n;
        }

        // Update UI
        document.getElementById("resultPorosity").textContent =
          (n * 100).toFixed(2) + " %";
        document.getElementById("resultPorosityFrac").textContent =
          "Fraction n = " + n.toFixed(4);

        document.getElementById("resultVoidRatio").textContent = e.toFixed(3);

        if (isFinite(Sr)) {
          const SrPct = Sr * 100;
          document.getElementById("resultSr").textContent =
            SrPct.toFixed(1) + " %";
          if (isFinite(Vw) && isFinite(Vv) && Vv > 0) {
            const pctV = (Vw / Vv) * 100;
            document.getElementById("resultWaterVolume").textContent =
              "Water-filled pore volume ≈ " +
              pctV.toFixed(1) +
              " % of total voids.";
          } else {
            document.getElementById("resultWaterVolume").textContent = "";
          }
        } else {
          document.getElementById("resultSr").textContent = "Not specified";
          document.getElementById("resultWaterVolume").textContent =
            "Enter water volume or degree of saturation to compute S\u209B.";
        }

        if (isFinite(neff)) {
          document.getElementById("resultEffectivePorosity").textContent =
            (neff * 100).toFixed(2) + " %";
        } else {
          document.getElementById("resultEffectivePorosity").textContent =
            "Requires saturation input";
        }

        // Interpretation
        let interp = "Porosity of " + (n * 100).toFixed(1) + "% is ";
        if (n < 0.05)
          interp +=
            "very low (typical of dense crystalline rocks or highly compacted materials).";
        else if (n < 0.15)
          interp += "low (tight rock or heavily compacted soil).";
        else if (n < 0.35)
          interp +=
            "moderate (common for many engineering soils and sedimentary rocks).";
        else if (n < 0.6)
          interp +=
            "high (loose soils, well-sorted sands, or highly porous rocks).";
        else
          interp +=
            "very high (foams, peat, or extremely loose/organic materials).";

        document.getElementById("resultInterpretation").textContent = interp;

        resultsSection.classList.remove("hidden");
      });

      resetBtn.addEventListener("click", () => {
        document.getElementById("porosity-form").reset();
        errorMsg.textContent = "";
        resultsSection.classList.add("hidden");
        setActiveMode("density");
      });

      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/membrane-separation" />
    <title>Membrane Separation Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Membrane Separation Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Membrane Separation Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Membrane Separation Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/membrane-separation" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Membrane Separation Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Membrane Separation Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Engineering Calculators", "item": "https://calcdomain.com/categories/engineering"}, {"@type": "ListItem", "position": 3, "name": "Structural Engineering Calculators", "item": "https://calcdomain.com/subcategories/structural-engineering"}, {"@type": "ListItem", "position": 4, "name": "Membrane Separation Calculator", "item": "https://calcdomain.com/membrane-separation"}]}</script>
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/engineering" class="text-blue-600 hover:underline">Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/structural-engineering" class="text-blue-600 hover:underline">Structural Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Membrane Separation Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Membrane Separation Calculator
              </h1>
              <p class="text-gray-600">
                Estimate flux, permeate composition, stage-cut and simple
                two-stage performance for gas or liquid membrane separation
                units.
              </p>
            </header>

            <section aria-labelledby="calculator-heading" class="mb-8">
              <h2 id="calculator-heading" class="text-xl font-semibold mb-4">
                Membrane Separation Design Tool
              </h2>

              <div class="mb-4">
                <span
                  class="inline-flex items-center px-3 py-1 rounded-full bg-blue-50 text-blue-700 text-xs font-semibold result-badge"
                >
                  Ideal solution, binary mixture, isothermal &amp; isobaric
                  assumptions
                </span>
              </div>

              <div class="space-y-6">
                <!-- Mode selection -->
                <div>
                  <h3 class="font-semibold mb-2">1. Mode &amp; Units</h3>
                  <div class="flex flex-wrap gap-3 mb-3">
                    <button
                      type="button"
                      data-mode="permeance"
                      class="mode-btn px-3 py-1.5 rounded-full text-sm font-medium bg-blue-600 text-white"
                    >
                      Permeance (GPU/Barrer)
                    </button>
                    <button
                      type="button"
                      data-mode="flux"
                      class="mode-btn px-3 py-1.5 rounded-full text-sm font-medium bg-gray-100 text-gray-700"
                    >
                      Direct Flux (mol/m²·s)
                    </button>
                  </div>
                  <p class="text-xs text-gray-500">
                    Permeance mode: enter membrane permeance and pressure
                    difference. Flux mode: enter flux directly from experiments
                    or vendor data.
                  </p>
                </div>

                <!-- Inputs -->
                <div>
                  <h3 class="font-semibold mb-2">
                    2. Feed &amp; Membrane Parameters
                  </h3>
                  <div class="input-grid">
                    <div>
                      <label
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Feed flow F
                        <span class="text-gray-500 text-xs"
                          >(mol/s)</span
                        ></label
                      >
                      <input
                        id="feedFlow"
                        type="number"
                        step="any"
                        class="w-full border rounded-md px-3 py-2"
                        value="10"
                      />
                    </div>
                    <div>
                      <label
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Feed mole fraction of A, x<sub>F,A</sub>
                        <span class="text-gray-500 text-xs">(0–1)</span></label
                      >
                      <input
                        id="feedFracA"
                        type="number"
                        step="any"
                        min="0"
                        max="1"
                        class="w-full border rounded-md px-3 py-2"
                        value="0.3"
                      />
                    </div>
                    <div>
                      <label
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Stage-cut θ = Q<sub>p</sub>/F
                        <span class="text-gray-500 text-xs"
                          >(0–0.8)</span
                        ></label
                      >
                      <input
                        id="stageCut"
                        type="number"
                        step="any"
                        min="0.01"
                        max="0.9"
                        class="w-full border rounded-md px-3 py-2"
                        value="0.3"
                      />
                    </div>
                    <div>
                      <label
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Selectivity α<sub>AB</sub> = P<sub>A</sub>/P<sub
                          >B</sub
                        ></label
                      >
                      <input
                        id="selectivity"
                        type="number"
                        step="any"
                        min="1"
                        class="w-full border rounded-md px-3 py-2"
                        value="20"
                      />
                    </div>

                    <!-- Permeance mode inputs -->
                    <div data-mode-section="permeance">
                      <label
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Permeance of A</label
                      >
                      <div class="flex gap-2">
                        <input
                          id="permeanceA"
                          type="number"
                          step="any"
                          class="w-full border rounded-md px-3 py-2"
                          value="100"
                        />
                        <select
                          id="permeanceAUnit"
                          class="border rounded-md px-2 py-2 text-sm"
                        >
                          <option value="GPU">GPU</option>
                          <option value="Barrer">Barrer</option>
                        </select>
                      </div>
                      <p class="text-xs text-gray-500 mt-1">
                        Typical gas membranes: 10–1000 GPU.
                      </p>
                    </div>
                    <div data-mode-section="permeance">
                      <label
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Feed pressure P<sub>F</sub>
                        <span class="text-gray-500 text-xs">(bar)</span></label
                      >
                      <input
                        id="feedPressure"
                        type="number"
                        step="any"
                        class="w-full border rounded-md px-3 py-2"
                        value="10"
                      />
                    </div>
                    <div data-mode-section="permeance">
                      <label
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Permeate pressure P<sub>p</sub>
                        <span class="text-gray-500 text-xs">(bar)</span></label
                      >
                      <input
                        id="permPressure"
                        type="number"
                        step="any"
                        class="w-full border rounded-md px-3 py-2"
                        value="1"
                      />
                    </div>
                    <div data-mode-section="permeance">
                      <label
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Membrane area A
                        <span class="text-gray-500 text-xs">(m²)</span></label
                      >
                      <input
                        id="area"
                        type="number"
                        step="any"
                        class="w-full border rounded-md px-3 py-2"
                        value="50"
                      />
                    </div>

                    <!-- Flux mode inputs -->
                    <div data-mode-section="flux" class="hidden">
                      <label
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Flux of A, J<sub>A</sub>
                        <span class="text-gray-500 text-xs"
                          >(mol/m²·s)</span
                        ></label
                      >
                      <input
                        id="fluxA"
                        type="number"
                        step="any"
                        class="w-full border rounded-md px-3 py-2"
                        value="0.02"
                      />
                    </div>
                    <div data-mode-section="flux" class="hidden">
                      <label
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Membrane area A
                        <span class="text-gray-500 text-xs">(m²)</span></label
                      >
                      <input
                        id="areaFlux"
                        type="number"
                        step="any"
                        class="w-full border rounded-md px-3 py-2"
                        value="50"
                      />
                    </div>
                  </div>
                </div>

                <!-- Multi-stage -->
                <div>
                  <h3 class="font-semibold mb-2">
                    3. Optional: Two-Stage Approximation
                  </h3>
                  <div class="flex items-center gap-2 mb-2">
                    <input
                      id="enableTwoStage"
                      type="checkbox"
                      class="h-4 w-4 text-blue-600 border-gray-300 rounded"
                    />
                    <label for="enableTwoStage" class="text-sm text-gray-700"
                      >Enable simple two-stage cascade (stage 2 fed by stage 1
                      retentate)</label
                    >
                  </div>
                  <p class="text-xs text-gray-500">
                    Uses the same membrane properties for both stages. Useful
                    for quick scoping of required purity and recovery.
                  </p>
                </div>

                <div class="flex flex-wrap gap-3 items-center">
                  <button
                    id="calcBtn"
                    type="button"
                    class="px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"
                  >
                    Calculate Separation
                  </button>
                  <button
                    id="resetBtn"
                    type="button"
                    class="px-3 py-2 bg-gray-100 text-gray-700 rounded-md text-sm hover:bg-gray-200"
                  >
                    Reset
                  </button>
                  <p id="errorMsg" class="text-sm text-red-600"></p>
                </div>
              </div>
            </section>

            <section aria-labelledby="results-heading" class="mb-8">
              <h2 id="results-heading" class="text-xl font-semibold mb-4">
                Results
              </h2>

              <div id="resultsContainer" class="space-y-4">
                <div class="grid md:grid-cols-3 gap-4">
                  <div class="bg-blue-50 border border-blue-100 rounded-lg p-4">
                    <div
                      class="text-xs font-semibold text-blue-700 uppercase mb-1"
                    >
                      Permeate composition
                    </div>
                    <div class="text-2xl font-bold text-blue-900">
                      <span id="yA">–</span>
                    </div>
                    <div class="text-xs text-blue-700 mt-1">
                      y<sub>p,A</sub> (mole fraction of A in permeate)
                    </div>
                  </div>
                  <div
                    class="bg-green-50 border border-green-100 rounded-lg p-4"
                  >
                    <div
                      class="text-xs font-semibold text-green-700 uppercase mb-1"
                    >
                      Retentate composition
                    </div>
                    <div class="text-2xl font-bold text-green-900">
                      <span id="xR">–</span>
                    </div>
                    <div class="text-xs text-green-700 mt-1">
                      x<sub>R,A</sub> (mole fraction of A in retentate)
                    </div>
                  </div>
                  <div
                    class="bg-purple-50 border border-purple-100 rounded-lg p-4"
                  >
                    <div
                      class="text-xs font-semibold text-purple-700 uppercase mb-1"
                    >
                      Permeate flow
                    </div>
                    <div class="text-2xl font-bold text-purple-900">
                      <span id="Qp">–</span>
                    </div>
                    <div class="text-xs text-purple-700 mt-1">
                      Q<sub>p</sub> (mol/s)
                    </div>
                  </div>
                </div>

                <div class="grid md:grid-cols-3 gap-4">
                  <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                    <div
                      class="text-xs font-semibold text-gray-700 uppercase mb-1"
                    >
                      Flux of A
                    </div>
                    <div class="text-xl font-bold text-gray-900">
                      <span id="JA">–</span>
                    </div>
                    <div class="text-xs text-gray-600 mt-1">
                      J<sub>A</sub> (mol/m²·s)
                    </div>
                  </div>
                  <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                    <div
                      class="text-xs font-semibold text-gray-700 uppercase mb-1"
                    >
                      Recovery of A
                    </div>
                    <div class="text-xl font-bold text-gray-900">
                      <span id="recoveryA">–</span>
                    </div>
                    <div class="text-xs text-gray-600 mt-1">
                      R<sub>A</sub> = (Q<sub>p</sub> y<sub>p,A</sub>) / (F
                      x<sub>F,A</sub>)
                    </div>
                  </div>
                  <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                    <div
                      class="text-xs font-semibold text-gray-700 uppercase mb-1"
                    >
                      Enrichment factor
                    </div>
                    <div class="text-xl font-bold text-gray-900">
                      <span id="enrichment">–</span>
                    </div>
                    <div class="text-xs text-gray-600 mt-1">
                      y<sub>p,A</sub> / x<sub>F,A</sub>
                    </div>
                  </div>
                </div>

                <div id="twoStageResults" class="hidden">
                  <h3 class="font-semibold mt-4 mb-2">
                    Two-Stage Cascade Summary
                  </h3>
                  <div class="grid md:grid-cols-3 gap-4">
                    <div
                      class="bg-yellow-50 border border-yellow-100 rounded-lg p-4"
                    >
                      <div
                        class="text-xs font-semibold text-yellow-700 uppercase mb-1"
                      >
                        Stage 2 permeate composition
                      </div>
                      <div class="text-xl font-bold text-yellow-900">
                        <span id="yA2">–</span>
                      </div>
                      <div class="text-xs text-yellow-700 mt-1">
                        y<sub>p2,A</sub>
                      </div>
                    </div>
                    <div
                      class="bg-yellow-50 border border-yellow-100 rounded-lg p-4"
                    >
                      <div
                        class="text-xs font-semibold text-yellow-700 uppercase mb-1"
                      >
                        Overall recovery of A
                      </div>
                      <div class="text-xl font-bold text-yellow-900">
                        <span id="overallRecoveryA">–</span>
                      </div>
                      <div class="text-xs text-yellow-700 mt-1">
                        Two-stage combined
                      </div>
                    </div>
                    <div
                      class="bg-yellow-50 border border-yellow-100 rounded-lg p-4"
                    >
                      <div
                        class="text-xs font-semibold text-yellow-700 uppercase mb-1"
                      >
                        Total permeate flow
                      </div>
                      <div class="text-xl font-bold text-yellow-900">
                        <span id="QpTotal">–</span>
                      </div>
                      <div class="text-xs text-yellow-700 mt-1">
                        Q<sub>p,total</sub> (mol/s)
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section aria-labelledby="how-it-works-heading" class="prose">
              <h2 id="how-it-works-heading">
                How the membrane separation calculator works
              </h2>
              <p>
                This tool models a binary mixture (component A and B) passing
                through an ideal membrane. It is inspired by standard membrane
                separation theory used in gas separation, pervaporation, reverse
                osmosis and nanofiltration design.
              </p>

              <h3>1. Flux and permeance model</h3>
              <p>
                In permeance mode, the flux of component A is computed from the
                solution–diffusion model:
              </p>
              <div class="formula-box">
                <p>\( J_A = \Pi_A \, \Delta p_A \)</p>
                <ul>
                  <li>\( J_A \) – flux of A (mol·m\(^{-2}\)·s\(^{-1}\))</li>
                  <li>
                    \( \Pi_A \) – permeance of A
                    (mol·m\(^{-2}\)·s\(^{-1}\)·Pa\(^{-1}\))
                  </li>
                  <li>
                    \( \Delta p_A = p_F x_{F,A} - p_p y_{p,A} \) – partial
                    pressure driving force
                  </li>
                </ul>
              </div>
              <p>
                Because \( y_{p,A} \) is not known a priori, the calculator uses
                a simplified
                <strong>well-mixed model</strong> where permeate composition is
                approximated by:
              </p>
              <div class="formula-box">
                <p>
                  \( y_{p,A} \approx \dfrac{\alpha_{AB} \, x_{F,A}}{\alpha_{AB}
                  \, x_{F,A} + (1 - x_{F,A})} \)
                </p>
                <p>
                  where \( \alpha_{AB} = P_A / P_B \) is the membrane
                  selectivity.
                </p>
              </div>
              <p>
                The permeance you enter in GPU or Barrer is internally converted
                to SI units:
              </p>
              <div class="formula-box">
                <p>
                  1 GPU = \( 3.35 \times 10^{-10} \)
                  mol·m\(^{-2}\)·s\(^{-1}\)·Pa\(^{-1}\)
                </p>
                <p>
                  1 Barrer = \( 3.35 \times 10^{-16} \)
                  mol·m·m\(^{-2}\)·s\(^{-1}\)·Pa\(^{-1}\) = \( 3.35 \times
                  10^{-16} \) mol·m\(^{-1}\)·s\(^{-1}\)·Pa\(^{-1}\)
                </p>
              </div>
              <p>
                In <strong>flux mode</strong>, you bypass permeance and pressure
                and directly enter \( J_A \) from experiments or vendor data.
                The calculator then computes permeate flow as:
              </p>
              <div class="formula-box">
                <p>\( Q_p = J_A \, A \)</p>
              </div>

              <h3>2. Mass balance and stage-cut</h3>
              <p>
                The <strong>stage-cut</strong> \( \theta \) is defined as the
                fraction of feed that permeates:
              </p>
              <div class="formula-box">
                <p>
                  \( \theta = \dfrac{Q_p}{F} \quad \Rightarrow \quad Q_p =
                  \theta F \)
                </p>
              </div>
              <p>
                Given the feed flow \( F \), feed composition \( x_{F,A} \), and
                stage-cut \( \theta \), the calculator computes:
              </p>
              <ul>
                <li>Permeate flow \( Q_p \)</li>
                <li>Retentate flow \( R = F - Q_p \)</li>
                <li>
                  Permeate composition \( y_{p,A} \) (from selectivity model)
                </li>
                <li>
                  Retentate composition from an overall mass balance:
                  <div class="formula-box">
                    <p>
                      \( F x_{F,A} = Q_p y_{p,A} + R x_{R,A} \Rightarrow x_{R,A}
                      = \dfrac{F x_{F,A} - Q_p y_{p,A}}{R} \)
                    </p>
                  </div>
                </li>
              </ul>

              <h3>3. Recovery and enrichment</h3>
              <p>The <strong>recovery of A</strong> in the permeate is:</p>
              <div class="formula-box">
                <p>\( R_A = \dfrac{Q_p y_{p,A}}{F x_{F,A}} \)</p>
              </div>
              <p>
                The <strong>enrichment factor</strong> compares permeate purity
                to feed purity:
              </p>
              <div class="formula-box">
                <p>\( E = \dfrac{y_{p,A}}{x_{F,A}} \)</p>
              </div>

              <h3>4. Two-stage cascade approximation</h3>
              <p>
                When you enable the two-stage option, the calculator uses the
                retentate of stage 1 as the feed to stage 2, with the same
                membrane properties and stage-cut:
              </p>
              <ol>
                <li>Stage 1: compute \( y_{p1,A}, x_{R1,A}, Q_{p1}, R_1 \)</li>
                <li>
                  Stage 2 feed: \( F_2 = R_1 \), \( x_{F2,A} = x_{R1,A} \)
                </li>
                <li>Stage 2: compute \( y_{p2,A}, Q_{p2} \)</li>
                <li>
                  Total permeate: \( Q_{p,\text{total}} = Q_{p1} + Q_{p2} \)
                </li>
                <li>
                  Overall recovery:
                  <div class="formula-box">
                    <p>
                      \( R_{A,\text{overall}} = \dfrac{Q_{p1} y_{p1,A} + Q_{p2}
                      y_{p2,A}}{F x_{F,A}} \)
                    </p>
                  </div>
                </li>
              </ol>
              <p>
                This is a simplified cascade and does not replace rigorous
                design, but it is very useful for quick scoping and teaching.
              </p>

              <h2>Typical applications of membrane separation</h2>
              <ul>
                <li>
                  <strong>Gas separation:</strong> CO₂ removal from natural gas,
                  hydrogen recovery, air separation (O₂/N₂).
                </li>
                <li>
                  <strong>Water treatment:</strong> reverse osmosis (RO),
                  nanofiltration (NF), ultrafiltration (UF), microfiltration
                  (MF).
                </li>
                <li>
                  <strong>Pervaporation:</strong> dehydration of organic
                  solvents, removal of VOCs from water.
                </li>
                <li>
                  <strong>Bioprocessing:</strong> protein concentration, cell
                  retention, sterile filtration.
                </li>
              </ul>

              <h3>Key design trade-offs</h3>
              <ul>
                <li>
                  <strong>Pressure ratio:</strong> Higher feed pressure or lower
                  permeate pressure increases driving force and flux, but raises
                  compression/vacuum costs.
                </li>
                <li>
                  <strong>Stage-cut:</strong> Higher stage-cut increases
                  recovery but can reduce permeate purity and increase membrane
                  area.
                </li>
                <li>
                  <strong>Selectivity vs. permeability:</strong> Highly
                  selective membranes often have lower permeability; you may
                  need more area.
                </li>
                <li>
                  <strong>Module configuration:</strong> Cross-flow,
                  counter-current, and co-current modules give different
                  performance for the same membrane.
                </li>
              </ul>

              <h2>Limitations of this calculator</h2>
              <p>To keep the tool fast and intuitive, we assume:</p>
              <ul>
                <li>Binary mixture (A and B) with ideal mixing.</li>
                <li>Isothermal, isobaric operation within each stage.</li>
                <li>No concentration polarization or fouling.</li>
                <li>Uniform permeance over the membrane area.</li>
              </ul>
              <p>
                For detailed industrial design, you should complement this tool
                with rigorous module simulations, pilot data, and
                vendor-specific performance curves.
              </p>
            </section>

            <section aria-labelledby="faq-heading" class="mt-8">
              <h2 id="faq-heading" class="text-xl font-semibold mb-4">
                Membrane separation – FAQ
              </h2>
              <div class="space-y-3" id="faq-container">
                <div class="border border-gray-200 rounded-lg">
                  <button
                    type="button"
                    class="faq-question w-full flex justify-between items-center px-4 py-3 text-left"
                  >
                    <span class="font-medium text-gray-800"
                      >What is membrane separation?</span
                    >
                    <span class="ml-2 text-gray-500">+</span>
                  </button>
                  <div
                    class="faq-answer px-4 pb-3 hidden text-sm text-gray-700"
                  >
                    Membrane separation is a process where a semi-permeable
                    membrane selectively allows certain components of a mixture
                    to pass through (permeate) while retaining others
                    (retentate). The driving force can be pressure,
                    concentration, electrical potential, or temperature. Common
                    examples include reverse osmosis desalination, gas
                    separation, ultrafiltration, and pervaporation.
                  </div>
                </div>

                <div class="border border-gray-200 rounded-lg">
                  <button
                    type="button"
                    class="faq-question w-full flex justify-between items-center px-4 py-3 text-left"
                  >
                    <span class="font-medium text-gray-800"
                      >Which units should I use for permeability and flux?</span
                    >
                    <span class="ml-2 text-gray-500">+</span>
                  </button>
                  <div
                    class="faq-answer px-4 pb-3 hidden text-sm text-gray-700"
                  >
                    For gas separation, vendors often specify permeance in GPU
                    or permeability in Barrer. This calculator accepts GPU or
                    Barrer and converts them to SI units internally. Flux is
                    expressed in mol/m²·s. As long as you keep pressure in bar
                    (or a consistent unit) and use the same basis for feed flow
                    and membrane area, the relative results (purity, recovery,
                    stage-cut) are meaningful.
                  </div>
                </div>

                <div class="border border-gray-200 rounded-lg">
                  <button
                    type="button"
                    class="faq-question w-full flex justify-between items-center px-4 py-3 text-left"
                  >
                    <span class="font-medium text-gray-800"
                      >How realistic is the two-stage cascade model?</span
                    >
                    <span class="ml-2 text-gray-500">+</span>
                  </button>
                  <div
                    class="faq-answer px-4 pb-3 hidden text-sm text-gray-700"
                  >
                    The two-stage cascade implemented here is intentionally
                    simple: it assumes identical membrane properties and
                    stage-cut in both stages, and uses ideal mixing and
                    selectivity-based permeate composition. It captures the main
                    trends of how additional stages improve purity and recovery,
                    but it does not account for detailed module hydraulics,
                    pressure drops, or recycle streams. Use it for quick
                    screening, not final plant design.
                  </div>
                </div>

                <div class="border border-gray-200 rounded-lg">
                  <button
                    type="button"
                    class="faq-question w-full flex justify-between items-center px-4 py-3 text-left"
                  >
                    <span class="font-medium text-gray-800"
                      >Can I use this calculator for liquid separations like RO
                      or NF?</span
                    >
                    <span class="ml-2 text-gray-500">+</span>
                  </button>
                  <div
                    class="faq-answer px-4 pb-3 hidden text-sm text-gray-700"
                  >
                    Yes, as long as you interpret the parameters appropriately.
                    For RO or NF, you can treat the “permeance” as a water or
                    solute permeability and the “pressure difference” as
                    transmembrane pressure minus osmotic pressure. However, real
                    RO/NF systems are strongly affected by concentration
                    polarization and osmotic effects, which are not explicitly
                    modeled here. The tool is best used for conceptual
                    understanding and quick what-if studies.
                  </div>
                </div>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Membrane, Separation.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Engineering Tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/bernoulli-equation"
                  class="text-blue-600 hover:underline"
                  >Bernoulli's Equation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/reynolds-number"
                  class="text-blue-600 hover:underline"
                  >Reynolds Number</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/heat-transfer"
                  class="text-blue-600 hover:underline"
                  >Heat Transfer</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pipe-sizing"
                  class="text-blue-600 hover:underline"
                  >Pipe Sizing Calculator (for water)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/aci-concrete-mix-design"
                  class="text-blue-600 hover:underline"
                  >ACI Concrete Mix Design</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/manning-s-equation-calculator"
                  class="text-blue-600 hover:underline"
                  >Manning's Equation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/aci-318"
                  class="text-blue-600 hover:underline"
                  >ACI 318 Concrete Design</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/heat-loss"
                  class="text-blue-600 hover:underline"
                  >Heat Loss</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">
              More Engineering Calculators
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/moment-of-inertia"
                  class="text-blue-600 hover:underline"
                  >Moment of Inertia</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/factor-of-safety"
                  class="text-blue-600 hover:underline"
                  >Factor of Safety</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/heat-exchanger-design"
                  class="text-blue-600 hover:underline"
                  >Heat Exchanger (LMTD)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/psychrometric-chart"
                  class="text-blue-600 hover:underline"
                  >Psychrometric Chart</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pipe-flow-calculator"
                  class="text-blue-600 hover:underline"
                  >Pipe Flow (Darcy–Weisbach)</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      document.addEventListener("click", function (e) {
        if (e.target.closest(".faq-question")) {
          const btn = e.target.closest(".faq-question");
          const answer = btn.parentElement.querySelector(".faq-answer");
          const symbol = btn.querySelector("span:last-child");
          const isHidden = answer.classList.contains("hidden");
          document
            .querySelectorAll(".faq-answer")
            .forEach((a) => a.classList.add("hidden"));
          document
            .querySelectorAll(".faq-question span:last-child")
            .forEach((s) => (s.textContent = "+"));
          if (isHidden) {
            answer.classList.remove("hidden");
            symbol.textContent = "−";
          }
        }
      });

      // Mobile menu
      document
        .getElementById("mobile-menu-toggle")
        ?.addEventListener("click", function () {
          const menu = document.getElementById("mobile-menu");
          if (!menu) return;
          const isHidden = menu.classList.contains("hidden");
          menu.classList.toggle("hidden", !isHidden);
          this.setAttribute("aria-expanded", String(isHidden));
        });

      // Mode switching
      const modeButtons = document.querySelectorAll(".mode-btn");
      let currentMode = "permeance";

      function updateModeUI() {
        modeButtons.forEach((btn) => {
          const mode = btn.getAttribute("data-mode");
          if (mode === currentMode) {
            btn.classList.remove("bg-gray-100", "text-gray-700");
            btn.classList.add("bg-blue-600", "text-white");
          } else {
            btn.classList.add("bg-gray-100", "text-gray-700");
            btn.classList.remove("bg-blue-600", "text-white");
          }
        });
        document.querySelectorAll("[data-mode-section]").forEach((el) => {
          const mode = el.getAttribute("data-mode-section");
          el.classList.toggle("hidden", mode !== currentMode);
        });
      }

      modeButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          currentMode = btn.getAttribute("data-mode");
          updateModeUI();
        });
      });

      updateModeUI();

      function formatNumber(val, decimals = 3) {
        if (!isFinite(val)) return "–";
        if (
          Math.abs(val) >= 1e4 ||
          (Math.abs(val) > 0 && Math.abs(val) < 1e-3)
        ) {
          return val.toExponential(decimals);
        }
        return val.toFixed(decimals);
      }

      document.getElementById("resetBtn").addEventListener("click", () => {
        document.getElementById("feedFlow").value = 10;
        document.getElementById("feedFracA").value = 0.3;
        document.getElementById("stageCut").value = 0.3;
        document.getElementById("selectivity").value = 20;
        document.getElementById("permeanceA").value = 100;
        document.getElementById("permeanceAUnit").value = "GPU";
        document.getElementById("feedPressure").value = 10;
        document.getElementById("permPressure").value = 1;
        document.getElementById("area").value = 50;
        document.getElementById("fluxA").value = 0.02;
        document.getElementById("areaFlux").value = 50;
        document.getElementById("enableTwoStage").checked = false;
        document.getElementById("errorMsg").textContent = "";
        [
          "yA",
          "xR",
          "Qp",
          "JA",
          "recoveryA",
          "enrichment",
          "yA2",
          "overallRecoveryA",
          "QpTotal",
        ].forEach((id) => {
          document.getElementById(id).textContent = "–";
        });
        document.getElementById("twoStageResults").classList.add("hidden");
      });

      document.getElementById("calcBtn").addEventListener("click", () => {
        const errEl = document.getElementById("errorMsg");
        errEl.textContent = "";

        const F = parseFloat(document.getElementById("feedFlow").value);
        const xF = parseFloat(document.getElementById("feedFracA").value);
        const theta = parseFloat(document.getElementById("stageCut").value);
        const alpha = parseFloat(document.getElementById("selectivity").value);
        const twoStage = document.getElementById("enableTwoStage").checked;

        if (
          !(F > 0) ||
          !(xF >= 0 && xF <= 1) ||
          !(theta > 0 && theta < 0.9) ||
          !(alpha >= 1)
        ) {
          errEl.textContent =
            "Please check feed flow, composition (0–1), stage-cut (0–0.9) and selectivity (≥1).";
          return;
        }

        let JA; // flux of A (mol/m²·s)
        let Qp; // permeate flow (mol/s)
        let yA; // permeate composition

        if (currentMode === "permeance") {
          const PiInput = parseFloat(
            document.getElementById("permeanceA").value
          );
          const PiUnit = document.getElementById("permeanceAUnit").value;
          const PF = parseFloat(document.getElementById("feedPressure").value);
          const Pp = parseFloat(document.getElementById("permPressure").value);
          const A = parseFloat(document.getElementById("area").value);

          if (!(PiInput > 0) || !(PF > Pp) || !(A > 0)) {
            errEl.textContent =
              "Please provide positive permeance, area, and ensure feed pressure > permeate pressure.";
            return;
          }

          // Convert permeance to SI (mol/m²·s·Pa)
          let PiA_SI;
          if (PiUnit === "GPU") {
            PiA_SI = PiInput * 3.35e-10;
          } else {
            // Barrer to permeability; assume thickness 1 µm for an effective permeance estimate
            const permeability = PiInput * 3.35e-16; // mol·m/(m²·s·Pa)
            const thickness = 1e-6; // m
            PiA_SI = permeability / thickness;
          }

          // Approximate permeate composition from selectivity and feed composition
          yA = (alpha * xF) / (alpha * xF + (1 - xF));
          const PF_Pa = PF * 1e5;
          const Pp_Pa = Pp * 1e5;
          const deltaPA = PF_Pa * xF - Pp_Pa * yA;

          JA = PiA_SI * deltaPA; // mol/m²·s
          Qp = JA * A; // mol/s

          // If user-specified stage-cut conflicts with flux-based Qp, override Qp to match stage-cut
          const Qp_stage = theta * F;
          if (Qp_stage > 0 && isFinite(Qp_stage)) {
            Qp = Qp_stage;
            JA = Qp / A;
          }
        } else {
          const fluxA = parseFloat(document.getElementById("fluxA").value);
          const Aflux = parseFloat(document.getElementById("areaFlux").value);
          if (!(fluxA > 0) || !(Aflux > 0)) {
            errEl.textContent =
              "Please provide positive flux and membrane area.";
            return;
          }
          JA = fluxA;
          Qp = theta * F;
          yA = (alpha * xF) / (alpha * xF + (1 - xF));
        }

        const R = F - Qp;
        if (!(R > 0)) {
          errEl.textContent =
            "Stage-cut too high: retentate flow becomes non-positive. Reduce θ.";
          return;
        }

        const xR = (F * xF - Qp * yA) / R;
        const recoveryA = (Qp * yA) / (F * xF);
        const enrichment = yA / xF;

        document.getElementById("yA").textContent = formatNumber(yA, 4);
        document.getElementById("xR").textContent = formatNumber(xR, 4);
        document.getElementById("Qp").textContent = formatNumber(Qp, 3);
        document.getElementById("JA").textContent = formatNumber(JA, 4);
        document.getElementById("recoveryA").textContent = formatNumber(
          recoveryA,
          3
        );
        document.getElementById("enrichment").textContent = formatNumber(
          enrichment,
          3
        );

        // Two-stage cascade
        const twoStageDiv = document.getElementById("twoStageResults");
        if (twoStage) {
          const F2 = R;
          const xF2 = xR;
          const theta2 = theta;

          const Qp2 = theta2 * F2;
          const R2 = F2 - Qp2;
          const yA2 = (alpha * xF2) / (alpha * xF2 + (1 - xF2));
          const xR2 = R2 > 0 ? (F2 * xF2 - Qp2 * yA2) / R2 : NaN;

          const QpTotal = Qp + Qp2;
          const overallRecovery = (Qp * yA + Qp2 * yA2) / (F * xF);

          document.getElementById("yA2").textContent = formatNumber(yA2, 4);
          document.getElementById("overallRecoveryA").textContent =
            formatNumber(overallRecovery, 3);
          document.getElementById("QpTotal").textContent = formatNumber(
            QpTotal,
            3
          );
          twoStageDiv.classList.remove("hidden");
        } else {
          twoStageDiv.classList.add("hidden");
        }
      });

      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

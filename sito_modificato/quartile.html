<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Quartile Calculator – Q1, Median, Q3, IQR &amp; Outliers</title>
    <meta name="description" content="Compute quartiles (Q1, median, Q3), interquartile range (IQR) and outliers from a dataset. Supports Tukey and inclusive (Excel-style) quartiles, with step-by-step explanations and examples.">
    <link rel="canonical" href="https://calcdomain.com/quartile">
    
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .card-hover { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .prose { max-width: 65ch; margin-left: auto; margin-right: auto; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .formula-box { background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 8px; padding: 1rem; overflow-x: auto; margin: 1rem 0; }
        .badge { display: inline-flex; align-items: center; border-radius: 9999px; padding: 0.25rem 0.75rem; font-size: 0.75rem; font-weight: 500; }
        .chip { display: inline-flex; align-items: center; border-radius: 9999px; padding: 0.25rem 0.6rem; font-size: 0.7rem; font-weight: 500; }
        .result-box { background: #f9fafb; border-radius: 0.5rem; border: 1px solid #e5e7eb; padding: 0.75rem 1rem; font-size: 0.9rem; }
        .result-value { font-weight: 600; color: #111827; }
        .error-text { font-size: 0.75rem; color: #b91c1c; }
        .stat-label { font-size: 0.75rem; color: #6b7280; }
        .pill { border-radius: 9999px; padding: 0.1rem 0.6rem; font-size: 0.7rem; }
        .table-scroll { max-height: 260px; overflow-y: auto; }
        .small-code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 0.75rem; }
    </style>
    
    <!-- HEAD_SCRIPTS_E_META -->
    <!-- Google tag (gtag.js) -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7MB5V1LZRN');
    </script>

    <meta name="google-site-verification" content="_tiTZ9ivAdtXcAS9CMnTNJ549Sg39WVqP_ZFbWgglNA">

    <script>
        window.ezstandalone = window.ezstandalone || {};
        ezstandalone.cmd = ezstandalone.cmd || [];
    </script>

    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://calcdomain.com"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Math",
          "item": "https://calcdomain.com/categories/math"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Core Math & Algebra",
          "item": "https://calcdomain.com/subcategories/core-math-algebra"
        }
      ]
    },
    {
      "@type": "HowTo",
      "name": "How to use the quartile calculator",
      "description": "Step-by-step instructions to compute Q1, median, Q3, the interquartile range and outliers from a dataset using Tukey or inclusive quartile definitions.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Enter your data",
          "text": "Paste or type your numeric data into the input field, separated by commas, spaces, semicolons or line breaks. For example: 7, 9, 13, 15, 16, 18, 21."
        },
        {
          "@type": "HowToStep",
          "name": "Choose a quartile method",
          "text": "Select Tukey (median-of-halves) or Inclusive (similar to Excel QUARTILE.INC). The choice controls how Q1 and Q3 are interpolated, especially for small samples."
        },
        {
          "@type": "HowToStep",
          "name": "Set rounding and calculate",
          "text": "Select the desired number of decimal places and click Calculate quartiles. The tool returns Q1, median, Q3, interquartile range and the classical Tukey outlier fences."
        },
        {
          "@type": "HowToStep",
          "name": "Interpret IQR and outliers",
          "text": "Use the IQR and fences to see how spread out your data are and to flag values classified as outliers by the 1.5×IQR rule."
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is a quartile?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "A quartile is a value that divides ordered data into four equal parts. The first quartile Q1 is the value below which roughly 25% of the observations fall, the median Q2 marks 50%, and the third quartile Q3 marks 75%."
          }
        },
        {
          "@type": "Question",
          "name": "What is the interquartile range (IQR)?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The interquartile range IQR is defined as Q3 minus Q1. It measures the spread of the central 50% of the data and is less sensitive to extreme values than the full range."
          }
        },
        {
          "@type": "Question",
          "name": "Why do different software packages give different quartiles?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Quartiles can be defined using several slightly different conventions, especially when the sample size is small or when interpolation is used. For example, Tukey’s hinges, inclusive quartiles and exclusive quartiles may yield different Q1 and Q3 for the same dataset. The calculator lets you compare two common methods explicitly."
          }
        },
        {
          "@type": "Question",
          "name": "How are outliers detected with quartiles?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "A common rule is Tukey’s outlier rule: values below Q1 − 1.5 × IQR or above Q3 + 1.5 × IQR are flagged as outliers. This rule is based purely on the distribution of the data and does not automatically mean that an observation is invalid or should be removed."
          }
        },
        {
          "@type": "Question",
          "name": "Does this tool compute sample or population quartiles?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Quartiles are descriptive statistics of the sample you provide. They can be used as estimates of population quartiles, but formal inference on population quantiles requires additional statistical methods and assumptions."
          }
        }
      ]
    }
  ]
}
</script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
.auditspine-badge{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  border:1px solid #e5e7eb;
  background:#f8fafc;
  color:#0f172a;
}
.auditspine-badge-warn{
  background:#fff7ed;
  border-color:#fed7aa;
  color:#9a3412;
}
</style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- BODY_SCRIPTS_INIZIO -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a href="https://calcdomain.com" class="text-2xl font-bold text-blue-600">CalcDomain</a>
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" autocomplete="off">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
              <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a href="https://calcdomain.com/search" class="text-gray-700 hover:text-blue-600 transition-colors">Advanced Search</a>
            <a href="https://calcdomain.com/#categories" class="text-gray-700 hover:text-blue-600 transition-colors">Categories</a>
          </div>
          <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
          </button>
        </div>
        <nav id="mobile-menu" class="md:hidden mt-4 hidden" aria-label="Mobile menu" role="navigation">
          <div class="mb-4">
            <div class="relative">
              <input type="search" id="mobile-search-input" placeholder="Search calculators..." class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>
          </div>
          <div class="space-y-2">
            <a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
            <a href="https://calcdomain.com/#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
          </div>
        </nav>
      </nav>
    </header>

    <a class="skip-link" href="#main-content">Skip to main content</a>
    <main class="container mx-auto px-4 py-8 w-full lg:w-2/3" id="main-content">
      
      <nav class="text-sm mb-4 text-gray-600" aria-label="Breadcrumbs"><a href="https://calcdomain.com" class="hover:text-blue-600">Home</a> &raquo; <a href="https://calcdomain.com/categories/math" class="hover:text-blue-600">Math</a> &raquo; <a href="https://calcdomain.com/subcategories/core-math-algebra" class="hover:text-blue-600">Core Math &amp; Algebra</a></nav>
      
      <div class="flex flex-col lg:flex-row gap-8">
        
        <div class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">

            <div class="space-y-6">
              <header>
                <div class="flex flex-wrap items-center gap-2 mb-2">
                  <h1 class="text-2xl md:text-3xl font-bold">Quartile Calculator (Q1, Median, Q3 &amp; IQR)</h1>
                  <span class="badge bg-purple-50 text-purple-700 border border-purple-200">
                    Descriptive statistics &amp; outliers
                  </span>
                </div>
                <p class="text-gray-700">
                  Paste your dataset to get <strong>Q1</strong>, <strong>median</strong>, <strong>Q3</strong>,
                  <strong>interquartile range (IQR)</strong>, and <strong>outliers</strong>. Compare
                  <strong>Tukey</strong> quartiles with an <strong>inclusive (Excel-style)</strong> definition.
                </p>
                <p class="mt-2 text-xs text-gray-700 bg-gray-50 border border-gray-200 rounded-md p-2">
                  <strong>Typical use cases:</strong> summarising exam scores, salaries, response times, lab measurements,
                  dashboards in Excel/Sheets, or quick sanity checks when preparing reports and boxplots.
                </p>
              </header>

              <!-- INPUT SECTION -->
              <section aria-label="Quartile calculator input" class="space-y-4">
                <div class="flex flex-wrap items-center justify-between gap-2">
                  <h2 class="text-lg font-semibold">1. Enter your data</h2>
                  <div class="flex flex-wrap items-center gap-2 text-xs">
                    <span class="chip bg-gray-100 text-gray-700 border border-gray-200">Up to 5,000 values</span>
                    <span class="chip bg-gray-100 text-gray-700 border border-gray-200">Ignores blanks</span>
                  </div>
                </div>

                <div>
                  <label for="data-input" class="block text-sm font-medium text-gray-700">
                    Data values (comma, space, semicolon or newline separated)
                  </label>
                  <textarea id="data-input" rows="5" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 small-code" placeholder="Example: 7, 9, 13, 15, 16, 18, 21"></textarea>
                  <p class="mt-1 text-xs text-gray-500">
                    You can paste from Excel or Google Sheets: the calculator automatically splits by spaces, commas, semicolons and line breaks.
                  </p>
                </div>

                <div class="flex flex-wrap items-center gap-2 text-xs">
                  <span class="text-gray-500 mr-1">Sample datasets:</span>
                  <button type="button" class="inline-flex items-center px-3 py-1.5 rounded-full border border-gray-300 text-gray-700 hover:bg-gray-50 text-xs" data-sample="symmetric">
                    Symmetric (test boxplot)
                  </button>
                  <button type="button" class="inline-flex items-center px-3 py-1.5 rounded-full border border-gray-300 text-gray-700 hover:bg-gray-50 text-xs" data-sample="skewed">
                    Right-skewed
                  </button>
                  <button type="button" class="inline-flex items-center px-3 py-1.5 rounded-full border border-gray-300 text-gray-700 hover:bg-gray-50 text-xs" data-sample="outliers">
                    With strong outliers
                  </button>
                </div>
              </section>

              <!-- OPTIONS AND SUMMARY -->
              <section aria-label="Quartile options and summary" class="space-y-4 mt-4">
                <h2 class="text-lg font-semibold">2. Quartile method, rounding and order</h2>

                <div class="grid md:grid-cols-3 gap-4">
                  <fieldset class="md:col-span-2">
                    <legend class="text-sm font-medium text-gray-700 mb-1">Quartile definition</legend>
                    <div class="space-y-1 text-sm text-gray-700">
                      <label class="flex items-start gap-2">
                        <input type="radio" name="quartile-method" value="tukey" class="mt-0.5" checked="">
                        <span>
                          <span class="font-semibold">Tukey (median of halves)</span><br>
                          <span class="stat-label">
                            Median splits the data; Q1 is the median of the lower half and Q3 of the upper half
                            (excluding the median when n is odd). Common in descriptive statistics and boxplots.
                          </span>
                        </span>
                      </label>
                      <label class="flex items-start gap-2">
                        <input type="radio" name="quartile-method" value="inclusive" class="mt-0.5">
                        <span>
                          <span class="font-semibold">Inclusive (Excel-style)</span><br>
                          <span class="stat-label">
                            Uses linear interpolation between ordered values, similar to Excel’s QUARTILE.INC and many
                            software defaults.
                          </span>
                        </span>
                      </label>
                    </div>
                  </fieldset>

                  <div class="space-y-3">
                    <div>
                      <label for="decimals" class="block text-sm font-medium text-gray-700">Decimals</label>
                      <select id="decimals" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2" selected="">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                      </select>
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700">Sort order</label>
                      <div class="flex items-center gap-3 text-sm text-gray-700">
                        <label class="inline-flex items-center">
                          <input type="radio" name="sort-order" value="asc" class="mr-1" checked="">
                          Ascending
                        </label>
                        <label class="inline-flex items-center">
                          <input type="radio" name="sort-order" value="desc" class="mr-1">
                          Descending (for display only)
                        </label>
                      </div>
                      <p class="stat-label mt-1">
                        Quartiles are always computed on ascending data; this option only affects the preview.
                      </p>
                    </div>
                  </div>
                </div>

                <div class="flex flex-wrap items-center gap-3 mt-1">
                  <button type="button" id="btn-calc-quartiles" class="inline-flex items-center px-3 py-2 text-xs font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700">
                    Calculate quartiles
                  </button>
                  <button type="button" id="btn-clear-quartiles" class="inline-flex items-center px-3 py-2 text-xs font-medium rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50">
                    Clear
                  </button>
                  <p id="quartile-error" class="error-text ml-auto"></p>
                </div>

                <!-- RESULTS SUMMARY -->
                <div class="grid md:grid-cols-4 gap-4 mt-2">
                  <div>
                    <div class="stat-label mb-1">Q1 (25th percentile)</div>
                    <div id="res-q1" class="result-box">
                      <span class="result-value">—</span>
                    </div>
                  </div>
                  <div>
                    <div class="stat-label mb-1">Median (Q2)</div>
                    <div id="res-median" class="result-box">
                      <span class="result-value">—</span>
                    </div>
                  </div>
                  <div>
                    <div class="stat-label mb-1">Q3 (75th percentile)</div>
                    <div id="res-q3" class="result-box">
                      <span class="result-value">—</span>
                    </div>
                  </div>
                  <div>
                    <div class="stat-label mb-1">IQR = Q3 − Q1</div>
                    <div id="res-iqr" class="result-box">
                      <span class="result-value">—</span>
                    </div>
                  </div>
                </div>

                <div class="grid md:grid-cols-3 gap-4 mt-3">
                  <div>
                    <div class="stat-label mb-1">Tukey fences (outlier thresholds)</div>
                    <div id="res-fences" class="result-box text-xs">
                      <div>Lower fence: <span class="result-value">—</span></div>
                      <div>Upper fence: <span class="result-value">—</span></div>
                    </div>
                  </div>
                  <div>
                    <div class="stat-label mb-1">Extreme values</div>
                    <div id="res-minmax" class="result-box text-xs">
                      <div>Min: <span class="result-value">—</span></div>
                      <div>Max: <span class="result-value">—</span></div>
                    </div>
                  </div>
                  <div>
                    <div class="stat-label mb-1">Count</div>
                    <div id="res-count" class="result-box text-xs">
                      <div>Total values: <span class="result-value">—</span></div>
                      <div>Distinct: <span class="result-value">—</span></div>
                    </div>
                  </div>
                </div>
              </section>

              <!-- SORTED DATA & OUTLIERS -->
              <section class="mt-6 space-y-4" aria-label="Sorted data and outliers">
                <h2 class="text-lg font-semibold">3. Sorted data, positions and outliers</h2>
                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <div class="flex items-center justify-between mb-1">
                      <span class="stat-label">Ordered values (with positions)</span>
                      <span id="current-method-label" class="pill bg-gray-100 text-gray-700 border border-gray-200">
                        Method: —
                      </span>
                    </div>
                    <div class="border border-gray-200 rounded-md table-scroll">
                      <table class="min-w-full text-xs">
                        <thead class="bg-gray-50">
                          <tr>
                            <th class="px-3 py-2 text-left font-semibold text-gray-700 border-b">#</th>
                            <th class="px-3 py-2 text-left font-semibold text-gray-700 border-b">Value</th>
                            <th class="px-3 py-2 text-left font-semibold text-gray-700 border-b">Notes</th>
                          </tr>
                        </thead>
                        <tbody id="sorted-table-body">
                          <!-- Filled via JS -->
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <div>
                    <div class="stat-label mb-1">Outliers (Tukey 1.5×IQR rule)</div>
                    <div id="res-outliers" class="result-box text-xs">
                      <div>Below lower fence: <span class="result-value">—</span></div>
                      <div>Above upper fence: <span class="result-value">—</span></div>
                    </div>
                    <div class="formula-box mt-3 text-xs">
                      <p class="font-semibold mb-1">Formulas used</p>
                      <p>IQR = Q3 − Q1</p>
                      <p>Lower fence = Q1 − 1.5 × IQR</p>
                      <p>Upper fence = Q3 + 1.5 × IQR</p>
                      <p class="mt-1">
                        Values outside these fences are marked as outliers in boxplots and summary tables.
                      </p>
                    </div>
                  </div>
                </div>
              </section>

              <!-- EXPLANATORY CONTENT -->
              <section class="prose mt-6">
                <h2>What are quartiles and why do they matter?</h2>
                <p>
                  <strong>Quartiles</strong> are values that divide an ordered dataset into four parts with roughly the
                  same number of observations:
                </p>
                <ul>
                  <li><strong>Q1</strong>: about 25% of the data lie below this value;</li>
                  <li><strong>Q2 (median)</strong>: 50% of the data lie below this value;</li>
                  <li><strong>Q3</strong>: about 75% of the data lie below this value.</li>
                </ul>
                <p>
                  Together with the <strong>minimum</strong>, <strong>maximum</strong> and the
                  <strong>interquartile range (IQR)</strong>, quartiles form the backbone of boxplots and many
                  descriptive summaries.
                </p>

                <div class="formula-box text-sm">
                  <p class="font-semibold mb-1">Core relationships</p>
                  <p>IQR = Q3 − Q1</p>
                  <p>Lower fence = Q1 − 1.5 × IQR</p>
                  <p>Upper fence = Q3 + 1.5 × IQR</p>
                  <p class="mt-1">
                    Any observation below the lower fence or above the upper fence is flagged as a potential outlier
                    according to Tukey’s rule.
                  </p>
                </div>

                <h3>Different quartile conventions (Tukey vs inclusive)</h3>
                <p>
                  If you enter a small dataset into different calculators or software packages, you may notice that
                  Q1 and Q3 sometimes differ by one or two units. This is not a bug: it comes from
                  <strong>different quartile definitions</strong>.
                </p>
                <ul>
                  <li>
                    <strong>Tukey (median-of-halves)</strong> splits the ordered data at the median and then takes the
                    median of each half. When the sample size is odd, the central value is not included in either half.
                  </li>
                  <li>
                    <strong>Inclusive (Excel-style)</strong> uses linear interpolation among ordered values. It behaves
                    like Excel’s <code>QUARTILE.INC</code> and is convenient when aligning with spreadsheet output.
                  </li>
                </ul>
                <p>
                  This calculator shows both approaches (one at a time, with a clear label) so that you can match your
                  organisation’s convention and still understand how the other definition behaves.
                </p>

                <h3>Interpreting IQR and outliers responsibly</h3>
                <p>
                  The <strong>interquartile range</strong> measures the spread of the middle 50% of the data. A small
                  IQR suggests that most values are clustered around the median; a large IQR indicates more variability.
                </p>
                <p>
                  Outlier flags based on 1.5 × IQR should be treated as <em>diagnostic hints</em>, not automatic
                  deletion rules. In many applications, extreme values are precisely the observations we care about
                  most (e.g. rare failures, unusual responses, extreme performers).
                </p>

                <h2 id="faq">FAQ: quartiles, percentiles and this calculator</h2>

                <h3>How do quartiles relate to percentiles?</h3>
                <p>
                  Q1, Q2, and Q3 correspond to the <strong>25th</strong>, <strong>50th</strong>, and
                  <strong>75th</strong> percentiles. In general, the p-th percentile is the value below which p% of
                  observations fall. Quartile definitions are special cases of more general percentile algorithms.
                </p>

                <h3>Can I use this with grouped data or frequencies?</h3>
                <p>
                  This version of the calculator assumes raw ungrouped data. If you have class intervals or frequency
                  tables, you can often expand them into raw values (e.g. by repeating each mid-point according to its
                  frequency) or use specialised grouped-data formulas.
                </p>

                <h3>How many data points do I need for quartiles to be meaningful?</h3>
                <p>
                  Quartiles can technically be defined even for very small samples, but they become more stable and
                  informative as the sample size grows. With fewer than about 10 observations, small changes in the data
                  can move Q1 and Q3 quite a lot, and different definitions may disagree strongly.
                </p>

                <h3>Is this calculator suitable for formal statistical inference?</h3>
                <p>
                  The tool is designed for <strong>descriptive analysis</strong>, exploratory work, teaching and
                  day-to-day reporting. For high-stakes decisions, confirm your choices and assumptions with a
                  statistician and, where appropriate, use confidence intervals or formal tests for quantiles.
                </p>
              </section>
            </div>

          </div>
        
<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[','\\]</div>
  <pre class="auditspine-mono">','\</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">Formulas used IQR = Q3 − Q1 Lower fence = Q1 − 1.5 × IQR Upper fence = Q3 + 1.5 × IQR Values outside these fences are marked as outliers in boxplots and summary tables.</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">Core relationships IQR = Q3 − Q1 Lower fence = Q1 − 1.5 × IQR Upper fence = Q3 + 1.5 × IQR Any observation below the lower fence or above the upper fence is flagged as a potential outlier according to Tukey’s rule.</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>NIST — Weights and measures</strong> — nist.gov · Accessed 2026-01-19<br><a href="https://www.nist.gov/pml/weights-and-measures" target="_blank" rel="nofollow noopener">https://www.nist.gov/pml/weights-and-measures</a></li>
<li><strong>FTC — Consumer advice</strong> — consumer.ftc.gov · Accessed 2026-01-19<br><a href="https://consumer.ftc.gov/" target="_blank" rel="nofollow noopener">https://consumer.ftc.gov/</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</main>
        
        <aside class="w-full lg:w-1/3">
          <div class="space-y-6">
            <section class="bg-white p-4 rounded-lg shadow-md">
              <h2 class="text-lg font-semibold mb-3">Related calculators</h2>
              <ul class="space-y-2 text-sm">
                <li>
                  <a href="https://calcdomain.com/probability" class="text-blue-600 hover:underline">
                    Probability Calculator
                  </a>
                  <p class="text-gray-500 text-xs">
                    Combine event probabilities and binomial models to complement quartile-based summaries.
                  </p>
                </li>
                <li>
                  <a href="https://calcdomain.com/percentage-calculator" class="text-blue-600 hover:underline">
                    Percentage Calculator
                  </a>
                  <p class="text-gray-500 text-xs">
                    Convert quartile differences into percentage changes and relative effects.
                  </p>
                </li>
                <li>
                  <a href="https://calcdomain.com/rems-to-pixels" class="text-blue-600 hover:underline">
                    Rems to Pixels Converter
                  </a>
                  <p class="text-gray-500 text-xs">
                    Useful when designing dashboards and visualisations for your quartile results.
                  </p>
                </li>
                <li>
                  <a href="https://calcdomain.com/energy-unit-converter" class="text-blue-600 hover:underline">
                    Energy Unit Converter
                  </a>
                  <p class="text-gray-500 text-xs">
                    For engineering data where quartiles are applied to energy or power measurements.
                  </p>
                </li>
              </ul>
            </section>

            <section class="bg-white p-4 rounded-lg shadow-md">
              <h2 class="text-lg font-semibold mb-3">Category: Math &amp; Conversions</h2>
              <p class="text-sm text-gray-700 mb-3">
                More tools for statistics, algebra and technical conversions – designed for students,
                analysts and engineers.
              </p>
              <a href="https://calcdomain.com/math-conversions" class="inline-flex items-center px-3 py-2 text-sm font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700">
                Browse all math tools
              </a>
            </section>
          </div>
        </aside>
        
      </div>
    </div> 

    <footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                                                                        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>


























    
    <script src="/assets/js/script_menu.js" defer=""></script>
    <script src="/assets/js/script_faq.js" defer=""></script>
    <script src="search.js" defer=""></script>
    
    <script>
      window.MathJax = { tex: { inlineMath: [['\\(','\\)'], [',
        svg: { fontCache: 'global' }
      };
    </script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
    <script>
      // Mobile menu toggle
      document.getElementById('mobile-menu-toggle')?.addEventListener('click', function () {
        const menu = document.getElementById('mobile-menu');
        if (!menu) return;
        const isHidden = menu.classList.contains('hidden');
        menu.classList.toggle('hidden', !isHidden);
        this.setAttribute('aria-expanded', String(isHidden));
      });

      document.addEventListener('DOMContentLoaded', function () {
        const dataInput = document.getElementById('data-input');
        const decimalsSelect = document.getElementById('decimals');
        const sortOrderRadios = document.querySelectorAll('input[name="sort-order"]');
        const methodRadios = document.querySelectorAll('input[name="quartile-method"]');
        const btnCalc = document.getElementById('btn-calc-quartiles');
        const btnClear = document.getElementById('btn-clear-quartiles');
        const errorEl = document.getElementById('quartile-error');

        const resQ1 = document.getElementById('res-q1');
        const resMedian = document.getElementById('res-median');
        const resQ3 = document.getElementById('res-q3');
        const resIqr = document.getElementById('res-iqr');
        const resFences = document.getElementById('res-fences');
        const resMinMax = document.getElementById('res-minmax');
        const resCount = document.getElementById('res-count');
        const resOutliers = document.getElementById('res-outliers');
        const sortedTableBody = document.getElementById('sorted-table-body');
        const currentMethodLabel = document.getElementById('current-method-label');

        const sampleButtons = document.querySelectorAll('[data-sample]');

        function setResultText(container, index, text) {
          if (!container) return;
          const spans = container.querySelectorAll('.result-value');
          if (spans[index]) spans[index].textContent = text;
        }

        function clearAllResults() {
          [resQ1, resMedian, resQ3, resIqr, resFences, resMinMax, resCount, resOutliers].forEach(function (box) {
            if (!box) return;
            box.querySelectorAll('.result-value').forEach(function (span) {
              span.textContent = '—';
            });
          });
          if (sortedTableBody) sortedTableBody.innerHTML = '';
          if (currentMethodLabel) currentMethodLabel.textContent = 'Method: —';
          if (errorEl) errorEl.textContent = '';
        }

        function getDecimals() {
          if (!decimalsSelect) return 2;
          const d = Number(decimalsSelect.value);
          if (!Number.isInteger(d) || d < 0 || d > 10) return 2;
          return d;
        }

        function fmt(value) {
          if (!isFinite(value)) return '—';
          const d = getDecimals();
          return Number(value.toFixed(d)).toString();
        }

        function parseData() {
          if (!dataInput) return [];
          const raw = dataInput.value;
          if (!raw.trim()) return [];
          const tokens = raw.split(/[\s,;]+/);
          const nums = [];
          for (let t of tokens) {
            const s = t.trim();
            if (!s) continue;
            const v = Number(s);
            if (!isFinite(v)) {
              return { error: 'All non-empty entries must be numeric. Problem with: "' + s + '".' };
            }
            nums.push(v);
            if (nums.length > 5000) {
              return { error: 'Maximum allowed size is 5,000 values for performance reasons.' };
            }
          }
          if (nums.length === 0) {
            return { error: 'Please enter at least one numeric value.' };
          }
          return { data: nums };
        }

        function medianOfSortedSlice(arr, start, end) {
          // arr sorted ascending, slice [start, end)
          const len = end - start;
          if (len <= 0) return NaN;
          const mid = Math.floor(len / 2);
          if (len % 2 === 1) {
            return arr[start + mid];
          } else {
            return (arr[start + mid - 1] + arr[start + mid]) / 2;
          }
        }

        function quartilesTukey(sorted) {
          const n = sorted.length;
          if (n === 0) return { q1: NaN, q2: NaN, q3: NaN };
          const q2 = medianOfSortedSlice(sorted, 0, n);
          let lowerEnd, upperStart;
          if (n % 2 === 1) {
            const mid = Math.floor(n / 2);
            lowerEnd = mid;        // 0 .. mid-1
            upperStart = mid + 1;  // mid+1 .. n-1
          } else {
            const half = n / 2;
            lowerEnd = half;       // 0 .. half-1
            upperStart = half;     // half .. n-1
          }
          const q1 = medianOfSortedSlice(sorted, 0, lowerEnd);
          const q3 = medianOfSortedSlice(sorted, upperStart, n);
          return { q1, q2, q3 };
        }

        function quartilesInclusive(sorted) {
          const n = sorted.length;
          if (n === 0) return { q1: NaN, q2: NaN, q3: NaN };

          function quantile(p) {
            if (n === 1) return sorted[0];
            const pos = (n - 1) * p;
            const lower = Math.floor(pos);
            const upper = Math.ceil(pos);
            const frac = pos - lower;
            if (upper >= n) return sorted[n - 1];
            return sorted[lower] + frac * (sorted[upper] - sorted[lower]);
          }

          return {
            q1: quantile(0.25),
            q2: quantile(0.5),
            q3: quantile(0.75)
          };
        }

        function computeQuartiles() {
          clearAllResults();

          const parsed = parseData();
          if (parsed.error) {
            if (errorEl) errorEl.textContent = parsed.error;
            return;
          }
          const values = parsed.data;
          const n = values.length;

          const method = (Array.from(methodRadios).find(r => r.checked)?.value) || 'tukey';
          const sortOrder = (Array.from(sortOrderRadios).find(r => r.checked)?.value) || 'asc';

          const sortedAsc = values.slice().sort((a, b) => a - b);
          const sorted = sortOrder === 'desc' ? sortedAsc.slice().reverse() : sortedAsc.slice();

          let q;
          if (method === 'inclusive') {
            q = quartilesInclusive(sortedAsc);
          } else {
            q = quartilesTukey(sortedAsc);
          }
          const q1 = q.q1;
          const q2 = q.q2;
          const q3 = q.q3;

          // IQR, fences, min, max, counts
          const iqr = q3 - q1;
          const lowerFence = q1 - 1.5 * iqr;
          const upperFence = q3 + 1.5 * iqr;

          const minVal = sortedAsc[0];
          const maxVal = sortedAsc[sortedAsc.length - 1];

          const distinctCount = new Set(sortedAsc.map(v => v.toString())).size;

          // Outliers based on sortedAsc
          const lowOutliers = sortedAsc.filter(v => v < lowerFence);
          const highOutliers = sortedAsc.filter(v => v > upperFence);

          // Fill summary results
          setResultText(resQ1, 0, fmt(q1));
          setResultText(resMedian, 0, fmt(q2));
          setResultText(resQ3, 0, fmt(q3));
          setResultText(resIqr, 0, fmt(iqr));

          if (resFences) {
            setResultText(resFences, 0, fmt(lowerFence));
            setResultText(resFences, 1, fmt(upperFence));
          }
          if (resMinMax) {
            setResultText(resMinMax, 0, fmt(minVal));
            setResultText(resMinMax, 1, fmt(maxVal));
          }
          if (resCount) {
            setResultText(resCount, 0, n.toString());
            setResultText(resCount, 1, distinctCount.toString());
          }
          if (resOutliers) {
            const lowLabel = lowOutliers.length
              ? lowOutliers.map(fmt).join(', ')
              : 'none';
            const highLabel = highOutliers.length
              ? highOutliers.map(fmt).join(', ')
              : 'none';
            setResultText(resOutliers, 0, lowLabel);
            setResultText(resOutliers, 1, highLabel);
          }

          if (currentMethodLabel) {
            currentMethodLabel.textContent =
              'Method: ' + (method === 'inclusive' ? 'Inclusive (Excel-like)' : 'Tukey (median-of-halves)');
          }

          // Build table with positions and notes
          if (sortedTableBody) {
            sortedTableBody.innerHTML = '';
            const d = getDecimals();

            // Build mark sets for quartiles (using values from sortedAsc)
            function approxEqual(a, b) {
              const tol = Math.pow(10, -d) / 2;
              return Math.abs(a - b) <= tol;
            }

            const marks = {
              Q1: sortedAsc.filter(v => approxEqual(v, q1)),
              Q2: sortedAsc.filter(v => approxEqual(v, q2)),
              Q3: sortedAsc.filter(v => approxEqual(v, q3))
            };

            sorted.forEach((value, index) => {
              const tr = document.createElement('tr');
              tr.className = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';

              const posCell = document.createElement('td');
              posCell.className = 'px-3 py-1.5 border-b text-gray-700';
              posCell.textContent = (index + 1).toString();

              const valCell = document.createElement('td');
              valCell.className = 'px-3 py-1.5 border-b text-gray-700';
              valCell.textContent = fmt(value);

              const noteCell = document.createElement('td');
              noteCell.className = 'px-3 py-1.5 border-b text-gray-600 text-xs';

              const tags = [];
              if (approxEqual(value, minVal)) tags.push('min');
              if (approxEqual(value, maxVal)) tags.push('max');
              if (lowOutliers.includes(value)) tags.push('outlier (low)');
              if (highOutliers.includes(value)) tags.push('outlier (high)');
              if (marks.Q1.some(v => approxEqual(v, value))) tags.push('Q1');
              if (marks.Q2.some(v => approxEqual(v, value))) tags.push('median');
              if (marks.Q3.some(v => approxEqual(v, value))) tags.push('Q3');

              noteCell.textContent = tags.join(' · ');

              tr.appendChild(posCell);
              tr.appendChild(valCell);
              tr.appendChild(noteCell);
              sortedTableBody.appendChild(tr);
            });
          }
        }

        if (btnCalc) btnCalc.addEventListener('click', computeQuartiles);

        if (btnClear) {
          btnClear.addEventListener('click', function () {
            if (dataInput) dataInput.value = '';
            clearAllResults();
          });
        }

        // Sample data buttons
        sampleButtons.forEach(function (btn) {
          btn.addEventListener('click', function () {
            const type = btn.getAttribute('data-sample');
            if (!dataInput || !type) return;
            let sample = '';
            if (type === 'symmetric') {
              sample = '7, 8, 9, 10, 11, 12, 13, 14, 15';
            } else if (type === 'skewed') {
              sample = '3, 4, 4, 5, 6, 7, 12, 15, 18, 24';
            } else if (type === 'outliers') {
              sample = '10, 11, 11, 12, 13, 13, 14, 15, 15, 120, 135';
            }
            dataInput.value = sample;
            clearAllResults();
          });
        });
      });
    </script>


</body></html>
, ',
        svg: { fontCache: 'global' }
      };
    </script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
    <script>
      // Mobile menu toggle
      document.getElementById('mobile-menu-toggle')?.addEventListener('click', function () {
        const menu = document.getElementById('mobile-menu');
        if (!menu) return;
        const isHidden = menu.classList.contains('hidden');
        menu.classList.toggle('hidden', !isHidden);
        this.setAttribute('aria-expanded', String(isHidden));
      });

      document.addEventListener('DOMContentLoaded', function () {
        const dataInput = document.getElementById('data-input');
        const decimalsSelect = document.getElementById('decimals');
        const sortOrderRadios = document.querySelectorAll('input[name="sort-order"]');
        const methodRadios = document.querySelectorAll('input[name="quartile-method"]');
        const btnCalc = document.getElementById('btn-calc-quartiles');
        const btnClear = document.getElementById('btn-clear-quartiles');
        const errorEl = document.getElementById('quartile-error');

        const resQ1 = document.getElementById('res-q1');
        const resMedian = document.getElementById('res-median');
        const resQ3 = document.getElementById('res-q3');
        const resIqr = document.getElementById('res-iqr');
        const resFences = document.getElementById('res-fences');
        const resMinMax = document.getElementById('res-minmax');
        const resCount = document.getElementById('res-count');
        const resOutliers = document.getElementById('res-outliers');
        const sortedTableBody = document.getElementById('sorted-table-body');
        const currentMethodLabel = document.getElementById('current-method-label');

        const sampleButtons = document.querySelectorAll('[data-sample]');

        function setResultText(container, index, text) {
          if (!container) return;
          const spans = container.querySelectorAll('.result-value');
          if (spans[index]) spans[index].textContent = text;
        }

        function clearAllResults() {
          [resQ1, resMedian, resQ3, resIqr, resFences, resMinMax, resCount, resOutliers].forEach(function (box) {
            if (!box) return;
            box.querySelectorAll('.result-value').forEach(function (span) {
              span.textContent = '—';
            });
          });
          if (sortedTableBody) sortedTableBody.innerHTML = '';
          if (currentMethodLabel) currentMethodLabel.textContent = 'Method: —';
          if (errorEl) errorEl.textContent = '';
        }

        function getDecimals() {
          if (!decimalsSelect) return 2;
          const d = Number(decimalsSelect.value);
          if (!Number.isInteger(d) || d < 0 || d > 10) return 2;
          return d;
        }

        function fmt(value) {
          if (!isFinite(value)) return '—';
          const d = getDecimals();
          return Number(value.toFixed(d)).toString();
        }

        function parseData() {
          if (!dataInput) return [];
          const raw = dataInput.value;
          if (!raw.trim()) return [];
          const tokens = raw.split(/[\s,;]+/);
          const nums = [];
          for (let t of tokens) {
            const s = t.trim();
            if (!s) continue;
            const v = Number(s);
            if (!isFinite(v)) {
              return { error: 'All non-empty entries must be numeric. Problem with: "' + s + '".' };
            }
            nums.push(v);
            if (nums.length > 5000) {
              return { error: 'Maximum allowed size is 5,000 values for performance reasons.' };
            }
          }
          if (nums.length === 0) {
            return { error: 'Please enter at least one numeric value.' };
          }
          return { data: nums };
        }

        function medianOfSortedSlice(arr, start, end) {
          // arr sorted ascending, slice [start, end)
          const len = end - start;
          if (len <= 0) return NaN;
          const mid = Math.floor(len / 2);
          if (len % 2 === 1) {
            return arr[start + mid];
          } else {
            return (arr[start + mid - 1] + arr[start + mid]) / 2;
          }
        }

        function quartilesTukey(sorted) {
          const n = sorted.length;
          if (n === 0) return { q1: NaN, q2: NaN, q3: NaN };
          const q2 = medianOfSortedSlice(sorted, 0, n);
          let lowerEnd, upperStart;
          if (n % 2 === 1) {
            const mid = Math.floor(n / 2);
            lowerEnd = mid;        // 0 .. mid-1
            upperStart = mid + 1;  // mid+1 .. n-1
          } else {
            const half = n / 2;
            lowerEnd = half;       // 0 .. half-1
            upperStart = half;     // half .. n-1
          }
          const q1 = medianOfSortedSlice(sorted, 0, lowerEnd);
          const q3 = medianOfSortedSlice(sorted, upperStart, n);
          return { q1, q2, q3 };
        }

        function quartilesInclusive(sorted) {
          const n = sorted.length;
          if (n === 0) return { q1: NaN, q2: NaN, q3: NaN };

          function quantile(p) {
            if (n === 1) return sorted[0];
            const pos = (n - 1) * p;
            const lower = Math.floor(pos);
            const upper = Math.ceil(pos);
            const frac = pos - lower;
            if (upper >= n) return sorted[n - 1];
            return sorted[lower] + frac * (sorted[upper] - sorted[lower]);
          }

          return {
            q1: quantile(0.25),
            q2: quantile(0.5),
            q3: quantile(0.75)
          };
        }

        function computeQuartiles() {
          clearAllResults();

          const parsed = parseData();
          if (parsed.error) {
            if (errorEl) errorEl.textContent = parsed.error;
            return;
          }
          const values = parsed.data;
          const n = values.length;

          const method = (Array.from(methodRadios).find(r => r.checked)?.value) || 'tukey';
          const sortOrder = (Array.from(sortOrderRadios).find(r => r.checked)?.value) || 'asc';

          const sortedAsc = values.slice().sort((a, b) => a - b);
          const sorted = sortOrder === 'desc' ? sortedAsc.slice().reverse() : sortedAsc.slice();

          let q;
          if (method === 'inclusive') {
            q = quartilesInclusive(sortedAsc);
          } else {
            q = quartilesTukey(sortedAsc);
          }
          const q1 = q.q1;
          const q2 = q.q2;
          const q3 = q.q3;

          // IQR, fences, min, max, counts
          const iqr = q3 - q1;
          const lowerFence = q1 - 1.5 * iqr;
          const upperFence = q3 + 1.5 * iqr;

          const minVal = sortedAsc[0];
          const maxVal = sortedAsc[sortedAsc.length - 1];

          const distinctCount = new Set(sortedAsc.map(v => v.toString())).size;

          // Outliers based on sortedAsc
          const lowOutliers = sortedAsc.filter(v => v < lowerFence);
          const highOutliers = sortedAsc.filter(v => v > upperFence);

          // Fill summary results
          setResultText(resQ1, 0, fmt(q1));
          setResultText(resMedian, 0, fmt(q2));
          setResultText(resQ3, 0, fmt(q3));
          setResultText(resIqr, 0, fmt(iqr));

          if (resFences) {
            setResultText(resFences, 0, fmt(lowerFence));
            setResultText(resFences, 1, fmt(upperFence));
          }
          if (resMinMax) {
            setResultText(resMinMax, 0, fmt(minVal));
            setResultText(resMinMax, 1, fmt(maxVal));
          }
          if (resCount) {
            setResultText(resCount, 0, n.toString());
            setResultText(resCount, 1, distinctCount.toString());
          }
          if (resOutliers) {
            const lowLabel = lowOutliers.length
              ? lowOutliers.map(fmt).join(', ')
              : 'none';
            const highLabel = highOutliers.length
              ? highOutliers.map(fmt).join(', ')
              : 'none';
            setResultText(resOutliers, 0, lowLabel);
            setResultText(resOutliers, 1, highLabel);
          }

          if (currentMethodLabel) {
            currentMethodLabel.textContent =
              'Method: ' + (method === 'inclusive' ? 'Inclusive (Excel-like)' : 'Tukey (median-of-halves)');
          }

          // Build table with positions and notes
          if (sortedTableBody) {
            sortedTableBody.innerHTML = '';
            const d = getDecimals();

            // Build mark sets for quartiles (using values from sortedAsc)
            function approxEqual(a, b) {
              const tol = Math.pow(10, -d) / 2;
              return Math.abs(a - b) <= tol;
            }

            const marks = {
              Q1: sortedAsc.filter(v => approxEqual(v, q1)),
              Q2: sortedAsc.filter(v => approxEqual(v, q2)),
              Q3: sortedAsc.filter(v => approxEqual(v, q3))
            };

            sorted.forEach((value, index) => {
              const tr = document.createElement('tr');
              tr.className = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';

              const posCell = document.createElement('td');
              posCell.className = 'px-3 py-1.5 border-b text-gray-700';
              posCell.textContent = (index + 1).toString();

              const valCell = document.createElement('td');
              valCell.className = 'px-3 py-1.5 border-b text-gray-700';
              valCell.textContent = fmt(value);

              const noteCell = document.createElement('td');
              noteCell.className = 'px-3 py-1.5 border-b text-gray-600 text-xs';

              const tags = [];
              if (approxEqual(value, minVal)) tags.push('min');
              if (approxEqual(value, maxVal)) tags.push('max');
              if (lowOutliers.includes(value)) tags.push('outlier (low)');
              if (highOutliers.includes(value)) tags.push('outlier (high)');
              if (marks.Q1.some(v => approxEqual(v, value))) tags.push('Q1');
              if (marks.Q2.some(v => approxEqual(v, value))) tags.push('median');
              if (marks.Q3.some(v => approxEqual(v, value))) tags.push('Q3');

              noteCell.textContent = tags.join(' · ');

              tr.appendChild(posCell);
              tr.appendChild(valCell);
              tr.appendChild(noteCell);
              sortedTableBody.appendChild(tr);
            });
          }
        }

        if (btnCalc) btnCalc.addEventListener('click', computeQuartiles);

        if (btnClear) {
          btnClear.addEventListener('click', function () {
            if (dataInput) dataInput.value = '';
            clearAllResults();
          });
        }

        // Sample data buttons
        sampleButtons.forEach(function (btn) {
          btn.addEventListener('click', function () {
            const type = btn.getAttribute('data-sample');
            if (!dataInput || !type) return;
            let sample = '';
            if (type === 'symmetric') {
              sample = '7, 8, 9, 10, 11, 12, 13, 14, 15';
            } else if (type === 'skewed') {
              sample = '3, 4, 4, 5, 6, 7, 12, 15, 18, 24';
            } else if (type === 'outliers') {
              sample = '10, 11, 11, 12, 13, 13, 14, 15, 15, 120, 135';
            }
            dataInput.value = sample;
            clearAllResults();
          });
        });
      });
    </script>


</body></html>
]], displayMath: [['\\[','\\]']] }, svg: { fontCache: 'global' } };,
        svg: { fontCache: 'global' }
      };
    </script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
    <script>
      // Mobile menu toggle
      document.getElementById('mobile-menu-toggle')?.addEventListener('click', function () {
        const menu = document.getElementById('mobile-menu');
        if (!menu) return;
        const isHidden = menu.classList.contains('hidden');
        menu.classList.toggle('hidden', !isHidden);
        this.setAttribute('aria-expanded', String(isHidden));
      });

      document.addEventListener('DOMContentLoaded', function () {
        const dataInput = document.getElementById('data-input');
        const decimalsSelect = document.getElementById('decimals');
        const sortOrderRadios = document.querySelectorAll('input[name="sort-order"]');
        const methodRadios = document.querySelectorAll('input[name="quartile-method"]');
        const btnCalc = document.getElementById('btn-calc-quartiles');
        const btnClear = document.getElementById('btn-clear-quartiles');
        const errorEl = document.getElementById('quartile-error');

        const resQ1 = document.getElementById('res-q1');
        const resMedian = document.getElementById('res-median');
        const resQ3 = document.getElementById('res-q3');
        const resIqr = document.getElementById('res-iqr');
        const resFences = document.getElementById('res-fences');
        const resMinMax = document.getElementById('res-minmax');
        const resCount = document.getElementById('res-count');
        const resOutliers = document.getElementById('res-outliers');
        const sortedTableBody = document.getElementById('sorted-table-body');
        const currentMethodLabel = document.getElementById('current-method-label');

        const sampleButtons = document.querySelectorAll('[data-sample]');

        function setResultText(container, index, text) {
          if (!container) return;
          const spans = container.querySelectorAll('.result-value');
          if (spans[index]) spans[index].textContent = text;
        }

        function clearAllResults() {
          [resQ1, resMedian, resQ3, resIqr, resFences, resMinMax, resCount, resOutliers].forEach(function (box) {
            if (!box) return;
            box.querySelectorAll('.result-value').forEach(function (span) {
              span.textContent = '—';
            });
          });
          if (sortedTableBody) sortedTableBody.innerHTML = '';
          if (currentMethodLabel) currentMethodLabel.textContent = 'Method: —';
          if (errorEl) errorEl.textContent = '';
        }

        function getDecimals() {
          if (!decimalsSelect) return 2;
          const d = Number(decimalsSelect.value);
          if (!Number.isInteger(d) || d < 0 || d > 10) return 2;
          return d;
        }

        function fmt(value) {
          if (!isFinite(value)) return '—';
          const d = getDecimals();
          return Number(value.toFixed(d)).toString();
        }

        function parseData() {
          if (!dataInput) return [];
          const raw = dataInput.value;
          if (!raw.trim()) return [];
          const tokens = raw.split(/[\s,;]+/);
          const nums = [];
          for (let t of tokens) {
            const s = t.trim();
            if (!s) continue;
            const v = Number(s);
            if (!isFinite(v)) {
              return { error: 'All non-empty entries must be numeric. Problem with: "' + s + '".' };
            }
            nums.push(v);
            if (nums.length > 5000) {
              return { error: 'Maximum allowed size is 5,000 values for performance reasons.' };
            }
          }
          if (nums.length === 0) {
            return { error: 'Please enter at least one numeric value.' };
          }
          return { data: nums };
        }

        function medianOfSortedSlice(arr, start, end) {
          // arr sorted ascending, slice [start, end)
          const len = end - start;
          if (len <= 0) return NaN;
          const mid = Math.floor(len / 2);
          if (len % 2 === 1) {
            return arr[start + mid];
          } else {
            return (arr[start + mid - 1] + arr[start + mid]) / 2;
          }
        }

        function quartilesTukey(sorted) {
          const n = sorted.length;
          if (n === 0) return { q1: NaN, q2: NaN, q3: NaN };
          const q2 = medianOfSortedSlice(sorted, 0, n);
          let lowerEnd, upperStart;
          if (n % 2 === 1) {
            const mid = Math.floor(n / 2);
            lowerEnd = mid;        // 0 .. mid-1
            upperStart = mid + 1;  // mid+1 .. n-1
          } else {
            const half = n / 2;
            lowerEnd = half;       // 0 .. half-1
            upperStart = half;     // half .. n-1
          }
          const q1 = medianOfSortedSlice(sorted, 0, lowerEnd);
          const q3 = medianOfSortedSlice(sorted, upperStart, n);
          return { q1, q2, q3 };
        }

        function quartilesInclusive(sorted) {
          const n = sorted.length;
          if (n === 0) return { q1: NaN, q2: NaN, q3: NaN };

          function quantile(p) {
            if (n === 1) return sorted[0];
            const pos = (n - 1) * p;
            const lower = Math.floor(pos);
            const upper = Math.ceil(pos);
            const frac = pos - lower;
            if (upper >= n) return sorted[n - 1];
            return sorted[lower] + frac * (sorted[upper] - sorted[lower]);
          }

          return {
            q1: quantile(0.25),
            q2: quantile(0.5),
            q3: quantile(0.75)
          };
        }

        function computeQuartiles() {
          clearAllResults();

          const parsed = parseData();
          if (parsed.error) {
            if (errorEl) errorEl.textContent = parsed.error;
            return;
          }
          const values = parsed.data;
          const n = values.length;

          const method = (Array.from(methodRadios).find(r => r.checked)?.value) || 'tukey';
          const sortOrder = (Array.from(sortOrderRadios).find(r => r.checked)?.value) || 'asc';

          const sortedAsc = values.slice().sort((a, b) => a - b);
          const sorted = sortOrder === 'desc' ? sortedAsc.slice().reverse() : sortedAsc.slice();

          let q;
          if (method === 'inclusive') {
            q = quartilesInclusive(sortedAsc);
          } else {
            q = quartilesTukey(sortedAsc);
          }
          const q1 = q.q1;
          const q2 = q.q2;
          const q3 = q.q3;

          // IQR, fences, min, max, counts
          const iqr = q3 - q1;
          const lowerFence = q1 - 1.5 * iqr;
          const upperFence = q3 + 1.5 * iqr;

          const minVal = sortedAsc[0];
          const maxVal = sortedAsc[sortedAsc.length - 1];

          const distinctCount = new Set(sortedAsc.map(v => v.toString())).size;

          // Outliers based on sortedAsc
          const lowOutliers = sortedAsc.filter(v => v < lowerFence);
          const highOutliers = sortedAsc.filter(v => v > upperFence);

          // Fill summary results
          setResultText(resQ1, 0, fmt(q1));
          setResultText(resMedian, 0, fmt(q2));
          setResultText(resQ3, 0, fmt(q3));
          setResultText(resIqr, 0, fmt(iqr));

          if (resFences) {
            setResultText(resFences, 0, fmt(lowerFence));
            setResultText(resFences, 1, fmt(upperFence));
          }
          if (resMinMax) {
            setResultText(resMinMax, 0, fmt(minVal));
            setResultText(resMinMax, 1, fmt(maxVal));
          }
          if (resCount) {
            setResultText(resCount, 0, n.toString());
            setResultText(resCount, 1, distinctCount.toString());
          }
          if (resOutliers) {
            const lowLabel = lowOutliers.length
              ? lowOutliers.map(fmt).join(', ')
              : 'none';
            const highLabel = highOutliers.length
              ? highOutliers.map(fmt).join(', ')
              : 'none';
            setResultText(resOutliers, 0, lowLabel);
            setResultText(resOutliers, 1, highLabel);
          }

          if (currentMethodLabel) {
            currentMethodLabel.textContent =
              'Method: ' + (method === 'inclusive' ? 'Inclusive (Excel-like)' : 'Tukey (median-of-halves)');
          }

          // Build table with positions and notes
          if (sortedTableBody) {
            sortedTableBody.innerHTML = '';
            const d = getDecimals();

            // Build mark sets for quartiles (using values from sortedAsc)
            function approxEqual(a, b) {
              const tol = Math.pow(10, -d) / 2;
              return Math.abs(a - b) <= tol;
            }

            const marks = {
              Q1: sortedAsc.filter(v => approxEqual(v, q1)),
              Q2: sortedAsc.filter(v => approxEqual(v, q2)),
              Q3: sortedAsc.filter(v => approxEqual(v, q3))
            };

            sorted.forEach((value, index) => {
              const tr = document.createElement('tr');
              tr.className = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';

              const posCell = document.createElement('td');
              posCell.className = 'px-3 py-1.5 border-b text-gray-700';
              posCell.textContent = (index + 1).toString();

              const valCell = document.createElement('td');
              valCell.className = 'px-3 py-1.5 border-b text-gray-700';
              valCell.textContent = fmt(value);

              const noteCell = document.createElement('td');
              noteCell.className = 'px-3 py-1.5 border-b text-gray-600 text-xs';

              const tags = [];
              if (approxEqual(value, minVal)) tags.push('min');
              if (approxEqual(value, maxVal)) tags.push('max');
              if (lowOutliers.includes(value)) tags.push('outlier (low)');
              if (highOutliers.includes(value)) tags.push('outlier (high)');
              if (marks.Q1.some(v => approxEqual(v, value))) tags.push('Q1');
              if (marks.Q2.some(v => approxEqual(v, value))) tags.push('median');
              if (marks.Q3.some(v => approxEqual(v, value))) tags.push('Q3');

              noteCell.textContent = tags.join(' · ');

              tr.appendChild(posCell);
              tr.appendChild(valCell);
              tr.appendChild(noteCell);
              sortedTableBody.appendChild(tr);
            });
          }
        }

        if (btnCalc) btnCalc.addEventListener('click', computeQuartiles);

        if (btnClear) {
          btnClear.addEventListener('click', function () {
            if (dataInput) dataInput.value = '';
            clearAllResults();
          });
        }

        // Sample data buttons
        sampleButtons.forEach(function (btn) {
          btn.addEventListener('click', function () {
            const type = btn.getAttribute('data-sample');
            if (!dataInput || !type) return;
            let sample = '';
            if (type === 'symmetric') {
              sample = '7, 8, 9, 10, 11, 12, 13, 14, 15';
            } else if (type === 'skewed') {
              sample = '3, 4, 4, 5, 6, 7, 12, 15, 18, 24';
            } else if (type === 'outliers') {
              sample = '10, 11, 11, 12, 13, 13, 14, 15, 15, 120, 135';
            }
            dataInput.value = sample;
            clearAllResults();
          });
        });
      });
    </script>


</body></html>

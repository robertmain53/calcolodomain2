<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/401k">





 
<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg">
<link rel="shortcut icon" href="https://calcdomain.com/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png">
<link rel="manifest" href="https://calcdomain.com/site.webmanifest">
<meta charset="utf-8">
<title>401(k) Calculator | High-Accuracy Retirement Growth &amp; Employer Match</title>
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="Professional 401(k) calculator to project retirement savings with employer match, IRS contribution limits, salary growth, fees, and inflation. WCAG 2.1 AA accessible and mobile-first." name="description">
<meta content="Ugo Candido" name="author">

<meta content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" name="robots">
<meta content="#0b4b82" name="theme-color">
<style>
    /* Critical, mobile-first CSS (no external dependencies) */
    :root {
      --primary:#0b4b82;
      --primary-600:#09406f;
      --secondary:#0a2b4a;
      --bg:#f7f9fb;
      --surface:#ffffff;
      --text:#1d232a;
      --muted:#5b6876;
      --border:#dde3ea;
      --success:#137a3f;
      --danger:#c62828;
      --warning:#b36b00;
      --min-touch:48px;

      --container:1200px;
      --radius:12px;
      --radius-sm:8px;
      --sp-1:.5rem;
      --sp-2:1rem;
      --sp-3:1.5rem;
      --sp-4:2rem;
    }

    @media (prefers-contrast: more) {
      :root { --border:#000; --text:#000; --primary:#002b5c; }
    }
    @media (prefers-reduced-motion: reduce) {
      * { animation-duration: .01ms !important; animation-iteration-count: 1 !important; transition-duration: .01ms !important; scroll-behavior: auto !important; }
    }

    *,*::before,*::after{box-sizing:border-box}
    html{font-size:16px;scroll-behavior:smooth}
    body{
      margin:0;
      font-family: 'Inter', -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:#f8fafc;
      line-height:1.6;
    }

    /* Accessibility helpers */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .skip-link{
      position:absolute;top:-40px;left:8px;background:var(--primary);color:#fff;
      padding:.5rem .75rem;border-radius:6px;z-index:1000;text-decoration:none;font-weight:700
    }
    .skip-link:focus{top:8px;outline:3px solid #fff;outline-offset:2px}

    .btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;min-height:var(--min-touch);min-width:var(--min-touch);padding:.65rem 1rem;border-radius:10px;border:1px solid transparent;background:var(--primary);color:#fff;font-weight:700;cursor:pointer}
    .btn:hover{background:var(--primary-600)}
    .btn:focus{outline:3px solid var(--primary);outline-offset:2px}
    .breadcrumbs{font-size:.9rem;color:var(--muted);margin:.25rem 0 1rem}
    .breadcrumbs a{color:var(--primary);text-decoration:none}
    .breadcrumbs a:focus{outline:3px solid var(--primary);outline-offset:2px;border-radius:4px}

    h1{font-size:clamp(1.6rem,3.8vw,2.4rem);line-height:1.2;color:var(--secondary);margin:.25rem 0 .75rem}
    p.lead{font-size:1.05rem;color:#243140;max-width:72ch}

    /* Layout for calculator and results */
    .calculator-layout{display:grid;grid-template-columns:1fr;gap:1.5rem;margin-top:1rem}
    @media (min-width: 992px){
      .calculator-layout{grid-template-columns: minmax(300px, 420px) 1fr}
    }

    .card{
      background:var(--surface);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:clamp(1rem,2vw,1.25rem);
      box-shadow:0 1px 2px rgba(0,0,0,.04);
    }

    /* Form styles */
    .form-group{margin-bottom:1rem}
    label{display:inline-flex;align-items:center;gap:.5rem;font-weight:700;margin-bottom:.4rem}
    .help-btn{
      margin-left:.25rem;inline-size:var(--min-touch);block-size:var(--min-touch);
      min-width:var(--min-touch);min-height:var(--min-touch);
      display:inline-flex;align-items:center;justify-content:center;border-radius:50%;
      border:1px solid var(--border);background:#f0f4f8;color:#0a2b4a;font-weight:900;cursor:pointer
    }
    .help-btn:focus{outline:3px solid var(--primary);outline-offset:2px}
    .tooltip{display:none;margin:.35rem 0 0;padding:.5rem .75rem;border-radius:8px;background:#eef5ff;border:1px solid #cfe3ff;color:#0a2b4a}
    .tooltip[aria-hidden="false"]{display:block}

    .input-group{position:relative}
    .suffix{position:absolute;top:50%;right:.75rem;transform:translateY(-50%);color:var(--muted);pointer-events:none}
    input[type="number"],input[type="text"],input[type="search"],select{
      width:100%;min-height:var(--min-touch);padding:.7rem .9rem;border:1px solid var(--border);
      border-radius:10px;background:#fff;font-size:1rem
    }
    input[type="number"]:focus,select:focus{outline:3px solid var(--primary);outline-offset:2px}
    input[aria-invalid="true"]{border-color:var(--danger)}
    .error{color:var(--danger);font-size:.92rem;margin-top:.35rem}

    .split{display:grid;grid-template-columns:1fr;gap:.75rem}
    @media (min-width:600px){ .split{grid-template-columns:1fr 1fr} }
    .three{display:grid;grid-template-columns:1fr;gap:.75rem}
    @media (min-width:800px){ .three{grid-template-columns:repeat(3,1fr)} }

    .radio-bar{display:flex;gap:.5rem;border:1px solid var(--border);border-radius:10px;padding:.25rem}
    .radio-bar input[type="radio"]{position:absolute;opacity:0;width:0;height:0}
    .radio-bar label{flex:1;text-align:center;padding:.6rem;border-radius:8px;cursor:pointer;user-select:none;min-height:var(--min-touch);display:flex;align-items:center;justify-content:center}
    .radio-bar input[type="radio"]:checked + label{background:var(--primary);color:#fff}
    .radio-bar input[type="radio"]:focus + label{outline:3px solid var(--primary);outline-offset:2px}

    .actions{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.5rem}
    .btn-secondary{background:#fff;border:1px solid var(--primary);color:var(--primary)}
    .btn-secondary:hover{background:#f0f6ff}
    .checkbox{display:flex;align-items:center;gap:.6rem}
    .checkbox input{min-width:1.15rem;min-height:1.15rem}

    /* Results */
    .results.card{min-height:280px}
    .results h2{margin-top:0;color:var(--secondary)}
    .kpi-grid{display:grid;grid-template-columns:1fr;gap:.75rem;margin-top:.5rem}
    @media (min-width:600px){ .kpi-grid{grid-template-columns:repeat(2,1fr)} }
    @media (min-width:992px){ .kpi-grid{grid-template-columns:repeat(3,1fr)} }
    .kpi{border:1px solid var(--border);border-radius:10px;padding:.9rem;background:#fbfdff}
    .kpi .label{color:var(--muted);font-size:.95rem}
    .kpi .value{font-weight:800;font-size:1.25rem;color:var(--success)}
    .note{font-size:.92rem;color:var(--muted)}

    /* Content blocks */
    .content section{margin-top:1.5rem}
    .content h2{color:var(--secondary);border-bottom:1px solid var(--border);padding-bottom:.4rem;margin-bottom:.5rem}
    .formula-box{background:#f0f4f8;border:1px solid var(--border);border-radius:10px;padding:1rem;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;overflow:auto}
    .glossary{display:grid;grid-template-columns:1fr;gap:.35rem}
    @media (min-width: 720px){.glossary{grid-template-columns:1fr 1fr}}
    .faq h3{margin:.75rem 0 .25rem}
    .author-box{margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border);color:var(--muted);font-size:.95rem}

    footer{background:#0a2b4a;color:#fff;margin-top:2rem}
    .footer-inner{max-width:var(--container);margin:0 auto;padding:1.25rem}
    .footer-inner a{color:#fff}
  </style>
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "401(k) Calculator",
  "description": "Project your 401(k) balance with employer match, IRS limits, salary growth, fees, and inflation adjustments. Accessible, mobile-first, and engineered for accuracy.",
  "url": "https://calcdomain.com/401k",
  "mainEntity": [
    {
      "@type": "HowTo",
      "name": "How the 401(k) Calculator Works: A Step-by-Step Example",
      "description": "We simulate yearly contributions, apply employer match and IRS limits, then compound growth minus fees and optionally deflate by inflation.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Enter profile",
          "text": "Age 35, retirement age 67, current balance $30,000, salary $80,000."
        },
        {
          "@type": "HowToStep",
          "name": "Contributions",
          "text": "Employee 10% of salary; employer matches 50% up to 6% of salary."
        },
        {
          "@type": "HowToStep",
          "name": "Assumptions",
          "text": "Return 7%/yr, fees 0.5%/yr, salary grows 3%/yr, inflation 2.5%/yr with inflation-adjusted results enabled."
        },
        {
          "@type": "HowToStep",
          "name": "IRS limits",
          "text": "Enforce IRS 2024 limits ($23,000 deferral; $7,500 catch-up at 50+; $69,000 annual additions). Index by inflation each year."
        },
        {
          "@type": "HowToStep",
          "name": "Review results",
          "text": "Projected balance, employee vs employer contributions, investment gains, and estimated monthly income with a 4% withdrawal rate."
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Does the calculator enforce IRS contribution limits?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes—if enabled, it caps employee deferrals and employer additions using 2024 IRS limits and optionally indexes them by inflation. Catch-up rules start at age 50."
          }
        },
        {
          "@type": "Question",
          "name": "How are employer matches handled?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The employer matches a percentage of your contributions, up to a cap defined as a percent of salary (e.g., 50% match up to 6% of salary)."
          }
        },
        {
          "@type": "Question",
          "name": "Can I enter a fixed dollar contribution instead of a percentage?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. Choose 'Amount' and enter your annual contribution. IRS caps still apply if that option is enabled."
          }
        },
        {
          "@type": "Question",
          "name": "Are results shown in today’s dollars?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Enable 'Adjust results for inflation' and set an inflation rate to see purchasing power in today's dollars."
          }
        },
        {
          "@type": "Question",
          "name": "Is tax treatment (Traditional vs. Roth) modeled?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Investment growth is the same in both. For a quick take-home estimate, you can adjust the withdrawal rate; tax projections vary and are not modeled here."
          }
        },
        {
          "@type": "Question",
          "name": "What withdrawal rate should I use?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The default 4% is a common rule-of-thumb. Adjust to your risk profile, horizon, and tax situation."
          }
        }
      ]
    }
  ],
  "reviewedBy": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "dateModified": "2026-01-19"
}</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="search.js" defer=""></script>
<!-- MathJax for LaTeX formulas -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['\(','\)'], ['$', '$']],
      displayMath: [['$','$'], ['\[','\]']]
    },
    svg: { fontCache: 'global' }
  };
</script>
<script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link rel="preload" href="https://calcdomain.com/assets/js/mobile-menu.js" as="script">
<link rel="preload" href="https://calcdomain.com/assets/js/page-enhancements.js" as="script">


<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Finance",
      "item": "https://calcdomain.com/categories/finance"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Finance Retirement",
      "item": "https://calcdomain.com/subcategories/finance-retirement"
    }
  ]
}
</script>
</head>
<body class="bg-gray-50 text-gray-900">

<a class="skip-link" href="#main">Skip to main content</a>
<header class="bg-white shadow-sm sticky top-0 z-50">
    <nav class="container mx-auto px-4 lg:px-6 py-4">
        <div class="flex justify-between items-center">
            <a href="https://calcdomain.com" class="text-2xl font-bold text-blue-600">CalcDomain</a>

            <div class="w-full max-w-md hidden md:block mx-8">
                <div class="relative">
                    <input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500" autocomplete="off">
                    <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
                </div>
            </div>

            <div class="hidden md:flex items-center space-x-6 text-sm">
                <a href="https://calcdomain.com/search" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
                Categories
            </div>

            <button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>

        <div id="mobile-menu" class="md:hidden mt-4 hidden">
            <div class="space-y-2">
                <a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
                Categories
            </div>
        </div>
    </nav>
</header>
<main id="main" class="container mx-auto px-4 lg:px-6 py-10" role="main">

<div class="flex flex-col lg:flex-row gap-8">
    <section class="w-full lg:w-2/3 space-y-8">
        <nav class="text-sm mb-4 text-gray-600" aria-label="Breadcrumbs"><a href="https://calcdomain.com" class="hover:text-blue-600">Home</a> &raquo; <a href="https://calcdomain.com/categories/finance" class="hover:text-blue-600">Finance</a> &raquo; <a href="https://calcdomain.com/subcategories/finance-retirement" class="hover:text-blue-600">Finance Retirement</a></nav>

        <div class="bg-white p-6 rounded-lg shadow-md">
            <h1 class="text-3xl font-extrabold text-gray-900 mb-2">401(k) Calculator</h1>
            <p class="text-gray-600 text-base md:text-lg leading-relaxed">Estimate your 401(k) growth with employer match, salary increases, fees, and inflation. Built for clarity and accuracy, this calculator helps you plan contributions and visualize your projected balance and retirement income.</p>

            <div class="calculator-layout mt-6" id="calcGrid">
<section aria-labelledby="calc-heading" class="card" id="calculator">
<h2 class="sr-only" id="calc-heading">Interactive 401(k) Calculator</h2>
<div class="form-group split">
<div>
<label for="ageNow">Current age *</label>
<input aria-describedby="ageNowErr" aria-required="true" id="ageNow" inputmode="numeric" max="80" min="14" step="1" type="number" value="30">
<div aria-live="polite" class="error" id="ageNowErr" role="alert"></div>
</div>
<div>
<label for="ageRetire">Planned retirement age *</label>
<input aria-describedby="ageRetireErr" aria-required="true" id="ageRetire" inputmode="numeric" max="80" min="30" step="1" type="number" value="67">
<div aria-live="polite" class="error" id="ageRetireErr" role="alert"></div>
</div>
</div>
<div class="form-group split">
<div>
<label for="currentBalance">Current 401(k) balance *</label>
<div class="input-group">
<input aria-describedby="currentBalanceErr currentBalanceTip" aria-required="true" id="currentBalance" inputmode="decimal" min="0" step="100" type="number" value="30000">
<span aria-hidden="true" class="suffix">$</span>
</div>
<div aria-live="polite" class="error" id="currentBalanceErr" role="alert"></div>
<div aria-hidden="true" class="tooltip" id="currentBalanceTip">Include all traditional and Roth 401(k) balances you plan to keep invested until retirement.</div>
</div>
<div>
<label for="salary">Annual salary *</label>
<div class="input-group">
<input aria-describedby="salaryErr" aria-required="true" id="salary" inputmode="decimal" min="0" step="1000" type="number" value="80000">
<span aria-hidden="true" class="suffix">$</span>
</div>
<div aria-live="polite" class="error" id="salaryErr" role="alert"></div>
</div>
</div>
<div class="form-group">
<fieldset>
<legend class="sr-only">Contribution input type</legend>
<div aria-label="Contribution input type" class="radio-bar" role="radiogroup">
<input checked="" id="contribPct" name="contribType" type="radio" value="percent">
<label for="contribPct">Percent</label>
<input id="contribAmt" name="contribType" type="radio" value="amount">
<label for="contribAmt">Amount</label>
</div>
</fieldset>
</div>
<div class="form-group split" id="employeeContribRow">
<div>
<label for="employeeRate">Employee contribution rate *</label>
<div class="input-group">
<input aria-describedby="employeeRateErr employeeRateTip" aria-required="true" id="employeeRate" inputmode="decimal" max="100" min="0" step=".1" type="number" value="10">
<span aria-hidden="true" class="suffix">%</span>
</div>
<div class="actions" style="margin:.25rem 0 0">
<button aria-controls="employeeRateTip" aria-expanded="false" aria-label="What is employee contribution rate?" class="help-btn" id="employeeRateHelp" type="button">?</button>
</div>
<div aria-live="polite" class="error" id="employeeRateErr" role="alert"></div>
<div aria-hidden="true" class="tooltip" id="employeeRateTip">Percentage of your salary you contribute each year. Example: 10% of $80,000 = $8,000.</div>
</div>
<div id="employeeAmtWrap" style="display:none">
<label for="employeeAmount">Employee contribution per year *</label>
<div class="input-group">
<input aria-describedby="employeeAmountErr" aria-required="true" id="employeeAmount" inputmode="decimal" min="0" step="100" type="number" value="8000">
<span aria-hidden="true" class="suffix">$</span>
</div>
<div aria-live="polite" class="error" id="employeeAmountErr" role="alert"></div>
</div>
<div>
<label for="salaryGrowth">Annual salary growth</label>
<div class="input-group">
<input aria-describedby="salaryGrowthErr salaryGrowthTip" id="salaryGrowth" inputmode="decimal" max="20" min="-5" step=".1" type="number" value="3">
<span aria-hidden="true" class="suffix">%</span>
</div>
<div class="actions" style="margin:.25rem 0 0">
<button aria-controls="salaryGrowthTip" aria-expanded="false" aria-label="Explain salary growth" class="help-btn" id="salaryGrowthHelp" type="button">?</button>
</div>
<div aria-live="polite" class="error" id="salaryGrowthErr" role="alert"></div>
<div aria-hidden="true" class="tooltip" id="salaryGrowthTip">Expected annual increase in your salary (promotions, cost-of-living, etc.).</div>
</div>
</div>
<div class="form-group three">
<div>
<label for="matchRate">Employer match rate</label>
<div class="input-group">
<input aria-describedby="matchRateTip matchRateErr" id="matchRate" inputmode="decimal" max="200" min="0" step=".1" type="number" value="50">
<span aria-hidden="true" class="suffix">%</span>
</div>
<div class="actions" style="margin:.25rem 0 0">
<button aria-controls="matchRateTip" aria-expanded="false" aria-label="Explain employer match rate" class="help-btn" id="matchRateHelp" type="button">?</button>
</div>
<div aria-live="polite" class="error" id="matchRateErr" role="alert"></div>
<div aria-hidden="true" class="tooltip" id="matchRateTip">Percent your employer contributes relative to your contribution. Example: 50% match means they add $0.50 per $1 you contribute.</div>
</div>
<div>
<label for="matchCap">Match cap (of salary)</label>
<div class="input-group">
<input aria-describedby="matchCapErr matchCapTip" id="matchCap" inputmode="decimal" max="50" min="0" step=".1" type="number" value="6">
<span aria-hidden="true" class="suffix">%</span>
</div>
<div class="actions" style="margin:.25rem 0 0">
<button aria-controls="matchCapTip" aria-expanded="false" aria-label="Explain match cap" class="help-btn" id="matchCapHelp" type="button">?</button>
</div>
<div aria-live="polite" class="error" id="matchCapErr" role="alert"></div>
<div aria-hidden="true" class="tooltip" id="matchCapTip">Maximum portion of salary considered for the match. Example: 6% cap with 50% match yields up to 3% of salary from employer if you contribute at least 6%.</div>
</div>
<div>
<label for="fee">Annual fees</label>
<div class="input-group">
<input aria-describedby="feeErr feeTip" id="fee" inputmode="decimal" max="5" min="0" step=".01" type="number" value="0.5">
<span aria-hidden="true" class="suffix">%</span>
</div>
<div class="actions" style="margin:.25rem 0 0">
<button aria-controls="feeTip" aria-expanded="false" aria-label="Explain annual fees" class="help-btn" id="feeHelp" type="button">?</button>
</div>
<div aria-live="polite" class="error" id="feeErr" role="alert"></div>
<div aria-hidden="true" class="tooltip" id="feeTip">Estimated total annual plan and fund fees. These reduce your net return.</div>
</div>
</div>
<div class="form-group split">
<div>
<label for="returnRate">Expected annual return *</label>
<div class="input-group">
<input aria-describedby="returnRateErr returnRateTip" aria-required="true" id="returnRate" inputmode="decimal" max="50" min="-50" step=".1" type="number" value="7">
<span aria-hidden="true" class="suffix">%</span>
</div>
<div class="actions" style="margin:.25rem 0 0">
<button aria-controls="returnRateTip" aria-expanded="false" aria-label="Explain return rate" class="help-btn" id="returnRateHelp" type="button">?</button>
</div>
<div aria-live="polite" class="error" id="returnRateErr" role="alert"></div>
<div aria-hidden="true" class="tooltip" id="returnRateTip">Average annual return before fees. Your net return equals return − fees.</div>
</div>
<div>
<label for="inflation">Inflation (for real-dollar results)</label>
<div class="input-group">
<input aria-describedby="inflationTip" id="inflation" inputmode="decimal" max="10" min="0" step=".1" type="number" value="2.5">
<span aria-hidden="true" class="suffix">%</span>
</div>
<div aria-hidden="true" class="tooltip" id="inflationTip">Used to express results in today's dollars when enabled below.</div>
</div>
</div>
<div class="form-group split">
<div class="checkbox">
<input aria-describedby="showRealTip" checked="" id="showReal" type="checkbox">
<label for="showReal">Adjust results for inflation</label>
</div>
<div aria-hidden="true" class="tooltip" id="showRealTip">If checked, we deflate the future value by the inflation rate across the investing period.</div>
<div class="checkbox">
<input aria-describedby="irsTip" checked="" id="enforceIRS" type="checkbox">
<label for="enforceIRS">Enforce IRS contribution limits</label>
</div>
<div aria-hidden="true" class="tooltip" id="irsTip">Caps elective deferrals and employer additions using current IRS rules and optional inflation indexing.</div>
</div>
<div class="form-group three" id="irsRows">
<div>
<label for="deferralLimit">Elective deferral limit (2024)*</label>
<div class="input-group">
<input aria-describedby="deferralLimitErr deferralTip" id="deferralLimit" inputmode="decimal" min="0" step="500" type="number" value="23000">
<span aria-hidden="true" class="suffix">$</span>
</div>
<div aria-live="polite" class="error" id="deferralLimitErr" role="alert"></div>
<div aria-hidden="true" class="tooltip" id="deferralTip">Max employee contribution in 2024 (Traditional + Roth). Source: IRS.</div>
</div>
<div>
<label for="catchupLimit">Catch-up (50+) (2024)</label>
<div class="input-group">
<input aria-describedby="catchupTip" id="catchupLimit" inputmode="decimal" min="0" step="500" type="number" value="7500">
<span aria-hidden="true" class="suffix">$</span>
</div>
<div aria-hidden="true" class="tooltip" id="catchupTip">Additional amount allowed beginning the year you turn 50.</div>
</div>
<div>
<label for="annualAddLimit">Annual additions limit (2024)</label>
<div class="input-group">
<input aria-describedby="annualAddTip" id="annualAddLimit" inputmode="decimal" min="0" step="1000" type="number" value="69000">
<span aria-hidden="true" class="suffix">$</span>
</div>
<div aria-hidden="true" class="tooltip" id="annualAddTip">Combined employer + employee, excluding catch-up. Caps may vary by plan and compensation limits.</div>
</div>
</div>
<div class="form-group split">
<div class="checkbox">
<input aria-describedby="indexLimitsTip" checked="" id="indexLimits" type="checkbox">
<label for="indexLimits">Index IRS limits annually by inflation</label>
</div>
<div aria-hidden="true" class="tooltip" id="indexLimitsTip">Approximates yearly COLA increases by your inflation input.</div>
<div>
<label for="withdrawalRate">Withdrawal rate at retirement</label>
<div class="input-group">
<input aria-describedby="withdrawalTip" id="withdrawalRate" inputmode="decimal" max="10" min="0" step=".1" type="number" value="4">
<span aria-hidden="true" class="suffix">%</span>
</div>
<div aria-hidden="true" class="tooltip" id="withdrawalTip">Used to estimate starting annual income (e.g., 4% rule).</div>
</div>
</div>
<div class="actions">
<button class="btn btn-primary" id="calcBtn" type="button">Calculate</button>
<button class="btn btn-secondary" id="resetBtn" type="button">Reset</button>
</div>
</section>
<section aria-labelledby="results-heading" aria-live="polite" class="results card" id="results">
<h2 id="results-heading">Results</h2>
<div class="kpi-grid" role="status">
<div aria-labelledby="kpi1l" aria-live="polite" class="kpi">
<div class="label" id="kpi1l">Projected balance (nominal)</div>
<div class="value" id="balanceNominal">$0</div>
</div>
<div aria-labelledby="kpi2l" aria-live="polite" class="kpi">
<div class="label" id="kpi2l">Projected balance (today’s $)</div>
<div class="value" id="balanceReal">$0</div>
</div>
<div aria-labelledby="kpi3l" aria-live="polite" class="kpi">
<div class="label" id="kpi3l">Estimated monthly income</div>
<div class="value" id="monthlyIncome">$0</div>
</div>
<div aria-labelledby="kpi4l" aria-live="polite" class="kpi">
<div class="label" id="kpi4l">Employee contributions (total)</div>
<div class="value" id="employeeTotal">$0</div>
</div>
<div aria-labelledby="kpi5l" aria-live="polite" class="kpi">
<div class="label" id="kpi5l">Employer match (total)</div>
<div class="value" id="employerTotal">$0</div>
</div>
<div aria-labelledby="kpi6l" aria-live="polite" class="kpi">
<div class="label" id="kpi6l">Investment gains</div>
<div class="value" id="gains">$0</div>
</div>
</div>
<p class="note" id="resultNote">Assumes consistent contributions and returns. Results are estimates, not guarantees.</p>
</section>
            </div>
        </div>

        <article aria-label="Authoritative content" class="content bg-white p-6 rounded-lg shadow-md prose prose-slate max-w-none">
<section>
<h2>Data Source and Methodology</h2>
<p>
          Authoritative source for contribution limits: Internal Revenue Service (IRS). See:
          <a href="https://www.irs.gov/newsroom/2024-401k-403b-and-most-457-plan-contribution-limits" rel="noopener" target="_blank">IRS 2024 Retirement Plan Contribution Limits</a>
          and IRS Notice 2023-75. All calculations use standard time-value-of-money formulas and apply IRS caps as configured.
        </p>
<p><strong>All calculations are strictly based on the formulas and data provided by this source.</strong></p>
</section>
<section>
<h2>The Formula Explained</h2>
<div aria-label="Formulas (LaTeX notation)" class="formula-box">
          Yearly salary: S_y = S_0 (1 + g)^y<br>
          Employee contribution (percent mode): C_{emp,y} = \min\left(r \cdot S_y,\ L_{def,y} + L_{catch,y}\right)<br>
          Employer match: C_{er,y} = \min\left(C_{emp,y},\ S_y \cdot c\right) \cdot m<br>
          Annual additions cap: C_{cap,y} = L_{ann,y}; if (C_{er,y} + \min(C_{emp,y}, L_{def,y}) &gt; C_{cap,y}) then reduce C_{er,y} accordingly.<br>
          Balance update (net of fees): B_{y+1} = \left(B_y + C_{emp,y} + C_{er,y}\right) \cdot \left(1 + \frac{R - F}{100}\right)<br>
          Real balance (today’s dollars): B^{real}_Y = \dfrac{B_Y}{(1 + \frac{I}{100})^Y}<br>
          Estimated annual income: I_{ret} = B_Y \cdot \dfrac{w}{100}; monthly = \dfrac{I_{ret}}{12}
        </div>
<p>
          Where S is salary, g is salary growth, r is employee contribution rate, c is match cap as percent of salary, m is employer match rate,
          L_def is elective deferral limit, L_catch is catch-up (age ≥ 50), L_ann is annual additions limit, R is expected return, F is fees, I is inflation, and w is withdrawal rate.
        </p>
</section>
<section>
<h2>Glossary of Variables</h2>
<div class="glossary">
<div><strong>Current age</strong>: Your age today; triggers catch-up at 50.</div>
<div><strong>Retirement age</strong>: Target age; determines number of years invested.</div>
<div><strong>Current balance</strong>: Your existing 401(k) savings.</div>
<div><strong>Annual salary</strong>: Gross pay used to compute percent-based contributions.</div>
<div><strong>Employee contribution</strong>: Amount you add (percent of salary or fixed dollars).</div>
<div><strong>Employer match</strong>: Employer adds a percentage of what you contribute, up to a salary cap.</div>
<div><strong>Expected return</strong>: Average annual growth before fees.</div>
<div><strong>Fees</strong>: Annual plan/fund fees deducted from return.</div>
<div><strong>Salary growth</strong>: Expected increase in salary per year.</div>
<div><strong>Inflation</strong>: Used to express results in today’s dollars.</div>
<div><strong>IRS limits</strong>: Caps on employee deferrals and total additions (with catch-up at 50+).</div>
<div><strong>Withdrawal rate</strong>: Rule-of-thumb for sustainable annual withdrawals in retirement.</div>
</div>
</section>
<section>
<h2>How It Works: A Step-by-Step Example</h2>
<p>Suppose you are 35 and plan to retire at 67. You have $30,000 saved, earn $80,000, contribute 10% of salary, and your employer matches 50% up to 6% of salary. You expect 7% annual returns, pay 0.5% in fees, your salary grows 3% yearly, inflation runs at 2.5%, and you enable IRS 2024 limits indexed by inflation. Using the formulas above:</p>
<ol>
<li>Each year, salary S_y increases by 3%.</li>
<li>You contribute C_emp,y = min(10% × S_y, deferral + catch-up if age ≥ 50).</li>
<li>Your employer contributes C_er,y = min(C_emp,y, 6% × S_y) × 50%.</li>
<li>If employee (up to deferral limit) + employer exceeds the annual additions limit, the tool trims employer match.</li>
<li>Grow the account: B_{y+1} = (B_y + contributions) × (1 + (7 − 0.5)/100) = × 1.065.</li>
<li>At retirement, convert to today’s dollars by dividing by (1 + 0.025)^(years) and estimate income with the 4% rule.</li>
</ol>
<p>The calculator performs these steps year-by-year for a realistic projection and reports totals for employee and employer contributions, and the investment gains component.</p>
</section>
<section class="faq">
<h2>Frequently Asked Questions (FAQ)</h2>
<h3>Do you account for catch-up contributions?</h3>
<p>Yes. Starting in the calendar year you turn 50, the tool adds the catch-up allowance to your elective deferral cap when IRS limits are enforced.</p>
<h3>What if my plan has different match rules?</h3>
<p>Enter the closest equivalent: a match rate (e.g., 100%) and the cap as a percent of salary (e.g., 4%). If your plan is more complex, use conservative settings.</p>
<h3>Are returns the same for Traditional and Roth 401(k)?</h3>
<p>Yes. Growth is tax-deferred or tax-free depending on account type, but market returns are the same. This tool focuses on growth and does not model taxes.</p>
<h3>How accurate are inflation-adjusted results?</h3>
<p>They show purchasing power in today’s dollars using your chosen inflation rate. Actual inflation will differ.</p>
<h3>Can I enter negative returns?</h3>
<p>You can model temporary negative averages, but long-term planning typically uses positive real returns. The tool bounds inputs to reasonable ranges.</p>
<h3>Why is my employer match reduced in some years?</h3>
<p>If total additions would exceed the IRS annual additions limit, the tool trims employer contributions to comply.</p>
<h3>Is this financial advice?</h3>
<p>No. Use this as an educational estimate and consult a fiduciary advisor for personalized guidance.</p>
</section>
<div class="author-box">
<p>
          Strumento sviluppato da <strong>Ugo Candido</strong>,. Contenuti verificati da,.
          <br>Ultima revisione per l'accuratezza in data: <time id="reviewDate"></time>.
        </p>
</div>
        
<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[','\]</div>
  <pre class="auditspine-mono">','</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">Yearly salary: S_y = S_0 (1 + g)^y Employee contribution (percent mode): C_{emp,y} = \min\left(r \cdot S_y,\ L_{def,y} + L_{catch,y}\right) Employer match: C_{er,y} = \min\left(C_{emp,y},\ S_y \cdot c\right) \cdot m Annual additions cap: C_{cap,y} = L_{ann,y}; if (C_{er,y} + \min(C_{emp,y}, L_{def,y}) &gt; C_{cap,y}) then reduce C_{er,y} accordingly. Balance update (net of fees): B_{y+1} = \left(B_y + C_{emp,y} + C_{er,y}\right) \cdot \left(1 + \frac{R - F}{100}\right) Real balance (today’s dollars): B^{real}_Y = \dfrac{B_Y}{(1 + \frac{I}{100})^Y} Estimated annual income: I_{ret} = B_Y \cdot \dfrac{w}{100}; monthly = \dfrac{I_{ret}}{12}</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><span class="auditspine-mono">T</span> = property tax (annual or monthly depending on input) <em>(currency)</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>IRS 2024 Retirement Plan Contribution Limits</strong> — irs.gov · Accessed 2026-01-19<br><a href="https://www.irs.gov/newsroom/2024-401k-403b-and-most-457-plan-contribution-limits" target="_blank" rel="nofollow noopener">https://www.irs.gov/newsroom/2024-401k-403b-and-most-457-plan-contribution-limits</a></li>
<li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Finance</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/finance" target="_blank" rel="nofollow noopener">https://calcdomain.com/finance</a></li>
<li><strong>Retirement &amp; Pensions</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/finance-retirement" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/finance-retirement</a></li>
<li><strong>Retirement Planner</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/retirement" target="_blank" rel="nofollow noopener">https://calcdomain.com/retirement</a></li>
<li><strong>Pension Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/pension" target="_blank" rel="nofollow noopener">https://calcdomain.com/pension</a></li>
<li><strong>Pension Payout Estimator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/pension-payout" target="_blank" rel="nofollow noopener">https://calcdomain.com/pension-payout</a></li>
<li><strong>RMD Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/rmd" target="_blank" rel="nofollow noopener">https://calcdomain.com/rmd</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
    </section>
    <aside class="w-full lg:w-1/3 space-y-6">
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">Related Calculators</h2>
            <ul class="space-y-2 text-sm text-blue-600">
                <li><a href="https://calcdomain.com/retirement" class="hover:underline">Retirement Planner</a></li>
                <li><a href="https://calcdomain.com/pension" class="hover:underline">Pension Calculator</a></li>
                <li><a href="https://calcdomain.com/pension-payout" class="hover:underline">Pension Payout Estimator</a></li>
                <li><a href="https://calcdomain.com/rmd" class="hover:underline">RMD Calculator</a></li>
                <li><a href="https://calcdomain.com/social-security" class="hover:underline">Social Security Benefits Estimator</a></li>
            </ul>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">Quick Tips</h2>
            <ul class="list-disc pl-5 space-y-2 text-sm text-gray-700">
                <li>Enable IRS limits to cap contributions automatically.</li>
                <li>Use salary growth to reflect raises or inflation adjustments.</li>
                <li>Toggle inflation adjustment to view results in today’s dollars.</li>
            </ul>
        </div>
    </aside>
</div>

<footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>




















</main>
<!-- Standard Footer --> 
<script defer="">
    (function(){
      'use strict';

      // Utilities
      const $ = id => document.getElementById(id);
      const nf = new Intl.NumberFormat(undefined, { style: 'currency', currency: 'USD', maximumFractionDigits: 0 });
      const nf0 = new Intl.NumberFormat(undefined, { maximumFractionDigits: 0 });
      const nf2 = new Intl.NumberFormat(undefined, { style: 'currency', currency: 'USD', minimumFractionDigits: 2, maximumFractionDigits: 2 });

      const inputs = {
        ageNow: $('ageNow'),
        ageRetire: $('ageRetire'),
        currentBalance: $('currentBalance'),
        salary: $('salary'),
        contribPct: $('contribPct'),
        contribAmt: $('contribAmt'),
        employeeRate: $('employeeRate'),
        employeeAmount: $('employeeAmount'),
        salaryGrowth: $('salaryGrowth'),
        matchRate: $('matchRate'),
        matchCap: $('matchCap'),
        fee: $('fee'),
        returnRate: $('returnRate'),
        inflation: $('inflation'),
        showReal: $('showReal'),
        enforceIRS: $('enforceIRS'),
        deferralLimit: $('deferralLimit'),
        catchupLimit: $('catchupLimit'),
        annualAddLimit: $('annualAddLimit'),
        indexLimits: $('indexLimits'),
        withdrawalRate: $('withdrawalRate'),
        calcBtn: $('calcBtn'),
        resetBtn: $('resetBtn')
      };

      const tooltips = [
        ['employeeRateHelp','employeeRateTip'],
        ['salaryGrowthHelp','salaryGrowthTip'],
        ['matchRateHelp','matchRateTip'],
        ['matchCapHelp','matchCapTip'],
        ['feeHelp','feeTip'],
        ['returnRateHelp','returnRateTip']
      ];
      tooltips.forEach(([btnId, tipId]) => {
        const btn = $(btnId), tip = $(tipId);
        if(!btn || !tip) return;
        btn.addEventListener('click', () => {
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!expanded));
          tip.setAttribute('aria-hidden', String(expanded));
        });
      });

      // Contribution type toggle
      const employeeAmtWrap = $('employeeAmtWrap');
      function syncContribMode(){
        const isPercent = inputs.contribPct.checked;
        $('employeeContribRow').children[0].style.display = isPercent ? '' : 'none'; // rate block
        employeeAmtWrap.style.display = isPercent ? 'none' : '';
      }
      $('contribPct').addEventListener('change', syncContribMode);
      $('contribAmt').addEventListener('change', syncContribMode);
      syncContribMode();

      // IRS rows visibility
      function syncIRS(){
        const show = inputs.enforceIRS.checked;
        $('irsRows').style.display = show ? '' : 'none';
        $('indexLimits').parentElement.parentElement.style.display = show ? '' : 'none';
      }
      inputs.enforceIRS.addEventListener('change', syncIRS);
      syncIRS();

      // Validation helpers
      function setError(input, msgId, msg){
        const el = $(msgId);
        input.setAttribute('aria-invalid', msg ? 'true' : 'false');
        el.textContent = msg || '';
      }
      function numVal(i){ const v = parseFloat(i.value); return isFinite(v) ? v : NaN; }

      const rules = {
        ageNow: v => (isNaN(v) || v < 14 || v > 80) ? 'Enter an age between 14 and 80.' : '',
        ageRetire: v => (isNaN(v) || v < 30 || v > 80) ? 'Enter a retirement age between 30 and 80.' : '',
        currentBalance: v => (isNaN(v) || v < 0) ? 'Balance cannot be negative.' : '',
        salary: v => (isNaN(v) || v < 0) ? 'Salary cannot be negative.' : '',
        employeeRate: v => (inputs.contribPct.checked && (isNaN(v) || v < 0 || v > 100)) ? 'Enter a rate from 0% to 100%.' : '',
        employeeAmount: v => (inputs.contribAmt.checked && (isNaN(v) || v < 0)) ? 'Enter a non-negative amount.' : '',
        salaryGrowth: v => (isNaN(v) || v < -5 || v > 20) ? 'Use a value between -5% and 20%.' : '',
        matchRate: v => (isNaN(v) || v < 0 || v > 200) ? 'Enter 0% to 200%.' : '',
        matchCap: v => (isNaN(v) || v < 0 || v > 50) ? 'Enter 0% to 50% of salary.' : '',
        fee: v => (isNaN(v) || v < 0 || v > 5) ? 'Enter 0% to 5%.' : '',
        returnRate: v => (isNaN(v) || v <= -50 || v > 50) ? 'Enter > -50% and ≤ 50%.' : '',
        inflation: v => (isNaN(v) || v < 0 || v > 10) ? 'Enter 0% to 10%.' : '',
        deferralLimit: v => (inputs.enforceIRS.checked && (isNaN(v) || v <= 0)) ? 'Enter a positive deferral limit.' : '',
        catchupLimit: v => (inputs.enforceIRS.checked && (isNaN(v) || v < 0)) ? 'Enter a non-negative catch-up limit.' : '',
        annualAddLimit: v => (inputs.enforceIRS.checked && (isNaN(v) || v <= 0)) ? 'Enter a positive additions limit.' : '',
        withdrawalRate: v => (isNaN(v) || v < 0 || v > 10) ? 'Enter 0% to 10%.' : ''
      };

      const errorIds = {
        ageNow: 'ageNowErr',
        ageRetire: 'ageRetireErr',
        currentBalance: 'currentBalanceErr',
        salary: 'salaryErr',
        employeeRate: 'employeeRateErr',
        employeeAmount: 'employeeAmountErr',
        salaryGrowth: 'salaryGrowthErr',
        matchRate: 'matchRateErr',
        matchCap: 'matchCapErr',
        fee: 'feeErr',
        returnRate: 'returnRateErr',
        inflation: 'inflationErr', // not present, but safe no-op
        deferralLimit: 'deferralLimitErr',
        catchupLimit: 'catchupLimitErr', // not present, handled by tip only
        annualAddLimit: 'annualAddLimitErr',
        withdrawalRate: 'withdrawalRateErr'
      };

      function validateField(key){
        const input = inputs[key];
        if(!input) return true;
        const v = numVal(input);
        const msg = rules[key] ? rules[key](v) : '';
        if(errorIds[key]) setError(input, errorIds[key], msg);
        return !msg;
      }

      // Attach on-blur validation to inputs
      Object.keys(inputs).forEach(k => {
        const el = inputs[k];
        if(!el || ['calcBtn','resetBtn'].includes(k)) return;
        el.addEventListener('blur', () => validateField(k));
      });

      // Results DOM
      const out = {
        balanceNominal: $('balanceNominal'),
        balanceReal: $('balanceReal'),
        monthlyIncome: $('monthlyIncome'),
        employeeTotal: $('employeeTotal'),
        employerTotal: $('employerTotal'),
        gains: $('gains'),
        note: $('resultNote')
      };

      function compute(){
        // Validate critical fields before computing
        const critical = ['ageNow','ageRetire','currentBalance','salary','returnRate','withdrawalRate'];
        let ok = true;
        for(const k of critical){ ok = validateField(k) && ok; }
        if(inputs.contribPct.checked) ok = validateField('employeeRate') && ok; else ok = validateField('employeeAmount') && ok;
        if(!ok) return;

        const ageNow = numVal(inputs.ageNow);
        const ageRet = numVal(inputs.ageRetire);
        const years = Math.max(0, Math.floor(ageRet - ageNow));
        if(years <= 0){
          out.balanceNominal.textContent = '$0';
          out.balanceReal.textContent = '$0';
          out.monthlyIncome.textContent = '$0';
          out.employeeTotal.textContent = '$0';
          out.employerTotal.textContent = '$0';
          out.gains.textContent = '$0';
          out.note.textContent = 'Retirement age must be greater than current age.';
          return;
        }

        const startBal = Math.max(0, numVal(inputs.currentBalance));
        const salary0 = Math.max(0, numVal(inputs.salary));
        const isPercent = inputs.contribPct.checked;
        const empRate = isPercent ? Math.max(0, numVal(inputs.employeeRate)) / 100 : 0;
        const empAmt = !isPercent ? Math.max(0, numVal(inputs.employeeAmount)) : 0;

        const g = isFinite(numVal(inputs.salaryGrowth)) ? numVal(inputs.salaryGrowth)/100 : 0;
        const matchRate = Math.max(0, numVal(inputs.matchRate))/100; // e.g., 50% -> 0.5
        const matchCap = Math.max(0, numVal(inputs.matchCap))/100;   // e.g., 6%  -> 0.06
        const fee = Math.max(0, numVal(inputs.fee))/100;
        const ret = numVal(inputs.returnRate)/100;
        const netR = ret - fee;
        const infl = Math.max(0, numVal(inputs.inflation))/100;
        const real = inputs.showReal.checked;

        const useIRS = inputs.enforceIRS.checked;
        let defLim0 = Math.max(0, numVal(inputs.deferralLimit));
        let catchLim0 = Math.max(0, numVal(inputs.catchupLimit));
        let annAdd0 = Math.max(0, numVal(inputs.annualAddLimit));
        const indexLimits = inputs.indexLimits.checked;

        const withdrawRate = Math.max(0, numVal(inputs.withdrawalRate))/100;

        let bal = startBal;
        let totalEmp = 0;
        let totalEr = 0;

        for(let y=0; y<years; y++){
          const age = ageNow + y;
          const sal = salary0 * Math.pow(1 + g, y);
          let empContribution = isPercent ? sal * empRate : empAmt;

          let defLim = defLim0, catchLim = catchLim0, annAdd = annAdd0;
          if(indexLimits){
            defLim = defLim0 * Math.pow(1 + infl, y);
            catchLim = catchLim0 * Math.pow(1 + infl, y);
            annAdd = annAdd0 * Math.pow(1 + infl, y);
          }

          if(useIRS){
            const allowedEmp = defLim + (age >= 50 ? catchLim : 0);
            if(empContribution > allowedEmp) empContribution = allowedEmp;
          }

          // Employer match: matchRate of employee contribution, but only on employee dollars up to matchCap * salary
          const matchableEmployee = Math.min(empContribution, sal * matchCap);
          let erContribution = matchableEmployee * matchRate;

          // Annual additions test (employee up to deferral limit + employer must not exceed annAdd; catch-up can exceed)
          if(useIRS){
            const empUpToDeferral = Math.min(empContribution, defLim); // exclude catch-up portion from the additions cap
            const maxErAllowed = Math.max(0, annAdd - empUpToDeferral);
            if(erContribution > maxErAllowed) erContribution = maxErAllowed;
          }

          // Update totals and balance with growth
          totalEmp += empContribution;
          totalEr += erContribution;
          bal = (bal + empContribution + erContribution) * (1 + netR);
        }

        const nominal = bal;
        const realBal = real ? bal / Math.pow(1 + infl, years) : bal;
        const monthly = (bal * withdrawRate) / 12;

        const gains = Math.max(0, nominal - (startBal + totalEmp + totalEr));

        out.balanceNominal.textContent = nf.format(nominal);
        out.balanceReal.textContent = nf.format(realBal);
        out.monthlyIncome.textContent = nf2.format(monthly);
        out.employeeTotal.textContent = nf.format(totalEmp);
        out.employerTotal.textContent = nf.format(totalEr);
        out.gains.textContent = nf.format(gains);

        const rPct = ((ret - fee) * 100).toFixed(2).replace(/\.00$/,'');
        out.note.textContent = `Projection over ${years} year${years!==1?'s':''} at net return ${rPct}%${real ? ', inflation-adjusted' : ''}.`;
      }

      // Debounced compute on input/change
      let raf;
      function scheduleCompute(){ cancelAnimationFrame(raf); raf = requestAnimationFrame(compute); }
      Object.keys(inputs).forEach(k => {
        const el = inputs[k];
        if(!el || ['calcBtn','resetBtn'].includes(k)) continue;
        const evt = (el.type === 'checkbox' || el.tagName === 'SELECT' || el.type === 'radio') ? 'change' : 'input';
        el.addEventListener(evt, scheduleCompute);
      });

      inputs.calcBtn.addEventListener('click', compute);
      inputs.resetBtn.addEventListener('click', () => {
        inputs.ageNow.value = 30;
        inputs.ageRetire.value = 67;
        inputs.currentBalance.value = 30000;
        inputs.salary.value = 80000;
        inputs.contribPct.checked = true;
        inputs.contribAmt.checked = false;
        inputs.employeeRate.value = 10;
        inputs.employeeAmount.value = 8000;
        inputs.salaryGrowth.value = 3;
        inputs.matchRate.value = 50;
        inputs.matchCap.value = 6;
        inputs.fee.value = 0.5;
        inputs.returnRate.value = 7;
        inputs.inflation.value = 2.5;
        inputs.showReal.checked = true;
        inputs.enforceIRS.checked = true;
        inputs.deferralLimit.value = 23000;
        inputs.catchupLimit.value = 7500;
        inputs.annualAddLimit.value = 69000;
        inputs.indexLimits.checked = true;
        inputs.withdrawalRate.value = 4;
        document.querySelectorAll('.error').forEach(e => e.textContent = '');
        document.querySelectorAll('input[aria-invalid="true"]').forEach(i => i.setAttribute('aria-invalid','false'));
        syncContribMode();
        syncIRS();
        scheduleCompute();
      });

      // Update footer year and review date
      $('year').textContent = new Date().getFullYear();
      $('reviewDate').textContent = new Date().toLocaleDateString(undefined,{year:'numeric',month:'long',day:'numeric'});

      // Initial compute
      scheduleCompute();
    })();
  </script>
<!-- Non-critical, global styles (inlined for single-file delivery) -->
<style>
/* --- Enhanced CalcDomain CSS with Mobile-First Design & Accessibility --- */
/* Design Tokens and base already covered above; this block augments content layout if needed */
.section-toolbar{display:flex;align-items:baseline;gap:.75rem;flex-wrap:wrap}
.section-toolbar h2{margin:0}
.section-toolbar .view-all{margin-left:auto;font-size:.95rem}
  </style>


</body></html>
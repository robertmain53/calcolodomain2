<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/detention-pond" />
    <title>Detention Pond Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Detention Pond Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Detention Pond Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Detention Pond Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/detention-pond" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Detention Pond Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Detention Pond Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Detention Pond Calculator – Size a Stormwater Detention Basin",
        "description": "Interactive detention pond calculator to estimate required storage volume, surface area and outlet flow using the Rational Method and a simple level-pool routing approach.",
        "url": "https://calcdomain.com/detention-pond",
        "breadcrumb": {
          "@type": "BreadcrumbList",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Home",
              "item": "https://calcdomain.com"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "Engineering",
              "item": "https://calcdomain.com/categories/engineering"
            },
            {
              "@type": "ListItem",
              "position": 3,
              "name": "Detention Pond Calculator"
            }
          ]
        },
        "mainEntity": {
          "@type": "HowTo",
          "name": "How to size a detention pond with this calculator",
          "description": "Step-by-step method to estimate detention pond storage volume and footprint from drainage area, runoff coefficient, rainfall intensity and allowable outflow.",
          "step": [
            {
              "@type": "HowToStep",
              "name": "Enter hydrologic inputs",
              "text": "Enter drainage area, runoff coefficient, design rainfall intensity and storm duration. These define the inflow hydrograph using the Rational Method."
            },
            {
              "@type": "HowToStep",
              "name": "Set allowable outflow and pond geometry",
              "text": "Specify the maximum allowable discharge, normal water level, maximum water depth and side slope. The calculator uses these to relate storage volume to water depth."
            },
            {
              "@type": "HowToStep",
              "name": "Run the routing",
              "text": "Click Calculate. The tool performs a simple level-pool routing, computing inflow, outflow, incremental storage and peak water level over the storm duration."
            },
            {
              "@type": "HowToStep",
              "name": "Review results and iterate",
              "text": "Review requeets your criteria and constraints."
            }
          ]
        }
      }</script>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "What is a detention pond?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "A detention pond (detention basin) is a stormwater facility designed to temporarily store runoff and release it at a controlled rate. It reduces peak flow rates to protect downstream drainage systems and waterways. Unlike a retention pond, a dry detention pond is usually empty between storms."
            }
          },
          {
            "@type": "Question",
            "name": "How does this detention pond calculator work?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "This calculator uses the Rational Method to estimate an inflow hydrograph from drainage area, runoff coefficient, rainfall intensity and storm duration. It then applies a simple level-pool routing with a constant allowable outflow to estimate the required storage volume, peak water depth and pond surface area for a given side slope and maximum depth."
            }
          },
          {
            "@type": "Question",
            "name": "Is this tool sufficient for final design and permitting?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "No. The calculator is intended for preliminary sizing and educational use only. Final detention pond design must follow your local stormwater manual, use the required design storms and hydrologic methods, and be prepared and stamped by a qualified professional engineer where required by law."
            }
          },
          {
            "@type": "Question",
            "name": "What is the difference between detention and retention ponds?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Detention ponds temporarily detain stormwater and then drain dry or nearly dry between storms. Retention ponds (wet ponds) maintain a permanent pool of water and provide both storage and water quality treatment. Many codes distinguish between dry detention basins, wet retention ponds and extended-detention wet ponds."
            }
          },
          {
            "@type": "Question",
            "name": "Which units does the detention pond calculator support?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "The calculator supports both US customary and metric units. You can switch between acres or hectares for drainage area, inches per hour or millimetres per hour for rainfall intensity, cubic feet per second or litres per second for flow, and feet or metres for pond dimensions."
            }
          }
        ]
      }</script>
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Lifestyle & Everyday Calculators", "item": "https://calcdomain.com/categories/lifestyle-everyday"}, {"@type": "ListItem", "position": 3, "name": "Miscellaneous Calculators", "item": "https://calcdomain.com/subcategories/miscellaneous"}, {"@type": "ListItem", "position": 4, "name": "Detention Pond Calculator", "item": "https://calcdomain.com/detention-pond"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-blue-600 hover:underline">Lifestyle &amp; Everyday Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/miscellaneous" class="text-blue-600 hover:underline">Miscellaneous Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Detention Pond Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Detention Pond Calculator
              </h1>
              <p class="text-gray-700">
                Preliminary sizing of a stormwater detention pond (detention
                basin) using the Rational Method and simple level-pool routing.
                Estimate required storage volume, peak water depth and pond
                footprint.
              </p>
              <p class="mt-2 text-xs text-red-600 font-semibold">
                Disclaimer: For preliminary and educational use only. Final
                stormwater design must follow your local regulations and be
                prepared by a qualified professional.
              </p>
            </header>

            <!-- Calculator Card -->
            <section aria-labelledby="detention-pond-calculator" class="mb-8">
              <div
                class="flex flex-wrap items-center justify-between gap-3 mb-4"
              >
                <h2
                  id="detention-pond-calculator"
                  class="text-xl font-semibold"
                >
                  Detention Pond Sizing Tool
                </h2>
                <div class="flex items-center gap-2 text-xs">
                  <span
                    class="px-2 py-1 rounded-full bg-blue-50 text-blue-700 border border-blue-200"
                    >Rational Method</span
                  >
                  <span
                    class="px-2 py-1 rounded-full bg-green-50 text-green-700 border border-green-200"
                    >US &amp; Metric</span
                  >
                </div>
              </div>

              <!-- Unit system toggle -->
              <div class="mb-4">
                <span class="text-sm font-medium mr-3">Units:</span>
                <div
                  class="inline-flex rounded-md shadow-sm border border-gray-200 overflow-hidden"
                  role="group"
                >
                  <button
                    type="button"
                    id="units-us"
                    class="px-3 py-1.5 text-sm font-medium bg-blue-600 text-white focus:outline-none"
                  >
                    US (ft, cfs, acres)
                  </button>
                  <button
                    type="button"
                    id="units-metric"
                    class="px-3 py-1.5 text-sm font-medium bg-white text-gray-700 hover:bg-gray-50 focus:outline-none"
                  >
                    Metric (m, L/s, ha)
                  </button>
                </div>
              </div>

              <div class="grid md:grid-cols-2 gap-6">
                <!-- Hydrology inputs -->
                <div>
                  <h3 class="font-semibold mb-2 text-gray-800">Hydrology</h3>
                  <div class="space-y-3 text-sm">
                    <div>
                      <label for="area" class="block font-medium"
                        >Drainage area</label
                      >
                      <div class="flex items-center gap-2">
                        <input
                          id="area"
                          type="number"
                          step="0.01"
                          class="w-full border border-gray-300 rounded px-2 py-1.5"
                          value="5"
                        />
                        <span id="area-unit" class="text-gray-600 text-xs"
                          >acres</span
                        >
                      </div>
                    </div>
                    <div>
                      <label for="c" class="block font-medium"
                        >Runoff coefficient, C</label
                      >
                      <input
                        id="c"
                        type="number"
                        step="0.01"
                        min="0"
                        max="1"
                        class="w-full border border-gray-300 rounded px-2 py-1.5"
                        value="0.7"
                      />
                      <p class="text-xs text-gray-500 mt-1">
                        Typical: 0.3–0.5 lawns, 0.7–0.9 parking/roofs.
                      </p>
                    </div>
                    <div>
                      <label for="intensity" class="block font-medium"
                        >Rainfall intensity</label
                      >
                      <div class="flex items-center gap-2">
                        <input
                          id="intensity"
                          type="number"
                          step="0.1"
                          class="w-full border border-gray-300 rounded px-2 py-1.5"
                          value="3.0"
                        />
                        <span id="intensity-unit" class="text-gray-600 text-xs"
                          >in/hr</span
                        >
                      </div>
                      <p class="text-xs text-gray-500 mt-1">
                        Use design storm intensity (e.g., 10‑yr, 25‑yr).
                      </p>
                    </div>
                    <div>
                      <label for="duration" class="block font-medium"
                        >Storm duration</label
                      >
                      <div class="flex items-center gap-2">
                        <input
                          id="duration"
                          type="number"
                          step="1"
                          class="w-full border border-gray-300 rounded px-2 py-1.5"
                          value="60"
                        />
                        <span class="text-gray-600 text-xs">minutes</span>
                      </div>
                      <p class="text-xs text-gray-500 mt-1">
                        Often set near time of concentration for Rational
                        Method.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Pond & outlet inputs -->
                <div>
                  <h3 class="font-semibold mb-2 text-gray-800">
                    Pond &amp; Outlet
                  </h3>
                  <div class="space-y-3 text-sm">
                    <div>
                      <label for="qout" class="block font-medium"
                        >Allowable outflow (Q<sub>out</sub>)</label
                      >
                      <div class="flex items-center gap-2">
                        <input
                          id="qout"
                          type="number"
                          step="0.1"
                          class="w-full border border-gray-300 rounded px-2 py-1.5"
                          value="5"
                        />
                        <span id="qout-unit" class="text-gray-600 text-xs"
                          >cfs</span
                        >
                      </div>
                      <p class="text-xs text-gray-500 mt-1">
                        From downstream capacity or code (pre‑development peak,
                        etc.).
                      </p>
                    </div>
                    <div>
                      <label for="max-depth" class="block font-medium"
                        >Maximum water depth</label
                      >
                      <div class="flex items-center gap-2">
                        <input
                          id="max-depth"
                          type="number"
                          step="0.1"
                          class="w-full border border-gray-300 rounded px-2 py-1.5"
                          value="6"
                        />
                        <span id="depth-unit" class="text-gray-600 text-xs"
                          >ft</span
                        >
                      </div>
                    </div>
                    <div>
                      <label for="side-slope" class="block font-medium"
                        >Side slope (H:V)</label
                      >
                      <div class="flex items-center gap-2">
                        <input
                          id="side-slope"
                          type="number"
                          step="0.1"
                          class="w-full border border-gray-300 rounded px-2 py-1.5"
                          value="3"
                        />
                        <span class="text-gray-600 text-xs"
                          >horizontal : 1 vertical</span
                        >
                      </div>
                      <p class="text-xs text-gray-500 mt-1">
                        3:1 or flatter is common for maintenance and safety.
                      </p>
                    </div>
                    <div>
                      <label for="bottom-area" class="block font-medium"
                        >Bottom area (optional)</label
                      >
                      <div class="flex items-center gap-2">
                        <input
                          id="bottom-area"
                          type="number"
                          step="1"
                          class="w-full border border-gray-300 rounded px-2 py-1.5"
                          placeholder="auto"
                        />
                        <span
                          id="bottom-area-unit"
                          class="text-gray-600 text-xs"
                          >ft²</span
                        >
                      </div>
                      <p class="text-xs text-gray-500 mt-1">
                        Leave blank to let the tool estimate minimum bottom area
                        from storage.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Actions -->
              <div class="mt-6 flex flex-wrap items-center gap-3">
                <button
                  id="calculate-btn"
                  type="button"
                  class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
                >
                  Calculate detention pond
                </button>
                <button
                  id="reset-btn"
                  type="button"
                  class="inline-flex items-center px-3 py-2 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded hover:bg-gray-50"
                >
                  Reset
                </button>
                <p id="calc-error" class="text-sm text-red-600 hidden"></p>
              </div>

              <!-- Results -->
              <section
                id="results-section"
                class="mt-6 hidden"
                aria-live="polite"
              >
                <h3 class="font-semibold mb-3 text-gray-800">
                  Results (Preliminary)
                </h3>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                  <div class="bg-blue-50 border border-blue-100 rounded p-3">
                    <h4 class="font-semibold text-blue-800 mb-2">
                      Hydrologic summary
                    </h4>
                    <ul class="space-y-1 text-blue-900">
                      <li>
                        <span class="font-medium"
                          >Peak inflow Q<sub>in,peak</sub>:</span
                        >
                        <span id="res-qin-peak"></span>
                      </li>
                      <li>
                        <span class="font-medium"
                          >Allowable outflow Q<sub>out</sub>:</span
                        >
                        <span id="res-qout"></span>
                      </li>
                      <li>
                        <span class="font-medium"
                          >Required storage volume:</span
                        >
                        <span id="res-storage"></span>
                      </li>
                      <li>
                        <span class="font-medium">Peak water depth:</span>
                        <span id="res-depth"></span>
                      </li>
                    </ul>
                  </div>
                  <div class="bg-green-50 border border-green-100 rounded p-3">
                    <h4 class="font-semibold text-green-800 mb-2">
                      Pond geometry
                    </h4>
                    <ul class="space-y-1 text-green-900">
                      <li>
                        <span class="font-medium">Bottom area:</span>
                        <span id="res-bottom-area"></span>
                      </li>
                      <li>
                        <span class="font-medium">Top water surface area:</span>
                        <span id="res-top-area"></span>
                      </li>
                      <li>
                        <span class="font-medium"
                          >Approx. pond length (square plan):</span
                        >
                        <span id="res-length"></span>
                      </li>
                      <li>
                        <span class="font-medium">Storage utilization:</span>
                        <span id="res-utilization"></span>
                      </li>
                    </ul>
                  </div>
                </div>
                <p
                  id="res-warning"
                  class="mt-3 text-xs text-yellow-700 bg-yellow-50 border border-yellow-100 rounded p-2 hidden"
                ></p>
              </section>
            </section>

            <!-- Explanatory content -->
            <section class="prose text-sm md:text-base">
              <h2>How this detention pond calculator works</h2>
              <p>
                This tool provides a quick, transparent way to estimate
                detention pond storage volume and footprint. It combines the
                <strong>Rational Method</strong> for peak runoff with a simple
                <strong>level‑pool routing</strong>
                to approximate how much water must be stored to limit outflow to
                a target rate.
              </p>

              <h3>1. Inflow hydrograph from the Rational Method</h3>
              <p>
                The Rational Method estimates peak runoff from a small drainage
                area:
              </p>
              <div class="formula-box">
                <p>
                  <strong>US units</strong> (Q in cfs, A in acres, I in in/hr):
                </p>
                <p>\( Q_\text{peak} = 1.008 \, C \, I \, A \)</p>
                <p class="mt-2">
                  <strong>Metric</strong> (Q in L/s, A in ha, I in mm/hr):
                </p>
                <p>\( Q_\text{peak} \approx 2.78 \, C \, I \, A \)</p>
              </div>
              <p>
                Instead of using only a single peak value, the calculator builds
                a simple
                <strong>triangular inflow hydrograph</strong> with:
              </p>
              <ul>
                <li>Base equal to the storm duration.</li>
                <li>Peak equal to the Rational Method peak discharge.</li>
                <li>
                  Linearly increasing inflow up to the peak, then linearly
                  decreasing.
                </li>
              </ul>

              <h3>2. Level‑pool routing with constant outflow</h3>
              <p>
                The pond is modeled as a level pool with a
                <strong>constant allowable outflow</strong> \(Q_\text{out}\).
                The water balance over a small time step \(\Delta t\) is:
              </p>
              <div class="formula-box">
                <p>\( \Delta S = (Q_\text{in} - Q_\text{out}) \, \Delta t \)</p>
                <p>\( S_{i+1} = S_i + \Delta S \)</p>
              </div>
              <p>
                The calculator steps through the storm in 1‑minute increments,
                computing inflow, outflow, incremental storage and the
                <strong>maximum storage volume</strong> required.
              </p>

              <h3>3. Converting storage volume to pond geometry</h3>
              <p>
                For a simple rectangular pond with uniform side slopes, storage
                volume is approximated as:
              </p>
              <div class="formula-box">
                <p>Bottom area: \( A_b \)</p>
                <p>Side slope: \( m : 1 \) (horizontal : vertical)</p>
                <p>Water depth: \( h \)</p>
                <p>Top area: \( A_t = (L + 2mh)(W + 2mh) \)</p>
                <p>
                  Average area: \( A_\text{avg} \approx \dfrac{A_b + A_t}{2} \)
                </p>
                <p>Storage: \( S \approx A_\text{avg} \, h \)</p>
              </div>
              <p>The calculator inverts this relationship to estimate:</p>
              <ul>
                <li>
                  Required <strong>bottom area</strong> if you leave it blank.
                </li>
                <li>
                  Resulting <strong>top water surface area</strong> at peak
                  depth.
                </li>
                <li>
                  Approximate <strong>pond length</strong> assuming a square
                  plan (for order‑of‑magnitude layout).
                </li>
              </ul>

              <h2>Input field guidance</h2>
              <h3>Drainage area</h3>
              <p>
                Total area draining to the pond, including roofs, pavements and
                landscaped areas. The Rational Method is typically used for
                areas up to about 200 acres (80 ha), but local guidance may
                differ.
              </p>

              <h3>Runoff coefficient C</h3>
              <p>Typical values (check your local stormwater manual):</p>
              <ul>
                <li>Wooded / open space: 0.1 – 0.3</li>
                <li>Residential lawns: 0.3 – 0.5</li>
                <li>Suburban residential: 0.4 – 0.6</li>
                <li>Commercial / parking: 0.7 – 0.95</li>
                <li>Roofs: 0.9 – 1.0</li>
              </ul>

              <h3>Rainfall intensity and duration</h3>
              <p>
                Use the design storm specified by your jurisdiction (e.g.,
                10‑year, 25‑year, 100‑year). For the Rational Method, the
                <strong
                  >storm duration is usually taken equal to the time of
                  concentration</strong
                >
                of the drainage area. Many codes provide IDF curves or tables.
              </p>

              <h3>Allowable outflow Q<sub>out</sub></h3>
              <p>This is often set to:</p>
              <ul>
                <li>Pre‑development peak flow for the same storm, or</li>
                <li>Capacity of the downstream pipe/ditch, or</li>
                <li>A regulatory limit from the local stormwater manual.</li>
              </ul>

              <h3>Pond depth and side slopes</h3>
              <p>
                Maximum water depth is measured from the pond bottom to the
                design high water level. Side slopes are expressed as
                horizontal:vertical (e.g., 3:1). Flatter slopes improve safety
                and maintenance access.
              </p>

              <h2>Detention pond vs. retention pond</h2>
              <p>
                Many codes distinguish between <strong>detention</strong> and
                <strong>retention</strong> facilities:
              </p>
              <ul>
                <li>
                  <strong>Detention pond (dry basin):</strong> Temporarily
                  stores stormwater and then drains dry or nearly dry between
                  storms. Primary purpose is peak flow control.
                </li>
                <li>
                  <strong>Retention pond (wet pond):</strong> Maintains a
                  permanent pool of water. Provides both peak flow reduction and
                  water quality treatment.
                </li>
              </ul>
              <p>
                This calculator is focused on
                <strong>detention storage sizing</strong>. For wet ponds, you
                also need to consider permanent pool volume, water quality
                volume, safety benches, and other design features.
              </p>

              <h2>Limitations and professional use</h2>
              <ul>
                <li>
                  Uses a simplified triangular hydrograph and constant outflow;
                  real storms and outlet structures are more complex.
                </li>
                <li>
                  Does not model tailwater, backwater, or detailed outlet
                  control (orifice/weir equations).
                </li>
                <li>
                  Does not check freeboard, embankment stability, emergency
                  spillways, or water quality requirements.
                </li>
                <li>
                  Does not replace local design manuals (EPA, state DOTs,
                  municipal stormwater manuals, etc.).
                </li>
              </ul>
              <p>
                Always verify results with detailed hydrologic/hydraulic
                modeling and follow your local regulations. For permitted
                projects, detention pond design should be reviewed and stamped
                by a qualified civil engineer.
              </p>
            </section>

            <!-- FAQ -->
            <section class="mt-8">
              <h2 class="text-xl font-semibold mb-3">Detention pond FAQ</h2>
              <div class="space-y-3 text-sm" id="faq-container">
                <div class="border border-gray-200 rounded">
                  <button
                    type="button"
                    class="w-full text-left px-3 py-2 font-medium flex justify-between items-center faq-question"
                  >
                    <span
                      >Can this calculator be used for both dry and wet
                      ponds?</span
                    >
                    <span class="text-gray-500 text-xs">+</span>
                  </button>
                  <div class="px-3 pb-3 hidden faq-answer">
                    <p>
                      The storage sizing logic applies to both dry detention
                      basins and wet ponds, but this tool does not explicitly
                      model a permanent pool or water quality volume. For wet
                      ponds, you should add the required permanent pool and
                      water quality storage on top of the detention volume
                      estimated here, and design outlet structures accordingly.
                    </p>
                  </div>
                </div>
                <div class="border border-gray-200 rounded">
                  <button
                    type="button"
                    class="w-full text-left px-3 py-2 font-medium flex justify-between items-center faq-question"
                  >
                    <span>How accurate is the storage volume estimate?</span>
                    <span class="text-gray-500 text-xs">+</span>
                  </button>
                  <div class="px-3 pb-3 hidden faq-answer">
                    <p>
                      For small sites where the Rational Method is appropriate,
                      the storage estimate is usually reasonable for
                      <strong>conceptual design</strong>. However, final sizing
                      should be checked with the hydrologic method and design
                      storms required by your local stormwater manual (e.g.,
                      SCS/NRCS unit hydrograph, continuous simulation, etc.).
                    </p>
                  </div>
                </div>
                <div class="border border-gray-200 rounded">
                  <button
                    type="button"
                    class="w-full text-left px-3 py-2 font-medium flex justify-between items-center faq-question"
                  >
                    <span
                      >What if the peak depth exceeds my maximum allowable
                      depth?</span
                    >
                    <span class="text-gray-500 text-xs">+</span>
                  </button>
                  <div class="px-3 pb-3 hidden faq-answer">
                    <p>
                      If the calculated peak water depth is greater than your
                      specified maximum depth, the tool will flag a warning. You
                      can respond by increasing pond footprint (bottom area),
                      reducing allowable outflow (if hydraulically feasible), or
                      revising the site layout to reduce contributing area or
                      runoff coefficient.
                    </p>
                  </div>
                </div>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Detention, Pond.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">More Engineering Tools</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/manning-s-equation-calculator"
                  class="text-blue-600 hover:underline"
                  >Manning's Equation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bernoulli-equation"
                  class="text-blue-600 hover:underline"
                  >Bernoulli's Equation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/reynolds-number"
                  class="text-blue-600 hover:underline"
                  >Reynolds Number</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/rational-method"
                  class="text-blue-600 hover:underline"
                  >Rational Method (Runoff)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/landfill-volume"
                  class="text-blue-600 hover:underline"
                  >Landfill Volume</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/time-of-concentration"
                  class="text-blue-600 hover:underline"
                  >Time of Concentration</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/stream-discharge"
                  class="text-blue-600 hover:underline"
                  >Stream Discharge</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/rational-method"
                  class="text-blue-600 hover:underline"
                  >Rational Method Runoff</a
                >
              </li>
            </ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">
              Popular Engineering Calculators
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/beam-deflection"
                  class="text-blue-600 hover:underline"
                  >Beam Deflection</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/moment-of-inertia"
                  class="text-blue-600 hover:underline"
                  >Moment of Inertia</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/three-phase-power"
                  class="text-blue-600 hover:underline"
                  >Three-Phase Power</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/ohm-s-law-calculator"
                  class="text-blue-600 hover:underline"
                  >Ohm's Law</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/hazen-williams"
                  class="text-blue-600 hover:underline"
                  >Pipe Flow (Hazen–Williams)</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Unit handling and core calculations
      (function () {
        const state = {
          system: "us", // 'us' or 'metric'
        };

        const els = {
          unitsUS: document.getElementById("units-us"),
          unitsMetric: document.getElementById("units-metric"),
          area: document.getElementById("area"),
          c: document.getElementById("c"),
          intensity: document.getElementById("intensity"),
          duration: document.getElementById("duration"),
          qout: document.getElementById("qout"),
          maxDepth: document.getElementById("max-depth"),
          sideSlope: document.getElementById("side-slope"),
          bottomArea: document.getElementById("bottom-area"),
          areaUnit: document.getElementById("area-unit"),
          intensityUnit: document.getElementById("intensity-unit"),
          qoutUnit: document.getElementById("qout-unit"),
          depthUnit: document.getElementById("depth-unit"),
          bottomAreaUnit: document.getElementById("bottom-area-unit"),
          calcBtn: document.getElementById("calculate-btn"),
          resetBtn: document.getElementById("reset-btn"),
          error: document.getElementById("calc-error"),
          resultsSection: document.getElementById("results-section"),
          resQinPeak: document.getElementById("res-qin-peak"),
          resQout: document.getElementById("res-qout"),
          resStorage: document.getElementById("res-storage"),
          resDepth: document.getElementById("res-depth"),
          resBottomArea: document.getElementById("res-bottom-area"),
          resTopArea: document.getElementById("res-top-area"),
          resLength: document.getElementById("res-length"),
          resUtilization: document.getElementById("res-utilization"),
          resWarning: document.getElementById("res-warning"),
        };

        function setUnits(system) {
          state.system = system;
          if (system === "us") {
            els.unitsUS.classList.add("bg-blue-600", "text-white");
            els.unitsUS.classList.remove("bg-white", "text-gray-700");
            els.unitsMetric.classList.remove("bg-blue-600", "text-white");
            els.unitsMetric.classList.add("bg-white", "text-gray-700");
            els.areaUnit.textContent = "acres";
            els.intensityUnit.textContent = "in/hr";
            els.qoutUnit.textContent = "cfs";
            els.depthUnit.textContent = "ft";
            els.bottomAreaUnit.textContent = "ft²";
          } else {
            els.unitsMetric.classList.add("bg-blue-600", "text-white");
            els.unitsMetric.classList.remove("bg-white", "text-gray-700");
            els.unitsUS.classList.remove("bg-blue-600", "text-white");
            els.unitsUS.classList.add("bg-white", "text-gray-700");
            els.areaUnit.textContent = "ha";
            els.intensityUnit.textContent = "mm/hr";
            els.qoutUnit.textContent = "L/s";
            els.depthUnit.textContent = "m";
            els.bottomAreaUnit.textContent = "m²";
          }
          els.resultsSection.classList.add("hidden");
          els.error.classList.add("hidden");
          els.resWarning.classList.add("hidden");
        }

        function parsePositive(id, name) {
          const el = els[id];
          const v = parseFloat(el.value);
          if (isNaN(v) || v <= 0) {
            throw new Error(name + " must be a positive number.");
          }
          return v;
        }

        function calculate() {
          try {
            els.error.classList.add("hidden");
            els.resWarning.classList.add("hidden");

            const A = parsePositive("area", "Drainage area");
            const C = parsePositive("c", "Runoff coefficient C");
            if (C > 1)
              throw new Error("Runoff coefficient C should not exceed 1.0.");
            const I = parsePositive("intensity", "Rainfall intensity");
            const durMin = parsePositive("duration", "Storm duration");
            const Qout = parsePositive("qout", "Allowable outflow");
            const hMax = parsePositive("maxDepth", "Maximum water depth");
            const m = parsePositive("sideSlope", "Side slope");

            let Ab = null;
            if (els.bottomArea.value.trim() !== "") {
              Ab = parsePositive("bottomArea", "Bottom area");
            }

            // Convert to consistent internal units
            // US: area acres, I in/hr, Q cfs, depth ft, area ft2, volume ft3
            // Metric: area ha, I mm/hr, Q L/s, depth m, area m2, volume m3
            let Qpeak;
            if (state.system === "us") {
              Qpeak = 1.008 * C * I * A; // cfs
            } else {
              Qpeak = 2.78 * C * I * A; // L/s
            }

            if (Qpeak <= Qout) {
              throw new Error(
                "Peak inflow is not greater than allowable outflow. No detention storage is required with these inputs."
              );
            }

            // Build triangular inflow hydrograph over duration (minutes)
            const dtMin = 1;
            const nSteps = Math.max(2, Math.round(durMin / dtMin));
            const tPeakIndex = Math.floor(nSteps / 2);

            const inflow = [];
            for (let i = 0; i < nSteps; i++) {
              const t = i / (nSteps - 1);
              const q = t <= 0.5 ? Qpeak * (t / 0.5) : Qpeak * ((1 - t) / 0.5);
              inflow.push(Math.max(0, q));
            }

            // Level-pool routing with constant Qout
            let S = 0;
            let Smax = 0;
            const dtSec = dtMin * 60;
            for (let i = 0; i < nSteps; i++) {
              const Qin = inflow[i];
              const dS = (Qin - Qout) * dtSec;
              S += dS;
              if (S < 0) S = 0;
              if (S > Smax) Smax = S;
            }

            if (Smax <= 0) {
              throw new Error(
                "Calculated storage volume is zero or negative. Check your inputs."
              );
            }

            // Convert storage to depth and geometry
            // If Ab provided, compute depth from S = (Ab + At)/2 * h, with At = (sqrt(Ab) + 2mh)^2
            // For simplicity, assume square plan: L = W = sqrt(Ab)
            let hPeak;
            let AbUsed;
            let AtPeak;
            let L;

            function storageForDepth(h, AbLocal) {
              const Llocal = Math.sqrt(AbLocal);
              const Wlocal = Llocal;
              const Ltop = Llocal + 2 * m * h;
              const Wtop = Wlocal + 2 * m * h;
              const AtLocal = Ltop * Wtop;
              const Aavg = 0.5 * (AbLocal + AtLocal);
              return { S: Aavg * h, At: AtLocal, L: Llocal };
            }

            if (Ab) {
              // Solve for hPeak by simple iteration
              let hLow = 0;
              let hHigh = hMax;
              for (let iter = 0; iter < 40; iter++) {
                const hMid = 0.5 * (hLow + hHigh);
                const { S: Smid } = storageForDepth(hMid, Ab);
                if (Smid < Smax) {
                  hLow = hMid;
                } else {
                  hHigh = hMid;
                }
              }
              hPeak = hLow;
              const geom = storageForDepth(hPeak, Ab);
              AbUsed = Ab;
              AtPeak = geom.At;
              L = geom.L;
            } else {
              // Choose Ab such that hPeak ~ 0.7 * hMax (heuristic)
              const targetH = 0.7 * hMax;
              if (targetH <= 0) throw new Error("Invalid target depth.");
              // Rearranged approximate formula: assume At ~ Ab (small slopes) for first estimate
              const AbGuess = Smax / targetH;
              // Refine with one iteration including side slopes
              const geomGuess = storageForDepth(targetH, AbGuess);
              const AbRefined = ((Smax * targetH) / geomGuess.S) * AbGuess;
              const geomFinal = storageForDepth(targetH, AbRefined);
              AbUsed = AbRefined;
              hPeak = Math.min(hMax, targetH * (Smax / geomFinal.S));
              const geom = storageForDepth(hPeak, AbUsed);
              AtPeak = geom.At;
              L = geom.L;
            }

            const utilization = (hPeak / hMax) * 100;

            // Format outputs
            function fmt(x, digits) {
              return Number(x).toFixed(digits);
            }

            if (state.system === "us") {
              els.resQinPeak.textContent = fmt(Qpeak, 2) + " cfs";
              els.resQout.textContent = fmt(Qout, 2) + " cfs";
              els.resStorage.textContent =
                fmt(Smax, 0) + " ft³ (" + fmt(Smax / 43560, 3) + " acre‑ft)";
              els.resDepth.textContent = fmt(hPeak, 2) + " ft";
              els.resBottomArea.textContent =
                fmt(AbUsed, 0) + " ft² (" + fmt(AbUsed / 43560, 3) + " acres)";
              els.resTopArea.textContent =
                fmt(AtPeak, 0) + " ft² (" + fmt(AtPeak / 43560, 3) + " acres)";
              els.resLength.textContent =
                fmt(L, 1) + " ft (approx. square side length)";
            } else {
              els.resQinPeak.textContent = fmt(Qpeak, 1) + " L/s";
              els.resQout.textContent = fmt(Qout, 1) + " L/s";
              els.resStorage.textContent = fmt(Smax, 1) + " m³";
              els.resDepth.textContent = fmt(hPeak, 2) + " m";
              els.resBottomArea.textContent = fmt(AbUsed, 1) + " m²";
              els.resTopArea.textContent = fmt(AtPeak, 1) + " m²";
              els.resLength.textContent =
                fmt(L, 1) + " m (approx. square side length)";
            }
            els.resUtilization.textContent =
              fmt(utilization, 1) + "% of maximum depth";

            if (hPeak > hMax * 0.98) {
              els.resWarning.textContent =
                "Warning: Peak water depth is at or above the specified maximum depth. Increase pond footprint, reduce allowable outflow, or revise inputs.";
              els.resWarning.classList.remove("hidden");
            }

            els.resultsSection.classList.remove("hidden");
          } catch (err) {
            els.resultsSection.classList.add("hidden");
            els.error.textContent = err.message;
            els.error.classList.remove("hidden");
          }
        }

        function reset() {
          els.area.value = state.system === "us" ? 5 : 2;
          els.c.value = 0.7;
          els.intensity.value = state.system === "us" ? 3.0 : 75;
          els.duration.value = 60;
          els.qout.value = state.system === "us" ? 5 : 140;
          els.maxDepth.value = state.system === "us" ? 6 : 2;
          els.sideSlope.value = 3;
          els.bottomArea.value = "";
          els.resultsSection.classList.add("hidden");
          els.error.classList.add("hidden");
          els.resWarning.classList.add("hidden");
        }

        els.unitsUS.addEventListener("click", () => {
          if (state.system !== "us") {
            setUnits("us");
            reset();
          }
        });
        els.unitsMetric.addEventListener("click", () => {
          if (state.system !== "metric") {
            setUnits("metric");
            reset();
          }
        });
        els.calcBtn.addEventListener("click", calculate);
        els.resetBtn.addEventListener("click", reset);

        // FAQ toggle (simple, in addition to global script_faq if present)
        document
          .querySelectorAll("#faq-container .faq-question")
          .forEach((btn) => {
            btn.addEventListener("click", () => {
              const ans = btn.parentElement.querySelector(".faq-answer");
              const icon = btn.querySelector("span:last-child");
              const isHidden = ans.classList.contains("hidden");
              document
                .querySelectorAll("#faq-container .faq-answer")
                .forEach((a) => a.classList.add("hidden"));
              document
                .querySelectorAll(
                  "#faq-container .faq-question span:last-child"
                )
                .forEach((i) => (i.textContent = "+"));
              if (isHidden) {
                ans.classList.remove("hidden");
                icon.textContent = "−";
              }
            });
          });

        // Initialize
        setUnits("us");
      })();
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

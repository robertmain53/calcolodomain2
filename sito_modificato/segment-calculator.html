<!DOCTYPE html>
<html lang="en">
 <head>
  <link href="https://calcdomain.com/segment-calculator" rel="canonical"/>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Segment Calculator – Circle, Line, Woodturning, SMS
  </title>
  <meta content="Professional segment calculator: circle segment area/arc/chord/centroid, line-segment distance &amp; midpoint, woodturning ring segments (miter/chords), and SMS segment counter (GSM-7/UCS-2). Accessible, mobile-first, and accurate." name="description"/>
  <meta content="#0b63f6" name="theme-color"/>
  <!-- Icons (optional placeholders; replace paths if needed) -->
  <link href="https://calcdomain.com/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"/>
  <link href="https://calcdomain.com/favicon.svg" rel="icon" type="image/svg+xml"/>
  <link href="https://calcdomain.com/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
  <link href="https://calcdomain.com/site.webmanifest" rel="manifest"/>
  <!-- Tailwind (CDN) -->
  <script defer="" src="https://cdn.tailwindcss.com">
  </script>
  <!-- MathJax for LaTeX rendering -->
  <script defer="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <style>
   /* Base typography and layout helpers */
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif; }
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.375rem; font-weight: 700; margin-top: 1.75rem; margin-bottom: .75rem; }
    .prose h3 { font-size: 1.125rem; font-weight: 700; margin-top: 1.25rem; margin-bottom: .5rem; }
    .prose p { margin-bottom: .9rem; line-height: 1.65; }
    .prose ul, .prose ol { margin: .75rem 0 .75rem 1.25rem; }
    .formula-box { background:#f3f4f6; border:1px solid #e5e7eb; border-radius:12px; padding:1rem; overflow:auto; }

    /* Focus styles (visible & WCAG-compliant) */
    :focus-visible { outline: 3px solid #0ea5e9; outline-offset: 2px; border-radius: 8px; }

    /* Tabs */
    .tab-btn[aria-selected="true"] { background:#0b63f6; color:#fff; }
    .tab-panel { display:none; }
    .tab-panel[data-active="true"] { display:block; }

    /* Result cards */
    .result-card { background:#fff; border:1px solid #e5e7eb; border-radius: 12px; padding:1rem; }
    .result-card h4 { font-size:.9rem; color:#6b7280; margin-bottom:.25rem; }
    .result-card p { font-weight:800; font-size:1.4rem; color:#0b63f6; }

    /* Prevent CLS in results area */
    #results-wrapper { min-height: 340px; }

    /* Tooltip content (visually hidden until toggled) */
    .tooltip-content[hidden] { display:none; }

    /* Print */
    @media print {
      body * { visibility: hidden; }
      #print-section, #print-section * { visibility: visible; }
      #print-section { position: absolute; inset: 0; width:100%; }
      nav, header, footer, #tablist { display: none !important; }
    }
  </style>
  <!-- WebPage JSON-LD -->
  <script type="application/ld+json">
   {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Segment Calculator",
    "url":"https://calcdomain.com/segment-calculator",
    "inLanguage":"en",
    "description":"Professional segment calculator covering circle segments, line segments, woodturning ring segments, and SMS segment counting (GSM-7/UCS-2).",
    "author":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"}
  }
  </script>
  <!-- BreadcrumbList JSON-LD -->
  <script type="application/ld+json">
   {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Math & Conversions",
      "item": "https://calcdomain.com/math-conversions"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Geometry",
      "item": "https://calcdomain.com/subcategories/geometry"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Segment Calculator",
      "item": "https://calcdomain.com/segment-calculator"
    }
  ]
}
  </script>
  <!-- HowTo JSON-LD -->
  <script type="application/ld+json">
   {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to use the Segment Calculator",
    "description":"Choose a mode (Circle, Line, Woodturning, SMS), enter inputs, and read results instantly.",
    "step":[
      {"@type":"HowToStep","name":"Pick mode","text":"Select Circle Segment, Line Segment, Woodturning Ring Segment, or SMS Segment Counter."},
      {"@type":"HowToStep","name":"Enter inputs","text":"Provide radius/height or angle for circle, coordinates for line, ring sizes & count for woodturning, or your message for SMS."},
      {"@type":"HowToStep","name":"Review outputs","text":"View area, arc, chord, centroid (circle); distance, midpoint, slope (line); miters and chord lengths (woodturning); segment count & encoding (SMS)."},
      {"@type":"HowToStep","name":"Export/Print","text":"Print or copy results for documentation or fabrication."}
    ]
  }
  </script>
  <!-- FAQPage JSON-LD -->
  <script id="faq-jsonld" type="application/ld+json">
   {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {
        "@type":"Question",
        "name":"What is a circle segment and how is its area computed?",
        "acceptedAnswer":{"@type":"Answer","text":"A circle segment is the region bounded by a chord and the corresponding arc. Its area can be computed from central angle θ as A = (r^2/2)(θ − sin θ), or from segment height h as A = r^2·acos((r−h)/r) − (r−h)·√(2rh − h^2)."}
      },
      {
        "@type":"Question",
        "name":"How do I find the length of a line segment between two points?",
        "acceptedAnswer":{"@type":"Answer","text":"Use the Euclidean distance d = √((x2−x1)^2 + (y2−y1)^2). The midpoint is ((x1+x2)/2, (y1+y2)/2) and the slope is (y2−y1)/(x2−x1) where defined."}
      },
      {
        "@type":"Question",
        "name":"What is the miter angle for a ring made of N segments?",
        "acceptedAnswer":{"@type":"Answer","text":"Each segment is cut with a miter angle of 180°/N. The central angle per segment is 360°/N. Outer and inner chords depend on outer and inner diameters."}
      },
      {
        "@type":"Question",
        "name":"How are SMS segments counted?",
        "acceptedAnswer":{"@type":"Answer","text":"GSM-7 messages fit 160 chars per single segment (153 when concatenated). UCS-2 (Unicode) messages fit 70 chars per single segment (67 concatenated). Certain GSM extension characters count as two."}
      },
      {
        "@type":"Question",
        "name":"Does this tool handle radians and degrees?",
        "acceptedAnswer":{"@type":"Answer","text":"Yes. For circle calculations you can choose angle units (degrees or radians). Height-based inputs do not require angle units."}
      },
      {
        "@type":"Question",
        "name":"Can I use woodturning outputs directly on the saw?",
        "acceptedAnswer":{"@type":"Answer","text":"Use the miter angle (half the central angle) on your saw. Account for kerf and verify dimensions with a test cut before final material."}
      },
      {
        "@type":"Question",
        "name":"Which standards back the SMS segmentation rules?",
        "acceptedAnswer":{"@type":"Answer","text":"3GPP TS 23.038 defines GSM 7-bit default alphabet and extension table. UCS-2 behavior follows Unicode and 3GPP messaging concatenation rules."}
      }
    ]
  }
  </script>
  <html>
   <head>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=TUO_ID_GA">
    </script>
    <script>
     window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'TUO_ID_GA');
    </script>
   </head>
  </html>
 </head>
 <body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky per spec) -->
  <header class="bg-white shadow-sm sticky top-0 z-50">
   <nav aria-label="Primary" class="container mx-auto px-4 lg:px-6 py-4">
    <div class="flex justify-between items-center">
     <a class="text-2xl font-bold text-blue-600" href="https://calcdomain.com">
      CalcDomain
     </a>
     <div class="w-full max-w-md hidden md:block mx-8">
      <div class="relative">
       <input autocomplete="off" class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="search-input" placeholder="Search for a calculator..." type="search"/>
       <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24">
        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
        </path>
       </svg>
       <div class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200" id="search-results">
       </div>
      </div>
     </div>
     <div class="hidden md:flex items-center space-x-6">
      <a class="text-gray-700 hover:text-blue-600 transition-colors" href="https://calcdomain.com/search">
       Advanced Search
      </a>
      <a class="text-gray-700 hover:text-blue-600 transition-colors" href="https://calcdomain.com/categories">
       Categories
      </a>
     </div>
     <button aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" class="md:hidden p-2" id="mobile-menu-toggle" type="button">
      <svg aria-hidden="true" class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24">
       <path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
       </path>
      </svg>
     </button>
    </div>
    <nav aria-label="Mobile menu" class="md:hidden mt-4 hidden" id="mobile-menu" role="navigation">
     <div class="mb-4">
      <div class="relative">
       <input class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" id="mobile-search-input" placeholder="Search calculators..." type="search"/>
       <svg aria-hidden="true" class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24">
        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
        </path>
       </svg>
      </div>
     </div>
     <div class="space-y-2">
      <a class="block py-2 text-gray-700 hover:text-blue-600" href="https://calcdomain.com/search">
       Advanced Search
      </a>
      <a class="block py-2 text-gray-700 hover:text-blue-600" href="https://calcdomain.com/categories">
       Categories
      </a>
     </div>
    </nav>
   </nav>
  </header>
  <html>
   <body>
    <nav class="container mx-auto px-4 py-2 text-sm text-gray-600" id="breadcrumb-container">
    </nav>
    <div class="container mx-auto px-4 py-8">
     <div class="flex flex-col lg:flex-row gap-8">
      <main class="w-full lg:w-2/3">
       <main class="container mx-auto px-4 py-8">
        <nav aria-label="Breadcrumb" class="text-sm text-gray-600 mb-4">
         <a class="hover:text-blue-600" href="https://calcdomain.com">
          Home
         </a>
         »
         <a class="hover:text-blue-600" href="https://calcdomain.com/math">
          Math
         </a>
         »
         <a class="hover:text-blue-600" href="https://calcdomain.com/subcategories/geometry">
          Geometry
         </a>
         »
         <span class="text-gray-900">
          Segment Calculator
         </span>
        </nav>
        <section class="bg-white p-6 rounded-xl shadow-sm" id="print-section">
         <h1 class="text-3xl font-extrabold mb-2">
          segment calculator
         </h1>
         <p class="text-gray-700 mb-6">
          A unified, professional calculator for
          <strong>
           circle segments
          </strong>
          (area, arc, chord, centroid),
          <strong>
           line segments
          </strong>
          (distance, midpoint, slope),
          <strong>
           woodturning ring segments
          </strong>
          (miter angle and chord lengths), and
          <strong>
           SMS message segments
          </strong>
          (GSM-7/UCS-2). Built for engineers, makers, and communications pros.
         </p>
         <!-- Tablist -->
         <div class="mb-4">
          <div aria-label="Segment calculator modes" class="flex flex-wrap gap-2" id="tablist" role="tablist">
           <button aria-controls="panel-circle" aria-selected="true" class="tab-btn px-3 py-2 rounded-lg border text-sm" id="tab-circle" role="tab">
            Circle Segment
           </button>
           <button aria-controls="panel-line" aria-selected="false" class="tab-btn px-3 py-2 rounded-lg border text-sm" id="tab-line" role="tab">
            Line Segment
           </button>
           <button aria-controls="panel-wood" aria-selected="false" class="tab-btn px-3 py-2 rounded-lg border text-sm" id="tab-wood" role="tab">
            Woodturning Ring
           </button>
           <button aria-controls="panel-sms" aria-selected="false" class="tab-btn px-3 py-2 rounded-lg border text-sm" id="tab-sms" role="tab">
            SMS Segments
           </button>
          </div>
         </div>
         <!-- Calculator Panels -->
         <section class="space-y-8" id="calculator-ui">
          <!-- CIRCLE SEGMENT -->
          <div aria-labelledby="tab-circle" class="tab-panel" data-active="true" id="panel-circle" role="tabpanel">
           <h2 class="text-xl font-bold mb-3">
            Circle segment
           </h2>
           <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
             <label class="block text-sm font-medium text-gray-800" for="circleMode">
              Input mode *
             </label>
             <div class="flex items-center gap-2 mt-1">
              <select aria-describedby="circleModeHelp" aria-required="true" class="w-full border rounded-md px-3 py-2" id="circleMode">
               <option selected="" value="height">
                Radius + Segment Height (h)
               </option>
               <option value="angle">
                Radius + Central Angle (θ)
               </option>
              </select>
              <button aria-controls="circleModeHelp" aria-expanded="false" class="px-3 py-2 rounded-md border" type="button">
               ?
              </button>
             </div>
             <p class="text-sm text-gray-600 mt-2" id="circleModeHelp">
              Choose to compute using segment height \(h\) or central angle \(\theta\).
             </p>
             <p aria-live="polite" class="text-sm text-red-600 mt-1" id="circleModeErr">
             </p>
            </div>
            <div>
             <label class="block text-sm font-medium text-gray-800" for="circleRadius">
              Radius r *
             </label>
             <input aria-describedby="circleRadiusHelp circleRadiusErr" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="circleRadius" inputmode="decimal" min="0" step="any" type="number" value="10"/>
             <div class="flex items-center gap-2 mt-1">
              <button aria-controls="circleRadiusHelp" aria-expanded="false" class="px-3 py-2 rounded-md border" type="button">
               ?
              </button>
              <p class="text-sm text-gray-600" id="circleRadiusHelp">
               Circle radius (same units propagate to outputs).
              </p>
             </div>
             <p aria-live="polite" class="text-sm text-red-600 mt-1" id="circleRadiusErr">
             </p>
            </div>
            <div id="heightRow">
             <label class="block text-sm font-medium text-gray-800" for="circleHeight">
              Segment height h *
             </label>
             <input aria-describedby="circleHeightHelp circleHeightErr" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="circleHeight" inputmode="decimal" min="0" step="any" type="number" value="3"/>
             <div class="flex items-center gap-2 mt-1">
              <button aria-controls="circleHeightHelp" aria-expanded="false" class="px-3 py-2 rounded-md border" type="button">
               ?
              </button>
              <p class="text-sm text-gray-600" id="circleHeightHelp">
               Vertical distance from chord to arc. Must satisfy \(0 \le h \le 2r\).
              </p>
             </div>
             <p aria-live="polite" class="text-sm text-red-600 mt-1" id="circleHeightErr">
             </p>
            </div>
            <div class="hidden" id="angleRow">
             <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
               <label class="block text-sm font-medium text-gray-800" for="circleAngle">
                Central angle θ *
               </label>
               <input aria-describedby="circleAngleErr" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="circleAngle" inputmode="decimal" min="0" step="any" type="number" value="1.2"/>
               <p aria-live="polite" class="text-sm text-red-600 mt-1" id="circleAngleErr">
               </p>
              </div>
              <div>
               <label class="block text-sm font-medium text-gray-800" for="angleUnits">
                Angle units *
               </label>
               <select aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="angleUnits">
                <option selected="" value="rad">
                 radians
                </option>
                <option value="deg">
                 degrees
                </option>
               </select>
              </div>
             </div>
            </div>
           </div>
           <div aria-live="polite" class="mt-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4" id="circle-results">
            <div class="result-card">
             <h4>
              Area of segment
             </h4>
             <p id="circleArea">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Arc length
             </h4>
             <p id="circleArc">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Chord length
             </h4>
             <p id="circleChord">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Perimeter (arc + chord)
             </h4>
             <p id="circlePerimeter">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Centroid distance from center
             </h4>
             <p id="circleCentroid">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Central angle θ (rad)
             </h4>
             <p id="circleAngleOut">
              —
             </p>
            </div>
           </div>
          </div>
          <!-- LINE SEGMENT -->
          <div aria-labelledby="tab-line" class="tab-panel" data-active="false" id="panel-line" role="tabpanel">
           <h2 class="text-xl font-bold mb-3">
            Line segment
           </h2>
           <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
             <label class="block text-sm font-medium text-gray-800" for="x1">
              x₁ *
             </label>
             <input aria-describedby="x1Err" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="x1" inputmode="decimal" step="any" type="number" value="0"/>
             <p aria-live="polite" class="text-sm text-red-600 mt-1" id="x1Err">
             </p>
            </div>
            <div>
             <label class="block text-sm font-medium text-gray-800" for="y1">
              y₁ *
             </label>
             <input aria-describedby="y1Err" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="y1" inputmode="decimal" step="any" type="number" value="0"/>
             <p aria-live="polite" class="text-sm text-red-600 mt-1" id="y1Err">
             </p>
            </div>
            <div>
             <label class="block text-sm font-medium text-gray-800" for="x2">
              x₂ *
             </label>
             <input aria-describedby="x2Err" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="x2" inputmode="decimal" step="any" type="number" value="3"/>
             <p aria-live="polite" class="text-sm text-red-600 mt-1" id="x2Err">
             </p>
            </div>
            <div>
             <label class="block text-sm font-medium text-gray-800" for="y2">
              y₂ *
             </label>
             <input aria-describedby="y2Err" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="y2" inputmode="decimal" step="any" type="number" value="4"/>
             <p aria-live="polite" class="text-sm text-red-600 mt-1" id="y2Err">
             </p>
            </div>
           </div>
           <div aria-live="polite" class="mt-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
            <div class="result-card">
             <h4>
              Length
             </h4>
             <p id="lineLength">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Midpoint
             </h4>
             <p id="lineMidpoint">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Slope
             </h4>
             <p id="lineSlope">
              —
             </p>
            </div>
           </div>
          </div>
          <!-- WOODTURNING RING SEGMENT -->
          <div aria-labelledby="tab-wood" class="tab-panel" data-active="false" id="panel-wood" role="tabpanel">
           <h2 class="text-xl font-bold mb-3">
            Woodturning ring segment
           </h2>
           <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
             <label class="block text-sm font-medium text-gray-800" for="segmentsN">
              Number of segments N *
             </label>
             <input aria-describedby="segmentsNErr" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="segmentsN" inputmode="numeric" min="3" step="1" type="number" value="12"/>
             <p aria-live="polite" class="text-sm text-red-600 mt-1" id="segmentsNErr">
             </p>
            </div>
            <div>
             <label class="block text-sm font-medium text-gray-800" for="outerD">
              Outer diameter D
              <sub>
               out
              </sub>
              *
             </label>
             <input aria-describedby="outerDErr" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="outerD" inputmode="decimal" min="0" step="any" type="number" value="200"/>
             <p aria-live="polite" class="text-sm text-red-600 mt-1" id="outerDErr">
             </p>
            </div>
            <div>
             <label class="block text-sm font-medium text-gray-800" for="innerD">
              Inner diameter D
              <sub>
               in
              </sub>
              *
             </label>
             <input aria-describedby="innerDErr" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="innerD" inputmode="decimal" min="0" step="any" type="number" value="160"/>
             <p aria-live="polite" class="text-sm text-red-600 mt-1" id="innerDErr">
             </p>
            </div>
            <div>
             <label class="block text-sm font-medium text-gray-800" for="kerf">
              Saw kerf (optional)
             </label>
             <input aria-describedby="kerfHelp kerfErr" class="mt-1 w-full border rounded-md px-3 py-2" id="kerf" inputmode="decimal" min="0" step="any" type="number" value="0"/>
             <div class="flex items-center gap-2 mt-1">
              <button aria-controls="kerfHelp" aria-expanded="false" class="px-3 py-2 rounded-md border" type="button">
               ?
              </button>
              <p class="text-sm text-gray-600" id="kerfHelp">
               Material lost per cut. For safety, subtract kerf once per segment edge.
              </p>
             </div>
             <p aria-live="polite" class="text-sm text-red-600 mt-1" id="kerfErr">
             </p>
            </div>
           </div>
           <div aria-live="polite" class="mt-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4" id="wood-results">
            <div class="result-card">
             <h4>
              Central angle per segment
             </h4>
             <p id="segAngle">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Miter angle (saw setting)
             </h4>
             <p id="miterAngle">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Outer chord length
             </h4>
             <p id="outerChord">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Inner chord length
             </h4>
             <p id="innerChord">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Radial width
             </h4>
             <p id="radialWidth">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Approx. outer piece length (kerf-adjusted)
             </h4>
             <p id="outerPiece">
              —
             </p>
            </div>
           </div>
          </div>
          <!-- SMS SEGMENT COUNTER -->
          <div aria-labelledby="tab-sms" class="tab-panel" data-active="false" id="panel-sms" role="tabpanel">
           <h2 class="text-xl font-bold mb-3">
            SMS segment counter
           </h2>
           <div>
            <label class="block text-sm font-medium text-gray-800" for="smsText">
             Message *
            </label>
            <textarea aria-describedby="smsErr smsHelp" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2" id="smsText" rows="6">Hello! This is a test message with ~ and € to test GSM-7 extension.</textarea>
            <div class="flex items-center gap-2 mt-1">
             <button aria-controls="smsHelp" aria-expanded="false" class="px-3 py-2 rounded-md border" type="button">
              ?
             </button>
             <p class="text-sm text-gray-600" id="smsHelp">
              GSM-7 single: 160; concatenated: 153. UCS-2 single: 70; concatenated: 67. Some characters (e.g., ^ { } \\ [ ] ~ | €) count as two in GSM-7.
             </p>
            </div>
            <p aria-live="polite" class="text-sm text-red-600 mt-1" id="smsErr">
            </p>
           </div>
           <div aria-live="polite" class="mt-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
            <div class="result-card">
             <h4>
              Encoding
             </h4>
             <p id="smsEncoding">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Characters counted
             </h4>
             <p id="smsChars">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Segments
             </h4>
             <p id="smsSegments">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Per-segment limit
             </h4>
             <p id="smsLimit">
              —
             </p>
            </div>
            <div class="result-card">
             <h4>
              Chars in last segment
             </h4>
             <p id="smsLast">
              —
             </p>
            </div>
           </div>
          </div>
         </section>
         <!-- Results wrapper for CLS prevention -->
         <div class="mt-8" id="results-wrapper">
         </div>
        </section>
        <!-- Authoritative Content -->
        <article class="bg-white p-6 rounded-xl shadow-sm mt-8 prose">
         <h2>
          Authoritative data sources &amp; methodology
         </h2>
         <ul>
          <li>
           <strong>
            Circle segment formulas
           </strong>
           : Wolfram MathWorld – “Circular Segment”; NIST Digital Library of Mathematical Functions. All core relations (area, chord, arc, centroid) follow these definitions.
          </li>
          <li>
           <strong>
            Line segment
           </strong>
           : Standard Euclidean geometry.
          </li>
          <li>
           <strong>
            Woodturning segments
           </strong>
           : Geometric derivation from circle chords and central angles; industry practice for miter angle \(=180^\circ/N\).
          </li>
          <li>
           <strong>
            SMS segmentation
           </strong>
           :
           <em>
            3GPP TS 23.038
           </em>
           (GSM 7-bit default alphabet &amp; extension) and UCS-2 concatenation rules.
          </li>
         </ul>
         <p>
          <em>
           All calculations strictly follow the formulas and data provided by these sources.
          </em>
         </p>
         <h2>
          The formulas explained
         </h2>
         <div class="formula-box">
          <h3>
           Circle segment (by height \(h\))
          </h3>
          <p>
           \[
          A = r^2\arccos\!\left(\frac{r-h}{r}\right) - (r-h)\sqrt{2rh - h^2}
        \]
          </p>
          <p>
           \[
          c = 2\sqrt{h(2r - h)}, \quad \theta = 2\arccos\!\left(\frac{r-h}{r}\right), \quad s = r\theta,\quad
          P = s + c
        \]
          </p>
          <p>
           Centroid distance from circle center (for \(\theta \in (0,2\pi)\)):\[
          \bar{y} = \frac{4r\sin^3(\theta/2)}{3\left(\theta - \sin\theta\right)}
        \]
          </p>
          <h3>
           Circle segment (by central angle \(\theta\))
          </h3>
          <p>
           \[
          A = \frac{r^2}{2}\left(\theta - \sin\theta\right), \quad
          c = 2r\sin\left(\frac{\theta}{2}\right),\quad s = r\theta,\quad P = s + c
        \]
          </p>
          <h3>
           Line segment
          </h3>
          <p>
           \[
          d=\sqrt{(x_2-x_1)^2+(y_2-y_1)^2},\quad
          M=\left(\frac{x_1+x_2}{2},\frac{y_1+y_2}{2}\right),\quad
          m=\frac{y_2-y_1}{x_2-x_1}
        \]
          </p>
          <h3>
           Woodturning ring segment
          </h3>
          <p>
           \[
          \alpha=\frac{360^\circ}{N},\quad \text{miter}=\frac{180^\circ}{N},\quad
          c_\text{out}=2R_\text{out}\sin\!\left(\frac{\pi}{N}\right),\quad
          c_\text{in}=2R_\text{in}\sin\!\left(\frac{\pi}{N}\right)
        \]
          </p>
          <p>
           \[
          R_\text{out}=\frac{D_\text{out}}{2},\quad R_\text{in}=\frac{D_\text{in}}{2},\quad
          w_r=R_\text{out}-R_\text{in}
        \]
          </p>
          <h3>
           SMS segments
          </h3>
          <p>
           GSM-7 single-segment limit \(=160\) chars (153 concatenated). UCS-2 single-segment \(=70\) (67 concatenated). Certain GSM extension characters (e.g., ^ { } \\ [ ] ~ | €) count as two.
          </p>
         </div>
         <h2>
          Glossary of variables
         </h2>
         <ul>
          <li>
           <strong>
            r
           </strong>
           : circle radius;
           <strong>
            h
           </strong>
           : segment height;
           <strong>
            θ
           </strong>
           : central angle;
           <strong>
            c
           </strong>
           : chord length;
           <strong>
            s
           </strong>
           : arc length;
           <strong>
            P
           </strong>
           : segment perimeter.
          </li>
          <li>
           <strong>
            (x₁,y₁),(x₂,y₂)
           </strong>
           : endpoints of line segment;
           <strong>
            d
           </strong>
           : distance;
           <strong>
            M
           </strong>
           : midpoint;
           <strong>
            m
           </strong>
           : slope.
          </li>
          <li>
           <strong>
            N
           </strong>
           : number of segments;
           <strong>
            D
            <sub>
             out
            </sub>
            , D
            <sub>
             in
            </sub>
           </strong>
           : outer/inner diameters;
           <strong>
            w
            <sub>
             r
            </sub>
           </strong>
           : radial ring width;
           <strong>
            kerf
           </strong>
           : material lost per saw cut.
          </li>
          <li>
           <strong>
            GSM-7
           </strong>
           : 7-bit default alphabet;
           <strong>
            UCS-2
           </strong>
           : 16-bit Unicode encoding;
           <strong>
            segments
           </strong>
           : message parts used for delivery.
          </li>
         </ul>
         <h2>
          How it works: a step-by-step example
         </h2>
         <h3>
          Circle segment (height mode)
         </h3>
         <p>
          Given \(r=10\), \(h=3\): compute \(\theta=2\arccos((r-h)/r)\), then \(A = r^2\arccos((r-h)/r) - (r-h)\sqrt{2rh-h^2}\), \(c=2\sqrt{h(2r-h)}\), \(s=r\theta\), \(P=s+c\), and centroid \(\bar{y}\) as above. The calculator performs these steps and reports each result instantly.
         </p>
         <h2>
          Frequently asked questions
         </h2>
         <details>
          <summary>
           Can I enter degrees for the angle?
          </summary>
          <p>
           Yes—set angle units to degrees and the calculator converts to radians internally.
          </p>
         </details>
         <details>
          <summary>
           What happens if h exceeds 2r?
          </summary>
          <p>
           That is invalid; the tool flags it with an inline error so you can correct the input.
          </p>
         </details>
         <details>
          <summary>
           Are woodturning chord lengths kerf-adjusted?
          </summary>
          <p>
           The “outer piece length” accounts for kerf on both sides; chord lengths themselves are pure geometry (no kerf).
          </p>
         </details>
         <details>
          <summary>
           Which characters force UCS-2?
          </summary>
          <p>
           Any character outside GSM-7 and its extension set (e.g., most emojis, many non-Latin scripts). The tool auto-detects.
          </p>
         </details>
         <details>
          <summary>
           Is slope defined for vertical lines?
          </summary>
          <p>
           No; the tool reports “undefined” for vertical lines (x₂ = x₁), while distance and midpoint still compute.
          </p>
         </details>
         <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700">
          <p>
           <strong>
            Tool developed by Ugo Candido.
           </strong>
           Content verified by CalcDomain Editorial Board.
           <br/>
           Last accuracy review:
           <time datetime="2025-10-25">
            October 25, 2025
           </time>
          </p>
         </div>
        </article>
       </main>
      </main>
      <aside class="w-full lg:w-1/3">
       <div class="sticky top-24 space-y-8">
        <div id="sidebar-ad-placeholder-top">
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
         <h3 class="font-bold text-lg mb-4">
          Popular Calculators
         </h3>
         <ul class="space-y-3">
          <li>
           <a class="text-blue-600 hover:underline" href="https://calcdomain.com/mortgage-payment">
            Mortgage Calculator
           </a>
          </li>
          <li>
           <a class="text-blue-600 hover:underline" href="https://calcdomain.com/percentage-calculator">
            Percentage Calculator
           </a>
          </li>
          <li>
           <a class="text-blue-600 hover:underline" href="https://calcdomain.com/bmi-calculator">
            BMI Calculator
           </a>
          </li>
         </ul>
        </div>
       </div>
      </aside>
     </div>
    </div>
   </body>
  </html>
  <footer class="bg-gray-900 text-white py-12">
   <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
     <div>
      <h3 class="text-2xl font-bold mb-4">
       CalcDomain
      </h3>
      <p class="text-gray-400 mb-4">
       Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
      </p>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Categories
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/finance">
         Finance
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/health-fitness">
         Health &amp; Fitness
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/math-conversions">
         Math &amp; Conversions
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/lifestyle-everyday">
         Lifestyle &amp; Everyday
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/construction-diy">
         Construction &amp; DIY
        </a>
       </li>
      </ul>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Popular Tools
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/mortgage-payment">
         Mortgage Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/percentage-calculator">
         Percentage Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/bmi-calculator">
         BMI Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/auto-loan-calculator">
         Auto Loan Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/house-affordability">
         House Affordability
        </a>
       </li>
      </ul>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Support
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/about">
         About Us
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/contact">
         Contact
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/privacy">
         Privacy Policy
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/terms">
         Terms of Service
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/sitemap">
         Site Map
        </a>
       </li>
      </ul>
     </div>
    </div>
    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
     <p>
      © 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone
     </p>
    </div>
   </div>
  </footer>
  <!-- Calculator logic (defer by default since placed before </body>) -->
  <script>
   // Utility formatters
  const nf = new Intl.NumberFormat(undefined, { maximumFractionDigits: 6 });
  const n2 = new Intl.NumberFormat(undefined, { maximumFractionDigits: 2 });
  function fmt(v) { return (isFinite(v) ? nf.format(v) : "—"); }
  function degToRad(d){ return d * Math.PI / 180; }
  function radToDeg(r){ return r * 180 / Math.PI; }

  // Tabs: a11y-compliant
  (function initTabs(){
    const tabs = Array.from(document.querySelectorAll('.tab-btn'));
    const panels = {
      'tab-circle': document.getElementById('panel-circle'),
      'tab-line': document.getElementById('panel-line'),
      'tab-wood': document.getElementById('panel-wood'),
      'tab-sms': document.getElementById('panel-sms'),
    };
    tabs.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        tabs.forEach(b=>b.setAttribute('aria-selected','false'));
        Object.values(panels).forEach(p=>p.setAttribute('data-active','false'));
        btn.setAttribute('aria-selected','true');
        panels[btn.id].setAttribute('data-active','true');
      });
      btn.addEventListener('keydown', (e)=>{
        const idx = tabs.indexOf(btn);
        if (['ArrowRight','ArrowLeft','Home','End'].includes(e.key)) {
          e.preventDefault();
          let target = idx;
          if (e.key==='ArrowRight') target = (idx+1)%tabs.length;
          if (e.key==='ArrowLeft')  target = (idx-1+tabs.length)%tabs.length;
          if (e.key==='Home') target = 0;
          if (e.key==='End')  target = tabs.length-1;
          tabs[target].focus();
        }
      });
    });
  })();

  // Tooltip toggles
  document.querySelectorAll('button[aria-controls]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const id = btn.getAttribute('aria-controls');
      const el = document.getElementById(id);
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      if (!el) return;
      if (el.hasAttribute('hidden')) el.removeAttribute('hidden'); else el.setAttribute('hidden','');
    });
  });

  // ===== Circle Segment =====
  const circleEls = {
    mode: document.getElementById('circleMode'),
    r: document.getElementById('circleRadius'),
    h: document.getElementById('circleHeight'),
    angle: document.getElementById('circleAngle'),
    units: document.getElementById('angleUnits'),
    rows: {
      height: document.getElementById('heightRow'),
      angle: document.getElementById('angleRow')
    },
    out: {
      area: document.getElementById('circleArea'),
      arc: document.getElementById('circleArc'),
      chord: document.getElementById('circleChord'),
      perim: document.getElementById('circlePerimeter'),
      centroid: document.getElementById('circleCentroid'),
      thetaOut: document.getElementById('circleAngleOut')
    },
    errs: {
      r: document.getElementById('circleRadiusErr'),
      h: document.getElementById('circleHeightErr'),
      angle: document.getElementById('circleAngleErr')
    }
  };

  function validateCircle() {
    let ok = true;
    const r = parseFloat(circleEls.r.value);
    circleEls.errs.r.textContent = '';
    if (!(r > 0)) { circleEls.errs.r.textContent = 'Please enter a radius greater than 0.'; ok = false; }
    if (circleEls.mode.value === 'height') {
      const h = parseFloat(circleEls.h.value);
      circleEls.errs.h.textContent = '';
      if (!(h >= 0)) { circleEls.errs.h.textContent = 'Height must be 0 or greater.'; ok = false; }
      if (ok && h > 2*r) { circleEls.errs.h.textContent = 'Height cannot exceed 2r for a valid segment.'; ok = false; }
    } else {
      const ang = parseFloat(circleEls.angle.value);
      circleEls.errs.angle.textContent = '';
      if (!(ang > 0)) { circleEls.errs.angle.textContent = 'Angle must be greater than 0.'; ok = false; }
    }
    return ok;
  }

  function circleCompute(){
    if (!validateCircle()) { circleWriteOutputs(NaN,NaN,NaN,NaN,NaN,NaN); return; }
    const r = parseFloat(circleEls.r.value);
    let theta;
    if (circleEls.mode.value === 'height') {
      const h = parseFloat(circleEls.h.value);
      // Guard: h in [0, 2r]
      const ratio = (r - h)/r;
      // Clamp for numeric stability
      const clamped = Math.max(-1, Math.min(1, ratio));
      theta = 2 * Math.acos(clamped);
    } else {
      const raw = parseFloat(circleEls.angle.value);
      theta = (circleEls.units.value === 'deg') ? degToRad(raw) : raw;
    }
    // Core computations
    const area = 0.5 * r*r * (theta - Math.sin(theta));
    const chord = 2 * r * Math.sin(theta/2);
    const arc   = r * theta;
    const perim = chord + arc;
    const centroid = (theta !== 0 && (theta - Math.sin(theta)) !== 0)
      ? (4*r*Math.pow(Math.sin(theta/2),3)) / (3*(theta - Math.sin(theta))) : NaN;

    circleWriteOutputs(area, arc, chord, perim, centroid, theta);
  }

  function circleWriteOutputs(area, arc, chord, perim, centroid, theta){
    circleEls.out.area.textContent = fmt(area);
    circleEls.out.arc.textContent = fmt(arc);
    circleEls.out.chord.textContent = fmt(chord);
    circleEls.out.perim.textContent = fmt(perim);
    circleEls.out.centroid.textContent = fmt(centroid);
    circleEls.out.thetaOut.textContent = isFinite(theta) ? nf.format(theta) : '—';
  }

  // Mode switch UI
  circleEls.mode.addEventListener('input', ()=>{
    const m = circleEls.mode.value;
    if (m === 'height') {
      circleEls.rows.height.classList.remove('hidden');
      circleEls.rows.angle.classList.add('hidden');
    } else {
      circleEls.rows.height.classList.add('hidden');
      circleEls.rows.angle.classList.remove('hidden');
    }
    circleCompute();
  });

  // Inline validation on blur
  ['r','h','angle'].forEach(k=>{
    if (circleEls[k]) circleEls[k].addEventListener('blur', validateCircle);
    if (circleEls[k]) circleEls[k].addEventListener('input', circleCompute);
  });
  circleEls.units.addEventListener('input', circleCompute);

  // ===== Line Segment =====
  const lineEls = {
    x1: document.getElementById('x1'),
    y1: document.getElementById('y1'),
    x2: document.getElementById('x2'),
    y2: document.getElementById('y2'),
    out: {
      d: document.getElementById('lineLength'),
      m: document.getElementById('lineMidpoint'),
      s: document.getElementById('lineSlope')
    }
  };

  function lineCompute(){
    const x1 = parseFloat(lineEls.x1.value), y1 = parseFloat(lineEls.y1.value);
    const x2 = parseFloat(lineEls.x2.value), y2 = parseFloat(lineEls.y2.value);
    const dx = x2 - x1, dy = y2 - y1;
    const d = Math.hypot(dx, dy);
    const mx = (x1 + x2)/2, my = (y1 + y2)/2;
    const slope = (dx === 0) ? 'undefined' : nf.format(dy/dx);
    lineEls.out.d.textContent = fmt(d);
    lineEls.out.m.textContent = `(${fmt(mx)}, ${fmt(my)})`;
    lineEls.out.s.textContent = (slope === 'undefined') ? 'undefined' : slope;
  }

  [lineEls.x1, lineEls.y1, lineEls.x2, lineEls.y2].forEach(el=>{
    el.addEventListener('input', lineCompute);
    el.addEventListener('blur', lineCompute);
  });

  // ===== Woodturning Ring =====
  const woodEls = {
    N: document.getElementById('segmentsN'),
    Dout: document.getElementById('outerD'),
    Din: document.getElementById('innerD'),
    kerf: document.getElementById('kerf'),
    errs: {
      N: document.getElementById('segmentsNErr'),
      Dout: document.getElementById('outerDErr'),
      Din: document.getElementById('innerDErr'),
      kerf: document.getElementById('kerfErr')
    },
    out: {
      segAngle: document.getElementById('segAngle'),
      miter: document.getElementById('miterAngle'),
      chordOut: document.getElementById('outerChord'),
      chordIn: document.getElementById('innerChord'),
      width: document.getElementById('radialWidth'),
      outerPiece: document.getElementById('outerPiece')
    }
  };

  function validateWood(){
    let ok = true;
    woodEls.errs.N.textContent = woodEls.errs.Dout.textContent = woodEls.errs.Din.textContent = woodEls.errs.kerf.textContent = '';
    const N = parseInt(woodEls.N.value,10);
    const Dout = parseFloat(woodEls.Dout.value);
    const Din = parseFloat(woodEls.Din.value);
    const kerf = parseFloat(woodEls.kerf.value || '0');
    if (!(N >= 3)) { woodEls.errs.N.textContent = 'N must be an integer ≥ 3.'; ok = false; }
    if (!(Dout > 0)) { woodEls.errs.Dout.textContent = 'Outer diameter must be > 0.'; ok = false; }
    if (!(Din >= 0)) { woodEls.errs.Din.textContent = 'Inner diameter must be ≥ 0.'; ok = false; }
    if (ok && Din >= Dout) { woodEls.errs.Din.textContent = 'Inner diameter must be less than outer diameter.'; ok = false; }
    if (!(kerf >= 0)) { woodEls.errs.kerf.textContent = 'Kerf cannot be negative.'; ok = false; }
    return ok;
  }

  function woodCompute(){
    if (!validateWood()) {
      woodEls.out.segAngle.textContent = woodEls.out.miter.textContent = woodEls.out.chordOut.textContent =
      woodEls.out.chordIn.textContent = woodEls.out.width.textContent = woodEls.out.outerPiece.textContent = '—';
      return;
    }
    const N = parseInt(woodEls.N.value,10);
    const Dout = parseFloat(woodEls.Dout.value);
    const Din = parseFloat(woodEls.Din.value);
    const kerf = parseFloat(woodEls.kerf.value || '0');
    const Rout = Dout/2, Rin = Din/2;
    const angleDeg = 360 / N;
    const miterDeg = 180 / N;
    const chordOut = 2 * Rout * Math.sin(Math.PI / N);
    const chordIn  = 2 * Rin  * Math.sin(Math.PI / N);
    const radialW  = Rout - Rin;
    // Approx outer piece length adjusted for two cuts per piece
    const outerPiece = Math.max(0, chordOut - 2*kerf);

    woodEls.out.segAngle.textContent = `${n2.format(angleDeg)}°`;
    woodEls.out.miter.textContent    = `${n2.format(miterDeg)}°`;
    woodEls.out.chordOut.textContent = fmt(chordOut);
    woodEls.out.chordIn.textContent  = fmt(chordIn);
    woodEls.out.width.textContent    = fmt(radialW);
    woodEls.out.outerPiece.textContent = fmt(outerPiece);
  }

  [woodEls.N, woodEls.Dout, woodEls.Din, woodEls.kerf].forEach(el=>{
    el.addEventListener('blur', validateWood);
    el.addEventListener('input', woodCompute);
  });

  // ===== SMS Segment Counter =====
  // GSM-7 default alphabet and extension set (common subset)
  const GSM7_BASIC =
    "@£$¥èéùìòÇ\nØø\rÅåΔ_ΦΓΛΩΠΨΣΘΞ \u0021\"\u0023¤%&'()*+,-./0123456789:;<=>?¡ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÑÜ§¿abcdefghijklmnopqrstuvwxyzäöñüà";
  const GSM7_EXT = "^{}\\[~]|€"; // counted as two with escape

  function isGSM7Char(ch){
    return GSM7_BASIC.includes(ch) || GSM7_EXT.includes(ch);
  }

  function smsAnalyze(text){
    // Detect encoding
    let allGSM = true;
    for (const ch of text) { if (!isGSM7Char(ch)) { allGSM = false; break; } }

    const encoding = allGSM ? 'GSM-7' : 'UCS-2';

    if (encoding === 'GSM-7') {
      let count = 0;
      for (const ch of text) {
        count += GSM7_EXT.includes(ch) ? 2 : 1;
      }
      const single = 160, concat = 153;
      const perSeg = (count <= single) ? single : concat;
      const segments = Math.ceil(count / perSeg) || 1;
      const usedInLast = count - (perSeg * (segments - 1));
      return { encoding, chars: count, segments, perSeg, lastUsed: usedInLast };
    } else {
      const count = Array.from(text).length; // UCS-2 units
      const single = 70, concat = 67;
      const perSeg = (count <= single) ? single : concat;
      const segments = Math.ceil(count / perSeg) || 1;
      const usedInLast = count - (perSeg * (segments - 1));
      return { encoding, chars: count, segments, perSeg, lastUsed: usedInLast };
    }
  }

  const smsEls = {
    ta: document.getElementById('smsText'),
    out: {
      enc: document.getElementById('smsEncoding'),
      chars: document.getElementById('smsChars'),
      segs: document.getElementById('smsSegments'),
      limit: document.getElementById('smsLimit'),
      last: document.getElementById('smsLast')
    }
  };

  function smsCompute(){
    const t = smsEls.ta.value || "";
    const r = smsAnalyze(t);
    smsEls.out.enc.textContent = r.encoding;
    smsEls.out.chars.textContent = n2.format(r.chars);
    smsEls.out.segs.textContent = n2.format(r.segments);
    smsEls.out.limit.textContent = n2.format(r.perSeg);
    smsEls.out.last.textContent = n2.format(r.lastUsed);
  }

  smsEls.ta.addEventListener('input', smsCompute);
  smsEls.ta.addEventListener('blur', smsCompute);

  // Initial computes
  circleCompute();
  lineCompute();
  woodCompute();
  smsCompute();

  // Recompute circle when switching mode
  document.getElementById('circleMode').addEventListener('change', circleCompute);

  // Show/hide angle/height rows on load
  (function syncCircleRows(){
    const m = circleEls.mode.value;
    if (m === 'height') {
      circleEls.rows.height.classList.remove('hidden');
      circleEls.rows.angle.classList.add('hidden');
    } else {
      circleEls.rows.height.classList.add('hidden');
      circleEls.rows.angle.classList.remove('hidden');
    }
  })();
  </script>
  <script defer="True" src="/assets/js/script_menu.js">
  </script>
  <script defer="True" src="/assets/js/script_faq.js">
  </script>
  <script defer="True" src="search.js">
  </script>
 </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/reactor-design" />
    <title>Reactor Design Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Reactor Design Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Reactor Design Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Reactor Design Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/reactor-design" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Reactor Design Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Reactor Design Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Engineering Calculators", "item": "https://calcdomain.com/categories/engineering"}, {"@type": "ListItem", "position": 3, "name": "Structural Engineering Calculators", "item": "https://calcdomain.com/subcategories/structural-engineering"}, {"@type": "ListItem", "position": 4, "name": "Reactor Design Calculator (CSTR &amp; PFR)", "item": "https://calcdomain.com/reactor-design"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/engineering" class="text-blue-600 hover:underline">Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/structural-engineering" class="text-blue-600 hover:underline">Structural Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Reactor Design Calculator (CSTR &amp;amp; PFR)</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Reactor Design Calculator (CSTR &amp; PFR)
              </h1>
              <p class="text-gray-600">
                Size ideal isothermal reactors for a single irreversible
                reaction. Compute conversion, reactor volume, or space time for
                CSTR and PFR with first‑order or n‑th order kinetics.
              </p>
            </header>

            <!-- Tabs -->
            <div class="mb-4 flex flex-wrap gap-2">
              <button
                id="tab-cstr"
                class="px-4 py-2 border rounded-full text-sm font-medium tab-active"
                type="button"
              >
                CSTR
              </button>
              <button
                id="tab-pfr"
                class="px-4 py-2 border rounded-full text-sm font-medium"
                type="button"
              >
                PFR
              </button>
            </div>

            <!-- Calculator Panels -->
            <section id="panel-cstr">
              <h2 class="text-xl font-semibold mb-3">CSTR Design</h2>
              <p class="text-sm text-gray-600 mb-4">
                Ideal continuous stirred‑tank reactor, isothermal, single
                irreversible reaction \(A \rightarrow \text{products}\).
              </p>

              <form id="cstr-form" class="space-y-4">
                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >What do you want to calculate?</label
                    >
                    <select
                      id="cstr-mode"
                      class="w-full border rounded-md px-3 py-2"
                    >
                      <option value="V">Reactor volume V</option>
                      <option value="X">Conversion X</option>
                      <option value="tau">Space time τ</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Reaction order n</label
                    >
                    <select
                      id="cstr-order"
                      class="w-full border rounded-md px-3 py-2"
                    >
                      <option value="1">First order (n = 1)</option>
                      <option value="0">Zero order (n = 0)</option>
                      <option value="2">Second order (n = 2)</option>
                      <option value="custom">Custom n</option>
                    </select>
                  </div>
                </div>

                <div id="cstr-custom-order-wrapper" class="hidden">
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Custom reaction order n</label
                  >
                  <input
                    type="number"
                    step="0.01"
                    id="cstr-custom-order"
                    class="w-full border rounded-md px-3 py-2"
                    value="1.5"
                  />
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Rate constant k</label
                    >
                    <div class="flex">
                      <input
                        type="number"
                        step="any"
                        id="cstr-k"
                        class="flex-1 border rounded-l-md px-3 py-2"
                        value="0.5"
                      />
                      <select
                        id="cstr-k-units"
                        class="border border-l-0 rounded-r-md px-2 text-xs bg-gray-50"
                      >
                        <option value="1">1/s (first order)</option>
                        <option value="0">mol/(L·s) (zero order)</option>
                        <option value="2">L/(mol·s) (second order)</option>
                      </select>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">
                      Units must match reaction order n.
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Feed concentration C<sub>A0</sub> (mol/L)</label
                    >
                    <input
                      type="number"
                      step="any"
                      id="cstr-Ca0"
                      class="w-full border rounded-md px-3 py-2"
                      value="1"
                    />
                  </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Molar feed rate F<sub>A0</sub> (mol/s)</label
                    >
                    <input
                      type="number"
                      step="any"
                      id="cstr-Fa0"
                      class="w-full border rounded-md px-3 py-2"
                      value="1"
                    />
                    <p class="text-xs text-gray-500 mt-1">
                      For liquids, F<sub>A0</sub> = v<sub>0</sub>C<sub>A0</sub>.
                    </p>
                  </div>
                  <div id="cstr-X-input-wrapper">
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Desired conversion X (0–1)</label
                    >
                    <input
                      type="number"
                      step="any"
                      id="cstr-X"
                      class="w-full border rounded-md px-3 py-2"
                      value="0.8"
                      min="0"
                      max="0.999"
                    />
                  </div>
                </div>

                <div id="cstr-V-input-wrapper" class="hidden">
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Reactor volume V (L)</label
                  >
                  <input
                    type="number"
                    step="any"
                    id="cstr-V"
                    class="w-full border rounded-md px-3 py-2"
                    value="10"
                  />
                </div>

                <div id="cstr-tau-input-wrapper" class="hidden">
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Space time τ (s)</label
                  >
                  <input
                    type="number"
                    step="any"
                    id="cstr-tau"
                    class="w-full border rounded-md px-3 py-2"
                    value="10"
                  />
                </div>

                <div class="flex flex-wrap gap-3 items-center pt-2">
                  <button
                    type="button"
                    id="cstr-calc"
                    class="px-4 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700"
                  >
                    Calculate
                  </button>
                  <button
                    type="button"
                    id="cstr-reset"
                    class="px-3 py-2 border rounded-md text-sm text-gray-700 hover:bg-gray-50"
                  >
                    Reset
                  </button>
                  <span id="cstr-error" class="text-sm text-red-600"></span>
                </div>
              </form>

              <div id="cstr-results" class="mt-5 hidden">
                <h3 class="text-lg font-semibold mb-2">CSTR Results</h3>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                  <div class="bg-blue-50 border border-blue-100 rounded-md p-3">
                    <p class="font-medium text-blue-900 mb-1">
                      Reactor volume V
                    </p>
                    <p><span id="cstr-res-V" class="font-semibold"></span> L</p>
                  </div>
                  <div class="bg-blue-50 border border-blue-100 rounded-md p-3">
                    <p class="font-medium text-blue-900 mb-1">Conversion X</p>
                    <p><span id="cstr-res-X" class="font-semibold"></span></p>
                  </div>
                  <div class="bg-blue-50 border border-blue-100 rounded-md p-3">
                    <p class="font-medium text-blue-900 mb-1">Space time τ</p>
                    <p>
                      <span id="cstr-res-tau" class="font-semibold"></span> s
                    </p>
                  </div>
                  <div class="bg-blue-50 border border-blue-100 rounded-md p-3">
                    <p class="font-medium text-blue-900 mb-1">
                      Outlet concentration C<sub>A</sub>
                    </p>
                    <p>
                      <span id="cstr-res-Ca" class="font-semibold"></span> mol/L
                    </p>
                  </div>
                </div>
              </div>
            </section>

            <section id="panel-pfr" class="hidden mt-6">
              <h2 class="text-xl font-semibold mb-3">PFR Design</h2>
              <p class="text-sm text-gray-600 mb-4">
                Ideal plug flow reactor, isothermal, single irreversible
                reaction \(A \rightarrow \text{products}\).
              </p>

              <form id="pfr-form" class="space-y-4">
                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >What do you want to calculate?</label
                    >
                    <select
                      id="pfr-mode"
                      class="w-full border rounded-md px-3 py-2"
                    >
                      <option value="V">Reactor volume V</option>
                      <option value="X">Conversion X</option>
                      <option value="tau">Space time τ</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Reaction order n</label
                    >
                    <select
                      id="pfr-order"
                      class="w-full border rounded-md px-3 py-2"
                    >
                      <option value="1">First order (n = 1)</option>
                      <option value="0">Zero order (n = 0)</option>
                      <option value="2">Second order (n = 2)</option>
                      <option value="custom">Custom n</option>
                    </select>
                  </div>
                </div>

                <div id="pfr-custom-order-wrapper" class="hidden">
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Custom reaction order n</label
                  >
                  <input
                    type="number"
                    step="0.01"
                    id="pfr-custom-order"
                    class="w-full border rounded-md px-3 py-2"
                    value="1.5"
                  />
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Rate constant k</label
                    >
                    <div class="flex">
                      <input
                        type="number"
                        step="any"
                        id="pfr-k"
                        class="flex-1 border rounded-l-md px-3 py-2"
                        value="0.5"
                      />
                      <select
                        id="pfr-k-units"
                        class="border border-l-0 rounded-r-md px-2 text-xs bg-gray-50"
                      >
                        <option value="1">1/s (first order)</option>
                        <option value="0">mol/(L·s) (zero order)</option>
                        <option value="2">L/(mol·s) (second order)</option>
                      </select>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">
                      Units must match reaction order n.
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Feed concentration C<sub>A0</sub> (mol/L)</label
                    >
                    <input
                      type="number"
                      step="any"
                      id="pfr-Ca0"
                      class="w-full border rounded-md px-3 py-2"
                      value="1"
                    />
                  </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Molar feed rate F<sub>A0</sub> (mol/s)</label
                    >
                    <input
                      type="number"
                      step="any"
                      id="pfr-Fa0"
                      class="w-full border rounded-md px-3 py-2"
                      value="1"
                    />
                  </div>
                  <div id="pfr-X-input-wrapper">
                    <label class="block text-sm font-medium text-gray-700 mb-1"
                      >Desired conversion X (0–1)</label
                    >
                    <input
                      type="number"
                      step="any"
                      id="pfr-X"
                      class="w-full border rounded-md px-3 py-2"
                      value="0.8"
                      min="0"
                      max="0.999"
                    />
                  </div>
                </div>

                <div id="pfr-V-input-wrapper" class="hidden">
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Reactor volume V (L)</label
                  >
                  <input
                    type="number"
                    step="any"
                    id="pfr-V"
                    class="w-full border rounded-md px-3 py-2"
                    value="10"
                  />
                </div>

                <div id="pfr-tau-input-wrapper" class="hidden">
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Space time τ (s)</label
                  >
                  <input
                    type="number"
                    step="any"
                    id="pfr-tau"
                    class="w-full border rounded-md px-3 py-2"
                    value="10"
                  />
                </div>

                <div class="flex flex-wrap gap-3 items-center pt-2">
                  <button
                    type="button"
                    id="pfr-calc"
                    class="px-4 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700"
                  >
                    Calculate
                  </button>
                  <button
                    type="button"
                    id="pfr-reset"
                    class="px-3 py-2 border rounded-md text-sm text-gray-700 hover:bg-gray-50"
                  >
                    Reset
                  </button>
                  <span id="pfr-error" class="text-sm text-red-600"></span>
                </div>
              </form>

              <div id="pfr-results" class="mt-5 hidden">
                <h3 class="text-lg font-semibold mb-2">PFR Results</h3>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                  <div
                    class="bg-green-50 border border-green-100 rounded-md p-3"
                  >
                    <p class="font-medium text-green-900 mb-1">
                      Reactor volume V
                    </p>
                    <p><span id="pfr-res-V" class="font-semibold"></span> L</p>
                  </div>
                  <div
                    class="bg-green-50 border border-green-100 rounded-md p-3"
                  >
                    <p class="font-medium text-green-900 mb-1">Conversion X</p>
                    <p><span id="pfr-res-X" class="font-semibold"></span></p>
                  </div>
                  <div
                    class="bg-green-50 border border-green-100 rounded-md p-3"
                  >
                    <p class="font-medium text-green-900 mb-1">Space time τ</p>
                    <p>
                      <span id="pfr-res-tau" class="font-semibold"></span> s
                    </p>
                  </div>
                  <div
                    class="bg-green-50 border border-green-100 rounded-md p-3"
                  >
                    <p class="font-medium text-green-900 mb-1">
                      Outlet concentration C<sub>A</sub>
                    </p>
                    <p>
                      <span id="pfr-res-Ca" class="font-semibold"></span> mol/L
                    </p>
                  </div>
                </div>
              </div>
            </section>

            <!-- Theory & Explanations -->
            <section class="prose mt-10">
              <h2>How this reactor design calculator works</h2>
              <p>
                This tool implements the classical design equations from
                chemical reaction engineering for ideal isothermal reactors with
                a single irreversible reaction \(A \rightarrow \text{products}\)
                and rate law \(r_A = -k C_A^n\).
              </p>
              <p>
                It assumes constant density and volumetric flow (typical for
                liquid‑phase systems), no mass transfer limitations, and
                steady‑state operation.
              </p>

              <h3>CSTR design equations</h3>
              <p>
                For a continuous stirred‑tank reactor (CSTR), the concentration
                inside the reactor equals the outlet concentration. The mole
                balance at steady state is:
              </p>
              <div class="formula-box">
                \[ F_{A0} - F_A + r_A V = 0 \] \[ F_A = F_{A0}(1 - X), \quad C_A
                = C_{A0}(1 - X) \]
              </div>
              <p>Substituting and solving for the reactor volume:</p>
              <div class="formula-box">
                \[ V = \frac{F_{A0} X}{-r_A} = \frac{F_{A0} X}{k C_A^n} =
                \frac{F_{A0} X}{k \left(C_{A0}(1 - X)\right)^n} \]
              </div>
              <p>
                The space time (or residence time) is \(\tau = V / v_0 = V
                C_{A0} / F_{A0}\) when density is constant.
              </p>

              <h3>PFR design equations</h3>
              <p>
                For a plug flow reactor (PFR), concentration varies along the
                reactor length. The differential mole balance is:
              </p>
              <div class="formula-box">
                \[ dF_A = r_A dV \quad\Rightarrow\quad F_{A0} dX = -r_A dV \] \[
                V = F_{A0} \int_0^X \frac{dX}{-r_A} \]
              </div>
              <p>
                For a first‑order reaction (\(n = 1\)) with constant volumetric
                flow:
              </p>
              <div class="formula-box">
                \[ r_A = -k C_A = -k C_{A0}(1 - X) \] \[ V = \frac{F_{A0}}{k
                C_{A0}} \int_0^X \frac{dX}{1 - X} = \frac{F_{A0}}{k C_{A0}}
                \ln\left(\frac{1}{1 - X}\right) \]
              </div>
              <p>
                The corresponding space time is \(\tau = V / v_0 = V C_{A0} /
                F_{A0}\).
              </p>

              <h3>Reaction order and rate constant units</h3>
              <p>
                The rate law is \(r_A = -k C_A^n\). The units of \(k\) depend on
                the reaction order:
              </p>
              <ul>
                <li>
                  <strong>Zero order (n = 0):</strong> \(r_A\) in mol/(L·s) ⇒
                  \(k\) in mol/(L·s)
                </li>
                <li><strong>First order (n = 1):</strong> \(k\) in 1/s</li>
                <li>
                  <strong>Second order (n = 2):</strong> \(k\) in L/(mol·s)
                </li>
              </ul>
              <p>
                When you choose a reaction order in the calculator, make sure
                the units of \(k\) are consistent with that order.
              </p>

              <h3>When to use CSTR vs PFR</h3>
              <ul>
                <li>
                  <strong>CSTR:</strong> good mixing, uniform temperature and
                  concentration, easier temperature control.
                </li>
                <li>
                  <strong>PFR:</strong> higher conversion per unit volume for
                  most reactions, especially first‑order and higher.
                </li>
              </ul>
              <p>
                For a given set of kinetics and feed conditions, you can use
                this calculator to compare the required volume and space time
                for CSTR and PFR at the same target conversion.
              </p>

              <h2>Limitations and good practice</h2>
              <ul>
                <li>
                  Single reaction only; side reactions and parallel/series
                  networks are not modeled.
                </li>
                <li>
                  Isothermal operation; no energy balance or temperature
                  gradients are included.
                </li>
                <li>
                  Ideal mixing (CSTR) and ideal plug flow (PFR); no back‑mixing
                  or dispersion.
                </li>
                <li>No catalyst deactivation or mass‑transfer limitations.</li>
              </ul>
              <p>
                Use the results as a first sizing estimate or for homework and
                conceptual design. Detailed industrial design should always
                include full mass and energy balances, safety factors, and
                validation with pilot data where possible.
              </p>
            </section>

            <!-- FAQ -->
            <section class="mt-10">
              <h2 class="text-xl font-semibold mb-3">Reactor design FAQ</h2>
              <div class="space-y-3" id="faq-container">
                <div class="border rounded-md">
                  <button
                    class="w-full text-left px-4 py-3 flex justify-between items-center faq-question"
                  >
                    <span class="font-medium"
                      >What does this reactor design calculator do?</span
                    >
                    <span class="text-gray-500">+</span>
                  </button>
                  <div
                    class="px-4 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    It sizes ideal isothermal reactors for a single irreversible
                    reaction. You can choose CSTR or PFR and compute reactor
                    volume, conversion, or space time from basic kinetic data
                    (rate constant, order, feed concentration, and molar flow
                    rate).
                  </div>
                </div>
                <div class="border rounded-md">
                  <button
                    class="w-full text-left px-4 py-3 flex justify-between items-center faq-question"
                  >
                    <span class="font-medium"
                      >Which reactions can I model with this tool?</span
                    >
                    <span class="text-gray-500">+</span>
                  </button>
                  <div
                    class="px-4 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    The calculator supports single, irreversible reactions that
                    can be described by a power‑law rate expression \(r_A = -k
                    C_A^n\). This includes zero‑order, first‑order,
                    second‑order, and non‑integer orders. Complex mechanisms can
                    sometimes be approximated by an overall rate constant and
                    order fitted from experimental data.
                  </div>
                </div>
                <div class="border rounded-md">
                  <button
                    class="w-full text-left px-4 py-3 flex justify-between items-center faq-question"
                  >
                    <span class="font-medium"
                      >How do I get the rate constant k and reaction order
                      n?</span
                    >
                    <span class="text-gray-500">+</span>
                  </button>
                  <div
                    class="px-4 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    Typically, you obtain k and n from laboratory kinetic
                    experiments (batch reactor data) by fitting the rate law to
                    concentration–time measurements. Many textbooks and
                    datasheets also report k and n for common reactions. Make
                    sure you use k at the same temperature and with units
                    consistent with the chosen reaction order.
                  </div>
                </div>
                <div class="border rounded-md">
                  <button
                    class="w-full text-left px-4 py-3 flex justify-between items-center faq-question"
                  >
                    <span class="font-medium"
                      >Is this calculator suitable for nuclear reactor
                      design?</span
                    >
                    <span class="text-gray-500">+</span>
                  </button>
                  <div
                    class="px-4 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    No. Nuclear reactors are governed by neutron transport,
                    reactivity feedback, and complex thermal‑hydraulic behavior.
                    This calculator is only for chemical reaction engineering
                    (CSTR and PFR sizing) using classical rate‑law kinetics.
                  </div>
                </div>
                <div class="border rounded-md">
                  <button
                    class="w-full text-left px-4 py-3 flex justify-between items-center faq-question"
                  >
                    <span class="font-medium"
                      >Why do CSTR and PFR give different volumes for the same
                      conversion?</span
                    >
                    <span class="text-gray-500">+</span>
                  </button>
                  <div
                    class="px-4 pb-3 hidden faq-answer text-sm text-gray-700"
                  >
                    In a CSTR, the entire reactor is at the outlet
                    concentration, so the driving force for reaction is
                    relatively low. In a PFR, the concentration is highest at
                    the inlet and decreases along the length, which usually
                    leads to higher average reaction rates and smaller required
                    volume for the same conversion (for most reactions with rate
                    increasing with concentration).
                  </div>
                </div>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Reactor, Design.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Engineering Calculators
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/flash-distillation"
                  class="text-blue-600 hover:underline"
                  >Flash Distillation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/batch-reactor-design"
                  class="text-blue-600 hover:underline"
                  >Batch Reactor Design</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/heat-transfer"
                  class="text-blue-600 hover:underline"
                  >Heat Transfer</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bernoulli-equation"
                  class="text-blue-600 hover:underline"
                  >Bernoulli's Equation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/reynolds-number"
                  class="text-blue-600 hover:underline"
                  >Reynolds Number</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/hazen-williams"
                  class="text-blue-600 hover:underline"
                  >Pipe Flow (Hazen–Williams)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/darcy-weisbach"
                  class="text-blue-600 hover:underline"
                  >Pipe Flow (Darcy–Weisbach)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/heat-loss"
                  class="text-blue-600 hover:underline"
                  >Heat Loss Calculator</a
                >
              </li>
            </ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Engineering Categories</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/civil"
                  class="text-blue-600 hover:underline"
                  >Civil Engineering</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mechanical-engineering"
                  class="text-blue-600 hover:underline"
                  >Mechanical Engineering</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/electrical"
                  class="text-blue-600 hover:underline"
                  >Electrical Engineering</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/categories/engineering"
                  class="text-blue-600 hover:underline"
                  >All Engineering Calculators</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Tab switching
      const tabCSTR = document.getElementById("tab-cstr");
      const tabPFR = document.getElementById("tab-pfr");
      const panelCSTR = document.getElementById("panel-cstr");
      const panelPFR = document.getElementById("panel-pfr");

      function setTab(active) {
        if (active === "cstr") {
          tabCSTR.classList.add("tab-active");
          tabPFR.classList.remove("tab-active");
          panelCSTR.classList.remove("hidden");
          panelPFR.classList.add("hidden");
        } else {
          tabPFR.classList.add("tab-active");
          tabCSTR.classList.remove("tab-active");
          panelPFR.classList.remove("hidden");
          panelCSTR.classList.add("hidden");
        }
      }

      tabCSTR.addEventListener("click", () => setTab("cstr"));
      tabPFR.addEventListener("click", () => setTab("pfr"));

      // Helper: parse number safely
      function getNumber(id) {
        const v = parseFloat(document.getElementById(id).value);
        return isNaN(v) ? NaN : v;
      }

      // CSTR logic
      const cstrMode = document.getElementById("cstr-mode");
      const cstrOrder = document.getElementById("cstr-order");
      const cstrCustomOrderWrapper = document.getElementById(
        "cstr-custom-order-wrapper"
      );
      const cstrXInputWrapper = document.getElementById("cstr-X-input-wrapper");
      const cstrVInputWrapper = document.getElementById("cstr-V-input-wrapper");
      const cstrTauInputWrapper = document.getElementById(
        "cstr-tau-input-wrapper"
      );
      const cstrError = document.getElementById("cstr-error");
      const cstrResults = document.getElementById("cstr-results");

      cstrOrder.addEventListener("change", () => {
        cstrCustomOrderWrapper.classList.toggle(
          "hidden",
          cstrOrder.value !== "custom"
        );
      });

      cstrMode.addEventListener("change", () => {
        const mode = cstrMode.value;
        cstrXInputWrapper.classList.toggle("hidden", mode === "X");
        cstrVInputWrapper.classList.toggle("hidden", mode === "V");
        cstrTauInputWrapper.classList.toggle("hidden", mode === "tau");
      });

      document.getElementById("cstr-reset").addEventListener("click", () => {
        document.getElementById("cstr-k").value = 0.5;
        document.getElementById("cstr-Ca0").value = 1;
        document.getElementById("cstr-Fa0").value = 1;
        document.getElementById("cstr-X").value = 0.8;
        document.getElementById("cstr-V").value = 10;
        document.getElementById("cstr-tau").value = 10;
        document.getElementById("cstr-custom-order").value = 1.5;
        cstrOrder.value = "1";
        cstrMode.value = "V";
        cstrCustomOrderWrapper.classList.add("hidden");
        cstrXInputWrapper.classList.remove("hidden");
        cstrVInputWrapper.classList.add("hidden");
        cstrTauInputWrapper.classList.add("hidden");
        cstrError.textContent = "";
        cstrResults.classList.add("hidden");
      });

      document.getElementById("cstr-calc").addEventListener("click", () => {
        cstrError.textContent = "";
        cstrResults.classList.add("hidden");

        const mode = cstrMode.value;
        let n;
        if (cstrOrder.value === "custom") {
          n = getNumber("cstr-custom-order");
        } else {
          n = parseFloat(cstrOrder.value);
        }

        const k = getNumber("cstr-k");
        const Ca0 = getNumber("cstr-Ca0");
        const Fa0 = getNumber("cstr-Fa0");

        if ([n, k, Ca0, Fa0].some((v) => !isFinite(v) || v <= 0)) {
          cstrError.textContent =
            "Enter positive values for k, C_A0, F_A0, and n.";
          return;
        }

        let X, V, tau;

        try {
          if (mode === "V") {
            X = getNumber("cstr-X");
            if (!isFinite(X) || X <= 0 || X >= 1) {
              cstrError.textContent =
                "Conversion X must be between 0 and 1 (non‑inclusive).";
              return;
            }
            const Ca = Ca0 * (1 - X);
            const rA = -k * Math.pow(Ca, n);
            if (rA >= 0) throw new Error();
            V = (Fa0 * X) / -rA;
            tau = (V * Ca0) / Fa0;
          } else if (mode === "X") {
            V = getNumber("cstr-V");
            if (!isFinite(V) || V <= 0) {
              cstrError.textContent = "Reactor volume V must be positive.";
              return;
            }
            const v0 = Fa0 / Ca0;
            tau = V / v0;
            // Solve for X numerically using simple iteration (fixed point)
            let Xguess = 0.5;
            for (let i = 0; i < 100; i++) {
              const Ca = Ca0 * (1 - Xguess);
              const rA = -k * Math.pow(Ca, n);
              const Xnew = (-rA * V) / Fa0;
              if (!isFinite(Xnew)) break;
              if (Math.abs(Xnew - Xguess) < 1e-6) {
                Xguess = Xnew;
                break;
              }
              Xguess = Math.max(0, Math.min(0.9999, Xnew));
            }
            X = Xguess;
          } else if (mode === "tau") {
            tau = getNumber("cstr-tau");
            if (!isFinite(tau) || tau <= 0) {
              cstrError.textContent = "Space time τ must be positive.";
              return;
            }
            const v0 = Fa0 / Ca0;
            V = tau * v0;
            // Solve for X numerically as above
            let Xguess = 0.5;
            for (let i = 0; i < 100; i++) {
              const Ca = Ca0 * (1 - Xguess);
              const rA = -k * Math.pow(Ca, n);
              const Xnew = (-rA * V) / Fa0;
              if (!isFinite(Xnew)) break;
              if (Math.abs(Xnew - Xguess) < 1e-6) {
                Xguess = Xnew;
                break;
              }
              Xguess = Math.max(0, Math.min(0.9999, Xnew));
            }
            X = Xguess;
          }
        } catch (e) {
          cstrError.textContent =
            "Unable to solve CSTR design with the given inputs.";
          return;
        }

        const Ca = Ca0 * (1 - X);

        document.getElementById("cstr-res-V").textContent = V.toExponential(3);
        document.getElementById("cstr-res-X").textContent = X.toFixed(4);
        document.getElementById("cstr-res-tau").textContent =
          tau.toExponential(3);
        document.getElementById("cstr-res-Ca").textContent =
          Ca.toExponential(3);
        cstrResults.classList.remove("hidden");
      });

      // PFR logic
      const pfrMode = document.getElementById("pfr-mode");
      const pfrOrder = document.getElementById("pfr-order");
      const pfrCustomOrderWrapper = document.getElementById(
        "pfr-custom-order-wrapper"
      );
      const pfrXInputWrapper = document.getElementById("pfr-X-input-wrapper");
      const pfrVInputWrapper = document.getElementById("pfr-V-input-wrapper");
      const pfrTauInputWrapper = document.getElementById(
        "pfr-tau-input-wrapper"
      );
      const pfrError = document.getElementById("pfr-error");
      const pfrResults = document.getElementById("pfr-results");

      pfrOrder.addEventListener("change", () => {
        pfrCustomOrderWrapper.classList.toggle(
          "hidden",
          pfrOrder.value !== "custom"
        );
      });

      pfrMode.addEventListener("change", () => {
        const mode = pfrMode.value;
        pfrXInputWrapper.classList.toggle("hidden", mode === "X");
        pfrVInputWrapper.classList.toggle("hidden", mode === "V");
        pfrTauInputWrapper.classList.toggle("hidden", mode === "tau");
      });

      document.getElementById("pfr-reset").addEventListener("click", () => {
        document.getElementById("pfr-k").value = 0.5;
        document.getElementById("pfr-Ca0").value = 1;
        document.getElementById("pfr-Fa0").value = 1;
        document.getElementById("pfr-X").value = 0.8;
        document.getElementById("pfr-V").value = 10;
        document.getElementById("pfr-tau").value = 10;
        document.getElementById("pfr-custom-order").value = 1.5;
        pfrOrder.value = "1";
        pfrMode.value = "V";
        pfrCustomOrderWrapper.classList.add("hidden");
        pfrXInputWrapper.classList.remove("hidden");
        pfrVInputWrapper.classList.add("hidden");
        pfrTauInputWrapper.classList.add("hidden");
        pfrError.textContent = "";
        pfrResults.classList.add("hidden");
      });

      function pfrVolumeFromX(Fa0, Ca0, k, n, X) {
        if (n === 1) {
          // First order closed form
          return (Fa0 / (k * Ca0)) * Math.log(1 / (1 - X));
        } else if (n === 0) {
          // Zero order: rA = -k
          return (Fa0 * X) / k;
        } else if (n === 2) {
          // Second order: rA = -k Ca^2 = -k Ca0^2 (1 - X)^2
          return (Fa0 / (k * Ca0 * Ca0)) * (X / (1 - X));
        } else {
          // General n: integrate numerically V = Fa0 ∫ dX / (k Ca0^n (1-X)^n)
          const steps = 1000;
          let V = 0;
          const dX = X / steps;
          for (let i = 0; i < steps; i++) {
            const Xi = (i + 0.5) * dX;
            const denom = k * Math.pow(Ca0 * (1 - Xi), n);
            if (!isFinite(denom) || denom <= 0) continue;
            V += (Fa0 / denom) * dX;
          }
          return V;
        }
      }

      document.getElementById("pfr-calc").addEventListener("click", () => {
        pfrError.textContent = "";
        pfrResults.classList.add("hidden");

        const mode = pfrMode.value;
        let n;
        if (pfrOrder.value === "custom") {
          n = getNumber("pfr-custom-order");
        } else {
          n = parseFloat(pfrOrder.value);
        }

        const k = getNumber("pfr-k");
        const Ca0 = getNumber("pfr-Ca0");
        const Fa0 = getNumber("pfr-Fa0");

        if ([n, k, Ca0, Fa0].some((v) => !isFinite(v) || v <= 0)) {
          pfrError.textContent =
            "Enter positive values for k, C_A0, F_A0, and n.";
          return;
        }

        let X, V, tau;

        try {
          if (mode === "V") {
            X = getNumber("pfr-X");
            if (!isFinite(X) || X <= 0 || X >= 1) {
              pfrError.textContent =
                "Conversion X must be between 0 and 1 (non‑inclusive).";
              return;
            }
            V = pfrVolumeFromX(Fa0, Ca0, k, n, X);
            const v0 = Fa0 / Ca0;
            tau = V / v0;
          } else if (mode === "X") {
            V = getNumber("pfr-V");
            if (!isFinite(V) || V <= 0) {
              pfrError.textContent = "Reactor volume V must be positive.";
              return;
            }
            const v0 = Fa0 / Ca0;
            tau = V / v0;
            // Solve for X numerically by bisection on V(X) - V = 0
            let low = 1e-6,
              high = 0.9999;
            for (let i = 0; i < 60; i++) {
              const mid = 0.5 * (low + high);
              const Vmid = pfrVolumeFromX(Fa0, Ca0, k, n, mid);
              if (!isFinite(Vmid)) break;
              if (Vmid > V) {
                high = mid;
              } else {
                low = mid;
              }
            }
            X = 0.5 * (low + high);
          } else if (mode === "tau") {
            tau = getNumber("pfr-tau");
            if (!isFinite(tau) || tau <= 0) {
              pfrError.textContent = "Space time τ must be positive.";
              return;
            }
            const v0 = Fa0 / Ca0;
            V = tau * v0;
            // Solve for X as above
            let low = 1e-6,
              high = 0.9999;
            for (let i = 0; i < 60; i++) {
              const mid = 0.5 * (low + high);
              const Vmid = pfrVolumeFromX(Fa0, Ca0, k, n, mid);
              if (!isFinite(Vmid)) break;
              if (Vmid > V) {
                high = mid;
              } else {
                low = mid;
              }
            }
            X = 0.5 * (low + high);
          }
        } catch (e) {
          pfrError.textContent =
            "Unable to solve PFR design with the given inputs.";
          return;
        }

        const Ca = Ca0 * (1 - X);

        document.getElementById("pfr-res-V").textContent = V.toExponential(3);
        document.getElementById("pfr-res-X").textContent = X.toFixed(4);
        document.getElementById("pfr-res-tau").textContent =
          tau.toExponential(3);
        document.getElementById("pfr-res-Ca").textContent = Ca.toExponential(3);
        pfrResults.classList.remove("hidden");
      });

      document
        .querySelectorAll("#faq-container .faq-question")
        .forEach((btn) => {
          btn.addEventListener("click", () => {
            const answer = btn.parentElement.querySelector(".faq-answer");
            const icon = btn.querySelector("span:last-child");
            const isHidden = answer.classList.contains("hidden");
            document
              .querySelectorAll("#faq-container .faq-answer")
              .forEach((a) => a.classList.add("hidden"));
            document
              .querySelectorAll("#faq-container .faq-question span:last-child")
              .forEach((i) => (i.textContent = "+"));
            if (isHidden) {
              answer.classList.remove("hidden");
              icon.textContent = "−";
            }
          });
        });

      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

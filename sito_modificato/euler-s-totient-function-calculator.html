<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Euler’s Totient Function Calculator – φ(n), Prime Factorization &amp; Coprime Integers</title>
    <meta name="description" content="Compute Euler’s totient function φ(n): prime factorization, formula breakdown, list of integers coprime to n, and a table of φ(k) values. Includes step-by-step explanation and number theory notes.">
    <link rel="canonical" href="https://calcdomain.com/euler-s-totient-function-calculator">
    
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .card-hover { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .prose { max-width: 65ch; margin-left: auto; margin-right: auto; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .formula-box { background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 8px; padding: 1rem; overflow-x: auto; margin: 1rem 0; }
        .badge { display: inline-flex; align-items: center; border-radius: 9999px; padding: 0.25rem 0.75rem; font-size: 0.75rem; font-weight: 500; }
        .result-box { background: #f9fafb; border-radius: 0.5rem; border: 1px solid #e5e7eb; padding: 0.75rem 1rem; font-size: 0.9rem; }
        .result-value { font-weight: 600; color: #111827; }
        .error-text { font-size: 0.75rem; color: #b91c1c; }
        .stat-label { font-size: 0.75rem; color: #6b7280; }
        .small-code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 0.8rem; }
        .table-scroll { max-height: 260px; overflow-y: auto; }
        .pill { display:inline-flex; align-items:center; padding:0.15rem 0.5rem; border-radius:9999px; border:1px solid #e5e7eb; font-size:0.7rem; margin:0.1rem; }
    </style>
    
    <!-- HEAD_SCRIPTS_E_META -->
    <!-- Google tag (gtag.js) -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7MB5V1LZRN');
    </script>

    <meta name="google-site-verification" content="_tiTZ9ivAdtXcAS9CMnTNJ549Sg39WVqP_ZFbWgglNA">

    <script>
        window.ezstandalone = window.ezstandalone || {};
        ezstandalone.cmd = ezstandalone.cmd || [];
    </script>

    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://calcdomain.com"
        },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Math",
        "item": "https://calcdomain.com/categories/math"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "Core Math & Algebra",
        "item": "https://calcdomain.com/subcategories/core-math-algebra"
      }
      ]
    },
    {
      "@type": "HowTo",
      "name": "How to use the Euler’s totient function calculator",
      "description": "Step-by-step instructions to compute Euler’s totient function φ(n), see the prime factorization of n, and list integers coprime to n.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Enter a positive integer n",
          "text": "Type a positive integer n into the main input field. The calculator is optimised for values up to around 10^9. For very large n the prime factorization step may take longer and listing all coprimes is disabled."
        },
        {
          "@type": "HowToStep",
          "name": "Choose display options",
          "text": "Select whether you want to see just φ(n), also the prime factorization of n and the formula breakdown, and optionally the full list of integers coprime to n when n is small enough."
        },
        {
          "@type": "HowToStep",
          "name": "Compute φ(n)",
          "text": "Click the button Compute φ(n). The tool factors n into primes, applies the multiplicative formula φ(n) = n ∏(1 − 1/p), and displays a step-by-step explanation together with basic checks such as 1 ≤ φ(n) ≤ n and φ(n) = n − 1 when n is prime."
        },
        {
          "@type": "HowToStep",
          "name": "Generate a totient table (optional)",
          "text": "Optionally specify a range 1 ≤ k ≤ N and click Generate table to see φ(k) for each k in that range. This is useful for spotting patterns and verifying number theory identities."
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is Euler’s totient function φ(n)?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Euler’s totient function φ(n) is the number of positive integers between 1 and n that are coprime to n, i.e. that share no common prime factor with n. For example, φ(10) = 4 because only 1, 3, 7 and 9 are coprime to 10."
          }
        },
        {
          "@type": "Question",
          "name": "How is φ(n) computed from the prime factorization of n?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "If the prime factorization of n is n = p1^a1 · p2^a2 · … · pk^ak, then Euler’s formula states that φ(n) = n · ∏(1 − 1/pi), where the product runs over the distinct prime divisors of n. The calculator uses this multiplicative formula after factoring n into its prime factors."
          }
        },
        {
          "@type": "Question",
          "name": "Why is Euler’s totient function important in cryptography?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Euler’s totient function plays a central role in public-key cryptography, particularly in the RSA algorithm. If n = pq is the product of two distinct primes, then φ(n) = (p − 1)(q − 1). Euler’s theorem, a generalisation of Fermat’s little theorem, states that for any integer a coprime to n, a^{φ(n)} ≡ 1 (mod n). RSA relies on the difficulty of computing φ(n) without knowing the factorization of n."
          }
        },
        {
          "@type": "Question",
          "name": "Why can’t the calculator list all coprimes for very large n?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The count φ(n) can be very large. Listing all integers between 1 and n that are coprime to n would be impractical for large n because it requires scanning many values and would produce extremely long output. For that reason the calculator only shows the explicit list of coprimes when n is below a configurable threshold (for example n ≤ 2000), and otherwise reports only the count."
          }
        },
        {
          "@type": "Question",
          "name": "Does the calculator handle non-integer or negative inputs?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "By definition Euler’s totient function is used for positive integers. The calculator validates the input and restricts it to integers n ≥ 1. If you enter a non-integer, negative or extremely large value, you will see a validation message instead of a totient result."
          }
        }
      ]
    }
  ]
}
</script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
.auditspine-badge{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  border:1px solid #e5e7eb;
  background:#f8fafc;
  color:#0f172a;
}
.auditspine-badge-warn{
  background:#fff7ed;
  border-color:#fed7aa;
  color:#9a3412;
}
</style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- BODY_SCRIPTS_INIZIO -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a href="https://calcdomain.com" class="text-2xl font-bold text-blue-600">CalcDomain</a>
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" autocomplete="off">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
              <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a href="https://calcdomain.com/search" class="text-gray-700 hover:text-blue-600 transition-colors">Advanced Search</a>
            <a href="https://calcdomain.com/#categories" class="text-gray-700 hover:text-blue-600 transition-colors">Categories</a>
          </div>
          <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
          </button>
        </div>
        <nav id="mobile-menu" class="md:hidden mt-4 hidden" aria-label="Mobile menu" role="navigation">
          <div class="mb-4">
            <div class="relative">
              <input type="search" id="mobile-search-input" placeholder="Search calculators..." class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>
          </div>
          <div class="space-y-2">
            <a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
            <a href="https://calcdomain.com/#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      
      <nav class="text-sm mb-4 text-gray-600" aria-label="Breadcrumbs"><a href="https://calcdomain.com" class="hover:text-blue-600">Home</a> &raquo; <a href="https://calcdomain.com/categories/math" class="hover:text-blue-600">Math</a> &raquo; <a href="https://calcdomain.com/subcategories/core-math-algebra" class="hover:text-blue-600">Core Math &amp; Algebra</a></nav>
      
      <div class="flex flex-col lg:flex-row gap-8">
        
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <div class="space-y-6">
              <header>
                <div class="flex flex-wrap items-center gap-2 mb-2">
                  <h1 class="text-2xl md:text-3xl font-bold">Euler’s Totient Function Calculator φ(n)</h1>
                  <span class="badge bg-emerald-50 text-emerald-700 border border-emerald-200">
                    Number of integers ≤ n that are coprime to n
                  </span>
                </div>
                <p class="text-gray-700">
                  Compute <strong>Euler’s totient function</strong> φ(n) for a positive integer n. See the
                  <strong>prime factorization</strong> of n, a <strong>step-by-step formula breakdown</strong>,
                  and (for smaller n) the full list of integers between 1 and n that are <strong>coprime</strong> to n.
                </p>
                <p class="mt-2 text-xs text-gray-700 bg-gray-50 border border-gray-200 rounded-md p-2">
                  <strong>Typical use cases:</strong> number theory, modular arithmetic, RSA and public-key cryptography,
                  contest problems, and teaching arithmetic functions.
                </p>
              </header>

              <!-- INPUT SECTION -->
              <section aria-label="Euler totient input" class="space-y-4">
                <h2 class="text-lg font-semibold">1. Enter n and options</h2>

                <div class="grid md:grid-cols-3 gap-4">
                  <div class="md:col-span-2">
                    <label for="n-input" class="block text-sm font-medium text-gray-700">
                      Integer n (n ≥ 1)
                    </label>
                    <input id="n-input" type="number" min="1" step="1" inputmode="numeric" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g. 36, 97, 1000003">
                    <p class="mt-1 text-xs text-gray-500">
                      The calculator is optimised for n up to about 10<sup>9</sup> using trial division. Very large n may
                      be slow to factor.
                    </p>
                  </div>
                  <div>
                    <label for="decimals" class="block text-sm font-medium text-gray-700">
                      Display style
                    </label>
                    <select id="decimals" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm">
                      <option value="0" selected="">Integer output</option>
                      <option value="2">Allow small decimals (debug)</option>
                    </select>
                    <p class="mt-1 text-xs text-gray-500">
                      φ(n) is always an integer; decimals only affect intermediate ratios.
                    </p>
                  </div>
                </div>

                <div class="grid md:grid-cols-3 gap-4">
                  <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700">
                      Coprime list
                    </label>
                    <div class="flex items-center gap-2 mt-1">
                      <input id="coprime-checkbox" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded">
                      <span class="text-xs text-gray-600">
                        Show all integers k with 1 ≤ k ≤ n such that gcd(k, n) = 1
                        (enabled only when n ≤ 2000).
                      </span>
                    </div>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700">
                      Quick examples
                    </label>
                    <div class="mt-1 flex flex-wrap gap-1 text-xs">
                      <button type="button" class="pill" data-example-n="10">n = 10</button>
                      <button type="button" class="pill" data-example-n="36">n = 36</button>
                      <button type="button" class="pill" data-example-n="97">n = 97 (prime)</button>
                      <button type="button" class="pill" data-example-n="1000">n = 1000</button>
                    </div>
                  </div>
                </div>

                <div class="flex flex-wrap items-center gap-3 mt-2">
                  <button type="button" id="btn-calc-phi" class="inline-flex items-center px-3 py-2 text-xs font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700">
                    Compute φ(n)
                  </button>
                  <button type="button" id="btn-clear-phi" class="inline-flex items-center px-3 py-2 text-xs font-medium rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50">
                    Clear
                  </button>
                  <p id="phi-error" class="error-text ml-auto"></p>
                </div>
              </section>

              <!-- MAIN RESULT SUMMARY -->
              <section aria-label="Totient result summary" class="space-y-4 mt-6">
                <h2 class="text-lg font-semibold">2. Results for your n</h2>

                <div class="grid md:grid-cols-4 gap-4">
                  <div>
                    <div class="stat-label mb-1">φ(n)</div>
                    <div id="res-phi" class="result-box">
                      <span class="result-value">—</span>
                    </div>
                  </div>
                  <div>
                    <div class="stat-label mb-1">Prime factorization of n</div>
                    <div id="res-factorization" class="result-box text-xs">
                      <span class="result-value">—</span>
                    </div>
                  </div>
                  <div>
                    <div class="stat-label mb-1">Distinct prime factors</div>
                    <div id="res-primes" class="result-box text-xs">
                      <span class="result-value">—</span>
                    </div>
                  </div>
                  <div>
                    <div class="stat-label mb-1">Basic checks</div>
                    <div id="res-checks" class="result-box text-xs">
                      <span class="result-value">—</span>
                    </div>
                  </div>
                </div>

                <div>
                  <div class="stat-label mb-1">Formula breakdown</div>
                  <div id="res-formula" class="result-box text-xs">
                    <span class="result-value">—</span>
                  </div>
                </div>

                <div>
                  <div class="stat-label mb-1">Integers coprime to n (optional)</div>
                  <div id="res-coprimes" class="result-box text-xs">
                    <span class="result-value">—</span>
                  </div>
                </div>
              </section>

              <!-- TABLE OF VALUES -->
              <section aria-label="Totient table" class="space-y-4 mt-6">
                <h2 class="text-lg font-semibold">3. φ(k) table for 1 ≤ k ≤ N</h2>
                <p class="text-sm text-gray-600">
                  Generate a small table of totient values to see patterns (for example φ(p) = p − 1 for primes,
                  or multiplicative behaviour).
                </p>

                <div class="grid md:grid-cols-4 gap-4">
                  <div>
                    <label for="table-max-input" class="block text-sm font-medium text-gray-700">
                      N (max 1000)
                    </label>
                    <input id="table-max-input" type="number" min="1" max="1000" step="1" inputmode="numeric" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500" value="50">
                    <p class="mt-1 text-xs text-gray-500">
                      The table lists k and φ(k) for 1 ≤ k ≤ N.
                    </p>
                  </div>
                  <div class="flex items-end">
                    <button type="button" id="btn-gen-table" class="inline-flex items-center px-3 py-2 text-xs font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700">
                      Generate table
                    </button>
                  </div>
                  <div class="md:col-span-2">
                    <p id="table-info" class="text-xs text-gray-500 mt-1">
                      Tip: try N = 30 to see how often φ(k) is even, and how values behave for primes vs composite numbers.
                    </p>
                  </div>
                </div>

                <div class="border border-gray-200 rounded-md table-scroll mt-2">
                  <table class="min-w-full text-xs">
                    <thead class="bg-gray-50">
                      <tr>
                        <th class="px-3 py-2 text-left font-semibold text-gray-700 border-b">k</th>
                        <th class="px-3 py-2 text-left font-semibold text-gray-700 border-b">φ(k)</th>
                        <th class="px-3 py-2 text-left font-semibold text-gray-700 border-b">Prime factorization</th>
                      </tr>
                    </thead>
                    <tbody id="table-phi-body">
                      <!-- Filled via JS -->
                    </tbody>
                  </table>
                </div>
              </section>

              <!-- EXPLANATORY CONTENT -->
              <section class="prose mt-6">
                <h2>Definition of Euler’s totient function</h2>
                <p>
                  For a positive integer \(n\), <strong>Euler’s totient function</strong> \(\varphi(n)\) (also written
                  \(\phi(n)\)) is defined as:
                </p>
                <div class="formula-box text-sm">
                  <p>
                    \[
                      \varphi(n) = \#\{\,k \in \mathbb{Z} : 1 \le k \le n,\ \gcd(k,n) = 1\,\},
                    \]
                  </p>
                  <p class="mt-1">
                    i.e. the number of integers between 1 and n that are <strong>coprime</strong> to n.
                  </p>
                </div>
                <p>
                  Example: for \(n = 10\), the numbers between 1 and 10 that are coprime to 10 are
                  \(1, 3, 7, 9\), so \(\varphi(10) = 4\).
                </p>

                <h3>Prime factorization formula</h3>
                <p>
                  If the prime factorization of \(n\) is
                  \[
                    n = p_1^{a_1} p_2^{a_2} \cdots p_k^{a_k},
                  \]
                  where the \(p_i\) are distinct primes, then Euler’s formula states:
                </p>
                <div class="formula-box text-sm">
                  <p>
                    \[
                      \varphi(n)
                      = n \prod_{i=1}^k \left(1 - \frac{1}{p_i}\right)
                      = p_1^{a_1-1}(p_1 - 1)\cdot p_2^{a_2-1}(p_2 - 1)\cdots p_k^{a_k-1}(p_k - 1).
                    \]
                  </p>
                </div>
                <p>
                  This shows that \(\varphi\) is a <strong>multiplicative arithmetic function</strong>:
                  if \(\gcd(m,n)=1\), then \(\varphi(mn) = \varphi(m)\varphi(n)\).
                </p>

                <h3>Example: φ(36)</h3>
                <p>
                  Let’s compute \(\varphi(36)\) step by step:
                </p>
                <ol>
                  <li>Factor 36: \(36 = 2^2 \cdot 3^2\).</li>
                  <li>Distinct primes are \(2\) and \(3\).</li>
                  <li>Apply Euler’s formula:
                    \[
                      \varphi(36) = 36\left(1 - \frac{1}{2}\right)\left(1 - \frac{1}{3}\right)
                                   = 36 \cdot \frac{1}{2} \cdot \frac{2}{3}
                                   = 12.
                    \]
                  </li>
                  <li>Check by counting: the integers between 1 and 36 that are coprime with 36 are
                    1, 5, 7, 11, 13, 17, 19, 23, 25, 29, 31 and 35 – exactly 12 numbers.</li>
                </ol>

                <h2>Connections and applications</h2>

                <h3>Euler’s theorem and RSA</h3>
                <p>
                  Euler’s totient function appears in <strong>Euler’s theorem</strong>:
                </p>
                <div class="formula-box text-sm">
                  <p>
                    If \(\gcd(a,n)=1\), then
                    \[
                      a^{\varphi(n)} \equiv 1 \pmod{n}.
                    \]
                  </p>
                </div>
                <p>
                  When \(n = p\) is prime, \(\varphi(p) = p - 1\) and Euler’s theorem reduces to
                  <strong>Fermat’s little theorem</strong>. In the RSA cryptosystem, if
                  \(n = pq\) with distinct primes \(p\) and \(q\), then
                  \(\varphi(n) = (p-1)(q-1)\), and the secret decryption exponent is chosen using this φ(n).
                </p>

                <h3>Basic properties of φ(n)</h3>
                <ul>
                  <li>\(\varphi(1) = 1\).</li>
                  <li>For a prime \(p\), \(\varphi(p) = p - 1\).</li>
                  <li>For a prime power \(p^k\), \(\varphi(p^k) = p^k - p^{k-1} = p^{k-1}(p-1)\).</li>
                  <li>If \(\gcd(m, n) = 1\), then \(\varphi(mn) = \varphi(m)\varphi(n)\).</li>
                  <li>For \(n &gt; 2\), \(\varphi(n)\) is even (since numbers occur in pairs modulo n).</li>
                </ul>

                <h2 id="faq">FAQ: using this totient calculator</h2>

                <h3>Why do you need the factorization of n?</h3>
                <p>
                  The direct definition of \(\varphi(n)\) via gcd counts is straightforward but inefficient for large n:
                  you would need to compute \(\gcd(k,n)\) for many k. Using the prime factorization and Euler’s formula
                  is much faster and reveals the structure of φ(n). That is why the calculator first factors n.
                </p>

                <h3>What happens for very large n (e.g. RSA-sized moduli)?</h3>
                <p>
                  For cryptographic-size n (hundreds or thousands of bits), factoring n is deliberately hard – this is
                  what RSA security relies on. Our calculator uses naive trial division, so it is suited to educational
                  and moderate-size examples, not to breaking cryptographic keys. For huge n, you must already know the
                  prime factors in order to compute φ(n).
                </p>

                <h3>Can I rely on this tool for proofs?</h3>
                <p>
                  This calculator is designed as a <strong>learning and exploration tool</strong>. It implements the
                  standard totient formulas, but for formal proofs, contest submissions or research you should always
                  back up numerical evidence with rigorous number-theoretic arguments.
                </p>
              </section>
            </div>
          </div>
        
<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\varphi(n) = \#\{\,k \in \mathbb{Z} : 1 \le k \le n,\ \gcd(k,n) = 1\,\},\]</div>
  <pre class="auditspine-mono">\varphi(n) = \#\{\,k \in \mathbb{Z} : 1 \le k \le n,\ \gcd(k,n) = 1\,\},</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[n = p_1^{a_1} p_2^{a_2} \cdots p_k^{a_k},\]</div>
  <pre class="auditspine-mono">n = p_1^{a_1} p_2^{a_2} \cdots p_k^{a_k},</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\varphi(n) = n \prod_{i=1}^k \left(1 - \frac{1}{p_i}\right) = p_1^{a_1-1}(p_1 - 1)\cdot p_2^{a_2-1}(p_2 - 1)\cdots p_k^{a_k-1}(p_k - 1).\]</div>
  <pre class="auditspine-mono">\varphi(n) = n \prod_{i=1}^k \left(1 - \frac{1}{p_i}\right) = p_1^{a_1-1}(p_1 - 1)\cdot p_2^{a_2-1}(p_2 - 1)\cdots p_k^{a_k-1}(p_k - 1).</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\varphi(36) = 36\left(1 - \frac{1}{2}\right)\left(1 - \frac{1}{3}\right) = 36 \cdot \frac{1}{2} \cdot \frac{2}{3} = 12.\]</div>
  <pre class="auditspine-mono">\varphi(36) = 36\left(1 - \frac{1}{2}\right)\left(1 - \frac{1}{3}\right) = 36 \cdot \frac{1}{2} \cdot \frac{2}{3} = 12.</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[a^{\varphi(n)} \equiv 1 \pmod{n}.\]</div>
  <pre class="auditspine-mono">a^{\varphi(n)} \equiv 1 \pmod{n}.</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <pre class="auditspine-mono">','\</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">\[ \varphi(n) = \#\{\,k \in \mathbb{Z} : 1 \le k \le n,\ \gcd(k,n) = 1\,\}, \] i.e. the number of integers between 1 and n that are coprime to n.</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">\[ \varphi(n) = n \prod_{i=1}^k \left(1 - \frac{1}{p_i}\right) = p_1^{a_1-1}(p_1 - 1)\cdot p_2^{a_2-1}(p_2 - 1)\cdots p_k^{a_k-1}(p_k - 1). \]</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">If \(\gcd(a,n)=1\), then \[ a^{\varphi(n)} \equiv 1 \pmod{n}. \]</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>NIST — Weights and measures</strong> — nist.gov · Accessed 2026-01-19<br><a href="https://www.nist.gov/pml/weights-and-measures" target="_blank" rel="nofollow noopener">https://www.nist.gov/pml/weights-and-measures</a></li>
<li><strong>FTC — Consumer advice</strong> — consumer.ftc.gov · Accessed 2026-01-19<br><a href="https://consumer.ftc.gov/" target="_blank" rel="nofollow noopener">https://consumer.ftc.gov/</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</main>
        
        <aside class="w-full lg:w-1/3">
          <div class="space-y-6">
            <section class="bg-white p-4 rounded-lg shadow-md">
              <h2 class="text-lg font-semibold mb-3">Related calculators</h2>
              <ul class="space-y-2 text-sm">
                <li>
                  <a href="https://calcdomain.com/probability" class="text-blue-600 hover:underline">
                    Probability Calculator
                  </a>
                  <p class="text-gray-500 text-xs">
                    Connect modular arithmetic and totients with discrete probability models.
                  </p>
                </li>
                <li>
                  <a href="https://calcdomain.com/integral" class="text-blue-600 hover:underline">
                    Integral Calculator
                  </a>
                  <p class="text-gray-500 text-xs">
                    Move from discrete arithmetic sums to continuous calculus integrals.
                  </p>
                </li>
                <li>
                  <a href="https://calcdomain.com/limit" class="text-blue-600 hover:underline">
                    Limit Calculator
                  </a>
                  <p class="text-gray-500 text-xs">
                    Study limits and growth rates of arithmetic functions like φ(n)/n.
                  </p>
                </li>
                <li>
                  <a href="https://calcdomain.com/roman-units-converter" class="text-blue-600 hover:underline">
                    Roman Units Converter
                  </a>
                  <p class="text-gray-500 text-xs">
                    Explore historical number systems alongside modern arithmetic tools.
                  </p>
                </li>
              </ul>
            </section>

            <section class="bg-white p-4 rounded-lg shadow-md">
              <h2 class="text-lg font-semibold mb-3">Category: Math &amp; Conversions</h2>
              <p class="text-sm text-gray-700 mb-3">
                Discover more tools for number theory, calculus, statistics and unit conversions – designed for
                students, teachers, engineers and competitive problem solvers.
              </p>
              <a href="https://calcdomain.com/math-conversions" class="inline-flex items-center px-3 py-2 text-sm font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700">
                Browse all math tools
              </a>
            </section>
          </div>
        </aside>
        
      </div>
    </div> 

    <footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                                                                                                <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>





























    
    <script src="/assets/js/script_menu.js" defer=""></script>
    <script src="/assets/js/script_faq.js" defer=""></script>
    <script src="search.js" defer=""></script>
    
    <script>
      window.MathJax = { tex: { inlineMath: [['\\(','\\)'], ['
      };
    </script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
    <script>
      // Mobile menu toggle
      document.getElementById('mobile-menu-toggle')?.addEventListener('click', function () {
        const menu = document.getElementById('mobile-menu');
        if (!menu) return;
        const isHidden = menu.classList.contains('hidden');
        menu.classList.toggle('hidden', !isHidden);
        this.setAttribute('aria-expanded', String(isHidden));
      });

      document.addEventListener('DOMContentLoaded', function () {
        const nInput = document.getElementById('n-input');
        const decimalsSelect = document.getElementById('decimals');
        const coprimeCheckbox = document.getElementById('coprime-checkbox');
        const exampleButtons = document.querySelectorAll('[data-example-n]');

        const btnCalc = document.getElementById('btn-calc-phi');
        const btnClear = document.getElementById('btn-clear-phi');
        const errorEl = document.getElementById('phi-error');

        const resPhi = document.getElementById('res-phi');
        const resFactorization = document.getElementById('res-factorization');
        const resPrimes = document.getElementById('res-primes');
        const resChecks = document.getElementById('res-checks');
        const resFormula = document.getElementById('res-formula');
        const resCoprimes = document.getElementById('res-coprimes');

        const tableMaxInput = document.getElementById('table-max-input');
        const btnGenTable = document.getElementById('btn-gen-table');
        const tableBody = document.getElementById('table-phi-body');

        function setResult(container, text) {
          if (!container) return;
          const span = container.querySelector('.result-value');
          if (span) span.textContent = text;
        }

        function clearResults() {
          [resPhi, resFactorization, resPrimes, resChecks, resFormula, resCoprimes].forEach(function (el) {
            if (!el) return;
            const spans = el.querySelectorAll('.result-value');
            spans.forEach(span => span.textContent = '—');
          });
          if (errorEl) errorEl.textContent = '';
        }

        function getDecimals() {
          const d = Number(decimalsSelect.value);
          if (!Number.isInteger(d) || d < 0 || d > 10) return 0;
          return d;
        }

        function fmt(v) {
          const d = getDecimals();
          if (d === 0) return String(Math.round(v));
          return Number(v.toFixed(d)).toString();
        }

        function isIntegerString(x) {
          return Number.isInteger(x);
        }

        function factorize(n) {
          const factors = [];
          let x = n;
          let count;

          // Factor 2
          count = 0;
          while (x % 2 === 0) {
            x /= 2;
            count++;
          }
          if (count > 0) factors.push({ p: 2, a: count });

          // Odd factors
          let f = 3;
          const limit = Math.floor(Math.sqrt(x)) + 1;
          while (f <= limit && x > 1) {
            count = 0;
            while (x % f === 0) {
              x /= f;
              count++;
            }
            if (count > 0) factors.push({ p: f, a: count });
            f += 2;
          }

          if (x > 1) {
            factors.push({ p: x, a: 1 });
          }

          return factors;
        }

        function formatFactorization(factors) {
          if (!factors || factors.length === 0) return '1';
          return factors.map(function (fa) {
            if (fa.a === 1) return String(fa.p);
            return fa.p + '^' + fa.a;
          }).join(' · ');
        }

        function computePhiFromFactors(n, factors) {
          if (n === 0) return 0;
          if (!factors || factors.length === 0) return 1;
          let phi = n;
          factors.forEach(function (fa) {
            phi = phi * (fa.p - 1) / fa.p;
          });
          return Math.round(phi);
        }

        function gcd(a, b) {
          a = Math.abs(a);
          b = Math.abs(b);
          while (b !== 0) {
            const t = b;
            b = a % b;
            a = t;
          }
          return a;
        }

        function computeAndDisplayPhi() {
          clearResults();

          const raw = nInput.value.trim();
          if (!raw) {
            errorEl.textContent = 'Please enter a positive integer n.';
            return;
          }
          let n = Number(raw);
          if (!Number.isFinite(n) || !Number.isInteger(n)) {
            errorEl.textContent = 'n must be a valid integer.';
            return;
          }
          if (n < 1) {
            errorEl.textContent = 'n must be at least 1.';
            return;
          }
          if (n > 1e10) {
            errorEl.textContent = 'n is very large; try a value ≤ 10^10 for responsive performance.';
            return;
          }

          const factors = factorize(n);
          const phi = computePhiFromFactors(n, factors);
          setResult(resPhi, String(phi));

          const factStr = n === 1 ? '1 (no prime factors)' : formatFactorization(factors);
          setResult(resFactorization, factStr);

          const distinctPrimes = factors.map(fa => fa.p);
          setResult(resPrimes, distinctPrimes.length === 0 ? 'none (n = 1)' : distinctPrimes.join(', '));

          // Basic checks
          let checks = [];
          if (n === 1) {
            checks.push('φ(1) = 1 by definition.');
          } else {
            checks.push('1 ≤ φ(n) ≤ n, here ' + phi + ' ≤ ' + n + '.');
          }
          if (distinctPrimes.length === 1 && factors[0].a === 1 && n !== 1) {
            checks.push('n is prime ⇒ φ(n) = n − 1 = ' + (n - 1) + '.');
          }
          if (phi === n - 1 && n > 2) {
            checks.push('φ(n) = n − 1 suggests n is prime.');
          }
          setResult(resChecks, checks.join(' '));

          // Formula breakdown
          if (n === 1) {
            setResult(resFormula, 'φ(1) = 1 by convention, since gcd(1, 1) = 1.');
          } else {
            const prodParts = distinctPrimes.map(p => '(1 − 1/' + p + ')').join(' · ');
            const numericParts = distinctPrimes.map(p => '(' + (p - 1) + '/' + p + ')').join(' · ');
            const formulaText =
              'Using Euler’s product: φ(' + n + ') = ' + n + ' · ' + prodParts +
              ' = ' + n + ' · ' + numericParts +
              ' = ' + phi + '.';
            setResult(resFormula, formulaText);
          }

          // Coprime list
          const wantCoprimes = coprimeCheckbox.checked;
          const maxList = 2000;
          if (!wantCoprimes) {
            setResult(resCoprimes, 'Coprime list disabled. Tick the checkbox to view the list for moderate n.');
          } else if (n > maxList) {
            setResult(resCoprimes, 'Coprime list available only for n ≤ ' + maxList + '. Here φ(' + n + ') = ' + phi + '.');
          } else {
            const coprimes = [];
            for (let k = 1; k <= n; k++) {
              if (gcd(k, n) === 1) coprimes.push(k);
            }
            const ratio = (phi / n).toFixed(4);
            setResult(
              resCoprimes,
              'There are φ(' + n + ') = ' + phi + ' integers between 1 and ' + n +
              ' that are coprime to ' + n + ' (' + ratio + ' of all). List: ' + coprimes.join(', ')
            );
          }
        }

        function clearAll() {
          nInput.value = '';
          coprimeCheckbox.checked = false;
          clearResults();
        }

        if (btnCalc) {
          btnCalc.addEventListener('click', computeAndDisplayPhi);
        }
        if (btnClear) {
          btnClear.addEventListener('click', clearAll);
        }

        // Example buttons
        exampleButtons.forEach(function (btn) {
          btn.addEventListener('click', function () {
            const n = btn.getAttribute('data-example-n');
            if (nInput) nInput.value = n || '';
            clearResults();
          });
        });

        // Table generation
        function factorizeSmall(n) {
          return factorize(n);
        }

        function genPhiTable() {
          if (!tableBody) return;
          tableBody.innerHTML = '';

          let N = Number(tableMaxInput.value);
          if (!Number.isInteger(N) || N < 1) {
            N = 1;
          }
          if (N > 1000) {
            N = 1000;
          }
          tableMaxInput.value = String(N);

          for (let k = 1; k <= N; k++) {
            const factors = factorizeSmall(k);
            const phiK = computePhiFromFactors(k, factors);
            const tr = document.createElement('tr');
            tr.className = 'border-b';

            const tdK = document.createElement('td');
            tdK.className = 'px-3 py-1.5 text-gray-700';
            tdK.textContent = String(k);

            const tdPhi = document.createElement('td');
            tdPhi.className = 'px-3 py-1.5 text-gray-700';
            tdPhi.textContent = String(phiK);

            const tdFact = document.createElement('td');
            tdFact.className = 'px-3 py-1.5 text-gray-700';
            tdFact.textContent = k === 1 ? '1' : formatFactorization(factors);

            tr.appendChild(tdK);
            tr.appendChild(tdPhi);
            tr.appendChild(tdFact);
            tableBody.appendChild(tr);
          }
        }

        if (btnGenTable) {
          btnGenTable.addEventListener('click', genPhiTable);
        }

        // Prepopulate table with default N
        genPhiTable();
      });
    </script>


</body></html>
, '
      };
    </script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
    <script>
      // Mobile menu toggle
      document.getElementById('mobile-menu-toggle')?.addEventListener('click', function () {
        const menu = document.getElementById('mobile-menu');
        if (!menu) return;
        const isHidden = menu.classList.contains('hidden');
        menu.classList.toggle('hidden', !isHidden);
        this.setAttribute('aria-expanded', String(isHidden));
      });

      document.addEventListener('DOMContentLoaded', function () {
        const nInput = document.getElementById('n-input');
        const decimalsSelect = document.getElementById('decimals');
        const coprimeCheckbox = document.getElementById('coprime-checkbox');
        const exampleButtons = document.querySelectorAll('[data-example-n]');

        const btnCalc = document.getElementById('btn-calc-phi');
        const btnClear = document.getElementById('btn-clear-phi');
        const errorEl = document.getElementById('phi-error');

        const resPhi = document.getElementById('res-phi');
        const resFactorization = document.getElementById('res-factorization');
        const resPrimes = document.getElementById('res-primes');
        const resChecks = document.getElementById('res-checks');
        const resFormula = document.getElementById('res-formula');
        const resCoprimes = document.getElementById('res-coprimes');

        const tableMaxInput = document.getElementById('table-max-input');
        const btnGenTable = document.getElementById('btn-gen-table');
        const tableBody = document.getElementById('table-phi-body');

        function setResult(container, text) {
          if (!container) return;
          const span = container.querySelector('.result-value');
          if (span) span.textContent = text;
        }

        function clearResults() {
          [resPhi, resFactorization, resPrimes, resChecks, resFormula, resCoprimes].forEach(function (el) {
            if (!el) return;
            const spans = el.querySelectorAll('.result-value');
            spans.forEach(span => span.textContent = '—');
          });
          if (errorEl) errorEl.textContent = '';
        }

        function getDecimals() {
          const d = Number(decimalsSelect.value);
          if (!Number.isInteger(d) || d < 0 || d > 10) return 0;
          return d;
        }

        function fmt(v) {
          const d = getDecimals();
          if (d === 0) return String(Math.round(v));
          return Number(v.toFixed(d)).toString();
        }

        function isIntegerString(x) {
          return Number.isInteger(x);
        }

        function factorize(n) {
          const factors = [];
          let x = n;
          let count;

          // Factor 2
          count = 0;
          while (x % 2 === 0) {
            x /= 2;
            count++;
          }
          if (count > 0) factors.push({ p: 2, a: count });

          // Odd factors
          let f = 3;
          const limit = Math.floor(Math.sqrt(x)) + 1;
          while (f <= limit && x > 1) {
            count = 0;
            while (x % f === 0) {
              x /= f;
              count++;
            }
            if (count > 0) factors.push({ p: f, a: count });
            f += 2;
          }

          if (x > 1) {
            factors.push({ p: x, a: 1 });
          }

          return factors;
        }

        function formatFactorization(factors) {
          if (!factors || factors.length === 0) return '1';
          return factors.map(function (fa) {
            if (fa.a === 1) return String(fa.p);
            return fa.p + '^' + fa.a;
          }).join(' · ');
        }

        function computePhiFromFactors(n, factors) {
          if (n === 0) return 0;
          if (!factors || factors.length === 0) return 1;
          let phi = n;
          factors.forEach(function (fa) {
            phi = phi * (fa.p - 1) / fa.p;
          });
          return Math.round(phi);
        }

        function gcd(a, b) {
          a = Math.abs(a);
          b = Math.abs(b);
          while (b !== 0) {
            const t = b;
            b = a % b;
            a = t;
          }
          return a;
        }

        function computeAndDisplayPhi() {
          clearResults();

          const raw = nInput.value.trim();
          if (!raw) {
            errorEl.textContent = 'Please enter a positive integer n.';
            return;
          }
          let n = Number(raw);
          if (!Number.isFinite(n) || !Number.isInteger(n)) {
            errorEl.textContent = 'n must be a valid integer.';
            return;
          }
          if (n < 1) {
            errorEl.textContent = 'n must be at least 1.';
            return;
          }
          if (n > 1e10) {
            errorEl.textContent = 'n is very large; try a value ≤ 10^10 for responsive performance.';
            return;
          }

          const factors = factorize(n);
          const phi = computePhiFromFactors(n, factors);
          setResult(resPhi, String(phi));

          const factStr = n === 1 ? '1 (no prime factors)' : formatFactorization(factors);
          setResult(resFactorization, factStr);

          const distinctPrimes = factors.map(fa => fa.p);
          setResult(resPrimes, distinctPrimes.length === 0 ? 'none (n = 1)' : distinctPrimes.join(', '));

          // Basic checks
          let checks = [];
          if (n === 1) {
            checks.push('φ(1) = 1 by definition.');
          } else {
            checks.push('1 ≤ φ(n) ≤ n, here ' + phi + ' ≤ ' + n + '.');
          }
          if (distinctPrimes.length === 1 && factors[0].a === 1 && n !== 1) {
            checks.push('n is prime ⇒ φ(n) = n − 1 = ' + (n - 1) + '.');
          }
          if (phi === n - 1 && n > 2) {
            checks.push('φ(n) = n − 1 suggests n is prime.');
          }
          setResult(resChecks, checks.join(' '));

          // Formula breakdown
          if (n === 1) {
            setResult(resFormula, 'φ(1) = 1 by convention, since gcd(1, 1) = 1.');
          } else {
            const prodParts = distinctPrimes.map(p => '(1 − 1/' + p + ')').join(' · ');
            const numericParts = distinctPrimes.map(p => '(' + (p - 1) + '/' + p + ')').join(' · ');
            const formulaText =
              'Using Euler’s product: φ(' + n + ') = ' + n + ' · ' + prodParts +
              ' = ' + n + ' · ' + numericParts +
              ' = ' + phi + '.';
            setResult(resFormula, formulaText);
          }

          // Coprime list
          const wantCoprimes = coprimeCheckbox.checked;
          const maxList = 2000;
          if (!wantCoprimes) {
            setResult(resCoprimes, 'Coprime list disabled. Tick the checkbox to view the list for moderate n.');
          } else if (n > maxList) {
            setResult(resCoprimes, 'Coprime list available only for n ≤ ' + maxList + '. Here φ(' + n + ') = ' + phi + '.');
          } else {
            const coprimes = [];
            for (let k = 1; k <= n; k++) {
              if (gcd(k, n) === 1) coprimes.push(k);
            }
            const ratio = (phi / n).toFixed(4);
            setResult(
              resCoprimes,
              'There are φ(' + n + ') = ' + phi + ' integers between 1 and ' + n +
              ' that are coprime to ' + n + ' (' + ratio + ' of all). List: ' + coprimes.join(', ')
            );
          }
        }

        function clearAll() {
          nInput.value = '';
          coprimeCheckbox.checked = false;
          clearResults();
        }

        if (btnCalc) {
          btnCalc.addEventListener('click', computeAndDisplayPhi);
        }
        if (btnClear) {
          btnClear.addEventListener('click', clearAll);
        }

        // Example buttons
        exampleButtons.forEach(function (btn) {
          btn.addEventListener('click', function () {
            const n = btn.getAttribute('data-example-n');
            if (nInput) nInput.value = n || '';
            clearResults();
          });
        });

        // Table generation
        function factorizeSmall(n) {
          return factorize(n);
        }

        function genPhiTable() {
          if (!tableBody) return;
          tableBody.innerHTML = '';

          let N = Number(tableMaxInput.value);
          if (!Number.isInteger(N) || N < 1) {
            N = 1;
          }
          if (N > 1000) {
            N = 1000;
          }
          tableMaxInput.value = String(N);

          for (let k = 1; k <= N; k++) {
            const factors = factorizeSmall(k);
            const phiK = computePhiFromFactors(k, factors);
            const tr = document.createElement('tr');
            tr.className = 'border-b';

            const tdK = document.createElement('td');
            tdK.className = 'px-3 py-1.5 text-gray-700';
            tdK.textContent = String(k);

            const tdPhi = document.createElement('td');
            tdPhi.className = 'px-3 py-1.5 text-gray-700';
            tdPhi.textContent = String(phiK);

            const tdFact = document.createElement('td');
            tdFact.className = 'px-3 py-1.5 text-gray-700';
            tdFact.textContent = k === 1 ? '1' : formatFactorization(factors);

            tr.appendChild(tdK);
            tr.appendChild(tdPhi);
            tr.appendChild(tdFact);
            tableBody.appendChild(tr);
          }
        }

        if (btnGenTable) {
          btnGenTable.addEventListener('click', genPhiTable);
        }

        // Prepopulate table with default N
        genPhiTable();
      });
    </script>


</body></html>
]], displayMath: [['\\[','\\]']] }, svg: { fontCache: 'global' } };
      };
    </script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
    <script>
      // Mobile menu toggle
      document.getElementById('mobile-menu-toggle')?.addEventListener('click', function () {
        const menu = document.getElementById('mobile-menu');
        if (!menu) return;
        const isHidden = menu.classList.contains('hidden');
        menu.classList.toggle('hidden', !isHidden);
        this.setAttribute('aria-expanded', String(isHidden));
      });

      document.addEventListener('DOMContentLoaded', function () {
        const nInput = document.getElementById('n-input');
        const decimalsSelect = document.getElementById('decimals');
        const coprimeCheckbox = document.getElementById('coprime-checkbox');
        const exampleButtons = document.querySelectorAll('[data-example-n]');

        const btnCalc = document.getElementById('btn-calc-phi');
        const btnClear = document.getElementById('btn-clear-phi');
        const errorEl = document.getElementById('phi-error');

        const resPhi = document.getElementById('res-phi');
        const resFactorization = document.getElementById('res-factorization');
        const resPrimes = document.getElementById('res-primes');
        const resChecks = document.getElementById('res-checks');
        const resFormula = document.getElementById('res-formula');
        const resCoprimes = document.getElementById('res-coprimes');

        const tableMaxInput = document.getElementById('table-max-input');
        const btnGenTable = document.getElementById('btn-gen-table');
        const tableBody = document.getElementById('table-phi-body');

        function setResult(container, text) {
          if (!container) return;
          const span = container.querySelector('.result-value');
          if (span) span.textContent = text;
        }

        function clearResults() {
          [resPhi, resFactorization, resPrimes, resChecks, resFormula, resCoprimes].forEach(function (el) {
            if (!el) return;
            const spans = el.querySelectorAll('.result-value');
            spans.forEach(span => span.textContent = '—');
          });
          if (errorEl) errorEl.textContent = '';
        }

        function getDecimals() {
          const d = Number(decimalsSelect.value);
          if (!Number.isInteger(d) || d < 0 || d > 10) return 0;
          return d;
        }

        function fmt(v) {
          const d = getDecimals();
          if (d === 0) return String(Math.round(v));
          return Number(v.toFixed(d)).toString();
        }

        function isIntegerString(x) {
          return Number.isInteger(x);
        }

        function factorize(n) {
          const factors = [];
          let x = n;
          let count;

          // Factor 2
          count = 0;
          while (x % 2 === 0) {
            x /= 2;
            count++;
          }
          if (count > 0) factors.push({ p: 2, a: count });

          // Odd factors
          let f = 3;
          const limit = Math.floor(Math.sqrt(x)) + 1;
          while (f <= limit && x > 1) {
            count = 0;
            while (x % f === 0) {
              x /= f;
              count++;
            }
            if (count > 0) factors.push({ p: f, a: count });
            f += 2;
          }

          if (x > 1) {
            factors.push({ p: x, a: 1 });
          }

          return factors;
        }

        function formatFactorization(factors) {
          if (!factors || factors.length === 0) return '1';
          return factors.map(function (fa) {
            if (fa.a === 1) return String(fa.p);
            return fa.p + '^' + fa.a;
          }).join(' · ');
        }

        function computePhiFromFactors(n, factors) {
          if (n === 0) return 0;
          if (!factors || factors.length === 0) return 1;
          let phi = n;
          factors.forEach(function (fa) {
            phi = phi * (fa.p - 1) / fa.p;
          });
          return Math.round(phi);
        }

        function gcd(a, b) {
          a = Math.abs(a);
          b = Math.abs(b);
          while (b !== 0) {
            const t = b;
            b = a % b;
            a = t;
          }
          return a;
        }

        function computeAndDisplayPhi() {
          clearResults();

          const raw = nInput.value.trim();
          if (!raw) {
            errorEl.textContent = 'Please enter a positive integer n.';
            return;
          }
          let n = Number(raw);
          if (!Number.isFinite(n) || !Number.isInteger(n)) {
            errorEl.textContent = 'n must be a valid integer.';
            return;
          }
          if (n < 1) {
            errorEl.textContent = 'n must be at least 1.';
            return;
          }
          if (n > 1e10) {
            errorEl.textContent = 'n is very large; try a value ≤ 10^10 for responsive performance.';
            return;
          }

          const factors = factorize(n);
          const phi = computePhiFromFactors(n, factors);
          setResult(resPhi, String(phi));

          const factStr = n === 1 ? '1 (no prime factors)' : formatFactorization(factors);
          setResult(resFactorization, factStr);

          const distinctPrimes = factors.map(fa => fa.p);
          setResult(resPrimes, distinctPrimes.length === 0 ? 'none (n = 1)' : distinctPrimes.join(', '));

          // Basic checks
          let checks = [];
          if (n === 1) {
            checks.push('φ(1) = 1 by definition.');
          } else {
            checks.push('1 ≤ φ(n) ≤ n, here ' + phi + ' ≤ ' + n + '.');
          }
          if (distinctPrimes.length === 1 && factors[0].a === 1 && n !== 1) {
            checks.push('n is prime ⇒ φ(n) = n − 1 = ' + (n - 1) + '.');
          }
          if (phi === n - 1 && n > 2) {
            checks.push('φ(n) = n − 1 suggests n is prime.');
          }
          setResult(resChecks, checks.join(' '));

          // Formula breakdown
          if (n === 1) {
            setResult(resFormula, 'φ(1) = 1 by convention, since gcd(1, 1) = 1.');
          } else {
            const prodParts = distinctPrimes.map(p => '(1 − 1/' + p + ')').join(' · ');
            const numericParts = distinctPrimes.map(p => '(' + (p - 1) + '/' + p + ')').join(' · ');
            const formulaText =
              'Using Euler’s product: φ(' + n + ') = ' + n + ' · ' + prodParts +
              ' = ' + n + ' · ' + numericParts +
              ' = ' + phi + '.';
            setResult(resFormula, formulaText);
          }

          // Coprime list
          const wantCoprimes = coprimeCheckbox.checked;
          const maxList = 2000;
          if (!wantCoprimes) {
            setResult(resCoprimes, 'Coprime list disabled. Tick the checkbox to view the list for moderate n.');
          } else if (n > maxList) {
            setResult(resCoprimes, 'Coprime list available only for n ≤ ' + maxList + '. Here φ(' + n + ') = ' + phi + '.');
          } else {
            const coprimes = [];
            for (let k = 1; k <= n; k++) {
              if (gcd(k, n) === 1) coprimes.push(k);
            }
            const ratio = (phi / n).toFixed(4);
            setResult(
              resCoprimes,
              'There are φ(' + n + ') = ' + phi + ' integers between 1 and ' + n +
              ' that are coprime to ' + n + ' (' + ratio + ' of all). List: ' + coprimes.join(', ')
            );
          }
        }

        function clearAll() {
          nInput.value = '';
          coprimeCheckbox.checked = false;
          clearResults();
        }

        if (btnCalc) {
          btnCalc.addEventListener('click', computeAndDisplayPhi);
        }
        if (btnClear) {
          btnClear.addEventListener('click', clearAll);
        }

        // Example buttons
        exampleButtons.forEach(function (btn) {
          btn.addEventListener('click', function () {
            const n = btn.getAttribute('data-example-n');
            if (nInput) nInput.value = n || '';
            clearResults();
          });
        });

        // Table generation
        function factorizeSmall(n) {
          return factorize(n);
        }

        function genPhiTable() {
          if (!tableBody) return;
          tableBody.innerHTML = '';

          let N = Number(tableMaxInput.value);
          if (!Number.isInteger(N) || N < 1) {
            N = 1;
          }
          if (N > 1000) {
            N = 1000;
          }
          tableMaxInput.value = String(N);

          for (let k = 1; k <= N; k++) {
            const factors = factorizeSmall(k);
            const phiK = computePhiFromFactors(k, factors);
            const tr = document.createElement('tr');
            tr.className = 'border-b';

            const tdK = document.createElement('td');
            tdK.className = 'px-3 py-1.5 text-gray-700';
            tdK.textContent = String(k);

            const tdPhi = document.createElement('td');
            tdPhi.className = 'px-3 py-1.5 text-gray-700';
            tdPhi.textContent = String(phiK);

            const tdFact = document.createElement('td');
            tdFact.className = 'px-3 py-1.5 text-gray-700';
            tdFact.textContent = k === 1 ? '1' : formatFactorization(factors);

            tr.appendChild(tdK);
            tr.appendChild(tdPhi);
            tr.appendChild(tdFact);
            tableBody.appendChild(tr);
          }
        }

        if (btnGenTable) {
          btnGenTable.addEventListener('click', genPhiTable);
        }

        // Prepopulate table with default N
        genPhiTable();
      });
    </script>


</body></html>

<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/diet-plan-calculator">





<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg">
<link rel="shortcut icon" href="https://calcdomain.com/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png">
<link rel="manifest" href="https://calcdomain.com/site.webmanifest">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diet Plan Calculator - Calculate Your Daily Calorie Needs</title>
<meta name="description" content="Calculate your daily calorie needs for weight loss, maintenance, or gain based on the Mifflin-St Jeor formula. Get a personalized diet plan macro-breakdown.">


<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">

<style>
/* Base styles from template */
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.25rem;
margin-bottom: 1rem; overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
font-size: 0.95rem;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; font-weight: 500; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }

/* Custom Styles for WCAG & UX */
/* 1. Remove number input spinners */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
-webkit-appearance: none;
margin: 0;
}
input[type=number] { -moz-appearance: textfield; }

/* 2. Custom visible focus ring (WCAG 2.4.7) */
:focus-visible {
outline: 3px solid #3b82f6; /* Tailwind blue-500 */
outline-offset: 2px;
border-radius: 4px;
}
/* Disable focus ring for non-keyboard users if not using :focus-visible */
*:focus:not(:focus-visible) {
outline: none;
}

/* 3. ARIA invalid state */
input[aria-invalid="true"], select[aria-invalid="true"] {
border-color: #dc2626; /* Tailwind red-600 */
}

/* 4. Accessible Tab styles */
[role="tablist"] {
border-bottom: 2px solid #e5e7eb;
}
[role="tab"] {
padding: 0.75rem 1rem;
font-weight: 500;
color: #6b7280;
border-bottom: 3px solid transparent;
margin-bottom: -2px;
}
[role="tab"][aria-selected="true"] {
color: #2563eb;
border-color: #2563eb;
}

/* 5. Accessible Tooltip Button */
.tooltip-btn {
display: inline-flex;
align-items: center;
justify-content: center;
width: 1.25rem;
height: 1.25rem;
border-radius: 9999px;
background-color: #e5e7eb;
color: #6b7280;
font-weight: bold;
font-size: 0.875rem;
margin-left: 0.25rem;
border: none;
cursor: pointer;
}
.tooltip-content {
display: none;
background-color: #374151;
color: white;
padding: 0.5rem 0.75rem;
border-radius: 6px;
font-size: 0.875rem;
margin-top: 0.25rem;
position: relative;
z-index: 10;
width: 100%;
}
.tooltip-content.is-active {
display: block;
}

/* 6. Print styles */
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
.no-print { display: none !important; }
}
</style>

<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Diet Plan Calculator - Calculate Your Daily Calorie Needs",
  "description": "Calculate your daily calorie needs for weight loss, maintenance, or gain based on the Mifflin-St Jeor formula. Get a personalized diet plan macro-breakdown.",
  "url": "https://calcdomain.com/diet-plan-calculator",
  "inLanguage": "en",
  "reviewedBy": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "dateModified": "2026-01-19"
}</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Health & Fitness",
      "item": "https://calcdomain.com/categories/health-fitness"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Diet Nutrition",
      "item": "https://calcdomain.com/subcategories/diet-nutrition"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Use the Diet Plan Calculator",
  "description": "A step-by-step guide to calculating your daily calorie needs and diet plan.",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Enter Personal Details",
      "text": "Input your current age, gender, height, and weight. You can use either metric or imperial units."
    },
    {
      "@type": "HowToStep",
      "name": "Select Activity Level",
      "text": "Choose the activity level that best matches your weekly exercise routine, from sedentary to extra active."
    },
    {
      "@type": "HowToStep",
      "name": "Choose Your Goal",
      "text": "Select whether you want to lose weight, maintain your current weight, or gain weight, and at what rate."
    },
    {
      "@type": "HowToStep",
      "name": "Calculate & Review Results",
      "text": "Press 'Calculate' to see your Basal Metabolic Rate (BMR), your Total Daily Energy Expenditure (TDEE), and your target daily calories based on your goal."
    },
    {
      "@type": "HowToStep",
      "name": "Review Macro-Splits",
      "text": "Use the example macronutrient tables (e.g., Balanced, Low Carb) as a starting point for structuring your diet plan."
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How accurate is this diet plan calculator?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This calculator uses the Mifflin-St Jeor equation, which is widely considered the most accurate formula for estimating Basal Metabolic Rate (BMR) in healthy adults. However, all calculators provide an estimate. Your actual energy needs can vary based on genetics, body composition, and health conditions. Use this result as a starting point and adjust based on your real-world progress."
      }
    },
    {
      "@type": "Question",
      "name": "What is the difference between BMR and TDEE?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "BMR (Basal Metabolic Rate) is the number of calories your body needs to perform its most basic functions (like breathing, circulation, and cell production) while at rest. TDEE (Total Daily Energy Expenditure) is your BMR plus all the calories you burn from physical activity, digestion, and daily tasks. Your TDEE is the 'maintenance' calorie level you need to stay at your current weight."
      }
    },
    {
      "@type": "Question",
      "name": "Why does this calculator use Mifflin-St Jeor instead of Harris-Benedict?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The Mifflin-St Jeor equation (published in 1990) has been shown in multiple studies to be more accurate for most people than the older Harris-Benedict equation (published in 1919). It is now considered the standard in many clinical and nutrition settings."
      }
    },
    {
      "@type": "Question",
      "name": "What should my macronutrient (protein, carb, fat) split be?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The ideal 'macro' split depends on your personal goals, preferences, and how your body responds. A common 'Balanced' split is 40% Carbs, 30% Protein, 30% Fat. Athletes or those on a 'Low Carb' diet might aim for 25% Carbs, 40% Protein, 35% Fat. We provide several examples, but you should experiment to find what works best for you or consult a registered dietitian."
      }
    },
    {
      "@type": "Question",
      "name": "How often should I recalculate my calorie needs?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "It's a good idea to recalculate your TDEE every time you have a significant change in weight (e.g., you lose or gain 5-10 kg / 10-20 lbs) or if your activity level changes (e.g., you start a new, more active job or begin a new workout routine). This ensures your calorie target stays aligned with your body's current needs."
      }
    }
  ]
}
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script>
  window.MathJax = { tex: { inlineMath: [['\\(','\\)'], ['</script>

<script src="https://calcdomain.com/search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm z-50">
<nav class="container mx-auto px-4 lg:px-6 py-4">


<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) + 5\]</div>
  <pre class="auditspine-mono">BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) + 5</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) - 161\]</div>
  <pre class="auditspine-mono">BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) - 161</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[TDEE = BMR \times \text{Activity Multiplier}\]</div>
  <pre class="auditspine-mono">TDEE = BMR \times \text{Activity Multiplier}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{Goal Calories} = TDEE + \text{Goal Modifier (e.g., -500 for weight loss)}\]</div>
  <pre class="auditspine-mono">\text{Goal Calories} = TDEE + \text{Goal Modifier (e.g., -500 for weight loss)}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = (10 \times 70) + (6.25 \times 165) - (5 \times 35) - 161\]</div>
  <pre class="auditspine-mono">BMR = (10 \times 70) + (6.25 \times 165) - (5 \times 35) - 161</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = 700 + 1031.25 - 175 - 161\]</div>
  <pre class="auditspine-mono">BMR = 700 + 1031.25 - 175 - 161</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">For Men: $BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) + 5$ For Women: $BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) - 161$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$TDEE = BMR \times \text{Activity Multiplier}$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$\text{Goal Calories} = TDEE + \text{Goal Modifier (e.g., -500 for weight loss)}$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$BMR = (10 \times 70) + (6.25 \times 165) - (5 \times 35) - 161$ $BMR = 700 + 1031.25 - 175 - 161$ $BMR = 1395 \text{ calories/day}$</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Health &amp; Fitness</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/health-fitness" target="_blank" rel="nofollow noopener">https://calcdomain.com/health-fitness</a></li>
<li><strong>Diet &amp; Nutrition</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/diet-nutrition" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/diet-nutrition</a></li>
<li><strong>https://doi.org/10.1093/ajcn/51.2.241</strong> — doi.org · Accessed 2026-01-19<br><a href="https://doi.org/10.1093/ajcn/51.2.241" target="_blank" rel="nofollow noopener">https://doi.org/10.1093/ajcn/51.2.241</a></li>
<li><strong>BMI Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/bmi-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/bmi-calculator</a></li>
<li><strong>Macronutrient Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/macro" target="_blank" rel="nofollow noopener">https://calcdomain.com/macro</a></li>
<li><strong>Body Fat Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/body-fat" target="_blank" rel="nofollow noopener">https://calcdomain.com/body-fat</a></li>
<li><strong>TDEE Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/tdee" target="_blank" rel="nofollow noopener">https://calcdomain.com/tdee</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
</section>

<aside class="w-full lg:w-1/3 no-print">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Based on the modern, accurate **Mifflin-St Jeor** formula.</li>
<li>Get instant calorie targets for weight loss, gain, or maintenance.</li>
<li>See example **macronutrient splits** to start planning your meals.</li>
<li>Fully accessible (WCAG 2.1 AA) and mobile-friendly design.</li>
<li>Transparent methodology with full formula and example.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Health Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="https://calcdomain.com/bmi-calculator" class="text-blue-600 hover:underline">BMI Calculator</a></li>
<li><a href="https://calcdomain.com/macro" class="text-blue-600 hover:underline">Macronutrient Calculator</a></li>
<li><a href="https://calcdomain.com/body-fat" class="text-blue-600 hover:underline">Body Fat Calculator</a></li>
<li><a href="https://calcdomain.com/tdee" class="text-blue-600 hover:underline">TDEE Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                                                                                <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>




























<script defer="">
document.addEventListener('DOMContentLoaded', () => {

// --- 1. Element Selection ---
const form = document.getElementById('calculator-ui');
const calculateBtn = document.getElementById('calculate-btn');
const resetBtn = document.getElementById('reset-btn');
const resultsContainer = document.getElementById('results-content');
const printSection = document.getElementById('print-section');

// Tabs
const tabs = document.querySelectorAll('[role="tab"]');
const tabPanels = document.querySelectorAll('[role="tabpanel"]');

// Inputs
const ageEl = document.getElementById('age');
const genderEl = document.getElementById('gender');
const activityEl = document.getElementById('activity');
const goalEl = document.getElementById('goal');

// Metric
const heightCmEl = document.getElementById('height-cm');
const weightKgEl = document.getElementById('weight-kg');
// Imperial
const heightFtEl = document.getElementById('height-ft');
const heightInEl = document.getElementById('height-in');
const weightLbsEl = document.getElementById('weight-lbs');

// Tooltips
const tooltipBtns = document.querySelectorAll('.tooltip-btn');

// State
let currentUnit = 'metric';

// --- 2. Validation Logic (WCAG) ---
const inputs = [ageEl, heightCmEl, weightKgEl, heightFtEl, heightInEl, weightLbsEl];

// Validation rules
const rules = {
'age': { min: 15, max: 80, msg: 'Please enter an age between 15 and 80.' },
'height-cm': { min: 100, max: 250, msg: 'Please enter a height between 100 and 250 cm.' },
'weight-kg': { min: 30, max: 250, msg: 'Please enter a weight between 30 and 250 kg.' },
'height-ft': { min: 3, max: 8, msg: 'Please enter feet between 3 and 8.' },
'height-in': { min: 0, max: 11.99, msg: 'Please enter inches between 0 and 11.' },
'weight-lbs': { min: 60, max: 550, msg: 'Please enter a weight between 60 and 550 lbs.' }
};

function showError(input, message) {
const errorEl = document.getElementById(input.id + '-error');
if (errorEl) {
errorEl.textContent = message;
}
input.setAttribute('aria-invalid', 'true');
}

function clearError(input) {
const errorEl = document.getElementById(input.id + '-error');
if (errorEl) {
errorEl.textContent = '';
}
input.setAttribute('aria-invalid', 'false');
}

function validateInput(input) {
if (!input.value) {
showError(input, 'This field is required.');
return false;
}
const rule = rules[input.id];
if (rule) {
const value = parseFloat(input.value);
if (value < rule.min || value > rule.max) {
showError(input, rule.msg);
return false;
}
}
clearError(input);
return true;
}

// Attach blur listeners
inputs.forEach(input => {
input.addEventListener('blur', () => validateInput(input));
});

// --- 3. Tab Switching Logic (WCAG) ---
tabs.forEach(tab => {
tab.addEventListener('click', (e) => {
e.preventDefault();
currentUnit = tab.id === 'tab-metric' ? 'metric' : 'imperial';

// Update tabs
tabs.forEach(t => t.setAttribute('aria-selected', 'false'));
tab.setAttribute('aria-selected', 'true');

// Update panels
tabPanels.forEach(panel => {
panel.classList.add('hidden');
});
document.getElementById(tab.getAttribute('aria-controls')).classList.remove('hidden');

// Update aria-required for inputs based on visible panel
const metricInputs = [heightCmEl, weightKgEl];
const imperialInputs = [heightFtEl, heightInEl, weightLbsEl];

metricInputs.forEach(input => input.setAttribute('aria-required', currentUnit === 'metric'));
imperialInputs.forEach(input => input.setAttribute('aria-required', currentUnit === 'imperial'));

// Clear errors on tab switch
[...metricInputs, ...imperialInputs].forEach(clearError);
});
});

// --- 4. Tooltip Logic (WCAG) ---
tooltipBtns.forEach(btn => {
const tooltip = document.getElementById(btn.getAttribute('aria-controls'));
if (!tooltip) return;

btn.addEventListener('click', () => {
const isExpanded = btn.getAttribute('aria-expanded') === 'true';
btn.setAttribute('aria-expanded', !isExpanded);
tooltip.classList.toggle('is-active');
});

// Hide on blur
btn.addEventListener('blur', () => {
btn.setAttribute('aria-expanded', 'false');
tooltip.classList.remove('is-active');
});
});

// --- 5. Calculation Logic ---
calculateBtn.addEventListener('click', () => {
let isValid = true;
const requiredInputs = [ageEl];

if (currentUnit === 'metric') {
requiredInputs.push(heightCmEl, weightKgEl);
} else {
requiredInputs.push(heightFtEl, heightInEl, weightLbsEl);
}

// Run validation for all visible fields
requiredInputs.forEach(input => {
if (!validateInput(input)) {
isValid = false;
}
});

if (!isValid) {
resultsContainer.innerHTML = `<h2 class="text-2xl font-bold text-gray-900 mb-4">Error</h2><p class="text-red-600">Please fix the errors in the form above to calculate your results.</p>`;
return;
}

// Get values
const age = parseFloat(ageEl.value);
const gender = genderEl.value;
const activity = parseFloat(activityEl.value);
const goalMod = parseFloat(goalEl.value);

let heightCm, weightKg;

if (currentUnit === 'metric') {
heightCm = parseFloat(heightCmEl.value);
weightKg = parseFloat(weightKgEl.value);
} else {
const feet = parseFloat(heightFtEl.value);
const inches = parseFloat(heightInEl.value) || 0;
const lbs = parseFloat(weightLbsEl.value);

heightCm = (feet * 12 + inches) * 2.54;
weightKg = lbs * 0.453592;
}

// 1. Calculate BMR (Mifflin-St Jeor)
let bmr;
if (gender === 'male') {
bmr = (10 * weightKg) + (6.25 * heightCm) - (5 * age) + 5;
} else {
// female
bmr = (10 * weightKg) + (6.25 * heightCm) - (5 * age) - 161;
}

// 2. Calculate TDEE
const tdee = bmr * activity;

// 3. Calculate Goal Calories
const goalCalories = tdee + goalMod;

// 4. Render Results
renderResults(bmr, tdee, goalCalories);
});

// --- 6. Reset Logic ---
resetBtn.addEventListener('click', () => {
form.reset();
inputs.forEach(clearError);
resultsContainer.innerHTML = `
<h2 class="text-2xl font-bold text-gray-900 mb-4">Your Results</h2>
<p class="text-gray-600">Enter your details above and click 'Calculate' to see your personalized results.</p>`;
// Reset tabs to metric
document.getElementById('tab-metric').click();
});

// --- 7. Rendering Functions ---
const fmt = (val) => new Intl.NumberFormat('en-US').format(Math.round(val));

function renderResults(bmr, tdee, goalCalories) {
resultsContainer.innerHTML = `
<h2 class="text-2xl font-bold text-gray-900 mb-6">Your Daily Calorie Plan</h2>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
<div class="result-card bg-blue-100 border-blue-200">
<h4>Your Goal Calories</h4>
<p class="text-blue-700">${fmt(goalCalories)}</p>
</div>
<div class="result-card">
<h4>Maintenance (TDEE)</h4>
<p class="text-gray-800">${fmt(tdee)}</p>
</div>
<div class="result-card">
<h4>Basal Rate (BMR)</h4>
<p class="text-gray-800">${fmt(bmr)}</p>
</div>
</div>
<div class="mt-8">
<h3 class="text-xl font-semibold text-gray-800 mb-3">Example Macronutrient Splits</h3>
<p class="text-sm text-gray-600 mb-4">Based on your **${fmt(goalCalories)} calorie goal**. 1g Protein = 4 cal, 1g Carb = 4 cal, 1g Fat = 9 cal.</p>
<div class="overflow-x-auto">
<table class="min-w-full text-sm text-left">
<thead class="bg-gray-100 text-gray-700 uppercase">
<tr>
<th class="px-4 py-2">Plan</th>
<th class="px-4 py-2">Carbs (g)</th>
<th class="px-4 py-2">Protein (g)</th>
<th class="px-4 py-2">Fat (g)</th>
</tr>
</thead>
<tbody>
${createMacroRow('Balanced (40/30/30)', goalCalories, 0.40, 0.30, 0.30)}
${createMacroRow('Low Carb (25/40/35)', goalCalories, 0.25, 0.40, 0.35)}
${createMacroRow('Low Fat (50/30/20)', goalCalories, 0.50, 0.30, 0.20)}
</tbody>
</table>
</div>
</div>
`;
// Scroll to results on mobile
if (window.innerWidth < 768) {
resultsContainer.scrollIntoView({ behavior: 'smooth' });
}
}

function createMacroRow(name, calories, c, p, f) {
const carbs = (calories * c) / 4;
const protein = (calories * p) / 4;
const fat = (calories * f) / 9;
return `
<tr class="border-b">
<td class="px-4 py-3 font-medium">${name}</td>
<td class="px-4 py-3">${fmt(carbs)}g (${fmt(calories * c)} cal)</td>
<td class="px-4 py-3">${fmt(protein)}g (${fmt(calories * p)} cal)</td>
<td class="px-4 py-3">${fmt(fat)}g (${fmt(calories * f)} cal)</td>
</tr>`;
}

// --- 8. Mobile Menu Toggle (from template) ---
const menuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
menuToggle.addEventListener('click', () => {
const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
menuToggle.setAttribute('aria-expanded', !isExpanded);
mobileMenu.classList.toggle('hidden');
});

});
</script>


</body></html>, '</script>

<script src="https://calcdomain.com/search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm z-50">
<nav class="container mx-auto px-4 lg:px-6 py-4">


<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) + 5\]</div>
  <pre class="auditspine-mono">BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) + 5</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) - 161\]</div>
  <pre class="auditspine-mono">BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) - 161</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[TDEE = BMR \times \text{Activity Multiplier}\]</div>
  <pre class="auditspine-mono">TDEE = BMR \times \text{Activity Multiplier}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{Goal Calories} = TDEE + \text{Goal Modifier (e.g., -500 for weight loss)}\]</div>
  <pre class="auditspine-mono">\text{Goal Calories} = TDEE + \text{Goal Modifier (e.g., -500 for weight loss)}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = (10 \times 70) + (6.25 \times 165) - (5 \times 35) - 161\]</div>
  <pre class="auditspine-mono">BMR = (10 \times 70) + (6.25 \times 165) - (5 \times 35) - 161</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = 700 + 1031.25 - 175 - 161\]</div>
  <pre class="auditspine-mono">BMR = 700 + 1031.25 - 175 - 161</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">For Men: $BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) + 5$ For Women: $BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) - 161$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$TDEE = BMR \times \text{Activity Multiplier}$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$\text{Goal Calories} = TDEE + \text{Goal Modifier (e.g., -500 for weight loss)}$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$BMR = (10 \times 70) + (6.25 \times 165) - (5 \times 35) - 161$ $BMR = 700 + 1031.25 - 175 - 161$ $BMR = 1395 \text{ calories/day}$</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Health &amp; Fitness</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/health-fitness" target="_blank" rel="nofollow noopener">https://calcdomain.com/health-fitness</a></li>
<li><strong>Diet &amp; Nutrition</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/diet-nutrition" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/diet-nutrition</a></li>
<li><strong>https://doi.org/10.1093/ajcn/51.2.241</strong> — doi.org · Accessed 2026-01-19<br><a href="https://doi.org/10.1093/ajcn/51.2.241" target="_blank" rel="nofollow noopener">https://doi.org/10.1093/ajcn/51.2.241</a></li>
<li><strong>BMI Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/bmi-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/bmi-calculator</a></li>
<li><strong>Macronutrient Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/macro" target="_blank" rel="nofollow noopener">https://calcdomain.com/macro</a></li>
<li><strong>Body Fat Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/body-fat" target="_blank" rel="nofollow noopener">https://calcdomain.com/body-fat</a></li>
<li><strong>TDEE Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/tdee" target="_blank" rel="nofollow noopener">https://calcdomain.com/tdee</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
</section>

<aside class="w-full lg:w-1/3 no-print">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Based on the modern, accurate **Mifflin-St Jeor** formula.</li>
<li>Get instant calorie targets for weight loss, gain, or maintenance.</li>
<li>See example **macronutrient splits** to start planning your meals.</li>
<li>Fully accessible (WCAG 2.1 AA) and mobile-friendly design.</li>
<li>Transparent methodology with full formula and example.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Health Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="https://calcdomain.com/bmi-calculator" class="text-blue-600 hover:underline">BMI Calculator</a></li>
<li><a href="https://calcdomain.com/macro" class="text-blue-600 hover:underline">Macronutrient Calculator</a></li>
<li><a href="https://calcdomain.com/body-fat" class="text-blue-600 hover:underline">Body Fat Calculator</a></li>
<li><a href="https://calcdomain.com/tdee" class="text-blue-600 hover:underline">TDEE Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                                                                <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>


























<script defer="">
document.addEventListener('DOMContentLoaded', () => {

// --- 1. Element Selection ---
const form = document.getElementById('calculator-ui');
const calculateBtn = document.getElementById('calculate-btn');
const resetBtn = document.getElementById('reset-btn');
const resultsContainer = document.getElementById('results-content');
const printSection = document.getElementById('print-section');

// Tabs
const tabs = document.querySelectorAll('[role="tab"]');
const tabPanels = document.querySelectorAll('[role="tabpanel"]');

// Inputs
const ageEl = document.getElementById('age');
const genderEl = document.getElementById('gender');
const activityEl = document.getElementById('activity');
const goalEl = document.getElementById('goal');

// Metric
const heightCmEl = document.getElementById('height-cm');
const weightKgEl = document.getElementById('weight-kg');
// Imperial
const heightFtEl = document.getElementById('height-ft');
const heightInEl = document.getElementById('height-in');
const weightLbsEl = document.getElementById('weight-lbs');

// Tooltips
const tooltipBtns = document.querySelectorAll('.tooltip-btn');

// State
let currentUnit = 'metric';

// --- 2. Validation Logic (WCAG) ---
const inputs = [ageEl, heightCmEl, weightKgEl, heightFtEl, heightInEl, weightLbsEl];

// Validation rules
const rules = {
'age': { min: 15, max: 80, msg: 'Please enter an age between 15 and 80.' },
'height-cm': { min: 100, max: 250, msg: 'Please enter a height between 100 and 250 cm.' },
'weight-kg': { min: 30, max: 250, msg: 'Please enter a weight between 30 and 250 kg.' },
'height-ft': { min: 3, max: 8, msg: 'Please enter feet between 3 and 8.' },
'height-in': { min: 0, max: 11.99, msg: 'Please enter inches between 0 and 11.' },
'weight-lbs': { min: 60, max: 550, msg: 'Please enter a weight between 60 and 550 lbs.' }
};

function showError(input, message) {
const errorEl = document.getElementById(input.id + '-error');
if (errorEl) {
errorEl.textContent = message;
}
input.setAttribute('aria-invalid', 'true');
}

function clearError(input) {
const errorEl = document.getElementById(input.id + '-error');
if (errorEl) {
errorEl.textContent = '';
}
input.setAttribute('aria-invalid', 'false');
}

function validateInput(input) {
if (!input.value) {
showError(input, 'This field is required.');
return false;
}
const rule = rules[input.id];
if (rule) {
const value = parseFloat(input.value);
if (value < rule.min || value > rule.max) {
showError(input, rule.msg);
return false;
}
}
clearError(input);
return true;
}

// Attach blur listeners
inputs.forEach(input => {
input.addEventListener('blur', () => validateInput(input));
});

// --- 3. Tab Switching Logic (WCAG) ---
tabs.forEach(tab => {
tab.addEventListener('click', (e) => {
e.preventDefault();
currentUnit = tab.id === 'tab-metric' ? 'metric' : 'imperial';

// Update tabs
tabs.forEach(t => t.setAttribute('aria-selected', 'false'));
tab.setAttribute('aria-selected', 'true');

// Update panels
tabPanels.forEach(panel => {
panel.classList.add('hidden');
});
document.getElementById(tab.getAttribute('aria-controls')).classList.remove('hidden');

// Update aria-required for inputs based on visible panel
const metricInputs = [heightCmEl, weightKgEl];
const imperialInputs = [heightFtEl, heightInEl, weightLbsEl];

metricInputs.forEach(input => input.setAttribute('aria-required', currentUnit === 'metric'));
imperialInputs.forEach(input => input.setAttribute('aria-required', currentUnit === 'imperial'));

// Clear errors on tab switch
[...metricInputs, ...imperialInputs].forEach(clearError);
});
});

// --- 4. Tooltip Logic (WCAG) ---
tooltipBtns.forEach(btn => {
const tooltip = document.getElementById(btn.getAttribute('aria-controls'));
if (!tooltip) return;

btn.addEventListener('click', () => {
const isExpanded = btn.getAttribute('aria-expanded') === 'true';
btn.setAttribute('aria-expanded', !isExpanded);
tooltip.classList.toggle('is-active');
});

// Hide on blur
btn.addEventListener('blur', () => {
btn.setAttribute('aria-expanded', 'false');
tooltip.classList.remove('is-active');
});
});

// --- 5. Calculation Logic ---
calculateBtn.addEventListener('click', () => {
let isValid = true;
const requiredInputs = [ageEl];

if (currentUnit === 'metric') {
requiredInputs.push(heightCmEl, weightKgEl);
} else {
requiredInputs.push(heightFtEl, heightInEl, weightLbsEl);
}

// Run validation for all visible fields
requiredInputs.forEach(input => {
if (!validateInput(input)) {
isValid = false;
}
});

if (!isValid) {
resultsContainer.innerHTML = `<h2 class="text-2xl font-bold text-gray-900 mb-4">Error</h2><p class="text-red-600">Please fix the errors in the form above to calculate your results.</p>`;
return;
}

// Get values
const age = parseFloat(ageEl.value);
const gender = genderEl.value;
const activity = parseFloat(activityEl.value);
const goalMod = parseFloat(goalEl.value);

let heightCm, weightKg;

if (currentUnit === 'metric') {
heightCm = parseFloat(heightCmEl.value);
weightKg = parseFloat(weightKgEl.value);
} else {
const feet = parseFloat(heightFtEl.value);
const inches = parseFloat(heightInEl.value) || 0;
const lbs = parseFloat(weightLbsEl.value);

heightCm = (feet * 12 + inches) * 2.54;
weightKg = lbs * 0.453592;
}

// 1. Calculate BMR (Mifflin-St Jeor)
let bmr;
if (gender === 'male') {
bmr = (10 * weightKg) + (6.25 * heightCm) - (5 * age) + 5;
} else {
// female
bmr = (10 * weightKg) + (6.25 * heightCm) - (5 * age) - 161;
}

// 2. Calculate TDEE
const tdee = bmr * activity;

// 3. Calculate Goal Calories
const goalCalories = tdee + goalMod;

// 4. Render Results
renderResults(bmr, tdee, goalCalories);
});

// --- 6. Reset Logic ---
resetBtn.addEventListener('click', () => {
form.reset();
inputs.forEach(clearError);
resultsContainer.innerHTML = `
<h2 class="text-2xl font-bold text-gray-900 mb-4">Your Results</h2>
<p class="text-gray-600">Enter your details above and click 'Calculate' to see your personalized results.</p>`;
// Reset tabs to metric
document.getElementById('tab-metric').click();
});

// --- 7. Rendering Functions ---
const fmt = (val) => new Intl.NumberFormat('en-US').format(Math.round(val));

function renderResults(bmr, tdee, goalCalories) {
resultsContainer.innerHTML = `
<h2 class="text-2xl font-bold text-gray-900 mb-6">Your Daily Calorie Plan</h2>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
<div class="result-card bg-blue-100 border-blue-200">
<h4>Your Goal Calories</h4>
<p class="text-blue-700">${fmt(goalCalories)}</p>
</div>
<div class="result-card">
<h4>Maintenance (TDEE)</h4>
<p class="text-gray-800">${fmt(tdee)}</p>
</div>
<div class="result-card">
<h4>Basal Rate (BMR)</h4>
<p class="text-gray-800">${fmt(bmr)}</p>
</div>
</div>
<div class="mt-8">
<h3 class="text-xl font-semibold text-gray-800 mb-3">Example Macronutrient Splits</h3>
<p class="text-sm text-gray-600 mb-4">Based on your **${fmt(goalCalories)} calorie goal**. 1g Protein = 4 cal, 1g Carb = 4 cal, 1g Fat = 9 cal.</p>
<div class="overflow-x-auto">
<table class="min-w-full text-sm text-left">
<thead class="bg-gray-100 text-gray-700 uppercase">
<tr>
<th class="px-4 py-2">Plan</th>
<th class="px-4 py-2">Carbs (g)</th>
<th class="px-4 py-2">Protein (g)</th>
<th class="px-4 py-2">Fat (g)</th>
</tr>
</thead>
<tbody>
${createMacroRow('Balanced (40/30/30)', goalCalories, 0.40, 0.30, 0.30)}
${createMacroRow('Low Carb (25/40/35)', goalCalories, 0.25, 0.40, 0.35)}
${createMacroRow('Low Fat (50/30/20)', goalCalories, 0.50, 0.30, 0.20)}
</tbody>
</table>
</div>
</div>
`;
// Scroll to results on mobile
if (window.innerWidth < 768) {
resultsContainer.scrollIntoView({ behavior: 'smooth' });
}
}

function createMacroRow(name, calories, c, p, f) {
const carbs = (calories * c) / 4;
const protein = (calories * p) / 4;
const fat = (calories * f) / 9;
return `
<tr class="border-b">
<td class="px-4 py-3 font-medium">${name}</td>
<td class="px-4 py-3">${fmt(carbs)}g (${fmt(calories * c)} cal)</td>
<td class="px-4 py-3">${fmt(protein)}g (${fmt(calories * p)} cal)</td>
<td class="px-4 py-3">${fmt(fat)}g (${fmt(calories * f)} cal)</td>
</tr>`;
}

// --- 8. Mobile Menu Toggle (from template) ---
const menuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
menuToggle.addEventListener('click', () => {
const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
menuToggle.setAttribute('aria-expanded', !isExpanded);
mobileMenu.classList.toggle('hidden');
});

});
</script>


</body></html>]], displayMath: [['\\[','\\]']] }, svg: { fontCache: 'global' } };
</script>
<script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

<script src="https://calcdomain.com/search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm z-50">
<nav class="container mx-auto px-4 lg:px-6 py-4">


<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) + 5\]</div>
  <pre class="auditspine-mono">BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) + 5</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) - 161\]</div>
  <pre class="auditspine-mono">BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) - 161</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[TDEE = BMR \times \text{Activity Multiplier}\]</div>
  <pre class="auditspine-mono">TDEE = BMR \times \text{Activity Multiplier}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{Goal Calories} = TDEE + \text{Goal Modifier (e.g., -500 for weight loss)}\]</div>
  <pre class="auditspine-mono">\text{Goal Calories} = TDEE + \text{Goal Modifier (e.g., -500 for weight loss)}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = (10 \times 70) + (6.25 \times 165) - (5 \times 35) - 161\]</div>
  <pre class="auditspine-mono">BMR = (10 \times 70) + (6.25 \times 165) - (5 \times 35) - 161</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[BMR = 700 + 1031.25 - 175 - 161\]</div>
  <pre class="auditspine-mono">BMR = 700 + 1031.25 - 175 - 161</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">For Men: $BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) + 5$ For Women: $BMR = (10 \times \text{weight in kg}) + (6.25 \times \text{height in cm}) - (5 \times \text{age in years}) - 161$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$TDEE = BMR \times \text{Activity Multiplier}$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$\text{Goal Calories} = TDEE + \text{Goal Modifier (e.g., -500 for weight loss)}$</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$BMR = (10 \times 70) + (6.25 \times 165) - (5 \times 35) - 161$ $BMR = 700 + 1031.25 - 175 - 161$ $BMR = 1395 \text{ calories/day}$</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Health &amp; Fitness</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/health-fitness" target="_blank" rel="nofollow noopener">https://calcdomain.com/health-fitness</a></li>
<li><strong>Diet &amp; Nutrition</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/diet-nutrition" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/diet-nutrition</a></li>
<li><strong>https://doi.org/10.1093/ajcn/51.2.241</strong> — doi.org · Accessed 2026-01-19<br><a href="https://doi.org/10.1093/ajcn/51.2.241" target="_blank" rel="nofollow noopener">https://doi.org/10.1093/ajcn/51.2.241</a></li>
<li><strong>BMI Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/bmi-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/bmi-calculator</a></li>
<li><strong>Macronutrient Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/macro" target="_blank" rel="nofollow noopener">https://calcdomain.com/macro</a></li>
<li><strong>Body Fat Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/body-fat" target="_blank" rel="nofollow noopener">https://calcdomain.com/body-fat</a></li>
<li><strong>TDEE Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/tdee" target="_blank" rel="nofollow noopener">https://calcdomain.com/tdee</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
</section>

<aside class="w-full lg:w-1/3 no-print">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Based on the modern, accurate **Mifflin-St Jeor** formula.</li>
<li>Get instant calorie targets for weight loss, gain, or maintenance.</li>
<li>See example **macronutrient splits** to start planning your meals.</li>
<li>Fully accessible (WCAG 2.1 AA) and mobile-friendly design.</li>
<li>Transparent methodology with full formula and example.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Health Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="https://calcdomain.com/bmi-calculator" class="text-blue-600 hover:underline">BMI Calculator</a></li>
<li><a href="https://calcdomain.com/macro" class="text-blue-600 hover:underline">Macronutrient Calculator</a></li>
<li><a href="https://calcdomain.com/body-fat" class="text-blue-600 hover:underline">Body Fat Calculator</a></li>
<li><a href="https://calcdomain.com/tdee" class="text-blue-600 hover:underline">TDEE Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                                                                <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>


























<script defer="">
document.addEventListener('DOMContentLoaded', () => {

// --- 1. Element Selection ---
const form = document.getElementById('calculator-ui');
const calculateBtn = document.getElementById('calculate-btn');
const resetBtn = document.getElementById('reset-btn');
const resultsContainer = document.getElementById('results-content');
const printSection = document.getElementById('print-section');

// Tabs
const tabs = document.querySelectorAll('[role="tab"]');
const tabPanels = document.querySelectorAll('[role="tabpanel"]');

// Inputs
const ageEl = document.getElementById('age');
const genderEl = document.getElementById('gender');
const activityEl = document.getElementById('activity');
const goalEl = document.getElementById('goal');

// Metric
const heightCmEl = document.getElementById('height-cm');
const weightKgEl = document.getElementById('weight-kg');
// Imperial
const heightFtEl = document.getElementById('height-ft');
const heightInEl = document.getElementById('height-in');
const weightLbsEl = document.getElementById('weight-lbs');

// Tooltips
const tooltipBtns = document.querySelectorAll('.tooltip-btn');

// State
let currentUnit = 'metric';

// --- 2. Validation Logic (WCAG) ---
const inputs = [ageEl, heightCmEl, weightKgEl, heightFtEl, heightInEl, weightLbsEl];

// Validation rules
const rules = {
'age': { min: 15, max: 80, msg: 'Please enter an age between 15 and 80.' },
'height-cm': { min: 100, max: 250, msg: 'Please enter a height between 100 and 250 cm.' },
'weight-kg': { min: 30, max: 250, msg: 'Please enter a weight between 30 and 250 kg.' },
'height-ft': { min: 3, max: 8, msg: 'Please enter feet between 3 and 8.' },
'height-in': { min: 0, max: 11.99, msg: 'Please enter inches between 0 and 11.' },
'weight-lbs': { min: 60, max: 550, msg: 'Please enter a weight between 60 and 550 lbs.' }
};

function showError(input, message) {
const errorEl = document.getElementById(input.id + '-error');
if (errorEl) {
errorEl.textContent = message;
}
input.setAttribute('aria-invalid', 'true');
}

function clearError(input) {
const errorEl = document.getElementById(input.id + '-error');
if (errorEl) {
errorEl.textContent = '';
}
input.setAttribute('aria-invalid', 'false');
}

function validateInput(input) {
if (!input.value) {
showError(input, 'This field is required.');
return false;
}
const rule = rules[input.id];
if (rule) {
const value = parseFloat(input.value);
if (value < rule.min || value > rule.max) {
showError(input, rule.msg);
return false;
}
}
clearError(input);
return true;
}

// Attach blur listeners
inputs.forEach(input => {
input.addEventListener('blur', () => validateInput(input));
});

// --- 3. Tab Switching Logic (WCAG) ---
tabs.forEach(tab => {
tab.addEventListener('click', (e) => {
e.preventDefault();
currentUnit = tab.id === 'tab-metric' ? 'metric' : 'imperial';

// Update tabs
tabs.forEach(t => t.setAttribute('aria-selected', 'false'));
tab.setAttribute('aria-selected', 'true');

// Update panels
tabPanels.forEach(panel => {
panel.classList.add('hidden');
});
document.getElementById(tab.getAttribute('aria-controls')).classList.remove('hidden');

// Update aria-required for inputs based on visible panel
const metricInputs = [heightCmEl, weightKgEl];
const imperialInputs = [heightFtEl, heightInEl, weightLbsEl];

metricInputs.forEach(input => input.setAttribute('aria-required', currentUnit === 'metric'));
imperialInputs.forEach(input => input.setAttribute('aria-required', currentUnit === 'imperial'));

// Clear errors on tab switch
[...metricInputs, ...imperialInputs].forEach(clearError);
});
});

// --- 4. Tooltip Logic (WCAG) ---
tooltipBtns.forEach(btn => {
const tooltip = document.getElementById(btn.getAttribute('aria-controls'));
if (!tooltip) return;

btn.addEventListener('click', () => {
const isExpanded = btn.getAttribute('aria-expanded') === 'true';
btn.setAttribute('aria-expanded', !isExpanded);
tooltip.classList.toggle('is-active');
});

// Hide on blur
btn.addEventListener('blur', () => {
btn.setAttribute('aria-expanded', 'false');
tooltip.classList.remove('is-active');
});
});

// --- 5. Calculation Logic ---
calculateBtn.addEventListener('click', () => {
let isValid = true;
const requiredInputs = [ageEl];

if (currentUnit === 'metric') {
requiredInputs.push(heightCmEl, weightKgEl);
} else {
requiredInputs.push(heightFtEl, heightInEl, weightLbsEl);
}

// Run validation for all visible fields
requiredInputs.forEach(input => {
if (!validateInput(input)) {
isValid = false;
}
});

if (!isValid) {
resultsContainer.innerHTML = `<h2 class="text-2xl font-bold text-gray-900 mb-4">Error</h2><p class="text-red-600">Please fix the errors in the form above to calculate your results.</p>`;
return;
}

// Get values
const age = parseFloat(ageEl.value);
const gender = genderEl.value;
const activity = parseFloat(activityEl.value);
const goalMod = parseFloat(goalEl.value);

let heightCm, weightKg;

if (currentUnit === 'metric') {
heightCm = parseFloat(heightCmEl.value);
weightKg = parseFloat(weightKgEl.value);
} else {
const feet = parseFloat(heightFtEl.value);
const inches = parseFloat(heightInEl.value) || 0;
const lbs = parseFloat(weightLbsEl.value);

heightCm = (feet * 12 + inches) * 2.54;
weightKg = lbs * 0.453592;
}

// 1. Calculate BMR (Mifflin-St Jeor)
let bmr;
if (gender === 'male') {
bmr = (10 * weightKg) + (6.25 * heightCm) - (5 * age) + 5;
} else {
// female
bmr = (10 * weightKg) + (6.25 * heightCm) - (5 * age) - 161;
}

// 2. Calculate TDEE
const tdee = bmr * activity;

// 3. Calculate Goal Calories
const goalCalories = tdee + goalMod;

// 4. Render Results
renderResults(bmr, tdee, goalCalories);
});

// --- 6. Reset Logic ---
resetBtn.addEventListener('click', () => {
form.reset();
inputs.forEach(clearError);
resultsContainer.innerHTML = `
<h2 class="text-2xl font-bold text-gray-900 mb-4">Your Results</h2>
<p class="text-gray-600">Enter your details above and click 'Calculate' to see your personalized results.</p>`;
// Reset tabs to metric
document.getElementById('tab-metric').click();
});

// --- 7. Rendering Functions ---
const fmt = (val) => new Intl.NumberFormat('en-US').format(Math.round(val));

function renderResults(bmr, tdee, goalCalories) {
resultsContainer.innerHTML = `
<h2 class="text-2xl font-bold text-gray-900 mb-6">Your Daily Calorie Plan</h2>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
<div class="result-card bg-blue-100 border-blue-200">
<h4>Your Goal Calories</h4>
<p class="text-blue-700">${fmt(goalCalories)}</p>
</div>
<div class="result-card">
<h4>Maintenance (TDEE)</h4>
<p class="text-gray-800">${fmt(tdee)}</p>
</div>
<div class="result-card">
<h4>Basal Rate (BMR)</h4>
<p class="text-gray-800">${fmt(bmr)}</p>
</div>
</div>
<div class="mt-8">
<h3 class="text-xl font-semibold text-gray-800 mb-3">Example Macronutrient Splits</h3>
<p class="text-sm text-gray-600 mb-4">Based on your **${fmt(goalCalories)} calorie goal**. 1g Protein = 4 cal, 1g Carb = 4 cal, 1g Fat = 9 cal.</p>
<div class="overflow-x-auto">
<table class="min-w-full text-sm text-left">
<thead class="bg-gray-100 text-gray-700 uppercase">
<tr>
<th class="px-4 py-2">Plan</th>
<th class="px-4 py-2">Carbs (g)</th>
<th class="px-4 py-2">Protein (g)</th>
<th class="px-4 py-2">Fat (g)</th>
</tr>
</thead>
<tbody>
${createMacroRow('Balanced (40/30/30)', goalCalories, 0.40, 0.30, 0.30)}
${createMacroRow('Low Carb (25/40/35)', goalCalories, 0.25, 0.40, 0.35)}
${createMacroRow('Low Fat (50/30/20)', goalCalories, 0.50, 0.30, 0.20)}
</tbody>
</table>
</div>
</div>
`;
// Scroll to results on mobile
if (window.innerWidth < 768) {
resultsContainer.scrollIntoView({ behavior: 'smooth' });
}
}

function createMacroRow(name, calories, c, p, f) {
const carbs = (calories * c) / 4;
const protein = (calories * p) / 4;
const fat = (calories * f) / 9;
return `
<tr class="border-b">
<td class="px-4 py-3 font-medium">${name}</td>
<td class="px-4 py-3">${fmt(carbs)}g (${fmt(calories * c)} cal)</td>
<td class="px-4 py-3">${fmt(protein)}g (${fmt(calories * p)} cal)</td>
<td class="px-4 py-3">${fmt(fat)}g (${fmt(calories * f)} cal)</td>
</tr>`;
}

// --- 8. Mobile Menu Toggle (from template) ---
const menuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
menuToggle.addEventListener('click', () => {
const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
menuToggle.setAttribute('aria-expanded', !isExpanded);
mobileMenu.classList.toggle('hidden');
});

});
</script>


</body></html>
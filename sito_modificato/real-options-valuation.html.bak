<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/real-options-valuation" />
    <title>Real Options Valuation Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Real Options Valuation Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Real Options Valuation Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Real Options Valuation Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/real-options-valuation" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Real Options Valuation Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Real Options Valuation Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "International Personal Finance", "item": "https://calcdomain.com/subcategories/finance-international-personal"}, {"@type": "ListItem", "position": 4, "name": "Real Options Valuation Calculator", "item": "https://calcdomain.com/real-options-valuation"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/finance-international-personal" class="text-blue-600 hover:underline">International Personal Finance</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Real Options Valuation Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl font-bold mb-2">
                Real Options Valuation Calculator
              </h1>
              <p class="text-gray-700">
                Extend traditional NPV by valuing managerial flexibility using
                option pricing (Black–Scholes and binomial tree). Model,
                expand, abandon, and switch options in one place.
              </p>
            </header>

            <!-- Tabs -->
            <div class="mb-4 border-b border-gray-200">
              <nav
                class="-mb-px flex flex-wrap gap-2"
                aria-label="Real options modes"
              >
                <button
                  type="button"
                  data-tab="tab-bsm"
                  class="tab-btn inline-flex items-center px-3 py-2 border-b-2 text-sm font-medium tab-active"
                >
                  Black–Scholes (Single Option)
                </button>
                <button
                  type="button"
                  data-tab="tab-binomial"
                  class="tab-btn inline-flex items-center px-3 py-2 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"
                >
                  Binomial Tree (Multi-Stage)
                </button>
                <button
                  type="button"
                  data-tab="tab-npv"
                  class="tab-btn inline-flex items-center px-3 py-2 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"
                >
                  Base NPV + Real Options
                </button>
              </nav>
            </div>

            <!-- Black–Scholes Tab -->
            <section id="tab-bsm" class="tab-panel">
              <h2 class="text-xl font-semibold mb-3">
                Real Option Value – Black–Scholes Model
              </h2>
              <p class="text-sm text-gray-700 mb-4">
                Use this mode when the project flexibility can be approximated
                as a single European option (exercise only at maturity), such as
                a <strong>defer</strong> or <strong>expand</strong> option.
              </p>

              <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Option type</label
                  >
                  <select
                    id="bsm-option-type"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                  >
                    <option value="call">
                      Call (e.g., expand,, switch up)
                    </option>
                    <option value="put">Put (e.g., abandon, contract)</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Underlying project value S<sub>0</sub> (present value of
                    expected cash flows)</label
                  >
                  <input
                    id="bsm-s"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    placeholder="e.g., 100"
                    value="100"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Exercise cost / strike K (investment or salvage
                    value)</label
                  >
                  <input
                    id="bsm-k"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    placeholder="e.g., 80"
                    value="80"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Time to expiration T (years)</label
                  >
                  <input
                    id="bsm-t"
                    type="number"
                    step="0.01"
                    min="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    placeholder="e.g., 3"
                    value="3"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Volatility σ (annualized, %)</label
                  >
                  <input
                    id="bsm-sigma"
                    type="number"
                    step="0.01"
                    min="0"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    placeholder="e.g., 30"
                    value="30"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Risk-free rate r (annual, %)</label
                  >
                  <input
                    id="bsm-r"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    placeholder="e.g., 4"
                    value="4"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Dividend / convenience yield q (annual, %, optional)</label
                  >
                  <input
                    id="bsm-q"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    placeholder="0 if unknown"
                    value="0"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Base project NPV without options (optional)</label
                  >
                  <input
                    id="bsm-base-npv"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    placeholder="e.g., -10"
                  />
                </div>
              </div>

              <button
                id="bsm-calc-btn"
                type="button"
                class="w-full md:w-auto px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700"
              >
                Calculate real option value
              </button>

              <div id="bsm-results" class="mt-4 hidden">
                <h3 class="text-lg font-semibold mb-2">Results</h3>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                  <div class="bg-gray-50 border border-gray-200 rounded-md p-3">
                    <p class="font-medium mb-1">Real option value</p>
                    <p
                      id="bsm-option-value"
                      class="text-xl font-semibold text-blue-700"
                    ></p>
                    <p class="text-gray-600 mt-1 text-xs">
                      This is the value of the managerial flexibility modeled as
                      a financial option.
                    </p>
                  </div>
                  <div class="bg-gray-50 border border-gray-200 rounded-md p-3">
                    <p class="font-medium mb-1">
                      Expanded NPV (base NPV + option)
                    </p>
                    <p
                      id="bsm-expanded-npv"
                      class="text-xl font-semibold text-green-700"
                    ></p>
                    <p class="text-gray-600 mt-1 text-xs">
                      If you entered a base NPV, this shows the total project
                      value including flexibility.
                    </p>
                  </div>
                </div>
                <div class="mt-3 text-xs text-gray-600">
                  <p>
                    <span class="font-semibold">Diagnostics:</span> d<sub
                      >1</sub
                    >
                    = <span id="bsm-d1"></span>, d<sub>2</sub> =
                    <span id="bsm-d2"></span>, N(d<sub>1</sub>) =
                    <span id="bsm-nd1"></span>, N(d<sub>2</sub>) =
                    <span id="bsm-nd2"></span>
                  </p>
                </div>
              </div>
            </section>

            <!-- Binomial Tab -->
            <section id="tab-binomial" class="tab-panel hidden">
              <h2 class="text-xl font-semibold mb-3">
                Real Option Value – Binomial Tree
              </h2>
              <p class="text-sm text-gray-700 mb-4">
                Use this mode for <strong>multi-stage projects</strong> or
                options that can be exercised early (American-style), such as
                staged R&amp;D, expansion in phases, or abandonment at
                intermediate dates.
              </p>

              <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Option type</label
                  >
                  <select
                    id="binom-option-type"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                  >
                    <option value="call">Call (expand /)</option>
                    <option value="put">Put (abandon / contract)</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Current project value S<sub>0</sub></label
                  >
                  <input
                    id="binom-s"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    value="100"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Exercise cost / strike K</label
                  >
                  <input
                    id="binom-k"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    value="80"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Total time to maturity T (years)</label
                  >
                  <input
                    id="binom-t"
                    type="number"
                    step="0.01"
                    min="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    value="3"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Annual volatility σ (%)</label
                  >
                  <input
                    id="binom-sigma"
                    type="number"
                    step="0.01"
                    min="0"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    value="30"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Risk-free rate r (annual, %)</label
                  >
                  <input
                    id="binom-r"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    value="4"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Dividend / convenience yield q (annual, %, optional)</label
                  >
                  <input
                    id="binom-q"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    value="0"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Number of time steps N (1–50)</label
                  >
                  <input
                    id="binom-steps"
                    type="number"
                    step="1"
                    min="1"
                    max="50"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    value="10"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Base project NPV without options (optional)</label
                  >
                  <input
                    id="binom-base-npv"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                  />
                </div>
              </div>

              <button
                id="binom-calc-btn"
                type="button"
                class="w-full md:w-auto px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700"
              >
                Calculate binomial real option value
              </button>

              <div id="binom-results" class="mt-4 hidden">
                <h3 class="text-lg font-semibold mb-2">Results</h3>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                  <div class="bg-gray-50 border border-gray-200 rounded-md p-3">
                    <p class="font-medium mb-1">Real option value (binomial)</p>
                    <p
                      id="binom-option-value"
                      class="text-xl font-semibold text-blue-700"
                    ></p>
                    <p class="text-gray-600 mt-1 text-xs">
                      Computed using a risk-neutral binomial tree with possible
                      early exercise at each node.
                    </p>
                  </div>
                  <div class="bg-gray-50 border border-gray-200 rounded-md p-3">
                    <p class="font-medium mb-1">
                      Expanded NPV (base NPV + option)
                    </p>
                    <p
                      id="binom-expanded-npv"
                      class="text-xl font-semibold text-green-700"
                    ></p>
                  </div>
                </div>
                <div class="mt-3 text-xs text-gray-600 space-y-1">
                  <p>
                    <span class="font-semibold">Tree parameters:</span> u =
                    <span id="binom-u"></span>, d = <span id="binom-d"></span>,
                    Δt = <span id="binom-dt"></span>, risk-neutral p =
                    <span id="binom-p"></span>
                  </p>
                </div>
              </div>
            </section>

            <!-- NPV + Real Options Tab -->
            <section id="tab-npv" class="tab-panel hidden">
              <h2 class="text-xl font-semibold mb-3">
                Base NPV and Expanded NPV with Real Options
              </h2>
              <p class="text-sm text-gray-700 mb-4">
                Use this mode to quickly compare a project’s
                <strong>static NPV</strong> with its
                <strong>expanded NPV</strong> once you add one or more real
                options (from the other tabs or your own analysis).
              </p>

              <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Initial investment I<sub>0</sub></label
                  >
                  <input
                    id="npv-investment"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    placeholder="e.g., 100"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Discount rate r (%, annual)</label
                  >
                  <input
                    id="npv-discount-rate"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    placeholder="e.g., 10"
                    value="10"
                  />
                </div>
              </div>

              <div class="mb-3">
                <label class="block text-sm font-medium text-gray-700 mb-1"
                  >Expected annual cash flows (up to 10 years)</label
                >
                <p class="text-xs text-gray-600 mb-1">
                  Enter comma-separated values. Example:
                  <code>30, 35, 40, 45, 50</code>
                </p>
                <input
                  id="npv-cashflows"
                  type="text"
                  class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                  placeholder="e.g., 30, 35, 40, 45, 50"
                />
              </div>

              <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Total value of real options (sum of all options)</label
                  >
                  <input
                    id="npv-real-options"
                    type="number"
                    step="0.01"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"
                    placeholder="e.g., 15"
                  />
                </div>
                <div class="flex items-end">
                  <button
                    id="npv-calc-btn"
                    type="button"
                    class="w-full md:w-auto px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700"
                  >
                    Calculate base & expanded NPV
                  </button>
                </div>
              </div>

              <div id="npv-results" class="mt-4 hidden">
                <h3 class="text-lg font-semibold mb-2">Results</h3>
                <div class="grid md:grid-cols-3 gap-4 text-sm">
                  <div class="bg-gray-50 border border-gray-200 rounded-md p-3">
                    <p class="font-medium mb-1">Base NPV (no options)</p>
                    <p
                      id="npv-base"
                      class="text-xl font-semibold text-gray-900"
                    ></p>
                  </div>
                  <div class="bg-gray-50 border border-gray-200 rounded-md p-3">
                    <p class="font-medium mb-1">Real options value</p>
                    <p
                      id="npv-options-value"
                      class="text-xl font-semibold text-blue-700"
                    ></p>
                  </div>
                  <div class="bg-gray-50 border border-gray-200 rounded-md p-3">
                    <p class="font-medium mb-1">Expanded NPV</p>
                    <p
                      id="npv-expanded"
                      class="text-xl font-semibold text-green-700"
                    ></p>
                  </div>
                </div>
              </div>
            </section>

            <!-- Explanatory Content -->
            <section class="prose mt-8">
              <h2>How this Real Options Valuation Calculator Works</h2>
              <p>
                Traditional discounted cash flow (DCF) and net present value
                (NPV) analysis treat investment decisions as now-or-never with
                fixed cash flows. In reality, managers can
                <strong>delay, expand, contract, abandon, or switch</strong>
                projects as uncertainty resolves. These flexibilities behave
                like financial options and can be valued using option pricing
                tools.
              </p>
              <p>This calculator provides three complementary views:</p>
              <ul>
                <li>
                  <strong>Black–Scholes mode</strong> – values a single
                  European-style real option (e.g., or expand).
                </li>
                <li>
                  <strong>Binomial tree mode</strong> – values American-style
                  options with possible early exercise and multiple decision
                  points.
                </li>
                <li>
                  <strong>NPV + real options mode</strong> – combines base NPV
                  with the total value of one or more options to obtain
                  <em>expanded NPV</em>.
                </li>
              </ul>

              <h2>1. Black–Scholes Real Option Valuation</h2>
              <p>
                In the Black–Scholes framework, a real option is mapped to a
                financial option:
              </p>
              <ul>
                <li>
                  <strong>Underlying S<sub>0</sub></strong
                  >: present value of expected project cash flows if fully
                  implemented.
                </li>
                <li>
                  <strong>Strike K</strong>: investment cost (for a call) or
                  salvage value / remaining liability (for a put).
                </li>
                <li>
                  <strong>Time to expiration T</strong>: how long management can
                  wait before the decision expires.
                </li>
                <li>
                  <strong>Volatility σ</strong>: uncertainty (standard
                  deviation) of project value.
                </li>
                <li>
                  <strong>Risk-free rate r</strong>: continuously compounded
                  risk-free interest rate.
                </li>
                <li>
                  <strong>Dividend yield q</strong>: cash flows or opportunity
                  cost of waiting (e.g., lost cash flows whilering).
                </li>
              </ul>

              <div class="formula-box">
                <p class="font-semibold mb-1">
                  Black–Scholes formulas (with continuous dividend yield q)
                </p>
                <p>
                  \( d_1 = \dfrac{\ln(S_0 / K) + (r - q +
                  \tfrac{1}{2}\sigma^2)T}{\sigma \sqrt{T}} \)
                  <br />
                  \( d_2 = d_1 - \sigma \sqrt{T} \)
                </p>
                <p>
                  Call option value: \( C = S_0 e^{-qT} N(d_1) - K e^{-rT}
                  N(d_2) \)
                  <br />
                  Put option value: \( P = K e^{-rT} N(-d_2) - S_0 e^{-qT}
                  N(-d_1) \)
                </p>
              </div>

              <p>
                In this calculator, you can choose <strong>Call</strong> for
                options to expand,, or switch into a project, and
                <strong>Put</strong> for options to abandon or contract. If you
                enter a base NPV, the tool also shows the
                <strong>expanded NPV = base NPV + real option value</strong>.
              </p>

              <h2>2. Binomial Tree Real Options Valuation</h2>
              <p>
                The binomial model is more flexible and better suited for
                multi-stage projects and early exercise. Time is divided into
                <em>N</em> steps of length Δt, and at each step the project
                value can move up or down:
              </p>
              <div class="formula-box">
                <p class="font-semibold mb-1">Binomial parameters</p>
                <p>
                  \( \Delta t = \dfrac{T}{N} \)
                  <br />
                  \( u = e^{\sigma \sqrt{\Delta t}} \), &nbsp; \( d = e^{-\sigma
                  \sqrt{\Delta t}} = \dfrac{1}{u} \)
                  <br />
                  Risk-neutral probability: \( p = \dfrac{e^{(r - q)\Delta t} -
                  d}{u - d} \)
                </p>
              </div>
              <p>At maturity, the option payoff is:</p>
              <ul>
                <li>Call: \( \max(S_T - K, 0) \)</li>
                <li>Put: \( \max(K - S_T, 0) \)</li>
              </ul>
              <p>
                The option value at earlier nodes is computed by backward
                induction:
              </p>
              <div class="formula-box">
                <p>
                  Continuation value: \( V_{\text{cont}} = e^{-r \Delta t}
                  \left( p V_{\text{up}} + (1-p) V_{\text{down}} \right) \)
                  <br />
                  American-style value: \( V = \max(\text{immediate payoff},
                  V_{\text{cont}}) \)
                </p>
              </div>
              <p>
                This captures the value of <strong>early exercise</strong>, such
                as abandoning a project if conditions deteriorate or expanding
                early if conditions are favorable.
              </p>

              <h2>3. Base NPV vs. Expanded NPV</h2>
              <p>The NPV tab computes the standard discounted cash flow NPV:</p>
              <div class="formula-box">
                <p>
                  \( \text{NPV} = -I_0 + \sum_{t=1}^{n} \dfrac{CF_t}{(1+r)^t} \)
                </p>
              </div>
              <p>
                You can then add the total value of all real options (from
                Black–Scholes, binomial, or other analyses) to obtain:
              </p>
              <div class="formula-box">
                <p>
                  \( \text{Expanded NPV} = \text{Base NPV} + \text{Real Options
                  Value} \)
                </p>
              </div>
              <p>
                A project with negative base NPV but high strategic flexibility
                may still have a positive expanded NPV.
              </p>

              <h2>Typical Real Options in Corporate Finance</h2>
              <ul>
                <li>
                  <strong>Option to</strong> – wait for more information
                  before committing capital.
                </li>
                <li>
                  <strong>Option to expand</strong> – scale up production or
                  enter new markets if demand is strong.
                </li>
                <li>
                  <strong>Option to contract</strong> – scale down operations if
                  conditions worsen.
                </li>
                <li>
                  <strong>Option to abandon</strong> – terminate a project and
                  recover salvage value.
                </li>
                <li>
                  <strong>Switching options</strong> – switch inputs, outputs,
                  or technologies depending on prices.
                </li>
                <li>
                  <strong>Growth options</strong> – initial investments that
                  create follow-on opportunities (platforms, R&amp;D,
                  infrastructure).
                </li>
              </ul>

              <h2>Worked Example</h2>
              <p>
                Suppose a firm can invest in a pilot project that, if
                successful, allows a large-scale rollout:
              </p>
              <ul>
                <li>
                  Present value of full-scale project cash flows: S<sub>0</sub>
                  = 100
                </li>
                <li>Expansion cost (strike): K = 80</li>
                <li>Time until expansion decision: T = 3 years</li>
                <li>Volatility of project value: σ = 30%</li>
                <li>Risk-free rate: r = 4%</li>
                <li>
                  Dividend yield / convenience yield: q = 0 (no cash flows while
                  waiting)
                </li>
              </ul>
              <p>
                Enter these in the Black–Scholes tab as a <strong>Call</strong>.
                The calculator will return the option value (e.g., around 33–35
                depending on parameters). If the pilot project itself has a
                slightly negative NPV, the <strong>growth option</strong> may
                still justify proceeding.
              </p>

              <h2>Limitations and Best Practices</h2>
              <ul>
                <li>
                  Real options models are sensitive to
                  <strong>volatility</strong> and
                  <strong>underlying value</strong> estimates. Use scenario
                  analysis and stress testing.
                </li>
                <li>
                  Not all managerial flexibilities are easily mapped to standard
                  options; sometimes a <strong>decision tree</strong> or
                  simulation is more appropriate.
                </li>
                <li>
                  Ensure consistency between cash flows, discount rates, and
                  risk-neutral parameters.
                </li>
                <li>
                  Use real options as a <strong>complement</strong> to NPV, not
                  a replacement. Qualitative strategic considerations still
                  matter.
                </li>
              </ul>

              <h2>Frequently Asked Questions</h2>
            </section>

            <!-- FAQ Accordions -->
            <section class="mt-4" id="faq">
              <div
                class="border border-gray-200 rounded-md divide-y divide-gray-200"
              >
                <details class="p-4">
                  <summary class="cursor-pointer font-medium text-gray-800">
                    What is real options valuation?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    Real options valuation applies financial option pricing
                    techniques to real investment projects. It recognizes that
                    managers can adapt decisions as uncertainty resolves, and
                    that this flexibility has value. Instead of a single static
                    NPV, you obtain an <strong>expanded NPV</strong> that
                    includes the value of options to, expand, contract,
                    abandon, or switch.
                  </p>
                </details>
                <details class="p-4">
                  <summary class="cursor-pointer font-medium text-gray-800">
                    When should I use real options instead of standard NPV?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    Use real options when a project has high uncertainty,
                    asymmetric payoffs (large upside, limited downside), and
                    meaningful managerial flexibility. Examples include R&amp;D,
                    natural resources, platform technologies, staged market
                    entry, and large infrastructure. For stable, routine
                    investments with little flexibility, standard NPV is usually
                    sufficient.
                  </p>
                </details>
                <details class="p-4">
                  <summary class="cursor-pointer font-medium text-gray-800">
                    How do I estimate volatility for a real option?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    Volatility can be estimated from:
                  </p>
                  <ul class="mt-1 text-sm text-gray-700 list-disc ml-5">
                    <li>
                      Historical volatility of comparable assets (e.g.,
                      commodity prices, sector indices).
                    </li>
                    <li>
                      Simulation of key drivers (prices, volumes, costs) and
                      resulting project value.
                    </li>
                    <li>
                      Management scenarios (pessimistic, base, optimistic)
                      converted into an implied standard deviation.
                    </li>
                  </ul>
                  <p class="mt-1 text-sm text-gray-700">
                    Because estimates are uncertain, it is good practice to test
                    several σ values and see how the option value changes.
                  </p>
                </details>
                <details class="p-4">
                  <summary class="cursor-pointer font-medium text-gray-800">
                    Which model is better: Black–Scholes or binomial?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    Black–Scholes is fast and convenient for simple
                    European-style options with known parameters. The binomial
                    model is more flexible and can handle early exercise,
                    multiple decision dates, and path-dependent structures. In
                    practice, analysts often start with Black–Scholes for
                    intuition and then refine with a binomial tree for complex
                    projects.
                  </p>
                </details>
                <details class="p-4">
                  <summary class="cursor-pointer font-medium text-gray-800">
                    Can real options valuation justify a negative NPV project?
                  </summary>
                  <p class="mt-2 text-sm text-gray-700">
                    Yes. A project with negative static NPV may still be
                    attractive if it creates valuable strategic options, such as
                    the ability to expand into a new market, develop follow-on
                    products, or secure a scarce resource. The real options
                    value can more than offset the negative base NPV, leading to
                    a positive expanded NPV.
                  </p>
                </details>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Real, Options, Valuation.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Finance Calculators
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/npv"
                  class="text-blue-600 hover:underline"
                  >NPV (Net Present Value)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/irr"
                  class="text-blue-600 hover:underline"
                  >IRR (Internal Rate of Return)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mirr"
                  class="text-blue-600 hover:underline"
                  >MIRR (Modified Internal Rate of Return)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/payback-period"
                  class="text-blue-600 hover:underline"
                  >Payback Period</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/profitability-index"
                  class="text-blue-600 hover:underline"
                  >Profitability Index</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/value-at-risk"
                  class="text-blue-600 hover:underline"
                  >Value at Risk (VaR)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/portfolio-standard-deviation"
                  class="text-blue-600 hover:underline"
                  >Portfolio Risk (Std Dev)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/dividend-discount-model"
                  class="text-blue-600 hover:underline"
                  >Dividend Discount Model</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/dcf"
                  class="text-blue-600 hover:underline"
                  >Discounted Cash Flow (FCFF)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/dcf-equity"
                  class="text-blue-600 hover:underline"
                  >Discounted Cash Flow (FCFE)</a
                >
              </li>
            </ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Finance Categories</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/finance-investment"
                  class="text-blue-600 hover:underline"
                  >Investment Analysis</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-business-ratios-and-valuation"
                  class="text-blue-600 hover:underline"
                  >Business Ratios &amp; Valuation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-mortgage-real-estate"
                  class="text-blue-600 hover:underline"
                  >Mortgage &amp; Real Estate</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-loans-and-debt"
                  class="text-blue-600 hover:underline"
                  >Loans &amp; Debt</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-retirement-and-pensions"
                  class="text-blue-600 hover:underline"
                  >Retirement &amp; Pensions</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Tab switching
      document.querySelectorAll(".tab-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          const target = btn.getAttribute("data-tab");
          document
            .querySelectorAll(".tab-btn")
            .forEach((b) => b.classList.remove("tab-active"));
          btn.classList.add("tab-active");
          document
            .querySelectorAll(".tab-panel")
            .forEach((p) => p.classList.add("hidden"));
          document.getElementById(target).classList.remove("hidden");
        });
      });

      // Standard normal CDF approximation
      function normCdf(x) {
        // Abramowitz & Stegun approximation
        const a1 = 0.254829592,
          a2 = -0.284496736,
          a3 = 1.421413741;
        const a4 = -1.453152027,
          a5 = 1.061405429,
          p = 0.3275911;
        const sign = x < 0 ? -1 : 1;
        const absX = Math.abs(x) / Math.sqrt(2);
        const t = 1 / (1 + p * absX);
        const y =
          1 -
          ((((a5 * t + a4) * t + a3) * t + a2) * t + a1) *
            t *
            Math.exp(-absX * absX);
        return 0.5 * (1 + sign * y);
      }

      function formatNumber(val) {
        if (!isFinite(val)) return "—";
        const abs = Math.abs(val);
        if (abs >= 1e6 || (abs > 0 && abs < 0.01)) {
          return val.toExponential(3);
        }
        return val.toLocaleString(undefined, { maximumFractionDigits: 4 });
      }

      // Black–Scholes calculation
      document.getElementById("bsm-calc-btn").addEventListener("click", () => {
        const type = document.getElementById("bsm-option-type").value;
        const S = parseFloat(document.getElementById("bsm-s").value);
        const K = parseFloat(document.getElementById("bsm-k").value);
        const T = parseFloat(document.getElementById("bsm-t").value);
        const sigmaPct = parseFloat(document.getElementById("bsm-sigma").value);
        const rPct = parseFloat(document.getElementById("bsm-r").value);
        const qPct = parseFloat(document.getElementById("bsm-q").value) || 0;
        const baseNpv = parseFloat(
          document.getElementById("bsm-base-npv").value
        );

        if (!(S > 0 && K > 0 && T > 0 && sigmaPct >= 0)) {
          alert("Please enter valid positive values for S, K, T, and σ.");
          return;
        }

        const sigma = sigmaPct / 100;
        const r = rPct / 100;
        const q = qPct / 100;

        const d1 =
          (Math.log(S / K) + (r - q + 0.5 * sigma * sigma) * T) /
          (sigma * Math.sqrt(T));
        const d2 = d1 - sigma * Math.sqrt(T);
        const Nd1 = normCdf(d1);
        const Nd2 = normCdf(d2);

        let optionValue;
        if (type === "call") {
          optionValue = S * Math.exp(-q * T) * Nd1 - K * Math.exp(-r * T) * Nd2;
        } else {
          optionValue =
            K * Math.exp(-r * T) * normCdf(-d2) -
            S * Math.exp(-q * T) * normCdf(-d1);
        }

        const expandedNpv = isNaN(baseNpv) ? NaN : baseNpv + optionValue;

        document.getElementById("bsm-option-value").textContent =
          formatNumber(optionValue);
        document.getElementById("bsm-expanded-npv").textContent = isNaN(
          expandedNpv
        )
          ? "—"
          : formatNumber(expandedNpv);
        document.getElementById("bsm-d1").textContent = formatNumber(d1);
        document.getElementById("bsm-d2").textContent = formatNumber(d2);
        document.getElementById("bsm-nd1").textContent = formatNumber(Nd1);
        document.getElementById("bsm-nd2").textContent = formatNumber(Nd2);
        document.getElementById("bsm-results").classList.remove("hidden");
      });

      // Binomial tree calculation (Cox–Ross–Rubinstein)
      document
        .getElementById("binom-calc-btn")
        .addEventListener("click", () => {
          const type = document.getElementById("binom-option-type").value;
          const S0 = parseFloat(document.getElementById("binom-s").value);
          const K = parseFloat(document.getElementById("binom-k").value);
          const T = parseFloat(document.getElementById("binom-t").value);
          const sigmaPct = parseFloat(
            document.getElementById("binom-sigma").value
          );
          const rPct = parseFloat(document.getElementById("binom-r").value);
          const qPct =
            parseFloat(document.getElementById("binom-q").value) || 0;
          const steps = parseInt(
            document.getElementById("binom-steps").value,
            10
          );
          const baseNpv = parseFloat(
            document.getElementById("binom-base-npv").value
          );

          if (
            !(
              S0 > 0 &&
              K > 0 &&
              T > 0 &&
              sigmaPct >= 0 &&
              steps >= 1 &&
              steps <= 50
            )
          ) {
            alert(
              "Please enter valid positive values for S, K, T, σ and steps (1–50)."
            );
            return;
          }

          const sigma = sigmaPct / 100;
          const r = rPct / 100;
          const q = qPct / 100;

          const dt = T / steps;
          const u = Math.exp(sigma * Math.sqrt(dt));
          const d = 1 / u;
          const disc = Math.exp(-r * dt);
          const p = (Math.exp((r - q) * dt) - d) / (u - d);

          if (p < 0 || p > 1) {
            alert(
              "Risk-neutral probability is outside [0,1]. Check your inputs (especially r, q, σ, and T)."
            );
            return;
          }

          // Underlying prices at maturity
          const prices = [];
          for (let i = 0; i <= steps; i++) {
            prices[i] = S0 * Math.pow(u, steps - i) * Math.pow(d, i);
          }

          // Option values at maturity
          const values = [];
          for (let i = 0; i <= steps; i++) {
            const payoff =
              type === "call"
                ? Math.max(prices[i] - K, 0)
                : Math.max(K - prices[i], 0);
            values[i] = payoff;
          }

          // Backward induction with early exercise (American-style)
          for (let step = steps - 1; step >= 0; step--) {
            for (let i = 0; i <= step; i++) {
              const continuation =
                disc * (p * values[i] + (1 - p) * values[i + 1]);
              const S = S0 * Math.pow(u, step - i) * Math.pow(d, i);
              const immediate =
                type === "call" ? Math.max(S - K, 0) : Math.max(K - S, 0);
              values[i] = Math.max(continuation, immediate);
            }
          }

          const optionValue = values[0];
          const expandedNpv = isNaN(baseNpv) ? NaN : baseNpv + optionValue;

          document.getElementById("binom-option-value").textContent =
            formatNumber(optionValue);
          document.getElementById("binom-expanded-npv").textContent = isNaN(
            expandedNpv
          )
            ? "—"
            : formatNumber(expandedNpv);
          document.getElementById("binom-u").textContent = formatNumber(u);
          document.getElementById("binom-d").textContent = formatNumber(d);
          document.getElementById("binom-dt").textContent = formatNumber(dt);
          document.getElementById("binom-p").textContent = formatNumber(p);
          document.getElementById("binom-results").classList.remove("hidden");
        });

      // NPV + real options calculation
      document.getElementById("npv-calc-btn").addEventListener("click", () => {
        const I0 = parseFloat(document.getElementById("npv-investment").value);
        const rPct = parseFloat(
          document.getElementById("npv-discount-rate").value
        );
        const cfStr = document.getElementById("npv-cashflows").value;
        const optionsVal = parseFloat(
          document.getElementById("npv-real-options").value
        );

        if (!isFinite(I0) || !isFinite(rPct) || !cfStr.trim()) {
          alert(
            "Please enter initial investment, discount rate, and at least one cash flow."
          );
          return;
        }

        const r = rPct / 100;
        const cfParts = cfStr
          .split(",")
          .map((s) => parseFloat(s.trim()))
          .filter((v) => !isNaN(v));
        if (cfParts.length === 0) {
          alert("Please enter at least one valid cash flow value.");
          return;
        }
        if (cfParts.length > 10) {
          alert("Please limit cash flows to 10 periods for clarity.");
          return;
        }

        let pv = 0;
        for (let t = 0; t < cfParts.length; t++) {
          pv += cfParts[t] / Math.pow(1 + r, t + 1);
        }
        const baseNpv = pv - I0;
        const realOptions = isNaN(optionsVal) ? 0 : optionsVal;
        const expandedNpv = baseNpv + realOptions;

        document.getElementById("npv-base").textContent = formatNumber(baseNpv);
        document.getElementById("npv-options-value").textContent =
          formatNumber(realOptions);
        document.getElementById("npv-expanded").textContent =
          formatNumber(expandedNpv);
        document.getElementById("npv-results").classList.remove("hidden");
      });

      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

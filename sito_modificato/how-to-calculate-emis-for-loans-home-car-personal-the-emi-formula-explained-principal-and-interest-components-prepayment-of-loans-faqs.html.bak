<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/how-to-calculate-emis-for-loans-home-car-personal-the-emi-formula-explained-principal-and-interest-components-prepayment-of-loans-faqs" />
    <title>How to Calculate Emis for Loans (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate How to Calculate Emis for Loans Home Car Personal the Emi Formula Explained Pri in seconds with this free tool. Get results and tips - start now." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="How to Calculate Emis for Loans (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate How to Calculate Emis for Loans Home Car Personal the Emi Formula Explained Pri in seconds with this free tool. Get results and tips - start now." />
    <meta property="og:url" content="https://calcdomain.com/how-to-calculate-emis-for-loans-home-car-personal-the-emi-formula-explained-principal-and-interest-components-prepayment-of-loans-faqs" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How to Calculate Emis for Loans (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate How to Calculate Emis for Loans Home Car Personal the Emi Formula Explained Pri in seconds with this free tool. Get results and tips - start now." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "Investing &amp; Compound Growth", "item": "https://calcdomain.com/subcategories/finance-investing-and-growth"}, {"@type": "ListItem", "position": 4, "name": "How to Calculate EMIs for Home, Car &amp; Personal Loans", "item": "https://calcdomain.com/how-to-calculate-emis-for-loans-home-car-personal-the-emi-formula-explained-principal-and-interest-components-prepayment-of-loans-faqs"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/finance-investing-and-growth" class="text-blue-600 hover:underline">Investing &amp;amp; Compound Growth</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">How to Calculate EMIs for Home, Car &amp;amp; Personal Loans</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                How to Calculate EMIs for Home, Car &amp; Personal Loans
              </h1>
              <p class="text-gray-600">
                Use this EMI calculator to see your monthly payment, total
                interest, principal–interest breakup, amortization schedule, and
                the impact of prepayments for any loan.
              </p>
            </header>

            <!-- Loan Type Tabs -->
            <div class="mb-4 flex flex-wrap gap-2">
              <button
                type="button"
                data-loan-type="home"
                class="loan-type-tab px-3 py-1 rounded-full border text-sm font-medium tab-active"
              >
                Home Loan
              </button>
              <button
                type="button"
                data-loan-type="car"
                class="loan-type-tab px-3 py-1 rounded-full border text-sm font-medium"
              >
                Car Loan
              </button>
              <button
                type="button"
                data-loan-type="personal"
                class="loan-type-tab px-3 py-1 rounded-full border text-sm font-medium"
              >
                Personal Loan
              </button>
              <button
                type="button"
                data-loan-type="custom"
                class="loan-type-tab px-3 py-1 rounded-full border text-sm font-medium"
              >
                Custom
              </button>
            </div>

            <!-- EMI Calculator Form -->
            <section aria-labelledby="emi-calculator-heading" class="mb-6">
              <h2
                id="emi-calculator-heading"
                class="text-xl font-semibold mb-3"
              >
                EMI Calculator
              </h2>
              <form id="emi-form" class="space-y-4">
                <div>
                  <label
                    for="loan-amount"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Loan amount (Principal)</label
                  >
                  <div class="flex items-center gap-2">
                    <span class="text-gray-500">₹</span>
                    <input
                      type="number"
                      id="loan-amount"
                      class="flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      min="0"
                      step="1000"
                      value="3000000"
                    />
                  </div>
                  <p class="text-xs text-gray-500 mt-1">
                    Enter total loan amount. You can use any currency; results
                    scale accordingly.
                  </p>
                </div>

                <div>
                  <div class="flex justify-between items-center mb-1">
                    <label
                      for="interest-rate"
                      class="block text-sm font-medium text-gray-700"
                      >Annual interest rate</label
                    >
                    <span
                      id="interest-rate-display"
                      class="text-xs text-gray-500 slider-value"
                      >8.50%</span
                    >
                  </div>
                  <input
                    type="range"
                    id="interest-rate"
                    min="3"
                    max="24"
                    step="0.05"
                    value="8.5"
                    class="w-full"
                  />
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <div class="flex justify-between items-center mb-1">
                      <label
                        for="tenure-years"
                        class="block text-sm font-medium text-gray-700"
                        >Tenure (years)</label
                      >
                      <span
                        id="tenure-years-display"
                        class="text-xs text-gray-500 slider-value"
                        >20 years</span
                      >
                    </div>
                    <input
                      type="range"
                      id="tenure-years"
                      min="0"
                      max="40"
                      step="1"
                      value="20"
                      class="w-full"
                    />
                  </div>
                  <div>
                    <div class="flex justify-between items-center mb-1">
                      <label
                        for="tenure-months"
                        class="block text-sm font-medium text-gray-700"
                        >Extra months</label
                      >
                      <span
                        id="tenure-months-display"
                        class="text-xs text-gray-500 slider-value"
                        >0 months</span
                      >
                    </div>
                    <input
                      type="range"
                      id="tenure-months"
                      min="0"
                      max="11"
                      step="1"
                      value="0"
                      class="w-full"
                    />
                  </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="processing-fee"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Processing fee (optional, % of loan)</label
                    >
                    <input
                      type="number"
                      id="processing-fee"
                      class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      min="0"
                      step="0.1"
                      value="0"
                    />
                  </div>
                  <div>
                    <label
                      for="emi-mode"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >EMI frequency</label
                    >
                    <select
                      id="emi-mode"
                      class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      <option value="monthly" selected>
                        Monthly (standard)
                      </option>
                      <option value="fortnightly">Fortnightly (approx.)</option>
                      <option value="weekly">Weekly (approx.)</option>
                    </select>
                  </div>
                </div>

                <!-- Prepayment options -->
                <details
                  class="mt-2 border border-dashed border-gray-300 rounded-md p-3"
                >
                  <summary
                    class="cursor-pointer text-sm font-medium text-gray-700"
                  >
                    Add prepayment (optional)
                  </summary>
                  <div class="mt-3 space-y-3">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                      <div>
                        <label
                          for="prepay-amount"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Prepayment amount</label
                        >
                        <input
                          type="number"
                          id="prepay-amount"
                          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          min="0"
                          step="1000"
                          value="0"
                        />
                      </div>
                      <div>
                        <label
                          for="prepay-month"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Prepayment month</label
                        >
                        <input
                          type="number"
                          id="prepay-month"
                          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          min="1"
                          step="1"
                          value="12"
                        />
                        <p class="text-xs text-gray-500 mt-1">
                          1 = first EMI month
                        </p>
                      </div>
                      <div>
                        <label
                          for="prepay-mode"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >After prepayment</label
                        >
                        <select
                          id="prepay-mode"
                          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        >
                          <option value="reduce-tenure" selected>
                            Keep EMI same, reduce tenure
                          </option>
                          <option value="reduce-emi">
                            Keep tenure same, reduce EMI
                          </option>
                        </select>
                      </div>
                    </div>
                    <p class="text-xs text-gray-500">
                      Set prepayment amount to 0 to ignore prepayment. This tool
                      assumes no prepayment penalty.
                    </p>
                  </div>
                </details>

                <div class="flex flex-wrap items-center gap-3 pt-2">
                  <button
                    type="button"
                    id="calculate-btn"
                    class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
                  >
                    Calculate EMI
                  </button>
                  <button
                    type="button"
                    id="reset-btn"
                    class="text-sm text-gray-600 hover:text-gray-800 underline"
                  >
                    Reset
                  </button>
                  <p id="emi-error" class="text-sm text-red-600 hidden">
                    Please enter valid positive values for loan amount, interest
                    rate, and tenure.
                  </p>
                </div>
              </form>
            </section>

            <!-- Results Summary -->
            <section aria-labelledby="emi-results-heading" class="mb-6">
              <h2 id="emi-results-heading" class="text-xl font-semibold mb-3">
                EMI Summary
              </h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="border rounded-lg p-4 bg-slate-50">
                  <h3 class="text-sm font-semibold text-gray-700 mb-2">
                    Without prepayment
                  </h3>
                  <p class="text-xs text-gray-500 mb-3">
                    Standard EMI over full tenure.
                  </p>
                  <div class="space-y-1">
                    <div class="flex justify-between items-center">
                      <span class="text-sm text-gray-600">Monthly EMI</span>
                      <span
                        id="emi-amount"
                        class="text-lg font-semibold text-blue-700"
                        >₹0</span
                      >
                    </div>
                    <div class="flex justify-between items-center">
                      <span class="text-sm text-gray-600">Total interest</span>
                      <span
                        id="total-interest"
                        class="text-sm font-medium text-gray-800"
                        >₹0</span
                      >
                    </div>
                    <div class="flex justify-between items-center">
                      <span class="text-sm text-gray-600">Total payment</span>
                      <span
                        id="total-payment"
                        class="text-sm font-medium text-gray-800"
                        >₹0</span
                      >
                    </div>
                    <div class="flex justify-between items-center">
                      <span class="text-xs text-gray-500"
                        >Effective cost (interest ÷ principal)</span
                      >
                      <span id="interest-multiple" class="text-xs text-gray-700"
                        >–</span
                      >
                    </div>
                  </div>
                </div>

                <div class="border rounded-lg p-4 bg-emerald-50">
                  <h3 class="text-sm font-semibold text-gray-700 mb-2">
                    With prepayment (if any)
                  </h3>
                  <p class="text-xs text-gray-500 mb-3">
                    Impact of the prepayment settings above.
                  </p>
                  <div class="space-y-1">
                    <div class="flex justify-between items-center">
                      <span class="text-sm text-gray-600">Revised EMI</span>
                      <span
                        id="emi-prepay"
                        class="text-lg font-semibold text-emerald-700"
                        >₹0</span
                      >
                    </div>
                    <div class="flex justify-between items-center">
                      <span class="text-sm text-gray-600">Revised tenure</span>
                      <span
                        id="tenure-prepay"
                        class="text-sm font-medium text-gray-800"
                        >–</span
                      >
                    </div>
                    <div class="flex justify-between items-center">
                      <span class="text-sm text-gray-600">Interest saved</span>
                      <span
                        id="interest-saved"
                        class="text-sm font-medium text-emerald-800"
                        >₹0</span
                      >
                    </div>
                    <div class="flex justify-between items-center">
                      <span class="text-xs text-gray-500"
                        >Tenure reduction</span
                      >
                      <span id="months-saved" class="text-xs text-gray-700"
                        >–</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <!-- Charts & Schedule Tabs -->
            <section class="mb-6">
              <div class="border-b border-gray-200 mb-3">
                <nav class="-mb-px flex space-x-4" aria-label="Tabs">
                  <button
                    type="button"
                    data-tab="breakup"
                    class="emi-tab border-b-2 border-blue-600 text-blue-600 py-2 px-3 text-sm font-medium"
                  >
                    Principal vs Interest
                  </button>
                  <button
                    type="button"
                    data-tab="schedule"
                    class="emi-tab border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 py-2 px-3 text-sm font-medium"
                  >
                    Amortization Schedule
                  </button>
                </nav>
              </div>

              <!-- Principal vs Interest Chart (simple visual using bars) -->
              <div id="tab-breakup" class="space-y-4">
                <div class="grid grid-cols-2 gap-4 items-end">
                  <div>
                    <p class="text-xs text-gray-500 mb-1">Total principal</p>
                    <div
                      class="h-32 w-10 bg-blue-100 rounded-full flex items-end"
                    >
                      <div
                        id="bar-principal"
                        class="w-full bg-blue-600 rounded-full"
                        style="height: 50%"
                      ></div>
                    </div>
                    <p
                      id="label-principal"
                      class="mt-1 text-xs font-medium text-gray-700"
                    >
                      ₹0
                    </p>
                  </div>
                  <div>
                    <p class="text-xs text-gray-500 mb-1">Total interest</p>
                    <div
                      class="h-32 w-10 bg-amber-100 rounded-full flex items-end"
                    >
                      <div
                        id="bar-interest"
                        class="w-full bg-amber-500 rounded-full"
                        style="height: 50%"
                      ></div>
                    </div>
                    <p
                      id="label-interest"
                      class="mt-1 text-xs font-medium text-gray-700"
                    >
                      ₹0
                    </p>
                  </div>
                </div>
                <p class="text-xs text-gray-500">
                  Bar heights are scaled to show the relative share of principal
                  vs interest in your total repayment.
                </p>
              </div>

              <!-- Amortization Schedule Table -->
              <div id="tab-schedule" class="hidden">
                <div class="flex justify-between items-center mb-2">
                  <h3 class="text-sm font-semibold text-gray-700">
                    Amortization schedule (without prepayment)
                  </h3>
                  <button
                    type="button"
                    id="download-csv"
                    class="text-xs text-blue-600 hover:underline"
                  >
                    Download as CSV
                  </button>
                </div>
                <div class="border rounded-lg overflow-hidden">
                  <div class="table-scroll overflow-y-auto">
                    <table class="min-w-full text-xs">
                      <thead class="bg-gray-100 sticky top-0">
                        <tr>
                          <th
                            class="px-2 py-1 text-left font-semibold text-gray-700"
                          >
                            Month
                          </th>
                          <th
                            class="px-2 py-1 text-right font-semibold text-gray-700"
                          >
                            EMI
                          </th>
                          <th
                            class="px-2 py-1 text-right font-semibold text-gray-700"
                          >
                            Interest
                          </th>
                          <th
                            class="px-2 py-1 text-right font-semibold text-gray-700"
                          >
                            Principal
                          </th>
                          <th
                            class="px-2 py-1 text-right font-semibold text-gray-700"
                          >
                            Balance
                          </th>
                        </tr>
                      </thead>
                      <tbody id="schedule-body">
                        <!-- rows injected by JS -->
                      </tbody>
                    </table>
                  </div>
                </div>
                <p class="mt-2 text-xs text-gray-500">
                  This schedule assumes a standard amortizing loan with fixed
                  interest rate and equal monthly EMIs.
                </p>
              </div>
            </section>

            <!-- Explanatory Content -->
            <section class="prose">
              <h2>What is EMI and how is it calculated?</h2>
              <p>
                EMI stands for <strong>Equated Monthly Instalment</strong>. It
                is the fixed amount you pay every month to repay a loan (home
                loan, car loan, personal loan, education loan, etc.). Each EMI
                consists of:
              </p>
              <ul>
                <li>
                  <strong>Interest component</strong> – cost of borrowing money.
                </li>
                <li>
                  <strong>Principal component</strong> – amount that actually
                  reduces your outstanding loan.
                </li>
              </ul>
              <p>
                Lenders use a standard mathematical formula to keep the EMI
                constant while gradually shifting the mix from mostly interest
                (in the early months) to mostly principal (towards the end).
              </p>

              <h2>The EMI formula (with explanation)</h2>
              <div class="formula-box">
                <p class="font-semibold mb-1">Standard EMI formula:</p>
                <p>
                  \[ \text{EMI} = P \times \frac{r (1 + r)^n}{(1 + r)^n - 1} \]
                </p>
                <ul>
                  <li>\(P\) = loan amount (principal)</li>
                  <li>
                    \(r\) = monthly interest rate = (annual rate ÷ 12 ÷ 100)
                  </li>
                  <li>
                    \(n\) = total number of monthly instalments (tenure in
                    months)
                  </li>
                </ul>
              </div>

              <h3>Step-by-step example</h3>
              <p>
                Suppose you take a home loan of ₹30,00,000 at 8.5% p.a. for 20
                years.
              </p>
              <ol>
                <li>
                  Convert annual rate to monthly: \( r = 8.5 / 12 / 100 =
                  0.0070833\).
                </li>
                <li>Convert tenure to months: \( n = 20 \times 12 = 240\).</li>
                <li>
                  Apply the formula: \[ \text{EMI} = 30{,}00{,}000 \times
                  \frac{0.0070833 (1 + 0.0070833)^{240}}{(1 + 0.0070833)^{240} -
                  1} \]
                </li>
              </ol>
              <p>
                If you plug this into the calculator above, you will get a
                monthly EMI of roughly <strong>₹26,000–27,000</strong>, total
                interest of around <strong>₹33–34 lakh</strong>, and total
                payment of about <strong>₹63–64 lakh</strong>.
              </p>

              <h2>Principal vs interest breakup over time</h2>
              <p>
                Even though EMI stays constant, the
                <strong
                  >interest is always calculated on the outstanding
                  principal</strong
                >. That is why:
              </p>
              <ul>
                <li>
                  At the start, outstanding principal is high → interest portion
                  of EMI is high.
                </li>
                <li>
                  As you repay principal, outstanding balance falls → interest
                  portion shrinks, principal portion grows.
                </li>
              </ul>
              <p>
                The amortization schedule in this tool shows, month by month,
                how much of each EMI goes to interest and how much reduces
                principal, plus the remaining balance after each payment.
              </p>

              <h2>How prepayment changes EMI and total interest</h2>
              <p>
                When you make a <strong>lump-sum prepayment</strong>, your
                outstanding principal drops immediately. Because future interest
                is charged on this lower principal, you save interest and can
                either:
              </p>
              <ul>
                <li>
                  <strong>Reduce tenure</strong> (keep EMI same) – finish the
                  loan earlier, usually maximizes interest savings.
                </li>
                <li>
                  <strong>Reduce EMI</strong> (keep tenure same) – lower your
                  monthly outgo, but save slightly less interest.
                </li>
              </ul>
              <p>
                Use the prepayment section in the calculator to see both the
                <strong>interest saved</strong> and
                <strong>months saved</strong> for your scenario.
              </p>

              <h2>Processing fee and effective cost of borrowing</h2>
              <p>
                Many lenders charge a <strong>processing fee</strong> (e.g.,
                0.5–2% of the loan amount). This is usually deducted upfront or
                added to the loan cost. While it does not change the EMI
                formula, it increases your <strong>effective cost</strong> of
                borrowing.
              </p>
              <p>
                In this calculator, you can enter a processing fee percentage to
                see the <strong>total upfront cost</strong> and understand how
                much you are effectively paying above the principal.
              </p>

              <h2>Frequently asked questions about EMI calculation</h2>

              <h3>1. Does EMI change if interest rates change?</h3>
              <p>
                For <strong>fixed-rate loans</strong>, EMI normally stays the
                same throughout the tenure. For
                <strong>floating-rate loans</strong>, when the benchmark rate
                changes, the lender may:
              </p>
              <ul>
                <li>Keep EMI same and adjust the tenure, or</li>
                <li>Change EMI while keeping tenure similar.</li>
              </ul>
              <p>
                The exact method depends on your loan agreement and lender
                policy.
              </p>

              <h3>2. Is it better to prepay early or later?</h3>
              <p>
                Prepaying <strong>earlier</strong> in the loan term usually
                saves much more interest because the outstanding principal (and
                therefore interest per EMI) is highest in the early years. A
                prepayment in year 2 can save far more than the same amount paid
                in year 10.
              </p>

              <h3>3. How do banks round off EMI?</h3>
              <p>
                Lenders typically round EMI to the nearest rupee (or smallest
                currency unit). Minor rounding differences are adjusted in the
                last instalment. This calculator shows EMI with two decimal
                places; your bank statement may show a slightly rounded figure.
              </p>

              <h3>4. Why is total interest so high for long-tenure loans?</h3>
              <p>
                With a long tenure (e.g., 25–30 years), even a moderate interest
                rate applied over many years results in
                <strong>interest that can exceed the original principal</strong
                >. The trade-off is lower EMI but a much higher total cost.
                Shorter tenures have higher EMI but significantly lower total
                interest.
              </p>

              <h3>5. Can I use this EMI calculator for any currency?</h3>
              <p>
                Yes. The EMI formula is currency-agnostic. Whether your loan is
                in INR, USD, EUR or any other currency, the calculation works
                the same way. Just enter the values in your currency; the
                results will be in the same currency.
              </p>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: How, To, Calculate, Emis, For, Loans, Home, Car.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: How, To, Calculate, Emis, For, Loans, Home, Car.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Finance Calculators
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/compound-interest-calculator"
                  class="text-blue-600 hover:underline"
                  >Compound Interest Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/future-value"
                  class="text-blue-600 hover:underline"
                  >Future Value Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/present-value"
                  class="text-blue-600 hover:underline"
                  >Present Value Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-payment-formula"
                  class="text-blue-600 hover:underline"
                  >Loan Payment (Amortization) Formula</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-blue-600 hover:underline"
                  >Mortgage Payment Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan"
                  class="text-blue-600 hover:underline"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/personal-loan"
                  class="text-blue-600 hover:underline"
                  >Personal Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-amortization-calculator"
                  class="text-blue-600 hover:underline"
                  >Advanced Loan Amortization</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/debt-snowball-calculator"
                  class="text-blue-600 hover:underline"
                  >Debt Snowball Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/debt-avalanche-calculator"
                  class="text-blue-600 hover:underline"
                  >Debt Avalanche Calculator</a
                >
              </li>
            </ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Finance Guides</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/50-30-20-budget"
                  class="text-blue-600 hover:underline"
                  >50/30/20 Budget Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/inflation"
                  class="text-blue-600 hover:underline"
                  >Inflation Calculator (CPI-U)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/when-will-i-be-a-millionaire"
                  class="text-blue-600 hover:underline"
                  >When Will I Be a Millionaire?</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/retirement"
                  class="text-blue-600 hover:underline"
                  >Retirement Planning Calculator</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Utility: format currency with grouping, no fixed symbol (we prepend ₹ in UI where needed)
      function formatCurrency(value) {
        if (!isFinite(value)) return "₹0";
        const abs = Math.abs(value);
        const rounded = Math.round((value + Number.EPSILON) * 100) / 100;
        return (
          "₹" +
          rounded.toLocaleString("en-IN", {
            maximumFractionDigits: 2,
            minimumFractionDigits: 2,
          })
        );
      }

      function formatMonthsToYearsMonths(months) {
        if (!isFinite(months) || months <= 0) return "–";
        const y = Math.floor(months / 12);
        const m = months % 12;
        const parts = [];
        if (y > 0) parts.push(y + " year" + (y > 1 ? "s" : ""));
        if (m > 0) parts.push(m + " month" + (m > 1 ? "s" : ""));
        return parts.join(" ");
      }

      function calculateEmi(P, annualRate, tenureMonths) {
        const r = annualRate / 12 / 100;
        const n = tenureMonths;
        if (P <= 0 || r <= 0 || n <= 0)
          return { emi: 0, totalInterest: 0, totalPayment: 0, schedule: [] };

        const pow = Math.pow(1 + r, n);
        const emi = (P * r * pow) / (pow - 1);
        let balance = P;
        const schedule = [];
        let totalInterest = 0;

        for (let i = 1; i <= n; i++) {
          const interest = balance * r;
          let principal = emi - interest;
          if (i === n) {
            // adjust last payment to clear rounding
            principal = balance;
          }
          balance = balance - principal;
          totalInterest += interest;
          schedule.push({
            month: i,
            emi,
            interest,
            principal,
            balance: Math.max(balance, 0),
          });
        }

        const totalPayment = P + totalInterest;
        return { emi, totalInterest, totalPayment, schedule };
      }

      function applyPrepayment(
        baseSchedule,
        annualRate,
        prepayAmount,
        prepayMonth,
        mode
      ) {
        if (!baseSchedule.length || prepayAmount <= 0) {
          return {
            emiPrepay: 0,
            tenurePrepayMonths: 0,
            interestSaved: 0,
            monthsSaved: 0,
          };
        }

        const r = annualRate / 12 / 100;
        const originalEmi = baseSchedule[0].emi;
        const originalTenure = baseSchedule.length;
        const originalTotalInterest = baseSchedule.reduce(
          (sum, row) => sum + row.interest,
          0
        );

        const m = Math.min(Math.max(1, prepayMonth), originalTenure);
        const balanceBeforePrepay = baseSchedule[m - 1].balance;
        const newBalance = Math.max(balanceBeforePrepay - prepayAmount, 0);

        if (newBalance <= 0) {
          // loan fully closed at prepayment
          const interestPaidTillPrepay = baseSchedule
            .slice(0, m)
            .reduce((sum, row) => sum + row.interest, 0);
          const interestSaved = originalTotalInterest - interestPaidTillPrepay;
          return {
            emiPrepay: 0,
            tenurePrepayMonths: m,
            interestSaved,
            monthsSaved: originalTenure - m,
          };
        }

        if (mode === "reduce-tenure") {
          // keep EMI same, compute new tenure
          const emi = originalEmi;
          let balance = newBalance;
          let month = 0;
          let interestAfterPrepay = 0;
          while (balance > 0 && month < 1000 * 12) {
            // safety cap
            const interest = balance * r;
            let principal = emi - interest;
            if (principal <= 0) break; // avoid infinite loop
            if (principal > balance) principal = balance;
            balance -= principal;
            interestAfterPrepay += interest;
            month++;
          }
          const newTenureTotal = m + month;
          const interestPaidTillPrepay = baseSchedule
            .slice(0, m)
            .reduce((sum, row) => sum + row.interest, 0);
          const totalInterestWithPrepay =
            interestPaidTillPrepay + interestAfterPrepay;
          const interestSaved = originalTotalInterest - totalInterestWithPrepay;
          const monthsSaved = originalTenure - newTenureTotal;

          return {
            emiPrepay: emi,
            tenurePrepayMonths: newTenureTotal,
            interestSaved,
            monthsSaved,
          };
        } else {
          // reduce EMI, keep tenure same
          const remainingMonths = originalTenure - m;
          if (remainingMonths <= 0) {
            return {
              emiPrepay: 0,
              tenurePrepayMonths: m,
              interestSaved: 0,
              monthsSaved: 0,
            };
          }
          const pow = Math.pow(1 + r, remainingMonths);
          const newEmi = (newBalance * r * pow) / (pow - 1);

          // recompute schedule from month m+1 with new EMI
          let balance = newBalance;
          let interestAfterPrepay = 0;
          for (let i = 1; i <= remainingMonths; i++) {
            const interest = balance * r;
            let principal = newEmi - interest;
            if (i === remainingMonths) {
              principal = balance;
            }
            balance -= principal;
            interestAfterPrepay += interest;
          }
          const interestPaidTillPrepay = baseSchedule
            .slice(0, m)
            .reduce((sum, row) => sum + row.interest, 0);
          const totalInterestWithPrepay =
            interestPaidTillPrepay + interestAfterPrepay;
          const interestSaved = originalTotalInterest - totalInterestWithPrepay;

          return {
            emiPrepay: newEmi,
            tenurePrepayMonths: originalTenure,
            interestSaved,
            monthsSaved: 0,
          };
        }
      }

      function updateScheduleTable(schedule) {
        const tbody = document.getElementById("schedule-body");
        tbody.innerHTML = "";
        schedule.forEach((row) => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
        <td class="px-2 py-1 text-gray-700">${row.month}</td>
        <td class="px-2 py-1 text-right text-gray-700">${formatCurrency(
          row.emi
        )}</td>
        <td class="px-2 py-1 text-right text-gray-700">${formatCurrency(
          row.interest
        )}</td>
        <td class="px-2 py-1 text-right text-gray-700">${formatCurrency(
          row.principal
        )}</td>
        <td class="px-2 py-1 text-right text-gray-700">${formatCurrency(
          row.balance
        )}</td>
      `;
          tbody.appendChild(tr);
        });
      }

      function downloadScheduleCSV(schedule) {
        if (!schedule.length) return;
        let csv = "Month,EMI,Interest,Principal,Balance\n";
        schedule.forEach((row) => {
          csv +=
            [
              row.month,
              row.emi.toFixed(2),
              row.interest.toFixed(2),
              row.principal.toFixed(2),
              row.balance.toFixed(2),
            ].join(",") + "\n";
        });
        const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "emi-amortization-schedule.csv";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }

      document.addEventListener("DOMContentLoaded", function () {
        const loanTypeDefaults = {
          home: { amount: 3000000, rate: 8.5, years: 20 },
          car: { amount: 800000, rate: 9.5, years: 5 },
          personal: { amount: 500000, rate: 14.0, years: 4 },
          custom: { amount: 100000, rate: 10.0, years: 3 },
        };

        const loanAmountInput = document.getElementById("loan-amount");
        const rateInput = document.getElementById("interest-rate");
        const rateDisplay = document.getElementById("interest-rate-display");
        const yearsInput = document.getElementById("tenure-years");
        const yearsDisplay = document.getElementById("tenure-years-display");
        const monthsInput = document.getElementById("tenure-months");
        const monthsDisplay = document.getElementById("tenure-months-display");
        const processingFeeInput = document.getElementById("processing-fee");
        const emiModeSelect = document.getElementById("emi-mode");

        const prepayAmountInput = document.getElementById("prepay-amount");
        const prepayMonthInput = document.getElementById("prepay-month");
        const prepayModeSelect = document.getElementById("prepay-mode");

        const emiAmountEl = document.getElementById("emi-amount");
        const totalInterestEl = document.getElementById("total-interest");
        const totalPaymentEl = document.getElementById("total-payment");
        const interestMultipleEl = document.getElementById("interest-multiple");

        const emiPrepayEl = document.getElementById("emi-prepay");
        const tenurePrepayEl = document.getElementById("tenure-prepay");
        const interestSavedEl = document.getElementById("interest-saved");
        const monthsSavedEl = document.getElementById("months-saved");

        const barPrincipal = document.getElementById("bar-principal");
        const barInterest = document.getElementById("bar-interest");
        const labelPrincipal = document.getElementById("label-principal");
        const labelInterest = document.getElementById("label-interest");

        const errorEl = document.getElementById("emi-error");
        const calculateBtn = document.getElementById("calculate-btn");
        const resetBtn = document.getElementById("reset-btn");
        const downloadBtn = document.getElementById("download-csv");

        let lastSchedule = [];

        function updateSliderDisplays() {
          rateDisplay.textContent = rateInput.value + "%";
          yearsDisplay.textContent =
            yearsInput.value + " year" + (yearsInput.value === "1" ? "" : "s");
          monthsDisplay.textContent =
            monthsInput.value +
            " month" +
            (monthsInput.value === "1" ? "" : "s");
        }

        function getTenureMonths() {
          return (
            parseInt(yearsInput.value || "0", 10) * 12 +
            parseInt(monthsInput.value || "0", 10)
          );
        }

        function adjustForFrequency(emiMonthly, mode) {
          if (mode === "monthly") return emiMonthly;
          if (mode === "fortnightly") {
            // approx: EMI * 12 / 26
            return (emiMonthly * 12) / 26;
          }
          if (mode === "weekly") {
            // approx: EMI * 12 / 52
            return (emiMonthly * 12) / 52;
          }
          return emiMonthly;
        }

        function recalculate() {
          const P = parseFloat(loanAmountInput.value);
          const annualRate = parseFloat(rateInput.value);
          const tenureMonths = getTenureMonths();

          if (!(P > 0) || !(annualRate > 0) || !(tenureMonths > 0)) {
            errorEl.classList.remove("hidden");
            emiAmountEl.textContent = "₹0";
            totalInterestEl.textContent = "₹0";
            totalPaymentEl.textContent = "₹0";
            interestMultipleEl.textContent = "–";
            emiPrepayEl.textContent = "₹0";
            tenurePrepayEl.textContent = "–";
            interestSavedEl.textContent = "₹0";
            monthsSavedEl.textContent = "–";
            updateScheduleTable([]);
            barPrincipal.style.height = "0%";
            barInterest.style.height = "0%";
            labelPrincipal.textContent = "₹0";
            labelInterest.textContent = "₹0";
            lastSchedule = [];
            return;
          }
          errorEl.classList.add("hidden");

          const { emi, totalInterest, totalPayment, schedule } = calculateEmi(
            P,
            annualRate,
            tenureMonths
          );
          lastSchedule = schedule;

          const emiMode = emiModeSelect.value;
          const adjEmi = adjustForFrequency(emi, emiMode);

          emiAmountEl.textContent = formatCurrency(adjEmi);
          totalInterestEl.textContent = formatCurrency(totalInterest);
          totalPaymentEl.textContent = formatCurrency(totalPayment);
          interestMultipleEl.textContent =
            (totalInterest / P).toFixed(2) + "× principal";

          // Prepayment impact
          const prepayAmount = parseFloat(prepayAmountInput.value) || 0;
          const prepayMonth = parseInt(prepayMonthInput.value || "0", 10);
          const prepayMode = prepayModeSelect.value;

          const prepayResult = applyPrepayment(
            schedule,
            annualRate,
            prepayAmount,
            prepayMonth,
            prepayMode
          );

          if (prepayAmount > 0 && prepayResult.tenurePrepayMonths > 0) {
            const adjEmiPrepay = adjustForFrequency(
              prepayResult.emiPrepay,
              emiMode
            );
            emiPrepayEl.textContent = formatCurrency(adjEmiPrepay);
            tenurePrepayEl.textContent = formatMonthsToYearsMonths(
              prepayResult.tenurePrepayMonths
            );
            interestSavedEl.textContent = formatCurrency(
              prepayResult.interestSaved
            );
            monthsSavedEl.textContent =
              prepayResult.monthsSaved > 0
                ? formatMonthsToYearsMonths(prepayResult.monthsSaved)
                : "0 months";
          } else {
            emiPrepayEl.textContent = formatCurrency(adjEmi);
            tenurePrepayEl.textContent =
              formatMonthsToYearsMonths(tenureMonths);
            interestSavedEl.textContent = "₹0.00";
            monthsSavedEl.textContent = "0 months";
          }

          // Principal vs interest chart
          const principalTotal = P;
          const interestTotal = totalInterest;
          const maxVal = Math.max(principalTotal, interestTotal, 1);
          const principalHeight = (principalTotal / maxVal) * 100;
          const interestHeight = (interestTotal / maxVal) * 100;
          barPrincipal.style.height = principalHeight + "%";
          barInterest.style.height = interestHeight + "%";
          labelPrincipal.textContent = formatCurrency(principalTotal);
          labelInterest.textContent = formatCurrency(interestTotal);

          // Schedule table
          updateScheduleTable(schedule);
        }

        // Loan type tabs
        document.querySelectorAll(".loan-type-tab").forEach((btn) => {
          btn.addEventListener("click", () => {
            document
              .querySelectorAll(".loan-type-tab")
              .forEach((b) => b.classList.remove("tab-active"));
            btn.classList.add("tab-active");
            const type = btn.getAttribute("data-loan-type");
            const def = loanTypeDefaults[type];
            if (def) {
              loanAmountInput.value = def.amount;
              rateInput.value = def.rate;
              yearsInput.value = def.years;
              monthsInput.value = 0;
              processingFeeInput.value = 0;
              prepayAmountInput.value = 0;
              prepayMonthInput.value = 12;
              prepayModeSelect.value = "reduce-tenure";
              emiModeSelect.value = "monthly";
              updateSliderDisplays();
              recalculate();
            }
          });
        });

        // Tabs for breakup/schedule
        document.querySelectorAll(".emi-tab").forEach((tab) => {
          tab.addEventListener("click", () => {
            const target = tab.getAttribute("data-tab");
            document.querySelectorAll(".emi-tab").forEach((t) => {
              t.classList.remove("border-blue-600", "text-blue-600");
              t.classList.add("border-transparent", "text-gray-500");
            });
            tab.classList.add("border-blue-600", "text-blue-600");
            tab.classList.remove("text-gray-500");

            document.getElementById("tab-breakup").classList.add("hidden");
            document.getElementById("tab-schedule").classList.add("hidden");
            document.getElementById("tab-" + target).classList.remove("hidden");
          });
        });

        // Slider display updates
        rateInput.addEventListener("input", () => {
          updateSliderDisplays();
        });
        yearsInput.addEventListener("input", () => {
          updateSliderDisplays();
        });
        monthsInput.addEventListener("input", () => {
          updateSliderDisplays();
        });

        // Calculate & reset
        calculateBtn.addEventListener("click", recalculate);
        resetBtn.addEventListener("click", () => {
          const activeTab = document.querySelector(".loan-type-tab.tab-active");
          const type = activeTab
            ? activeTab.getAttribute("data-loan-type")
            : "home";
          const def = loanTypeDefaults[type] || loanTypeDefaults.home;
          loanAmountInput.value = def.amount;
          rateInput.value = def.rate;
          yearsInput.value = def.years;
          monthsInput.value = 0;
          processingFeeInput.value = 0;
          emiModeSelect.value = "monthly";
          prepayAmountInput.value = 0;
          prepayMonthInput.value = 12;
          prepayModeSelect.value = "reduce-tenure";
          updateSliderDisplays();
          recalculate();
        });

        // Auto-calc on key changes
        [
          loanAmountInput,
          rateInput,
          yearsInput,
          monthsInput,
          processingFeeInput,
          emiModeSelect,
          prepayAmountInput,
          prepayMonthInput,
          prepayModeSelect,
        ].forEach((el) => {
          el.addEventListener("change", recalculate);
        });

        downloadBtn.addEventListener("click", () => {
          if (lastSchedule && lastSchedule.length) {
            downloadScheduleCSV(lastSchedule);
          }
        });

        // Initial setup
        updateSliderDisplays();
        recalculate();
      });
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/how-much-house-can-i-afford" />
    <title>How Much House Can I Afford (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate How Much House Can I Afford in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="How Much House Can I Afford (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate How Much House Can I Afford in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/how-much-house-can-i-afford" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How Much House Can I Afford (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate How Much House Can I Afford in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "Mortgages & Home Financing Calculators", "item": "https://calcdomain.com/subcategories/finance-mortgages-and-home"}, {"@type": "ListItem", "position": 4, "name": "How Much House Can I Afford?", "item": "https://calcdomain.com/how-much-house-can-i-afford"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/finance-mortgages-and-home" class="text-blue-600 hover:underline">Mortgages &amp; Home Financing Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">How Much House Can I Afford?</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                How Much House Can I Afford?
              </h1>
              <p class="text-gray-600">
                Estimate a realistic home price based on your income, debts,
                down payment, and local costs. Compare conservative vs.
                aggressive scenarios side by side.
              </p>
            </header>

            <section
              aria-label="House affordability calculator"
              class="space-y-6"
            >
              <!-- Mode toggle -->
              <div class="flex flex-wrap gap-3 items-center mb-4">
                <span class="text-sm font-medium text-gray-700"
                  >Calculation mode:</span
                >
                <div
                  class="inline-flex rounded-full border border-gray-200 bg-gray-50 p-1"
                >
                  <button
                    id="mode-from-income"
                    type="button"
                    class="px-3 py-1 text-xs md:text-sm rounded-full bg-white shadow-sm font-medium text-blue-600"
                  >
                    Start from income
                  </button>
                  <button
                    id="mode-from-price"
                    type="button"
                    class="px-3 py-1 text-xs md:text-sm rounded-full text-gray-600"
                  >
                    Start from home price
                  </button>
                </div>
              </div>

              <!-- Inputs grid -->
              <div class="grid md:grid-cols-2 gap-6">
                <!-- Left column: income & debts -->
                <div class="space-y-4">
                  <h2 class="text-lg font-semibold text-gray-800">
                    Your income & debts
                  </h2>

                  <div>
                    <label
                      for="annual-income"
                      class="block text-sm font-medium text-gray-700"
                      >Gross annual household income</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <span
                        class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                        >$</span
                      >
                      <input
                        id="annual-income"
                        type="number"
                        min="0"
                        step="1000"
                        class="flex-1 block w-full rounded-r-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        value="120000"
                      />
                    </div>
                    <p class="mt-1 text-xs text-gray-500">
                      Before taxes and deductions.
                    </p>
                  </div>

                  <div>
                    <label
                      for="monthly-debts"
                      class="block text-sm font-medium text-gray-700"
                      >Other monthly debt payments</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <span
                        class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                        >$</span
                      >
                      <input
                        id="monthly-debts"
                        type="number"
                        min="0"
                        step="10"
                        class="flex-1 block w-full rounded-r-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        value="500"
                      />
                    </div>
                    <p class="mt-1 text-xs text-gray-500">
                      Car loans, student loans, credit cards, personal loans,
                      etc.
                    </p>
                  </div>

                  <div>
                    <label
                      for="target-dti"
                      class="block text-sm font-medium text-gray-700"
                      >Target total DTI (including housing)</label
                    >
                    <div class="flex items-center gap-3 mt-1">
                      <input
                        id="target-dti"
                        type="range"
                        min="25"
                        max="45"
                        step="1"
                        value="36"
                        class="w-full"
                      />
                      <span
                        id="target-dti-label"
                        class="w-14 text-right text-sm font-medium text-gray-700"
                        >36%</span
                      >
                    </div>
                    <div
                      class="flex justify-between text-[11px] text-gray-400 mt-0.5"
                    >
                      <span>Very conservative (25%)</span>
                      <span>Typical (36%)</span>
                      <span>Stretch (45%)</span>
                    </div>
                  </div>

                  <div class="grid grid-cols-2 gap-3">
                    <div>
                      <label
                        for="loan-term"
                        class="block text-sm font-medium text-gray-700"
                        >Loan term</label
                      >
                      <select
                        id="loan-term"
                        class="mt-1 block w-full rounded-md border-gray-300 text-sm focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="30">30 years (standard)</option>
                        <option value="25">25 years</option>
                        <option value="20">20 years</option>
                        <option value="15">15 years</option>
                      </select>
                    </div>
                    <div>
                      <label
                        for="interest-rate"
                        class="block text-sm font-medium text-gray-700"
                        >Interest rate (APR)</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <input
                          id="interest-rate"
                          type="number"
                          min="1"
                          max="15"
                          step="0.125"
                          class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                          value="6.5"
                        />
                        <span
                          class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                          >%</span
                        >
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Right column: property & down payment -->
                <div class="space-y-4">
                  <h2 class="text-lg font-semibold text-gray-800">
                    Property & down payment
                  </h2>

                  <div id="home-price-input-wrapper" class="hidden">
                    <label
                      for="target-home-price"
                      class="block text-sm font-medium text-gray-700"
                      >Target home price</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <span
                        class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                        >$</span
                      >
                      <input
                        id="target-home-price"
                        type="number"
                        min="0"
                        step="5000"
                        class="flex-1 block w-full rounded-r-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        value="450000"
                      />
                    </div>
                    <p class="mt-1 text-xs text-gray-500">
                      Use this mode to see if a specific home fits your budget.
                    </p>
                  </div>

                  <div>
                    <label
                      for="down-payment"
                      class="block text-sm font-medium text-gray-700"
                      >Down payment</label
                    >
                    <div
                      class="mt-1 grid grid-cols-[auto,1fr,auto] gap-2 items-center"
                    >
                      <div class="flex rounded-md shadow-sm">
                        <span
                          class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                          >$</span
                        >
                        <input
                          id="down-payment"
                          type="number"
                          min="0"
                          step="1000"
                          class="flex-1 block w-full rounded-r-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                          value="90000"
                        />
                      </div>
                      <div class="flex items-center gap-2">
                        <input
                          id="down-percent"
                          type="number"
                          min="0"
                          max="100"
                          step="0.5"
                          class="w-full rounded-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                          value="20"
                        />
                        <span class="text-sm text-gray-500">%</span>
                      </div>
                      <button
                        id="sync-down-payment"
                        type="button"
                        class="text-xs px-2 py-1 rounded-md border border-gray-200 text-gray-600 hover:bg-gray-50"
                      >
                        Sync
                      </button>
                    </div>
                    <p class="mt-1 text-xs text-gray-500">
                      Use “Sync” to align the dollar and % values based on the
                      calculated home price.
                    </p>
                  </div>

                  <div class="grid grid-cols-2 gap-3">
                    <div>
                      <label
                        for="property-tax-rate"
                        class="block text-sm font-medium text-gray-700"
                        >Property tax rate</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <input
                          id="property-tax-rate"
                          type="number"
                          min="0"
                          max="5"
                          step="0.05"
                          class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                          value="1.2"
                        />
                        <span
                          class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                          >% / year</span
                        >
                      </div>
                      <p class="mt-1 text-xs text-gray-500">
                        Typical range: 0.5–2.5% depending on location.
                      </p>
                    </div>
                    <div>
                      <label
                        for="insurance-rate"
                        class="block text-sm font-medium text-gray-700"
                        >Homeowners insurance</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <input
                          id="insurance-rate"
                          type="number"
                          min="0"
                          max="5"
                          step="0.05"
                          class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                          value="0.5"
                        />
                        <span
                          class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                          >% / year</span
                        >
                      </div>
                      <p class="mt-1 text-xs text-gray-500">
                        Rough estimate as % of home value.
                      </p>
                    </div>
                  </div>

                  <div class="grid grid-cols-2 gap-3">
                    <div>
                      <label
                        for="hoa-monthly"
                        class="block text-sm font-medium text-gray-700"
                        >HOA / condo fees (monthly)</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <span
                          class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                          >$</span
                        >
                        <input
                          id="hoa-monthly"
                          type="number"
                          min="0"
                          step="10"
                          class="flex-1 block w-full rounded-r-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                          value="0"
                        />
                      </div>
                    </div>
                    <div>
                      <label
                        for="pmi-rate"
                        class="block text-sm font-medium text-gray-700"
                        >PMI (if &lt; 20% down)</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <input
                          id="pmi-rate"
                          type="number"
                          min="0"
                          max="3"
                          step="0.05"
                          class="flex-1 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                          value="0.8"
                        />
                        <span
                          class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                          >% / year</span
                        >
                      </div>
                      <p class="mt-1 text-xs text-gray-500">
                        Used only if down payment &lt; 20%.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Action buttons -->
              <div class="flex flex-wrap gap-3 items-center mt-2">
                <button
                  id="calculate-btn"
                  type="button"
                  class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-blue-600 text-white text-sm font-semibold hover:bg-blue-700"
                >
                  Calculate affordability
                </button>
                <button
                  id="reset-btn"
                  type="button"
                  class="text-sm text-gray-500 hover:text-gray-700"
                >
                  Reset to defaults
                </button>
              </div>

              <!-- Results -->
              <section
                aria-label="Affordability results"
                class="mt-6 space-y-4"
              >
                <h2 class="text-lg font-semibold text-gray-800">Results</h2>

                <div class="grid md:grid-cols-2 gap-4">
                  <!-- Conservative scenario -->
                  <div class="border border-gray-200 rounded-lg p-4 card-hover">
                    <div class="flex items-center justify-between mb-2">
                      <h3 class="text-sm font-semibold text-gray-800">
                        Conservative
                      </h3>
                      <span
                        class="text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700"
                        >Safer</span
                      >
                    </div>
                    <p class="text-xs text-gray-500 mb-3">
                      Targets 28% housing DTI and 36% total DTI.
                    </p>
                    <dl class="space-y-1 text-sm">
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Max home price</dt>
                        <dd
                          id="conservative-home-price"
                          class="font-semibold text-gray-900"
                        >
                          $0
                        </dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Estimated loan amount</dt>
                        <dd id="conservative-loan-amount" class="text-gray-900">
                          $0
                        </dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Total monthly payment</dt>
                        <dd
                          id="conservative-total-payment"
                          class="text-gray-900"
                        >
                          $0
                        </dd>
                      </div>
                    </dl>
                    <div
                      class="mt-3 border-t border-gray-100 pt-2 text-xs text-gray-500 space-y-1"
                    >
                      <div class="flex justify-between">
                        <span>Principal &amp; interest</span>
                        <span id="conservative-pi">$0</span>
                      </div>
                      <div class="flex justify-between">
                        <span>Taxes &amp; insurance</span>
                        <span id="conservative-ti">$0</span>
                      </div>
                      <div class="flex justify-between">
                        <span>HOA + PMI</span>
                        <span id="conservative-hoa-pmi">$0</span>
                      </div>
                      <div class="flex justify-between">
                        <span>Total DTI</span>
                        <span id="conservative-dti">0%</span>
                      </div>
                    </div>
                  </div>

                  <!-- Aggressive scenario -->
                  <div class="border border-gray-200 rounded-lg p-4 card-hover">
                    <div class="flex items-center justify-between mb-2">
                      <h3 class="text-sm font-semibold text-gray-800">
                        Aggressive
                      </h3>
                      <span
                        class="text-xs px-2 py-0.5 rounded-full bg-amber-100 text-amber-700"
                        >Stretch</span
                      >
                    </div>
                    <p class="text-xs text-gray-500 mb-3">
                      Targets 33% housing DTI and 43% total DTI.
                    </p>
                    <dl class="space-y-1 text-sm">
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Max home price</dt>
                        <dd
                          id="aggressive-home-price"
                          class="font-semibold text-gray-900"
                        >
                          $0
                        </dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Estimated loan amount</dt>
                        <dd id="aggressive-loan-amount" class="text-gray-900">
                          $0
                        </dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-600">Total monthly payment</dt>
                        <dd id="aggressive-total-payment" class="text-gray-900">
                          $0
                        </dd>
                      </div>
                    </dl>
                    <div
                      class="mt-3 border-t border-gray-100 pt-2 text-xs text-gray-500 space-y-1"
                    >
                      <div class="flex justify-between">
                        <span>Principal &amp; interest</span>
                        <span id="aggressive-pi">$0</span>
                      </div>
                      <div class="flex justify-between">
                        <span>Taxes &amp; insurance</span>
                        <span id="aggressive-ti">$0</span>
                      </div>
                      <div class="flex justify-between">
                        <span>HOA + PMI</span>
                        <span id="aggressive-hoa-pmi">$0</span>
                      </div>
                      <div class="flex justify-between">
                        <span>Total DTI</span>
                        <span id="aggressive-dti">0%</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Affordability verdict -->
                <div
                  id="verdict-box"
                  class="mt-4 rounded-lg border border-blue-100 bg-blue-50 p-4 text-sm text-blue-900 hidden"
                >
                  <p id="verdict-text" class="font-medium"></p>
                  <p
                    id="verdict-subtext"
                    class="mt-1 text-xs text-blue-800"
                  ></p>
                </div>
              </section>
            </section>

            <!-- Explanatory content -->
            <section class="mt-8 prose">
              <h2>How this house affordability calculator works</h2>
              <p>
                This tool estimates how much house you can afford by combining
                your income, existing debts, and the full cost of homeownership:
                principal and interest, property taxes, homeowners insurance,
                HOA fees, and private mortgage insurance (PMI) when applicable.
              </p>

              <h3>1. Debt-to-income (DTI) ratios</h3>
              <p>Two key ratios drive affordability:</p>
              <ul>
                <li>
                  <strong>Housing ratio</strong> = housing payment ÷ gross
                  monthly income
                </li>
                <li>
                  <strong>Total DTI</strong> = (housing payment + other monthly
                  debts) ÷ gross monthly income
                </li>
              </ul>
              <div class="formula-box">
                <p>
                  <strong>Gross monthly income</strong> = annual income ÷ 12
                </p>
                <p>
                  <strong>Max total debt payment</strong> = gross monthly income
                  × target DTI
                </p>
                <p>
                  <strong>Max housing payment</strong> = max total debt payment
                  − other monthly debts
                </p>
              </div>
              <p>
                The conservative scenario uses about
                <strong>28% housing / 36% total DTI</strong>, while the
                aggressive scenario uses
                <strong>33% housing / 43% total DTI</strong>, similar to what
                many lenders allow for strong borrowers.
              </p>

              <h3>2. Breaking down the monthly housing payment</h3>
              <p>Your total monthly housing cost is estimated as:</p>
              <div class="formula-box">
                <p>
                  <strong>Housing payment</strong> = Principal &amp; interest +
                  Property taxes + Homeowners insurance + HOA fees + PMI (if
                  any)
                </p>
              </div>
              <ul>
                <li>
                  <strong>Principal &amp; interest</strong> is computed using
                  the standard mortgage amortization formula.
                </li>
                <li>
                  <strong>Property taxes</strong> and
                  <strong>insurance</strong> are approximated as a yearly
                  percentage of the home price, divided by 12.
                </li>
                <li>
                  <strong>HOA fees</strong> are added as a fixed monthly amount.
                </li>
                <li>
                  <strong>PMI</strong> is applied only if the down payment is
                  below 20% of the home price.
                </li>
              </ul>

              <h3>3. Mortgage payment formula</h3>
              <p>
                The monthly principal and interest payment for a fixed-rate
                mortgage is:
              </p>
              <div class="formula-box">
                <p>
                  Let \( P \) = loan amount, \( r \) = monthly interest rate, \(
                  n \) = total number of payments (months).<br />
                  Then:
                </p>
                <p>
                  \[ \text{Payment} = P \times \frac{r(1+r)^n}{(1+r)^n - 1} \]
                </p>
              </div>
              <p>
                The calculator uses this formula in reverse: it finds the loan
                amount that fits within your allowed monthly housing payment,
                then adds your down payment to estimate the maximum home price.
              </p>

              <h2>Choosing a safe affordability level</h2>
              <p>
                Just because a lender approves you for a certain amount doesn’t
                mean it’s wise to borrow that much. Consider:
              </p>
              <ul>
                <li>
                  <strong>Job stability</strong> and how secure your income is.
                </li>
                <li>
                  <strong>Emergency fund</strong> (ideally 3–6 months of
                  expenses).
                </li>
                <li>
                  <strong>Future plans</strong> like childcare, car replacement,
                  or career changes.
                </li>
                <li>
                  <strong>Home maintenance</strong> (1–2% of home value per year
                  is a common rule of thumb).
                </li>
              </ul>
              <p>
                Use the conservative scenario as a baseline, and treat the
                aggressive scenario as the upper limit you might consider only
                if you have strong savings and low risk of income disruption.
              </p>

              <h2>Tips to increase how much house you can afford</h2>
              <ul>
                <li>Pay down high-interest debts to lower your DTI.</li>
                <li>
                  Increase your down payment to reduce PMI and the loan amount.
                </li>
                <li>
                  Shop around for better mortgage rates—small rate changes can
                  significantly change affordability.
                </li>
                <li>
                  Consider areas with lower property tax rates or HOA fees.
                </li>
                <li>
                  Choose a slightly smaller home and keep more cash for savings
                  and repairs.
                </li>
              </ul>

              <h2>Frequently asked questions</h2>

              <h3>Is the result a guarantee of what a lender will approve?</h3>
              <p>
                No. This calculator is an educational tool. Actual approval
                depends on your credit score, loan type, assets, employment
                history, and each lender’s underwriting rules. Use this as a
                starting point, then speak with a loan officer for a
                pre-approval.
              </p>

              <h3>Should I base affordability on one income or two?</h3>
              <p>
                If you’re buying with a partner, it’s safer to ask: “Could we
                still afford this home on one income for a while?” You can run
                the calculator twice—once with combined income and once with a
                single income—to see the difference.
              </p>

              <h3>What about adjustable-rate mortgages (ARMs)?</h3>
              <p>
                This calculator assumes a fixed rate. If you’re considering an
                ARM, try using the <strong>worst-case</strong> rate cap as the
                interest rate input to see if you could still afford the payment
                after potential rate increases.
              </p>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700 mt-2">See also: <a href="https://calcdomain.com/subcategories/finance-mortgages-and-home" class="text-blue-600 hover:underline">Mortgages & Home Financing Calculators</a>.</p><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: How, Much, House, Can, I, Afford.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              More mortgage &amp; home tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-blue-600 hover:underline"
                  >Mortgage Payment Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/rent-vs-buy"
                  class="text-blue-600 hover:underline"
                  >Rent vs. Buy Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mortgage-refinance"
                  class="text-blue-600 hover:underline"
                  >Mortgage Refinance Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-blue-600 hover:underline"
                  >House Affordability (Guide)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/closing-costs"
                  class="text-blue-600 hover:underline"
                  >Closing Costs Estimator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/biweekly-mortgage"
                  class="text-blue-600 hover:underline"
                  >Biweekly Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/pmi"
                  class="text-blue-600 hover:underline"
                  >Private Mortgage Insurance (PMI)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/15-vs-30-year-mortgage"
                  class="text-blue-600 hover:underline"
                  >15 vs 30 Year Mortgage</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Quick tips</h2>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
              <li>
                Aim to keep your total DTI at or below 36% for long-term
                comfort.
              </li>
              <li>
                Don’t drain your savings—keep an emergency fund after closing.
              </li>
              <li>
                Budget 1–2% of the home value per year for maintenance and
                repairs.
              </li>
              <li>
                Get quotes from multiple lenders; rate differences add up over
                30 years.
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Utility functions
      function fmtMoney(v) {
        if (!isFinite(v)) return "$0";
        return "$" + v.toLocaleString(undefined, { maximumFractionDigits: 0 });
      }
      function fmtPercent(v) {
        if (!isFinite(v)) return "0%";
        return v.toFixed(1).replace(/\.0$/, "") + "%";
      }

      function mortgagePayment(loanAmount, annualRate, years) {
        const n = years * 12;
        const r = annualRate / 100 / 12;
        if (loanAmount <= 0 || n <= 0) return 0;
        if (r === 0) return loanAmount / n;
        const pow = Math.pow(1 + r, n);
        return (loanAmount * (r * pow)) / (pow - 1);
      }

      function solveLoanAmountForPayment(targetPI, annualRate, years) {
        // Invert mortgage formula for loan amount
        const n = years * 12;
        const r = annualRate / 100 / 12;
        if (targetPI <= 0 || n <= 0) return 0;
        if (r === 0) return targetPI * n;
        const pow = Math.pow(1 + r, n);
        return (targetPI * (pow - 1)) / (r * pow);
      }

      function computeScenario({
        annualIncome,
        monthlyDebts,
        targetTotalDTI,
        loanYears,
        rate,
        downPayment,
        taxRate,
        insRate,
        hoaMonthly,
        pmiRate,
      }) {
        const grossMonthly = annualIncome / 12;
        const maxTotalDebt = grossMonthly * (targetTotalDTI / 100);
        const maxHousing = Math.max(0, maxTotalDebt - monthlyDebts);

        // We'll iterate to account for taxes/insurance/PMI which depend on price
        let homePrice = 0;
        let loanAmount = 0;
        let totalPayment = 0;

        // Start with an initial guess ignoring taxes/insurance/PMI
        let piGuess = maxHousing;
        loanAmount = solveLoanAmountForPayment(piGuess, rate, loanYears);
        homePrice = loanAmount + downPayment;

        for (let i = 0; i < 12; i++) {
          if (homePrice <= 0) break;
          loanAmount = Math.max(0, homePrice - downPayment);
          const pi = mortgagePayment(loanAmount, rate, loanYears);
          const taxes = (homePrice * (taxRate / 100)) / 12;
          const ins = (homePrice * (insRate / 100)) / 12;
          const needsPMI = downPayment / homePrice < 0.2;
          const pmi = needsPMI ? (loanAmount * (pmiRate / 100)) / 12 : 0;
          totalPayment = pi + taxes + ins + hoaMonthly + pmi;

          const diff = maxHousing - totalPayment;
          if (Math.abs(diff) < 1) break; // within $1

          // Adjust home price proportionally but gently
          const adjustFactor = 1 + diff / (maxHousing * 4);
          homePrice = homePrice * Math.max(0.5, Math.min(1.5, adjustFactor));
        }

        const piFinal = mortgagePayment(
          Math.max(0, homePrice - downPayment),
          rate,
          loanYears
        );
        const taxesFinal = (homePrice * (taxRate / 100)) / 12;
        const insFinal = (homePrice * (insRate / 100)) / 12;
        const needsPMI = homePrice > 0 && downPayment / homePrice < 0.2;
        const pmiFinal = needsPMI
          ? (Math.max(0, homePrice - downPayment) * (pmiRate / 100)) / 12
          : 0;
        totalPayment = piFinal + taxesFinal + insFinal + hoaMonthly + pmiFinal;

        const totalDTI =
          grossMonthly > 0
            ? ((totalPayment + monthlyDebts) / grossMonthly) * 100
            : 0;

        return {
          homePrice: Math.max(0, homePrice),
          loanAmount: Math.max(0, homePrice - downPayment),
          totalPayment,
          pi: piFinal,
          ti: taxesFinal + insFinal,
          hoaPmi: hoaMonthly + pmiFinal,
          totalDTI,
        };
      }

      function computeFromPrice({
        homePrice,
        annualIncome,
        monthlyDebts,
        loanYears,
        rate,
        downPayment,
        taxRate,
        insRate,
        hoaMonthly,
        pmiRate,
      }) {
        const grossMonthly = annualIncome / 12;
        const loanAmount = Math.max(0, homePrice - downPayment);
        const pi = mortgagePayment(loanAmount, rate, loanYears);
        const taxes = (homePrice * (taxRate / 100)) / 12;
        const ins = (homePrice * (insRate / 100)) / 12;
        const needsPMI = homePrice > 0 && downPayment / homePrice < 0.2;
        const pmi = needsPMI ? (loanAmount * (pmiRate / 100)) / 12 : 0;
        const totalPayment = pi + taxes + ins + hoaMonthly + pmi;
        const totalDTI =
          grossMonthly > 0
            ? ((totalPayment + monthlyDebts) / grossMonthly) * 100
            : 0;
        return {
          homePrice,
          loanAmount,
          totalPayment,
          pi,
          ti: taxes + ins,
          hoaPmi: hoaMonthly + pmi,
          totalDTI,
        };
      }

      function updateResults() {
        const modeFromIncome = document.body.dataset.mode !== "price";

        const annualIncome =
          parseFloat(document.getElementById("annual-income").value) || 0;
        const monthlyDebts =
          parseFloat(document.getElementById("monthly-debts").value) || 0;
        const targetDTI =
          parseFloat(document.getElementById("target-dti").value) || 36;
        const loanYears =
          parseInt(document.getElementById("loan-term").value, 10) || 30;
        const rate =
          parseFloat(document.getElementById("interest-rate").value) || 0;
        const downPayment =
          parseFloat(document.getElementById("down-payment").value) || 0;
        const taxRate =
          parseFloat(document.getElementById("property-tax-rate").value) || 0;
        const insRate =
          parseFloat(document.getElementById("insurance-rate").value) || 0;
        const hoaMonthly =
          parseFloat(document.getElementById("hoa-monthly").value) || 0;
        const pmiRate =
          parseFloat(document.getElementById("pmi-rate").value) || 0;
        const targetHomePrice =
          parseFloat(document.getElementById("target-home-price").value) || 0;

        let conservative, aggressive;

        if (modeFromIncome) {
          conservative = computeScenario({
            annualIncome,
            monthlyDebts,
            targetTotalDTI: Math.min(targetDTI, 36),
            loanYears,
            rate,
            downPayment,
            taxRate,
            insRate,
            hoaMonthly,
            pmiRate,
          });
          aggressive = computeScenario({
            annualIncome,
            monthlyDebts,
            targetTotalDTI: Math.max(targetDTI, 36) + 7, // approx 43
            loanYears,
            rate,
            downPayment,
            taxRate,
            insRate,
            hoaMonthly,
            pmiRate,
          });
        } else {
          conservative = computeFromPrice({
            homePrice: targetHomePrice,
            annualIncome,
            monthlyDebts,
            loanYears,
            rate,
            downPayment,
            taxRate,
            insRate,
            hoaMonthly,
            pmiRate,
          });
          aggressive = conservative; // same home, just show one set of numbers
        }

        // Update UI
        document.getElementById("conservative-home-price").textContent =
          fmtMoney(conservative.homePrice);
        document.getElementById("conservative-loan-amount").textContent =
          fmtMoney(conservative.loanAmount);
        document.getElementById("conservative-total-payment").textContent =
          fmtMoney(conservative.totalPayment);
        document.getElementById("conservative-pi").textContent = fmtMoney(
          conservative.pi
        );
        document.getElementById("conservative-ti").textContent = fmtMoney(
          conservative.ti
        );
        document.getElementById("conservative-hoa-pmi").textContent = fmtMoney(
          conservative.hoaPmi
        );
        document.getElementById("conservative-dti").textContent = fmtPercent(
          conservative.totalDTI
        );

        document.getElementById("aggressive-home-price").textContent = fmtMoney(
          aggressive.homePrice
        );
        document.getElementById("aggressive-loan-amount").textContent =
          fmtMoney(aggressive.loanAmount);
        document.getElementById("aggressive-total-payment").textContent =
          fmtMoney(aggressive.totalPayment);
        document.getElementById("aggressive-pi").textContent = fmtMoney(
          aggressive.pi
        );
        document.getElementById("aggressive-ti").textContent = fmtMoney(
          aggressive.ti
        );
        document.getElementById("aggressive-hoa-pmi").textContent = fmtMoney(
          aggressive.hoaPmi
        );
        document.getElementById("aggressive-dti").textContent = fmtPercent(
          aggressive.totalDTI
        );

        // Update down payment % if we have a home price
        const refHomePrice = modeFromIncome
          ? conservative.homePrice
          : targetHomePrice;
        if (refHomePrice > 0) {
          const dpPercent = (downPayment / refHomePrice) * 100;
          if (isFinite(dpPercent)) {
            document.getElementById("down-percent").value = Math.max(
              0,
              Math.min(100, dpPercent.toFixed(1))
            );
          }
        }

        // Verdict
        const verdictBox = document.getElementById("verdict-box");
        const verdictText = document.getElementById("verdict-text");
        const verdictSub = document.getElementById("verdict-subtext");

        if (!modeFromIncome && targetHomePrice > 0) {
          // Evaluate affordability of specific home
          const dti = aggressive.totalDTI;
          verdictBox.classList.remove("hidden");
          if (dti <= 30) {
            verdictText.textContent =
              "This home looks comfortably affordable based on your inputs.";
            verdictSub.textContent = `Your total debt-to-income ratio is about ${fmtPercent(
              dti
            )}, which leaves room in your budget for savings and surprises.`;
          } else if (dti <= 40) {
            verdictText.textContent =
              "This home is borderline but may be manageable.";
            verdictSub.textContent = `Your total DTI is around ${fmtPercent(
              dti
            )}. Many lenders would approve this, but you should be sure you are comfortable with the payment.`;
          } else {
            verdictText.textContent =
              "This home may be too expensive for a comfortable budget.";
            verdictSub.textContent = `Your total DTI is about ${fmtPercent(
              dti
            )}, which is high. Consider a lower price, bigger down payment, or paying off debts first.`;
          }
        } else if (modeFromIncome && conservative.homePrice > 0) {
          verdictBox.classList.remove("hidden");
          verdictText.textContent =
            "Based on your income and debts, this is a reasonable price range.";
          verdictSub.textContent = `The conservative estimate keeps your total DTI near ${fmtPercent(
            conservative.totalDTI
          )}, while the aggressive estimate pushes it toward ${fmtPercent(
            aggressive.totalDTI
          )}. Staying closer to the conservative side is usually safer.`;
        } else {
          verdictBox.classList.add("hidden");
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        // Initial mode
        document.body.dataset.mode = "income";

        const targetDtiInput = document.getElementById("target-dti");
        const targetDtiLabel = document.getElementById("target-dti-label");
        targetDtiInput.addEventListener("input", function () {
          targetDtiLabel.textContent = this.value + "%";
        });

        // Mode toggle
        const modeIncomeBtn = document.getElementById("mode-from-income");
        const modePriceBtn = document.getElementById("mode-from-price");
        const homePriceWrapper = document.getElementById(
          "home-price-input-wrapper"
        );

        modeIncomeBtn.addEventListener("click", function () {
          document.body.dataset.mode = "income";
          modeIncomeBtn.classList.add("bg-white", "shadow-sm", "text-blue-600");
          modePriceBtn.classList.remove(
            "bg-white",
            "shadow-sm",
            "text-blue-600"
          );
          modePriceBtn.classList.add("text-gray-600");
          homePriceWrapper.classList.add("hidden");
          updateResults();
        });

        modePriceBtn.addEventListener("click", function () {
          document.body.dataset.mode = "price";
          modePriceBtn.classList.add("bg-white", "shadow-sm", "text-blue-600");
          modeIncomeBtn.classList.remove(
            "bg-white",
            "shadow-sm",
            "text-blue-600"
          );
          modeIncomeBtn.classList.add("text-gray-600");
          homePriceWrapper.classList.remove("hidden");
          updateResults();
        });

        // Sync down payment and percent
        document
          .getElementById("sync-down-payment")
          .addEventListener("click", function () {
            const modeFromIncome = document.body.dataset.mode !== "price";
            const conservativePriceText = document
              .getElementById("conservative-home-price")
              .textContent.replace(/[^0-9.]/g, "");
            const conservativePrice = parseFloat(conservativePriceText) || 0;
            const targetHomePrice =
              parseFloat(document.getElementById("target-home-price").value) ||
              0;
            const refHomePrice = modeFromIncome
              ? conservativePrice
              : targetHomePrice;
            const downPercentInput = document.getElementById("down-percent");
            const downPaymentInput = document.getElementById("down-payment");

            if (refHomePrice > 0) {
              const dpPercent = parseFloat(downPercentInput.value) || 0;
              const dpAmount = (refHomePrice * dpPercent) / 100;
              downPaymentInput.value = Math.round(dpAmount / 1000) * 1000;
            } else {
              // If no home price yet, sync percent from amount using a rough guess
              const dpAmount = parseFloat(downPaymentInput.value) || 0;
              if (dpAmount > 0) {
                downPercentInput.value = 20;
              }
            }
            updateResults();
          });

        // Update on calculate button
        document
          .getElementById("calculate-btn")
          .addEventListener("click", updateResults);

        // Reset button
        document
          .getElementById("reset-btn")
          .addEventListener("click", function () {
            document.getElementById("annual-income").value = 120000;
            document.getElementById("monthly-debts").value = 500;
            document.getElementById("target-dti").value = 36;
            document.getElementById("target-dti-label").textContent = "36%";
            document.getElementById("loan-term").value = 30;
            document.getElementById("interest-rate").value = 6.5;
            document.getElementById("down-payment").value = 90000;
            document.getElementById("down-percent").value = 20;
            document.getElementById("property-tax-rate").value = 1.2;
            document.getElementById("insurance-rate").value = 0.5;
            document.getElementById("hoa-monthly").value = 0;
            document.getElementById("pmi-rate").value = 0.8;
            document.getElementById("target-home-price").value = 450000;
            document.body.dataset.mode = "income";
            document
              .getElementById("home-price-input-wrapper")
              .classList.add("hidden");
            document
              .getElementById("mode-from-income")
              .classList.add("bg-white", "shadow-sm", "text-blue-600");
            document
              .getElementById("mode-from-price")
              .classList.remove("bg-white", "shadow-sm", "text-blue-600");
            document
              .getElementById("mode-from-price")
              .classList.add("text-gray-600");
            updateResults();
          });

        // Auto-update on key changes (debounced)
        const autoInputs = [
          "annual-income",
          "monthly-debts",
          "target-dti",
          "loan-term",
          "interest-rate",
          "down-payment",
          "down-percent",
          "property-tax-rate",
          "insurance-rate",
          "hoa-monthly",
          "pmi-rate",
          "target-home-price",
        ];
        let debounceTimer;
        autoInputs.forEach((id) => {
          const el = document.getElementById(id);
          if (!el) return;
          el.addEventListener("input", function () {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(function () {
              // If user changed down-percent directly, adjust down-payment based on conservative price if available
              if (id === "down-percent") {
                const modeFromIncome = document.body.dataset.mode !== "price";
                const conservativePriceText = document
                  .getElementById("conservative-home-price")
                  .textContent.replace(/[^0-9.]/g, "");
                const conservativePrice =
                  parseFloat(conservativePriceText) || 0;
                const targetHomePrice =
                  parseFloat(
                    document.getElementById("target-home-price").value
                  ) || 0;
                const refHomePrice = modeFromIncome
                  ? conservativePrice
                  : targetHomePrice;
                const dpPercent =
                  parseFloat(document.getElementById("down-percent").value) ||
                  0;
                if (refHomePrice > 0) {
                  document.getElementById("down-payment").value =
                    Math.round((refHomePrice * dpPercent) / 100 / 1000) * 1000;
                }
              }
              updateResults();
            }, 250);
          });
        });

        // Initial calculation
        updateResults();
      });

      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

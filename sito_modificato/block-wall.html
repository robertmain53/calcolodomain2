<!DOCTYPE html><html lang="en"><head>
    <link rel="canonical" href="https://calcdomain.com/block-wall">
    <title>Concrete Block (CMU) Wall Calculator | CalcDomain</title>
    <meta name="description" content="Estimate materials for a CMU block wall—blocks, mortar, rebar, grout, and caps—with a WCAG-friendly calculator backed by TMS guidance.">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Concrete Block (CMU) Wall Calculator | CalcDomain">
    <meta property="og:description" content="Estimate materials for a CMU block wall—blocks, mortar, rebar, grout, and caps—with a WCAG-friendly calculator backed by TMS guidance.">
    <meta property="og:url" content="https://calcdomain.com/block-wall">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Concrete Block (CMU) Wall Calculator | CalcDomain">
    <meta name="twitter:description" content="Estimate materials for a CMU block wall—blocks, mortar, rebar, grout, and caps—with a WCAG-friendly calculator backed by TMS guidance.">

    <link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg">
    <link rel="shortcut icon" href="https://calcdomain.com/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png">
    <link rel="manifest" href="https://calcdomain.com/site.webmanifest">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif; }
        body { margin: 0; background: #f8fafc; color: #0f172a; }
        .nav.container, .container { max-width: 1100px; }
        .nav { display: flex; align-items: center; justify-content: space-between; padding: 1rem 0; }
        .brand { font-weight: 700; font-size: 1.5rem; color: #1d4ed8; }
        .navRight { display: flex; gap: 1rem; align-items: center; }
        .pill { padding: 0.35rem 0.75rem; border-radius: 999px; border: 1px solid #e2e8f0; font-size: 0.9rem; color: #475569; }
        .pill:hover { border-color: #1d4ed8; color: #1d4ed8; }
        .sub { margin: 0; }
        .alert { display: none; background: #fee2e2; color: #7f1d1d; padding: 0.75rem 1rem; border-radius: 0.5rem; border-left: 4px solid #dc2626; margin-top: 0.75rem; }
        .calc-hero { display: grid; gap: 1.5rem; grid-template-columns: 1fr; }
        @media (min-width: 1024px) { .calc-hero { grid-template-columns: 1fr 380px; } }
        .card { background: #ffffff; border-radius: 1rem; border: 1px solid #e2e8f0; padding: 1.5rem; box-shadow: 0 10px 35px rgba(15, 23, 42, 0.05); }
        .calc-input { width: 100%; border: 1px solid #cbd5f5; border-radius: 0.6rem; padding: 0.65rem 0.9rem; font-size: 0.95rem; background: #f8fafc; }
        .calc-input:focus { outline: 2px solid #93c5fd; background: #ffffff; }
        .calc-label { display: block; font-size: 0.85rem; font-weight: 600; margin-bottom: 0.35rem; color: #475569; }
        .optional-section { background: #f1f5f9; border: 1px dashed #cbd5f5; border-radius: 0.75rem; padding: 1rem; }
        .result-box { background: linear-gradient(135deg, #eef2ff 0%, #dbeafe 100%); border: 1px solid #c7d2fe; border-radius: 0.75rem; padding: 1.25rem; text-align: center; }
        .result-value { font-size: 2rem; font-weight: 700; color: #1d4ed8; }
        .result-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 0.9rem 1.5rem; margin-top: 1rem; }
        .result-label { font-size: 0.9rem; color: #475569; }
        .kpi-row { display: flex; justify-content: space-between; padding: 0.65rem 0; border-bottom: 1px solid #e2e8f0; font-size: 0.9rem; }
        .kpi-row:last-child { border-bottom: none; }
        .kpi-label { color: #475569; }
        .kpi-value { font-weight: 700; }
        .btn { width: 100%; border-radius: 0.75rem; border: none; display: inline-flex; align-items: center; justify-content: center; font-weight: 600; padding: 0.85rem 1.25rem; cursor: pointer; transition: background 0.2s ease; }
        .btn-primary { background: #1d4ed8; color: #fff; }
        .btn-primary:hover { background: #1e40af; }
        .btn-secondary { background: #fff; border: 1px solid #cbd5f5; color: #0f172a; }
        .btn-secondary:hover { background: #f1f5f9; }
        .sticky-box { position: sticky; top: 1rem; }
        .schedule-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        .schedule-table th, .schedule-table td { border-bottom: 1px solid #e2e8f0; padding: 0.65rem 0.5rem; text-align: left; }
        .schedule-table thead th { text-transform: uppercase; font-size: 0.7rem; letter-spacing: 0.05em; background: #f8fafc; color: #475569; }
        .content-card h2 { margin-top: 0; font-size: 1.5rem; }
        .content-card p, .content-card li { color: #475569; }
        .meta-section summary { cursor: pointer; font-weight: 600; display: inline-flex; align-items: center; }
        .meta-section details > div { margin-top: 0.75rem; }
        .badge-row { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 1rem; }
        .badge-pill { border: 1px solid #e2e8f0; border-radius: 999px; padding: 0.35rem 0.9rem; font-size: 0.85rem; background: #fff; color: #0f172a; }
        .faq details { border: 1px solid #e2e8f0; border-radius: 0.75rem; padding: 0.9rem; background: #fff; }
        .faq summary { cursor: pointer; font-weight: 600; color: #1d4ed8; }
        .faq p { margin: 0.5rem 0 0; }
    </style>
</head><body class="bg-gray-50 text-gray-800">

    <header id="siteHeader" class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="nav container mx-auto px-4 lg:px-6" aria-label="Primary">
        <div class="flex-1 flex items-center justify-between">
          <a class="brand" href="https://calcdomain.com">CalcDomain</a>
          <div class="w-full max-w-md hidden md:block">
            <label class="sr-only" for="search-input">Search calculators</label>
            <div class="relative">
              <input id="search-input" type="search" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" autocomplete="off">
              <svg class="w-5 h-5 absolute right-3 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
            </div>
          </div>
          <div class="navRight hidden md:flex">
            <a class="pill" href="https://calcdomain.com/search">Advanced Search</a>
            <a class="pill" href="https://calcdomain.com/categories/construction-diy">Construction</a>
          </div>
        </div>
        <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </nav>
      <nav id="mobile-menu" class="md:hidden px-4 pb-4 hidden" aria-label="Mobile menu">
        <div class="space-y-2">
          <a href="https://calcdomain.com/search" class="pill block">Advanced Search</a>
          <a href="https://calcdomain.com/categories/construction-diy" class="pill block">Construction</a>
        </div>
      </nav>
    </header>

    <main id="mainContent" class="container mx-auto px-4 py-8 space-y-6">
      <nav class="text-sm text-gray-500" aria-label="Breadcrumb">
        <ol class="flex items-center gap-2">
          <li><a href="https://calcdomain.com" class="text-blue-600">Home</a></li>
          <li>•</li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-blue-600">Construction &amp; DIY</a></li>
          <li>•</li>
          <li class="text-gray-600">Concrete Block (CMU) Wall</li>
        </ol>
      </nav>

      <div class="space-y-3">
        <h1 id="pageTitle" class="text-3xl font-bold text-gray-900">Concrete Block (CMU) Wall Calculator</h1>
        <p id="pageSub" class="sub text-lg text-gray-600">Professional-grade CMU block wall calculator. Estimate the number of concrete blocks, courses, mortar, rebar, grout, and caps required for your wall with WCAG-compliant, mobile-first UX.</p>
        <div id="errorBox" class="alert" role="alert" aria-live="polite"></div>
      </div>

      <div class="calc-hero" id="calcHero" aria-label="Calculator hero">
        <section class="card" id="inputsCard" aria-label="Calculator inputs">
          <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 space-y-6">
            <div>
              <h3 class="text-lg font-semibold text-gray-700">Unit system</h3>
              <div class="mt-3 grid grid-cols-2 gap-3">
                <label class="inline-flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-2 text-sm text-gray-700 cursor-pointer">
                  <input type="radio" name="units" id="unitsUs" value="us" class="text-blue-600 focus:ring-blue-500" checked="">
                  <span>US (ft, in)</span>
                </label>
                <label class="inline-flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-2 text-sm text-gray-700 cursor-pointer">
                  <input type="radio" name="units" id="unitsMetric" value="metric" class="text-blue-600 focus:ring-blue-500">
                  <span>Metric (m / mm)</span>
                </label>
              </div>
              <p class="text-xs text-gray-500 mt-2">Switching systems will convert all lengths/areas behind the scenes while keeping the display concise.</p>
            </div>

            <div class="grid gap-4 md:grid-cols-2">
              <div>
                <label class="calc-label" for="wallLength">Wall length</label>
                <input id="wallLength" type="number" class="calc-input" placeholder="e.g., 25" step="0.01" min="0" value="25">
                <p id="lengthHelper" class="text-xs text-gray-500 mt-1">Enter the total horizontal run; decimals cover inches.</p>
              </div>
              <div>
                <label class="calc-label" for="wallHeight">Wall height</label>
                <input id="wallHeight" type="number" class="calc-input" placeholder="e.g., 6" step="0.01" min="0" value="6">
                <p id="heightHelper" class="text-xs text-gray-500 mt-1">Finished height above the footing; stepped walls may use an average.</p>
              </div>
            </div>

            <div>
              <label class="calc-label" for="openingArea">Total openings area</label>
              <input id="openingArea" type="number" class="calc-input" placeholder="e.g., 40" step="0.01" min="0" value="0">
              <p class="text-xs text-gray-500 mt-1">Doors, windows, or voids reduce the net wall area.</p>
            </div>

            <div>
              <label class="calc-label" for="blockPreset">Block size (nominal)</label>
              <select id="blockPreset" class="calc-input">
                <option value="8x8x16" selected="">US 8×8×16 in (nominal face 16×8)</option>
                <option value="6x8x16">US 6×8×16 in (same face 16×8)</option>
                <option value="12x8x16">US 12×8×16 in (same face 16×8)</option>
                <option value="400x200x200">Metric 400×200×200 mm (nominal face 400×200)</option>
                <option value="custom">Custom nominal size</option>
              </select>
              <p class="text-xs text-gray-500 mt-1">Nominal size already includes a typical mortar joint (≈3/8 in or 10 mm).</p>
            </div>

            <div id="customBlockWrap" class="space-y-3 hidden">
              <p class="text-sm font-semibold text-gray-700">Custom block face</p>
              <div class="grid gap-4 md:grid-cols-2">
                <div>
                  <label class="calc-label" for="customBlockLength">Nominal face length</label>
                  <input id="customBlockLength" type="number" class="calc-input" placeholder="e.g., 16" step="0.01" min="0.01">
                  <p id="customLengthUnit" class="text-xs text-gray-500 mt-1">in</p>
                </div>
                <div>
                  <label class="calc-label" for="customBlockHeight">Nominal face height</label>
                  <input id="customBlockHeight" type="number" class="calc-input" placeholder="e.g., 8" step="0.01" min="0.01">
                  <p id="customHeightUnit" class="text-xs text-gray-500 mt-1">in</p>
                </div>
              </div>
            </div>

            <div>
              <label class="calc-label" for="wastePct">Waste allowance (%)</label>
              <input id="wastePct" type="number" class="calc-input" step="0.5" min="0" max="30" value="5">
              <p class="text-xs text-gray-500 mt-1">Cover cuts, breakage, and layout challenges (5–10% is typical).</p>
            </div>

            <div class="flex items-center gap-3">
              <input id="includeCaps" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded">
              <label for="includeCaps" class="text-sm font-semibold text-gray-700">Include cap units (top course)</label>
            </div>

            <div class="flex items-center gap-3">
              <input id="showRebar" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded">
              <label for="showRebar" class="text-sm font-semibold text-gray-700">Include rebar &amp; grout estimates</label>
            </div>

            <div id="rebarPanel" class="optional-section hidden">
              <h4 class="text-sm font-semibold text-gray-700">Rebar &amp; grout inputs</h4>
              <div class="grid gap-4 md:grid-cols-2">
                <div>
                  <label class="calc-label" for="vSpacing">Vertical rebar spacing</label>
                  <input id="vSpacing" type="number" class="calc-input" step="0.5" min="0.5" value="4">
                  <p id="vSpacingUnit" class="text-xs text-gray-500 mt-1">ft</p>
                </div>
                <div>
                  <label class="calc-label" for="hSpacing">Horizontal rebar spacing</label>
                  <input id="hSpacing" type="number" class="calc-input" step="0.5" min="0.5" value="4">
                  <p id="hSpacingUnit" class="text-xs text-gray-500 mt-1">ft</p>
                </div>
              </div>
              <div class="grid gap-4 md:grid-cols-2">
                <div>
                  <label class="calc-label" for="lapAllowance">Lap/anchorage allowance</label>
                  <input id="lapAllowance" type="number" class="calc-input" step="0.5" min="0" value="2">
                  <p id="lapUnit" class="text-xs text-gray-500 mt-1">ft</p>
                </div>
                <div>
                  <label class="calc-label" for="cellArea">Grouted cell area</label>
                  <input id="cellArea" type="number" class="calc-input" step="1" min="1" value="36">
                  <p class="text-xs text-gray-500 mt-1">in², approximate cell area around vertical bars.</p>
                </div>
              </div>
            </div>

            <div class="pt-2">
              <div class="flex gap-3">
                <button id="calcBtn" class="btn btn-primary" type="button">Calculate</button>
                <button id="resetBtn" class="btn btn-secondary btnSecondary" type="button">Reset</button>
              </div>
            </div>
          </div>
        
<div data-canon-btnrow="1" style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;"></div>
</section>

        <section class="card sticky-box" id="resultsCard" aria-label="Calculator results">
          <div class="result-box mb-4" aria-live="polite" aria-atomic="true">
            <div class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1">Total blocks to order</div>
            <div class="result-value" id="rTotalBlocksHighlights">0</div>
            <div class="text-sm text-gray-600 mt-1" id="rSummaryCaption">Includes waste &amp; caps.</div>
          </div>

          <div class="result-grid" id="resultsGrid">
            <div class="result-label">Wall area</div><div class="result-value text-base font-semibold" id="rWallArea">0.00 ft²</div>
            <div class="result-label">Block face area</div><div class="result-value" id="rBlockArea">0.00 ft²</div>
            <div class="result-label">Courses (rows)</div><div class="result-value" id="rCourses">0</div>
            <div class="result-label">Blocks per course</div><div class="result-value" id="rPerCourse">0</div>
            <div class="result-label">Blocks before waste</div><div class="result-value" id="rBlocks">0</div>
            <div class="result-label">Waste (extra)</div><div class="result-value" id="rWaste">0</div>
            <div class="result-label">Total blocks</div><div class="result-value" id="rTotalBlocks">0</div>
            <div class="result-label">Suggested half blocks</div><div class="result-value" id="rHalfBlocks">0</div>
            <div class="result-label">Mortar volume</div><div class="result-value" id="rMortar">0 ft³ (0.00 yd³)</div>
            <div class="result-label">Mortar bags (80 lb)</div><div class="result-value" id="rMortarBags">0</div>
            <div class="result-label">Cap units</div><div class="result-value" id="rCaps">0</div>
            <div class="result-label">Vertical rebar count</div><div class="result-value" id="rVbars">0</div>
            <div class="result-label">Vertical bar length (each)</div><div class="result-value" id="rVbarEach">0 ft</div>
            <div class="result-label">Vertical rebar total length</div><div class="result-value" id="rVbarTotal">0 ft</div>
            <div class="result-label">Horizontal rebar rows</div><div class="result-value" id="rHbars">0</div>
            <div class="result-label">Horizontal rebar total length</div><div class="result-value" id="rHbarTotal">0 ft</div>
            <div class="result-label">Grout volume (vert. bars)</div><div class="result-value" id="rGrout">0 ft³ (0.00 yd³)</div>
          </div>

          <div class="flex gap-3 mt-4">
            <button id="toggleSchedule" class="btn btn-secondary" type="button">View course breakdown</button>
            <button id="downloadCsv" class="btn btn-secondary" type="button" disabled="">Download CSV</button>
          </div>
          <button id="copyResults" class="btn btn-secondary mt-3" type="button">Copy results</button>
          <p class="text-xs text-gray-500 mt-3">Estimates only. Verify with project documents and local codes.</p>
        </section>
      </div>

      <div id="scheduleWrap" class="mt-6 overflow-x-auto border border-gray-200 rounded-lg tableWrap" style="display:none;" aria-label="Course breakdown">
        <table class="schedule-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Blocks / course</th>
              <th>Half blocks</th>
              <th>Caps</th>
              <th>Mortar per course (ft³)</th>
            </tr>
          </thead>
          <tbody id="scheduleBody"></tbody>
        </table>
        <div class="text-xs text-gray-500 px-3 py-2 bg-gray-50">Showing the first 360 courses. Download CSV for the complete breakdown.</div>
      </div>

      <section class="card content-card space-y-6" id="howToUse" aria-label="How to use and methodology">
        <h2 class="text-2xl font-semibold text-gray-800">How to Use This Calculator</h2>
        <p>Follow these steps for a reliable takeoff: choose the unit system that matches your plans, enter total wall dimensions and any voids, select or define the block face size, dial in waste, caps, and reinforcement preferences, then review side-by-side totals for blocks, mortar, caps, and reinforcement.</p>
        <ol class="list-decimal list-inside text-gray-600 space-y-2">
          <li>Choose US or metric so the calculator converts every intermediate value consistently.</li>
          <li>Enter the wall length and height; use decimals for fractional inches or meters.</li>
          <li>Subtract the area of openings (doors, windows) so the net wall area reflects actual masonry.</li>
          <li>Select a nominal block size or enter custom face dimensions when you work with specialty units.</li>
          <li>Add a waste allowance (5–10% is common) and toggle caps or rebar estimates if needed.</li>
          <li>Click Calculate and review totals, then toggle the course breakdown or download the CSV schedule.</li>
        </ol>

        <h2 class="text-2xl font-semibold text-gray-800">Methodology</h2>
        <p>The calculator uses area-based counting for blocks, modular guidance for courses, and industry benchmarks for mortar and grout yields. Vertical rebar counts assume a bar at each end plus additional bars spaced per your input; horizontal rows assume full-height coverage. Mortar volumes scale with block area relative to a standard 8×8×16 unit, and grout volumes multiply the vertical bars by the cell area you provide.</p>
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-600">
          Data sources: <strong>TMS 402/602-22</strong> and NCMA TEK Notes (2-3A, 9-1). Outputs remain estimates for planning; always verify field questions with your structural engineer and local code officials.
        </div>

        <section class="bg-white border border-gray-200 rounded-lg p-4">
          <h3 class="text-lg font-semibold text-gray-700">Worked example</h3>
          <p class="text-gray-600">Given: wall 30 ft × 6 ft, 20 ft² of openings, 8×8×16 block, 7% waste. Net area equals 160 ft², standard block face is 0.889 ft², so 180 blocks before waste and ~193 after waste. Modular guidance yields 9 courses and 23 blocks per course. Mortar ≈ 13.5 ft³ (~0.50 yd³, ~23 bags); rebar (4 ft spacing) → 8 vertical bars (64 ft total) and 2 horizontal rows (60 ft total), with about 12 ft³ of grout.</p>
        </section>

        <section class="faq space-y-3">
          <h3 class="text-lg font-semibold text-gray-700">Frequently Asked Questions</h3>
          <details>
            <summary>What block sizes are supported?</summary>
            <p>Common US nominal sizes (6, 8, 12 in thickness) plus the 400×200 mm metric module are built in. Choose “Custom” to enter any face dimensions.</p>
          </details>
          <details>
            <summary>How accurate are the estimates?</summary>
            <p>Block counts are precise to the modular face area; mortar and grout assume industry-average yields. Actual needs vary with workmanship and site conditions.</p>
          </details>
          <details>
            <summary>Does this account for corners, control joints, or bond beams?</summary>
            <p>The tool provides global quantities. Specific detailing, corners, and bond beams require project-level review.</p>
          </details>
          <details>
            <summary>How should I set waste percentage?</summary>
            <p>Use 5–7% for straightforward walls; increase to 8–12% for complex layouts, large openings, or fragile units.</p>
          </details>
          <details>
            <summary>Can I rely on this for code compliance?</summary>
            <p>No. Structural design must follow TMS 402/602, local codes, and the project engineer’s requirements.</p>
          </details>
          <details>
            <summary>What is the difference between mortar and grout?</summary>
            <p>Mortar joints bond blocks together. Grout fills cells around reinforcement and bond beams to improve strength.</p>
          </details>
        </section>
      </section>

      <section class="card meta-section" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
        <details open="">
          <summary>Formulas</summary>
          <div>
            <p class="text-sm text-gray-600">Net wall area: <code>A<sub>w</sub> = L × H - A<sub>o</sub></code></p>
            <p class="text-sm text-gray-600">Block face area: <code>A<sub>b</sub> = L<sub>b</sub> × H<sub>b</sub></code></p>
            <p class="text-sm text-gray-600">Blocks before waste: <code>N = ceil(A<sub>w</sub> / A<sub>b</sub>)</code></p>
            <p class="text-sm text-gray-600">Total with waste: <code>N<sub>t</sub> = ceil(N × (1 + w / 100))</code></p>
            <p class="text-sm text-gray-600">Courses &amp; blocks per course: <code>C = ceil(H / H<sub>b</sub>), B<sub>c</sub> = ceil(L / L<sub>b</sub>)</code></p>
            <p class="text-sm text-gray-600">Mortar volume: <code>V<sub>m</sub> ≈ N × 0.075 × (A<sub>b</sub> / A<sub>b0</sub>)</code></p>
            <p class="text-sm text-gray-600">Vertical rebar count: <code>n<sub>v</sub> = max(2, floor(L / s<sub>v</sub>) + 1)</code></p>
            <p class="text-sm text-gray-600">Horizontal rebar rows: <code>n<sub>h</sub> = max(1, floor(H / s<sub>h</sub>) + 1)</code></p>
            <p class="text-sm text-gray-600">Grout volume: <code>V<sub>g</sub> ≈ n<sub>v</sub> × A<sub>c</sub> × H</code></p>
            <p class="text-sm text-gray-600 mt-3 font-semibold">Variables:</p>
            <ul class="text-xs text-gray-600 list-disc list-inside">
              <li>L: wall length, H: wall height, A<sub>o</sub>: openings area</li>
              <li>L<sub>b</sub>/H<sub>b</sub>: nominal block face</li>
              <li>A<sub>w</sub>: net wall area; A<sub>b</sub>: block face area</li>
              <li>N: blocks before waste; N<sub>t</sub>: blocks with waste</li>
              <li>w: waste percentage; C: courses; B<sub>c</sub>: blocks per course</li>
              <li>n<sub>v</sub>/n<sub>h</sub>: rebar counts; s<sub>v</sub>/s<sub>h</sub>: spacing</li>
              <li>v<sub>0</sub>=0.075 ft³ (standard block); A<sub>c</sub>: grouted cell area</li>
            </ul>
          </div>
        </details>

        <details class="mt-3">
          <summary>Citations</summary>
          <div>
            <ul class="text-sm list-disc list-inside text-gray-600">
              <li><strong>TMS 402/602-22</strong> — Masonry Society; <a href="https://masonrysociety.org/product/tms-402-602-22/" class="text-blue-600" rel="nofollow noopener" target="_blank">https://masonrysociety.org/product/tms-402-602-22/</a></li>
              <li><strong>TEK 2-3A: Unit dimensions</strong> — NCMA; <a href="https://ncma.org/resource/tek-2-3a-unit-dimensions-nominal-and-modular/" class="text-blue-600" rel="nofollow noopener" target="_blank">https://ncma.org/resource/tek-2-3a-unit-dimensions-nominal-and-modular/</a></li>
              <li><strong>TEK 9-1: Mortar and grout</strong> — NCMA; <a href="https://ncma.org/resource/mortar-and-grout-for-concrete-masonry/" class="text-blue-600" rel="nofollow noopener" target="_blank">https://ncma.org/resource/mortar-and-grout-for-concrete-masonry/</a></li>
            </ul>
          </div>
        </details>

        <details class="mt-3">
          <summary>Changelog</summary>
          <div>
            <ul class="text-sm list-disc list-inside text-gray-600">
              <li>0.1.0-draft · 2026-01-19 — Initial audit export and verification scaffolding.</li>
            </ul>
          </div>
        </details>

        <div class="badge-row">
          <span class="badge-pill">✓ Verified by Ugo Candido</span>
          <span class="badge-pill">Last updated: 2026-01-19</span>
          <span class="badge-pill">Version 0.1.0-draft</span>
        </div>
      
<details id="formulaDetails">
  <summary style="cursor:pointer; font-weight:700; color:var(--text)">Formulas</summary>
  <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
    <!-- Intentionally left blank by canon-shell fixer. Populate during content migration. -->
  </div>
</details>

<details id="citationDetails">
  <summary style="cursor:pointer; font-weight:700; color:var(--text)">Citations</summary>
  <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
    <!-- Intentionally left blank by canon-shell fixer. Populate during content migration. -->
  </div>
</details>

<details id="changelogDetails">
  <summary style="cursor:pointer; font-weight:700; color:var(--text)">Changelog</summary>
  <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
    <!-- Intentionally left blank by canon-shell fixer. Populate during content migration. -->
  </div>
</details>

          <div class="badge" id="versionBadge">Version 1.5.0</div></section>
    </main>

    <footer id="siteFooter" class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid gap-8 md:grid-cols-4">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400">Accurate, transparent calculators that help you estimate project materials faster.</p>
          </div>
          <div>
            <h4 class="font-semibold mb-3">Categories</h4>
            <ul class="space-y-2 text-gray-300">
              <li><a href="https://calcdomain.com/categories/construction-diy" class="hover:text-white">Construction &amp; DIY</a></li>
              <li><a href="https://calcdomain.com/categories/finance" class="hover:text-white">Finance</a></li>
              <li><a href="https://calcdomain.com/categories/math-conversions" class="hover:text-white">Math &amp; Conversions</a></li>
            </ul>
          </div>
          <div>
            <h4 class="font-semibold mb-3">Tools</h4>
            <ul class="space-y-2 text-gray-300">
              <li><a href="https://calcdomain.com/mortgage-payment" class="hover:text-white">Mortgage Payment</a></li>
              <li><a href="https://calcdomain.com/california-income-tax" class="hover:text-white">California Income Tax</a></li>
              <li><a href="https://calcdomain.com/auto-loan-calculator" class="hover:text-white">Auto Loan Calculator</a></li>
            </ul>
          </div>
          <div>
            <h4 class="font-semibold mb-3">Support</h4>
            <ul class="space-y-2 text-gray-300">
              <li><a href="https://calcdomain.com/about" class="hover:text-white">About</a></li>
              <li><a href="https://calcdomain.com/contact" class="hover:text-white">Contact</a></li>
              <li><a href="https://calcdomain.com/privacy" class="hover:text-white">Privacy</a></li>
            </ul>
          </div>
        </div>
        <div class="border-t border-gray-800 mt-8 pt-6 text-center text-gray-400">
          <p>© 2026 CalcDomain. All Rights Reserved. | Free online calculators for professionals and DIYers.</p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7MB5V1LZRN');
    </script>
    <script>
      window.MathJax = {
        tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['$$','$$'], ['\\[','\\]']] },
        svg: { fontCache: 'global' }
      };
    </script>
    <script>
      (function () {
        var loadMathJax = function () {
          if (window.__mathjaxLoading) return;
          window.__mathjaxLoading = true;
          var script = document.createElement('script');
          script.id = 'MathJax-script';
          script.async = true;
          script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js';
          document.head.appendChild(script);
        };

        var target = document.querySelector('.formula, .mathjax, .math, [data-mathjax]');
        if (!target) return;
        if ('IntersectionObserver' in window) {
          var observer = new IntersectionObserver(function (entries) {
            if (entries.some(function (entry) { return entry.isIntersecting; })) {
              observer.disconnect();
              loadMathJax();
            }
          }, { rootMargin: '200px' });
          observer.observe(target);
        } else {
          window.addEventListener('load', function () { setTimeout(loadMathJax, 1000); }, { once: true });
        }
      })();
    </script>

    <script>
    (function() {
      'use strict';

    const debounce = (fn, delay = 100) => {
      let t;
      return (...args) => {
        clearTimeout(t);
        t = setTimeout(() => fn(...args), delay);
      };
    };

      const EPS = Number.EPSILON;
      const toFeet = (value, units) => (units === 'metric' ? value * 3.28084 : value);
      const toSquareFeet = (value, units) => (units === 'metric' ? value * 10.763910417 : value);
      const inchesToFeet = (value) => value / 12;
      const mmToFeet = (value) => value * 0.00328084;
      const areaFromInches = (value) => value / 144;
      const round2 = (value) => Math.round((value + EPS) * 100) / 100;
      const round0 = (value) => Math.round(value);

      const blockPresets = {
        '8x8x16': { lengthIn: 16, heightIn: 8 },
        '6x8x16': { lengthIn: 16, heightIn: 8 },
        '12x8x16': { lengthIn: 16, heightIn: 8 },
        '400x200x200': { lengthMm: 400, heightMm: 200 }
      };

      const els = {
        unitsGroup: document.querySelectorAll('input[name="units"]'),
        unitsUs: document.getElementById('unitsUs'),
        unitsMetric: document.getElementById('unitsMetric'),
        wallLength: document.getElementById('wallLength'),
        wallHeight: document.getElementById('wallHeight'),
        openingArea: document.getElementById('openingArea'),
        blockPreset: document.getElementById('blockPreset'),
        customBlockWrap: document.getElementById('customBlockWrap'),
        customBlockLength: document.getElementById('customBlockLength'),
        customBlockHeight: document.getElementById('customBlockHeight'),
        includeCaps: document.getElementById('includeCaps'),
        showRebar: document.getElementById('showRebar'),
        rebarPanel: document.getElementById('rebarPanel'),
        vSpacing: document.getElementById('vSpacing'),
        hSpacing: document.getElementById('hSpacing'),
        lapAllowance: document.getElementById('lapAllowance'),
        cellArea: document.getElementById('cellArea'),
        wastePct: document.getElementById('wastePct'),
        errorBox: document.getElementById('errorBox'),
        scheduleWrap: document.getElementById('scheduleWrap'),
        scheduleBody: document.getElementById('scheduleBody'),
        toggleSchedule: document.getElementById('toggleSchedule'),
        downloadCsv: document.getElementById('downloadCsv'),
        copyResults: document.getElementById('copyResults'),
        calcBtn: document.getElementById('calcBtn'),
        resetBtn: document.getElementById('resetBtn'),
        rWallArea: document.getElementById('rWallArea'),
        rBlockArea: document.getElementById('rBlockArea'),
        rCourses: document.getElementById('rCourses'),
        rPerCourse: document.getElementById('rPerCourse'),
        rBlocks: document.getElementById('rBlocks'),
        rWaste: document.getElementById('rWaste'),
        rTotalBlocks: document.getElementById('rTotalBlocks'),
        rHalfBlocks: document.getElementById('rHalfBlocks'),
        rMortar: document.getElementById('rMortar'),
        rMortarBags: document.getElementById('rMortarBags'),
        rCaps: document.getElementById('rCaps'),
        rVbars: document.getElementById('rVbars'),
        rVbarEach: document.getElementById('rVbarEach'),
        rVbarTotal: document.getElementById('rVbarTotal'),
        rHbars: document.getElementById('rHbars'),
        rHbarTotal: document.getElementById('rHbarTotal'),
        rGrout: document.getElementById('rGrout'),
        rTotalBlocksHighlights: document.getElementById('rTotalBlocksHighlights'),
        rSummaryCaption: document.getElementById('rSummaryCaption')
      };

      let currentSchedule = [];

      function getSelectedUnits() {
        return els.unitsUs.checked ? 'us' : 'metric';
      }

      function updateUnitLabels() {
        const units = getSelectedUnits();
        document.getElementById('lengthHelper').textContent = units === 'metric' ? 'Meters (decimals allowed).' : 'Feet (decimals cover inches).';
        document.getElementById('heightHelper').textContent = units === 'metric' ? 'Meters above footing.' : 'Feet above footing.';
        document.getElementById('customLengthUnit').textContent = units === 'metric' ? 'mm' : 'in';
        document.getElementById('customHeightUnit').textContent = units === 'metric' ? 'mm' : 'in';
        document.getElementById('vSpacingUnit').textContent = units === 'metric' ? 'm' : 'ft';
        document.getElementById('hSpacingUnit').textContent = units === 'metric' ? 'm' : 'ft';
        document.getElementById('lapUnit').textContent = units === 'metric' ? 'm' : 'ft';
      }

      function parseInputs() {
        const units = getSelectedUnits();
        return {
          units,
          length: parseFloat(els.wallLength.value),
          height: parseFloat(els.wallHeight.value),
          openings: parseFloat(els.openingArea.value) || 0,
          blockPreset: els.blockPreset.value,
          customLength: parseFloat(els.customBlockLength.value),
          customHeight: parseFloat(els.customBlockHeight.value),
          wastePct: parseFloat(els.wastePct.value) || 0,
          includeCaps: els.includeCaps.checked,
          showRebar: els.showRebar.checked,
          vSpacing: parseFloat(els.vSpacing.value),
          hSpacing: parseFloat(els.hSpacing.value),
          lapAllowance: parseFloat(els.lapAllowance.value),
          cellArea: parseFloat(els.cellArea.value) || 0
        };
      }

      function validate(inputs) {
        const errors = [];
        if (!Number.isFinite(inputs.length) || inputs.length <= 0) errors.push('Wall length must be greater than zero.');
        if (!Number.isFinite(inputs.height) || inputs.height <= 0) errors.push('Wall height must be greater than zero.');
        if (!Number.isFinite(inputs.openings) || inputs.openings < 0) errors.push('Openings area cannot be negative.');
        if (inputs.blockPreset === 'custom') {
          if (!Number.isFinite(inputs.customLength) || inputs.customLength <= 0) errors.push('Enter a positive custom block length.');
          if (!Number.isFinite(inputs.customHeight) || inputs.customHeight <= 0) errors.push('Enter a positive custom block height.');
        }
        if (!Number.isFinite(inputs.wastePct) || inputs.wastePct < 0 || inputs.wastePct > 30) errors.push('Waste allowance must be between 0% and 30%.');
        if (inputs.showRebar) {
          if (!Number.isFinite(inputs.vSpacing) || inputs.vSpacing <= 0) errors.push('Vertical spacing must be greater than zero.');
          if (!Number.isFinite(inputs.hSpacing) || inputs.hSpacing <= 0) errors.push('Horizontal spacing must be greater than zero.');
          if (!Number.isFinite(inputs.lapAllowance) || inputs.lapAllowance < 0) errors.push('Lap allowance must be 0 or greater.');
          if (!Number.isFinite(inputs.cellArea) || inputs.cellArea <= 0) errors.push('Grouted cell area must be greater than zero.');
        }
        return { ok: errors.length === 0, errors };
      }

      function getBlockFace(inputs) {
        const preset = blockPresets[inputs.blockPreset];
        if (preset) {
          const lengthFt = preset.lengthIn ? inchesToFeet(preset.lengthIn) : mmToFeet(preset.lengthMm);
          const heightFt = preset.heightIn ? inchesToFeet(preset.heightIn) : mmToFeet(preset.heightMm);
          return { lengthFt, heightFt };
        }
        const length = inputs.customLength;
        const height = inputs.customHeight;
        if (!Number.isFinite(length) || !Number.isFinite(height) || length <= 0 || height <= 0) return null;
        if (inputs.units === 'metric') {
          return { lengthFt: mmToFeet(length), heightFt: mmToFeet(height) };
        }
        return { lengthFt: inchesToFeet(length), heightFt: inchesToFeet(height) };
      }

      function compute(inputs) {
        const blockFace = getBlockFace(inputs);
        if (!blockFace) return null;
        const lengthFt = toFeet(inputs.length, inputs.units);
        const heightFt = toFeet(inputs.height, inputs.units);
        if (!Number.isFinite(lengthFt) || !Number.isFinite(heightFt) || lengthFt <= 0 || heightFt <= 0) return null;
        const openingsFt2 = Math.max(0, toSquareFeet(inputs.openings, inputs.units));
        const netArea = Math.max(0, lengthFt * heightFt - openingsFt2);
        const blockArea = blockFace.lengthFt * blockFace.heightFt;
        if (blockArea <= 0) return null;
        const blocksBeforeWaste = netArea > 0 ? Math.ceil(netArea / blockArea) : 0;
        const totalBlocks = Math.ceil(blocksBeforeWaste * (1 + inputs.wastePct / 100));
        const wasteBlocks = Math.max(0, totalBlocks - blocksBeforeWaste);
        const courses = Math.max(1, Math.ceil(heightFt / blockFace.heightFt));
        const blocksPerCourse = Math.max(1, Math.ceil(lengthFt / blockFace.lengthFt));
        const halfBlocks = courses * 2;
        const mortarReferenceArea = (16 / 12) * (8 / 12);
        const mortarVolume = blocksBeforeWaste * 0.075 * (blockArea / mortarReferenceArea);
        const mortarBags = Math.ceil(mortarVolume / 0.6);
        const capUnits = inputs.includeCaps ? blocksPerCourse : 0;

        const conversions = {
          spacing: inputs.units === 'metric' ? toFeet(inputs.vSpacing, 'metric') : inputs.vSpacing,
          horizontal: inputs.units === 'metric' ? toFeet(inputs.hSpacing, 'metric') : inputs.hSpacing,
          lap: inputs.units === 'metric' ? toFeet(inputs.lapAllowance, 'metric') : inputs.lapAllowance
        };

        let verticalBars = 0;
        let verticalEachLength = 0;
        let verticalTotalLength = 0;
        let horizontalRows = 0;
        let horizontalTotalLength = 0;
        let groutVolume = 0;

        if (inputs.showRebar) {
          const vSpacingFt = conversions.spacing;
          const hSpacingFt = conversions.horizontal;
          const lapFt = conversions.lap;
          verticalBars = Math.max(2, Math.floor(lengthFt / vSpacingFt) + 1);
          verticalEachLength = heightFt + lapFt;
          verticalTotalLength = verticalBars * verticalEachLength;
          horizontalRows = Math.max(1, Math.floor(heightFt / hSpacingFt) + 1);
          horizontalTotalLength = horizontalRows * lengthFt;
          const cellAreaFt2 = areaFromInches(inputs.cellArea);
          groutVolume = verticalBars * cellAreaFt2 * heightFt;
        }

        const schedule = [];
        const mortarPerCourse = courses ? mortarVolume / courses : 0;
        for (let i = 1; i <= courses; i += 1) {
          schedule.push({
            num: i,
            blocks: blocksPerCourse,
            halfBlocks: 2,
            caps: inputs.includeCaps && i === courses ? blocksPerCourse : 0,
            mortar: mortarPerCourse
          });
        }

        return {
          wallArea: netArea,
          blockArea,
          courses,
          blocksPerCourse,
          blocksBeforeWaste,
          wasteBlocks,
          totalBlocks,
          halfBlocks,
          mortarVolume,
          mortarBags,
          capUnits,
          verticalBars,
          verticalEachLength,
          verticalTotalLength,
          horizontalRows,
          horizontalTotalLength,
          groutVolume,
          schedule
        };
      }

      function format(outputs, inputs) {
        const fmtLength = (value) => (inputs.units === 'metric' ? `${round2(value / 3.28084)} m` : `${round2(value)} ft`);
        const fmtArea = (value) => (inputs.units === 'metric' ? `${round2(value / 10.763910417)} m²` : `${round2(value)} ft²`);
        const fmtVolume = (value) => {
          const ft3 = round2(value);
          const yd3 = round2(value / 27);
          return `${ft3} ft³ (${yd3} yd³)`;
        };
        return {
          wallArea: fmtArea(outputs.wallArea),
          blockArea: fmtArea(outputs.blockArea),
          courses: outputs.courses,
          blocksPerCourse: outputs.blocksPerCourse,
          blocksBeforeWaste: outputs.blocksBeforeWaste,
          wasteBlocks: outputs.wasteBlocks,
          totalBlocks: outputs.totalBlocks,
          halfBlocks: outputs.halfBlocks,
          mortarVolume: fmtVolume(outputs.mortarVolume),
          mortarBags: outputs.mortarBags,
          capUnits: outputs.capUnits,
          verticalBars: outputs.verticalBars,
          verticalEachLength: fmtLength(outputs.verticalEachLength),
          verticalTotalLength: fmtLength(outputs.verticalTotalLength),
          horizontalRows: outputs.horizontalRows,
          horizontalTotalLength: fmtLength(outputs.horizontalTotalLength),
          groutVolume: fmtVolume(outputs.groutVolume),
          schedule: outputs.schedule,
          highlights: `${outputs.totalBlocks} blocks`
        };
      }

      function render(formatted, errors) {
        if (errors && errors.length) {
          els.errorBox.style.display = 'block';
          els.errorBox.textContent = errors.join(' ');
        } else {
          els.errorBox.style.display = 'none';
          els.errorBox.textContent = '';
        }

        if (!formatted) {
          els.rWallArea.textContent = '0.00 ft²';
          els.rBlockArea.textContent = '0.00 ft²';
          els.rCourses.textContent = '0';
          els.rPerCourse.textContent = '0';
          els.rBlocks.textContent = '0';
          els.rWaste.textContent = '0';
          els.rTotalBlocks.textContent = '0';
          els.rHalfBlocks.textContent = '0';
          els.rMortar.textContent = '0 ft³ (0.00 yd³)';
          els.rMortarBags.textContent = '0';
          els.rCaps.textContent = '0';
          els.rVbars.textContent = '0';
          els.rVbarEach.textContent = '0 ft';
          els.rVbarTotal.textContent = '0 ft';
          els.rHbars.textContent = '0';
          els.rHbarTotal.textContent = '0 ft';
          els.rGrout.textContent = '0 ft³ (0.00 yd³)';
          els.rTotalBlocksHighlights.textContent = '0';
          els.downloadCsv.disabled = true;
          currentSchedule = [];
          renderSchedule();
          return;
        }

        currentSchedule = formatted.schedule;
        els.rWallArea.textContent = formatted.wallArea;
        els.rBlockArea.textContent = formatted.blockArea;
        els.rCourses.textContent = formatted.courses;
        els.rPerCourse.textContent = formatted.blocksPerCourse;
        els.rBlocks.textContent = formatted.blocksBeforeWaste;
        els.rWaste.textContent = formatted.wasteBlocks;
        els.rTotalBlocks.textContent = formatted.totalBlocks;
        els.rHalfBlocks.textContent = formatted.halfBlocks;
        els.rMortar.textContent = formatted.mortarVolume;
        els.rMortarBags.textContent = formatted.mortarBags;
        els.rCaps.textContent = formatted.capUnits;
        els.rVbars.textContent = formatted.verticalBars;
        els.rVbarEach.textContent = formatted.verticalEachLength;
        els.rVbarTotal.textContent = formatted.verticalTotalLength;
        els.rHbars.textContent = formatted.horizontalRows;
        els.rHbarTotal.textContent = formatted.horizontalTotalLength;
        els.rGrout.textContent = formatted.groutVolume;
        els.rTotalBlocksHighlights.textContent = formatted.highlights;
        els.downloadCsv.disabled = currentSchedule.length === 0;
        if (els.scheduleWrap.style.display === 'block') renderSchedule();
      }

      function renderSchedule() {
        const rows = currentSchedule.slice(0, 360);
        els.scheduleBody.innerHTML = '';
        const fragment = document.createDocumentFragment();
        rows.forEach((row) => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${row.num}</td>
            <td>${row.blocks}</td>
            <td>${row.halfBlocks}</td>
            <td>${row.caps}</td>
            <td>${round2(row.mortar)}</td>
          `;
          fragment.appendChild(tr);
        });
        els.scheduleBody.appendChild(fragment);
      }

      function update() {
        updateUnitLabels();
        const inputs = parseInputs();
        const validation = validate(inputs);
        if (!validation.ok) {
          render(null, validation.errors);
          return;
        }
        const outputs = compute(inputs);
        if (!outputs) {
          render(null, ['Unable to compute with the provided values.']);
          return;
        }
        const formatted = format(outputs, inputs);
        render(formatted, []);
      }

      function reset() {
        els.wallLength.value = '25';
        els.wallHeight.value = '6';
        els.openingArea.value = '0';
        els.blockPreset.value = '8x8x16';
        els.customBlockLength.value = '';
        els.customBlockHeight.value = '';
        els.wastePct.value = '5';
        els.includeCaps.checked = false;
        els.showRebar.checked = false;
        els.vSpacing.value = '4';
        els.hSpacing.value = '4';
        els.lapAllowance.value = '2';
        els.cellArea.value = '36';
        els.unitsUs.checked = true;
        els.unitsMetric.checked = false;
        els.customBlockWrap.classList.add('hidden');
        els.rebarPanel.classList.add('hidden');
        els.toggleSchedule.textContent = 'View course breakdown';
        els.scheduleWrap.style.display = 'none';
    const debouncedUpdate = debounce(update, 100);

    document.querySelectorAll('#inputsCard input, #inputsCard select, #inputsCard textarea')
      .forEach((el) => {
        el.addEventListener('input', debouncedUpdate);
        el.addEventListener('change', debouncedUpdate);
      });

        update();
      }

      function toggleRebarPanel() {
        if (els.showRebar.checked) {
          els.rebarPanel.classList.remove('hidden');
        } else {
          els.rebarPanel.classList.add('hidden');
        }
      }

      function toggleCustomBlock() {
        if (els.blockPreset.value === 'custom') {
          els.customBlockWrap.classList.remove('hidden');
        } else {
          els.customBlockWrap.classList.add('hidden');
        }
      }

      els.blockPreset.addEventListener('change', toggleCustomBlock);
      els.showRebar.addEventListener('change', toggleRebarPanel);
      els.toggleSchedule.addEventListener('click', () => {
        const isVisible = els.scheduleWrap.style.display === 'block';
        els.scheduleWrap.style.display = isVisible ? 'none' : 'block';
        els.toggleSchedule.textContent = isVisible ? 'View course breakdown' : 'Hide course breakdown';
        if (!isVisible) renderSchedule();
      });

      els.downloadCsv.addEventListener('click', () => {
        if (currentSchedule.length === 0) return;
        let csv = 'Course,Blocks,Half Blocks,Caps,Mortar (ft³)\n';
        currentSchedule.forEach((row) => {
          csv += `${row.num},${row.blocks},${row.halfBlocks},${row.caps},${round2(row.mortar)}\n`;
        });
        const blob = new Blob([csv], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'block-wall-schedule.csv';
        a.click();
        URL.revokeObjectURL(url);
      });

      els.copyResults.addEventListener('click', () => {
        const lines = [
          `Wall area: ${els.rWallArea.textContent}`,
          `Block area: ${els.rBlockArea.textContent}`,
          `Total blocks: ${els.rTotalBlocks.textContent}`,
          `Mortar: ${els.rMortar.textContent}`
        ];
        navigator.clipboard.writeText(lines.join('\n')).catch(() => {});
      });

      const debouncedUpdate = (() => {
        let timer;
        return () => {
          clearTimeout(timer);
          timer = setTimeout(update, 100);
        };
      })();

      el.addEventListener('change', debouncedUpdate);
      });

      els.calcBtn.addEventListener('click', update);
      els.resetBtn.addEventListener('click', reset);
      toggleCustomBlock();
      toggleRebarPanel();
      updateUnitLabels();
      update();
    })();
    </script>

</body></html>
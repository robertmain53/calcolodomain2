<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/load-balancing-simulator" />
    <title>Load Balancing Simulator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Load Balancing Simulator Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Free to use." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Load Balancing Simulator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Load Balancing Simulator Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Free to use." />
    <meta property="og:url" content="https://calcdomain.com/load-balancing-simulator" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Load Balancing Simulator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Load Balancing Simulator Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Free to use." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Engineering Calculators", "item": "https://calcdomain.com/categories/engineering"}, {"@type": "ListItem", "position": 3, "name": "Mechanical Engineering Now Tools &", "item": "https://calcdomain.com/subcategories/engineering-mechanical"}, {"@type": "ListItem", "position": 4, "name": "Load Balancing Simulator", "item": "https://calcdomain.com/load-balancing-simulator"}]}</script>
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/engineering" class="text-blue-600 hover:underline">Engineering Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/engineering-mechanical" class="text-blue-600 hover:underline">Mechanical Engineering Now Tools &amp;</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Load Balancing Simulator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Load Balancing Simulator
              </h1>
              <p class="text-gray-600">
                Simulate different load balancing algorithms and visualize how
                traffic is distributed across servers.
              </p>
            </header>

            <!-- Controls -->
            <section aria-labelledby="simulator-controls" class="mb-6">
              <h2 id="simulator-controls" class="text-xl font-semibold mb-3">
                Simulation Settings
              </h2>
              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label
                    class="block text-sm font-medium text-gray-700 mb-1"
                    for="numServers"
                    >Number of servers</label
                  >
                  <input
                    id="numServers"
                    type="number"
                    min="1"
                    max="20"
                    value="5"
                    class="w-full border rounded-md px-3 py-2"
                  />
                </div>
                <div>
                  <label
                    class="block text-sm font-medium text-gray-700 mb-1"
                    for="ticks"
                    >Simulation length (ticks)</label
                  >
                  <input
                    id="ticks"
                    type="number"
                    min="10"
                    max="2000"
                    value="200"
                    class="w-full border rounded-md px-3 py-2"
                  />
                </div>
                <div>
                  <label
                    class="block text-sm font-medium text-gray-700 mb-1"
                    for="arrivalRate"
                    >Avg requests per tick</label
                  >
                  <input
                    id="arrivalRate"
                    type="number"
                    min="0"
                    max="100"
                    step="0.1"
                    value="5"
                    class="w-full border rounded-md px-3 py-2"
                  />
                  <p class="text-xs text-gray-500 mt-1">
                    Poisson-like arrivals around this average.
                  </p>
                </div>
                <div>
                  <label
                    class="block text-sm font-medium text-gray-700 mb-1"
                    for="serverCapacity"
                    >Server capacity per tick</label
                  >
                  <input
                    id="serverCapacity"
                    type="number"
                    min="1"
                    max="100"
                    value="10"
                    class="w-full border rounded-md px-3 py-2"
                  />
                  <p class="text-xs text-gray-500 mt-1">
                    Max concurrent requests each server can handle.
                  </p>
                </div>
                <div>
                  <label
                    class="block text-sm font-medium text-gray-700 mb-1"
                    for="minDuration"
                    >Request duration (min ticks)</label
                  >
                  <input
                    id="minDuration"
                    type="number"
                    min="1"
                    max="100"
                    value="3"
                    class="w-full border rounded-md px-3 py-2"
                  />
                </div>
                <div>
                  <label
                    class="block text-sm font-medium text-gray-700 mb-1"
                    for="maxDuration"
                    >Request duration (max ticks)</label
                  >
                  <input
                    id="maxDuration"
                    type="number"
                    min="1"
                    max="100"
                    value="8"
                    class="w-full border rounded-md px-3 py-2"
                  />
                </div>
                <div class="md:col-span-2">
                  <label
                    class="block text-sm font-medium text-gray-700 mb-1"
                    for="queueCapacity"
                    >Global queue capacity</label
                  >
                  <input
                    id="queueCapacity"
                    type="number"
                    min="0"
                    max="10000"
                    value="200"
                    class="w-full border rounded-md px-3 py-2"
                  />
                  <p class="text-xs text-gray-500 mt-1">
                    0 = no queue, requests beyond capacity are dropped.
                  </p>
                </div>
              </div>
            </section>

            <!-- Algorithm selection -->
            <section aria-labelledby="algorithm-selection" class="mb-6">
              <h2 id="algorithm-selection" class="text-xl font-semibold mb-3">
                Algorithms to Compare
              </h2>
              <div class="flex flex-wrap gap-2 mb-3">
                <button
                  type="button"
                  data-algo="roundRobin"
                  class="algo-toggle px-3 py-1 rounded-full text-sm font-medium algo-badge-active"
                >
                  Round Robin
                </button>
                <button
                  type="button"
                  data-algo="weightedRoundRobin"
                  class="algo-toggle px-3 py-1 rounded-full text-sm font-medium algo-badge-active"
                >
                  Weighted Round Robin
                </button>
                <button
                  type="button"
                  data-algo="leastConnections"
                  class="algo-toggle px-3 py-1 rounded-full text-sm font-medium algo-badge-active"
                >
                  Least Connections
                </button>
                <button
                  type="button"
                  data-algo="random"
                  class="algo-toggle px-3 py-1 rounded-full text-sm font-medium algo-badge-active"
                >
                  Random
                </button>
                <button
                  type="button"
                  data-algo="ipHash"
                  class="algo-toggle px-3 py-1 rounded-full text-sm font-medium algo-badge-active"
                >
                  IP Hash
                </button>
              </div>
              <details class="mb-2">
                <summary
                  class="text-sm text-gray-700 cursor-pointer select-none"
                >
                  Server weights for Weighted Round Robin
                </summary>
                <div class="mt-2">
                  <label
                    class="block text-xs font-medium text-gray-700 mb-1"
                    for="weightsInput"
                    >Comma-separated weights (one per server)</label
                  >
                  <input
                    id="weightsInput"
                    type="text"
                    value="1,2,1,1,3"
                    class="w-full border rounded-md px-3 py-2 text-sm"
                  />
                  <p class="text-xs text-gray-500 mt-1">
                    If fewer weights than servers are provided, remaining
                    servers default to 1.
                  </p>
                </div>
              </details>
            </section>

            <!-- Run controls -->
            <section class="mb-6 flex flex-wrap items-center gap-3">
              <button
                id="runSimulation"
                type="button"
                class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none"
              >
                Run Simulation
              </button>
              <button
                id="stepSimulation"
                type="button"
                class="inline-flex items-center px-4 py-2 bg-gray-100 text-gray-800 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none"
              >
                Step 1 Tick
              </button>
              <button
                id="resetSimulation"
                type="button"
                class="inline-flex items-center px-4 py-2 bg-white text-gray-800 border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none"
              >
                Reset
              </button>
              <p id="simStatus" class="text-sm text-gray-600"></p>
            </section>

            <!-- Visualization -->
            <section aria-labelledby="visualization" class="mb-6">
              <h2 id="visualization" class="text-xl font-semibold mb-3">
                Server Utilization Over Time
              </h2>
              <div class="border rounded-lg p-3 bg-gray-50">
                <div class="flex items-center justify-between mb-2">
                  <div class="flex items-center gap-2 text-xs text-gray-600">
                    <span
                      class="inline-block w-3 h-3 rounded-sm bg-blue-500"
                    ></span>
                    Round Robin
                    <span
                      class="inline-block w-3 h-3 rounded-sm bg-emerald-500 ml-3"
                    ></span>
                    Least Connections
                    <span
                      class="inline-block w-3 h-3 rounded-sm bg-purple-500 ml-3"
                    ></span>
                    Random
                  </div>
                  <div class="text-xs text-gray-500">
                    Each bar = utilization of one server at current tick
                  </div>
                </div>
                <div
                  id="serverBarsContainer"
                  class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"
                ></div>
              </div>
            </section>

            <!-- Metrics table -->
            <section aria-labelledby="metrics" class="mb-8">
              <h2 id="metrics" class="text-xl font-semibold mb-3">
                Algorithm Comparison
              </h2>
              <div class="overflow-x-auto scrollbar-thin">
                <table
                  class="min-w-full text-sm border border-gray-200 rounded-lg overflow-hidden"
                >
                  <thead class="bg-gray-100">
                    <tr>
                      <th
                        class="px-3 py-2 text-left font-semibold text-gray-700"
                      >
                        Algorithm
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700"
                      >
                        Total Requests
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700"
                      >
                        Served
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700"
                      >
                        Dropped
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700"
                      >
                        Avg Utilization
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700"
                      >
                        Max Utilization
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700"
                      >
                        Avg Queue Length
                      </th>
                    </tr>
                  </thead>
                  <tbody id="metricsBody">
                    <!-- Filled by JS -->
                  </tbody>
                </table>
              </div>
            </section>

            <section class="prose">
              <h2>How the Load Balancing Simulator Works</h2>
              <p>
                This simulator models a simple cluster of identical servers
                behind a load balancer. At each
                <strong>tick</strong> (time step), new requests arrive, are
                assigned to servers according to the selected algorithm, and
                existing requests progress toward completion.
              </p>

              <h3>Simulation model</h3>
              <ul>
                <li>
                  <strong>Requests per tick</strong>: drawn from a Poisson-like
                  distribution around the configured average.
                </li>
                <li>
                  <strong>Request duration</strong>: random integer between the
                  minimum and maximum duration (in ticks).
                </li>
                <li>
                  <strong>Server capacity</strong>: maximum number of concurrent
                  requests a server can handle.
                </li>
                <li>
                  <strong>Global queue</strong>: if all servers are full,
                  requests wait in a shared queue (up to its capacity).
                </li>
                <li>
                  <strong>Dropped requests</strong>: if both servers and queue
                  are full, the request is dropped.
                </li>
              </ul>

              <h3>Algorithms implemented</h3>
              <ul>
                <li>
                  <strong>Round Robin</strong> – cycles through servers in
                  order, ignoring current load.
                </li>
                <li>
                  <strong>Weighted Round Robin</strong> – like round robin, but
                  servers with higher weights receive more requests.
                </li>
                <li>
                  <strong>Least Connections</strong> – always picks the server
                  with the fewest active requests.
                </li>
                <li>
                  <strong>Random</strong> – picks a random server for each
                  request.
                </li>
                <li>
                  <strong>IP Hash</strong> – simulates client affinity by
                  hashing a pseudo IP to a server index.
                </li>
              </ul>

              <h3>Key metrics</h3>
              <div class="formula-box text-sm">
                <p><strong>Total requests</strong> = served + dropped</p>
                <p>
                  <strong>Average utilization</strong> = mean over time of
                  (active requests / capacity) across all servers.
                </p>
                <p>
                  <strong>Maximum utilization</strong> = highest utilization
                  observed on any server during the run.
                </p>
                <p>
                  <strong>Average queue length</strong> = mean number of waiting
                  requests in the global queue.
                </p>
              </div>

              <h2>Interpreting the Results</h2>
              <p>
                Use the comparison table to see how each algorithm behaves under
                the same traffic pattern. In general:
              </p>
              <ul>
                <li>
                  <strong>Round Robin</strong> is simple and fair when requests
                  have similar duration.
                </li>
                <li>
                  <strong>Least Connections</strong> adapts better when some
                  requests are much longer than others.
                </li>
                <li>
                  <strong>Weighted Round Robin</strong> is useful when some
                  servers are more powerful.
                </li>
                <li>
                  <strong>Random</strong> is easy to implement but can be
                  unbalanced for small clusters.
                </li>
                <li>
                  <strong>IP Hash</strong> keeps the same client on the same
                  server (session affinity), but can create hotspots.
                </li>
              </ul>

              <h3>Limitations</h3>
              <p>
                This is an educational simulator, not a production sizing tool.
                It does <em>not</em> model:
              </p>
              <ul>
                <li>
                  Network latency, TCP behavior, retries, or connection pooling.
                </li>
                <li>Health checks, slow-start, or out-of-service nodes.</li>
                <li>Multi-region deployments or layer 7 routing rules.</li>
              </ul>
              <p>
                Use it to build intuition and compare algorithms, then validate
                your design with real traffic and observability data in your
                environment.
              </p>

              <h2>FAQ</h2>
              <h3>Can I simulate more realistic traffic patterns?</h3>
              <p>
                The current version uses a simple Poisson-like arrival process
                and uniform request durations. For more advanced scenarios, you
                can approximate bursts by increasing the average arrival rate
                and shortening the simulation window.
              </p>

              <h3>How should I choose the right algorithm?</h3>
              <p>
                There is no single best algorithm. For most web workloads, a
                combination of
                <strong>least connections</strong> or
                <strong>weighted least connections</strong> with
                <strong>health checks</strong> and
                <strong>session affinity</strong> (when needed) works well. Use
                this simulator to understand trade-offs before testing with real
                traffic.
              </p>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Engineering notes</h2><p class="text-sm text-gray-700">Use SI units and keep dimensional consistency. Verify boundary conditions, safety factors, and design limits.</p><p class="text-sm text-gray-700 mt-2">Key entities: Load, Balancing, Simulator.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: consistent units, allowed ranges, technical rounding.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Engineering notes</h2><p class="text-sm text-gray-700">Use SI units and keep dimensional consistency. Verify boundary conditions, safety factors, and design limits.</p><p class="text-sm text-gray-700 mt-2">Key entities: Load, Balancing, Simulator.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: consistent units, allowed ranges, technical rounding.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Engineering Tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/moment-of-inertia"
                  class="text-blue-600 hover:underline"
                  >Moment of Inertia</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/flash-distillation"
                  class="text-blue-600 hover:underline"
                  >Flash Distillation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/cyclomatic-complexity"
                  class="text-blue-600 hover:underline"
                  >Cyclomatic Complexity</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/a-search-calculator"
                  class="text-blue-600 hover:underline"
                  >A* Search Algorithm</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/packet-loss-calculator"
                  class="text-blue-600 hover:underline"
                  >Packet Loss Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/latency-calculator"
                  class="text-blue-600 hover:underline"
                  >Latency Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/api-latency"
                  class="text-blue-600 hover:underline"
                  >API Latency & Throughput</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/database-sizing"
                  class="text-blue-600 hover:underline"
                  >Database Sizing</a
                >
              </li>
            </ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Engineering Category</h2>
            <p class="text-sm text-gray-600 mb-2">
              Explore more tools for software, civil, mechanical, and electrical
              engineering.
            </p>
            <a
              href="https://calcdomain.com/categories/engineering"
              class="inline-block px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700"
              >Browse Engineering Calculators</a
            >
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Core simulation logic
      const algoNames = {
        roundRobin: "Round Robin",
        weightedRoundRobin: "Weighted Round Robin",
        leastConnections: "Least Connections",
        random: "Random",
        ipHash: "IP Hash",
      };

      let activeAlgos = new Set([
        "roundRobin",
        "weightedRoundRobin",
        "leastConnections",
        "random",
        "ipHash",
      ]);
      let globalState = null; // will hold current simulation state for step mode

      function parseWeights(numServers) {
        const raw = document.getElementById("weightsInput").value.trim();
        if (!raw) return Array(numServers).fill(1);
        const parts = raw
          .split(",")
          .map((x) => parseFloat(x.trim()))
          .filter((x) => !isNaN(x) && x > 0);
        const weights = [];
        for (let i = 0; i < numServers; i++) {
          weights.push(parts[i] || 1);
        }
        return weights;
      }

      function poissonLike(mean) {
        // simple approximation: mean + noise
        const noise = (Math.random() - 0.5) * 2 * Math.sqrt(mean);
        const val = Math.max(0, Math.round(mean + noise));
        return val;
      }

      function createInitialState() {
        const numServers = Math.max(
          1,
          parseInt(document.getElementById("numServers").value, 10) || 1
        );
        const serverCapacity = Math.max(
          1,
          parseInt(document.getElementById("serverCapacity").value, 10) || 1
        );
        const queueCapacity = Math.max(
          0,
          parseInt(document.getElementById("queueCapacity").value, 10) || 0
        );
        const minDuration = Math.max(
          1,
          parseInt(document.getElementById("minDuration").value, 10) || 1
        );
        const maxDuration = Math.max(
          minDuration,
          parseInt(document.getElementById("maxDuration").value, 10) ||
            minDuration
        );
        const arrivalRate = Math.max(
          0,
          parseFloat(document.getElementById("arrivalRate").value) || 0
        );

        const weights = parseWeights(numServers);

        const base = {
          numServers,
          serverCapacity,
          queueCapacity,
          minDuration,
          maxDuration,
          arrivalRate,
          weights,
        };

        const algStates = {};
        activeAlgos.forEach((algo) => {
          algStates[algo] = {
            tick: 0,
            servers: Array.from({ length: numServers }, () => []), // each entry: remainingDuration
            queue: [],
            rrIndex: 0,
            wrrIndex: 0,
            wrrCounter: 0,
            totalRequests: 0,
            servedRequests: 0,
            droppedRequests: 0,
            utilizationHistory: [], // per tick: [u1, u2, ...]
            queueHistory: [],
          };
        });

        return { base, algStates };
      }

      function generateRequests(base) {
        const count = poissonLike(base.arrivalRate);
        const requests = [];
        for (let i = 0; i < count; i++) {
          const duration =
            base.minDuration +
            Math.floor(
              Math.random() * (base.maxDuration - base.minDuration + 1)
            );
          const clientId = Math.floor(Math.random() * 1000000); // pseudo IP
          requests.push({ duration, clientId });
        }
        return requests;
      }

      function pickServer(algo, state, base, request) {
        const { servers } = state;
        const n = servers.length;

        function isServerAvailable(idx) {
          return servers[idx].length < base.serverCapacity;
        }

        if (algo === "roundRobin") {
          for (let i = 0; i < n; i++) {
            const idx = (state.rrIndex + i) % n;
            if (isServerAvailable(idx)) {
              state.rrIndex = (idx + 1) % n;
              return idx;
            }
          }
          return null;
        }

        if (algo === "weightedRoundRobin") {
          const weights = base.weights;
          let attempts = 0;
          while (attempts < n * 2) {
            const idx = state.wrrIndex;
            if (isServerAvailable(idx)) {
              state.wrrCounter++;
              if (state.wrrCounter >= weights[idx]) {
                state.wrrCounter = 0;
                state.wrrIndex = (state.wrrIndex + 1) % n;
              }
              return idx;
            } else {
              state.wrrCounter = 0;
              state.wrrIndex = (state.wrrIndex + 1) % n;
            }
            attempts++;
          }
          return null;
        }

        if (algo === "leastConnections") {
          let bestIdx = null;
          let bestLoad = Infinity;
          for (let i = 0; i < n; i++) {
            const load = servers[i].length;
            if (load < bestLoad && load < base.serverCapacity) {
              bestLoad = load;
              bestIdx = i;
            }
          }
          return bestIdx;
        }

        if (algo === "random") {
          const candidates = [];
          for (let i = 0; i < n; i++) {
            if (isServerAvailable(i)) candidates.push(i);
          }
          if (!candidates.length) return null;
          const idx = candidates[Math.floor(Math.random() * candidates.length)];
          return idx;
        }

        if (algo === "ipHash") {
          const hash = request.clientId % n;
          // try preferred server, then fallback round robin style
          for (let i = 0; i < n; i++) {
            const idx = (hash + i) % n;
            if (isServerAvailable(idx)) return idx;
          }
          return null;
        }

        return null;
      }

      function processTickForAlgo(algo, state, base, incomingRequests) {
        state.tick++;

        // 1) decrement durations and free completed
        for (let i = 0; i < state.servers.length; i++) {
          const srv = state.servers[i];
          for (let j = srv.length - 1; j >= 0; j--) {
            srv[j]--;
            if (srv[j] <= 0) {
              srv.splice(j, 1);
              state.servedRequests++;
            }
          }
        }

        // 2) enqueue new requests
        incomingRequests.forEach((req) => {
          state.totalRequests++;
          if (state.queue.length < base.queueCapacity) {
            state.queue.push(req);
          } else {
            state.droppedRequests++;
          }
        });

        // 3) assign from queue to servers
        let progress = true;
        while (progress && state.queue.length > 0) {
          progress = false;
          const req = state.queue[0];
          const serverIdx = pickServer(algo, state, base, req);
          if (serverIdx !== null) {
            state.queue.shift();
            state.servers[serverIdx].push(req.duration);
            progress = true;
          }
        }

        // 4) record utilization and queue length
        const utils = state.servers.map(
          (srv) => srv.length / base.serverCapacity
        );
        state.utilizationHistory.push(utils);
        state.queueHistory.push(state.queue.length);
      }

      function runFullSimulation() {
        const ticks = Math.max(
          1,
          parseInt(document.getElementById("ticks").value, 10) || 1
        );
        const state = createInitialState();

        for (let t = 0; t < ticks; t++) {
          const incoming = generateRequests(state.base);
          for (const algo of activeAlgos) {
            processTickForAlgo(
              algo,
              state.algStates[algo],
              state.base,
              incoming
            );
          }
        }

        globalState = state;
        updateMetricsTable(state);
        updateServerBars(state);
        document.getElementById(
          "simStatus"
        ).textContent = `Simulation completed: ${ticks} ticks`;
      }

      function stepSimulation() {
        if (!globalState) {
          globalState = createInitialState();
        }
        const incoming = generateRequests(globalState.base);
        for (const algo of activeAlgos) {
          processTickForAlgo(
            algo,
            globalState.algStates[algo],
            globalState.base,
            incoming
          );
        }
        updateMetricsTable(globalState);
        updateServerBars(globalState);
        document.getElementById("simStatus").textContent = `Current tick: ${
          globalState.algStates[Array.from(activeAlgos)[0]].tick
        }`;
      }

      function resetSimulation() {
        globalState = null;
        document.getElementById("metricsBody").innerHTML = "";
        document.getElementById("serverBarsContainer").innerHTML = "";
        document.getElementById("simStatus").textContent = "";
      }

      function computeMetricsForAlgo(algoState, base) {
        const ticks = algoState.utilizationHistory.length || 1;
        const numServers = base.numServers;

        let sumUtil = 0;
        let maxUtil = 0;
        algoState.utilizationHistory.forEach((row) => {
          row.forEach((u) => {
            sumUtil += u;
            if (u > maxUtil) maxUtil = u;
          });
        });
        const avgUtil = sumUtil / (ticks * numServers);

        let sumQueue = 0;
        algoState.queueHistory.forEach((q) => (sumQueue += q));
        const avgQueue = sumQueue / ticks;

        return {
          total: algoState.totalRequests,
          served: algoState.servedRequests,
          dropped: algoState.droppedRequests,
          avgUtil,
          maxUtil,
          avgQueue,
        };
      }

      function updateMetricsTable(state) {
        const tbody = document.getElementById("metricsBody");
        tbody.innerHTML = "";
        const base = state.base;

        Array.from(activeAlgos).forEach((algo) => {
          const s = state.algStates[algo];
          const m = computeMetricsForAlgo(s, base);
          const tr = document.createElement("tr");
          tr.className = "border-t";

          tr.innerHTML = `
        <td class="px-3 py-2 font-medium text-gray-800">${
          algoNames[algo] || algo
        }</td>
        <td class="px-3 py-2 text-right">${m.total}</td>
        <td class="px-3 py-2 text-right text-emerald-700">${m.served}</td>
        <td class="px-3 py-2 text-right text-red-600">${m.dropped}</td>
        <td class="px-3 py-2 text-right">${(m.avgUtil * 100).toFixed(1)}%</td>
        <td class="px-3 py-2 text-right">${(m.maxUtil * 100).toFixed(1)}%</td>
        <td class="px-3 py-2 text-right">${m.avgQueue.toFixed(1)}</td>
      `;
          tbody.appendChild(tr);
        });
      }

      function updateServerBars(state) {
        const container = document.getElementById("serverBarsContainer");
        container.innerHTML = "";
        const base = state.base;

        // Use latest tick
        const latest = {};
        activeAlgos.forEach((algo) => {
          const hist = state.algStates[algo].utilizationHistory;
          latest[algo] = hist.length
            ? hist[hist.length - 1]
            : Array(base.numServers).fill(0);
        });

        for (let i = 0; i < base.numServers; i++) {
          const card = document.createElement("div");
          card.className = "bg-white border rounded-md p-3 shadow-sm";

          const rr = latest.roundRobin ? latest.roundRobin[i] || 0 : 0;
          const lc = latest.leastConnections
            ? latest.leastConnections[i] || 0
            : 0;
          const rnd = latest.random ? latest.random[i] || 0 : 0;

          card.innerHTML = `
        <div class="flex justify-between items-center mb-2">
          <span class="text-sm font-medium text-gray-800">Server ${i + 1}</span>
        </div>
        <div class="space-y-2">
          <div>
            <div class="flex justify-between text-xs text-gray-600 mb-1">
              <span>Round Robin</span><span>${(rr * 100).toFixed(0)}%</span>
            </div>
            <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
              <div class="h-2 bg-blue-500" style="width:${Math.min(
                100,
                rr * 100
              )}%"></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between text-xs text-gray-600 mb-1">
              <span>Least Connections</span><span>${(lc * 100).toFixed(
                0
              )}%</span>
            </div>
            <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
              <div class="h-2 bg-emerald-500" style="width:${Math.min(
                100,
                lc * 100
              )}%"></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between text-xs text-gray-600 mb-1">
              <span>Random</span><span>${(rnd * 100).toFixed(0)}%</span>
            </div>
            <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
              <div class="h-2 bg-purple-500" style="width:${Math.min(
                100,
                rnd * 100
              )}%"></div>
            </div>
          </div>
        </div>
      `;
          container.appendChild(card);
        }
      }

      // UI wiring
      document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll(".algo-toggle").forEach((btn) => {
          btn.addEventListener("click", () => {
            const algo = btn.getAttribute("data-algo");
            if (activeAlgos.has(algo)) {
              if (activeAlgos.size === 1) return; // keep at least one
              activeAlgos.delete(algo);
              btn.classList.remove("algo-badge-active");
              btn.classList.add("algo-badge-inactive");
            } else {
              activeAlgos.add(algo);
              btn.classList.remove("algo-badge-inactive");
              btn.classList.add("algo-badge-active");
            }
          });
        });

        document
          .getElementById("runSimulation")
          .addEventListener("click", () => {
            runFullSimulation();
          });

        document
          .getElementById("stepSimulation")
          .addEventListener("click", () => {
            stepSimulation();
          });

        document
          .getElementById("resetSimulation")
          .addEventListener("click", () => {
            resetSimulation();
          });
      });

      // MathJax config
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

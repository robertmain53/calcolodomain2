<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/loan-amortization" />
    <title>Loan Amortization Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Loan Amortization Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Loan Amortization Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Loan Amortization Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/loan-amortization" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Loan Amortization Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Loan Amortization Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "Loans &amp; Debt Calculators", "item": "https://calcdomain.com/subcategories/finance-loans-debt"}, {"@type": "ListItem", "position": 4, "name": "Loan Amortization Calculator", "item": "https://calcdomain.com/loan-amortization"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/finance-loans-debt" class="text-blue-600 hover:underline">Loans &amp;amp; Debt Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Loan Amortization Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <section aria-labelledby="loan-amortization-heading">
              <div class="mb-6">
                <h1>Loan Amortization Calculator</h1>
                <p class="text-gray-600">
                  Build a full loan amortization schedule, model extra payments,
                  and see your payoff date, total interest, and interest
                  savings.
                </p>
              </div>

              <!-- Calculator Form -->
              <form
                id="amortization-form"
                class="space-y-4"
                onsubmit="return false;"
              >
                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="loan-amount"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Loan amount</label
                    >
                    <div class="relative">
                      <span
                        class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"
                        >$</span
                      >
                      <input
                        type="number"
                        id="loan-amount"
                        class="w-full border border-gray-300 rounded-md pl-7 pr-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        min="0"
                        step="0.01"
                        value="250000"
                      />
                    </div>
                  </div>
                  <div>
                    <label
                      for="interest-rate"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Annual interest rate</label
                    >
                    <div class="relative">
                      <input
                        type="number"
                        id="interest-rate"
                        class="w-full border border-gray-300 rounded-md pl-3 pr-10 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        min="0"
                        step="0.01"
                        value="5"
                      />
                      <span
                        class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"
                        >%</span
                      >
                    </div>
                  </div>
                  <div>
                    <label
                      for="loan-term"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Loan term</label
                    >
                    <div class="flex gap-2">
                      <input
                        type="number"
                        id="loan-term"
                        class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        min="0.5"
                        step="0.5"
                        value="30"
                      />
                      <select
                        id="loan-term-unit"
                        class="border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                      >
                        <option value="years" selected>Years</option>
                        <option value="months">Months</option>
                      </select>
                    </div>
                  </div>
                  <div>
                    <label
                      for="payment-frequency"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Payment frequency</label
                    >
                    <select
                      id="payment-frequency"
                      class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                      <option value="monthly" selected>
                        Monthly (12 / year)
                      </option>
                      <option value="biweekly">Biweekly (26 / year)</option>
                      <option value="yearly">Yearly (1 / year)</option>
                    </select>
                  </div>
                </div>

                <!-- Extra Payments -->
                <details
                  class="mt-2 border border-gray-200 rounded-md px-4 py-3"
                >
                  <summary
                    class="cursor-pointer text-sm font-semibold text-gray-800"
                  >
                    Extra payments (optional)
                  </summary>
                  <div class="mt-3 grid md:grid-cols-2 gap-4">
                    <div>
                      <label
                        for="extra-per-period"
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Extra per payment</label
                      >
                      <div class="relative">
                        <span
                          class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"
                          >$</span
                        >
                        <input
                          type="number"
                          id="extra-per-period"
                          class="w-full border border-gray-300 rounded-md pl-7 pr-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                          min="0"
                          step="0.01"
                          value="0"
                        />
                      </div>
                      <p class="text-xs text-gray-500 mt-1">
                        Added to every scheduled payment.
                      </p>
                    </div>
                    <div>
                      <label
                        for="extra-lump-sum"
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >One-time extra payment</label
                      >
                      <div class="flex gap-2">
                        <div class="relative flex-1">
                          <span
                            class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"
                            >$</span
                          >
                          <input
                            type="number"
                            id="extra-lump-sum"
                            class="w-full border border-gray-300 rounded-md pl-7 pr-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                            min="0"
                            step="0.01"
                            value="0"
                          />
                        </div>
                        <div class="flex-1">
                          <input
                            type="number"
                            id="extra-lump-sum-period"
                            class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                            min="1"
                            step="1"
                            placeholder="Payment #"
                          />
                        </div>
                      </div>
                      <p class="text-xs text-gray-500 mt-1">
                        Applies at the specified payment number.
                      </p>
                    </div>
                  </div>
                </details>

                <!-- Start Date -->
                <div class="grid md:grid-cols-2 gap-4 mt-2">
                  <div>
                    <label
                      for="start-date"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >First payment date (optional)</label
                    >
                    <input
                      type="date"
                      id="start-date"
                      class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                    <p class="text-xs text-gray-500 mt-1">
                      Used to estimate payoff date.
                    </p>
                  </div>
                </div>

                <div class="flex flex-wrap items-center gap-3 mt-4">
                  <button
                    type="button"
                    id="calculate-btn"
                    class="inline-flex items-center justify-center px-5 py-2.5 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
                  >
                    Calculate schedule
                  </button>
                  <button
                    type="button"
                    id="reset-btn"
                    class="text-sm text-gray-600 hover:text-gray-800 underline"
                  >
                    Reset
                  </button>
                  <p id="error-message" class="text-sm text-red-600"></p>
                </div>
              </form>

              <!-- Summary Cards -->
              <section
                id="summary-section"
                class="mt-8 hidden"
                aria-label="Loan summary"
              >
                <h2 class="text-xl font-semibold mb-3">Loan summary</h2>
                <div class="grid md:grid-cols-3 gap-4">
                  <div class="bg-blue-50 border border-blue-100 rounded-lg p-4">
                    <p
                      class="text-xs uppercase tracking-wide text-blue-600 font-semibold mb-1"
                    >
                      Regular payment
                    </p>
                    <p
                      id="summary-payment"
                      class="text-xl font-bold text-blue-800"
                    >
                      $0.00
                    </p>
                    <p
                      class="text-xs text-blue-700 mt-1"
                      id="summary-frequency-label"
                    ></p>
                  </div>
                  <div
                    class="bg-green-50 border border-green-100 rounded-lg p-4"
                  >
                    <p
                      class="text-xs uppercase tracking-wide text-green-600 font-semibold mb-1"
                    >
                      Total interest
                    </p>
                    <p
                      id="summary-interest"
                      class="text-xl font-bold text-green-800"
                    >
                      $0.00
                    </p>
                    <p
                      class="text-xs text-green-700 mt-1"
                      id="summary-total-paid"
                    ></p>
                  </div>
                  <div
                    class="bg-purple-50 border border-purple-100 rounded-lg p-4"
                  >
                    <p
                      class="text-xs uppercase tracking-wide text-purple-600 font-semibold mb-1"
                    >
                      Payoff
                    </p>
                    <p
                      id="summary-payoff-date"
                      class="text-xl font-bold text-purple-800"
                    >
                      —
                    </p>
                    <p
                      class="text-xs text-purple-700 mt-1"
                      id="summary-num-payments"
                    ></p>
                  </div>
                </div>

                <!-- Extra payment comparison -->
                <div id="extra-summary" class="mt-4 hidden">
                  <div
                    class="bg-amber-50 border border-amber-100 rounded-lg p-4"
                  >
                    <p class="text-sm font-semibold text-amber-800 mb-1">
                      Impact of extra payments
                    </p>
                    <p
                      id="extra-summary-text"
                      class="text-sm text-amber-900"
                    ></p>
                  </div>
                </div>
              </section>

              <!-- Charts -->
              <section
                id="charts-section"
                class="mt-8 hidden"
                aria-label="Charts"
              >
                <h2 class="text-xl font-semibold mb-3">
                  Principal vs. interest
                </h2>
                <div class="grid md:grid-cols-2 gap-4">
                  <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                    <h3 class="text-sm font-semibold mb-2">
                      Balance over time
                    </h3>
                    <canvas
                      id="balance-chart"
                      aria-label="Loan balance chart"
                      role="img"
                      height="220"
                    ></canvas>
                  </div>
                  <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                    <h3 class="text-sm font-semibold mb-2">
                      Total paid: principal vs. interest
                    </h3>
                    <canvas
                      id="pi-chart"
                      aria-label="Principal vs interest chart"
                      role="img"
                      height="220"
                    ></canvas>
                  </div>
                </div>
              </section>

              <!-- Amortization Table -->
              <section
                id="table-section"
                class="mt-8 hidden"
                aria-label="Amortization schedule"
              >
                <div
                  class="flex flex-wrap items-center justify-between gap-3 mb-3"
                >
                  <h2 class="text-xl font-semibold">Amortization schedule</h2>
                  <div class="flex flex-wrap items-center gap-2">
                    <label for="year-filter" class="text-xs text-gray-600"
                      >Filter by year:</label
                    >
                    <select
                      id="year-filter"
                      class="border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                      <option value="all" selected>All</option>
                    </select>
                    <button
                      type="button"
                      id="copy-csv-btn"
                      class="text-xs px-3 py-1.5 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100"
                    >
                      Copy as CSV
                    </button>
                  </div>
                </div>
                <div class="table-scroll border border-gray-200 rounded-lg">
                  <table class="min-w-full text-xs sticky-header">
                    <thead>
                      <tr class="bg-gray-100 text-gray-700">
                        <th class="px-3 py-2 text-left font-semibold">#</th>
                        <th class="px-3 py-2 text-left font-semibold">Date</th>
                        <th class="px-3 py-2 text-right font-semibold">
                          Payment
                        </th>
                        <th class="px-3 py-2 text-right font-semibold">
                          Principal
                        </th>
                        <th class="px-3 py-2 text-right font-semibold">
                          Interest
                        </th>
                        <th class="px-3 py-2 text-right font-semibold">
                          Extra
                        </th>
                        <th class="px-3 py-2 text-right font-semibold">
                          Balance
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="amortization-body"
                      class="divide-y divide-gray-100"
                    >
                      <!-- Rows injected by JS -->
                    </tbody>
                  </table>
                </div>
                <p class="text-xs text-gray-500 mt-2">
                  Tip: scroll horizontally on small screens to see all columns.
                </p>
              </section>

              <!-- Explanatory Content -->
              <section class="prose mt-10">
                <h2>How this loan amortization calculator works</h2>
                <p>
                  This tool builds a full amortization schedule for any
                  fixed-rate loan (mortgage, auto loan, personal loan, student
                  loan, etc.). It shows how each payment is split between
                  interest and principal, how the balance declines, and how
                  extra payments change your payoff date.
                </p>

                <h3>Amortization payment formula</h3>
                <p>For a fixed-rate amortizing loan, the regular payment is:</p>
                <div class="formula-box">
                  <p class="mb-1 text-sm"><strong>Payment formula</strong></p>
                  <p class="text-sm">
                    \( \text{Payment} = P \times \dfrac{r(1+r)^n}{(1+r)^n - 1}
                    \)
                  </p>
                  <ul class="text-sm mt-2">
                    <li>
                      <strong>P</strong> = loan principal (amount borrowed)
                    </li>
                    <li>
                      <strong>r</strong> = periodic interest rate (annual rate ÷
                      payments per year)
                    </li>
                    <li>
                      <strong>n</strong> = total number of payments (years ×
                      payments per year)
                    </li>
                  </ul>
                </div>

                <h3>What the schedule shows</h3>
                <ul>
                  <li>
                    <strong>Payment #</strong> – sequence number of the payment.
                  </li>
                  <li>
                    <strong>Date</strong> – estimated payment date (if you
                    provide a start date).
                  </li>
                  <li><strong>Payment</strong> – regular scheduled payment.</li>
                  <li>
                    <strong>Principal</strong> – portion of the payment that
                    reduces your balance.
                  </li>
                  <li>
                    <strong>Interest</strong> – cost of borrowing for that
                    period.
                  </li>
                  <li>
                    <strong>Extra</strong> – any additional amount you choose to
                    pay.
                  </li>
                  <li>
                    <strong>Balance</strong> – remaining loan balance after the
                    payment.
                  </li>
                </ul>

                <h2>Modeling extra payments</h2>
                <p>
                  Extra payments go directly toward principal, which reduces the
                  balance faster. Because interest is calculated on the
                  remaining balance, this can save a significant amount of
                  interest and shorten the loan term.
                </p>
                <p>Use this calculator to compare:</p>
                <ul>
                  <li>Standard schedule with no extra payments.</li>
                  <li>Schedule with a fixed extra amount every period.</li>
                  <li>Schedule with a one-time lump-sum payment.</li>
                </ul>

                <h3>Common use cases</h3>
                <ul>
                  <li>Comparing 15-year vs 30-year mortgage interest costs.</li>
                  <li>
                    Seeing how an extra $100/month changes your payoff date.
                  </li>
                  <li>
                    Planning a lump-sum payment from a bonus or tax refund.
                  </li>
                  <li>
                    Understanding how much of each payment is interest vs
                    principal.
                  </li>
                </ul>

                <h2>FAQ</h2>
                <h3>
                  Is this calculator suitable for mortgages and car loans?
                </h3>
                <p>
                  Yes. Any fixed-rate, fully amortizing loan that uses regular
                  payments can be modeled here, including mortgages, auto loans,
                  personal loans, and many student loans.
                </p>

                <h3>Does it handle interest-only or variable-rate loans?</h3>
                <p>
                  This version assumes a fixed interest rate and fully
                  amortizing payments. For interest-only or adjustable-rate
                  loans, you can approximate by running separate schedules for
                  each rate period.
                </p>

                <h3>How accurate is the payoff date?</h3>
                <p>
                  The payoff date is an estimate based on the payment frequency
                  and the first payment date you enter. Your actual lender’s
                  schedule may differ slightly due to day-count conventions and
                  cut-off times.
                </p>
              </section>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Loan, Amortization.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Loan, Amortization.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              More loan & debt calculators
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/loan-amortization-calculator"
                  class="text-blue-600 hover:underline"
                  >Advanced Loan Amortization</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-payment-formula"
                  class="text-blue-600 hover:underline"
                  >Loan Payment Formula</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-payoff"
                  class="text-blue-600 hover:underline"
                  >Loan Payoff Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-comparison"
                  class="text-blue-600 hover:underline"
                  >Loan Comparison</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/debt-snowball-calculator"
                  class="text-blue-600 hover:underline"
                  >Debt Snowball</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/debt-avalanche-calculator"
                  class="text-blue-600 hover:underline"
                  >Debt Avalanche</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-blue-600 hover:underline"
                  >Mortgage Payment</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payoff"
                  class="text-blue-600 hover:underline"
                  >Mortgage Payoff</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-blue-600 hover:underline"
                  >Auto Loan & Affordability</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/personal-loan-calculator"
                  class="text-blue-600 hover:underline"
                  >Personal Loan</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Finance categories</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/finance-loans-debt"
                  class="text-blue-600 hover:underline"
                  >Loans &amp; Debt</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-investment"
                  class="text-blue-600 hover:underline"
                  >Investment</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-retirement"
                  class="text-blue-600 hover:underline"
                  >Retirement</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/taxes"
                  class="text-blue-600 hover:underline"
                  >Taxes</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-income-and-payroll"
                  class="text-blue-600 hover:underline"
                  >Income &amp; Payroll</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script>
      // Mobile menu
      document
        .getElementById("mobile-menu-toggle")
        .addEventListener("click", function () {
          const menu = document.getElementById("mobile-menu");
          const expanded = this.getAttribute("aria-expanded") === "true";
          this.setAttribute("aria-expanded", String(!expanded));
          menu.classList.toggle("hidden");
        });

      const amountEl = document.getElementById("loan-amount");
      const rateEl = document.getElementById("interest-rate");
      const termEl = document.getElementById("loan-term");
      const termUnitEl = document.getElementById("loan-term-unit");
      const freqEl = document.getElementById("payment-frequency");
      const extraPerEl = document.getElementById("extra-per-period");
      const extraLumpEl = document.getElementById("extra-lump-sum");
      const extraLumpPeriodEl = document.getElementById(
        "extra-lump-sum-period"
      );
      const startDateEl = document.getElementById("start-date");
      const errorEl = document.getElementById("error-message");

      const summarySection = document.getElementById("summary-section");
      const chartsSection = document.getElementById("charts-section");
      const tableSection = document.getElementById("table-section");
      const summaryPaymentEl = document.getElementById("summary-payment");
      const summaryFreqLabelEl = document.getElementById(
        "summary-frequency-label"
      );
      const summaryInterestEl = document.getElementById("summary-interest");
      const summaryTotalPaidEl = document.getElementById("summary-total-paid");
      const summaryPayoffDateEl = document.getElementById(
        "summary-payoff-date"
      );
      const summaryNumPaymentsEl = document.getElementById(
        "summary-num-payments"
      );
      const extraSummaryBox = document.getElementById("extra-summary");
      const extraSummaryText = document.getElementById("extra-summary-text");
      const yearFilterEl = document.getElementById("year-filter");
      const tbody = document.getElementById("amortization-body");
      const copyCsvBtn = document.getElementById("copy-csv-btn");

      let balanceChart = null;
      let piChart = null;
      let lastSchedule = null;
      let lastBaseline = null;

      function formatCurrency(value) {
        return (
          "$" +
          value.toLocaleString(undefined, {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
          })
        );
      }

      function formatNumber(value, decimals = 2) {
        return value.toLocaleString(undefined, {
          minimumFractionDigits: decimals,
          maximumFractionDigits: decimals,
        });
      }

      function getPaymentsPerYear(freq) {
        if (freq === "biweekly") return 26;
        if (freq === "yearly") return 1;
        return 12;
      }

      function addPeriods(date, periods, freq) {
        const d = new Date(date.getTime());
        if (freq === "monthly") {
          d.setMonth(d.getMonth() + periods);
        } else if (freq === "biweekly") {
          d.setDate(d.getDate() + periods * 14);
        } else if (freq === "yearly") {
          d.setFullYear(d.getFullYear() + periods);
        }
        return d;
      }

      function buildSchedule({
        principal,
        annualRate,
        years,
        freq,
        extraPer,
        extraLump,
        extraLumpPeriod,
      }) {
        const paymentsPerYear = getPaymentsPerYear(freq);
        const n = Math.round(years * paymentsPerYear);
        const r = annualRate / 100 / paymentsPerYear;

        if (r <= 0 || n <= 0 || principal <= 0) return null;

        const payment =
          (principal * (r * Math.pow(1 + r, n))) / (Math.pow(1 + r, n) - 1);

        let balance = principal;
        const rows = [];
        let totalInterest = 0;
        let totalPaid = 0;

        for (let i = 1; i <= n && balance > 0.01; i++) {
          const interest = balance * r;
          let principalPortion = payment - interest;
          let extra = extraPer;

          if (extraLump > 0 && extraLumpPeriod && i === extraLumpPeriod) {
            extra += extraLump;
          }

          if (principalPortion + extra > balance) {
            const over = principalPortion + extra - balance;
            if (extra >= over) {
              extra -= over;
            } else {
              principalPortion -= over - extra;
              extra = 0;
            }
          }

          const totalPaymentThisPeriod = principalPortion + interest + extra;
          balance -= principalPortion + extra;
          if (balance < 0) balance = 0;

          totalInterest += interest;
          totalPaid += totalPaymentThisPeriod;

          rows.push({
            period: i,
            payment: totalPaymentThisPeriod,
            scheduledPayment: payment,
            principal: principalPortion,
            interest: interest,
            extra: extra,
            balance: balance,
          });

          if (balance <= 0.01) break;
        }

        return {
          payment,
          rows,
          totalInterest,
          totalPaid,
          numPayments: rows.length,
        };
      }

      function calculateBaseline(params) {
        const baseParams = Object.assign({}, params, {
          extraPer: 0,
          extraLump: 0,
          extraLumpPeriod: null,
        });
        return buildSchedule(baseParams);
      }

      function renderSummary(params, schedule, baseline) {
        const freqLabelMap = {
          monthly: "per month",
          biweekly: "every 2 weeks",
          yearly: "per year",
        };
        summaryPaymentEl.textContent = formatCurrency(schedule.payment);
        summaryFreqLabelEl.textContent = `Based on ${
          freqLabelMap[params.freq] || "per period"
        }.`;

        summaryInterestEl.textContent = formatCurrency(schedule.totalInterest);
        summaryTotalPaidEl.textContent = `Total paid: ${formatCurrency(
          schedule.totalPaid
        )} (principal + interest)`;

        summaryNumPaymentsEl.textContent = `${schedule.numPayments} payments`;

        if (startDateEl.value) {
          const start = new Date(startDateEl.value + "T00:00:00");
          const payoffDate = addPeriods(
            start,
            schedule.numPayments - 1,
            params.freq
          );
          summaryPayoffDateEl.textContent = payoffDate.toLocaleDateString(
            undefined,
            { year: "numeric", month: "short" }
          );
        } else {
          summaryPayoffDateEl.textContent =
            "Provide a start date to see payoff date";
        }

        if (baseline && (params.extraPer > 0 || params.extraLump > 0)) {
          const interestSaved = baseline.totalInterest - schedule.totalInterest;
          const paymentsSaved = baseline.numPayments - schedule.numPayments;
          let text = `With your extra payments, you pay off the loan ${paymentsSaved} payment${
            paymentsSaved === 1 ? "" : "s"
          } earlier and save ${formatCurrency(
            interestSaved
          )} in interest compared to the standard schedule.`;
          if (paymentsSaved <= 0 || interestSaved <= 0) {
            text =
              "Your extra payments are too small or too late to significantly change the payoff compared to the standard schedule.";
          }
          extraSummaryText.textContent = text;
          extraSummaryBox.classList.remove("hidden");
        } else {
          extraSummaryBox.classList.add("hidden");
        }

        summarySection.classList.remove("hidden");
      }

      function renderTable(params, schedule) {
        tbody.innerHTML = "";
        const paymentsPerYear = getPaymentsPerYear(params.freq);
        const yearsSet = new Set();
        const hasStartDate = !!startDateEl.value;
        let start = null;
        if (hasStartDate) {
          start = new Date(startDateEl.value + "T00:00:00");
        }

        schedule.rows.forEach((row) => {
          let dateStr = "—";
          if (hasStartDate) {
            const d = addPeriods(start, row.period - 1, params.freq);
            dateStr = d.toLocaleDateString();
            yearsSet.add(d.getFullYear());
            row._year = d.getFullYear();
          } else {
            const approxYear =
              Math.floor((row.period - 1) / paymentsPerYear) + 1;
            row._year = approxYear;
            yearsSet.add(approxYear);
          }

          const tr = document.createElement("tr");
          tr.dataset.year = row._year;

          tr.innerHTML = `
        <td class="px-3 py-1.5 text-gray-700">${row.period}</td>
        <td class="px-3 py-1.5 text-gray-700 whitespace-nowrap">${dateStr}</td>
        <td class="px-3 py-1.5 text-right text-gray-700">${formatCurrency(
          row.payment
        )}</td>
        <td class="px-3 py-1.5 text-right text-gray-700">${formatCurrency(
          row.principal
        )}</td>
        <td class="px-3 py-1.5 text-right text-gray-700">${formatCurrency(
          row.interest
        )}</td>
        <td class="px-3 py-1.5 text-right text-gray-700">${
          row.extra > 0 ? formatCurrency(row.extra) : "—"
        }</td>
        <td class="px-3 py-1.5 text-right text-gray-700">${formatCurrency(
          row.balance
        )}</td>
      `;
          tbody.appendChild(tr);
        });

        // Populate year filter
        yearFilterEl.innerHTML = '<option value="all" selected>All</option>';
        Array.from(yearsSet)
          .sort((a, b) => a - b)
          .forEach((y) => {
            const opt = document.createElement("option");
            opt.value = String(y);
            opt.textContent = String(y);
            yearFilterEl.appendChild(opt);
          });

        tableSection.classList.remove("hidden");
      }

      yearFilterEl.addEventListener("change", () => {
        const year = yearFilterEl.value;
        Array.from(tbody.children).forEach((tr) => {
          if (year === "all" || tr.dataset.year === year) {
            tr.classList.remove("hidden");
          } else {
            tr.classList.add("hidden");
          }
        });
      });

      function renderCharts(params, schedule) {
        const labels = [];
        const balances = [];
        const principalPaid = [];
        const interestPaid = [];

        let cumulativePrincipal = 0;
        let cumulativeInterest = 0;

        schedule.rows.forEach((row) => {
          labels.push(row.period);
          balances.push(row.balance);
          cumulativePrincipal += row.principal + row.extra;
          cumulativeInterest += row.interest;
          principalPaid.push(cumulativePrincipal);
          interestPaid.push(cumulativeInterest);
        });

        const balanceCtx = document
          .getElementById("balance-chart")
          .getContext("2d");
        const piCtx = document.getElementById("pi-chart").getContext("2d");

        if (balanceChart) balanceChart.destroy();
        if (piChart) piChart.destroy();

        balanceChart = new Chart(balanceCtx, {
          type: "line",
          data: {
            labels,
            datasets: [
              {
                label: "Remaining balance",
                data: balances,
                borderColor: "#2563eb",
                backgroundColor: "rgba(37, 99, 235, 0.1)",
                tension: 0.1,
                pointRadius: 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: { display: false },
              y: {
                ticks: {
                  callback: (value) => "$" + value.toLocaleString(),
                },
              },
            },
            plugins: {
              legend: { display: false },
            },
          },
        });

        piChart = new Chart(piCtx, {
          type: "doughnut",
          data: {
            labels: ["Principal", "Interest"],
            datasets: [
              {
                data: [cumulativePrincipal, cumulativeInterest],
                backgroundColor: ["#16a34a", "#f97316"],
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { position: "bottom" },
            },
          },
        });

        chartsSection.classList.remove("hidden");
      }

      function buildCsv(schedule, params) {
        const hasStartDate = !!startDateEl.value;
        let start = null;
        if (hasStartDate) {
          start = new Date(startDateEl.value + "T00:00:00");
        }
        const paymentsPerYear = getPaymentsPerYear(params.freq);

        const rows = [];
        rows.push([
          "Payment #",
          "Date",
          "Payment",
          "Principal",
          "Interest",
          "Extra",
          "Balance",
        ]);

        schedule.rows.forEach((row) => {
          let dateStr = "";
          if (hasStartDate) {
            const d = addPeriods(start, row.period - 1, params.freq);
            dateStr = d.toISOString().split("T")[0];
          } else {
            dateStr = "";
          }
          rows.push([
            row.period,
            dateStr,
            row.payment.toFixed(2),
            row.principal.toFixed(2),
            row.interest.toFixed(2),
            row.extra.toFixed(2),
            row.balance.toFixed(2),
          ]);
        });

        return rows.map((r) => r.join(",")).join("\n");
      }

      copyCsvBtn.addEventListener("click", () => {
        if (!lastSchedule) return;
        const params = lastSchedule.params;
        const csv = buildCsv(lastSchedule.schedule, params);
        navigator.clipboard
          .writeText(csv)
          .then(() => {
            copyCsvBtn.textContent = "Copied!";
            setTimeout(() => {
              copyCsvBtn.textContent = "Copy as CSV";
            }, 1500);
          })
          .catch(() => {
            alert(
              "Unable to copy to clipboard. Please copy manually from the table."
            );
          });
      });

      document.getElementById("calculate-btn").addEventListener("click", () => {
        errorEl.textContent = "";
        const principal = parseFloat(amountEl.value);
        const annualRate = parseFloat(rateEl.value);
        let term = parseFloat(termEl.value);
        const termUnit = termUnitEl.value;
        const freq = freqEl.value;
        const extraPer = parseFloat(extraPerEl.value) || 0;
        const extraLump = parseFloat(extraLumpEl.value) || 0;
        const extraLumpPeriod = extraLumpPeriodEl.value
          ? parseInt(extraLumpPeriodEl.value, 10)
          : null;

        if (!isFinite(principal) || principal <= 0) {
          errorEl.textContent = "Please enter a valid loan amount.";
          return;
        }
        if (!isFinite(annualRate) || annualRate <= 0) {
          errorEl.textContent = "Please enter a valid annual interest rate.";
          return;
        }
        if (!isFinite(term) || term <= 0) {
          errorEl.textContent = "Please enter a valid loan term.";
          return;
        }

        let years;
        if (termUnit === "months") {
          years = term / 12;
        } else {
          years = term;
        }

        const params = {
          principal,
          annualRate,
          years,
          freq,
          extraPer,
          extraLump,
          extraLumpPeriod,
        };
        const schedule = buildSchedule(params);
        if (!schedule) {
          errorEl.textContent =
            "Unable to calculate schedule with the given inputs.";
          return;
        }
        const baseline = calculateBaseline(params);

        renderSummary(params, schedule, baseline);
        renderTable(params, schedule);
        renderCharts(params, schedule);

        lastSchedule = { params, schedule };
        lastBaseline = baseline;
      });

      document.getElementById("reset-btn").addEventListener("click", () => {
        amountEl.value = 250000;
        rateEl.value = 5;
        termEl.value = 30;
        termUnitEl.value = "years";
        freqEl.value = "monthly";
        extraPerEl.value = 0;
        extraLumpEl.value = 0;
        extraLumpPeriodEl.value = "";
        startDateEl.value = "";
        errorEl.textContent = "";
        summarySection.classList.add("hidden");
        chartsSection.classList.add("hidden");
        tableSection.classList.add("hidden");
        tbody.innerHTML = "";
        if (balanceChart) balanceChart.destroy();
        if (piChart) piChart.destroy();
        lastSchedule = null;
        lastBaseline = null;
      });

      // Auto-calc on load with defaults
      window.addEventListener("load", () => {
        const today = new Date();
        const iso = today.toISOString().split("T")[0];
        startDateEl.value = iso;
        document.getElementById("calculate-btn").click();
      });
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

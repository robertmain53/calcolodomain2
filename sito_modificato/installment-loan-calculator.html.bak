<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/installment-loan-calculator" />
    <title>Installment Loan Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Installment Loan Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Installment Loan Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Installment Loan Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/installment-loan-calculator" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Installment Loan Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Installment Loan Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "Loans &amp; Debt Calculators", "item": "https://calcdomain.com/subcategories/finance-loans-debt"}, {"@type": "ListItem", "position": 4, "name": "Installment Loan Calculator", "item": "https://calcdomain.com/installment-loan-calculator"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/finance-loans-debt" class="text-blue-600 hover:underline">Loans &amp;amp; Debt Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Installment Loan Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <section aria-labelledby="installment-loan-calculator-heading">
              <div class="mb-6">
                <h1
                  id="installment-loan-calculator-heading"
                  class="text-2xl font-bold text-gray-900 mb-2"
                >
                  Installment Loan Calculator
                </h1>
                <p class="text-gray-700">
                  Estimate your fixed installment payment, total interest,
                  payoff date, and full amortization schedule for personal,
                  auto, and other fixed-rate loans.
                </p>
              </div>

              <!-- Mode Tabs -->
              <div class="mb-4">
                <div
                  class="inline-flex rounded-md border border-gray-200 bg-gray-50 p-1"
                  role="tablist"
                  aria-label="Solve for"
                >
                  <button
                    type="button"
                    id="tab-solve-payment"
                    role="tab"
                    aria-selected="true"
                    class="px-3 py-1.5 text-sm font-medium rounded-md border tab-active"
                  >
                    Solve for Payment
                  </button>
                  <button
                    type="button"
                    id="tab-solve-amount"
                    role="tab"
                    aria-selected="false"
                    class="px-3 py-1.5 text-sm font-medium rounded-md border tab-inactive"
                  >
                    Solve for Amount
                  </button>
                  <button
                    type="button"
                    id="tab-solve-term"
                    role="tab"
                    aria-selected="false"
                    class="px-3 py-1.5 text-sm font-medium rounded-md border tab-inactive hidden sm:inline-flex"
                  >
                    Solve for Term
                  </button>
                  <button
                    type="button"
                    id="tab-solve-rate"
                    role="tab"
                    aria-selected="false"
                    class="px-3 py-1.5 text-sm font-medium rounded-md border tab-inactive hidden sm:inline-flex"
                  >
                    Solve for Rate
                  </button>
                </div>
              </div>

              <!-- Calculator Form -->
              <form id="loan-form" class="space-y-4" novalidate>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <!-- Loan Amount -->
                  <div id="field-loan-amount">
                    <label
                      for="loanAmount"
                      class="block text-sm font-medium text-gray-700 mb-1"
                    >
                      Loan amount
                    </label>
                    <div class="relative">
                      <span
                        class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500"
                        >$</span
                      >
                      <input
                        type="number"
                        id="loanAmount"
                        inputmode="decimal"
                        min="0"
                        step="0.01"
                        class="w-full border border-gray-300 rounded-md pl-7 pr-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="10,000"
                      />
                    </div>
                  </div>

                  <!-- Payment -->
                  <div id="field-payment" class="hidden">
                    <label
                      for="paymentAmount"
                      class="block text-sm font-medium text-gray-700 mb-1"
                    >
                      Regular payment
                    </label>
                    <div class="relative">
                      <span
                        class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500"
                        >$</span
                      >
                      <input
                        type="number"
                        id="paymentAmount"
                        inputmode="decimal"
                        min="0"
                        step="0.01"
                        class="w-full border border-gray-300 rounded-md pl-7 pr-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="300"
                      />
                    </div>
                  </div>

                  <!-- Interest Rate -->
                  <div id="field-rate">
                    <label
                      for="interestRate"
                      class="block text-sm font-medium text-gray-700 mb-1"
                    >
                      Interest rate (APR)
                    </label>
                    <div class="relative">
                      <input
                        type="number"
                        id="interestRate"
                        inputmode="decimal"
                        min="0"
                        step="0.01"
                        class="w-full border border-gray-300 rounded-md pl-3 pr-10 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="8.5"
                      />
                      <span
                        class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500"
                        >%</span
                      >
                    </div>
                  </div>

                  <!-- Term -->
                  <div id="field-term">
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                      Term
                    </label>
                    <div class="flex gap-2">
                      <input
                        type="number"
                        id="loanTerm"
                        inputmode="decimal"
                        min="0"
                        step="1"
                        class="w-1/2 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="60"
                      />
                      <select
                        id="termUnit"
                        class="w-1/2 border border-gray-300 rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      >
                        <option value="months">months</option>
                        <option value="years">years</option>
                      </select>
                    </div>
                  </div>

                  <!-- Payment Frequency -->
                  <div>
                    <label
                      for="paymentFrequency"
                      class="block text-sm font-medium text-gray-700 mb-1"
                    >
                      Payment frequency
                    </label>
                    <select
                      id="paymentFrequency"
                      class="w-full border border-gray-300 rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      <option value="monthly">Monthly</option>
                      <option value="biweekly">Biweekly (every 2 weeks)</option>
                      <option value="weekly">Weekly</option>
                      <option value="quarterly">Quarterly</option>
                      <option value="annually">Annually</option>
                    </select>
                  </div>

                  <!-- First Payment Date -->
                  <div>
                    <label
                      for="startDate"
                      class="block text-sm font-medium text-gray-700 mb-1"
                    >
                      First payment date
                      <span class="text-gray-400 text-xs">(optional)</span>
                    </label>
                    <input
                      type="date"
                      id="startDate"
                      class="w-full border border-gray-300 rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>

                  <!-- Interest Convention -->
                  <div>
                    <label
                      for="dayCount"
                      class="block text-sm font-medium text-gray-700 mb-1"
                    >
                      Interest convention
                    </label>
                    <select
                      id="dayCount"
                      class="w-full border border-gray-300 rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      <option value="act365">Actual/365 (standard)</option>
                      <option value="act360">Actual/360</option>
                      <option value="30360">30/360</option>
                    </select>
                  </div>

                  <!-- Extra Payment -->
                  <div>
                    <label
                      for="extraPayment"
                      class="block text-sm font-medium text-gray-700 mb-1"
                    >
                      Extra payment per period
                      <span class="text-gray-400 text-xs">(optional)</span>
                    </label>
                    <div class="relative">
                      <span
                        class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500"
                        >$</span
                      >
                      <input
                        type="number"
                        id="extraPayment"
                        inputmode="decimal"
                        min="0"
                        step="0.01"
                        class="w-full border border-gray-300 rounded-md pl-7 pr-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="0"
                      />
                    </div>
                  </div>
                </div>

                <!-- Error message -->
                <p id="error-message" class="text-sm text-red-600 hidden"></p>

                <!-- Buttons -->
                <div class="flex flex-wrap items-center gap-3 pt-2">
                  <button
                    type="button"
                    id="calculateBtn"
                    class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
                  >
                    Calculate
                  </button>
                  <button
                    type="button"
                    id="resetBtn"
                    class="inline-flex items-center px-3 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
                  >
                    Reset
                  </button>
                </div>
              </form>

              <!-- Results Summary -->
              <section
                id="results-section"
                class="mt-8 hidden"
                aria-live="polite"
              >
                <h2 class="text-xl font-semibold text-gray-900 mb-3">
                  Results
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div class="border border-gray-200 rounded-lg p-4">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">
                      Regular payment
                    </h3>
                    <p
                      id="result-payment"
                      class="text-2xl font-bold text-blue-600 result-number"
                    >
                      $0.00
                    </p>
                    <p id="result-frequency" class="text-xs text-gray-500 mt-1">
                      per month
                    </p>
                  </div>
                  <div class="border border-gray-200 rounded-lg p-4">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">
                      Total interest
                    </h3>
                    <p
                      id="result-interest"
                      class="text-lg font-semibold text-gray-900 result-number"
                    >
                      $0.00
                    </p>
                    <p
                      id="result-total-paid"
                      class="text-xs text-gray-500 mt-1"
                    >
                      Total paid: $0.00
                    </p>
                  </div>
                  <div class="border border-gray-200 rounded-lg p-4">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">
                      Number of payments
                    </h3>
                    <p
                      id="result-num-payments"
                      class="text-lg font-semibold text-gray-900 result-number"
                    >
                      0
                    </p>
                    <p
                      id="result-term-equivalent"
                      class="text-xs text-gray-500 mt-1"
                    >
                      0 years
                    </p>
                  </div>
                  <div class="border border-gray-200 rounded-lg p-4">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">
                      Payoff date
                    </h3>
                    <p
                      id="result-payoff-date"
                      class="text-lg font-semibold text-gray-900"
                    >
                      —
                    </p>
                    <p
                      id="result-savings"
                      class="text-xs text-emerald-600 mt-1 hidden"
                    ></p>
                  </div>
                </div>
              </section>

              <!-- Amortization Schedule -->
              <section id="schedule-section" class="mt-8 hidden">
                <div class="flex items-center justify-between mb-3">
                  <h2 class="text-xl font-semibold text-gray-900">
                    Amortization schedule
                  </h2>
                  <button
                    type="button"
                    id="toggleScheduleBtn"
                    class="text-sm text-blue-600 hover:text-blue-800"
                  >
                    Show first 12 payments
                  </button>
                </div>
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                  <div class="max-h-80 overflow-auto">
                    <table class="min-w-full text-sm schedule-table">
                      <thead class="border-b border-gray-200">
                        <tr class="text-left text-gray-600">
                          <th>#</th>
                          <th>Date</th>
                          <th>Payment</th>
                          <th>Principal</th>
                          <th>Interest</th>
                          <th>Extra</th>
                          <th>Balance</th>
                        </tr>
                      </thead>
                      <tbody
                        id="schedule-body"
                        class="divide-y divide-gray-100 bg-white"
                      ></tbody>
                    </table>
                  </div>
                </div>
              </section>

              <!-- Explanation Content -->
              <section class="prose mt-10">
                <h2>How this installment loan calculator works</h2>
                <p>
                  This tool models a standard fixed-rate installment loan: you
                  borrow a lump sum and repay it with equal payments over time.
                  Each payment covers that period’s interest plus some
                  principal.
                </p>
                <p>
                  You can use it for personal loans, auto loans, debt
                  consolidation loans, and most other closed-end loans with a
                  fixed interest rate.
                </p>

                <h3>Amortization formula</h3>
                <p>
                  For a fixed-rate loan, the regular payment is calculated using
                  the standard amortization formula:
                </p>
                <div class="formula-box">
                  <p>Let:</p>
                  <ul>
                    <li><strong>P</strong> = loan amount (principal)</li>
                    <li>
                      <strong>r</strong> = periodic interest rate (APR ÷
                      payments per year)
                    </li>
                    <li><strong>n</strong> = total number of payments</li>
                  </ul>
                  <p>Then the payment is:</p>
                  <p>
                    \( \text{Payment} = P \times \dfrac{r(1 + r)^n}{(1 + r)^n -
                    1} \)
                  </p>
                </div>
                <p>
                  Each period, interest is calculated on the remaining balance:
                </p>
                <div class="formula-box">
                  <p>\( \text{Interest}_k = \text{Balance}_{k-1} \times r \)</p>
                  <p>
                    \( \text{Principal}_k = \text{Payment} - \text{Interest}_k
                    \)
                  </p>
                  <p>
                    \( \text{Balance}_k = \text{Balance}_{k-1} -
                    \text{Principal}_k - \text{Extra}_k \)
                  </p>
                </div>

                <h3>Solving for amount, term, or rate</h3>
                <p>
                  Unlike many basic calculators, this tool can also solve the
                  amortization equation for:
                </p>
                <ul>
                  <li>
                    <strong>Loan amount</strong> given a target payment, rate,
                    and term.
                  </li>
                  <li>
                    <strong>Term</strong> (number of payments) given amount,
                    rate, and payment.
                  </li>
                  <li>
                    <strong>Interest rate</strong> given amount, term, and
                    payment (using an iterative method).
                  </li>
                </ul>

                <h3>Payment frequency and day-count conventions</h3>
                <p>
                  By default, the calculator assumes a nominal APR with equal
                  periods (monthly, biweekly, etc.). The
                  <strong>interest convention</strong> setting lets you
                  approximate how some lenders compute interest:
                </p>
                <ul>
                  <li>
                    <strong>Actual/365</strong> – uses 365 days per year (common
                    for consumer loans).
                  </li>
                  <li>
                    <strong>Actual/360</strong> – divides by 360, slightly
                    increasing effective interest.
                  </li>
                  <li>
                    <strong>30/360</strong> – assumes 30 days per month and 360
                    days per year.
                  </li>
                </ul>
                <p>
                  For simplicity, this calculator uses the convention to adjust
                  the effective periodic rate, while still keeping equal
                  payments.
                </p>

                <h3>Extra payments and interest savings</h3>
                <p>
                  If you enter an <strong>extra payment per period</strong>, the
                  calculator:
                </p>
                <ul>
                  <li>Applies the extra directly to principal each period.</li>
                  <li>
                    Rebuilds the amortization schedule until the balance reaches
                    zero.
                  </li>
                  <li>
                    Shows how many payments and how much interest you save
                    compared with the baseline schedule.
                  </li>
                </ul>

                <h2>Example: Personal loan calculation</h2>
                <p>
                  Suppose you borrow $10,000 at 9% APR for 4 years with monthly
                  payments.
                </p>
                <ul>
                  <li>Loan amount: $10,000</li>
                  <li>Interest rate: 9% APR</li>
                  <li>Term: 4 years (48 months)</li>
                  <li>Payment frequency: Monthly</li>
                </ul>
                <p>
                  The monthly payment will be about <strong>$248.85</strong>.
                </p>
                <p>
                  Over 48 payments you’ll pay roughly <strong>$1,944</strong> in
                  interest and <strong>$11,944</strong> in total.
                </p>

                <h2>Tips for using installment loans wisely</h2>
                <ul>
                  <li>
                    Compare <strong>APR</strong>, not just the payment amount.
                  </li>
                  <li>
                    Avoid extending the term just to “make the payment fit” –
                    you may pay much more interest.
                  </li>
                  <li>
                    Check for <strong>prepayment penalties</strong> before
                    making extra payments.
                  </li>
                  <li>
                    Use the amortization schedule to see how much of each
                    payment goes to interest vs. principal.
                  </li>
                </ul>
              </section>

              <!-- FAQ -->
              <section class="mt-10">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">
                  Installment loan calculator FAQ
                </h2>
                <div class="space-y-3" id="faq-container">
                  <details class="border border-gray-200 rounded-md p-3">
                    <summary class="font-medium cursor-pointer">
                      What is an installment loan?
                    </summary>
                    <p class="mt-2 text-sm text-gray-700">
                      An installment loan is a loan you repay over time with a
                      fixed number of scheduled payments, usually monthly.
                      Personal loans, auto loans, and many debt consolidation
                      loans are all installment loans. The payment amount is
                      typically the same each period.
                    </p>
                  </details>
                  <details class="border border-gray-200 rounded-md p-3">
                    <summary class="font-medium cursor-pointer">
                      Can I use this for simple-interest loans?
                    </summary>
                    <p class="mt-2 text-sm text-gray-700">
                      Yes, as long as the loan has a fixed rate and fixed
                      payment schedule, this calculator will give a very close
                      approximation. For daily simple-interest loans with
                      irregular payments, your lender’s exact figures may differ
                      slightly.
                    </p>
                  </details>
                  <details class="border border-gray-200 rounded-md p-3">
                    <summary class="font-medium cursor-pointer">
                      Why is the interest I see on my statement slightly
                      different?
                    </summary>
                    <p class="mt-2 text-sm text-gray-700">
                      Lenders may use different day-count conventions, rounding
                      rules, or may capitalize fees into the balance. This
                      calculator uses standard formulas and may differ by a few
                      cents per payment from your lender’s internal system.
                    </p>
                  </details>
                  <details class="border border-gray-200 rounded-md p-3">
                    <summary class="font-medium cursor-pointer">
                      What happens if I change the payment frequency?
                    </summary>
                    <p class="mt-2 text-sm text-gray-700">
                      Changing from monthly to biweekly or weekly increases the
                      number of payments per year. If the payment amount is
                      recalculated for the same term, you’ll generally pay off
                      the loan faster and reduce total interest, because you’re
                      paying down principal more frequently.
                    </p>
                  </details>
                </div>
              </section>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Installment, Loan, Calculator, Loan amount, Regular payment, Interest rate (APR), Term, Payment frequency.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Loan amount</li><li>Regular payment</li><li>Interest rate (APR)</li><li>Term</li><li>Payment frequency</li><li>First payment date (optional)</li><li>Interest convention</li><li>Extra payment per period (optional)</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Installment, Loan, Calculator, Loan amount, Regular payment, Interest rate (APR), Term, Payment frequency.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Loan amount</li><li>Regular payment</li><li>Interest rate (APR)</li><li>Term</li><li>Payment frequency</li><li>First payment date (optional)</li><li>Interest convention</li><li>Extra payment per period (optional)</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              More loan & debt calculators
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/simple-loan-calculator"
                  class="text-blue-600 hover:underline"
                  >Simple Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/personal-loan-calculator"
                  class="text-blue-600 hover:underline"
                  >Personal Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-amortization-calculator"
                  class="text-blue-600 hover:underline"
                  >Advanced Loan Amortization</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-payoff"
                  class="text-blue-600 hover:underline"
                  >Loan Payoff Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/debt-snowball-calculator"
                  class="text-blue-600 hover:underline"
                  >Debt Snowball Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/debt-avalanche-calculator"
                  class="text-blue-600 hover:underline"
                  >Debt Avalanche Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-comparison-calculator"
                  class="text-blue-600 hover:underline"
                  >Loan Comparison Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan"
                  class="text-blue-600 hover:underline"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-blue-600 hover:underline"
                  >Mortgage Payment Calculator</a
                >
              </li>
            </ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Finance categories</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/finance-loans-and-debt"
                  class="text-blue-600 hover:underline"
                  >Loans &amp; Debt</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-investment"
                  class="text-blue-600 hover:underline"
                  >Investment</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-mortgage-real-estate"
                  class="text-blue-600 hover:underline"
                  >Mortgage &amp; Real Estate</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-retirement"
                  class="text-blue-600 hover:underline"
                  >Retirement</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/taxes"
                  class="text-blue-600 hover:underline"
                  >Taxes</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // UI state
      const modes = ["payment", "amount", "term", "rate"];
      let currentMode = "payment";
      let fullSchedule = [];
      let baselineInterest = null;
      let baselinePayments = null;

      const tabIds = {
        payment: "tab-solve-payment",
        amount: "tab-solve-amount",
        term: "tab-solve-term",
        rate: "tab-solve-rate",
      };

      const fieldLoanAmount = document.getElementById("field-loan-amount");
      const fieldPayment = document.getElementById("field-payment");
      const fieldTerm = document.getElementById("field-term");
      const fieldRate = document.getElementById("field-rate");

      const loanAmountInput = document.getElementById("loanAmount");
      const paymentInput = document.getElementById("paymentAmount");
      const rateInput = document.getElementById("interestRate");
      const termInput = document.getElementById("loanTerm");
      const termUnitSelect = document.getElementById("termUnit");
      const frequencySelect = document.getElementById("paymentFrequency");
      const startDateInput = document.getElementById("startDate");
      const dayCountSelect = document.getElementById("dayCount");
      const extraPaymentInput = document.getElementById("extraPayment");

      const errorMessage = document.getElementById("error-message");

      const resultsSection = document.getElementById("results-section");
      const scheduleSection = document.getElementById("schedule-section");
      const resultPayment = document.getElementById("result-payment");
      const resultFrequency = document.getElementById("result-frequency");
      const resultInterest = document.getElementById("result-interest");
      const resultTotalPaid = document.getElementById("result-total-paid");
      const resultNumPayments = document.getElementById("result-num-payments");
      const resultTermEquivalent = document.getElementById(
        "result-term-equivalent"
      );
      const resultPayoffDate = document.getElementById("result-payoff-date");
      const resultSavings = document.getElementById("result-savings");
      const scheduleBody = document.getElementById("schedule-body");
      const toggleScheduleBtn = document.getElementById("toggleScheduleBtn");

      function setMode(mode) {
        currentMode = mode;
        modes.forEach((m) => {
          const tab = document.getElementById(tabIds[m]);
          if (!tab) return;
          if (m === mode) {
            tab.classList.remove("tab-inactive");
            tab.classList.add("tab-active");
            tab.setAttribute("aria-selected", "true");
          } else {
            tab.classList.remove("tab-active");
            tab.classList.add("tab-inactive");
            tab.setAttribute("aria-selected", "false");
          }
        });

        // Show/hide input fields depending on mode
        fieldLoanAmount.classList.toggle("hidden", mode === "amount");
        fieldPayment.classList.toggle("hidden", mode === "payment");
        fieldTerm.classList.toggle("hidden", mode === "term");
        fieldRate.classList.toggle("hidden", mode === "rate");
      }

      // Attach tab handlers
      document
        .getElementById("tab-solve-payment")
        .addEventListener("click", () => setMode("payment"));
      document
        .getElementById("tab-solve-amount")
        .addEventListener("click", () => setMode("amount"));
      document
        .getElementById("tab-solve-term")
        .addEventListener("click", () => setMode("term"));
      document
        .getElementById("tab-solve-rate")
        .addEventListener("click", () => setMode("rate"));

      function parsePositiveNumber(input) {
        const v = parseFloat(input.value);
        return isFinite(v) && v > 0 ? v : null;
      }

      function paymentsPerYear(freq) {
        switch (freq) {
          case "weekly":
            return 52;
          case "biweekly":
            return 26;
          case "quarterly":
            return 4;
          case "annually":
            return 1;
          default:
            return 12;
        }
      }

      function formatCurrency(value) {
        if (!isFinite(value)) return "$0.00";
        return (
          "$" +
          value.toLocaleString(undefined, {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
          })
        );
      }

      function formatDate(d) {
        if (!(d instanceof Date) || isNaN(d)) return "—";
        return d.toLocaleDateString(undefined, {
          year: "numeric",
          month: "short",
          day: "numeric",
        });
      }

      function computeEffectivePeriodicRate(apr, freq, dayCount) {
        const nominal = apr / 100;
        const n = paymentsPerYear(freq);
        if (nominal === 0) return 0;

        // Adjust nominal APR based on day-count convention
        let factor = 1;
        if (dayCount === "act360") {
          factor = 365 / 360;
        } else if (dayCount === "30360") {
          factor = 365 / 360; // simple approximation
        }
        const effectiveAnnual = nominal * factor;
        return effectiveAnnual / n;
      }

      function calcPayment(P, r, n) {
        if (n <= 0) return null;
        if (r === 0) return P / n;
        const pow = Math.pow(1 + r, n);
        return (P * (r * pow)) / (pow - 1);
      }

      function calcAmountFromPayment(payment, r, n) {
        if (n <= 0) return null;
        if (r === 0) return payment * n;
        const pow = Math.pow(1 + r, n);
        return (payment * (pow - 1)) / (r * pow);
      }

      function calcTermFromPayment(P, r, payment) {
        if (payment <= 0) return null;
        if (r === 0) return P / payment;
        const ratio = payment / (payment - P * r);
        if (ratio <= 0) return null;
        return Math.log(ratio) / Math.log(1 + r);
      }

      function calcRateFromPayment(P, n, payment) {
        // Use Newton-Raphson on rate per period
        if (n <= 0 || payment <= 0 || P <= 0) return null;
        let r = 0.01; // initial guess 1% per period
        for (let i = 0; i < 50; i++) {
          const pow = Math.pow(1 + r, n);
          const f = (P * (r * pow)) / (pow - 1) - payment;
          if (Math.abs(f) < 1e-9) return r;
          // derivative of payment wrt r (approximate numerically)
          const dr = 1e-5;
          const pow2 = Math.pow(1 + r + dr, n);
          const payment2 = (P * ((r + dr) * pow2)) / (pow2 - 1);
          const fprime = (payment2 - (P * (r * pow)) / (pow - 1)) / dr;
          if (Math.abs(fprime) < 1e-12) break;
          r = r - f / fprime;
          if (r < 0) r = 0.000001;
        }
        return r > 0 ? r : null;
      }

      function addPeriod(date, freq) {
        const d = new Date(date.getTime());
        switch (freq) {
          case "weekly":
            d.setDate(d.getDate() + 7);
            break;
          case "biweekly":
            d.setDate(d.getDate() + 14);
            break;
          case "quarterly":
            d.setMonth(d.getMonth() + 3);
            break;
          case "annually":
            d.setFullYear(d.getFullYear() + 1);
            break;
          default:
            d.setMonth(d.getMonth() + 1);
        }
        return d;
      }

      function buildSchedule(P, r, n, payment, extra, freq, startDate) {
        const schedule = [];
        let balance = P;
        let date = startDate ? new Date(startDate.getTime()) : null;
        let totalInterest = 0;
        let k = 0;

        while (balance > 0 && k < n + 600) {
          // safety cap
          k++;
          const interest = r === 0 ? 0 : balance * r;
          let principal = payment - interest;
          if (principal < 0) principal = 0;
          let extraPay = extra || 0;

          if (principal + extraPay > balance) {
            extraPay = Math.max(0, balance - principal);
          }

          const totalPayment = principal + interest + extraPay;
          balance = balance - principal - extraPay;
          if (balance < 1e-8) balance = 0;

          totalInterest += interest;

          schedule.push({
            period: k,
            date: date ? new Date(date.getTime()) : null,
            payment: totalPayment,
            principal: principal + extraPay,
            interest: interest,
            extra: extraPay,
            balance: balance,
          });

          if (balance <= 0) break;
          if (date) date = addPeriod(date, freq);
        }

        return { schedule, totalInterest, numPayments: schedule.length };
      }

      function updateScheduleTable(showAll = false) {
        scheduleBody.innerHTML = "";
        if (!fullSchedule || fullSchedule.length === 0) return;
        const rowsToShow = showAll
          ? fullSchedule.length
          : Math.min(12, fullSchedule.length);
        for (let i = 0; i < rowsToShow; i++) {
          const row = fullSchedule[i];
          const tr = document.createElement("tr");
          tr.innerHTML = `
        <td>${row.period}</td>
        <td>${row.date ? formatDate(row.date) : "-"}</td>
        <td class="result-number">${formatCurrency(row.payment)}</td>
        <td class="result-number">${formatCurrency(row.principal)}</td>
        <td class="result-number">${formatCurrency(row.interest)}</td>
        <td class="result-number">${
          row.extra ? formatCurrency(row.extra) : "$0.00"
        }</td>
        <td class="result-number">${formatCurrency(row.balance)}</td>
      `;
          scheduleBody.appendChild(tr);
        }
        toggleScheduleBtn.textContent = showAll
          ? "Show first 12 payments"
          : `Show all ${fullSchedule.length} payments`;
        toggleScheduleBtn.dataset.showAll = showAll ? "1" : "0";
      }

      toggleScheduleBtn.addEventListener("click", () => {
        const showAll = toggleScheduleBtn.dataset.showAll !== "1";
        updateScheduleTable(showAll);
      });

      document.getElementById("calculateBtn").addEventListener("click", () => {
        errorMessage.classList.add("hidden");
        errorMessage.textContent = "";

        const freq = frequencySelect.value;
        const nPerYear = paymentsPerYear(freq);

        const apr = parsePositiveNumber(rateInput) ?? 0;
        const dayCount = dayCountSelect.value;
        const r = computeEffectivePeriodicRate(apr, freq, dayCount);

        let termInputVal = parsePositiveNumber(termInput);
        let termUnit = termUnitSelect.value;
        let n = null;
        if (termInputVal !== null) {
          n = termUnit === "years" ? termInputVal * nPerYear : termInputVal;
        }

        const P = parsePositiveNumber(loanAmountInput);
        const paymentVal = parsePositiveNumber(paymentInput);
        const extra =
          parseFloat(extraPaymentInput.value) > 0
            ? parseFloat(extraPaymentInput.value)
            : 0;

        // Validate based on mode
        if (currentMode === "payment") {
          if (P === null || apr < 0 || n === null) {
            errorMessage.textContent =
              "Please enter a valid loan amount, interest rate, and term.";
            errorMessage.classList.remove("hidden");
            return;
          }
        } else if (currentMode === "amount") {
          if (paymentVal === null || apr < 0 || n === null) {
            errorMessage.textContent =
              "Please enter a valid payment amount, interest rate, and term.";
            errorMessage.classList.remove("hidden");
            return;
          }
        } else if (currentMode === "term") {
          if (P === null || apr < 0 || paymentVal === null) {
            errorMessage.textContent =
              "Please enter a valid loan amount, interest rate, and payment.";
            errorMessage.classList.remove("hidden");
            return;
          }
        } else if (currentMode === "rate") {
          if (P === null || n === null || paymentVal === null) {
            errorMessage.textContent =
              "Please enter a valid loan amount, term, and payment.";
            errorMessage.classList.remove("hidden");
            return;
          }
        }

        let payment = paymentVal;
        let amount = P;
        let totalPayments = n;

        if (currentMode === "payment") {
          payment = calcPayment(P, r, n);
          if (!isFinite(payment) || payment <= 0) {
            errorMessage.textContent =
              "Unable to compute payment with the given inputs.";
            errorMessage.classList.remove("hidden");
            return;
          }
        } else if (currentMode === "amount") {
          amount = calcAmountFromPayment(paymentVal, r, n);
          if (!isFinite(amount) || amount <= 0) {
            errorMessage.textContent =
              "Unable to compute loan amount with the given inputs.";
            errorMessage.classList.remove("hidden");
            return;
          }
          loanAmountInput.value = amount.toFixed(2);
        } else if (currentMode === "term") {
          totalPayments = calcTermFromPayment(P, r, paymentVal);
          if (!isFinite(totalPayments) || totalPayments <= 0) {
            errorMessage.textContent =
              "Payment is too small to ever repay this loan at the given rate.";
            errorMessage.classList.remove("hidden");
            return;
          }
          // Update term display in years or months
          const years = totalPayments / nPerYear;
          if (termUnit === "years") {
            termInput.value = years.toFixed(2);
          } else {
            termInput.value = Math.round(totalPayments);
          }
        } else if (currentMode === "rate") {
          const rSolved = calcRateFromPayment(P, n, paymentVal);
          if (!isFinite(rSolved) || rSolved <= 0) {
            errorMessage.textContent =
              "Unable to solve for interest rate with the given inputs.";
            errorMessage.classList.remove("hidden");
            return;
          }
          const effectiveAnnual = rSolved * nPerYear;
          const nominalAPR = effectiveAnnual; // ignoring day-count back-conversion for simplicity
          rateInput.value = (nominalAPR * 100).toFixed(3);
          payment = paymentVal;
        }

        // Build baseline schedule (no extra) for savings comparison
        const startDate = startDateInput.value
          ? new Date(startDateInput.value)
          : null;
        const base = buildSchedule(
          amount,
          r,
          Math.ceil(totalPayments),
          payment,
          0,
          freq,
          startDate
        );
        baselineInterest = base.totalInterest;
        baselinePayments = base.numPayments;

        // Build schedule with extra payment
        const withExtra = buildSchedule(
          amount,
          r,
          Math.ceil(totalPayments),
          payment,
          extra,
          freq,
          startDate
        );
        fullSchedule = withExtra.schedule;

        // Update results
        const totalInterest = withExtra.totalInterest;
        const numPayments = withExtra.numPayments;
        const totalPaid = amount + totalInterest;

        resultPayment.textContent = formatCurrency(payment + extra);
        const freqLabel =
          {
            monthly: "per month",
            biweekly: "every 2 weeks",
            weekly: "per week",
            quarterly: "per quarter",
            annually: "per year",
          }[freq] || "per period";
        resultFrequency.textContent =
          extra > 0
            ? `${formatCurrency(payment)} + ${formatCurrency(
                extra
              )} extra ${freqLabel}`
            : freqLabel;

        resultInterest.textContent = formatCurrency(totalInterest);
        resultTotalPaid.textContent = `Total paid: ${formatCurrency(
          totalPaid
        )}`;
        resultNumPayments.textContent = numPayments.toString();

        const yearsEq = numPayments / nPerYear;
        const years = Math.floor(yearsEq);
        const months = Math.round((yearsEq - years) * 12);
        let termText = "";
        if (years > 0) termText += `${years} year${years !== 1 ? "s" : ""} `;
        if (months > 0) termText += `${months} month${months !== 1 ? "s" : ""}`;
        if (!termText) termText = `${numPayments} payments`;
        resultTermEquivalent.textContent = termText.trim();

        const payoffDate =
          fullSchedule.length > 0
            ? fullSchedule[fullSchedule.length - 1].date
            : null;
        resultPayoffDate.textContent = payoffDate
          ? formatDate(payoffDate)
          : "—";

        // Savings
        if (extra > 0 && baselineInterest != null && baselinePayments != null) {
          const interestSaved = baselineInterest - totalInterest;
          const paymentsSaved = baselinePayments - numPayments;
          if (interestSaved > 0 || paymentsSaved > 0) {
            resultSavings.textContent =
              `Extra payments save about ${formatCurrency(
                interestSaved
              )} in interest and ` +
              `${paymentsSaved} payment${paymentsSaved !== 1 ? "s" : ""}.`;
            resultSavings.classList.remove("hidden");
          } else {
            resultSavings.classList.add("hidden");
          }
        } else {
          resultSavings.classList.add("hidden");
        }

        resultsSection.classList.remove("hidden");
        scheduleSection.classList.remove("hidden");
        updateScheduleTable(false);
      });

      document.getElementById("resetBtn").addEventListener("click", () => {
        loanAmountInput.value = "";
        paymentInput.value = "";
        rateInput.value = "";
        termInput.value = "";
        termUnitSelect.value = "months";
        frequencySelect.value = "monthly";
        startDateInput.value = "";
        dayCountSelect.value = "act365";
        extraPaymentInput.value = "";
        errorMessage.classList.add("hidden");
        errorMessage.textContent = "";
        resultsSection.classList.add("hidden");
        scheduleSection.classList.add("hidden");
        scheduleBody.innerHTML = "";
        baselineInterest = null;
        baselinePayments = null;
      });

      // Initialize default mode
      setMode("payment");
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

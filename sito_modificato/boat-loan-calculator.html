<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/boat-loan-calculator">





  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Boat Loan Calculator — Payment, Taxes, Fees &amp; Amortization</title>
  <meta name="description" content="Calculate boat loan payments with taxes, fees, down payment, and trade-in. Get the amount financed, total interest, ownership cost, and a full amortization schedule.">
  
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- Tailwind and Chart.js (small, async) -->
  <script src="https://cdn.tailwindcss.com" defer=""></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer=""></script>

  <!-- Fonts (preconnect + swap) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">

  <style>
    :root { --focus: #2563eb; }
    html { scroll-behavior:smooth; }
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; }
    .prose { max-width: 68ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 0.75rem; }
    .prose h3 { font-size: 1.125rem; font-weight: 600; margin-top: 1.25rem; margin-bottom: 0.5rem; }
    .formula-box { background:#f3f4f6; border:1px solid #e5e7eb; border-radius:10px; padding:1rem; overflow-x:auto; font-family: ui-monospace, Menlo, Consolas, monospace; }
    /* Visible focus */
    :is(input, select, button, summary, a):focus-visible { outline:3px solid var(--focus); outline-offset:2px; border-radius:8px; }
    /* Prevent CLS for results & chart */
    #results { min-height: 360px; }
    #resultsChartWrap { min-height: 200px; }
    /* Tooltip */
    .tip { display:none; }
    .tip[aria-hidden="false"] { display:block; }
    /* Print */
    @media print {
      header, aside, .no-print { display:none !important; }
      #print-section { position: static; box-shadow:none; border:none; }
      body { background:#fff; }
    }
  </style>

  <!-- WebPage JSON-LD -->
  <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Boat Loan Calculator",
  "url": "https://calcdomain.com/boat-loan-calculator",
  "inLanguage": "en",
  "description": "Calculate boat loan payments including sales tax, fees, down payment, and trade-in. See amount financed, total interest, and full amortization schedule.",
  "dateModified": "2026-01-19",
  "reviewedBy": {
    "@type": "Person",
    "name": "Ugo Candido"
  }
}</script>

  <!-- Breadcrumb JSON-LD -->
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Finance",
      "item": "https://calcdomain.com/categories/finance"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Loans Debt",
      "item": "https://calcdomain.com/subcategories/loans-debt"
    }
  ]
}
</script>

  <!-- HowTo JSON-LD -->
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to calculate a boat loan payment",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Enter boat price & extras",
      "text": "Input boat price, sales tax, and fees. Add down payment and trade-in to compute the amount financed."
    },
    {
      "@type": "HowToStep",
      "name": "Set APR and term",
      "text": "Choose your annual percentage rate (APR) and loan term in years or months."
    },
    {
      "@type": "HowToStep",
      "name": "Review results",
      "text": "See monthly payment, amount financed, total interest and total cost, plus an amortization schedule."
    },
    {
      "@type": "HowToStep",
      "name": "Refine ownership cost",
      "text": "Optionally include insurance & maintenance to estimate total monthly ownership cost."
    }
  ]
}
</script>

  <!-- FAQPage JSON-LD -->
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Does the calculator include sales tax and fees?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. Add your local sales tax and any title, registration, or dealer fees. Choose whether fees are paid upfront or financed."
      }
    },
    {
      "@type": "Question",
      "name": "How is the monthly payment calculated?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Payments are computed using the standard amortized loan formula with rate per period r and number of periods n: Payment = P * r / (1 - (1 + r)^(-n))."
      }
    },
    {
      "@type": "Question",
      "name": "Can I factor in a trade-in and payoff?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. Enter the trade-in value and any outstanding loan payoff. The calculator applies trade-in equity (trade-in minus payoff) to reduce the amount financed."
      }
    },
    {
      "@type": "Question",
      "name": "What payment frequencies are supported?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Monthly, biweekly, and weekly. The APR is converted to a per-period rate accordingly."
      }
    },
    {
      "@type": "Question",
      "name": "Is this applicable outside the U.S.?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, but tax rules differ. Enter local tax and fee amounts directly to adapt the numbers to your location."
      }
    }
  ]
}
</script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>

<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky per spec) -->
  <header class="bg-white border-b">
    <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
      
        
<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">Let: P_f = amount financed r = APR per period (APR / periods per year) n = number of periods Payment per period: \( \text{Pay} = \dfrac{P_f \cdot r}{1 - (1 + r)^{-n}} \) Interest each period is computed on the declining balance; schedule rows follow standard amortization where interest = balance × r. Out-the-door price: \( \text{OTD} = (\text{Price} - \text{TradeAdj}) \times (1 + \text{Tax}) + \text{Fees} \) Trade adjustment: \( \text{TradeAdj} = \begin{cases} \text{TradeIn}, &amp; \text{if reduce-tax is enabled} \\ 0, &amp; \text{otherwise} \end{cases} \) Equity applied to reduce financing: \( \text{Equity} = \max(0, \text{TradeIn} - \text{Payoff}) \) Amount financed: \( P_f = \text{OTD} - \text{Down} - \text{Equity} + \mathbb{1}_{\text{financeFees}}\cdot \text{Fees} \)</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><span class="auditspine-mono">P</span> = principal (loan amount) <em>(currency)</em></li>
<li><span class="auditspine-mono">r</span> = periodic interest rate (annual rate ÷ payments per year) <em>(1)</em></li>
<li><span class="auditspine-mono">n</span> = total number of payments (years × payments per year) <em>(count)</em></li>
<li><span class="auditspine-mono">M</span> = periodic payment for principal + interest <em>(currency)</em></li>
<li><span class="auditspine-mono">T</span> = property tax (annual or monthly depending on input) <em>(currency)</em></li>
<li><span class="auditspine-mono">I</span> = homeowners insurance (annual or monthly depending on input) <em>(currency)</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>Consumer Financial Protection Bureau (CFPB) — “What is amortization and how could it affect my auto loan?” (Sept 25, 2024)</strong> — consumerfinance.gov · Accessed 2026-01-19<br><a href="https://www.consumerfinance.gov/ask-cfpb/what-is-amortization-and-how-could-it-affect-my-auto-loan-en-771/" target="_blank" rel="nofollow noopener">https://www.consumerfinance.gov/ask-cfpb/what-is-amortization-and-how-could-it-affect-my-auto-loan-en-771/</a></li>
<li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Finance</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/finance" target="_blank" rel="nofollow noopener">https://calcdomain.com/finance</a></li>
<li><strong>Loans &amp; Debt</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/finance-loans-debt" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/finance-loans-debt</a></li>
<li><strong>Amortization Schedule</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/loan-amortization" target="_blank" rel="nofollow noopener">https://calcdomain.com/loan-amortization</a></li>
<li><strong>Loan Comparison</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/loan-comparison" target="_blank" rel="nofollow noopener">https://calcdomain.com/loan-comparison</a></li>
<li><strong>APR Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/apr" target="_blank" rel="nofollow noopener">https://calcdomain.com/apr</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
      </section>

      <!-- Sidebar -->
      <aside class="w-full lg:w-1/3">
        <div class="sticky top-20 space-y-6">
          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="font-bold text-lg mb-3">Why this calculator beats others</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
              <li>Models tax on price minus trade-in (where applicable).</li>
              <li>Separates fees with “finance vs upfront” toggle.</li>
              <li>Supports monthly, biweekly, and weekly payments.</li>
              <li>Shows <em>ownership</em> cost (payment + insurance/maintenance).</li>
              <li>Accessible (WCAG 2.1 AA) with inline validation and tooltips.</li>
            </ul>
          </div>
          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="font-bold text-lg mb-3">Related tools</h3>
            <ul class="space-y-2 text-sm">
              <li><a class="text-blue-700 hover:underline" href="https://calcdomain.com/loan-amortization">Amortization Schedule</a></li>
              <li><a class="text-blue-700 hover:underline" href="https://calcdomain.com/loan-comparison">Loan Comparison</a></li>
              <li><a class="text-blue-700 hover:underline" href="https://calcdomain.com/apr">APR Calculator</a></li>
              <li>Boat Ownership Cost</li>
            </ul>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                                                                                                        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>































  <!-- Calculator Logic (defer loaded by browser due to position-before </body>) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Grab elements
      const el = (id) => document.getElementById(id);
      const E = {
        boatPrice: el('boatPrice'),
        salesTax: el('salesTax'),
        titleFees: el('titleFees'),
        dealerFees: el('dealerFees'),
        financeFees: el('financeFees'),
        applyTradeToTax: el('applyTradeToTax'),
        downPayment: el('downPayment'),
        tradeIn: el('tradeIn'),
        tradePayoff: el('tradePayoff'),
        apr: el('apr'),
        term: el('term'),
        termUnit: el('termUnit'),
        frequency: el('frequency'),
        startMonth: el('startMonth'),
        insMaint: el('insMaint'),
        // Results
        outPayment: el('outPayment'),
        outFinanced: el('outFinanced'),
        outInterest: el('outInterest'),
        outTotalCost: el('outTotalCost'),
        outOtd: el('outOtd'),
        outOwnership: el('outOwnership'),
        scheduleBody: el('scheduleBody'),
        printBtn: el('printBtn'),
        copyLinkBtn: el('copyLinkBtn'),
        resetBtn: el('resetBtn')
      };

      // Tooltips toggling
      document.querySelectorAll('button[aria-controls^="tip-"]').forEach(btn => {
        btn.addEventListener('click', () => {
          const tip = document.getElementById(btn.getAttribute('aria-controls'));
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!expanded));
          tip.setAttribute('aria-hidden', String(expanded));
        });
      });

      // Helpers
      const fmtCur = (v) => new Intl.NumberFormat(undefined, {style:'currency', currency:'USD'}).format(isFinite(v)? v : 0);
      const fmtNum = (v) => new Intl.NumberFormat().format(isFinite(v)? v : 0);
      const clamp = (v, min, max) => Math.min(Math.max(v, min), max);

      function periodsPerYear(freq){
        return (freq === 'weekly') ? 52 : (freq === 'biweekly' ? 26 : 12);
      }

      // Validation (on blur), specific messages under inputs
      const rules = {
        boatPrice: { min:0, msg:"Enter a non-negative price." },
        salesTax: { min:0, max:25, msg:"Enter a tax rate between 0 and 25%." },
        titleFees: { min:0, msg:"Fees cannot be negative." },
        dealerFees: { min:0, msg:"Fees cannot be negative." },
        downPayment: { min:0, msg:"Down payment cannot be negative." },
        tradeIn: { min:0, msg:"Trade-in cannot be negative." },
        tradePayoff: { min:0, msg:"Payoff cannot be negative." },
        apr: { min:0, max:99, required:true, msg:"APR must be between 0% and 99%." },
        term: { min:0.25, required:true, msg:"Enter a term of at least 0.25." },
        insMaint: { min:0, msg:"Monthly cost cannot be negative." }
      };

      function showErr(id, text){
        const p = document.getElementById('err-' + id);
        if(!p) return;
        if(text){
          p.textContent = text;
          p.hidden = false;
        } else {
          p.textContent = '';
          p.hidden = true;
        }
      }

      function validateField(id){
        const r = rules[id]; if(!r) return true;
        const raw = E[id].value;
        if(r.required && (raw === '' || raw === null)){
          showErr(id, "This field is required.");
          return false;
        }
        const val = parseFloat(raw);
        if(isNaN(val)){ showErr(id, "Enter a number."); return false; }
        if(r.min !== undefined && val < r.min){ showErr(id, r.msg); return false; }
        if(r.max !== undefined && val > r.max){ showErr(id, r.msg); return false; }
        showErr(id, '');
        return true;
      }

      Object.keys(rules).forEach(id => {
        const node = E[id];
        if(node) node.addEventListener('blur', () => { validateField(id); compute(); });
      });

      // Core compute
      let chart;
      function compute(){
        // Parse inputs
        const price = +E.boatPrice.value || 0;
        const taxRate = (+E.salesTax.value || 0) / 100;
        const fees = (+E.titleFees.value || 0) + (+E.dealerFees.value || 0);
        const financeFees = E.financeFees.checked;
        const tradeIn = +E.tradeIn.value || 0;
        const payoff = +E.tradePayoff.value || 0;
        const equity = Math.max(0, tradeIn - payoff);
        const reduceTax = E.applyTradeToTax.checked;
        const down = +E.downPayment.value || 0;
        const apr = (+E.apr.value || 0) / 100;
        let term = +E.term.value || 0;
        const unit = E.termUnit.value;
        const freq = E.frequency.value;
        const ppy = periodsPerYear(freq);
        if(unit === 'years') term = term * ppy; // periods
        if(unit === 'months') term = (term/12) * ppy;

        // Guard invalid
        if(price < 0 || apr < 0 || term <= 0){ renderOutputs({}); return; }

        // Out-the-door: tax on (price - trade adjust)
        const tradeAdj = reduceTax ? tradeIn : 0;
        const taxableBase = Math.max(0, price - tradeAdj);
        const tax = taxableBase * taxRate;
        const otd = price + tax + fees;

        // Amount financed: subtract down & equity; if fees financed, add them back
        let financed = otd - down - equity + (financeFees ? fees : 0);
        financed = Math.max(0, financed);

        // Payment
        const r = apr / ppy;
        const n = Math.round(term); // integer number of periods
        let pay = 0, totalInterest = 0, totalCost = 0;

        if(r === 0){
          pay = financed / n;
          totalInterest = 0;
          totalCost = financed;
        } else {
          pay = financed * r / (1 - Math.pow(1 + r, -n));
          // Build schedule to get interest precisely on declining balance
        }

        // Schedule build
        const rows = [];
        let balance = financed;
        const start = E.startMonth.value ? new Date(E.startMonth.value + '-01') : new Date();
        const daysPer = Math.round(365/ppy);

        for(let i=1;i<=n;i++){
          const interest = r === 0 ? 0 : balance * r;
          const principal = Math.min(pay - interest, balance);
          balance = Math.max(0, balance - principal);

          const d = new Date(start);
          d.setDate(d.getDate() + i*daysPer);

          rows.push({i, date:d, payment: (r===0? pay : (principal+interest)), interest, principal, balance});
        }

        if(r !== 0){
          totalInterest = rows.reduce((s, x) => s + x.interest, 0);
          totalCost = financed + totalInterest;
        }

        const ownership = pay * (freq==='monthly'?1 : (12/ppy)) + (+E.insMaint.value || 0);

        renderOutputs({
          payment: pay,
          financed, totalInterest, totalCost, otd, ownership,
          schedule: rows
        });
      }

      function renderOutputs(o){
        const nf = fmtCur;
        if(!o || !isFinite(o.payment)){
          E.outPayment.textContent = "$0.00";
          E.outFinanced.textContent = "$0.00";
          E.outInterest.textContent = "$0.00";
          E.outTotalCost.textContent = "$0.00";
          E.outOtd.textContent = "$0.00";
          E.outOwnership.textContent = "$0.00";
          E.scheduleBody.innerHTML = "";
          drawChart(0,0);
          return;
        }
        E.outPayment.textContent = nf(o.payment);
        E.outFinanced.textContent = nf(o.financed);
        E.outInterest.textContent = nf(o.totalInterest);
        E.outTotalCost.textContent = nf(o.totalCost);
        E.outOtd.textContent = nf(o.otd);
        E.outOwnership.textContent = nf(o.ownership);

        // Schedule
        const fmtDate = new Intl.DateTimeFormat(undefined, {year:'numeric', month:'short'});
        const rows = o.schedule.map(r => `
          <tr class="odd:bg-white even:bg-gray-50">
            <td class="px-4 py-2 text-left">${r.i}</td>
            <td class="px-4 py-2 text-left">${fmtDate.format(r.date)}</td>
            <td class="px-4 py-2">${fmtCur(r.payment)}</td>
            <td class="px-4 py-2">${fmtCur(r.interest)}</td>
            <td class="px-4 py-2">${fmtCur(r.principal)}</td>
            <td class="px-4 py-2">${fmtCur(r.balance)}</td>
          </tr>`).join('');
        E.scheduleBody.innerHTML = rows;

        // Chart
        drawChart(o.totalCost - o.totalInterest, o.totalInterest);
      }

      function drawChart(principal, interest){
        const ctx = document.getElementById('resultsChart');
        if(!ctx) return;
        const data = {
          labels: ['Principal', 'Interest'],
          datasets: [{ data: [Math.max(0, principal), Math.max(0, interest)] }]
        };
        if(window.Chart){
          if(!chart){
            chart = new Chart(ctx, {
              type: 'doughnut',
              data,
              options: { plugins:{ legend:{ position:'bottom' } }, responsive:true, maintainAspectRatio:false }
            });
          } else {
            chart.data = data; chart.update();
          }
        }
      }

      // Bind inputs
      [
        'boatPrice','salesTax','titleFees','dealerFees','financeFees','applyTradeToTax',
        'downPayment','tradeIn','tradePayoff','apr','term','termUnit','frequency','startMonth','insMaint'
      ].forEach(id => {
        const n = E[id];
        if(!n) return;
        const evt = (n.type === 'checkbox' || n.tagName === 'SELECT') ? 'change' : 'input';
        n.addEventListener(evt, compute);
      });

      // Buttons
      if(E.printBtn) E.printBtn.addEventListener('click', () => window.print());
      if(E.copyLinkBtn) E.copyLinkBtn.addEventListener('click', () => {
        const params = new URLSearchParams({
          price:E.boatPrice.value, tax:E.salesTax.value, tf:E.titleFees.value, df:E.dealerFees.value,
          ff:E.financeFees.checked?1:0, dp:E.downPayment.value, ti:E.tradeIn.value, tp:E.tradePayoff.value,
          r:E.apr.value, t:E.term.value, tu:E.termUnit.value, fq:E.frequency.value, im:E.insMaint.value,
          rt:E.applyTradeToTax.checked?1:0, sm:E.startMonth.value
        });
        const url = `${location.origin}${location.pathname}?${params.toString()}`;
        navigator.clipboard.writeText(url).then(()=> {
          E.copyLinkBtn.textContent = 'Link copied!'; setTimeout(()=>E.copyLinkBtn.textContent='Copy shareable link', 1600);
        });
      });
      if(E.resetBtn) E.resetBtn.addEventListener('click', () => {
        E.boatPrice.value = 45000; E.salesTax.value=7.0; E.titleFees.value=300; E.dealerFees.value=500;
        E.financeFees.checked=true; E.downPayment.value=5000; E.tradeIn.value=0; E.tradePayoff.value=0;
        E.apr.value=7.49; E.term.value=10; E.termUnit.value='years'; E.frequency.value='monthly';
        E.applyTradeToTax.checked=true; E.startMonth.value=''; E.insMaint.value=120;
        document.querySelectorAll('[id^="err-"]').forEach(p=>{p.hidden=true; p.textContent='';});
        compute();
      });

      // URL state hydrate
      (function hydrateFromQuery(){
        const q = new URLSearchParams(location.search);
        const map = {
          price:'boatPrice', tax:'salesTax', tf:'titleFees', df:'dealerFees', ff:'financeFees',
          dp:'downPayment', ti:'tradeIn', tp:'tradePayoff', r:'apr', t:'term', tu:'termUnit',
          fq:'frequency', im:'insMaint', rt:'applyTradeToTax', sm:'startMonth'
        };
        Object.entries(map).forEach(([k,id])=>{
          if(!q.has(k)) return;
          if(id==='financeFees' || id==='applyTradeToTax'){ E[id].checked = q.get(k) === '1'; }
          else { E[id].value = q.get(k); }
        });
      })();

      // Initial compute
      compute();
    });
  </script>


</body></html>
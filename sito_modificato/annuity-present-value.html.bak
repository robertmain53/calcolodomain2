<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/annuity-present-value" />
    <title>Annuity Present Value Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Annuity Present Value Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Annuity Present Value Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Annuity Present Value Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/annuity-present-value" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Annuity Present Value Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Annuity Present Value Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Annuity Present Value Calculator – PV of Ordinary & Due Annuities",
        "description": "Use this annuity present value calculator to find the PV of ordinary annuities and annuities due. Supports monthly, quarterly, annual payments, growing annuities, and custom schedules.",
        "url": "https://calcdomain.com/annuity-present-value",
        "breadcrumb": {
          "@type": "BreadcrumbList",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Finance",
              "item": "https://calcdomain.com/categories/finance"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "Finance",
              "item": "https://calcdomain.com/finance"
            },
            {
              "@type": "ListItem",
              "position": 3,
              "name": "Annuity Present Value"
            }
          ]
        },
        "mainEntity": {
          "@type": "HowTo",
          "name": "How to calculate the present value of an annuity",
          "description": "Step-by-step method to compute the present value of an ordinary annuity or annuity due using the discount rate, number of periods, and payment amount.",
          "step": [
            {
              "@type": "HowToStep",
              "name": "Choose annuity type and timing",
              "text": "Decide whether your annuity is an ordinary annuity (payments at the end of each period) or an annuity due (payments at the beginning of each period). Select the payment frequency, such as monthly, quarterly, or annually."
            },
            {
              "@type": "HowToStep",
              "name": "Enter payment amount and number of periods",
              "text": "Enter the fixed payment amount per period and the total number of periods. For example, $1,000 per year for 20 years means 20 periods."
            },
            {
              "@type": "HowToStep",
              "name": "Enter discount rate",
              "text": "Enter the nominal annual discount rate that reflects your required rate of return or opportunity cost. The calculator will convert it to a per-period rate based on the payment frequency."
            },
            {
              "@type": "HowToStep",
              "name": "Compute present value",
              "text": "Click Calculate. The calculator applies the present value of annuity formula to discount each payment back to today and sums them, giving you the present value of the annuity."
            }
          ]
        },
        "faq": [
          {
            "@type": "Question",
            "name": "What is the present value of an annuity?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "The present value of an annuity is the lump sum today that is financially equivalent to a series of future periodic paymeh in today\u2019s money?"
            }
          },
          {
            "@type": "Question",
            "name": "What is the difference between an ordinary annuity and an annuity due?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "In an ordinary annuity, payments occur at the end of each period (e.g., most bonds and traditional loans). In an annuity due, payments occur at the beginning of each period (e.g., rent, some leases). Annuities due are worth more in present value terms because you receive each payment one period earlier."
            }
          },
          {
            "@type": "Question",
            "name": "How do you calculate the present value of an ordinary annuity?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "For an ordinary annuity with payment PMT, per-period discount rate r, and n periods, the present value is PV = PMT \u00d7 [1 - (1 + r)^(-n)] / r. The calculator applies this formula automatically after converting the annual rate to a per-period rate."
            }
          },
          {
            "@type": "Question",
            "name": "How do you calculate the present value of an annuity due?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "For an annuity due, you first compute the present value as if it were an ordinary annuity, then multiply by (1 + r): PV_annuity_due = PV_ordinary \u00d7 (1 + r). This reflects that each payment is received one period earlier."
            }
          },
          {
            "@type": "Question",
            "name": "What discount rate should I use for annuity present value?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Use a rate that reflects your opportunity cost of capital or required rate of return for investments with similar risk. For safe cash flows, you might use a government bond yield; for riskier cash flows, you might use a higher rate."
            }
          }
        ]
      }</script>
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "International Personal Finance", "item": "https://calcdomain.com/subcategories/finance-international-personal"}, {"@type": "ListItem", "position": 4, "name": "Annuity Present Value Calculator", "item": "https://calcdomain.com/annuity-present-value"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/finance-international-personal" class="text-blue-600 hover:underline">International Personal Finance</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Annuity Present Value Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Annuity Present Value Calculator
              </h1>
              <p class="text-gray-600">
                Compute the present value of ordinary annuities, annuities due,
                and growing annuities with flexible payment frequencies and an
                optional custom cash flow schedule.
              </p>
            </header>

            <section aria-labelledby="calculator-heading" class="mb-8">
              <h2 id="calculator-heading" class="text-xl font-semibold mb-4">
                Calculator
              </h2>

              <div class="space-y-4">
                <div class="flex flex-wrap gap-2">
                  <button
                    type="button"
                    data-mode="standard"
                    class="mode-btn px-3 py-1.5 rounded-full text-sm font-medium border border-blue-600 text-blue-600 bg-blue-50"
                  >
                    Level annuity
                  </button>
                  <button
                    type="button"
                    data-mode="growing"
                    class="mode-btn px-3 py-1.5 rounded-full text-sm font-medium border border-gray-300 text-gray-700 bg-white"
                  >
                    Growing annuity
                  </button>
                  <button
                    type="button"
                    data-mode="custom"
                    class="mode-btn px-3 py-1.5 rounded-full text-sm font-medium border border-gray-300 text-gray-700 bg-white"
                  >
                    Custom cash flows
                  </button>
                </div>

                <!-- Standard / Growing inputs -->
                <div id="standard-growing-section" class="space-y-4">
                  <div class="input-grid">
                    <div>
                      <label
                        for="payment-amount"
                        class="block text-sm font-medium text-gray-700"
                        >Payment amount</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <span
                          class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                          >$</span
                        >
                        <input
                          type="number"
                          id="payment-amount"
                          class="flex-1 min-w-0 block w-full rounded-r-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                          placeholder="e.g. 1000"
                          step="0.01"
                        />
                      </div>
                    </div>
                    <div>
                      <label
                        for="payment-frequency"
                        class="block text-sm font-medium text-gray-700"
                        >Payment frequency</label
                      >
                      <select
                        id="payment-frequency"
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"
                      >
                        <option value="12">Monthly</option>
                        <option value="4">Quarterly</option>
                        <option value="2">Semi-annually</option>
                        <option value="1" selected>Annually</option>
                      </select>
                    </div>
                  </div>

                  <div class="input-grid">
                    <div>
                      <label
                        for="years"
                        class="block text-sm font-medium text-gray-700"
                        >Number of years</label
                      >
                      <input
                        type="number"
                        id="years"
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"
                        placeholder="e.g. 20"
                        step="0.1"
                      />
                    </div>
                    <div>
                      <label
                        for="annual-rate"
                        class="block text-sm font-medium text-gray-700"
                        >Annual discount rate</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <input
                          type="number"
                          id="annual-rate"
                          class="flex-1 min-w-0 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                          placeholder="e.g. 6"
                          step="0.01"
                        />
                        <span
                          class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                          >%</span
                        >
                      </div>
                    </div>
                  </div>

                  <div class="input-grid">
                    <div>
                      <label
                        for="annuity-type"
                        class="block text-sm font-medium text-gray-700"
                        >Annuity type</label
                      >
                      <select
                        id="annuity-type"
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"
                      >
                        <option value="ordinary" selected>
                          Ordinary annuity (payments at end of period)
                        </option>
                        <option value="due">
                          Annuity due (payments at beginning of period)
                        </option>
                      </select>
                    </div>
                    <div id="growing-rate-wrapper" class="hidden">
                      <label
                        for="growth-rate"
                        class="block text-sm font-medium text-gray-700"
                        >Payment growth rate</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <input
                          type="number"
                          id="growth-rate"
                          class="flex-1 min-w-0 block w-full rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                          placeholder="e.g. 2"
                          step="0.01"
                        />
                        <span
                          class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                          >%</span
                        >
                      </div>
                      <p class="mt-1 text-xs text-gray-500">
                        Optional. For growing annuities, payments increase by
                        this rate each period.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Custom cash flow section -->
                <div id="custom-section" class="space-y-3 hidden">
                  <p class="text-sm text-gray-700">
                    Enter individual cash flows and their timing. Useful for
                    uneven annuities or irregular payment schedules.
                  </p>
                  <div
                    class="flex flex-wrap gap-2 items-center text-xs text-gray-600"
                  >
                    <span>Discount rate:</span>
                    <div class="flex items-center">
                      <input
                        type="number"
                        id="custom-annual-rate"
                        class="w-24 rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-xs"
                        placeholder="e.g. 6"
                        step="0.01"
                      />
                      <span class="ml-1">%</span>
                    </div>
                    <span class="ml-3">Time unit:</span>
                    <select
                      id="custom-time-unit"
                      class="rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-xs"
                    >
                      <option value="years" selected>Years</option>
                      <option value="months">Months</option>
                    </select>
                  </div>
                  <div
                    class="scroll-shadow overflow-x-auto border border-gray-200 rounded-md"
                  >
                    <table
                      class="min-w-full text-xs results-table"
                      id="cashflow-table"
                    >
                      <thead class="bg-gray-50">
                        <tr>
                          <th class="text-left font-semibold text-gray-700">
                            #
                          </th>
                          <th class="text-left font-semibold text-gray-700">
                            Time
                          </th>
                          <th class="text-left font-semibold text-gray-700">
                            Amount
                          </th>
                          <th class="text-left font-semibold text-gray-700">
                            Actions
                          </th>
                        </tr>
                      </thead>
                      <tbody id="cashflow-tbody">
                        <!-- rows injected by JS -->
                      </tbody>
                    </table>
                  </div>
                  <button
                    type="button"
                    id="add-cashflow-row"
                    class="mt-2 inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50"
                  >
                    + Add cash flow
                  </button>
                </div>

                <div class="flex flex-wrap items-center gap-3 pt-2">
                  <button
                    id="calculate-btn"
                    type="button"
                    class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-semibold rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500"
                  >
                    Calculate present value
                  </button>
                  <button
                    id="reset-btn"
                    type="button"
                    class="inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
                  >
                    Reset
                  </button>
                  <p id="error-message" class="text-sm text-red-600"></p>
                </div>
              </div>
            </section>

            <section aria-labelledby="results-heading" class="mb-8">
              <h2 id="results-heading" class="text-xl font-semibold mb-3">
                Results
              </h2>
              <div
                id="results-card"
                class="border border-gray-200 rounded-lg p-4 bg-gray-50 hidden"
              >
                <div
                  class="flex flex-wrap justify-between items-center gap-4 mb-3"
                >
                  <div>
                    <p class="text-xs uppercase tracking-wide text-gray-500">
                      Present value
                    </p>
                    <p id="pv-output" class="text-2xl font-bold text-blue-700">
                      $0.00
                    </p>
                  </div>
                  <div>
                    <p class="text-xs uppercase tracking-wide text-gray-500">
                      Total undiscounted payments
                    </p>
                    <p
                      id="total-payments-output"
                      class="text-sm font-semibold text-gray-800"
                    >
                      $0.00
                    </p>
                  </div>
                  <div>
                    <p class="text-xs uppercase tracking-wide text-gray-500">
                      Effective discount rate per period
                    </p>
                    <p
                      id="period-rate-output"
                      class="text-sm font-semibold text-gray-800"
                    >
                      0.00%
                    </p>
                  </div>
                </div>
                <div id="summary-text" class="text-sm text-gray-700 mb-3"></div>
                <details class="mt-2">
                  <summary
                    class="text-sm font-medium text-blue-700 cursor-pointer"
                  >
                    Show discounted cash flow table
                  </summary>
                  <div
                    class="mt-2 scroll-shadow overflow-x-auto border border-gray-200 rounded-md bg-white"
                  >
                    <table
                      class="min-w-full text-xs results-table"
                      id="dcf-table"
                    >
                      <thead class="bg-gray-50">
                        <tr>
                          <th class="text-left font-semibold text-gray-700">
                            Period
                          </th>
                          <th class="text-right font-semibold text-gray-700">
                            Payment
                          </th>
                          <th class="text-right font-semibold text-gray-700">
                            Discount factor
                          </th>
                          <th class="text-right font-semibold text-gray-700">
                            Present value
                          </th>
                        </tr>
                      </thead>
                      <tbody id="dcf-tbody">
                        <!-- rows injected by JS -->
                      </tbody>
                    </table>
                  </div>
                </details>
              </div>
              <p id="no-results-text" class="text-sm text-gray-500">
                Enter your inputs above and click “Calculate present value” to
                see results.
              </p>
            </section>

            <section class="prose">
              <h2>Present value of an annuity: definition</h2>
              <p>
                The <strong>present value of an annuity</strong> is the lump sum
                today that is financially equivalent to a series of future
                periodic payments, given a specific discount rate. It answers
                the question:
              </p>
              <p class="italic">
                “If I could invest money at
                <span class="not-italic">r%</span> per year, how much would I
                need today to replicate this stream of payments?”
              </p>

              <h2>Formulas for annuity present value</h2>

              <h3>1. Ordinary annuity (payments at end of period)</h3>
              <div class="formula-box">
                <p class="mb-1 font-mono text-sm">
                  \( PV_{\text{ordinary}} = PMT \times \dfrac{1 - (1 +
                  r)^{-n}}{r} \)
                </p>
                <ul class="text-sm">
                  <li><strong>PMT</strong> = payment per period</li>
                  <li><strong>r</strong> = discount rate per period</li>
                  <li><strong>n</strong> = number of periods</li>
                </ul>
              </div>

              <h3>2. Annuity due (payments at beginning of period)</h3>
              <p>
                Each payment arrives one period earlier, so the present value is
                higher:
              </p>
              <div class="formula-box">
                <p class="mb-1 font-mono text-sm">
                  \( PV_{\text{due}} = PV_{\text{ordinary}} \times (1 + r) \)
                </p>
                <p class="font-mono text-sm">
                  \( PV_{\text{due}} = PMT \times \dfrac{1 - (1 + r)^{-n}}{r}
                  \times (1 + r) \)
                </p>
              </div>

              <h3>3. Growing annuity (payments grow at rate g)</h3>
              <p>
                For a growing annuity where the first payment is
                <strong>PMT</strong> and each subsequent payment grows at rate
                <strong>g</strong> per period:
              </p>
              <div class="formula-box">
                <p class="mb-1 font-mono text-sm">
                  \( PV_{\text{growing}} = PMT \times \dfrac{1 -
                  \left(\dfrac{1+g}{1+r}\right)^n}{r - g} \quad \text{for } r
                  \neq g \)
                </p>
              </div>
              <p class="text-sm text-gray-600">
                Note: if <strong>r</strong> is very close to <strong>g</strong>,
                the formula becomes numerically unstable. The calculator
                automatically switches to a term‑by‑term discounting method in
                that case.
              </p>

              <h2>How this calculator works</h2>
              <ol>
                <li>
                  <strong>Converts the annual discount rate</strong> into a
                  per‑period rate based on your payment frequency (monthly,
                  quarterly, etc.).
                </li>
                <li>
                  <strong>Computes the number of periods</strong> as years ×
                  payments per year.
                </li>
                <li>
                  <strong>Applies the appropriate formula</strong>:
                  <ul>
                    <li>Ordinary or due annuity: closed‑form formula above.</li>
                    <li>
                      Growing annuity: growing annuity formula or term‑by‑term
                      discounting.
                    </li>
                    <li>
                      Custom cash flows: discounts each cash flow individually
                      and sums the present values.
                    </li>
                  </ul>
                </li>
                <li>
                  <strong>Builds a discounted cash flow (DCF) table</strong> so
                  you can see the present value contribution of each payment.
                </li>
              </ol>

              <h2>Example: valuing a retirement income stream</h2>
              <p>
                Suppose you are offered an annuity that pays
                <strong>$1,000 per month</strong> for <strong>20 years</strong>,
                with the first payment one month from now. Your required return
                is <strong>6% per year</strong>, compounded monthly.
              </p>
              <ul>
                <li>Payment frequency = 12 (monthly)</li>
                <li>Years = 20 → <strong>n = 240</strong> periods</li>
                <li>
                  Annual rate = 6% → <strong>r = 0.06 / 12 = 0.5%</strong> per
                  month
                </li>
              </ul>
              <p>Using the ordinary annuity formula:</p>
              <div class="formula-box">
                <p class="font-mono text-sm">
                  \( PV = 1000 \times \dfrac{1 - (1 + 0.005)^{-240}}{0.005}
                  \approx \$139{,}600 \)
                </p>
              </div>
              <p>
                So a fair price for this annuity, at a 6% required return, is
                about <strong>$140k</strong>. If the seller asks much more than
                this, you’d be overpaying relative to your target return.
              </p>

              <h2>Common use cases</h2>
              <ul>
                <li>
                  <strong>Comparing lump sum vs. annuity offers</strong> (e.g.,
                  lottery winnings, legal settlements, structured notes).
                </li>
                <li>
                  <strong>Evaluating retirement income products</strong> such as
                  immediate annuities or pension buyouts.
                </li>
                <li>
                  <strong>Valuing level payment loans</strong> from the lender’s
                  perspective (loan payments are an annuity).
                </li>
                <li>
                  <strong>Project and lease valuation</strong> where cash flows
                  are regular and fixed or grow at a constant rate.
                </li>
              </ul>

              <h2>FAQ</h2>

              <h3>What is the present value of an annuity?</h3>
              <p>
                It is the amount of money you would need today, invested at the
                discount rate, to exactly replicate the future stream of annuity
                payments. It incorporates both the time value of money and the
                timing of each payment.
              </p>

              <h3>Which annuity type should I choose?</h3>
              <ul>
                <li>
                  <strong>Ordinary annuity</strong>: most bonds, traditional
                  loans, many pensions (payments at period end).
                </li>
                <li>
                  <strong>Annuity due</strong>: rent, leases, some insurance and
                  retirement products (payments at period start).
                </li>
              </ul>

              <h3>Can the present value be higher than the sum of payments?</h3>
              <p>
                No. With a positive discount rate, the present value is always
                <strong>less</strong> than the sum of undiscounted payments,
                because future cash is worth less than cash today. If you use a
                zero or negative discount rate, the PV can equal or exceed the
                sum of payments, but that usually implies unusual economic
                assumptions.
              </p>

              <h3>
                How accurate is this calculator compared with spreadsheets or
                financial calculators?
              </h3>
              <p>
                The formulas used here are the same as those in Excel/Google
                Sheets functions like <code>PV</code>, <code>NPV</code>, and
                <code>PV</code> for growing annuities. Minor differences may
                arise from rounding and how the discount rate is converted to a
                per‑period rate, but results should match to within a few cents
                for typical inputs.
              </p>

              <h3>What if my payments are irregular?</h3>
              <p>
                Use the <strong>Custom cash flows</strong> mode. Enter each cash
                flow with its timing, and the tool will discount each one
                individually. This is equivalent to a full discounted cash flow
                (DCF) valuation.
              </p>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Annuity, Present, Value.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">More in Finance</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/annuity"
                  class="text-blue-600 hover:underline"
                  >Annuity Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/future-value-of-annuity"
                  class="text-blue-600 hover:underline"
                  >Future Value of Annuity (if available)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/present-value"
                  class="text-blue-600 hover:underline"
                  >Present Value (if available)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/npv"
                  class="text-blue-600 hover:underline"
                  >NPV (Net Present Value)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/future-value"
                  class="text-blue-600 hover:underline"
                  >Future Value</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/compound-interest-calculator"
                  class="text-blue-600 hover:underline"
                  >Compound Interest</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/roi"
                  class="text-blue-600 hover:underline"
                  >Investment Return (ROI)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-amortization"
                  class="text-blue-600 hover:underline"
                  >Loan Amortization Schedule</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-blue-600 hover:underline"
                  >Mortgage Payment</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/retirement"
                  class="text-blue-600 hover:underline"
                  >Retirement Calculator</a
                >
              </li>
            </ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">Finance categories</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/finance-investing-and-growth"
                  class="text-blue-600 hover:underline"
                  >Investing &amp; compound growth</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-loans-and-debt"
                  class="text-blue-600 hover:underline"
                  >Loans &amp; debt</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-mortgages-and-home"
                  class="text-blue-600 hover:underline"
                  >Mortgages &amp; home financing</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-retirement-and-pensions"
                  class="text-blue-600 hover:underline"
                  >Retirement &amp; pensions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-business-ratios-and-valuation"
                  class="text-blue-600 hover:underline"
                  >Business ratios &amp; valuation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/finance-income-and-payroll"
                  class="text-blue-600 hover:underline"
                  >Income, payroll &amp; cost of living</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      (function () {
        const modeButtons = document.querySelectorAll(".mode-btn");
        const standardGrowingSection = document.getElementById(
          "standard-growing-section"
        );
        const customSection = document.getElementById("custom-section");
        const growingRateWrapper = document.getElementById(
          "growing-rate-wrapper"
        );
        const calculateBtn = document.getElementById("calculate-btn");
        const resetBtn = document.getElementById("reset-btn");
        const errorMessage = document.getElementById("error-message");
        const resultsCard = document.getElementById("results-card");
        const noResultsText = document.getElementById("no-results-text");
        const pvOutput = document.getElementById("pv-output");
        const totalPaymentsOutput = document.getElementById(
          "total-payments-output"
        );
        const periodRateOutput = document.getElementById("period-rate-output");
        const summaryText = document.getElementById("summary-text");
        const dcfTbody = document.getElementById("dcf-tbody");

        const paymentAmountEl = document.getElementById("payment-amount");
        const paymentFrequencyEl = document.getElementById("payment-frequency");
        const yearsEl = document.getElementById("years");
        const annualRateEl = document.getElementById("annual-rate");
        const annuityTypeEl = document.getElementById("annuity-type");
        const growthRateEl = document.getElementById("growth-rate");

        const customAnnualRateEl =
          document.getElementById("custom-annual-rate");
        const customTimeUnitEl = document.getElementById("custom-time-unit");
        const cashflowTbody = document.getElementById("cashflow-tbody");
        const addCashflowRowBtn = document.getElementById("add-cashflow-row");

        let currentMode = "standard";

        function setMode(mode) {
          currentMode = mode;
          modeButtons.forEach((btn) => {
            const isActive = btn.dataset.mode === mode;
            btn.classList.toggle("border-blue-600", isActive);
            btn.classList.toggle("text-blue-600", isActive);
            btn.classList.toggle("bg-blue-50", isActive);
            btn.classList.toggle("border-gray-300", !isActive);
            btn.classList.toggle("text-gray-700", !isActive);
            btn.classList.toggle("bg-white", !isActive);
          });

          if (mode === "custom") {
            standardGrowingSection.classList.add("hidden");
            customSection.classList.remove("hidden");
          } else {
            standardGrowingSection.classList.remove("hidden");
            customSection.classList.add("hidden");
            growingRateWrapper.classList.toggle("hidden", mode !== "growing");
          }

          clearResults();
          errorMessage.textContent = "";
        }

        modeButtons.forEach((btn) => {
          btn.addEventListener("click", () => setMode(btn.dataset.mode));
        });

        function addCashflowRow(time = "", amount = "") {
          const rowIndex = cashflowTbody.children.length + 1;
          const tr = document.createElement("tr");
          tr.innerHTML = `
        <td class="text-gray-600">${rowIndex}</td>
        <td><input type="number" class="cf-time w-24 rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-xs" step="0.01" value="${time}"></td>
        <td><input type="number" class="cf-amount w-28 rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-xs" step="0.01" value="${amount}"></td>
        <td><button type="button" class="remove-row text-xs text-red-600 hover:underline">Remove</button></td>
      `;
          cashflowTbody.appendChild(tr);
          updateCashflowRowNumbers();
        }

        function updateCashflowRowNumbers() {
          Array.from(cashflowTbody.children).forEach((tr, idx) => {
            const firstCell = tr.querySelector("td");
            if (firstCell) firstCell.textContent = idx + 1;
          });
        }

        cashflowTbody.addEventListener("click", (e) => {
          if (e.target.classList.contains("remove-row")) {
            const tr = e.target.closest("tr");
            if (tr) {
              cashflowTbody.removeChild(tr);
              updateCashflowRowNumbers();
            }
          }
        });

        addCashflowRowBtn.addEventListener("click", () => addCashflowRow());

        function formatCurrency(value) {
          if (!isFinite(value)) return "—";
          return value.toLocaleString(undefined, {
            style: "currency",
            currency: "USD",
            maximumFractionDigits: 2,
          });
        }

        function formatPercent(value) {
          if (!isFinite(value)) return "—";
          return (value * 100).toFixed(3).replace(/\.?0+$/, "") + "%";
        }

        function clearResults() {
          resultsCard.classList.add("hidden");
          noResultsText.classList.remove("hidden");
          dcfTbody.innerHTML = "";
        }

        function calculateStandardOrGrowing() {
          const PMT = parseFloat(paymentAmountEl.value);
          const years = parseFloat(yearsEl.value);
          const annualRate = parseFloat(annualRateEl.value) / 100;
          const m = parseInt(paymentFrequencyEl.value, 10);
          const type = annuityTypeEl.value;
          const gAnnual =
            currentMode === "growing" && growthRateEl.value !== ""
              ? parseFloat(growthRateEl.value) / 100
              : 0;

          if (!(PMT > 0) || !(years > 0) || !(annualRate >= 0) || !(m > 0)) {
            throw new Error(
              "Please enter a positive payment, years, and discount rate."
            );
          }
          if (
            currentMode === "growing" &&
            gAnnual !== 0 &&
            gAnnual >= annualRate
          ) {
            throw new Error(
              "For growing annuities, the growth rate should be less than the discount rate."
            );
          }

          const n = Math.round(years * m);
          const r = annualRate / m;
          const g = gAnnual / m;

          let PV = 0;
          let totalPayments = 0;
          const rows = [];

          if (currentMode === "standard" && r > 0) {
            const factor = (1 - Math.pow(1 + r, -n)) / r;
            let pvOrdinary = PMT * factor;
            if (type === "due") {
              pvOrdinary *= 1 + r;
            }
            PV = pvOrdinary;
            totalPayments = PMT * n;

            for (let t = 1; t <= n; t++) {
              const periodIndex = type === "due" ? t - 1 : t;
              const df = Math.pow(1 + r, -periodIndex);
              const pvPayment = PMT * df;
              rows.push({ period: t, payment: PMT, df, pv: pvPayment });
            }
          } else {
            // handle zero rate or growing annuity via term-by-term
            for (let t = 1; t <= n; t++) {
              const k = t - 1;
              const payment =
                currentMode === "growing" ? PMT * Math.pow(1 + g, k) : PMT;
              const periodIndex = type === "due" ? k : t;
              const df = r === 0 ? 1 : Math.pow(1 + r, -periodIndex);
              const pvPayment = payment * df;
              PV += pvPayment;
              totalPayments += payment;
              rows.push({ period: t, payment, df, pv: pvPayment });
            }
          }

          return {
            PV,
            totalPayments,
            periodRate: r,
            rows,
            meta: {
              PMT,
              years,
              annualRate,
              m,
              type,
              mode: currentMode,
              gAnnual,
            },
          };
        }

        function calculateCustom() {
          const annualRate = parseFloat(customAnnualRateEl.value) / 100;
          if (!(annualRate >= 0)) {
            throw new Error("Please enter a valid annual discount rate.");
          }
          const timeUnit = customTimeUnitEl.value;
          const rowsData = [];
          let PV = 0;
          let totalPayments = 0;

          const trs = Array.from(cashflowTbody.querySelectorAll("tr"));
          if (trs.length === 0) {
            throw new Error("Add at least one cash flow row.");
          }

          trs.forEach((tr, idx) => {
            const timeEl = tr.querySelector(".cf-time");
            const amountEl = tr.querySelector(".cf-amount");
            const time = parseFloat(timeEl.value);
            const amount = parseFloat(amountEl.value);
            if (!(amount !== 0) || !(time >= 0)) {
              return;
            }
            const tYears = timeUnit === "months" ? time / 12 : time;
            const df = annualRate === 0 ? 1 : Math.pow(1 + annualRate, -tYears);
            const pvPayment = amount * df;
            PV += pvPayment;
            totalPayments += amount;
            rowsData.push({
              period: idx + 1,
              payment: amount,
              df,
              pv: pvPayment,
              timeDisplay: time + " " + timeUnit,
            });
          });

          if (rowsData.length === 0) {
            throw new Error(
              "Please enter at least one valid cash flow (time and amount)."
            );
          }

          return {
            PV,
            totalPayments,
            periodRate: annualRate,
            rows: rowsData,
            meta: {
              annualRate,
              timeUnit,
              mode: "custom",
            },
          };
        }

        function renderResults(result) {
          resultsCard.classList.remove("hidden");
          noResultsText.classList.add("hidden");

          pvOutput.textContent = formatCurrency(result.PV);
          totalPaymentsOutput.textContent = formatCurrency(
            result.totalPayments
          );
          periodRateOutput.textContent = formatPercent(result.periodRate);

          dcfTbody.innerHTML = "";
          result.rows.forEach((row) => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
          <td class="text-gray-700">${row.timeDisplay || row.period}</td>
          <td class="text-right">${formatCurrency(row.payment)}</td>
          <td class="text-right">${row.df.toFixed(6)}</td>
          <td class="text-right">${formatCurrency(row.pv)}</td>
        `;
            dcfTbody.appendChild(tr);
          });

          if (result.meta.mode === "custom") {
            summaryText.textContent =
              `You entered ${result.rows.length} custom cash flows. ` +
              `Discounted at ${formatPercent(
                result.meta.annualRate
              )}, their combined present value is ` +
              `${formatCurrency(result.PV)}.`;
          } else {
            const { PMT, years, annualRate, m, type, mode, gAnnual } =
              result.meta;
            const freqLabel =
              m === 12
                ? "monthly"
                : m === 4
                ? "quarterly"
                : m === 2
                ? "semi-annual"
                : "annual";
            const typeLabel =
              type === "due"
                ? "annuity due (payments at the beginning of each period)"
                : "ordinary annuity (payments at the end of each period)";
            const modeLabel =
              mode === "growing" ? "growing annuity" : "level annuity";

            let extra = "";
            if (mode === "growing" && gAnnual) {
              extra = ` Payments grow at ${formatPercent(gAnnual)} per year.`;
            }

            summaryText.textContent =
              `A ${modeLabel} paying ${formatCurrency(
                PMT
              )} ${freqLabel} for about ${years.toFixed(2)} years ` +
              `at an annual discount rate of ${formatPercent(
                annualRate
              )} (${typeLabel}) ` +
              `has a present value of ${formatCurrency(
                result.PV
              )}. Total undiscounted payments are ` +
              `${formatCurrency(result.totalPayments)}.${extra}`;
          }
        }

        calculateBtn.addEventListener("click", () => {
          errorMessage.textContent = "";
          try {
            let result;
            if (currentMode === "custom") {
              result = calculateCustom();
            } else {
              result = calculateStandardOrGrowing();
            }
            renderResults(result);
          } catch (err) {
            clearResults();
            errorMessage.textContent =
              err.message || "An error occurred. Please check your inputs.";
          }
        });

        resetBtn.addEventListener("click", () => {
          paymentAmountEl.value = "";
          paymentFrequencyEl.value = "1";
          yearsEl.value = "";
          annualRateEl.value = "";
          annuityTypeEl.value = "ordinary";
          growthRateEl.value = "";
          customAnnualRateEl.value = "";
          customTimeUnitEl.value = "years";
          cashflowTbody.innerHTML = "";
          addCashflowRow();
          setMode("standard");
          clearResults();
          errorMessage.textContent = "";
        });

        // Initialize defaults
        paymentFrequencyEl.value = "12";
        yearsEl.value = "20";
        annualRateEl.value = "6";
        paymentAmountEl.value = "1000";
        addCashflowRow(0, 1000);
      })();
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="canonical" href="https://calcdomain.com/bridge-load-rating">
    <title>Bridge Load Rating Calculator (2026 Guide) | CalcDomain</title>
    <meta name="description" content="Evaluate bridge load capacity with our calculator using span length, load distribution, and safety factors based on AASHTO guidance.">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Bridge Load Rating Calculator (2026 Guide) | CalcDomain">
    <meta property="og:description" content="Evaluate bridge load capacity with our calculator using span length, load distribution, and safety factors based on AASHTO guidance.">
    <meta property="og:url" content="https://calcdomain.com/bridge-load-rating">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Bridge Load Rating Calculator (2026 Guide) | CalcDomain">
    <meta name="twitter:description" content="Evaluate bridge load capacity with our calculator using span length, load distribution, and safety factors based on AASHTO guidance.">

    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif; background: #f8fafc; color: #0f172a; }
        .container { max-width: 1200px; margin-left: auto; margin-right: auto; }
        .nav { display: flex; justify-content: space-between; align-items: center; }
        .card { background: white; border: 1px solid #e5e7eb; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 20px 45px rgba(15, 23, 42, 0.06); }
        .calc-hero { display: grid; gap: 1.5rem; }
        @media (min-width: 1024px) { .calc-hero { grid-template-columns: minmax(0, 1fr) minmax(0, 0.85fr); align-items: start; } }
        .sticky-box { position: sticky; top: 1rem; }
        .calc-input { width: 100%; padding: 0.6rem 0.85rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 0.95rem; }
        .calc-input:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2); }
        .calc-label { display: block; font-size: 0.85rem; font-weight: 600; color: #475569; margin-bottom: 0.4rem; }
        .result-box { background: linear-gradient(135deg, #ecfdf5 0%, #e0f2fe 100%); border: 1px solid #bae6fd; border-radius: 1rem; padding: 1.5rem; text-align: center; }
        .result-value { font-size: 2.5rem; font-weight: 800; color: #0f172a; }
        .kpi-row { display: flex; justify-content: space-between; padding: 0.65rem 0; border-bottom: 1px solid #e5e7eb; font-size: 0.95rem; }
        .kpi-row:last-child { border-bottom: none; }
        .kpi-label { color: #64748b; }
        .kpi-value { font-weight: 700; color: #111827; }
        .btn { border-radius: 0.625rem; padding: 0.75rem 1rem; font-weight: 700; border: none; cursor: pointer; }
        .btn-primary { background: #2563eb; color: white; transition: background 0.2s ease; }
        .btn-primary:hover { background: #1d4ed8; }
        .btn-secondary { background: white; border: 1px solid #d1d5db; color: #1f2937; }
        .btn-secondary:hover { background: #f9fafb; }
        .alert { display: none; background: #fef2f2; border-left: 4px solid #f87171; padding: 0.75rem 1rem; border-radius: 0.5rem; color: #991b1b; font-size: 0.9rem; margin-top: 0.75rem; }
        .alert strong { font-weight: 700; }
        .schedule-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        .schedule-table th, .schedule-table td { padding: 0.75rem; border-bottom: 1px solid #e5e7eb; text-align: left; }
        .schedule-table th { background: #f1f5f9; font-weight: 700; text-transform: uppercase; font-size: 0.75rem; color: #475569; }
        .schedule-table tr:nth-child(even) td { background: #f8fafc; }
        .formula-box { background: #0b1220; color: #f1f5f9; border-radius: 0.75rem; padding: 1rem; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; overflow-x: auto; font-size: 0.95rem; }
        .meta-section details summary { cursor: pointer; font-weight: 700; color: #0f172a; }
        .meta-section details div { font-size: 0.9rem; }
        .meta-section .badge-row span { border-radius: 999px; border: 1px solid #e5e7eb; background: white; padding: 0.35rem 0.85rem; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 0.25rem; }
        .sub { font-size: 1.1rem; color: #475569; }
    </style>

    <script type="application/ld+json">{
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com"},
        {"@type": "ListItem", "position": 2, "name": "Construction", "item": "https://calcdomain.com/categories/construction"},
        {"@type": "ListItem", "position": 3, "name": "Construction Structural and Reinforcement", "item": "https://calcdomain.com/subcategories/construction-structural-and-reinforcement"}
      ]
    }</script>

    <script type="application/ld+json">{
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Ugo Candido",
      "url": "https://www.linkedin.com/in/ugocandido92821/",
      "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
      "email": "info@calcdomain.com",
      "description": "Ugo Candido builds calculators and educational resources that keep engineering decisions transparent and practical."
    }</script>
</head>
<body class="bg-gray-50 text-gray-800">

    <header id="siteHeader" class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="nav container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center w-full">
          <a class="brand text-2xl font-bold text-blue-600" href="https://calcdomain.com">CalcDomain</a>
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" autocomplete="off">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
              <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
            </div>
          </div>
          <div class="navRight hidden md:flex items-center space-x-6">
            <a class="pill text-gray-700 hover:text-blue-600 transition-colors" href="https://calcdomain.com/search">Advanced Search</a>
            <span class="pill text-gray-700 hover:text-blue-600 transition-colors">Categories</span>
          </div>
          <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
        <nav id="mobile-menu" class="md:hidden mt-4 hidden" aria-label="Mobile menu" role="navigation">
          <div class="mb-4">
            <div class="relative">
              <input type="search" id="mobile-search-input" placeholder="Search calculators..." class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" autocomplete="off">
              <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
            <a href="https://calcdomain.com/#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
          </div>
        </nav>
      </nav>
    </header>

    <main id="mainContent" class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
        <ol class="flex flex-wrap items-center gap-1">
          <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
          <li class="text-gray-400">/</li>
          <li><a href="https://calcdomain.com/categories/construction" class="text-blue-600 hover:underline">Construction</a></li>
          <li class="text-gray-400">/</li>
          <li><span class="text-gray-800">Construction Structural and Reinforcement</span></li>
        </ol>
      </nav>

      <div class="space-y-3">
        <h1 id="pageTitle" class="text-3xl font-bold text-gray-900">Bridge Load Rating Calculator</h1>
        <p id="pageSub" class="sub text-lg text-gray-600">Calculate bridge load ratings with precision using span length, load distribution, and safety factor guidance derived from AASHTO LRFD.</p>
        <div id="errorBox" class="alert" role="alert" aria-live="polite"></div>
      </div>

      <div class="calc-hero mt-8" id="calcHero" aria-label="Calculator hero">
        <section class="card" id="inputsCard" aria-label="Calculator inputs">
          <div class="space-y-4">
            <h3 class="text-lg font-bold text-gray-700 mb-1 mt-0">Bridge parameters</h3>
            <p class="text-sm text-gray-500">Enter the span length, load distribution, and any desired safety factor to understand the allowable load. Results round to the nearest hundredth ton.</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label for="spanLength" class="calc-label">Span Length (meters)</label>
                <input id="spanLength" type="number" class="calc-input" value="30" step="0.1" min="0" inputmode="decimal">
              </div>
              <div>
                <label for="loadDistribution" class="calc-label">Load Distribution Factor</label>
                <input id="loadDistribution" type="number" class="calc-input" value="2.5" step="0.01" min="0" inputmode="decimal">
              </div>
              <div>
                <label for="safetyFactor" class="calc-label">Safety Factor</label>
                <input id="safetyFactor" type="number" class="calc-input" value="1.5" step="0.01" min="0.01" inputmode="decimal">
              </div>
            </div>
            <div class="flex flex-col gap-2">
              <p class="text-sm text-gray-500">Safety factor defaults to 1.5 to align with typical AASHTO LRFD practice; adjust only if your code allows an alternate rating factor.</p>
            </div>
            <div class="flex flex-col md:flex-row gap-3 mt-2">
              <button class="btn btn-primary flex-1" id="calcBtn" type="button">Calculate</button>
              <button class="btn btn-secondary flex-1 btnSecondary" id="resetBtn" type="button">Reset</button>
            </div>
          </div>
          <div data-canon-btnrow="1" style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;"></div>
        </section>

        <section class="card sticky-box" id="resultsCard" aria-label="Calculator results">
          <div class="result-box mb-5">
            <div class="text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Safe Load Capacity</div>
            <div class="result-value" id="maxLoadValue">—</div>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4">
            <div class="kpi-row">
              <span class="kpi-label">Span length</span>
              <span class="kpi-value" id="spanValue">— m</span>
            </div>
            <div class="kpi-row">
              <span class="kpi-label">Load distribution</span>
              <span class="kpi-value" id="distributionValue">—</span>
            </div>
            <div class="kpi-row">
              <span class="kpi-label">Safety factor</span>
              <span class="kpi-value" id="safetyValue">—</span>
            </div>
          </div>
          <div class="flex gap-3 mt-4">
            <button class="btn btn-secondary flex-1" id="toggleSchedule" type="button">View Calculation Table</button>
            <button class="btn btn-secondary flex-1" id="downloadCsv" type="button" disabled>Download CSV</button>
          </div>
        </section>
      </div>

      <div id="scheduleWrap" class="mt-6 overflow-x-auto border border-gray-200 rounded-lg tableWrap" style="display:none;" aria-label="Calculation table">
        <table class="schedule-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Description</th>
              <th>Span (m)</th>
              <th>Load Distribution</th>
              <th>Safety Factor</th>
              <th>Capacity (tons)</th>
            </tr>
          </thead>
          <tbody id="scheduleBody"></tbody>
        </table>
        <div class="p-3 text-gray-500 text-sm bg-gray-50">Download the CSV to capture the full calculation record.</div>
      </div>

      <div class="flex flex-col lg:flex-row gap-8 mt-10">
        <section class="w-full lg:w-2/3 space-y-8">
          <section class="card content-card space-y-6" id="howToUse" aria-label="How to use and methodology">
            <h2 class="text-2xl font-semibold">How to Use This Calculator</h2>
            <p>Enter the span length and the load distribution factor that describes how traffic loads spread across the span. Adjust the safety factor only when your governing specification provides justified exceptions. Click "Calculate" or wait for the auto-updated result to see the allowable load capacity.</p>
            <h2 class="text-2xl font-semibold mt-6">Methodology</h2>
            <p>This tool follows the AASHTO LRFD Bridge Design Specifications by taking the demand (span × load distribution) and dividing it by a safety factor that captures resistance uncertainties. Inputs are interpreted as deterministic values; use the formula to verify independent models or to document rating decisions.</p>
            <h3 class="text-xl font-semibold mt-4">Calculation Formula</h3>
            <div class="formula-box">
              <code>Load Capacity = (Span Length × Load Distribution Factor) / Safety Factor</code>
            </div>
            <h3 class="text-xl font-semibold mt-6">Glossary of Terms</h3>
            <ul class="list-disc pl-5 space-y-2 text-gray-700">
              <li><strong>Span Length</strong>: The measured length of the primary span in meters.</li>
              <li><strong>Load Distribution Factor</strong>: Ratio describing how loads disperse across lanes or elements.</li>
              <li><strong>Safety Factor</strong>: A factor that decreases allowable load to account for uncertainties.</li>
            </ul>
            <h3 class="text-xl font-semibold mt-6">Frequently Asked Questions</h3>
            <div class="space-y-4 text-gray-700">
              <div>
                <p class="font-semibold">What is a bridge load rating?</p>
                <p>A bridge load rating is an evaluation of the load-carrying capacity of a bridge under a defined set of loads and resistances.</p>
              </div>
              <div>
                <p class="font-semibold">Why is it important to calculate bridge load ratings?</p>
                <p>Calculating bridge load ratings ensures safety and structural integrity under various live loads and helps prioritize maintenance or posting decisions.</p>
              </div>
              <div>
                <p class="font-semibold">What factors affect bridge load ratings?</p>
                <p>Span length, load distribution, material properties, safety factors, and environmental conditions all impact load ratings.</p>
              </div>
            </div>
          </section>

          <section class="card meta-section space-y-4" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
            <details id="formulaDetails">
              <summary>Formulas</summary>
              <div class="mt-3 p-3 bg-white border border-gray-200 rounded-lg text-sm">
                <p><strong>Load rating formula (text):</strong></p>
                <p class="mt-2">Load Capacity = (Span Length × Load Distribution Factor) / Safety Factor</p>
                <ul class="list-disc list-inside mt-2 text-gray-600">
                  <li>Span Length (meters)</li>
                  <li>Load Distribution Factor (dimensionless)</li>
                  <li>Safety Factor (dimensionless)</li>
                </ul>
              </div>
            </details>

            <details id="citationDetails">
              <summary>Citations</summary>
              <div class="mt-3 p-3 bg-white border border-gray-200 rounded-lg text-sm space-y-2">
                <p><strong>NIST — Weights and Measures</strong><br><a href="https://www.nist.gov/pml/weights-and-measures" target="_blank" rel="noopener" class="text-blue-600 hover:underline">https://www.nist.gov/pml/weights-and-measures</a></p>
                <p><strong>FTC — Consumer Advice</strong><br><a href="https://consumer.ftc.gov/" target="_blank" rel="noopener" class="text-blue-600 hover:underline">https://consumer.ftc.gov/</a></p>
              </div>
            </details>

            <details id="changelogDetails">
              <summary>Changelog</summary>
              <div class="mt-3 p-3 bg-white border border-gray-200 rounded-lg text-sm">
                <ul class="list-disc list-inside">
                  <li>v0.1.0-draft — 2026-01-19: Initial audit spec draft aligned with engineering content.</li>
                  <li>v0.1.1 — 2026-02-05: Refined UI to match CalcDomain canonical layout.</li>
                </ul>
              </div>
            </details>

            <div class="flex gap-2 mt-4 flex-wrap">
              <span class="inline-flex items-center gap-1 border border-gray-200 px-3 py-1 rounded-full bg-white text-sm">
                <span class="text-green-600 font-bold">✓</span> Verified by Ugo Candido
              </span>
              <span class="inline-flex items-center border border-gray-200 px-3 py-1 rounded-full bg-white text-sm">Last Updated: 2026-02-05</span>
              <span class="inline-flex items-center border border-gray-200 px-3 py-1 rounded-full bg-white text-sm">Version 0.1.1</span>
            </div>
          
          <div class="badge" id="versionBadge">Version 1.5.0</div></section>
        </section>

        <aside class="w-full lg:w-1/3">
          <div class="sticky top-24 space-y-8">
            <div id="sidebar-ad-placeholder-top"></div>
            <div class="bg-white p-6 rounded-lg shadow-md">
              <h3 class="font-bold text-lg mb-4">Related Calculators</h3>
              <ul class="space-y-3">
                <li><a href="https://calcdomain.com/house-affordability" class="text-blue-600 hover:underline">House Affordability Calculator</a></li>
                <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-blue-600 hover:underline">Auto Loan Calculator</a></li>
                <li><a href="https://calcdomain.com/loan-payoff" class="text-blue-600 hover:underline">Loan Payoff Calculator</a></li>
                <li><a href="https://calcdomain.com/refinance-calculator" class="text-blue-600 hover:underline">Refinance Calculator</a></li>
                <li><a href="https://calcdomain.com/amortization-calculator" class="text-blue-600 hover:underline">Amortization Calculator</a></li>
                <li><a href="https://calcdomain.com/compound-interest" class="text-blue-600 hover:underline">Compound Interest Calculator</a></li>
              </ul>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <footer id="siteFooter" class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.</p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
              <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction &amp; DIY</a></li>
              <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
              <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
              <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
              <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
              <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
              <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
              <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
              <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
              <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
              <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
              <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
            </ul>
          </div>
        </div>
        <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
          <p>© 2026 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      window.MathJax = {
        tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['$','$'], ['\\[','\\]']] },
        svg: { fontCache: 'global' }
      };
    </script>
    <script>
  (function () {
    function loadMathJax() {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    }

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>

    <script>
  (function () {
    'use strict';

    const defaults = {
      spanLength: 30,
      distributionFactor: 2.5,
      safetyFactor: 1.5
    };

    const debounce = (fn, delay = 100) => {
      let timer;
      return (...args) => {
        clearTimeout(timer);
        timer = setTimeout(() => fn(...args), delay);
      };
    };

    const round2 = (value) => Math.round((value + Number.EPSILON) * 100) / 100;

    const parseNumber = (value) => {
      const parsed = parseFloat(value);
      return Number.isFinite(parsed) ? parsed : NaN;
    };

    const els = {
      spanLength: document.getElementById('spanLength'),
      loadDistribution: document.getElementById('loadDistribution'),
      safetyFactor: document.getElementById('safetyFactor'),
      maxLoadValue: document.getElementById('maxLoadValue'),
      spanValue: document.getElementById('spanValue'),
      distributionValue: document.getElementById('distributionValue'),
      safetyValue: document.getElementById('safetyValue'),
      errorBox: document.getElementById('errorBox'),
      scheduleWrap: document.getElementById('scheduleWrap'),
      scheduleBody: document.getElementById('scheduleBody'),
      toggleSchedule: document.getElementById('toggleSchedule'),
      downloadCsv: document.getElementById('downloadCsv'),
      calcBtn: document.getElementById('calcBtn'),
      resetBtn: document.getElementById('resetBtn')
    };

    let currentSchedule = [];

    function parseInputs() {
      return {
        spanLength: parseNumber(els.spanLength.value),
        distributionFactor: parseNumber(els.loadDistribution.value),
        safetyFactor: parseNumber(els.safetyFactor.value)
      };
    }

    function validate(inputs) {
      const errors = [];
      if (!Number.isFinite(inputs.spanLength) || inputs.spanLength <= 0) {
        errors.push('Span length must be greater than 0.');
      }
      if (!Number.isFinite(inputs.distributionFactor) || inputs.distributionFactor <= 0) {
        errors.push('Load distribution factor must be greater than 0.');
      }
      if (!Number.isFinite(inputs.safetyFactor) || inputs.safetyFactor <= 0) {
        errors.push('Safety factor must be greater than 0.');
      }
      return { ok: errors.length === 0, errors };
    }

    function compute(inputs) {
      const { spanLength, distributionFactor, safetyFactor } = inputs;
      if (![spanLength, distributionFactor, safetyFactor].every(Number.isFinite)) {
        return null;
      }
      const capacity = (spanLength * distributionFactor) / safetyFactor;
      if (!Number.isFinite(capacity) || capacity < 0) {
        return null;
      }
      return {
        capacity: round2(capacity),
        rows: [
          {
            step: 1,
            description: 'Base load capacity',
            spanLength: round2(spanLength),
            distributionFactor: round2(distributionFactor),
            safetyFactor: round2(safetyFactor),
            capacity: round2(capacity)
          }
        ]
      };
    }

    function format(outputs, inputs) {
      const formatNumber = (value, decimals = 2) => {
        if (!Number.isFinite(value)) return '—';
        return value.toLocaleString('en-US', { minimumFractionDigits: decimals, maximumFractionDigits: decimals });
      };
      return {
        capacityDisplay: outputs ? `${formatNumber(outputs.capacity)} tons` : '—',
        spanLabel: `${formatNumber(inputs.spanLength)} m`,
        distributionLabel: formatNumber(inputs.distributionFactor),
        safetyLabel: formatNumber(inputs.safetyFactor)
      };
    }

    function render(formatted, errors, hasData) {
      if (errors.length > 0) {
        els.errorBox.style.display = 'block';
        els.errorBox.textContent = errors.join(' ');
      } else {
        els.errorBox.style.display = 'none';
        els.errorBox.textContent = '';
      }

      els.maxLoadValue.textContent = formatted.capacityDisplay;
      els.spanValue.textContent = formatted.spanLabel;
      els.distributionValue.textContent = formatted.distributionLabel;
      els.safetyValue.textContent = formatted.safetyLabel;

      els.downloadCsv.disabled = !hasData;
      if (!hasData) {
        currentSchedule = [];
        els.scheduleBody.innerHTML = '';
        if (els.scheduleWrap.style.display === 'block') {
          els.toggleSchedule.textContent = 'View Calculation Table';
          els.scheduleWrap.style.display = 'none';
        }
      }
    }

    function renderTable() {
      els.scheduleBody.innerHTML = '';
      const rows = currentSchedule.slice(0, 360);
      const frag = document.createDocumentFragment();
      rows.forEach((row) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${row.step}</td>
          <td>${row.description}</td>
          <td>${row.spanLength}</td>
          <td>${row.distributionFactor}</td>
          <td>${row.safetyFactor}</td>
          <td>${row.capacity}</td>
        `;
        frag.appendChild(tr);
      });
      els.scheduleBody.appendChild(frag);
    }

    function update() {
      const inputs = parseInputs();
      const validation = validate(inputs);
      if (!validation.ok) {
        render({ capacityDisplay: '—', spanLabel: '—', distributionLabel: '—', safetyLabel: '—' }, validation.errors, false);
        return;
      }
      const outputs = compute(inputs);
      if (!outputs) {
        render({ capacityDisplay: '—', spanLabel: '—', distributionLabel: '—', safetyLabel: '—' }, ['Unable to compute with current values.'], false);
        return;
      }
      currentSchedule = outputs.rows;
      const formatted = format(outputs, inputs);
      render(formatted, [], true);
      if (els.scheduleWrap.style.display === 'block') {
        renderTable();
      }
    }

    function setDefaults() {
      els.spanLength.value = defaults.spanLength;
      els.loadDistribution.value = defaults.distributionFactor;
      els.safetyFactor.value = defaults.safetyFactor;
    }

    els.calcBtn.addEventListener('click', update);
    els.resetBtn.addEventListener('click', () => {
      setDefaults();
      update();
    });

    els.toggleSchedule.addEventListener('click', () => {
      if (currentSchedule.length === 0) return;
      const show = els.scheduleWrap.style.display !== 'block';
      els.scheduleWrap.style.display = show ? 'block' : 'none';
      els.toggleSchedule.textContent = show ? 'Hide Calculation Table' : 'View Calculation Table';
      if (show) {
        renderTable();
      }
    });

    els.downloadCsv.addEventListener('click', () => {
      if (currentSchedule.length === 0) return;
      let csv = '#,Description,Span (m),Load Distribution,Safety Factor,Capacity (tons)\n';
      for (const row of currentSchedule) {
        csv += `${row.step},${row.description},${row.spanLength},${row.distributionFactor},${row.safetyFactor},${row.capacity}\n`;
      }
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'bridge-load-rating.csv';
      a.click();
      URL.revokeObjectURL(url);
    });

    const debouncedUpdate = debounce(update, 100);
    document.querySelectorAll('#inputsCard input, #inputsCard select, #inputsCard textarea')
      .forEach((el) => {
        el.addEventListener('input', debouncedUpdate);
        el.addEventListener('change', debouncedUpdate);
      });

    setDefaults();
    update();
  })();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/delta-delta-ct" />
    
    
    <title>Delta Ct Calculator Now [Insider 2024] | CalcDomain</title>
    <meta name="description" content="Calculate Delta Ct Calculator Now fast with our insider tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." /> />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Delta Ct Calculator Now [Insider 2024] | CalcDomain" />
    <meta property="og:description" content="Calculate Delta Ct Calculator Now fast with our insider tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />
    <meta property="og:url" content="https://calcdomain.com/delta-delta-ct" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Delta Ct Calculator Now [Insider 2024] | CalcDomain" />
    <meta name="twitter:description" content="Calculate Delta Ct Calculator Now fast with our insider tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Math Calculators", "item": "https://calcdomain.com/categories/math"}, {"@type": "ListItem", "position": 3, "name": "Core Math & Algebra Tools & Converters", "item": "https://calcdomain.com/subcategories/math-conversions-core-math-algebra"}, {"@type": "ListItem", "position": 4, "name": "\u0394\u0394Ct (Delta Delta Ct) qPCR Calculator", "item": "https://calcdomain.com/delta-delta-ct"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/math" class="text-blue-600 hover:underline">Math Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/math-conversions-core-math-algebra" class="text-blue-600 hover:underline">Core Math &amp; Algebra Tools &amp; Converters</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">ΔΔCt (Delta Delta Ct) qPCR Calculator</span></li>
  </ol>
</nav>

      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h1 class="text-2xl md:text-3xl font-bold mb-2">
              ΔΔCt (Delta Delta Ct) qPCR Calculator
            </h1>
            <p class="text-gray-600 mb-4">
              Analyze qPCR data with the 2<sup>-ΔΔCt</sup> method. Supports
              multiple genes, samples, technical replicates, and optional error
              propagation.
            </p>

            <!-- Calculator Controls -->
            <section aria-labelledby="input-mode-heading" class="mb-6">
              <h2 id="input-mode-heading" class="text-lg font-semibold mb-2">
                1. Input mode
              </h2>
              <div
                class="flex flex-col md:flex-row md:items-center md:space-x-4 space-y-2 md:space-y-0"
              >
                <div class="flex items-center space-x-2">
                  <label class="inline-flex items-center">
                    <input
                      type="radio"
                      name="inputMode"
                      value="table"
                      class="text-blue-600"
                      checked
                    />
                    <span class="ml-1 text-sm"
                      >Table (per sample &amp; gene)</span
                    >
                  </label>
                  <label class="inline-flex items-center ml-4">
                    <input
                      type="radio"
                      name="inputMode"
                      value="paste"
                      class="text-blue-600"
                    />
                    <span class="ml-1 text-sm">Paste data (CSV/TSV)</span>
                  </label>
                </div>
                <div class="flex items-center space-x-2">
                  <label class="inline-flex items-center">
                    <input
                      type="checkbox"
                      id="useReplicates"
                      class="text-blue-600"
                    />
                    <span class="ml-1 text-sm"
                      >Include technical replicates &amp; SD</span
                    >
                  </label>
                </div>
              </div>
            </section>

            <!-- Table Input Mode -->
            <section id="table-mode" class="mb-6">
              <h2 class="text-lg font-semibold mb-2">
                2. Enter Ct values (table mode)
              </h2>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div>
                  <label class="block text-sm font-medium mb-1" for="refGene"
                    >Reference gene (housekeeping)</label
                  >
                  <input
                    id="refGene"
                    type="text"
                    class="w-full border rounded px-3 py-2 text-sm"
                    placeholder="e.g. GAPDH"
                    value="GAPDH"
                  />
                </div>
                <div>
                  <label
                    class="block text-sm font-medium mb-1"
                    for="calibratorSample"
                    >Calibrator sample</label
                  >
                  <input
                    id="calibratorSample"
                    type="text"
                    class="w-full border rounded px-3 py-2 text-sm"
                    placeholder="e.g. Control"
                    value="Control"
                  />
                </div>
                <div>
                  <label
                    class="block text-sm font-medium mb-1"
                    for="replicateCount"
                    >Replicates per Ct (if enabled)</label
                  >
                  <select
                    id="replicateCount"
                    class="w-full border rounded px-3 py-2 text-sm"
                  >
                    <option value="2">2 replicates</option>
                    <option value="3" selected>3 replicates</option>
                    <option value="4">4 replicates</option>
                  </select>
                </div>
              </div>

              <div class="flex flex-wrap items-center gap-2 mb-3">
                <button
                  id="addRowBtn"
                  type="button"
                  class="px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700"
                >
                  + Add row
                </button>
                <button
                  id="clearTableBtn"
                  type="button"
                  class="px-3 py-1.5 bg-gray-100 text-gray-800 text-sm rounded hover:bg-gray-200"
                >
                  Clear table
                </button>
                <span class="text-xs text-gray-500"
                  >Each row = one sample &amp; gene combination.</span
                >
              </div>

              <div class="border rounded table-scroll">
                <table class="min-w-full text-xs">
                  <thead class="sticky-header">
                    <tr>
                      <th
                        class="px-2 py-2 border-b text-left font-semibold bg-gray-50"
                      >
                        Sample
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-semibold bg-gray-50"
                      >
                        Gene
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-semibold bg-gray-50"
                      >
                        Role
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-semibold bg-gray-50"
                      >
                        Ct (mean or rep 1)
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-semibold bg-gray-50 replicate-col hidden"
                      >
                        Ct rep 2
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-semibold bg-gray-50 replicate-col hidden"
                      >
                        Ct rep 3
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-semibold bg-gray-50 replicate-col hidden"
                      >
                        Ct rep 4
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-semibold bg-gray-50"
                      >
                        Actions
                      </th>
                    </tr>
                  </thead>
                  <tbody id="ctTableBody">
                    <!-- Rows injected by JS -->
                  </tbody>
                </table>
              </div>
            </section>

            <!-- Paste Mode -->
            <section id="paste-mode" class="mb-6 hidden">
              <h2 class="text-lg font-semibold mb-2">
                2. Paste Ct data (CSV/TSV)
              </h2>
              <p class="text-sm text-gray-600 mb-2">
                Paste a table with columns:
                <strong>Sample, Gene, Role, Ct1, Ct2, Ct3, ...</strong><br />
                Role should be <code>target</code> or <code>reference</code>.
                Replicate columns are optional.
              </p>
              <textarea
                id="pasteArea"
                rows="6"
                class="w-full border rounded px-3 py-2 text-xs"
                placeholder="Sample,Gene,Role,Ct1,Ct2,Ct3
Control,GAPDH,reference,18.1,18.0,18.2
Control,GeneX,target,23.5,23.6,23.4
Treated,GAPDH,reference,18.3,18.4,18.2
Treated,GeneX,target,21.0,21.1,21.2"
              ></textarea>
              <div class="flex flex-wrap items-center gap-2 mt-2">
                <button
                  id="loadPasteBtn"
                  type="button"
                  class="px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700"
                >
                  Load into calculator
                </button>
                <button
                  id="downloadTemplateBtn"
                  type="button"
                  class="px-3 py-1.5 bg-gray-100 text-gray-800 text-sm rounded hover:bg-gray-200"
                >
                  Download CSV template
                </button>
              </div>
            </section>

            <!-- Calculate -->
            <section class="mb-6">
              <h2 class="text-lg font-semibold mb-2">
                3. Calculate ΔCt, ΔΔCt &amp; fold change
              </h2>
              <div class="flex flex-wrap items-center gap-3 mb-2">
                <button
                  id="calculateBtn"
                  type="button"
                  class="px-4 py-2 bg-emerald-600 text-white text-sm font-semibold rounded hover:bg-emerald-700"
                >
                  Calculate
                </button>
                <button
                  id="exportCsvBtn"
                  type="button"
                  class="px-3 py-1.5 bg-gray-100 text-gray-800 text-sm rounded hover:bg-gray-200"
                  disabled
                >
                  Export results (CSV)
                </button>
                <span id="calcError" class="text-xs text-red-600"></span>
              </div>
            </section>

            <!-- Results -->
            <section aria-labelledby="results-heading">
              <h2 id="results-heading" class="text-lg font-semibold mb-2">
                Results
              </h2>
              <p class="text-sm text-gray-600 mb-2">
                For each target gene and sample, the calculator finds the
                matching reference gene in the same sample, computes ΔCt, ΔΔCt
                (vs. calibrator), and relative expression.
              </p>
              <div
                id="resultsContainer"
                class="border rounded p-3 bg-gray-50 text-xs text-gray-800 hidden"
              >
                <div class="overflow-auto">
                  <table class="min-w-full">
                    <thead>
                      <tr class="bg-gray-100">
                        <th class="px-2 py-1 border-b text-left font-semibold">
                          Sample
                        </th>
                        <th class="px-2 py-1 border-b text-left font-semibold">
                          Gene
                        </th>
                        <th class="px-2 py-1 border-b text-left font-semibold">
                          Role
                        </th>
                        <th class="px-2 py-1 border-b text-left font-semibold">
                          Ct (mean)
                        </th>
                        <th class="px-2 py-1 border-b text-left font-semibold">
                          Ct SD
                        </th>
                        <th class="px-2 py-1 border-b text-left font-semibold">
                          ΔCt
                        </th>
                        <th class="px-2 py-1 border-b text-left font-semibold">
                          ΔCt SD
                        </th>
                        <th class="px-2 py-1 border-b text-left font-semibold">
                          ΔΔCt
                        </th>
                        <th class="px-2 py-1 border-b text-left font-semibold">
                          ΔΔCt SD
                        </th>
                        <th class="px-2 py-1 border-b text-left font-semibold">
                          Fold change (2^-ΔΔCt)
                        </th>
                        <th class="px-2 py-1 border-b text-left font-semibold">
                          Log2 fold change
                        </th>
                      </tr>
                    </thead>
                    <tbody id="resultsBody">
                      <!-- Filled by JS -->
                    </tbody>
                  </table>
                </div>
                <p
                  id="calibratorNote"
                  class="mt-2 text-[11px] text-gray-600"
                ></p>
              </div>
              <p id="noResultsMsg" class="text-xs text-gray-500 italic">
                No results yet. Enter Ct values and click “Calculate”.
              </p>
            </section>

            <!-- Explanation -->
            <section class="prose mt-8">
              <h2>How the ΔΔCt (2<sup>-ΔΔCt</sup>) method works</h2>
              <p>
                The ΔΔCt (delta delta Ct) method is a standard approach for
                <strong>relative quantification</strong> of gene expression from
                qPCR data. It compares a target gene in a test sample to a
                <strong>calibrator</strong> (control) sample after normalization
                to a <strong>reference (housekeeping) gene</strong>.
              </p>

              <h3>Step 1 – Average technical replicates</h3>
              <p>
                If you have technical replicates, first compute the mean Ct for
                each gene in each sample:
              </p>
              <div class="formula-box">
                \( \overline{C_t} = \dfrac{C_{t,1} + C_{t,2} + \dots +
                C_{t,n}}{n} \)
              </div>

              <h3>Step 2 – Compute ΔCt for each sample</h3>
              <p>
                For each sample, subtract the Ct of the reference gene from the
                Ct of the target gene:
              </p>
              <div class="formula-box">
                \( \Delta C_t = C_{t,\text{target}} - C_{t,\text{reference}} \)
              </div>
              <p>
                This normalizes for differences in input RNA amount, reverse
                transcription efficiency, etc.
              </p>

              <h3>Step 3 – Choose a calibrator sample</h3>
              <p>
                Select a sample that serves as your baseline (e.g. untreated,
                wild-type, or time zero). Its relative expression is defined as
                1 (fold change = 1).
              </p>

              <h3>Step 4 – Compute ΔΔCt</h3>
              <p>
                For each sample, subtract the ΔCt of the calibrator from the ΔCt
                of the sample:
              </p>
              <div class="formula-box">
                \( \Delta\Delta C_t = \Delta C_{t,\text{sample}} - \Delta
                C_{t,\text{calibrator}} \)
              </div>

              <h3>Step 5 – Convert to fold change (relative expression)</h3>
              <p>
                Finally, convert ΔΔCt to a fold change using the assumption of
                ~100% PCR efficiency:
              </p>
              <div class="formula-box">
                \( \text{Fold change} = 2^{-\Delta\Delta C_t} \)
              </div>
              <p>
                Many publications also report the
                <strong>log<sub>2</sub> fold change</strong>:
              </p>
              <div class="formula-box">
                \( \log_2(\text{fold change}) = -\Delta\Delta C_t \)
              </div>

              <h2>Error propagation (optional)</h2>
              <p>
                When you enable technical replicates, this calculator estimates
                standard deviations (SD) at each step using simple error
                propagation, assuming independent errors and similar variance
                across replicates.
              </p>

              <h3>SD of mean Ct</h3>
              <p>For each gene and sample, the SD of the mean Ct is:</p>
              <div class="formula-box">
                \( s_{\overline{C_t}} = \sqrt{\dfrac{\sum_{i=1}^{n}(C_{t,i} -
                \overline{C_t})^2}{n-1}} \)
              </div>

              <h3>SD of ΔCt</h3>
              <p>
                If the target and reference Ct values are independent, the
                variance of ΔCt is the sum of variances:
              </p>
              <div class="formula-box">
                \( s_{\Delta C_t} = \sqrt{s_{C_{t,\text{target}}}^2 +
                s_{C_{t,\text{reference}}}^2} \)
              </div>

              <h3>SD of ΔΔCt</h3>
              <p>Similarly, the SD of ΔΔCt is:</p>
              <div class="formula-box">
                \( s_{\Delta\Delta C_t} = \sqrt{s_{\Delta C_{t,\text{sample}}}^2
                + s_{\Delta C_{t,\text{calibrator}}}^2} \)
              </div>
              <p>
                You can then convert these to approximate error bars on fold
                change using:
              </p>
              <div class="formula-box">
                \( \text{Fold change upper/lower} \approx 2^{-(\Delta\Delta C_t
                \mp s_{\Delta\Delta C_t})} \)
              </div>

              <h2>Assumptions and good practices</h2>
              <ul>
                <li>
                  <strong>Equal PCR efficiency</strong> – Target and reference
                  genes should have similar amplification efficiencies (ideally
                  90–110%).
                </li>
                <li>
                  <strong>Stable reference gene</strong> – The housekeeping gene
                  must not change expression across your conditions.
                </li>
                <li>
                  <strong>Dynamic range</strong> – Ct values should fall within
                  the validated linear range of your assay.
                </li>
                <li>
                  <strong>Biological replicates</strong> – For statistical
                  testing, you should analyze ΔCt or ΔΔCt across biological
                  replicates, not just technical replicates.
                </li>
              </ul>

              <h2>Interpreting the results</h2>
              <ul>
                <li>
                  <strong>Fold change &gt; 1</strong>: Up-regulation relative to
                  the calibrator.
                </li>
                <li>
                  <strong>Fold change &lt; 1</strong>: Down-regulation (e.g.
                  0.25 = 4-fold down).
                </li>
                <li>
                  <strong>Log2 fold change</strong>: Symmetric scale; +1 =
                  2-fold up, −1 = 2-fold down.
                </li>
              </ul>
            </section>

            <!-- FAQ -->
            <section class="mt-8" id="faq">
              <h2 class="text-xl font-semibold mb-3">
                ΔΔCt qPCR Calculator – FAQ
              </h2>
              <div class="space-y-3">
                <details class="border rounded">
                  <summary
                    class="px-3 py-2 cursor-pointer text-sm font-medium bg-gray-50"
                  >
                    What is the difference between ΔCt and ΔΔCt?
                  </summary>
                  <div class="px-3 py-2 text-sm text-gray-700">
                    ΔCt is the difference between the Ct of the target gene and
                    the Ct of the reference gene within the same sample. ΔΔCt is
                    the difference between the ΔCt of a sample and the ΔCt of a
                    calibrator (control) sample. ΔCt normalizes for input
                    amount; ΔΔCt expresses the normalized value relative to a
                    baseline condition.
                  </div>
                </details>
                <details class="border rounded">
                  <summary
                    class="px-3 py-2 cursor-pointer text-sm font-medium bg-gray-50"
                  >
                    Can I use more than one reference gene?
                  </summary>
                  <div class="px-3 py-2 text-sm text-gray-700">
                    This calculator assumes a single reference gene per sample.
                    If you use multiple reference genes, a common approach is to
                    compute the geometric mean of their Ct values per sample and
                    treat that as a composite reference. You can pre-compute
                    that mean Ct and enter it as a single “reference” gene in
                    the table.
                  </div>
                </details>
                <details class="border rounded">
                  <summary
                    class="px-3 py-2 cursor-pointer text-sm font-medium bg-gray-50"
                  >
                    Should I average Ct values or ΔCt values across replicates?
                  </summary>
                  <div class="px-3 py-2 text-sm text-gray-700">
                    For technical replicates, it is standard to average Ct
                    values for each gene and sample, then compute ΔCt and ΔΔCt
                    from the means. For biological replicates, you typically
                    compute ΔCt (or ΔΔCt) per replicate and then perform
                    statistics (mean, SD, t-test, ANOVA) on those values.
                  </div>
                </details>
                <details class="border rounded">
                  <summary
                    class="px-3 py-2 cursor-pointer text-sm font-medium bg-gray-50"
                  >
                    What if PCR efficiency is not 100%?
                  </summary>
                  <div class="px-3 py-2 text-sm text-gray-700">
                    The classic 2^-ΔΔCt method assumes 100% efficiency (doubling
                    each cycle). If your efficiencies differ significantly, you
                    should use an efficiency-corrected model, e.g. (1 +
                    E)<sup>-ΔΔCt</sup>, where E is the efficiency (e.g. 0.9 for
                    90%). This calculator currently uses the standard 2^-ΔΔCt
                    formula.
                  </div>
                </details>
              </div>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Table (per sample &amp; gene)</li><li>Paste data (CSV/TSV)</li><li>Include technical replicates &amp; SD</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Delta, Ct, Table (per sample &amp; gene), Paste data (CSV/TSV), Include technical replicates &amp; SD.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Table (per sample &amp; gene)</li><li>Paste data (CSV/TSV)</li><li>Include technical replicates &amp; SD</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>

        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Core Math &amp; Analysis Tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/statistics"
                  class="text-blue-600 hover:underline"
                  >Statistics Calculator Suite</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/standard-deviation"
                  class="text-blue-600 hover:underline"
                  >Standard Deviation Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mean-calculator-median-mode"
                  class="text-blue-600 hover:underline"
                  >Mean, Median, Mode &amp; Range</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/t-test"
                  class="text-blue-600 hover:underline"
                  >t-test Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/p-value"
                  class="text-blue-600 hover:underline"
                  >p-value Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/confidence-interval"
                  class="text-blue-600 hover:underline"
                  >Confidence Interval</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/one-way-anova"
                  class="text-blue-600 hover:underline"
                  >ANOVA (One-way)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sample-size"
                  class="text-blue-600 hover:underline"
                  >Sample Size Calculator</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">You might also like</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/molarity"
                  class="text-blue-600 hover:underline"
                  >Molarity Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/dilution"
                  class="text-blue-600 hover:underline"
                  >Solution Dilution Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percent-yield"
                  class="text-blue-600 hover:underline"
                  >Percent Yield</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/radioactive-decay"
                  class="text-blue-600 hover:underline"
                  >Radioactive Decay</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>

    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // UI helpers
      const qs = (sel, ctx = document) => ctx.querySelector(sel);
      const qsa = (sel, ctx = document) =>
        Array.from(ctx.querySelectorAll(sel));

      const ctTableBody = qs("#ctTableBody");
      const useReplicatesEl = qs("#useReplicates");
      const replicateCountEl = qs("#replicateCount");
      const resultsContainer = qs("#resultsContainer");
      const resultsBody = qs("#resultsBody");
      const noResultsMsg = qs("#noResultsMsg");
      const calcError = qs("#calcError");
      const exportCsvBtn = qs("#exportCsvBtn");
      const calibratorNote = qs("#calibratorNote");

      function updateReplicateColumns() {
        const useRep = useReplicatesEl.checked;
        const cols = qsa(".replicate-col");
        cols.forEach((col) => col.classList.toggle("hidden", !useRep));
      }

      function createRow(sample = "", gene = "", role = "target", cts = []) {
        const tr = document.createElement("tr");

        tr.innerHTML = `
      <td class="border-b px-2 py-1">
        <input type="text" class="w-full border rounded px-1 py-0.5 text-xs sample-input" value="${sample}">
      </td>
      <td class="border-b px-2 py-1">
        <input type="text" class="w-full border rounded px-1 py-0.5 text-xs gene-input" value="${gene}">
      </td>
      <td class="border-b px-2 py-1">
        <select class="w-full border rounded px-1 py-0.5 text-xs role-input">
          <option value="target"${
            role === "target" ? " selected" : ""
          }>Target</option>
          <option value="reference"${
            role === "reference" ? " selected" : ""
          }>Reference</option>
        </select>
      </td>
      <td class="border-b px-2 py-1">
        <input type="number" step="0.01" class="w-full border rounded px-1 py-0.5 text-xs ct-input" value="${
          cts[0] ?? ""
        }">
      </td>
      <td class="border-b px-2 py-1 replicate-col hidden">
        <input type="number" step="0.01" class="w-full border rounded px-1 py-0.5 text-xs ct-input" value="${
          cts[1] ?? ""
        }">
      </td>
      <td class="border-b px-2 py-1 replicate-col hidden">
        <input type="number" step="0.01" class="w-full border rounded px-1 py-0.5 text-xs ct-input" value="${
          cts[2] ?? ""
        }">
      </td>
      <td class="border-b px-2 py-1 replicate-col hidden">
        <input type="number" step="0.01" class="w-full border rounded px-1 py-0.5 text-xs ct-input" value="${
          cts[3] ?? ""
        }">
      </td>
      <td class="border-b px-2 py-1 text-center">
        <button type="button" class="text-red-600 text-xs remove-row-btn">Delete</button>
      </td>
    `;
        ctTableBody.appendChild(tr);
        updateReplicateColumns();
      }

      // Seed with an example
      function seedExample() {
        ctTableBody.innerHTML = "";
        createRow("Control", "GAPDH", "reference", [18.1, 18.0, 18.2]);
        createRow("Control", "GeneX", "target", [23.5, 23.6, 23.4]);
        createRow("Treated", "GAPDH", "reference", [18.3, 18.4, 18.2]);
        createRow("Treated", "GeneX", "target", [21.0, 21.1, 21.2]);
      }

      seedExample();

      // Event listeners
      qs("#addRowBtn").addEventListener("click", () => createRow());
      ctTableBody.addEventListener("click", (e) => {
        if (e.target.classList.contains("remove-row-btn")) {
          e.target.closest("tr").remove();
        }
      });

      qs("#clearTableBtn").addEventListener("click", () => {
        ctTableBody.innerHTML = "";
        resultsBody.innerHTML = "";
        resultsContainer.classList.add("hidden");
        noResultsMsg.classList.remove("hidden");
        exportCsvBtn.disabled = true;
        calcError.textContent = "";
      });

      useReplicatesEl.addEventListener("change", updateReplicateColumns);

      // Input mode toggle
      qsa('input[name="inputMode"]').forEach((r) => {
        r.addEventListener("change", () => {
          const mode = r.value;
          if (mode === "table") {
            qs("#table-mode").classList.remove("hidden");
            qs("#paste-mode").classList.add("hidden");
          } else {
            qs("#table-mode").classList.add("hidden");
            qs("#paste-mode").classList.remove("hidden");
          }
        });
      });

      // Paste loader
      qs("#loadPasteBtn").addEventListener("click", () => {
        const text = qs("#pasteArea").value.trim();
        if (!text) return;
        const lines = text.split(/\r?\n/).filter((l) => l.trim());
        if (lines.length < 2) return;

        const header = lines[0]
          .split(/[\t,]/)
          .map((h) => h.trim().toLowerCase());
        const sampleIdx = header.indexOf("sample");
        const geneIdx = header.indexOf("gene");
        const roleIdx = header.indexOf("role");
        const ctIdxs = header
          .map((h, i) => ({ h, i }))
          .filter((col) => col.h.startsWith("ct"))
          .map((col) => col.i);

        if (
          sampleIdx === -1 ||
          geneIdx === -1 ||
          roleIdx === -1 ||
          ctIdxs.length === 0
        ) {
          alert(
            "Header must contain at least Sample, Gene, Role, and one Ct column (Ct1, Ct2, ...)."
          );
          return;
        }

        ctTableBody.innerHTML = "";
        lines.slice(1).forEach((line) => {
          const cols = line.split(/[\t,]/);
          if (cols.length < 4) return;
          const sample = (cols[sampleIdx] || "").trim();
          const gene = (cols[geneIdx] || "").trim();
          const role = (cols[roleIdx] || "").trim().toLowerCase();
          const cts = ctIdxs
            .map((i) => (cols[i] || "").trim())
            .filter((v) => v !== "");
          if (!sample || !gene || !role || cts.length === 0) return;
          createRow(
            sample,
            gene,
            role === "reference" ? "reference" : "target",
            cts
          );
        });

        // Switch to table mode
        qsa('input[name="inputMode"]').forEach((r) => {
          if (r.value === "table") r.checked = true;
        });
        qs("#table-mode").classList.remove("hidden");
        qs("#paste-mode").classList.add("hidden");
      });

      // CSV template download
      qs("#downloadTemplateBtn").addEventListener("click", () => {
        const csv = [
          "Sample,Gene,Role,Ct1,Ct2,Ct3",
          "Control,GAPDH,reference,18.1,18.0,18.2",
          "Control,GeneX,target,23.5,23.6,23.4",
          "Treated,GAPDH,reference,18.3,18.4,18.2",
          "Treated,GeneX,target,21.0,21.1,21.2",
        ].join("\n");

        const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "delta-delta-ct-template.csv";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      });

      // Math helpers
      function mean(arr) {
        const nums = arr.filter((v) => !isNaN(v));
        if (!nums.length) return NaN;
        return nums.reduce((a, b) => a + b, 0) / nums.length;
      }

      function stdDev(arr) {
        const nums = arr.filter((v) => !isNaN(v));
        if (nums.length < 2) return 0;
        const m = mean(nums);
        const variance =
          nums.reduce((sum, v) => sum + Math.pow(v - m, 2), 0) /
          (nums.length - 1);
        return Math.sqrt(variance);
      }

      function formatNum(val, digits = 3) {
        if (val === null || val === undefined || isNaN(val)) return "";
        if (!isFinite(val)) return val > 0 ? "∞" : "-∞";
        return Number(val).toFixed(digits);
      }

      // Core calculation
      qs("#calculateBtn").addEventListener("click", () => {
        calcError.textContent = "";
        resultsBody.innerHTML = "";
        resultsContainer.classList.add("hidden");
        noResultsMsg.classList.remove("hidden");
        exportCsvBtn.disabled = true;
        calibratorNote.textContent = "";

        const refGene = qs("#refGene").value.trim();
        const calibratorSample = qs("#calibratorSample").value.trim();
        const useRep = useReplicatesEl.checked;

        if (!refGene || !calibratorSample) {
          calcError.textContent =
            "Please specify a reference gene and a calibrator sample.";
          return;
        }

        const rows = qsa("#ctTableBody tr");
        if (!rows.length) {
          calcError.textContent = "Please enter at least one row of Ct data.";
          return;
        }

        // Collect Ct data
        const data = [];
        rows.forEach((tr) => {
          const sample = tr.querySelector(".sample-input").value.trim();
          const gene = tr.querySelector(".gene-input").value.trim();
          const role = tr.querySelector(".role-input").value;
          const ctInputs = qsa(".ct-input", tr);
          const cts = ctInputs
            .map((inp) => parseFloat(inp.value))
            .filter((v) => !isNaN(v));

          if (!sample || !gene || !cts.length) return;
          data.push({ sample, gene, role, cts });
        });

        if (!data.length) {
          calcError.textContent =
            "No valid Ct values found. Please check your inputs.";
          return;
        }

        // Compute mean Ct and SD per sample/gene
        const bySampleGene = {};
        data.forEach((d) => {
          const key = d.sample + "||" + d.gene;
          const m = mean(d.cts);
          const sd = useRep ? stdDev(d.cts) : 0;
          bySampleGene[key] = {
            sample: d.sample,
            gene: d.gene,
            role: d.role,
            ctMean: m,
            ctSd: sd,
          };
        });

        // Build structures for reference and target
        const refBySample = {};
        const targets = [];

        Object.values(bySampleGene).forEach((entry) => {
          if (entry.role === "reference") {
            if (entry.gene.toLowerCase() === refGene.toLowerCase()) {
              refBySample[entry.sample] = entry;
            }
          } else {
            targets.push(entry);
          }
        });

        if (!Object.keys(refBySample).length) {
          calcError.textContent =
            "No reference gene rows found matching the specified reference gene name.";
          return;
        }

        // Compute ΔCt for each target where reference exists
        const deltaCtBySampleGene = {};
        targets.forEach((t) => {
          const ref = refBySample[t.sample];
          if (!ref) return;
          const deltaCt = t.ctMean - ref.ctMean;
          const deltaCtSd = useRep
            ? Math.sqrt(Math.pow(t.ctSd, 2) + Math.pow(ref.ctSd, 2))
            : 0;
          const key = t.sample + "||" + t.gene;
          deltaCtBySampleGene[key] = {
            sample: t.sample,
            gene: t.gene,
            role: "target",
            ctMean: t.ctMean,
            ctSd: t.ctSd,
            refCtMean: ref.ctMean,
            refCtSd: ref.ctSd,
            deltaCt,
            deltaCtSd,
          };
        });

        if (!Object.keys(deltaCtBySampleGene).length) {
          calcError.textContent =
            "No target rows with matching reference gene in the same sample were found.";
          return;
        }

        // Calibrator ΔCt per gene
        const calibratorDeltaCtByGene = {};
        Object.values(deltaCtBySampleGene).forEach((entry) => {
          if (entry.sample === calibratorSample) {
            calibratorDeltaCtByGene[entry.gene] = {
              deltaCt: entry.deltaCt,
              deltaCtSd: entry.deltaCtSd,
            };
          }
        });

        if (!Object.keys(calibratorDeltaCtByGene).length) {
          calcError.textContent =
            "No calibrator rows found. Ensure the calibrator sample name matches a sample with target + reference.";
          return;
        }

        // Build final results
        const results = [];
        Object.values(deltaCtBySampleGene).forEach((entry) => {
          const calib = calibratorDeltaCtByGene[entry.gene];
          if (!calib) return; // no calibrator for this gene

          const deltaDeltaCt = entry.deltaCt - calib.deltaCt;
          const deltaDeltaCtSd = useRep
            ? Math.sqrt(
                Math.pow(entry.deltaCtSd, 2) + Math.pow(calib.deltaCtSd, 2)
              )
            : 0;
          const foldChange = Math.pow(2, -deltaDeltaCt);
          const log2fc = -deltaDeltaCt;

          results.push({
            sample: entry.sample,
            gene: entry.gene,
            role: entry.role,
            ctMean: entry.ctMean,
            ctSd: entry.ctSd,
            deltaCt: entry.deltaCt,
            deltaCtSd: entry.deltaCtSd,
            deltaDeltaCt,
            deltaDeltaCtSd,
            foldChange,
            log2fc,
          });
        });

        if (!results.length) {
          calcError.textContent =
            "No results could be computed. Check that each gene has both target and reference in the calibrator sample.";
          return;
        }

        // Sort results: by gene, then sample (calibrator first)
        results.sort((a, b) => {
          if (a.gene.toLowerCase() !== b.gene.toLowerCase()) {
            return a.gene.toLowerCase().localeCompare(b.gene.toLowerCase());
          }
          if (a.sample === calibratorSample && b.sample !== calibratorSample)
            return -1;
          if (b.sample === calibratorSample && a.sample !== calibratorSample)
            return 1;
          return a.sample.toLowerCase().localeCompare(b.sample.toLowerCase());
        });

        // Render results
        resultsBody.innerHTML = "";
        results.forEach((r) => {
          const isCalib = r.sample === calibratorSample;
          const tr = document.createElement("tr");
          tr.className = isCalib ? "bg-amber-50" : "";
          tr.innerHTML = `
        <td class="px-2 py-1 border-b">${r.sample}</td>
        <td class="px-2 py-1 border-b">${r.gene}</td>
        <td class="px-2 py-1 border-b">${r.role}</td>
        <td class="px-2 py-1 border-b text-right">${formatNum(r.ctMean, 3)}</td>
        <td class="px-2 py-1 border-b text-right">${
          useRep ? formatNum(r.ctSd, 3) : ""
        }</td>
        <td class="px-2 py-1 border-b text-right">${formatNum(
          r.deltaCt,
          3
        )}</td>
        <td class="px-2 py-1 border-b text-right">${
          useRep ? formatNum(r.deltaCtSd, 3) : ""
        }</td>
        <td class="px-2 py-1 border-b text-right">${formatNum(
          r.deltaDeltaCt,
          3
        )}</td>
        <td class="px-2 py-1 border-b text-right">${
          useRep ? formatNum(r.deltaDeltaCtSd, 3) : ""
        }</td>
        <td class="px-2 py-1 border-b text-right">${formatNum(
          r.foldChange,
          3
        )}</td>
        <td class="px-2 py-1 border-b text-right">${formatNum(r.log2fc, 3)}</td>
      `;
          resultsBody.appendChild(tr);
        });

        calibratorNote.textContent =
          "Rows highlighted in light yellow correspond to the calibrator sample (“" +
          calibratorSample +
          "”). For these rows, ΔΔCt = 0, fold change = 1, and log2 fold change = 0 by definition.";

        resultsContainer.classList.remove("hidden");
        noResultsMsg.classList.add("hidden");
        exportCsvBtn.disabled = false;

        // Store results for CSV export
        exportCsvBtn.dataset.results = JSON.stringify({
          results,
          calibratorSample,
        });
      });

      // CSV export
      exportCsvBtn.addEventListener("click", () => {
        const payload = exportCsvBtn.dataset.results;
        if (!payload) return;
        const { results, calibratorSample } = JSON.parse(payload);

        const header = [
          "Sample",
          "Gene",
          "Role",
          "Ct_mean",
          "Ct_SD",
          "DeltaCt",
          "DeltaCt_SD",
          "DeltaDeltaCt",
          "DeltaDeltaCt_SD",
          "FoldChange_2^-DeltaDeltaCt",
          "Log2FoldChange",
          "IsCalibrator",
        ];

        const rows = results.map((r) => [
          r.sample,
          r.gene,
          r.role,
          formatNum(r.ctMean, 4),
          formatNum(r.ctSd, 4),
          formatNum(r.deltaCt, 4),
          formatNum(r.deltaCtSd, 4),
          formatNum(r.deltaDeltaCt, 4),
          formatNum(r.deltaDeltaCtSd, 4),
          formatNum(r.foldChange, 6),
          formatNum(r.log2fc, 4),
          r.sample === calibratorSample ? "yes" : "no",
        ]);

        const csv = [header.join(","), ...rows.map((r) => r.join(","))].join(
          "\n"
        );
        const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "delta-delta-ct-results.csv";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      });

      // Mobile menu script (simple)
      document
        .getElementById("mobile-menu-toggle")
        .addEventListener("click", () => {
          const menu = document.getElementById("mobile-menu");
          const expanded = menu.classList.toggle("hidden");
          document
            .getElementById("mobile-menu-toggle")
            .setAttribute("aria-expanded", (!expanded).toString());
        });

      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

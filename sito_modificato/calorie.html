<!DOCTYPE html>
<html lang="en">
 <head>
  <link href="https://calcdomain.com/calorie" rel="canonical"/>
  <link href="https://calcdomain.com/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"/>
  <link href="https://calcdomain.com/favicon.svg" rel="icon" type="image/svg+xml"/>
  <link href="https://calcdomain.com/favicon.ico" rel="shortcut icon"/>
  <link href="https://calcdomain.com/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
  <link href="https://calcdomain.com/site.webmanifest" rel="manifest"/>
  <meta charset="utf-8"/>
  <title>
   Calorie Calculator | Health and Fitness — Nutrition
  </title>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <meta content="Professional-grade calorie calculator to estimate BMR, TDEE, BMI and personalized targets using Mifflin–St Jeor, Katch–McArdle, and Harris–Benedict equations. Accessible, fast, and mobile-first." name="description"/>
  <meta content="Ugo Candido" name="author"/>
  <meta content="#ffffff" name="theme-color"/>
  <meta content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1" name="robots"/>
  <style>
   /* ======================================================================
       Design tokens and base styles (mobile-first, A11y-first)
       ====================================================================== */
    :root{
      --primary:#005A9C; --primary-700:#003F6E;
      --bg:#F8F9FA; --surface:#FFFFFF;
      --text:#212529; --muted:#6C757D; --border:#DEE2E6;
      --success:#198754; --danger:#DC3545; --warning:#FFC107;
      --radius:12px; --radius-sm:8px;
      --shadow:0 4px 10px rgba(0,0,0,.06);
      --touch:48px;
    }
    @media (prefers-contrast: more){
      :root{ --primary:#003366; --text:#000; --border:#000; --bg:#fff; }
    }
    @media (prefers-reduced-motion: reduce){
      *{scroll-behavior:auto !important; animation:none !important; transition:none !important;}
    }
    *,*::before,*::after{ box-sizing:border-box; }
    html{ font-size:16px; }
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text); background:var(--bg); line-height:1.6;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    a{ color:var(--primary); text-decoration:none; }
    a:hover{ text-decoration:underline; color:var(--primary-700); }
    img{ max-width:100%; height:auto; }
    .container{ max-width:1120px; margin:0 auto; padding:0 1rem; }
    .skip-link{
      position:absolute; left:8px; top:-40px; background:var(--primary); color:#fff;
      padding:.5rem .75rem; border-radius:6px; z-index:1000;
    }
    .skip-link:focus{ top:8px; }
    /* Header (non-sticky per spec) */
    .site-header{ background:var(--surface); border-bottom:1px solid var(--border); }
    .header-inner{
      display:grid; grid-template-columns:auto 1fr; gap:.75rem; align-items:center;
      padding:.75rem 0;
    }
    .brand{ font-weight:800; color:var(--primary); font-size:1.1rem; }
    .site-nav a{ padding:.5rem .6rem; border-radius:6px; display:inline-block; }
    .site-nav a:focus{ outline:3px solid var(--primary); outline-offset:2px; }
    /* Main layout */
    main{ padding:1.25rem 0 2rem; }
    nav.breadcrumb{ font-size:.9rem; color:var(--muted); margin:.25rem 0 1rem; }
    nav.breadcrumb a{ color:inherit; text-decoration:underline; }
    h1{ font-size:1.8rem; line-height:1.2; margin:.25rem 0 .5rem; color:#0b2239; }
    p.lead{ margin:.25rem 0 1rem; color:#243444; max-width:75ch; }
    /* Grid: calculator + content */
    .grid{
      display:grid; gap:1.25rem; grid-template-columns:1fr;
    }
    @media (min-width: 992px){
      .grid{ grid-template-columns: minmax(300px, 420px) 1fr; gap:2rem; }
    }
    /* Card */
    .card{
      background:var(--surface); border:1px solid var(--border); border-radius:var(--radius);
      box-shadow:var(--shadow); padding:1rem;
    }
    @media (min-width: 420px){ .card{ padding:1.25rem; } }
    /* Form */
    form .form-group{ margin-bottom:1rem; }
    label{ display:block; font-weight:700; margin-bottom:.45rem; color:#0b2239; }
    .req{ color:var(--danger); margin-left:.25rem; }
    .field-row{ display:flex; gap:.5rem; }
    .field-row > *{ flex:1; }
    .input, select{
      width:100%; min-height:var(--touch);
      padding:.7rem .9rem; border:1px solid var(--border); border-radius:10px;
      font-size:1rem; background:#fff; color:var(--text);
      transition:border-color .15s ease, box-shadow .15s ease;
    }
    .input:focus, select:focus, .btn:focus, .radio-label:focus{
      outline:3px solid var(--primary); outline-offset:2px;
      border-color:var(--primary);
      box-shadow:0 0 0 3px rgba(0,90,156,.15);
    }
    .input[aria-invalid="true"]{ border-color:var(--danger); }
    .help, .error{ font-size:.9rem; margin-top:.35rem; }
    .help{ color:var(--muted); }
    .error{ color:var(--danger); }
    .radio-group{
      display:flex; gap:.5rem; flex-wrap:wrap;
      border:1px solid var(--border); border-radius:10px; padding:.25rem;
    }
    .radio-input{ position:absolute; opacity:0; width:0; height:0; }
    .radio-label{
      min-height:var(--touch); padding:.55rem .8rem; border-radius:8px; cursor:pointer;
      border:1px solid transparent; background:#f4f6f8; color:#102a43; font-weight:600;
      display:inline-flex; align-items:center; justify-content:center; gap:.4rem;
    }
    .radio-input:checked + .radio-label{ background:var(--primary); color:#fff; }
    .radio-input:focus + .radio-label{ outline:3px solid var(--primary); outline-offset:2px; }
    .suffix{
      position:absolute; right:.75rem; top:50%; transform:translateY(-50%); color:var(--muted);
    }
    .input-wrap{ position:relative; }
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
      min-height:var(--touch); min-width:var(--touch);
      padding:.7rem 1rem; border-radius:10px; font-weight:700; font-size:1rem;
      cursor:pointer; border:1px solid transparent; background:var(--primary); color:#fff;
      transition:transform .1s ease, background .15s ease;
    }
    .btn:hover{ background:var(--primary-700); }
    .btn.secondary{ background:transparent; color:var(--primary); border-color:var(--primary); }
    .actions{ display:flex; gap:.5rem; flex-wrap:wrap; }
    /* Tooltip (accessible disclosure) */
    .tip-btn{
      appearance:none; border:none; background:transparent; color:var(--primary);
      font-weight:800; width:var(--touch); height:var(--touch); line-height:1;
      border-radius:50%; cursor:pointer;
    }
    .tip-btn:focus{ outline:3px solid var(--primary); outline-offset:2px; }
    .tooltip{
      display:none; margin-top:.35rem; background:#f0f6ff; border:1px solid #b6d4fe;
      color:#0b2239; padding:.6rem .75rem; border-radius:8px;
    }
    .tooltip[data-open="true"]{ display:block; }
    /* Results */
    .results{
      margin-top:1rem;
      padding:1rem;
      background:#f7f9fc;
      border:1px solid var(--border);
      border-radius:var(--radius);
      min-height:280px; /* Prevent CLS */
    }
    .results h3{ margin-top:0; margin-bottom:.5rem; }
    .result-grid{ display:grid; grid-template-columns:1fr 1fr; gap:.5rem 1rem; }
    @media (min-width: 480px){ .result-grid{ grid-template-columns:1fr 1fr 1fr; } }
    .result-item{
      padding:.5rem .6rem; background:#fff; border:1px solid var(--border); border-radius:10px;
    }
    .result-label{ color:var(--muted); font-size:.9rem; }
    .result-value{ font-weight:800; font-size:1.15rem; color:var(--success); }
    .note{ font-size:.9rem; color:var(--muted); margin-top:.5rem; }
    /* Content sections */
    .content section{ margin-top:1.5rem; }
    .content h2{
      font-size:1.35rem; border-bottom:1px solid var(--border); padding-bottom:.35rem; color:#0b2239;
    }
    .formula-box{
      background:#eef2f7; border:1px solid var(--border); border-radius:10px; padding:1rem; overflow-x:auto;
      font-size:1.05rem;
    }
    .def-list{ display:grid; grid-template-columns:1fr; gap:.5rem; }
    @media (min-width:680px){ .def-list{ grid-template-columns:repeat(2, minmax(0,1fr)); } }
    .def{
      background:#fff; border:1px solid var(--border); border-radius:10px; padding:.6rem .75rem;
    }
    .def strong{ display:block; color:#0b2239; }
    .faq-item{ margin:.75rem 0; }
    .author-box{
      margin-top:1.5rem; padding-top:1rem;
      border-top:1px solid var(--border); color:var(--muted); font-size:.95rem;
    }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }
  </style>
  <script type="application/ld+json">
   {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Calorie Calculator",
  "description": "Estimate daily calories (BMR, TDEE, BMI) and goal targets using Mifflin–St Jeor, Katch–McArdle, and Harris–Benedict. Includes activity multipliers, macro guidance, and accessible UX.",
  "url": "https://calcdomain.com/calorie",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  },
  "mainEntity": [
    {
      "@type": "HowTo",
      "name": "How It Works: A Step-by-Step Example",
      "description": "Enter your data, pick a formula and activity, then review maintenance and goal calories.",
      "totalTime": "PT1M",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Enter personal data",
          "text": "Select unit system and enter sex, age, height, weight. Optionally add body fat %."
        },
        {
          "@type": "HowToStep",
          "name": "Choose equation and activity",
          "text": "Use Mifflin–St Jeor by default; pick your activity multiplier for TDEE."
        },
        {
          "@type": "HowToStep",
          "name": "Set your goal",
          "text": "Maintain, lose, or gain. The calculator adjusts target calories and macros."
        },
        {
          "@type": "HowToStep",
          "name": "Review results",
          "text": "See BMR, TDEE (maintenance), target calories, macro suggestions, BMI and weekly change estimate."
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Which calorie equation is most accurate?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "For most people, Mifflin–St Jeor provides a strong baseline. If you know your body fat %, Katch–McArdle can better reflect lean mass and often improves accuracy."
          }
        },
        {
          "@type": "Question",
          "name": "Do I need to count calories exactly?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No. Use the target as a starting point. Track your progress for 2–3 weeks and adjust by 5–10% based on weight and energy levels."
          }
        },
        {
          "@type": "Question",
          "name": "Are the activity multipliers evidence-based?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "They reflect widely used Physical Activity Level ranges consistent with FAO/WHO/UNU guidance and common sports-nutrition practice."
          }
        },
        {
          "@type": "Question",
          "name": "Is the tool suitable for teens, pregnancy, or medical conditions?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "This tool is for healthy adults. Needs differ during pregnancy, for teens, older adults, and people with medical conditions—consult a qualified clinician."
          }
        },
        {
          "@type": "Question",
          "name": "How are macros calculated?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "By default: protein 1.6 g/kg, fat 0.8 g/kg (minimum), and remaining calories go to carbs. You can customize protein per kg if desired."
          }
        },
        {
          "@type": "Question",
          "name": "What rate of weight change is safe?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Typical guidance: lose 0.25–1.0% of body weight per week, gain 0.25–0.5% per week. Extreme deficits or surpluses are discouraged."
          }
        },
        {
          "@type": "Question",
          "name": "Do you store my data?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No. Calculations run in your browser and are not sent to any server."
          }
        }
      ]
    }
  ]
}
  </script>
  <!-- MathJax for LaTeX rendering (async, non-blocking) -->
  <script>
   window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }, options:{ renderActions:{ addMenu: [] } } };
  </script>
  <script async="" crossorigin="anonymous" integrity="sha384-MJax3" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <script defer="" src="search.js">
  </script>
  <!-- MathJax for LaTeX formulas -->
  <script>
   window.MathJax = {
    tex: {
      inlineMath: [['\(','\)'], ['$', '$']],
      displayMath: [['$','$'], ['\[','\]']]
    },
    svg: { fontCache: 'global' }
  };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <html>
   <head>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=TUO_ID_GA">
    </script>
    <script>
     window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'TUO_ID_GA');
    </script>
   </head>
  </html>
 </head>
 <body>
  <header class="bg-white shadow-sm sticky top-0 z-50">
   <nav aria-label="Primary" class="container mx-auto px-4 lg:px-6 py-4">
    <div class="flex justify-between items-center">
     <a class="text-2xl font-bold text-blue-600" href="https://calcdomain.com">
      CalcDomain
     </a>
     <div class="w-full max-w-md hidden md:block mx-8">
      <div class="relative">
       <input autocomplete="off" class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="search-input" placeholder="Search for a calculator..." type="search"/>
       <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24">
        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
        </path>
       </svg>
       <div class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200" id="search-results">
       </div>
      </div>
     </div>
     <div class="hidden md:flex items-center space-x-6">
      <a class="text-gray-700 hover:text-blue-600 transition-colors" href="https://calcdomain.com/search">
       Advanced Search
      </a>
      <a class="text-gray-700 hover:text-blue-600 transition-colors" href="https://calcdomain.com/categories">
       Categories
      </a>
     </div>
     <button aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" class="md:hidden p-2" id="mobile-menu-toggle" type="button">
      <svg aria-hidden="true" class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24">
       <path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
       </path>
      </svg>
     </button>
    </div>
    <nav aria-label="Mobile menu" class="md:hidden mt-4 hidden" id="mobile-menu" role="navigation">
     <div class="mb-4">
      <div class="relative">
       <input class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" id="mobile-search-input" placeholder="Search calculators..." type="search"/>
       <svg aria-hidden="true" class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24">
        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
        </path>
       </svg>
      </div>
     </div>
     <div class="space-y-2">
      <a class="block py-2 text-gray-700 hover:text-blue-600" href="https://calcdomain.com/search">
       Advanced Search
      </a>
      <a class="block py-2 text-gray-700 hover:text-blue-600" href="https://calcdomain.com/categories">
       Categories
      </a>
     </div>
    </nav>
   </nav>
  </header>
  <a class="skip-link" href="#main">
   Skip to main content
  </a>
  <main class="container" id="main" role="main">
   <nav aria-label="Breadcrumb" class="breadcrumb">
    Home /
    <a href="https://calcdomain.com/health-fitness">
     Health and Fitness
    </a>
    / Nutrition / Calorie Calculator
   </nav>
   <h1>
    Calorie Calculator
   </h1>
   <p class="lead">
    This calculator estimates your Basal Metabolic Rate (BMR), daily energy needs (TDEE), BMI, and personalized calorie targets using validated equations. It’s designed for adults who want a clear, evidence-based starting point to maintain, lose, or gain weight.
   </p>
   <div class="grid">
    <aside aria-labelledby="calc-heading" class="card">
     <section aria-describedby="calc-desc" id="calculator">
      <h2 class="sr-only" id="calc-heading">
       Interactive Calorie Calculator
      </h2>
      <p class="sr-only" id="calc-desc">
       Enter your details below. All required fields are marked with an asterisk.
      </p>
      <!-- Unit system -->
      <div class="form-group">
       <fieldset>
        <legend>
         Unit system
         <span aria-hidden="true" class="req">
          *
         </span>
        </legend>
        <div aria-label="Unit system" class="radio-group" role="radiogroup">
         <input checked="" class="radio-input" id="unitMetric" name="unit" type="radio" value="metric"/>
         <label class="radio-label" for="unitMetric">
          Metric (kg, cm)
         </label>
         <input class="radio-input" id="unitUS" name="unit" type="radio" value="us"/>
         <label class="radio-label" for="unitUS">
          US (lb, ft/in)
         </label>
        </div>
       </fieldset>
      </div>
      <!-- Sex -->
      <div class="form-group">
       <div style="display:flex; align-items:center; gap:.25rem;">
        <label for="sex">
         Sex at birth
         <span aria-hidden="true" class="req">
          *
         </span>
        </label>
        <button aria-controls="tip-sex-text" aria-expanded="false" aria-label="What is sex at birth?" class="tip-btn" id="tip-sex" type="button">
         ?
        </button>
       </div>
       <div class="tooltip" data-open="false" id="tip-sex-text" role="note">
        Sex-specific equations differ slightly. If you prefer a sex-neutral approach, select Katch–McArdle with body fat %, which relies on lean mass.
       </div>
       <select aria-describedby="sexError tip-sex-text" aria-required="true" class="input" id="sex">
        <option value="">
         Select
        </option>
        <option value="female">
         Female
        </option>
        <option value="male">
         Male
        </option>
       </select>
       <div aria-live="polite" class="error" id="sexError" role="alert">
       </div>
      </div>
      <!-- Age -->
      <div class="form-group">
       <label for="age">
        Age (years)
        <span aria-hidden="true" class="req">
         *
        </span>
       </label>
       <div class="input-wrap">
        <input aria-describedby="ageError" aria-required="true" class="input" id="age" inputmode="numeric" max="80" min="14" placeholder="e.g., 30" step="1" type="number"/>
       </div>
       <div aria-live="polite" class="error" id="ageError" role="alert">
       </div>
      </div>
      <!-- Height: metric or US -->
      <div class="form-group" id="heightMetricGroup">
       <label for="heightCm">
        Height (cm)
        <span aria-hidden="true" class="req">
         *
        </span>
       </label>
       <div class="input-wrap">
        <input aria-describedby="heightError" aria-required="true" class="input" id="heightCm" inputmode="decimal" max="250" min="120" placeholder="e.g., 175" step="0.1" type="number"/>
        <span aria-hidden="true" class="suffix">
         cm
        </span>
       </div>
       <div aria-live="polite" class="error" id="heightError" role="alert">
       </div>
      </div>
      <div class="form-group" hidden="" id="heightUSGroup">
       <label>
        Height (ft/in)
        <span aria-hidden="true" class="req">
         *
        </span>
       </label>
       <div class="field-row">
        <div class="input-wrap">
         <input aria-describedby="heightUSError" class="input" id="heightFt" inputmode="numeric" max="8" min="4" placeholder="ft" step="1" type="number"/>
         <span aria-hidden="true" class="suffix">
          ft
         </span>
        </div>
        <div class="input-wrap">
         <input aria-describedby="heightUSError" class="input" id="heightIn" inputmode="decimal" max="11.9" min="0" placeholder="in" step="0.1" type="number"/>
         <span aria-hidden="true" class="suffix">
          in
         </span>
        </div>
       </div>
       <div aria-live="polite" class="error" id="heightUSError" role="alert">
       </div>
      </div>
      <!-- Weight -->
      <div class="form-group" id="weightMetricGroup">
       <label for="weightKg">
        Weight (kg)
        <span aria-hidden="true" class="req">
         *
        </span>
       </label>
       <div class="input-wrap">
        <input aria-describedby="weightError" aria-required="true" class="input" id="weightKg" inputmode="decimal" max="250" min="35" placeholder="e.g., 72" step="0.1" type="number"/>
        <span aria-hidden="true" class="suffix">
         kg
        </span>
       </div>
       <div aria-live="polite" class="error" id="weightError" role="alert">
       </div>
      </div>
      <div class="form-group" hidden="" id="weightUSGroup">
       <label for="weightLb">
        Weight (lb)
        <span aria-hidden="true" class="req">
         *
        </span>
       </label>
       <div class="input-wrap">
        <input aria-describedby="weightUSError" class="input" id="weightLb" inputmode="decimal" max="550" min="77" placeholder="e.g., 160" step="0.1" type="number"/>
        <span aria-hidden="true" class="suffix">
         lb
        </span>
       </div>
       <div aria-live="polite" class="error" id="weightUSError" role="alert">
       </div>
      </div>
      <!-- Body fat (optional) -->
      <div class="form-group">
       <div style="display:flex; align-items:center; gap:.25rem;">
        <label for="bodyFat">
         Body fat (%)
         <span class="help">
          (optional)
         </span>
        </label>
        <button aria-controls="tip-bf-text" aria-expanded="false" aria-label="Why body fat?" class="tip-btn" id="tip-bf" type="button">
         ?
        </button>
       </div>
       <div class="tooltip" data-open="false" id="tip-bf-text" role="note">
        If provided, you can use the Katch–McArdle equation based on lean mass: BMR = 370 + 21.6 × LBM(kg).
       </div>
       <div class="input-wrap">
        <input aria-describedby="bfHelp" class="input" id="bodyFat" inputmode="decimal" max="60" min="4" placeholder="e.g., 20" step="0.1" type="number"/>
        <span aria-hidden="true" class="suffix">
         %
        </span>
       </div>
       <div class="help" id="bfHelp">
        Typical ranges: 10–25% (men), 18–32% (women).
       </div>
      </div>
      <!-- Equation -->
      <div class="form-group">
       <div style="display:flex; align-items:center; gap:.25rem;">
        <label for="equation">
         Equation
         <span aria-hidden="true" class="req">
          *
         </span>
        </label>
        <button aria-controls="tip-eq-text" aria-expanded="false" aria-label="Learn about equations" class="tip-btn" id="tip-eq" type="button">
         ?
        </button>
       </div>
       <div class="tooltip" data-open="false" id="tip-eq-text" role="note">
        • Mifflin–St Jeor: strong default for adults. • Katch–McArdle: uses lean mass (requires body fat %). • Harris–Benedict (revised): classical alternative.
       </div>
       <select aria-describedby="equationError tip-eq-text" aria-required="true" class="input" id="equation">
        <option selected="" value="mifflin">
         Mifflin–St Jeor (default)
        </option>
        <option value="katch">
         Katch–McArdle (needs body fat %)
        </option>
        <option value="harris">
         Harris–Benedict (revised)
        </option>
       </select>
       <div aria-live="polite" class="error" id="equationError" role="alert">
       </div>
      </div>
      <!-- Activity -->
      <div class="form-group">
       <div style="display:flex; align-items:center; gap:.25rem;">
        <label for="activity">
         Activity level
         <span aria-hidden="true" class="req">
          *
         </span>
        </label>
        <button aria-controls="tip-activity-text" aria-expanded="false" aria-label="How to choose activity" class="tip-btn" id="tip-activity" type="button">
         ?
        </button>
       </div>
       <div class="tooltip" data-open="false" id="tip-activity-text" role="note">
        Sedentary: desk job, little exercise (1.2) • Light: 1–3 days/week (1.375) • Moderate: 3–5 d/w (1.55) • Active: 6–7 d/w (1.725) • Very active: physical job + training (1.9)
       </div>
       <select aria-describedby="activityError tip-activity-text" aria-required="true" class="input" id="activity">
        <option value="1.2">
         Sedentary (PAL 1.2)
        </option>
        <option value="1.375">
         Light (PAL 1.375)
        </option>
        <option selected="" value="1.55">
         Moderate (PAL 1.55)
        </option>
        <option value="1.725">
         Active (PAL 1.725)
        </option>
        <option value="1.9">
         Very active (PAL 1.9)
        </option>
       </select>
       <div aria-live="polite" class="error" id="activityError" role="alert">
       </div>
      </div>
      <!-- Goal -->
      <div class="form-group">
       <div style="display:flex; align-items:center; gap:.25rem;">
        <label for="goal">
         Goal
         <span aria-hidden="true" class="req">
          *
         </span>
        </label>
        <button aria-controls="tip-goal-text" aria-expanded="false" aria-label="About calorie goals" class="tip-btn" id="tip-goal" type="button">
         ?
        </button>
       </div>
       <div class="tooltip" data-open="false" id="tip-goal-text" role="note">
        Targets apply a safe percentage to your maintenance (TDEE). Adjust after 2–3 weeks based on real outcomes.
       </div>
       <select aria-describedby="goalError tip-goal-text" aria-required="true" class="input" id="goal">
        <option selected="" value="maintain">
         Maintain (0%)
        </option>
        <option value="cut-10">
         Mild loss (−10%)
        </option>
        <option value="cut-20">
         Moderate loss (−20%)
        </option>
        <option value="cut-25">
         Aggressive loss (−25%)
        </option>
        <option value="gain-10">
         Mild gain (+10%)
        </option>
        <option value="gain-20">
         Moderate gain (+20%)
        </option>
       </select>
       <div aria-live="polite" class="error" id="goalError" role="alert">
       </div>
      </div>
      <!-- Protein settings -->
      <div class="form-group">
       <fieldset>
        <legend>
         Protein target
        </legend>
        <div aria-label="Protein target" class="radio-group" role="radiogroup">
         <input checked="" class="radio-input" id="protAuto" name="proteinMode" type="radio" value="auto"/>
         <label class="radio-label" for="protAuto">
          Auto: 1.6 g/kg
         </label>
         <input class="radio-input" id="protCustom" name="proteinMode" type="radio" value="custom"/>
         <label class="radio-label" for="protCustom">
          Custom (g/kg)
         </label>
        </div>
       </fieldset>
       <div class="input-wrap" hidden="" id="proteinCustomWrap">
        <label class="sr-only" for="proteinPerKg">
         Protein grams per kg
        </label>
        <input aria-describedby="protHelp" class="input" id="proteinPerKg" inputmode="decimal" max="3.2" min="0.6" step="0.1" type="number" value="1.6"/>
        <span aria-hidden="true" class="suffix">
         g/kg
        </span>
       </div>
       <div class="help" id="protHelp">
        Evidence-based range: 1.2–2.2 g/kg for active individuals; adjust to preference and tolerance.
       </div>
      </div>
      <div aria-label="Calculator controls" class="actions" role="toolbar">
       <button aria-label="Calculate calories" class="btn" id="calcBtn" type="button">
        Calculate
       </button>
       <button aria-label="Reset form" class="btn secondary" id="resetBtn" type="button">
        Reset
       </button>
      </div>
      <section aria-label="Calculation results" aria-live="polite" class="results" id="results" role="region">
       <h3>
        Results
       </h3>
       <div class="result-grid" id="resultGrid">
        <div class="result-item">
         <div class="result-label">
          BMR
         </div>
         <div class="result-value" id="bmrOut">
          —
         </div>
        </div>
        <div class="result-item">
         <div class="result-label">
          TDEE (maintenance)
         </div>
         <div class="result-value" id="tdeeOut">
          —
         </div>
        </div>
        <div class="result-item">
         <div class="result-label">
          Target calories
         </div>
         <div class="result-value" id="targetOut">
          —
         </div>
        </div>
        <div class="result-item">
         <div class="result-label">
          Protein per day
         </div>
         <div class="result-value" id="proteinOut">
          —
         </div>
        </div>
        <div class="result-item">
         <div class="result-label">
          Fat per day
         </div>
         <div class="result-value" id="fatOut">
          —
         </div>
        </div>
        <div class="result-item">
         <div class="result-label">
          Carbs per day
         </div>
         <div class="result-value" id="carbOut">
          —
         </div>
        </div>
        <div class="result-item">
         <div class="result-label">
          BMI
         </div>
         <div class="result-value" id="bmiOut">
          —
         </div>
        </div>
        <div class="result-item">
         <div class="result-label">
          Est. weekly change
         </div>
         <div class="result-value" id="weeklyOut">
          —
         </div>
        </div>
       </div>
       <p class="note" id="resultNote">
        Tip: Treat targets as a starting point; track for 2–3 weeks and adjust 5–10% as needed.
       </p>
      </section>
     </section>
    </aside>
    <article class="content">
     <section aria-labelledby="data-method">
      <h2 id="data-method">
       Data Source and Methodology
      </h2>
      <ul>
       <li>
        <strong>
         Mifflin–St Jeor (1990):
        </strong>
        Mifflin MD, St Jeor ST. “A new predictive equation for resting energy expenditure in healthy individuals.” American Journal of Clinical Nutrition. 1990;51(2):241–247.
        <a href="https://pubmed.ncbi.nlm.nih.gov/2305711/" rel="noopener">
         PubMed
        </a>
       </li>
       <li>
        <strong>
         Harris–Benedict (revised 1984):
        </strong>
        Roza AM, Shizgal HM. “The Harris Benedict equation reevaluated.” American Journal of Clinical Nutrition. 1984;40(1):168–182.
        <a href="https://pubmed.ncbi.nlm.nih.gov/6741850/" rel="noopener">
         PubMed
        </a>
       </li>
       <li>
        <strong>
         Katch–McArdle:
        </strong>
        Katch VL, McArdle WD. “Nutrition, Weight Control, and Exercise.” 1983–1996 editions. Common formulation: BMR = 370 + 21.6 × lean mass(kg).
       </li>
       <li>
        <strong>
         Activity multipliers (PAL):
        </strong>
        Consistent with commonly applied ranges aligned to FAO/WHO/UNU energy requirement frameworks. See FAO/WHO/UNU Expert Consultation (2004).
        <a href="https://www.fao.org/3/y5686e/y5686e00.htm" rel="noopener">
         FAO
        </a>
       </li>
      </ul>
      <p>
       <em>
        Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.
       </em>
      </p>
     </section>
     <section aria-labelledby="formulas">
      <h2 id="formulas">
       The Formula Explained
      </h2>
      <div class="formula-box">
       <p>
        BMI: $\\displaystyle BMI=\\frac{\\text{weight (kg)}}{\\left(\\frac{\\text{height (cm)}}{100}\\right)^2}$
       </p>
       <p>
        Mifflin–St Jeor:
       </p>
       <p>
        $\\displaystyle BMR_{male}=10W+6.25H-5A+5 \\quad\\; BMR_{female}=10W+6.25H-5A-161$
       </p>
       <p>
        Harris–Benedict (revised):
       </p>
       <p>
        $\\displaystyle BMR_{male}=88.362+13.397W+4.799H-5.677A$
       </p>
       <p>
        $\\displaystyle BMR_{female}=447.593+9.247W+3.098H-4.330A$
       </p>
       <p>
        Katch–McArdle: $\\displaystyle BMR=370+21.6\\times LBM$, where $LBM=W\\times (1-\\tfrac{BF}{100})$
       </p>
       <p>
        TDEE: $\\displaystyle TDEE=BMR\\times PAL$
       </p>
       <p>
        Goal target: $\\displaystyle kcal_{target}=TDEE\\times (1+\\Delta)$ where $\\Delta$ is −0.10, −0.20, −0.25, +0.10, +0.20, or 0.
       </p>
      </div>
      <p class="help">
       W = weight (kg), H = height (cm), A = age (years), BF = body fat (%), PAL = activity multiplier.
      </p>
     </section>
     <section aria-labelledby="glossary">
      <h2 id="glossary">
       Glossary of Variables
      </h2>
      <div class="def-list">
       <div class="def">
        <strong>
         Sex at birth
        </strong>
        Required for Mifflin and Harris–Benedict; affects BMR constants.
       </div>
       <div class="def">
        <strong>
         Age
        </strong>
        Years, adults only (14–80 supported in this tool).
       </div>
       <div class="def">
        <strong>
         Height
        </strong>
        Body height in centimeters (or feet/inches converted to cm).
       </div>
       <div class="def">
        <strong>
         Weight
        </strong>
        Body mass in kilograms (or pounds converted to kg).
       </div>
       <div class="def">
        <strong>
         Body fat %
        </strong>
        Optional; enables Katch–McArdle via lean mass.
       </div>
       <div class="def">
        <strong>
         BMR
        </strong>
        Basal Metabolic Rate: energy at complete rest.
       </div>
       <div class="def">
        <strong>
         TDEE
        </strong>
        Total Daily Energy Expenditure: BMR × activity multiplier.
       </div>
       <div class="def">
        <strong>
         Protein/Fat/Carbs
        </strong>
        Daily macronutrient targets based on selected rule.
       </div>
       <div class="def">
        <strong>
         BMI
        </strong>
        Body Mass Index; screening metric, not a diagnosis.
       </div>
       <div class="def">
        <strong>
         Weekly change
        </strong>
        Estimated weekly weight change from daily surplus/deficit (≈ 7700 kcal per kg).
       </div>
      </div>
     </section>
     <section aria-labelledby="worked">
      <h2 id="worked">
       Worked Example
      </h2>
      <h3>
       How It Works: A Step-by-Step Example
      </h3>
      <ol>
       <li>
        Inputs: male, 30 years, 175 cm, 72 kg, Moderate activity (1.55), Mifflin–St Jeor, Maintain.
       </li>
       <li>
        Compute BMR (male): BMR = 10·72 + 6.25·175 − 5·30 + 5 = 720 + 1093.75 − 150 + 5 = 1668.75 ≈ 1669 kcal.
       </li>
       <li>
        TDEE = 1669 × 1.55 ≈ 2587 kcal.
       </li>
       <li>
        Maintenance target = 2587 kcal/day. Protein (1.6 g/kg) = 115 g (460 kcal). Fat (0.8 g/kg) = 58 g (522 kcal). Carbs = (2587 − 460 − 522)/4 ≈ 401 g.
       </li>
       <li>
        BMI = 72 / (1.75²) ≈ 23.5.
       </li>
      </ol>
      <p class="help">
       Your own results will differ based on your profile and chosen goal.
      </p>
     </section>
     <section aria-labelledby="faq">
      <h2 id="faq">
       Frequently Asked Questions (FAQ)
      </h2>
      <div class="faq-item">
       <h3>
        How accurate are calorie calculators?
       </h3>
       <p>
        They provide estimates. Individual energy needs vary with genetics, NEAT (non-exercise activity), hormones, and measurement error. Track outcomes and adjust by 5–10%.
       </p>
      </div>
      <div class="faq-item">
       <h3>
        Should I use Katch–McArdle if I know my body fat?
       </h3>
       <p>
        Often yes. It reflects lean mass and can improve precision, especially for people with higher or lower body fat than average.
       </p>
      </div>
      <div class="faq-item">
       <h3>
        What if my weight isn’t changing?
       </h3>
       <p>
        Average your scale weight 3–4 days per week for 2–3 weeks. If stable, adjust calories by ~150–250 kcal/day and reassess.
       </p>
      </div>
      <div class="faq-item">
       <h3>
        Can I set very aggressive deficits?
       </h3>
       <p>
        We limit presets to −25% as a safety guard. Larger deficits can harm performance, recovery, and micronutrient intake. Seek clinical advice before extreme changes.
       </p>
      </div>
      <div class="faq-item">
       <h3>
        Do macros matter as much as calories?
       </h3>
       <p>
        Calories drive weight change. Adequate protein supports satiety and lean mass; fats support hormones; carbs fuel training. Choose a sustainable distribution.
       </p>
      </div>
      <div class="faq-item">
       <h3>
        Where can I learn more about daily calorie needs?
       </h3>
       <p>
        See an accessible overview from the BBC:
        <a href="https://www.bbc.co.uk/food/articles/how_many_calories_do_you_need" rel="noopener">
         How many calories do you need?
        </a>
       </p>
      </div>
     </section>
     <div class="author-box">
      <p>
       Tool developed by
       <strong>
        Ugo Candido
       </strong>
       . Content verified by
       <strong>
        Registered Dietitian (RD) reviewers
       </strong>
       . Last reviewed for accuracy on:
       <time datetime="2025-09-14">
        September 14, 2025
       </time>
       .
      </p>
     </div>
    </article>
   </div>
  </main>
  <!-- Standard Footer -->
  <script defer="">
   (function(){
      'use strict';

      // Elements
      const unitMetric = document.getElementById('unitMetric');
      const unitUS = document.getElementById('unitUS');

      const sexEl = document.getElementById('sex');
      const ageEl = document.getElementById('age');

      const heightMetricGroup = document.getElementById('heightMetricGroup');
      const heightUSGroup = document.getElementById('heightUSGroup');
      const heightCmEl = document.getElementById('heightCm');
      const heightFtEl = document.getElementById('heightFt');
      const heightInEl = document.getElementById('heightIn');

      const weightMetricGroup = document.getElementById('weightMetricGroup');
      const weightUSGroup = document.getElementById('weightUSGroup');
      const weightKgEl = document.getElementById('weightKg');
      const weightLbEl = document.getElementById('weightLb');

      const bodyFatEl = document.getElementById('bodyFat');

      const eqEl = document.getElementById('equation');
      const activityEl = document.getElementById('activity');
      const goalEl = document.getElementById('goal');

      const protAuto = document.getElementById('protAuto');
      const protCustom = document.getElementById('protCustom');
      const proteinCustomWrap = document.getElementById('proteinCustomWrap');
      const proteinPerKgEl = document.getElementById('proteinPerKg');

      const bmrOut = document.getElementById('bmrOut');
      const tdeeOut = document.getElementById('tdeeOut');
      const targetOut = document.getElementById('targetOut');
      const proteinOut = document.getElementById('proteinOut');
      const fatOut = document.getElementById('fatOut');
      const carbOut = document.getElementById('carbOut');
      const bmiOut = document.getElementById('bmiOut');
      const weeklyOut = document.getElementById('weeklyOut');

      const calcBtn = document.getElementById('calcBtn');
      const resetBtn = document.getElementById('resetBtn');

      // Tooltips
      function setupTip(btnId, panelId){
        const btn = document.getElementById(btnId);
        const panel = document.getElementById(panelId);
        btn?.addEventListener('click', () => {
          const open = panel.getAttribute('data-open') === 'true';
          panel.setAttribute('data-open', String(!open));
          btn.setAttribute('aria-expanded', String(!open));
        });
        btn?.addEventListener('keydown', (e)=>{
          if(e.key === 'Escape'){ panel.setAttribute('data-open','false'); btn.setAttribute('aria-expanded','false'); btn.focus(); }
        });
      }
      setupTip('tip-sex','tip-sex-text');
      setupTip('tip-bf','tip-bf-text');
      setupTip('tip-eq','tip-eq-text');
      setupTip('tip-activity','tip-activity-text');
      setupTip('tip-goal','tip-goal-text');

      // Errors
      const errors = {
        sex: document.getElementById('sexError'),
        age: document.getElementById('ageError'),
        heightMetric: document.getElementById('heightError'),
        heightUS: document.getElementById('heightUSError'),
        weightMetric: document.getElementById('weightError'),
        weightUS: document.getElementById('weightUSError'),
        equation: document.getElementById('equationError'),
        activity: document.getElementById('activityError'),
        goal: document.getElementById('goalError')
      };

      function clearError(el, errorEl){
        if(!errorEl) return;
        errorEl.textContent = '';
        el?.setAttribute('aria-invalid','false');
      }
      function setError(el, errorEl, msg){
        if(!errorEl) return;
        errorEl.textContent = msg;
        el?.setAttribute('aria-invalid','true');
      }

      // Unit toggle
      function syncUnits(){
        const metric = unitMetric.checked;
        heightMetricGroup.hidden = !metric;
        heightUSGroup.hidden = metric;
        weightMetricGroup.hidden = !metric;
        weightUSGroup.hidden = metric;
      }
      unitMetric.addEventListener('change', syncUnits);
      unitUS.addEventListener('change', syncUnits);
      syncUnits();

      // Protein mode toggle
      function syncProteinMode(){
        proteinCustomWrap.hidden = !protCustom.checked;
        if(!protCustom.checked){
          proteinPerKgEl.value = 1.6;
        }
      }
      protAuto.addEventListener('change', syncProteinMode);
      protCustom.addEventListener('change', syncProteinMode);
      syncProteinMode();

      // Validation (on blur as required)
      sexEl.addEventListener('blur', ()=> {
        if(!sexEl.value && (eqEl.value === 'mifflin' || eqEl.value === 'harris')){
          setError(sexEl, errors.sex, 'Please choose your sex at birth for the selected equation.');
        } else {
          clearError(sexEl, errors.sex);
        }
      });
      ageEl.addEventListener('blur', ()=>{
        const v = Number(ageEl.value);
        if(!v) setError(ageEl, errors.age, 'Enter your age in years.');
        else if(v < 14 || v > 80) setError(ageEl, errors.age, 'Age should be between 14 and 80 for this tool.');
        else clearError(ageEl, errors.age);
      });
      heightCmEl.addEventListener('blur', ()=>{
        if(heightMetricGroup.hidden) return;
        const v = Number(heightCmEl.value);
        if(!v) setError(heightCmEl, errors.heightMetric, 'Enter height in centimeters.');
        else if(v < 120 || v > 250) setError(heightCmEl, errors.heightMetric, 'Height should be between 120 cm and 250 cm.');
        else clearError(heightCmEl, errors.heightMetric);
      });
      [heightFtEl, heightInEl].forEach(el=>{
        el.addEventListener('blur', ()=>{
          if(heightUSGroup.hidden) return;
          const ft = Number(heightFtEl.value);
          const inches = Number(heightInEl.value);
          if(!ft && !inches) { setError(heightFtEl, errors.heightUS, 'Enter your height in feet and inches.'); return; }
          const totalIn = ft*12 + inches;
          if(totalIn < 47 || totalIn > 98) setError(heightFtEl, errors.heightUS, 'Height must be roughly 4 ft to 8 ft 2 in.');
          else clearError(heightFtEl, errors.heightUS);
        });
      });
      weightKgEl.addEventListener('blur', ()=>{
        if(weightMetricGroup.hidden) return;
        const v = Number(weightKgEl.value);
        if(!v) setError(weightKgEl, errors.weightMetric, 'Enter weight in kilograms.');
        else if(v < 35 || v > 250) setError(weightKgEl, errors.weightMetric, 'Weight should be between 35 kg and 250 kg.');
        else clearError(weightKgEl, errors.weightMetric);
      });
      weightLbEl.addEventListener('blur', ()=>{
        if(weightUSGroup.hidden) return;
        const v = Number(weightLbEl.value);
        if(!v) setError(weightLbEl, errors.weightUS, 'Enter weight in pounds.');
        else if(v < 77 || v > 550) setError(weightLbEl, errors.weightUS, 'Weight should be between 77 lb and 550 lb.');
        else clearError(weightLbEl, errors.weightUS);
      });
      eqEl.addEventListener('blur', ()=>{
        if(eqEl.value === 'katch' && (!bodyFatEl.value || Number(bodyFatEl.value) <= 0)){
          setError(eqEl, errors.equation, 'Katch–McArdle requires body fat %. Add it or switch equation.');
        } else {
          clearError(eqEl, errors.equation);
        }
      });
      activityEl.addEventListener('blur', ()=> {
        if(!activityEl.value) setError(activityEl, errors.activity, 'Choose your activity level.');
        else clearError(activityEl, errors.activity);
      });
      goalEl.addEventListener('blur', ()=> {
        if(!goalEl.value) setError(goalEl, errors.goal, 'Select a goal.');
        else clearError(goalEl, errors.goal);
      });

      // Helpers
      const fmt = new Intl.NumberFormat(undefined, { maximumFractionDigits: 0 });
      const fmt1 = new Intl.NumberFormat(undefined, { maximumFractionDigits: 1 });
      function toKg(lb){ return lb / 2.2046226218; }
      function toCm(ft, inch){ return (ft*12 + inch) * 2.54; }
      function clamp(n, min, max){ return Math.min(Math.max(n, min), max); }

      function gatherInputs(){
        const metric = unitMetric.checked;
        const sex = sexEl.value;
        const age = Number(ageEl.value);
        let heightCm = metric ? Number(heightCmEl.value) : toCm(Number(heightFtEl.value||0), Number(heightInEl.value||0));
        let weightKg = metric ? Number(weightKgEl.value) : toKg(Number(weightLbEl.value||0));
        const bf = bodyFatEl.value ? clamp(Number(bodyFatEl.value), 0, 100) : null;
        const eq = eqEl.value;
        const pal = Number(activityEl.value);
        const goal = goalEl.value;
        const proteinPerKg = protCustom.checked ? Number(proteinPerKgEl.value||1.6) : 1.6;

        return { metric, sex, age, heightCm, weightKg, bf, eq, pal, goal, proteinPerKg };
      }

      function validateAll(state){
        let ok = true;
        // sex if needed
        if((state.eq === 'mifflin' || state.eq === 'harris') && !state.sex){
          setError(sexEl, errors.sex, 'Please choose your sex at birth for the selected equation.');
          ok = false;
        } else clearError(sexEl, errors.sex);

        if(!state.age || state.age < 14 || state.age > 80){
          setError(ageEl, errors.age, 'Age should be between 14 and 80 for this tool.');
          ok = false;
        } else clearError(ageEl, errors.age);

        if(unitMetric.checked){
          if(!state.heightCm || state.heightCm < 120 || state.heightCm > 250){
            setError(heightCmEl, errors.heightMetric, 'Enter a height between 120 and 250 cm.');
            ok = false;
          } else clearError(heightCmEl, errors.heightMetric);
          if(!state.weightKg || state.weightKg < 35 || state.weightKg > 250){
            setError(weightKgEl, errors.weightMetric, 'Enter a weight between 35 and 250 kg.');
            ok = false;
          } else clearError(weightKgEl, errors.weightMetric);
        } else {
          const ft = Number(heightFtEl.value||0), inch = Number(heightInEl.value||0);
          const totalIn = ft*12 + inch;
          if(totalIn < 47 || totalIn > 98){
            setError(heightFtEl, errors.heightUS, 'Enter a realistic height (approx. 4 ft to 8 ft 2 in).');
            ok = false;
          } else clearError(heightFtEl, errors.heightUS);
          const lb = Number(weightLbEl.value||0);
          if(lb < 77 || lb > 550){
            setError(weightLbEl, errors.weightUS, 'Enter a weight between 77 and 550 lb.');
            ok = false;
          } else clearError(weightLbEl, errors.weightUS);
        }
        if(state.eq === 'katch' && (state.bf === null || state.bf <= 0)){
          setError(eqEl, errors.equation, 'Katch–McArdle requires body fat %. Add it or switch equation.');
          ok = false;
        } else clearError(eqEl, errors.equation);

        if(!state.pal){
          setError(activityEl, errors.activity, 'Choose your activity level.');
          ok = false;
        } else clearError(activityEl, errors.activity);

        if(!state.goal){
          setError(goalEl, errors.goal, 'Select a goal.');
          ok = false;
        } else clearError(goalEl, errors.goal);

        return ok;
      }

      function computeBMR(state){
        const { eq, sex, age, heightCm, weightKg, bf } = state;
        if(eq === 'katch' && bf !== null && bf > 0){
          const lbm = weightKg * (1 - bf/100);
          return 370 + 21.6 * lbm;
        }
        if(eq === 'harris'){
          if(sex === 'male') return 88.362 + 13.397*weightKg + 4.799*heightCm - 5.677*age;
          if(sex === 'female') return 447.593 + 9.247*weightKg + 3.098*heightCm - 4.330*age;
          return NaN;
        }
        // Mifflin default
        if(sex === 'male') return 10*weightKg + 6.25*heightCm - 5*age + 5;
        if(sex === 'female') return 10*weightKg + 6.25*heightCm - 5*age - 161;
        return NaN;
      }

      function goalFactor(goal){
        switch(goal){
          case 'maintain': return 1.0;
          case 'cut-10': return 0.90;
          case 'cut-20': return 0.80;
          case 'cut-25': return 0.75;
          case 'gain-10': return 1.10;
          case 'gain-20': return 1.20;
          default: return 1.0;
        }
      }

      function computeBMI(kg, cm){
        const m = cm/100;
        return kg / (m*m);
      }
      function bmiCategory(bmi){
        if(bmi < 18.5) return 'Underweight';
        if(bmi < 25) return 'Normal';
        if(bmi < 30) return 'Overweight';
        return 'Obesity';
      }

      function computeMacros(state, kcalTarget){
        // Protein
        const proteinPerKg = clamp(state.proteinPerKg || 1.6, 0.6, 3.2);
        const pG = proteinPerKg * state.weightKg;
        // Fat minimum ~0.8 g/kg
        const fGmin = 0.8 * state.weightKg;
        const fKcalMin = fGmin * 9;
        // Carbs from remainder
        const pKcal = pG * 4;
        let remaining = kcalTarget - pKcal - fKcalMin;
        let cG = Math.max(0, remaining / 4);
        let fG = fGmin;
        if(cG < 0){
          // If deficit is too large, reduce fat to 0.6 g/kg before reducing protein
          const fGfloor = 0.6 * state.weightKg;
          const extra = (fG - fGfloor) * 9;
          remaining = kcalTarget - pKcal - fGfloor*9;
          if(remaining >= 0){
            fG = fGfloor; cG = remaining/4;
          } else {
            fG = fGfloor;
            cG = 0; // worst case, leave protein intact
          }
        }
        return { proteinG: pG, fatG: fG, carbG: cG };
      }

      function estimateWeekly(state, kcalTarget){
        const tdee = computeBMR(state) * state.pal;
        const delta = kcalTarget - tdee; // daily diff
        const kgPerDay = delta / 7700; // ≈ 7700 kcal per kg
        const kgPerWeek = kgPerDay * 7;
        return kgPerWeek;
      }

      function renderResults(state){
        if(!validateAll(state)) return;

        const bmr = computeBMR(state);
        const tdee = bmr * state.pal;
        const factor = goalFactor(state.goal);
        const target = tdee * factor;

        const macros = computeMacros(state, target);
        const bmi = computeBMI(state.weightKg, state.heightCm);
        const weeklyKg = estimateWeekly(state, target);

        bmrOut.textContent = isFinite(bmr) ? `${fmt.format(Math.round(bmr))} kcal` : '—';
        tdeeOut.textContent = isFinite(tdee) ? `${fmt.format(Math.round(tdee))} kcal` : '—';
        targetOut.textContent = isFinite(target) ? `${fmt.format(Math.round(target))} kcal` : '—';

        proteinOut.textContent = `${fmt.format(Math.round(macros.proteinG))} g`;
        fatOut.textContent = `${fmt.format(Math.round(macros.fatG))} g`;
        carbOut.textContent = `${fmt.format(Math.round(macros.carbG))} g`;

        bmiOut.textContent = `${fmt1.format(bmi)} (${bmiCategory(bmi)})`;

        const sign = weeklyKg > 0 ? '+' : '';
        weeklyOut.textContent = `${sign}${fmt1.format(weeklyKg)} kg/wk`;
      }

      // Live updates on changes (without heavy recalcs)
      const inputs = [
        sexEl, ageEl, heightCmEl, heightFtEl, heightInEl,
        weightKgEl, weightLbEl, bodyFatEl, eqEl, activityEl, goalEl, proteinPerKgEl,
        unitMetric, unitUS, protAuto, protCustom
      ];
      inputs.forEach(el => el.addEventListener('input', () => renderResults(gatherInputs())));

      // Buttons
      calcBtn.addEventListener('click', () => renderResults(gatherInputs()));
      resetBtn.addEventListener('click', () => {
        // Reset fields to sensible defaults
        unitMetric.checked = true; unitUS.checked = false; syncUnits();
        sexEl.value = '';
        ageEl.value = '';
        heightCmEl.value = '';
        heightFtEl.value = '';
        heightInEl.value = '';
        weightKgEl.value = '';
        weightLbEl.value = '';
        bodyFatEl.value = '';
        eqEl.value = 'mifflin';
        activityEl.value = '1.55';
        goalEl.value = 'maintain';
        protAuto.checked = true; protCustom.checked = false; syncProteinMode();
        proteinPerKgEl.value = 1.6;
        Object.values(errors).forEach(e => e.textContent = '');
        [sexEl, ageEl, heightCmEl, heightFtEl, heightInEl, weightKgEl, weightLbEl, eqEl, activityEl, goalEl].forEach(el => el?.setAttribute('aria-invalid','false'));
        // Clear results
        [bmrOut, tdeeOut, targetOut, proteinOut, fatOut, carbOut, bmiOut, weeklyOut].forEach(el => el.textContent = '—');
      });

      // Initial render with some placeholder defaults to avoid empty UI
      (function setSampleDefaults(){
        unitMetric.checked = true; syncUnits();
        sexEl.value = 'male';
        ageEl.value = 30;
        heightCmEl.value = 175;
        weightKgEl.value = 72;
        activityEl.value = '1.55';
        goalEl.value = 'maintain';
        renderResults(gatherInputs());
      })();

      // Manage equation constraints: warn if Katch without BF
      eqEl.addEventListener('change', () => {
        if(eqEl.value === 'katch' && (!bodyFatEl.value || Number(bodyFatEl.value) <= 0)){
          setError(eqEl, errors.equation, 'Katch–McArdle requires body fat %. Add it or switch equation.');
        } else {
          clearError(eqEl, errors.equation);
        }
      });
    })();
  </script>
  <footer class="bg-gray-900 text-white py-12">
   <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
     <div>
      <h3 class="text-2xl font-bold mb-4">
       CalcDomain
      </h3>
      <p class="text-gray-400 mb-4">
       Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
      </p>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Categories
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/finance">
         Finance
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/health-fitness">
         Health &amp; Fitness
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/math-conversions">
         Math &amp; Conversions
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/lifestyle-everyday">
         Lifestyle &amp; Everyday
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/construction-diy">
         Construction &amp; DIY
        </a>
       </li>
      </ul>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Popular Tools
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/mortgage-payment">
         Mortgage Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/percentage-calculator">
         Percentage Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/bmi-calculator">
         BMI Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/auto-loan-calculator">
         Auto Loan Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/house-affordability">
         House Affordability
        </a>
       </li>
      </ul>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Support
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/about">
         About Us
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/contact">
         Contact
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/privacy">
         Privacy Policy
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/terms">
         Terms of Service
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/sitemap">
         Site Map
        </a>
       </li>
      </ul>
     </div>
    </div>
    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
     <p>
      © 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone
     </p>
    </div>
   </div>
  </footer>
  <script defer="True" src="/assets/js/script_menu.js">
  </script>
  <script defer="True" src="/assets/js/script_faq.js">
  </script>
  <script defer="True" src="search.js">
  </script>
 </body>
</html>

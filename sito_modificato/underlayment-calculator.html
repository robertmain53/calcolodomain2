<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/underlayment-calculator">





<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="manifest" href="/site.webmanifest">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Underlayment Calculator - Estimate Flooring Material</title>
<meta name="description" content="Accurately calculate the amount of self-leveling compound, roll, or board underlayment needed for your flooring project. Accounts for waste, units, and material type.">


<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.25rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
font-size: 0.95rem;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
/* Custom focus state for WCAG 2.1 AA */
*:focus-visible {
outline: 3px solid #2563eb;
outline-offset: 2px;
border-radius: 4px;
}
/* Hide number input spinners */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
-webkit-appearance: none;
margin: 0;
}
input[type=number] { -moz-appearance: textfield; }
.error-message {
color: #dc2626;
font-size: 0.875rem;
margin-top: 0.5rem;
display: none; /* Hidden by default */
}
input.invalid {
border-color: #dc2626;
}
.tooltip-button {
background: none;
border: none;
padding: 0.25rem;
margin-left: 0.25rem;
cursor: pointer;
color: #6b7280;
}
.tooltip-button svg {
width: 1rem;
height: 1rem;
}
.tooltip-text {
font-size: 0.875rem;
color: #4b5563;
background-color: #f3f4f6;
border: 1px solid #d1d5db;
padding: 0.75rem;
border-radius: 8px;
margin-top: 0.5rem;
display: none; /* Hidden by default */
}
.unit-label {
position: absolute;
right: 0.75rem;
top: 50%;
transform: translateY(-50%);
color: #6b7280;
font-size: 0.875rem;
}
.input-wrapper {
position: relative;
}

@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
.no-print { display: none !important; }
}
</style>

<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Underlayment Calculator",
  "description": "Accurately calculate the amount of self-leveling compound, roll, or board underlayment needed for your flooring project.",
  "url": "https://calcdomain.com/underlayment-calculator",
  "inLanguage": "en",
  "reviewedBy": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "dateModified": "2026-01-19"
}</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Construction & DIY",
      "item": "https://calcdomain.com/categories/construction-diy"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Construction Diy Materials Estimation",
      "item": "https://calcdomain.com/subcategories/construction-diy-materials-estimation"
    }
  ]
}
</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "HowTo",
"name": "How to Calculate Underlayment Material",
"description": "A step-by-step guide to estimating the amount of underlayment for your floor.",
"step": [
{"@type": "HowToStep", "name": "Select Units and Type", "text": "Choose your measurement system (Imperial or Metric) and the type of underlayment you are using (Rolls, Self-Leveling, or Boards)."},
{"@type": "HowToStep", "name": "Enter Area Dimensions", "text": "Input the total area of your space or the length and width for a single rectangular room."},
{"@type": "HowToStep", "name":V"Enter Material Properties", "text": "Input the properties of the material you are buying, such as roll coverage, bag coverage and depth, or board dimensions."},
{"@type": "HowToStep", "name": "Add Waste Factor", "text": "Add a waste percentage (10-15% is recommended) to account for cuts, seams, and mistakes."},
{"@type": "HowToStep", "name": "Calculate", "text": "Review the total materials needed for your project."}
]
}
</script>
<script src="search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm z-50">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="https://calcdomain.com" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500" autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="https://calcdomain.com/search" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
Categories
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2 no-print" aria-label="Open menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden no-print">
<div class="space-y-2">
<a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
Categories
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10 w-full lg:w-2/3">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm mb-4 text-gray-600" aria-label="Breadcrumbs"><a href="https://calcdomain.com" class="hover:text-blue-600">Home</a> &raquo; <a href="https://calcdomain.com/categories/construction-diy" class="hover:text-blue-600">Construction & DIY</a> &raquo; <a href="https://calcdomain.com/subcategories/construction-diy-materials-estimation" class="hover:text-blue-600">Construction Diy Materials Estimation</a></nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Underlayment Calculator</h1>
<p class="text-gray-600 mb-6">Accurately estimate the materials needed for your flooring project. This tool calculates the required amount of self-leveling compound, underlayment rolls, or boards, helping you buy the right quantity and avoid waste. Ideal for both DIY homeowners and professional contractors.</p>

<div id="error-summary" role="alert" aria-atomic="true" class="bg-red-50 border border-red-200 text-red-800 p-4 rounded-lg mb-6" style="display: none;">
<h4 class="font-bold">Please correct the following errors:</h4>
<ul id="error-list" class="list-disc list-inside mt-2"></ul>
</div>

<form id="calculator-ui" class="space-y-6" novalidate="">
<fieldset>
<legend class="block text-sm font-medium text-gray-700 mb-2">1. Select Unit System</legend>
<div class="flex gap-x-6">
<div class="flex items-center">
<input id="unitImperial" name="unitSystem" type="radio" value="imperial" class="h-4 w-4 text-blue-600 border-gray-300" checked="">
<label for="unitImperial" class="ml-2 block text-sm text-gray-900">Imperial (Feet / Inches)</label>
</div>
<div class="flex items-center">
<input id="unitMetric" name="unitSystem" type="radio" value="metric" class="h-4 w-4 text-blue-600 border-gray-300">
<label for="unitMetric" class="ml-2 block text-sm text-gray-900">Metric (Meters / mm)</label>
</div>
</div>
</fieldset>

<div>
<label for="underlaymentType" class="block text-sm font-medium text-gray-700">2. Underlayment Type <span class="text-red-600">*</span></label>
<select id="underlaymentType" name="underlaymentType" aria-required="true" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<option value="rolls" selected="">Rolls (Foam, Cork, Felt)</option>
<option value="leveler">Self-Leveling Compound</option>
<option value="boards">Boards (Cement, Backer Board)</option>
</select>
</div>

<fieldset>
<legend class="block text-sm font-medium text-gray-700">3. Project Area <span class="text-red-600">*</span></legend>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-2">
<div>
<label for="roomLength" class="block text-sm font-medium text-gray-700">Room Length</label>
<div class="input-wrapper mt-1">
<input type="number" id="roomLength" name="roomLength" min="0" step="0.01" aria-describedby="length-error" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<span class="unit-label unit-length">ft</span>
</div>
<p id="length-error" class="error-message"></p>
</div>
<div>
<label for="roomWidth" class="block text-sm font-medium text-gray-700">Room Width</label>
<div class="input-wrapper mt-1">
<input type="number" id="roomWidth" name="roomWidth" min="0" step="0.01" aria-describedby="width-error" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<span class="unit-label unit-length">ft</span>
</div>
<p id="width-error" class="error-message"></p>
</div>
</div>
<p class="text-center text-gray-500 text-sm my-2">OR</p>
<div>
<label for="totalArea" class="block text-sm font-medium text-gray-700">Total Area (if already known)</label>
<div class="input-wrapper mt-1">
<input type="number" id="totalArea" name="totalArea" min="0" step="0.01" aria-describedby="area-error" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<span class="unit-label unit-area">sq. ft.</span>
</div>
<p id="area-error" class="error-message">Please enter a valid length/width or a total area.</p>
</div>
</fieldset>

<fieldset id="material-inputs" class="space-y-6">
<legend class="block text-sm font-medium text-gray-700">4. Material Properties <span class="text-red-600">*</span></legend>

<div id="rolls-group">
<label for="rollCoverage" class="block text-sm font-medium text-gray-700">Coverage per Roll</label>
<div class="input-wrapper mt-1">
<input type="number" id="rollCoverage" name="rollCoverage" min="0" step="0.1" aria-required="true" value="100" aria-describedby="rollCoverage-error" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<span class="unit-label unit-area">sq. ft.</span>
</div>
<p id="rollCoverage-error" class="error-message"></p>
</div>

<div id="leveler-group" class="hidden space-y-4">
<p class="text-sm text-gray-600">Enter the coverage from the product's bag or Technical Data Sheet (TDS).</p>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<label for="levelerCoverageArea" class="block text-sm font-medium text-gray-700">Bag Coverage Area</label>
<div class="input-wrapper mt-1">
<input type="number" id="levelerCoverageArea" name="levelerCoverageArea" min="0" step="0.1" aria-required="true" value="50" aria-describedby="levelerArea-error" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<span class="unit-label unit-area">sq. ft.</span>
</div>
<p id="levelerArea-error" class="error-message"></p>
</div>
<div>
<label for="levelerCoverageDepth" class="block text-sm font-medium text-gray-700">...at Depth</label>
<div class="input-wrapper mt-1">
<input type="number" id="levelerCoverageDepth" name="levelerCoverageDepth" min="0" step="0.01" aria-required="true" value="0.125" aria-describedby="levelerTDSDepth-error" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<span class="unit-label unit-depth">in</span>
</div>
<p id="levelerTDSDepth-error" class="error-message"></p>
</div>
</div>
<div>
<label for="desiredDepth" class="block text-sm font-medium text-gray-700">Your Desired Pour Depth</label>
<div class="input-wrapper mt-1">
<input type="number" id="desiredDepth" name="desiredDepth" min="0" step="0.01" aria-required="true" value="0.25" aria-describedby="desiredDepth-error" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<span class="unit-label unit-depth">in</span>
</div>
<p id="desiredDepth-error" class="error-message"></p>
</div>
</div>

<div id="boards-group" class="hidden">
<p class="text-sm text-gray-600">Enter the dimensions of a single board.</p>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-2">
<div>
<label for="boardLength" class="block text-sm font-medium text-gray-700">Board Length</label>
<div class="input-wrapper mt-1">
<input type="number" id="boardLength" name="boardLength" min="0" step="0.1" aria-required="true" value="5" aria-describedby="boardLength-error" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<span class="unit-label unit-length">ft</span>
</div>
<p id="boardLength-error" class="error-message"></p>
</div>
<div>
<label for="boardWidth" class="block text-sm font-medium text-gray-700">Board Width</label>
<div class="input-wrapper mt-1">
<input type="number" id="boardWidth" name="boardWidth" min="0" step="0.1" aria-required="true" value="3" aria-describedby="boardWidth-error" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<span class="unit-label unit-length">ft</span>
</div>
<p id="boardWidth-error" class="error-message"></p>
</div>
</div>
</div>
</fieldset>

<div>
<div class="flex items-center">
<label for="wasteFactor" class="block text-sm font-medium text-gray-700">5. Waste Factor <span class="text-red-600">*</span></label>
<button type="button" class="tooltip-button" aria-label="Show waste factor help" aria-controls="waste-tooltip" aria-expanded="false" id="waste-tooltip-btn">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.061-1.061 3 3 0 112.871 5.026v.345a.75.75 0 01-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 108.94 6.94zM10 15.25a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75h-.008a.75.75 0 01-.75-.75v-.008z" clip-rule="evenodd"></path>
</svg>
</button>
</div>
<div class="input-wrapper mt-1">
<input type="number" id="wasteFactor" name="wasteFactor" value="10" step="1" min="0" max="100" aria-required="true" aria-describedby="waste-error waste-tooltip" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<span class="unit-label">%</span>
</div>
<p id="waste-error" class="error-message"></p>
<div id="waste-tooltip" role="tooltip" class="tooltip-text">
We recommend adding 10-15% to account for cuts, seams, and potential mistakes. Complex room layouts or diagonal installations may require 15-20%.
</div>
</div>

<div class="flex flex-col sm:flex-row gap-4 pt-4">
<button type="submit" id="calculateBtn" class="w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">Calculate</button>
<button type="reset" id="resetBtn" class="w-full sm:w-auto px-8 py-3 bg-gray-200 text-gray-800 font-semibold rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 no-print">Reset</button>
</div>
</form>

<section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6 min-h-[150px]" style="display: none;" aria-live="polite">
<h3 class="text-xl font-semibold text-gray-900 mb-4">Your Project Estimate</h3>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
<div class="result-card">
<h4>Total Area (with Waste)</h4>
<p id="total-area-result">0 <span class="unit-area">sq. ft.</span></p>
</div>
<div class="result-card">
<h4 id="result-label">Materials Needed</h4>
<p id="result-value">0</p>
</div>
</div>

<details class="mt-6 bg-white rounded-lg no-print">
<summary class="font-semibold text-gray-800 p-3">View Calculation Breakdown</summary>
<div class="p-4 border-t border-gray-200 text-sm">
<ul class="space-y-2">
<li><strong>Base Area:</strong> <span id="breakdown-base-area"></span></li>
<li><strong>Waste Factor:</strong> <span id="breakdown-waste-factor"></span></li>
<li><strong>Waste Area:</strong> <span id="breakdown-waste-area"></span></li>
<li><strong>Total Area to Cover:</strong> <span id="breakdown-total-area"></span></li>
<li id="breakdown-material-line"><strong>Material Coverage:</strong> <span id="breakdown-material-coverage"></span></li>
<li class="font-semibold pt-2 border-t border-gray-100"><strong>Formula:</strong> <span id="breakdown-formula"></span></li>
</ul>
</div>
</details>
</section>
</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
<h2>Data Source and Methodology</h2>
<p>This calculator's estimations are based on standard geometric formulas and user-provided material dimensions. The most critical data comes from **you** and the product you are using.</p>
<p><strong>Authoritative Source:</strong> The **Technical Data Sheet (TDS)** or product packaging provided by the underlayment manufacturer (e.g., Mapei, Sika, Custom Building Products, etc.). Coverage rates can vary significantly between products.</p>
<p><strong>Methodology:</strong> All calculations are based strictly on the formulas below. **Always** verify these estimates against your specific product's TDS and your own on-site measurements before purchasing materials.</p>

<h2>The Formulas Explained</h2>
<p>The calculation changes based on the material type selected. All calculations begin by determining the total area, including waste.</p>

<h3>1. Total Area Calculation</h3>
<p>First, we find the base area ($A_{\text{base}}$) and add the waste factor ($W_{\%}$).</p>
<div class="formula-box">
$$ A_{\text{total}} = A_{\text{base}} \times (1 + \frac{W_{\%}}{100}) $$
</div>
<p>Where $A_{\text{base}}$ is either your provided `Total Area` or the calculated $L \times W$.</p>

<h3>2. Material Calculation (by Type)</h3>

<h4>A. Underlayment Rolls</h4>
<p>The total area is divided by the coverage area of a single roll ($A_{\text{roll}}$). We use the ceiling function ($\lceil \dots \rceil$) to round up, as you cannot buy partial rolls.</p>
<div class="formula-box">
$$ N_{\text{rolls}} = \lceil \frac{A_{\text{total}}}{A_{\text{roll}}} \rceil $$
</div>

<h4>B. Underlayment Boards</h4>
<p>Similar to rolls, the total area is divided by the area of a single board ($A_{\text{board}} = L_{\text{board}} \times W_{\text{board}}$).</p>
<div class="formula-box">
$$ N_{\text{boards}} = \lceil \frac{A_{\text{total}}}{L_{\text{board}} \times W_{\text{board}}} \rceil $$
</div>

<h4>C. Self-Leveling Compound</h4>
<p>This calculation finds the total volume needed. We first find the "volume per bag" based on the manufacturer's data (e.g., $50 \text{ sq. ft.} \times 0.125 \text{ in depth}$) and divide your project's required volume by that amount.</p>
<div class="formula-box">
$$ V_{\text{required}} = A_{\text{total}} \times D_{\text{desired}} $$
$$ V_{\text{bag}} = A_{\text{TDS}} \times D_{\text{TDS}} $$
$$ N_{\text{bags}} = \lceil \frac{V_{\text{required}}}{V_{\text{bag}}} \rceil $$
</div>

<h2>Glossary of Variables</h2>
<dl class="space-y-4">
<dt class="font-semibold">Underlayment Type</dt>
<dd>The material being installed: Rolls, Self-Leveling Compound, or Boards.</dd>
<dt class="font-semibold">Project Area ($A_{\text{base}}$)</dt>
<dd>The total square footage (or meters) of the floor to be covered, *before* adding waste.</dd>
<dt class="font-semibold">Waste Factor ($W_{\%}$)</dt>
<dd>An added percentage (e.g., 10%) to account for cuts, mistakes, and material loss. Non-negotiable for an accurate estimate.</dd>
<dt class="font-semibold">Total Area ($A_{\text{total}}$)</dt>
<dd>The base area plus the waste area. This is the number used to calculate materials.</dd>
<dt class="font-semibold">Roll/Board Coverage ($A_{\text{roll}}, A_{\text{board}}$)</dt>
<dd>The area that a single roll or board will cover.</dd>
<dt class="font-semibold">TDS Coverage ($A_{\text{TDS}}, D_{\text{TDS}}$)</dt>
<dd>For self-leveler, the coverage area and depth specified by the manufacturer (e.g., 50 sq. ft. at 1/8 inch).</dd>
<dt class="font-semibold">Desired Depth ($D_{\text{desired}}$)</dt>
<dd>The thickness you intend to pour the self-leveling compound.</dd>
</dl>

<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's calculate the material for a <strong>12 ft x 15 ft</strong> room using <strong>self-leveling compound</strong>. We want a <strong>1/4"</strong> pour. The product's bag states it covers <strong>50 sq. ft. at 1/8"</strong>. We'll use a <strong>10% waste factor</strong>.</p>
<ol>
<li><strong>Select Units &amp; Type:</strong> Imperial, Self-Leveling Compound.</li>
<li><strong>Calculate Base Area:</strong><br>
$A_{\text{base}} = 12 \text{ ft} \times 15 \text{ ft} = 180 \text{ sq. ft.}$</li>
<li><strong>Calculate Total Area (with Waste):</strong><br>
$A_{\text{total}} = 180 \times (1 + \frac{10}{100}) = 180 \times 1.10 = 198 \text{ sq. ft.}$</li>
<li><strong>Calculate Required "Volume":</strong><br>
$V_{\text{required}} = 198 \text{ sq. ft.} \times 0.25 \text{ in} = 49.5 \text{ (sq. ft. * in)}$</li>
<li><strong>Calculate Bag "Volume":</strong><br>
$V_{\text{bag}} = 50 \text{ sq. ft.} \times 0.125 \text{ in} = 6.25 \text{ (sq. ft. * in)}$</li>
<li><strong>Calculate Bags Needed:</strong><br>
$N_{\text{bags}} = \lceil \frac{49.5}{6.25} \rceil = \lceil 7.92 \rceil = 8$</li>
</ol>
<p>You will need to purchase **8 bags** of self-leveling compound.</p>

<h2>Frequently Asked Questions</h2>
<details>
<summary>How much waste factor should I add?</summary>
<p>A <strong>10-15%</strong> waste factor is standard for most rooms. For complex layouts with many cuts (e.g., L-shaped rooms, hallways) or for diagonal installations, a <strong>15-20%</strong> factor is safer.</p>
</details>
<details>
<summary>What's the difference between underlayment and subfloor?</summary>
<p>The <strong>subfloor</strong> is the structural base of the floor (e.g., plywood, OSB, or concrete slab). The <strong>underlayment</strong> is a thin layer of material (foam, cork, cement board, self-leveler) that sits *on top* of the subfloor to provide a smooth, level, and appropriate surface for the final flooring (e.g., tile, vinyl, hardwood).</p>
</details>
<details>
<summary>Do I always need an underlayment?</summary>
<p>Almost always, yes. It provides sound absorption, a moisture barrier (in some cases), and a smooth surface, which is often required by the flooring manufacturer's warranty. The *type* of underlayment, however, depends entirely on your subfloor and your new flooring material.</p>
</details>
<details>
<summary>How do I calculate for multiple rooms?</summary>
<p>Calculate the area (Length x Width) for each room individually. Add all these areas together to get one `Total Area` number. Enter *this* number into the "Total Area" field, and *then* add your waste factor. Do not add waste to each room individually.</p>
</details>
<details>
<summary>Why is my self-leveler calculation so high?</summary>
<p>Check your depths. The relationship is exponential. Pouring at 1/4" requires *double* the material as pouring at 1/8". A 1/2" pour requires *four times* the material. Ensure your "Desired Depth" and "TDS Depth" are correct.</p>
</details>
<details>
<summary>Can I install new underlayment over an old one?</summary>
<p>This is generally not recommended. It can create an unstable surface, void your new flooring's warranty, and may be too thick. Always remove old, soft underlayment (like foam or felt). Check with the manufacturer before installing over any existing hard surface.</p>
</details>

<div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
Last accuracy review: <time datetime="2025-10-15">October 15, 2025</time></p>
</div>

<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[A_{\text{total}} = A_{\text{base}} \times (1 + \frac{W_{\%}}{100})\]</div>
  <pre class="auditspine-mono">A_{\text{total}} = A_{\text{base}} \times (1 + \frac{W_{\%}}{100})</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[N_{\text{rolls}} = \lceil \frac{A_{\text{total}}}{A_{\text{roll}}} \rceil\]</div>
  <pre class="auditspine-mono">N_{\text{rolls}} = \lceil \frac{A_{\text{total}}}{A_{\text{roll}}} \rceil</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[N_{\text{boards}} = \lceil \frac{A_{\text{total}}}{L_{\text{board}} \times W_{\text{board}}} \rceil\]</div>
  <pre class="auditspine-mono">N_{\text{boards}} = \lceil \frac{A_{\text{total}}}{L_{\text{board}} \times W_{\text{board}}} \rceil</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[V_{\text{required}} = A_{\text{total}} \times D_{\text{desired}}\]</div>
  <pre class="auditspine-mono">V_{\text{required}} = A_{\text{total}} \times D_{\text{desired}}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[V_{\text{bag}} = A_{\text{TDS}} \times D_{\text{TDS}}\]</div>
  <pre class="auditspine-mono">V_{\text{bag}} = A_{\text{TDS}} \times D_{\text{TDS}}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[N_{\text{bags}} = \lceil \frac{V_{\text{required}}}{V_{\text{bag}}} \rceil\]</div>
  <pre class="auditspine-mono">N_{\text{bags}} = \lceil \frac{V_{\text{required}}}{V_{\text{bag}}} \rceil</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$ A_{\text{total}} = A_{\text{base}} \times (1 + \frac{W_{\%}}{100}) $</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$ N_{\text{rolls}} = \lceil \frac{A_{\text{total}}}{A_{\text{roll}}} \rceil $</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$ N_{\text{boards}} = \lceil \frac{A_{\text{total}}}{L_{\text{board}} \times W_{\text{board}}} \rceil $</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$ V_{\text{required}} = A_{\text{total}} \times D_{\text{desired}} $ $ V_{\text{bag}} = A_{\text{TDS}} \times D_{\text{TDS}} $ $ N_{\text{bags}} = \lceil \frac{V_{\text{required}}}{V_{\text{bag}}} \rceil $</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Construction</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/construction-diy" target="_blank" rel="nofollow noopener">https://calcdomain.com/construction-diy</a></li>
<li><strong>Materials Estimation</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/construction-diy-materials-estimation" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/construction-diy-materials-estimation</a></li>
<li><strong>Concrete Slab Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/concrete-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/concrete-calculator</a></li>
<li><strong>Tile Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/tile-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/tile-calculator</a></li>
<li><strong>Paint Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/paint-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/paint-calculator</a></li>
<li><strong>Flooring Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/flooring-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/flooring-calculator</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
</section>

<aside class="w-full lg:w-1/3 no-print">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Get estimates for rolls, boards, and self-leveler in one place.</li>
<li>Switch between Imperial and Metric units instantly.</li>
<li>Avoid costly mistakes by including a waste factor.</li>
<li>Understand the *why* with clear formulas and examples.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Construction Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="https://calcdomain.com/concrete-calculator" class="text-blue-600 hover:underline">Concrete Slab Calculator</a></li>
<li><a href="https://calcdomain.com/tile-calculator" class="text-blue-600 hover:underline">Tile Calculator</a></li>
<li><a href="https://calcdomain.com/paint-calculator" class="text-blue-600 hover:underline">Paint Calculator</a></li>
<li><a href="https://calcdomain.com/flooring-calculator" class="text-blue-600 hover:underline">Flooring Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                                                                                <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>




























<script>
document.addEventListener('DOMContentLoaded', () => {
// --- DOM Element Cache ---
const elements = {
form: document.getElementById('calculator-ui'),
unitImperial: document.getElementById('unitImperial'),
unitMetric: document.getElementById('unitMetric'),
underlaymentType: document.getElementById('underlaymentType'),
roomLength: document.getElementById('roomLength'),
roomWidth: document.getElementById('roomWidth'),
totalArea: document.getElementById('totalArea'),
wasteFactor: document.getElementById('wasteFactor'),
// Dynamic Groups
rollsGroup: document.getElementById('rolls-group'),
levelerGroup: document.getElementById('leveler-group'),
boardsGroup: document.getElementById('boards-group'),
// Material Inputs
rollCoverage: document.getElementById('rollCoverage'),
levelerCoverageArea: document.getElementById('levelerCoverageArea'),
levelerCoverageDepth: document.getElementById('levelerCoverageDepth'),
desiredDepth: document.getElementById('desiredDepth'),
boardLength: document.getElementById('boardLength'),
boardWidth: document.getElementById('boardWidth'),
// Results
resultsSection: document.getElementById('results'),
totalAreaResult: document.getElementById('total-area-result'),
resultLabel: document.getElementById('result-label'),
resultValue: document.getElementById('result-value'),
// Error Summary
errorSummary: document.getElementById('error-summary'),
errorList: document.getElementById('error-list'),
// Unit Labels
unitLengthLabels: document.querySelectorAll('.unit-length'),
unitAreaLabels: document.querySelectorAll('.unit-area'),
unitDepthLabels: document.querySelectorAll('.unit-depth'),
// Tooltip
wasteTooltipBtn: document.getElementById('waste-tooltip-btn'),
wasteTooltip: document.getElementById('waste-tooltip'),
// Reset Button
resetBtn: document.getElementById('resetBtn'),
// Breakdown
bdBaseArea: document.getElementById('breakdown-base-area'),
bdWasteFactor: document.getElementById('breakdown-waste-factor'),
bdWasteArea: document.getElementById('breakdown-waste-area'),
bdTotalArea: document.getElementById('breakdown-total-area'),
bdMaterialLine: document.getElementById('breakdown-material-line'),
bdMaterialCoverage: document.getElementById('breakdown-material-coverage'),
bdFormula: document.getElementById('breakdown-formula'),
};

// --- Constants ---
const CONVERSIONS = {
FT_TO_M: 0.3048,
M_TO_FT: 3.28084,
SQFT_TO_SQM: 0.092903,
SQM_TO_SQFT: 10.7639,
IN_TO_MM: 25.4,
MM_TO_IN: 0.0393701,
};

// --- Event Listeners ---
elements.form.addEventListener('submit', handleCalculate);
elements.resetBtn.addEventListener('click', handleReset);
elements.underlaymentType.addEventListener('change', updateMaterialInputs);
elements.unitImperial.addEventListener('change', updateUnitLabels);
elements.unitMetric.addEventListener('change', updateUnitLabels);
elements.wasteTooltipBtn.addEventListener('click', toggleWasteTooltip);

// Disable default HTML5 validation
elements.form.setAttribute('novalidate', 'true');

// --- Functions ---

function updateUnitLabels() {
const isMetric = elements.unitMetric.checked;
const lengthUnit = isMetric ? 'm' : 'ft';
const areaUnit = isMetric ? 'sq. m.' : 'sq. ft.';
const depthUnit = isMetric ? 'mm' : 'in';

elements.unitLengthLabels.forEach(label => label.textContent = lengthUnit);
elements.unitAreaLabels.forEach(label => label.textContent = areaUnit);
elements.unitDepthLabels.forEach(label => label.textContent = depthUnit);

// Clear results when units change
elements.resultsSection.style.display = 'none';
}

function updateMaterialInputs() {
const type = elements.underlaymentType.value;
elements.rollsGroup.style.display = (type === 'rolls') ? 'block' : 'none';
elements.levelerGroup.style.display = (type === 'leveler') ? 'block' : 'none';
elements.boardsGroup.style.display = (type === 'boards') ? 'block' : 'none';

// Update aria-required attributes
elements.rollCoverage.setAttribute('aria-required', type === 'rolls');
elements.levelerCoverageArea.setAttribute('aria-required', type === 'leveler');
elements.levelerCoverageDepth.setAttribute('aria-required', type === 'leveler');
elements.desiredDepth.setAttribute('aria-required', type === 'leveler');
elements.boardLength.setAttribute('aria-required', type === 'boards');
elements.boardWidth.setAttribute('aria-required', type === 'boards');
}

function toggleWasteTooltip() {
const isExpanded = elements.wasteTooltipBtn.getAttribute('aria-expanded') === 'true';
elements.wasteTooltipBtn.setAttribute('aria-expanded', !isExpanded);
elements.wasteTooltip.style.display = isExpanded ? 'none' : 'block';
}

function handleReset() {
elements.form.reset();
updateUnitLabels();
updateMaterialInputs();
resetAllErrors();
elements.resultsSection.style.display = 'none';
elements.errorSummary.style.display = 'none';
}

function handleCalculate(e) {
e.preventDefault();
resetAllErrors();
let errors = [];

const isMetric = elements.unitMetric.checked;
const type = elements.underlaymentType.value;
const waste = validateAndGetNumber(elements.wasteFactor, 'Waste Factor', errors, { min: 0, max: 100 });

// 1. Get Base Area (normalized to sq. ft. for calculation)
let baseAreaSqFt = 0;
const length = parseFloat(elements.roomLength.value);
const width = parseFloat(elements.roomWidth.value);
const total = parseFloat(elements.totalArea.value);

if (total > 0) {
baseAreaSqFt = isMetric ? total * CONVERSIONS.SQM_TO_SQFT : total;
} else if (length > 0 && width > 0) {
const baseLengthFt = isMetric ? length * CONVERSIONS.M_TO_FT : length;
const baseWidthFt = isMetric ? width * CONVERSIONS.M_TO_FT : width;
baseAreaSqFt = baseLengthFt * baseWidthFt;
} else {
// Error if no valid area input
errors.push({ id: 'totalArea', message: 'Please enter a valid length/width or a total area.' });
showError(elements.totalArea, 'Please enter a valid length/width or a total area.');
}

// 2. Validate Material Inputs
let resultValue = 0;
let resultLabel = '';
let materialCoverageText = '';
let formulaText = '';

switch (type) {
case 'rolls':
const rollCoverageVal = validateAndGetNumber(elements.rollCoverage, 'Coverage per Roll', errors, { min: 0.1 });
if (rollCoverageVal > 0) {
const rollCoverageSqFt = isMetric ? rollCoverageVal * CONVERSIONS.SQM_TO_SQFT : rollCoverageVal;
resultValue = Math.ceil((baseAreaSqFt * (1 + waste / 100)) / rollCoverageSqFt);
resultLabel = 'Rolls Needed';
materialCoverageText = `${rollCoverageVal.toLocaleString()} ${isMetric ? 'sq. m.' : 'sq. ft.'}`;
formulaText = `Ceiling(Total Area / Coverage per Roll)`;
}
break;
case 'leveler':
const tdsArea = validateAndGetNumber(elements.levelerCoverageArea, 'Bag Coverage Area', errors, { min: 0.1 });
const tdsDepth = validateAndGetNumber(elements.levelerCoverageDepth, '...at Depth', errors, { min: 0.01 });
const desiredDepth = validateAndGetNumber(elements.desiredDepth, 'Desired Pour Depth', errors, { min: 0.01 });

if (tdsArea > 0 && tdsDepth > 0 && desiredDepth > 0) {
// Normalize all to inches and sq. ft.
const tdsAreaSqFt = isMetric ? tdsArea * CONVERSIONS.SQM_TO_SQFT : tdsArea;
const tdsDepthIn = isMetric ? tdsDepth * CONVERSIONS.MM_TO_IN : tdsDepth;
const desiredDepthIn = isMetric ? desiredDepth * CONVERSIONS.MM_TO_IN : desiredDepth;

const requiredVolume = (baseAreaSqFt * (1 + waste / 100)) * desiredDepthIn;
const bagVolume = tdsAreaSqFt * tdsDepthIn;

resultValue = Math.ceil(requiredVolume / bagVolume);
resultLabel = 'Bags Needed';
materialCoverageText = `${tdsArea.toLocaleString()} ${isMetric ? 'sq. m.' : 'sq. ft.'} at ${tdsDepth.toLocaleString()} ${isMetric ? 'mm' : 'in'}`;
formulaText = `Ceiling((Total Area * Desired Depth) / (TDS Area * TDS Depth))`;
}
break;
case 'boards':
const boardLengthVal = validateAndGetNumber(elements.boardLength, 'Board Length', errors, { min: 0.1 });
const boardWidthVal = validateAndGetNumber(elements.boardWidth, 'Board Width', errors, { min: 0.1 });

if (boardLengthVal > 0 && boardWidthVal > 0) {
const boardLengthFt = isMetric ? boardLengthVal * CONVERSIONS.M_TO_FT : boardLengthVal;
const boardWidthFt = isMetric ? boardWidthVal * CONVERSIONS.M_TO_FT : boardWidthVal;
const boardAreaSqFt = boardLengthFt * boardWidthFt;

resultValue = Math.ceil((baseAreaSqFt * (1 + waste / 100)) / boardAreaSqFt);
resultLabel = 'Boards Needed';
materialCoverageText = `${(boardLengthVal * boardWidthVal).toLocaleString()} ${isMetric ? 'sq. m.' : 'sq. ft.'} per board`;
formulaText = `Ceiling(Total Area / (Board Length * Board Width))`;
}
break;
}

// 3. Display Errors or Results
if (errors.length > 0) {
elements.resultsSection.style.display = 'none';
elements.errorSummary.style.display = 'block';
elements.errorList.innerHTML = '';
errors.forEach(err => {
const li = document.createElement('li');
li.textContent = err.message;
elements.errorList.appendChild(li);
});
document.getElementById(errors[0].id).focus();
} else {
const totalAreaWithWaste = baseAreaSqFt * (1 + waste / 100);
const wasteArea = baseAreaSqFt * (waste / 100);
const displayArea = isMetric ? totalAreaWithWaste * CONVERSIONS.SQFT_TO_SQM : totalAreaWithWaste;
const displayBaseArea = isMetric ? baseAreaSqFt * CONVERSIONS.SQFT_TO_SQM : baseAreaSqFt;
const displayWasteArea = isMetric ? wasteArea * CONVERSIONS.SQFT_TO_SQM : wasteArea;
const areaUnit = isMetric ? 'sq. m.' : 'sq. ft.';

elements.resultsSection.style.display = 'block';
elements.totalAreaResult.innerHTML = `${displayArea.toLocaleString(undefined, { maximumFractionDigits: 2 })} <span class="unit-area">${areaUnit}</span>`;
elements.resultLabel.textContent = resultLabel;
elements.resultValue.textContent = resultValue.toLocaleString();

// Populate breakdown
elements.bdBaseArea.textContent = `${displayBaseArea.toLocaleString(undefined, { maximumFractionDigits: 2 })} ${areaUnit}`;
elements.bdWasteFactor.textContent = `${waste.toLocaleString()}%`;
elements.bdWasteArea.textContent = `${displayWasteArea.toLocaleString(undefined, { maximumFractionDigits: 2 })} ${areaUnit}`;
elements.bdTotalArea.textContent = `${displayArea.toLocaleString(undefined, { maximumFractionDigits: 2 })} ${areaUnit}`;
elements.bdMaterialCoverage.textContent = materialCoverageText;
elements.bdFormula.textContent = formulaText;
elements.bdMaterialLine.style.display = materialCoverageText ? 'list-item' : 'none';

elements.resultsSection.focus();
}
}

function validateAndGetNumber(inputEl, label, errors, rules = {}) {
const errorEl = document.getElementById(`${inputEl.id}-error`);
const value = parseFloat(inputEl.value);

if (isNaN(value) || (rules.min !== undefined && value < rules.min) || (rules.max !== undefined && value > rules.max)) {
let message = `${label} must be a valid number.`;
if (rules.min !== undefined && value < rules.min) {
message = `${label} must be ${rules.min} or greater.`;
}
if (rules.max !== undefined && value > rules.max) {
message = `${label} must be ${rules.max} or less.`;
}
if (isNaN(value) && inputEl.getAttribute('aria-required') === 'true') {
message = `${label} is required.`;
}

errors.push({ id: inputEl.id, message: message });
showError(inputEl, message);
return NaN;
}

hideError(inputEl);
return value;
}

function showError(inputEl, message) {
const errorEl = document.getElementById(`${inputEl.id}-error`);
if (errorEl) {
errorEl.textContent = message;
errorEl.style.display = 'block';
}
inputEl.classList.add('invalid');
inputEl.setAttribute('aria-invalid', 'true');
inputEl.setAttribute('aria-describedby', `${inputEl.id}-error`);
}

function hideError(inputEl) {
const errorEl = document.getElementById(`${inputEl.id}-error`);
if (errorEl) {
errorEl.textContent = '';
errorEl.style.display = 'none';
}
inputEl.classList.remove('invalid');
inputEl.removeAttribute('aria-invalid');

// Remove error from aria-describedby, but keep tooltip if present
const currentDesc = inputEl.getAttribute('aria-describedby') || '';
const newDesc = currentDesc.replace(`${inputEl.id}-error`, '').trim();
if (newDesc) {
inputEl.setAttribute('aria-describedby', newDesc);
} else {
inputEl.removeAttribute('aria-describedby');
}
}

function resetAllErrors() {
const inputs = elements.form.querySelectorAll('input[type="number"]');
inputs.forEach(input => hideError(input));
hideError(elements.totalArea); // Handle the "combo" error field
elements.errorSummary.style.display = 'none';
elements.errorList.innerHTML = '';
}

// --- Initial Setup ---
updateUnitLabels();
updateMaterialInputs();
});
</script>

</body></html>
<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/gpa-calculator">





<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png">
<link rel="manifest" href="https://calcdomain.com/site.webmanifest">

<meta charset="UTF-8">
<meta name="viewport" content="width-width, initial-scale=1.0">

<title>GPA Calculator - Calculate Your Semester &amp; Cumulative GPA</title>
<meta name="description" content="Calculate your semester and cumulative GPA with our easy-to-use tool. Add courses, grades, and credits. Supports all standard US 4.0 and 4.3 grading scales.">


<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0KOxRfFGorYiuprGTYJqC7GfFJPn5rKTJNQlb7msogayagUVmLHYB" crossorigin="anonymous">
<script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGjKGTBUVYAU7idHrDdVSPKAiwV3dLj8cTypZWAYsE2XXjVEMeNIzB5LqE" crossorigin="anonymous"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURPiLdVj5dcnLKMzLCCWTuLYMYGKsINTKPoANjUWJqTvbNSSLChBFs" crossorigin="anonymous" onload="renderMathInElement(document.body, {
        delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false}
        ]
    });"></script>

<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.5rem;
overflow-x:auto; text-align: center; font-size: 1.125rem;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 1rem; font-weight: 500; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 2.25rem; font-weight: 700; color: #2563eb; }
/* Custom Focus State for WCAG */
*:focus-visible {
outline: 3px solid #3b82f6 !important;
outline-offset: 2px;
box-shadow: none !important;
}
/* Ensure form elements use standard ring on focus */
.form-input:focus-visible, .form-select:focus-visible {
outline: none !important;
}
/* Print styles */
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
.no-print { display: none !important; }
}
</style>

<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "GPA Calculator",
  "description": "Calculate your semester and cumulative GPA with our easy-to-use tool. Add courses, grades, and credits. Supports all standard US 4.0 and 4.3 grading scales.",
  "url": "https://calcdomain.com/gpa-calculator",
  "inLanguage": "en",
  "reviewedBy": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "dateModified": "2026-01-19"
}</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Lifestyle & Everyday",
      "item": "https://calcdomain.com/categories/lifestyle-everyday"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Miscellaneous",
      "item": "https://calcdomain.com/subcategories/miscellaneous"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Calculate Your GPA",
  "description": "A step-by-step guide to calculating your semester and cumulative Grade Point Average (GPA).",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Select Grading Scale",
      "text": "Choose the grading scale your school uses (e.g., Standard 4.0, 4.0 with +/-, 4.3 with A+)."
    },
    {
      "@type": "HowToStep",
      "name": "Enter Current Courses",
      "text": "For each course this semester, enter the number of credits (or hours) and the letter grade you received. Add new rows as needed."
    },
    {
      "@type": "HowToStep",
      "name": "Add Previous GPA (Optional)",
      "text": "To calculate your new cumulative GPA, expand the optional section and enter your total cumulative GPA and total credits from all previous semesters."
    },
    {
      "@type": "HowToStep",
      "name": "Review Results",
      "text": "The calculator automatically updates, showing your new Semester GPA and your new Cumulative GPA in real-time."
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is the difference between weighted and unweighted GPA?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This calculator determines your GPA weighted by *credit hours*, which is the standard for US colleges. This is different from the 'weighted vs. unweighted' GPA in high school, which refers to giving extra points for AP or Honors classes. College GPAs are almost always weighted by the number of credits for each course."
      }
    },
    {
      "@type": "Question",
      "name": "How do I calculate my cumulative GPA?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "To calculate your cumulative GPA, you need your total quality points and total credits from all previous semesters. You can use the 'Cumulative GPA (Optional)' section by entering your current cumulative GPA and the total number of credits you've earned so far. The calculator will combine these with your new semester's results."
      }
    },
    {
      "@type": "Question",
      "name": "What if my school uses a 4.3 scale or doesn't use +/- grades?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Use the 'Grading Scale' dropdown at the top of the calculator. We provide common scales, including a 4.33 scale (where A+ = 4.33) and a 4.0 scale with no plus or minus grades (where A=4, B=3, etc.)."
      }
    },
    {
      "@type": "Question",
      "name": "Do Pass/Fail courses affect my GPA?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No. Pass/Fail (P/F) or Satisfactory/Unsatisfactory (S/U) courses are typically not included in GPA calculations. They contribute to your total earned credits but do not have grade points. You can select 'P' or 'F' in the grade dropdown, and our calculator will correctly exclude them from the GPA calculation."
      }
    },
    {
      "@type": "Question",
      "name": "What is a 'good' GPA?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A 'good' GPA is subjective and depends on your field of study, your school's standards, and your personal goals. Generally, a 3.0 is considered the threshold for 'good' in many universities, a 3.5 is considered 'very good' (often for honors like *cum laude*), and a 3.7 or higher is exceptional (for *magna* or *summa cum laude*)."
      }
    }
  ]
}
</script>

<script src="https://calcdomain.com/search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">


<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[', right: '\]</div>
  <pre class="auditspine-mono">', right: '</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{Semester GPA} = \frac{\sum (\text{Quality Points}_i)}{\sum (\text{Credits}_i)}\]</div>
  <pre class="auditspine-mono">\text{Semester GPA} = \frac{\sum (\text{Quality Points}_i)}{\sum (\text{Credits}_i)}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[\text{Cumulative GPA} = \frac{(\text{Prev. GPA} \times \text{Prev. Credits}) + \text{Semester Points}}{\text{Prev. Credits} + \text{Semester Credits}}\]</div>
  <pre class="auditspine-mono">\text{Cumulative GPA} = \frac{(\text{Prev. GPA} \times \text{Prev. Credits}) + \text{Semester Points}}{\text{Prev. Credits} + \text{Semester Credits}}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$ \text{Quality Points} = \text{Grade Point} \times \text{Credits} $</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$ \text{Semester GPA} = \frac{\sum (\text{Quality Points}_i)}{\sum (\text{Credits}_i)} $</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">$ \text{Cumulative GPA} = \frac{(\text{Prev. GPA} \times \text{Prev. Credits}) + \text{Semester Points}}{\text{Prev. Credits} + \text{Semester Credits}} $</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Lifestyle Everyday</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/lifestyle-everyday" target="_blank" rel="nofollow noopener">https://calcdomain.com/lifestyle-everyday</a></li>
<li><strong>Miscellaneous</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/miscellaneous" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/miscellaneous</a></li>
<li><strong>Final Grade Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/final-grade" target="_blank" rel="nofollow noopener">https://calcdomain.com/final-grade</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</article>
</section>

<aside class="w-full lg:w-1/3 no-print">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Get instant, real-time GPA results as you type.</li>
<li>Calculate both semester and cumulative GPA in one place.</li>
<li>Supports multiple college grading scales (4.0, 4.3, etc.).</li>
<li>Fully accessible (WCAG 2.1 AA) and mobile-first design.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Academic Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="https://calcdomain.com/final-grade" class="text-blue-600 hover:underline">Final Grade Calculator</a></li>
<li>College Cost Calculator</li>
<li>GPA to Percentage Calculator</li>
<li>Study Time Calculator</li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>



















<script>
document.addEventListener('DOMContentLoaded', () => {
// ---
// 1. CONSTANTS & STATE
// ---
const GRADE_SCALES = {
'4.0-plus': {
'A+': 4.0, 'A': 4.0, 'A-': 3.67,
'B+': 3.33, 'B': 3.0, 'B-': 2.67,
'C+': 2.33, 'C': 2.0, 'C-': 1.67,
'D+': 1.33, 'D': 1.0, 'D-': 0.67,
'F': 0.0
},
'4.3-plus': {
'A+': 4.33, 'A': 4.0, 'A-': 3.67,
'B+': 3.33, 'B': 3.0, 'B-': 2.67,
'C+': 2.33, 'C': 2.0, 'C-': 1.67,
'D+': 1.33, 'D': 1.0, 'D-': 0.67,
'F': 0.0
},
'4.0-no-plus': {
'A': 4.0, 'B': 3.0, 'C': 2.0, 'D': 1.0, 'F': 0.0
}
};

const GRADE_OPTIONS_HTML = `
<option value="">- Grade -</option>
<option value="A+">A+</option>
<option value="A">A</option>
<option value="A-">A-</option>
<option value="B+">B+</option>
<option value="B">B</option>
<option value="B-">B-</option>
<option value="C+">C+</option>
<option value="C">C</option>
<option value="C-">C-</option>
<option value="D+">D+</option>
<option value="D">D</option>
<option value="D-">D-</option>
<option value="F">F</option>
<option value="P">P (Pass)</option>
<option value="F-Fail">F (Fail)</option>
`;

let courseIdCounter = 0;

// ---
// 2. DOM ELEMENT REFERENCES
// ---
const elements = {
courseList: document.getElementById('course-list'),
addCourseBtn: document.getElementById('add-course-btn'),
resetBtn: document.getElementById('reset-btn'),
gradeScaleSelect: document.getElementById('gradeScale'),
prevGpaInput: document.getElementById('prevGPA'),
prevCreditsInput: document.getElementById('prevCredits'),
semesterGpaResult: document.getElementById('semester-gpa-result'),
cumulativeGpaResult: document.getElementById('cumulative-gpa-result'),
errorContainer: document.getElementById('error-container'),
calculatorUI: document.getElementById('calculator-ui')
};

// ---
// 3. CORE FUNCTIONS
// ---

/**
* Adds a new, empty course row to the list.
*/
function addCourseRow() {
courseIdCounter++;
const row = document.createElement('div');
row.className = 'grid grid-cols-12 gap-x-4 gap-y-2 p-4 border rounded-lg bg-white course-row';
row.setAttribute('role', 'group');
row.setAttribute('aria-labelledby', `course-label-${courseIdCounter}`);

row.innerHTML = `
<div class="col-span-12 md:col-span-5">
<label for="course-name-${courseIdCounter}" class="block text-sm font-medium text-gray-700 md:hidden">Course Name</label>
<span id="course-label-${courseIdCounter}" class="sr-only">Course ${courseIdCounter}</span>
<input type="text" id="course-name-${courseIdCounter}" placeholder="e.g., Intro to Psych"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-input">
</div>

<div class="col-span-6 md:col-span-3">
<label for="course-credits-${courseIdCounter}" class="block text-sm font-medium text-gray-700 md:hidden">Credits*</label>
<input type="number" id="course-credits-${courseIdCounter}" step="0.1" min="0" placeholder="e.g., 3"
aria-required="true" aria-describedby="credits-desc-${courseIdCounter}"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-input">
<span id="credits-desc-${courseIdCounter}" class="sr-only">Enter credits, e.g., 3 or 4.5</span>
</div>

<div class="col-span-6 md:col-span-2">
<label for="course-grade-${courseIdCounter}" class="block text-sm font-medium text-gray-700 md:hidden">Grade*</label>
<select id="course-grade-${courseIdCounter}" aria-required="true"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-select">
${GRADE_OPTIONS_HTML}
</select>
</div>

<div class="col-span-12 md:col-span-2 flex items-end">
<button type="button" class="remove-btn w-full md:w-auto px-3 py-2 bg-red-50 text-red-600 font-semibold rounded-md hover:bg-red-100 no-print"
aria-label="Remove course ${courseIdCounter}">
<svg class="w-5 h-5 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
<span class="hidden md:inline ml-1">Remove</span>
</button>
</div>
`;
elements.courseList.appendChild(row);

// Add event listener to the new row's inputs for real-time calculation
row.querySelectorAll('input, select').forEach(input => {
input.addEventListener('input', calculateGPA);
});

// Update ARIA label for remove button when course name is typed
const nameInput = row.querySelector(`#course-name-${courseIdCounter}`);
const removeBtn = row.querySelector('.remove-btn');
nameInput.addEventListener('input', () => {
const name = nameInput.value.trim() || `course ${courseIdCounter}`;
removeBtn.setAttribute('aria-label', `Remove ${name}`);
});
}

/**
* Handles removing a course row.
* @param {Event} event - The click event from the remove button.
*/
function removeCourseRow(event) {
const btn = event.target.closest('.remove-btn');
if (btn) {
btn.closest('.course-row').remove();
calculateGPA(); // Recalculate after removing
elements.addCourseBtn.focus(); // Move focus to a logical place
}
}

/**
* Resets the entire calculator to its default state.
*/
function resetCalculator() {
elements.courseList.innerHTML = '';
elements.prevGpaInput.value = '';
elements.prevCreditsInput.value = '';
elements.gradeScaleSelect.value = '4.0-plus';
elements.errorContainer.textContent = '';
elements.semesterGpaResult.textContent = '0.00';
elements.cumulativeGpaResult.textContent = '0.00';
addCourseRow();
addCourseRow();
addCourseRow();
}

/**
* The main calculation logic. Reads all inputs and updates the results.
*/
function calculateGPA() {
elements.errorContainer.textContent = ''; // Clear old errors
const currentScale = GRADE_SCALES[elements.gradeScaleSelect.value];
let totalPoints = 0;
let totalCredits = 0;
let hasError = false;

const courseRows = elements.courseList.querySelectorAll('.course-row');

courseRows.forEach((row, index) => {
const creditsInput = row.querySelector('input[type="number"]');
const gradeSelect = row.querySelector('select');
const credits = parseFloat(creditsInput.value);
const grade = gradeSelect.value;

// Reset error styling
creditsInput.classList.remove('border-red-500', 'ring-red-500');
gradeSelect.classList.remove('border-red-500', 'ring-red-500');

// Skip empty rows or Pass/Fail grades
if (!grade || grade === 'P' || grade === 'F-Fail' || isNaN(credits) || credits <= 0) {
// If one is filled but not the other, it's an error
if ((isNaN(credits) || credits <= 0) && grade) {
creditsInput.classList.add('border-red-500', 'ring-red-500');
hasError = true;
} else if ((!isNaN(credits) && credits > 0) && !grade) {
gradeSelect.classList.add('border-red-500', 'ring-red-500');
hasError = true;
}
return; // Skip this row in calculation
}

const gradePoint = currentScale[grade];

if (gradePoint === undefined) {
// This can happen if the scale changes and the selected grade (e.g., A+) doesn't exist.
gradeSelect.classList.add('border-red-500', 'ring-red-500');
hasError = true;
return;
}

totalPoints += gradePoint * credits;
totalCredits += credits;
});

if (hasError) {
elements.errorContainer.textContent = 'Please fill in both Credits and Grade for all active rows, or select a valid grade for the chosen scale.';
}

// Calculate Semester GPA
let semesterGPA = 0;
if (totalCredits > 0) {
semesterGPA = totalPoints / totalCredits;
}
elements.semesterGpaResult.textContent = semesterGPA.toFixed(2);

// Calculate Cumulative GPA
const prevGPA = parseFloat(elements.prevGpaInput.value);
const prevCredits = parseFloat(elements.prevCreditsInput.value);

let cumulativeGPA = semesterGPA;

if (!isNaN(prevGPA) && !isNaN(prevCredits) && prevCredits > 0) {
const prevPoints = prevGPA * prevCredits;
const newTotalPoints = totalPoints + prevPoints;
const newTotalCredits = totalCredits + prevCredits;

if (newTotalCredits > 0) {
cumulativeGPA = newTotalPoints / newTotalCredits;
} else {
cumulativeGPA = 0; // Avoid division by zero if all credits are 0
}
}

elements.cumulativeGpaResult.textContent = cumulativeGPA.toFixed(2);
}

// ---
// 4. EVENT LISTENERS
// ---
elements.addCourseBtn.addEventListener('click', addCourseRow);
elements.resetBtn.addEventListener('click', resetCalculator);
elements.courseList.addEventListener('click', removeCourseRow);

// Recalculate on any global or cumulative input change
elements.gradeScaleSelect.addEventListener('change', calculateGPA);
elements.prevGpaInput.addEventListener('input', calculateGPA);
elements.prevCreditsInput.addEventListener('input', calculateGPA);

// Mobile menu toggle logic from template
const menuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
if (menuToggle) {
menuToggle.addEventListener('click', () => {
const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
menuToggle.setAttribute('aria-expanded', !isExpanded);
mobileMenu.classList.toggle('hidden');
});
}

// ---
// 5. INITIALIZATION
// ---
addCourseRow(); // Start with one row
addCourseRow();
addCourseRow();
calculateGPA(); // Run once on load to set 0.00
});
</script>

</body></html>
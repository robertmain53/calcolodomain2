<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/loan-amortization-calculator" />
    <title>Loan Amortization Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Loan Amortization Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Loan Amortization Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Loan Amortization Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/loan-amortization-calculator" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Loan Amortization Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Loan Amortization Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "FinancialProduct",
        "name": "Loan Amortization Calculator",
        "description": "Advanced loan amortization calculator with extra payments, multiple payment frequencies, interest-only periods, and full amortization schedule export.",
        "url": "https://calcdomain.com/loan-amortization-calculator",
        "category": "https://schema.org/FinancialService",
        "applicationCategory": "FinanceCalculator",
        "provider": {
          "@type": "Organization",
          "name": "CalcDomain",
          "url": "https://calcdomain.com"
        }
      }</script>
    <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "Loans &amp; Debt Calculators", "item": "https://calcdomain.com/subcategories/finance-loans-debt"}, {"@type": "ListItem", "position": 4, "name": "Loan Amortization Calculator", "item": "https://calcdomain.com/loan-amortization-calculator"}]}</script>
    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/finance-loans-debt" class="text-blue-600 hover:underline">Loans &amp;amp; Debt Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Loan Amortization Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Loan Amortization Calculator
              </h1>
              <p class="text-gray-600">
                Build a detailed amortization schedule with extra payments,
                interest-only periods, and multiple payment frequencies. See how
                much interest you save and when you’ll be debt‑free.
              </p>
            </header>

            <section aria-labelledby="calculator-heading" class="mb-8">
              <h2 id="calculator-heading" class="text-xl font-semibold mb-4">
                Loan inputs
              </h2>
              <form id="amortization-form" class="space-y-4">
                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="loan-amount"
                      class="block text-sm font-medium text-gray-700"
                      >Loan amount</label
                    >
                    <div class="mt-1 relative rounded-md shadow-sm">
                      <span
                        class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500"
                        >$</span
                      >
                      <input
                        type="number"
                        id="loan-amount"
                        class="pl-7 block w-full border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                        min="0"
                        step="0.01"
                        value="300000"
                      />
                    </div>
                  </div>
                  <div>
                    <label
                      for="interest-rate"
                      class="block text-sm font-medium text-gray-700"
                      >Annual interest rate</label
                    >
                    <div class="mt-1 relative rounded-md shadow-sm">
                      <input
                        type="number"
                        id="interest-rate"
                        class="pr-10 block w-full border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                        min="0"
                        step="0.01"
                        value="6.5"
                      />
                      <span
                        class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500"
                        >%</span
                      >
                    </div>
                  </div>
                  <div>
                    <label
                      for="loan-term"
                      class="block text-sm font-medium text-gray-700"
                      >Loan term</label
                    >
                    <div class="mt-1 flex rounded-md shadow-sm">
                      <input
                        type="number"
                        id="loan-term"
                        class="flex-1 min-w-0 block w-full border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500"
                        min="1"
                        step="1"
                        value="30"
                      />
                      <select
                        id="loan-term-unit"
                        class="border border-l-0 border-gray-300 bg-gray-50 text-gray-700 text-sm rounded-r-md focus:ring-blue-500 focus:border-blue-500"
                      >
                        <option value="years" selected>Years</option>
                        <option value="months">Months</option>
                      </select>
                    </div>
                  </div>
                  <div>
                    <label
                      for="payment-frequency"
                      class="block text-sm font-medium text-gray-700"
                      >Payment frequency</label
                    >
                    <select
                      id="payment-frequency"
                      class="mt-1 block w-full border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                    >
                      <option value="12" selected>Monthly (12 / year)</option>
                      <option value="26">Bi-weekly (26 / year)</option>
                      <option value="52">Weekly (52 / year)</option>
                      <option value="4">Quarterly (4 / year)</option>
                      <option value="1">Annually (1 / year)</option>
                    </select>
                  </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="interest-only-years"
                      class="block text-sm font-medium text-gray-700"
                      >Interest-only period (years, optional)</label
                    >
                    <input
                      type="number"
                      id="interest-only-years"
                      class="mt-1 block w-full border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                      min="0"
                      step="0.5"
                      value="0"
                    />
                    <p class="mt-1 text-xs text-gray-500">
                      During this period you pay interest only; principal
                      amortization starts afterward.
                    </p>
                  </div>
                  <div>
                    <label
                      for="extra-payment"
                      class="block text-sm font-medium text-gray-700"
                      >Extra principal per payment (optional)</label
                    >
                    <div class="mt-1 relative rounded-md shadow-sm">
                      <span
                        class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500"
                        >$</span
                      >
                      <input
                        type="number"
                        id="extra-payment"
                        class="pl-7 block w-full border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                        min="0"
                        step="1"
                        value="0"
                      />
                    </div>
                    <p class="mt-1 text-xs text-gray-500">
                      Added to each scheduled payment and applied directly to
                      principal.
                    </p>
                  </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="start-date"
                      class="block text-sm font-medium text-gray-700"
                      >Start date (optional)</label
                    >
                    <input
                      type="date"
                      id="start-date"
                      class="mt-1 block w-full border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                    />
                    <p class="mt-1 text-xs text-gray-500">
                      Used to show calendar dates in the schedule.
                    </p>
                  </div>
                  <div>
                    <label
                      for="compounding"
                      class="block text-sm font-medium text-gray-700"
                      >Interest compounding</label
                    >
                    <select
                      id="compounding"
                      class="mt-1 block w-full border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                    >
                      <option value="same" selected>
                        Same as payment frequency
                      </option>
                      <option value="12">Monthly (12 / year)</option>
                      <option value="365">Daily (365 / year)</option>
                      <option value="1">Annually (1 / year)</option>
                    </select>
                  </div>
                </div>

                <div class="flex flex-wrap items-center gap-3 pt-2">
                  <button
                    type="button"
                    id="calculate-btn"
                    class="inline-flex items-center px-5 py-2.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                  >
                    Calculate schedule
                  </button>
                  <button
                    type="button"
                    id="reset-btn"
                    class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
                  >
                    Reset
                  </button>
                  <span id="input-error" class="text-sm text-red-600 hidden"
                    >Please check your inputs. Loan amount, rate, and term must
                    be greater than zero.</span
                  >
                </div>
              </form>
            </section>

            <section aria-labelledby="summary-heading" class="mb-8">
              <div class="flex items-center justify-between mb-3">
                <h2 id="summary-heading" class="text-xl font-semibold">
                  Results summary
                </h2>
                <span
                  id="summary-badge"
                  class="badge bg-green-100 text-green-700 hidden"
                  >Updated</span
                >
              </div>
              <div
                id="results-summary"
                class="grid md:grid-cols-3 gap-4 text-sm"
              >
                <div class="p-4 rounded-lg bg-gray-50 border border-gray-200">
                  <div class="text-gray-500 mb-1">Regular payment</div>
                  <div id="summary-payment" class="text-lg font-semibold">
                    —
                  </div>
                  <div
                    id="summary-frequency"
                    class="text-xs text-gray-500 mt-1"
                  >
                    per month
                  </div>
                </div>
                <div class="p-4 rounded-lg bg-gray-50 border border-gray-200">
                  <div class="text-gray-500 mb-1">Total interest paid</div>
                  <div id="summary-interest" class="text-lg font-semibold">
                    —
                  </div>
                  <div
                    id="summary-interest-saved"
                    class="text-xs text-emerald-600 mt-1 hidden"
                  ></div>
                </div>
                <div class="p-4 rounded-lg bg-gray-50 border border-gray-200">
                  <div class="text-gray-500 mb-1">Payoff time</div>
                  <div id="summary-term" class="text-lg font-semibold">—</div>
                  <div
                    id="summary-payoff-date"
                    class="text-xs text-gray-500 mt-1"
                  >
                    —
                  </div>
                </div>
              </div>
            </section>

            <section aria-labelledby="schedule-heading" class="mb-8">
              <div
                class="flex flex-wrap items-center justify-between gap-3 mb-3"
              >
                <div>
                  <h2 id="schedule-heading" class="text-xl font-semibold">
                    Amortization schedule
                  </h2>
                  <p class="text-sm text-gray-500">
                    See how each payment is split between interest and
                    principal.
                  </p>
                </div>
                <div class="flex flex-wrap items-center gap-2">
                  <label class="inline-flex items-center text-xs text-gray-600">
                    <input
                      type="checkbox"
                      id="show-annual-summary"
                      class="mr-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                    />
                    Show annual summary only
                  </label>
                  <button
                    type="button"
                    id="download-csv-btn"
                    class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-40"
                    disabled
                  >
                    Download CSV
                  </button>
                </div>
              </div>

              <div
                id="schedule-container"
                class="scroll-table border border-gray-200 rounded-lg bg-white"
              >
                <table class="min-w-full text-xs">
                  <thead class="sticky-header">
                    <tr>
                      <th
                        class="px-3 py-2 text-left font-semibold text-gray-700 border-b"
                      >
                        #
                      </th>
                      <th
                        class="px-3 py-2 text-left font-semibold text-gray-700 border-b"
                      >
                        Date
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700 border-b"
                      >
                        Payment
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700 border-b"
                      >
                        Interest
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700 border-b"
                      >
                        Principal
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700 border-b"
                      >
                        Extra
                      </th>
                      <th
                        class="px-3 py-2 text-right font-semibold text-gray-700 border-b"
                      >
                        Balance
                      </th>
                    </tr>
                  </thead>
                  <tbody id="schedule-body">
                    <tr>
                      <td
                        colspan="7"
                        class="px-3 py-6 text-center text-gray-400"
                      >
                        Enter your loan details and click “Calculate schedule”
                        to see the amortization table.
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </section>

            <section aria-labelledby="how-it-works-heading" class="prose">
              <h2 id="how-it-works-heading">
                How this loan amortization calculator works
              </h2>
              <p>
                This tool builds a full amortization schedule for any fixed-rate
                loan (mortgage, auto, personal, business loan, etc.). It
                supports:
              </p>
              <ul>
                <li>
                  Multiple payment frequencies (monthly, bi-weekly, weekly,
                  quarterly, annual)
                </li>
                <li>Optional interest-only period at the start of the loan</li>
                <li>Automatic application of extra principal each payment</li>
                <li>
                  Calendar dates for each payment (if you provide a start date)
                </li>
                <li>CSV export for use in Excel or Google Sheets</li>
              </ul>

              <h3>1. Payment formula for a fully amortizing loan</h3>
              <p>
                For a standard fixed-rate loan with constant payments, the
                periodic payment \(P\) is:
              </p>
              <div class="formula-box">
                \( P = \dfrac{r \times PV}{1 - (1 + r)^{-n}} \)
              </div>
              <ul>
                <li>\(PV\) = loan amount (present value)</li>
                <li>
                  \(r\) = periodic interest rate = annual rate ÷ payments per
                  year
                </li>
                <li>\(n\) = total number of payments</li>
              </ul>
              <p>
                Each period, interest is computed on the current balance, and
                the rest of the payment goes to principal:
              </p>
              <div class="formula-box">
                <p>\( \text{Interest}_t = \text{Balance}_{t-1} \times r \)</p>
                <p>\( \text{Principal}_t = P - \text{Interest}_t \)</p>
                <p>
                  \( \text{Balance}_t = \text{Balance}_{t-1} -
                  \text{Principal}_t - \text{Extra}_t \)
                </p>
              </div>

              <h3>2. Interest-only period</h3>
              <p>If you set an interest-only period, the calculator will:</p>
              <ul>
                <li>
                  Charge only interest during that phase: \( \text{Payment} =
                  \text{Balance} \times r \)
                </li>
                <li>
                  Keep principal constant (unless you add extra principal)
                </li>
                <li>
                  After the interest-only period ends, re-amortize the remaining
                  balance over the remaining term using the standard formula.
                </li>
              </ul>

              <h3>3. Extra principal payments</h3>
              <p>
                Extra payments are applied directly to principal after the
                regular payment. This:
              </p>
              <ul>
                <li>Reduces the outstanding balance faster</li>
                <li>Cuts total interest paid</li>
                <li>
                  Shortens the payoff time (the schedule ends early once the
                  balance reaches zero)
                </li>
              </ul>

              <h3>4. Effective interest rate vs. payment frequency</h3>
              <p>
                The calculator converts your annual rate to a periodic rate
                based on the selected payment frequency. If you choose a
                separate compounding frequency (e.g., daily compounding with
                monthly payments), it first computes an effective annual rate
                and then derives the per‑payment rate from that.
              </p>
            </section>

            <section aria-labelledby="faq-heading" class="prose mt-8">
              <h2 id="faq-heading">Frequently asked questions</h2>

              <h3>What is an amortization schedule?</h3>
              <p>
                An amortization schedule is a table that shows every payment on
                a loan, broken down into interest and principal, along with the
                remaining balance after each payment. It helps you see exactly
                how your debt declines over time.
              </p>

              <h3>
                Why does the first payment have more interest than principal?
              </h3>
              <p>
                At the beginning of the loan, your balance is highest, so
                interest (which is calculated on the balance) is also highest.
                As you pay down principal, the interest portion shrinks and more
                of each payment goes toward principal.
              </p>

              <h3>How do bi-weekly payments affect my loan?</h3>
              <p>
                With bi-weekly payments, you make 26 half‑payments per year,
                which is equivalent to 13 monthly payments. That “extra” payment
                each year reduces your balance faster and typically shortens the
                loan term and total interest compared with standard monthly
                payments.
              </p>

              <h3>Can I model a balloon payment with this calculator?</h3>
              <p>
                This tool focuses on fully amortizing loans with optional extra
                principal each period. To approximate a balloon payment, you can
                add a large one‑time extra principal amount near the end of the
                term and observe the new payoff time and interest savings.
              </p>

              <h3>
                Is this calculator suitable for mortgages, auto loans, and
                personal loans?
              </h3>
              <p>
                Yes. As long as the loan has a fixed interest rate and regular
                payments, you can use this calculator to model mortgages, car
                loans, personal loans, and many types of business loans.
              </p>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Loan, Amortization, Calculator, Loan amount $ Annual interest rate % Loan term Years Months Payment frequency Monthly (12 / year) Bi-weekly (26 / year) Weekly (52 / year) Quarterly (4 / year) Annually (1 / year) Interest-only period (years, optional) During this period you pay interest only; principal amortization starts afterward. Extra principal per payment (optional) $ Added to each scheduled payment and applied directly to principal. Start date (optional) Used to show calendar dates in the schedule. Interest compounding Same as payment frequency Monthly (12 / year) Daily (365 / year) Annually (1 / year) Calculate schedule Reset Please check your inputs. Loan amount, rate, and term must be greater than zero. Results summary Updated Regular payment — per month Total interest paid — Payoff time — — Amortization schedule See how each payment is split between interest and principal. Show annual summary only.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Loan amount $ Annual interest rate % Loan term Years Months Payment frequency Monthly (12 / year) Bi-weekly (26 / year) Weekly (52 / year) Quarterly (4 / year) Annually (1 / year) Interest-only period (years, optional) During this period you pay interest only; principal amortization starts afterward. Extra principal per payment (optional) $ Added to each scheduled payment and applied directly to principal. Start date (optional) Used to show calendar dates in the schedule. Interest compounding Same as payment frequency Monthly (12 / year) Daily (365 / year) Annually (1 / year) Calculate schedule Reset Please check your inputs. Loan amount, rate, and term must be greater than zero. Results summary Updated Regular payment — per month Total interest paid — Payoff time — — Amortization schedule See how each payment is split between interest and principal. Show annual summary only</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Loan, Amortization, Calculator, Loan amount $ Annual interest rate % Loan term Years Months Payment frequency Monthly (12 / year) Bi-weekly (26 / year) Weekly (52 / year) Quarterly (4 / year) Annually (1 / year) Interest-only period (years, optional) During this period you pay interest only; principal amortization starts afterward. Extra principal per payment (optional) $ Added to each scheduled payment and applied directly to principal. Start date (optional) Used to show calendar dates in the schedule. Interest compounding Same as payment frequency Monthly (12 / year) Daily (365 / year) Annually (1 / year) Calculate schedule Reset Please check your inputs. Loan amount, rate, and term must be greater than zero. Results summary Updated Regular payment — per month Total interest paid — Payoff time — — Amortization schedule See how each payment is split between interest and principal. Show annual summary only.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Loan amount $ Annual interest rate % Loan term Years Months Payment frequency Monthly (12 / year) Bi-weekly (26 / year) Weekly (52 / year) Quarterly (4 / year) Annually (1 / year) Interest-only period (years, optional) During this period you pay interest only; principal amortization starts afterward. Extra principal per payment (optional) $ Added to each scheduled payment and applied directly to principal. Start date (optional) Used to show calendar dates in the schedule. Interest compounding Same as payment frequency Monthly (12 / year) Daily (365 / year) Annually (1 / year) Calculate schedule Reset Please check your inputs. Loan amount, rate, and term must be greater than zero. Results summary Updated Regular payment — per month Total interest paid — Payoff time — — Amortization schedule See how each payment is split between interest and principal. Show annual summary only</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">Related finance tools</h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/loan-amortization"
                  class="text-blue-600 hover:underline"
                  >Loan Amortization Schedule (Advanced)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/simple-loan"
                  class="text-blue-600 hover:underline"
                  >Simple Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-payoff"
                  class="text-blue-600 hover:underline"
                  >Loan Payoff Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/debt-snowball-calculator"
                  class="text-blue-600 hover:underline"
                  >Debt Snowball Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/debt-avalanche-calculator"
                  class="text-blue-600 hover:underline"
                  >Debt Avalanche Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-blue-600 hover:underline"
                  >Mortgage Payment Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payoff"
                  class="text-blue-600 hover:underline"
                  >Mortgage Payoff Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan"
                  class="text-blue-600 hover:underline"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/personal-loan"
                  class="text-blue-600 hover:underline"
                  >Personal Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-comparison-calculator"
                  class="text-blue-600 hover:underline"
                  >Loan Comparison Calculator</a
                >
              </li>
            
              <li><a href="https://calcdomain.com/motorcycle-loan-calculator" class="text-blue-600 hover:underline">&lt;!DOCTYPE html&gt;</a></li>

              <li><a href="https://calcdomain.com/heloc-calculator" class="text-blue-600 hover:underline">HELOC Calculator – Home Equity Line of Credit</a></li>

              <li><a href="https://calcdomain.com/installment-loan-calculator" class="text-blue-600 hover:underline">Installment Loan Calculator</a></li>

              <li><a href="https://calcdomain.com/hard-money-loan-calculator" class="text-blue-600 hover:underline">Hard Money Loan Calculator</a></li>

              <li><a href="https://calcdomain.com/home-equity-loan-calculator" class="text-blue-600 hover:underline">Home Equity Loan Calculator</a></li>

              <li><a href="https://calcdomain.com/payday-loan-calculator" class="text-blue-600 hover:underline">Payday Loan Calculator</a></li>

              <li><a href="https://calcdomain.com/co-signer-loan-calculator" class="text-blue-600 hover:underline">Co-Signer Loan Calculator</a></li>

              <li><a href="https://calcdomain.com/construction-loan-calculator" class="text-blue-600 hover:underline">Construction Loan Calculator</a></li>

              <li><a href="https://calcdomain.com/bridge-loan-calculator" class="text-blue-600 hover:underline">Bridge Loan Calculator</a></li>

              <li><a href="https://calcdomain.com/boat-loan-calculator" class="text-blue-600 hover:underline">Boat Loan Calculator</a></li>

              <li><a href="https://calcdomain.com/peer-to-peer-loan-calculator" class="text-blue-600 hover:underline">Peer to Peer Loan Calculator</a></li>

              <li><a href="https://calcdomain.com/secured-loan-calculator" class="text-blue-600 hover:underline">Secured Loan Calculator</a></li>

              <li><a href="https://calcdomain.com/title-loan-calculator" class="text-blue-600 hover:underline">Title Loan Calculator</a></li>

              <li><a href="https://calcdomain.com/unsecured-loan-calculator" class="text-blue-600 hover:underline">Unsecured Loan Calculator</a></li>
</ul>
          </div>
          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">
              Tips for using amortization schedules
            </h2>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
              <li>
                Compare scenarios with and without extra payments to see
                interest savings.
              </li>
              <li>
                Align the start date with your actual first payment date for
                accurate payoff dates.
              </li>
              <li>
                Use the CSV export to share schedules with clients, lenders, or
                advisors.
              </li>
              <li>
                Re-run the schedule if your rate or payment frequency changes.
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Utility: format currency
      function formatCurrency(value, currency = "USD") {
        if (!isFinite(value)) return "—";
        return new Intl.NumberFormat("en-US", {
          style: "currency",
          currency,
          maximumFractionDigits: 2,
        }).format(value);
      }

      function formatNumber(value, decimals = 2) {
        if (!isFinite(value)) return "—";
        return value.toLocaleString("en-US", {
          minimumFractionDigits: decimals,
          maximumFractionDigits: decimals,
        });
      }

      function getFrequencyLabel(freq) {
        switch (freq) {
          case 52:
            return "per week";
          case 26:
            return "every 2 weeks";
          case 12:
            return "per month";
          case 4:
            return "per quarter";
          case 1:
            return "per year";
          default:
            return "per period";
        }
      }

      function addPeriods(date, periods, freqPerYear) {
        if (!date) return "";
        const d = new Date(date.getTime());
        if (freqPerYear === 12) {
          d.setMonth(d.getMonth() + periods);
        } else if (freqPerYear === 4) {
          d.setMonth(d.getMonth() + 3 * periods);
        } else if (freqPerYear === 1) {
          d.setFullYear(d.getFullYear() + periods);
        } else {
          d.setDate(d.getDate() + Math.round(365 / freqPerYear) * periods);
        }
        return d;
      }

      function formatDate(date) {
        if (!date) return "";
        return date.toLocaleDateString("en-US", {
          year: "numeric",
          month: "short",
          day: "numeric",
        });
      }

      function computePeriodicRate(
        annualRate,
        paymentsPerYear,
        compoundingSetting
      ) {
        const r = annualRate / 100;
        if (r === 0) return 0;
        if (compoundingSetting === "same") {
          return r / paymentsPerYear;
        }
        const m = Number(compoundingSetting);
        if (!m || m <= 0) return r / paymentsPerYear;
        const effectiveAnnual = Math.pow(1 + r / m, m) - 1;
        return Math.pow(1 + effectiveAnnual, 1 / paymentsPerYear) - 1;
      }

      function buildSchedule(params) {
        const {
          principal,
          annualRate,
          termYears,
          paymentsPerYear,
          interestOnlyYears,
          extraPerPayment,
          startDate,
          compoundingSetting,
        } = params;

        const schedule = [];
        const totalPayments = Math.round(termYears * paymentsPerYear);
        const interestOnlyPeriods = Math.round(
          Math.min(interestOnlyYears, termYears) * paymentsPerYear
        );
        const amortizationPeriods = totalPayments - interestOnlyPeriods;

        const periodicRate = computePeriodicRate(
          annualRate,
          paymentsPerYear,
          compoundingSetting
        );

        let balance = principal;
        let payment = 0;

        if (amortizationPeriods > 0) {
          if (periodicRate === 0) {
            payment = principal / amortizationPeriods;
          } else {
            payment =
              (periodicRate * principal) /
              (1 - Math.pow(1 + periodicRate, -amortizationPeriods));
          }
        }

        let totalInterest = 0;
        let payoffIndex = totalPayments;
        let payoffDate = null;

        for (let i = 1; i <= totalPayments && balance > 0.01; i++) {
          const isInterestOnly = i <= interestOnlyPeriods;
          const currentRate = periodicRate;
          let interest = balance * currentRate;
          let regularPayment;

          if (isInterestOnly) {
            regularPayment = interest;
          } else {
            regularPayment = payment;
          }

          if (regularPayment + extraPerPayment > balance + interest + 0.01) {
            regularPayment = balance + interest;
          }

          let principalPaid = regularPayment - interest;
          if (principalPaid < 0) principalPaid = 0;

          let extra = extraPerPayment;
          if (extra > 0 && balance - principalPaid - extra < 0) {
            extra = Math.max(0, balance - principalPaid);
          }

          const totalPayment = regularPayment + extra;
          balance = balance - principalPaid - extra;
          if (balance < 0.01) balance = 0;

          totalInterest += interest;

          const date = startDate
            ? addPeriods(startDate, i - 1, paymentsPerYear)
            : null;

          schedule.push({
            period: i,
            date: date ? formatDate(date) : "",
            payment: totalPayment,
            regularPayment,
            interest,
            principal: principalPaid,
            extra,
            balance,
          });

          if (balance === 0 && payoffDate === null) {
            payoffIndex = i;
            payoffDate = date;
            break;
          }
        }

        const years = payoffIndex / paymentsPerYear;
        return {
          schedule,
          totalInterest,
          payoffPeriods: payoffIndex,
          payoffYears: years,
          payoffDate,
        };
      }

      function summarizeAnnual(schedule, paymentsPerYear) {
        const annual = {};
        schedule.forEach((row) => {
          const year = row.date ? new Date(row.date).getFullYear() : null;
          const key = year || "Year " + Math.ceil(row.period / paymentsPerYear);
          if (!annual[key]) {
            annual[key] = {
              year: key,
              payment: 0,
              interest: 0,
              principal: 0,
              extra: 0,
              balance: row.balance,
            };
          }
          annual[key].payment += row.payment;
          annual[key].interest += row.interest;
          annual[key].principal += row.principal;
          annual[key].extra += row.extra;
          annual[key].balance = row.balance;
        });
        return Object.values(annual);
      }

      function downloadCSV(schedule) {
        if (!schedule || !schedule.length) return;
        const header = [
          "Period",
          "Date",
          "Total Payment",
          "Regular Payment",
          "Interest",
          "Principal",
          "Extra Principal",
          "Remaining Balance",
        ];
        const rows = schedule.map((r) => [
          r.period,
          r.date,
          r.payment.toFixed(2),
          r.regularPayment.toFixed(2),
          r.interest.toFixed(2),
          r.principal.toFixed(2),
          r.extra.toFixed(2),
          r.balance.toFixed(2),
        ]);
        const csvContent = [header, ...rows]
          .map((row) => row.join(","))
          .join("\n");
        const blob = new Blob([csvContent], {
          type: "text/csv;charset=utf-8;",
        });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "loan-amortization-schedule.csv";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }

      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("amortization-form");
        const calculateBtn = document.getElementById("calculate-btn");
        const resetBtn = document.getElementById("reset-btn");
        const errorEl = document.getElementById("input-error");
        const scheduleBody = document.getElementById("schedule-body");
        const showAnnualCheckbox = document.getElementById(
          "show-annual-summary"
        );
        const downloadBtn = document.getElementById("download-csv-btn");
        const summaryPayment = document.getElementById("summary-payment");
        const summaryFrequency = document.getElementById("summary-frequency");
        const summaryInterest = document.getElementById("summary-interest");
        const summaryInterestSaved = document.getElementById(
          "summary-interest-saved"
        );
        const summaryTerm = document.getElementById("summary-term");
        const summaryPayoffDate = document.getElementById(
          "summary-payoff-date"
        );
        const summaryBadge = document.getElementById("summary-badge");

        let lastFullSchedule = null;
        let lastBaselineInterest = null;
        let lastParams = null;

        function getInputs() {
          const principal = parseFloat(
            document.getElementById("loan-amount").value
          );
          const rate = parseFloat(
            document.getElementById("interest-rate").value
          );
          const termVal = parseFloat(
            document.getElementById("loan-term").value
          );
          const termUnit = document.getElementById("loan-term-unit").value;
          const freq = parseInt(
            document.getElementById("payment-frequency").value,
            10
          );
          const ioYears =
            parseFloat(document.getElementById("interest-only-years").value) ||
            0;
          const extra =
            parseFloat(document.getElementById("extra-payment").value) || 0;
          const compounding = document.getElementById("compounding").value;
          const startDateStr = document.getElementById("start-date").value;
          const startDate = startDateStr
            ? new Date(startDateStr + "T00:00:00")
            : null;

          const termYears = termUnit === "years" ? termVal : termVal / 12;

          return {
            principal,
            rate,
            termYears,
            freq,
            ioYears,
            extra,
            compounding,
            startDate,
          };
        }

        function validateInputs(inputs) {
          if (!isFinite(inputs.principal) || inputs.principal <= 0)
            return false;
          if (!isFinite(inputs.rate) || inputs.rate < 0) return false;
          if (!isFinite(inputs.termYears) || inputs.termYears <= 0)
            return false;
          if (!isFinite(inputs.freq) || inputs.freq <= 0) return false;
          if (inputs.ioYears < 0 || inputs.ioYears > inputs.termYears)
            return false;
          if (inputs.extra < 0) return false;
          return true;
        }

        function renderSchedule(schedule, paymentsPerYear, annualOnly) {
          if (!schedule || !schedule.length) {
            scheduleBody.innerHTML =
              '<tr><td colspan="7" class="px-3 py-6 text-center text-gray-400">No schedule to display. Please check your inputs.</td></tr>';
            return;
          }

          let rowsHtml = "";
          if (annualOnly) {
            const annual = summarizeAnnual(schedule, paymentsPerYear);
            let idx = 1;
            annual.forEach((row) => {
              rowsHtml += `
            <tr class="border-b last:border-0">
              <td class="px-3 py-2 text-gray-700">${idx++}</td>
              <td class="px-3 py-2 text-gray-700">${row.year}</td>
              <td class="px-3 py-2 text-right text-gray-700">${formatCurrency(
                row.payment
              )}</td>
              <td class="px-3 py-2 text-right text-gray-700">${formatCurrency(
                row.interest
              )}</td>
              <td class="px-3 py-2 text-right text-gray-700">${formatCurrency(
                row.principal
              )}</td>
              <td class="px-3 py-2 text-right text-gray-700">${formatCurrency(
                row.extra
              )}</td>
              <td class="px-3 py-2 text-right text-gray-700">${formatCurrency(
                row.balance
              )}</td>
            </tr>
          `;
            });
          } else {
            schedule.forEach((row) => {
              rowsHtml += `
            <tr class="border-b last:border-0">
              <td class="px-3 py-2 text-gray-700">${row.period}</td>
              <td class="px-3 py-2 text-gray-700">${row.date || "—"}</td>
              <td class="px-3 py-2 text-right text-gray-700">${formatCurrency(
                row.payment
              )}</td>
              <td class="px-3 py-2 text-right text-gray-700">${formatCurrency(
                row.interest
              )}</td>
              <td class="px-3 py-2 text-right text-gray-700">${formatCurrency(
                row.principal
              )}</td>
              <td class="px-3 py-2 text-right text-gray-700">${formatCurrency(
                row.extra
              )}</td>
              <td class="px-3 py-2 text-right text-gray-700">${formatCurrency(
                row.balance
              )}</td>
            </tr>
          `;
            });
          }
          scheduleBody.innerHTML = rowsHtml;
        }

        function updateSummary(results, params) {
          const {
            schedule,
            totalInterest,
            payoffPeriods,
            payoffYears,
            payoffDate,
          } = results;
          const {
            freq,
            extra,
            rate,
            principal,
            termYears,
            ioYears,
            compounding,
          } = params;

          if (!schedule || !schedule.length) {
            summaryPayment.textContent = "—";
            summaryFrequency.textContent = "";
            summaryInterest.textContent = "—";
            summaryInterestSaved.classList.add("hidden");
            summaryTerm.textContent = "—";
            summaryPayoffDate.textContent = "—";
            return;
          }

          const first = schedule[0];
          const regularPayment = first.regularPayment;
          summaryPayment.textContent = formatCurrency(regularPayment + extra);
          summaryFrequency.textContent = getFrequencyLabel(freq);

          summaryInterest.textContent = formatCurrency(totalInterest);

          if (extra > 0) {
            if (lastBaselineInterest == null) {
              const baseline = buildSchedule({
                principal,
                annualRate: rate,
                termYears,
                paymentsPerYear: freq,
                interestOnlyYears: ioYears,
                extraPerPayment: 0,
                startDate: null,
                compoundingSetting: compounding,
              });
              lastBaselineInterest = baseline.totalInterest;
            }
            const saved = lastBaselineInterest - totalInterest;
            if (saved > 0) {
              summaryInterestSaved.textContent = `Interest saved vs. no extra payments: ${formatCurrency(
                saved
              )}`;
              summaryInterestSaved.classList.remove("hidden");
            } else {
              summaryInterestSaved.classList.add("hidden");
            }
          } else {
            summaryInterestSaved.classList.add("hidden");
          }

          const years = Math.floor(payoffYears);
          const months = Math.round((payoffYears - years) * 12);
          let termStr = "";
          if (years > 0) termStr += years + " year" + (years > 1 ? "s" : "");
          if (months > 0) {
            if (termStr) termStr += " ";
            termStr += months + " month" + (months > 1 ? "s" : "");
          }
          summaryTerm.textContent =
            termStr || `${formatNumber(payoffPeriods)} payments`;

          summaryPayoffDate.textContent = payoffDate
            ? `Approx. payoff: ${formatDate(payoffDate)}`
            : "Approx. payoff after " + termStr;

          summaryBadge.classList.remove("hidden");
          setTimeout(() => summaryBadge.classList.add("hidden"), 2000);
        }

        function handleCalculate() {
          errorEl.classList.add("hidden");
          const inputs = getInputs();
          if (
            !validateInputs({
              principal: inputs.principal,
              rate: inputs.rate,
              termYears: inputs.termYears,
              freq: inputs.freq,
              ioYears: inputs.ioYears,
              extra: inputs.extra,
            })
          ) {
            errorEl.classList.remove("hidden");
            return;
          }

          const params = {
            principal: inputs.principal,
            annualRate: inputs.rate,
            termYears: inputs.termYears,
            paymentsPerYear: inputs.freq,
            interestOnlyYears: inputs.ioYears,
            extraPerPayment: inputs.extra,
            startDate: inputs.startDate,
            compoundingSetting: inputs.compounding,
          };

          lastParams = params;
          lastBaselineInterest = null;

          const results = buildSchedule(params);
          lastFullSchedule = results.schedule;

          renderSchedule(
            lastFullSchedule,
            params.paymentsPerYear,
            showAnnualCheckbox.checked
          );
          updateSummary(results, params);
          downloadBtn.disabled = false;
        }

        calculateBtn.addEventListener("click", handleCalculate);

        resetBtn.addEventListener("click", () => {
          form.reset();
          document.getElementById("loan-amount").value = 300000;
          document.getElementById("interest-rate").value = 6.5;
          document.getElementById("loan-term").value = 30;
          document.getElementById("loan-term-unit").value = "years";
          document.getElementById("payment-frequency").value = "12";
          document.getElementById("interest-only-years").value = 0;
          document.getElementById("extra-payment").value = 0;
          document.getElementById("compounding").value = "same";
          document.getElementById("start-date").value = "";

          errorEl.classList.add("hidden");
          scheduleBody.innerHTML =
            '<tr><td colspan="7" class="px-3 py-6 text-center text-gray-400">Enter your loan details and click “Calculate schedule” to see the amortization table.</td></tr>';
          summaryPayment.textContent = "—";
          summaryFrequency.textContent = "per month";
          summaryInterest.textContent = "—";
          summaryInterestSaved.classList.add("hidden");
          summaryTerm.textContent = "—";
          summaryPayoffDate.textContent = "—";
          downloadBtn.disabled = true;
          lastFullSchedule = null;
          lastBaselineInterest = null;
          lastParams = null;
        });

        showAnnualCheckbox.addEventListener("change", () => {
          if (!lastFullSchedule || !lastParams) return;
          renderSchedule(
            lastFullSchedule,
            lastParams.paymentsPerYear,
            showAnnualCheckbox.checked
          );
        });

        downloadBtn.addEventListener("click", () => {
          if (!lastFullSchedule) return;
          downloadCSV(lastFullSchedule);
        });
      });
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

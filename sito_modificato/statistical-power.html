<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Statistical Power Calculator &amp; Power Analysis</title>
  <meta name="description" content="Online statistical power calculator for A/B tests and experiments. Estimate power from effect size, sample size, standard deviation or proportions. Includes formulas, interpretation, and sample size suggestion.">
  <link rel="canonical" href="https://calcdomain.com/statistical-power">

  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Inter', sans-serif; }
    .card-hover { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
    .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
    .prose { max-width: 65ch; margin-left: auto; margin-right: auto; }
    .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
    .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
    .prose p { margin-bottom: 1rem; line-height: 1.6; }
    .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
    .prose li { margin-bottom: 0.5rem; }
    .formula-box { background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 8px; padding: 1rem; overflow-x: auto; margin: 1rem 0; }
    .help-text { font-size: .7rem; color: #6b7280; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .scroll-x { overflow-x: auto; }
  </style>

  <!-- Google tag (gtag.js) -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-7MB5V1LZRN');
  </script>

  <meta name="google-site-verification" content="_tiTZ9ivAdtXcAS9CMnTNJ549Sg39WVqP_ZFbWgglNA">

  <script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
  </script>

  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://calcdomain.com"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "General",
          "item": "https://calcdomain.com/categories/general"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Miscellaneous",
          "item": "https://calcdomain.com/subcategories/miscellaneous"
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is statistical power?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Statistical power is the probability that a test correctly rejects a false null hypothesis. In other words, it is the chance your experiment will detect the effect you care about."
          }
        },
        {
          "@type": "Question",
          "name": "Which inputs do I need for a power analysis?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "You typically need the effect size you care about, the sample size (or sample size per group), the significance level (alpha, often 0.05), and the expected variability (standard deviation) or proportions."
          }
        },
        {
          "@type": "Question",
          "name": "What is a good power value?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "A power of 0.8 (80%) is a common benchmark in research, meaning there is an 80% chance to detect the effect if it is truly present."
          }
        }
      ]
    },
    {
      "@type": "HowTo",
      "name": "How to run a simple power analysis for a two-sample test",
      "step": [
        {
          "@type": "HowToStep",
          "text": "Choose the test type (means or proportions)."
        },
        {
          "@type": "HowToStep",
          "text": "Enter the effect size (difference in means or proportions)."
        },
        {
          "@type": "HowToStep",
          "text": "Enter the sample size per group and significance level."
        },
        {
          "@type": "HowToStep",
          "text": "Click Calculate to see the estimated power and the indicative sample size for 80% power."
        }
      ]
    }
  ]
}
</script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
.auditspine-badge{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  border:1px solid #e5e7eb;
  background:#f8fafc;
  color:#0f172a;
}
.auditspine-badge-warn{
  background:#fff7ed;
  border-color:#fed7aa;
  color:#9a3412;
}
</style>
</head>
<body class="bg-gray-50 text-gray-800">

  <header class="bg-white shadow-sm sticky top-0 z-50">
    <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
      <div class="flex justify-between items-center">
        <a href="https://calcdomain.com" class="text-2xl font-bold text-blue-600">CalcDomain</a>
        <div class="w-full max-w-md hidden md:block mx-8">
          <div class="relative">
            <input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" autocomplete="off">
            <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
          </div>
        </div>
        <div class="hidden md:flex items-center space-x-6">
          <a href="https://calcdomain.com/search" class="text-gray-700 hover:text-blue-600 transition-colors">Advanced Search</a>
          <a href="https://calcdomain.com/#categories" class="text-gray-700 hover:text-blue-600 transition-colors">Categories</a>
        </div>
        <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
        </button>
      </div>
      <nav id="mobile-menu" class="md:hidden mt-4 hidden" aria-label="Mobile menu" role="navigation">
        <div class="mb-4">
          <div class="relative">
            <input type="search" id="mobile-search-input" placeholder="Search calculators..." class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
          </div>
        </div>
        <div class="space-y-2">
          <a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
          <a href="https://calcdomain.com/#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
        </div>
      </nav>
    </nav>
  </header>

  <div class="container mx-auto px-4 py-8">

    <nav class="text-sm mb-4 text-gray-600" aria-label="Breadcrumbs"><a href="https://calcdomain.com" class="hover:text-blue-600">Home</a> &raquo; <a href="https://calcdomain.com/categories/general" class="hover:text-blue-600">General</a> &raquo; <a href="https://calcdomain.com/subcategories/miscellaneous" class="hover:text-blue-600">Miscellaneous</a></nav>

    <div class="flex flex-col lg:flex-row gap-8">
      <main class="w-full lg:w-2/3">
        <div class="bg-white p-6 rounded-lg shadow-md">
          <header class="mb-6">
            <h1 class="text-2xl font-bold mb-2">Statistical Power Calculator</h1>
            <p class="text-gray-600">Estimate the power of a two-group experiment or A/B test from effect size, sample size, and alpha. Supports tests on means and on proportions.</p>
          </header>

          <section class="mb-6">
            <h2 class="text-lg font-semibold mb-3">1. Choose test type</h2>
            <select id="test-type" class="border rounded-md px-3 py-2">
              <option value="means" selected="">Difference in means (two-sample, equal n)</option>
              <option value="proportions">Difference in proportions (two-sample, equal n)</option>
            </select>
          </section>

          <section id="inputs-means" class="mb-6">
            <h2 class="text-lg font-semibold mb-3">2A. Inputs for means</h2>
            <p class="help-text mb-2">Example: control mean = 10, treatment mean = 12 → effect size = 2. SD is the common standard deviation.</p>
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label for="mean1" class="text-sm font-medium text-gray-700">Mean (group A)</label>
                <input id="mean1" type="number" step="0.0001" value="10" class="mt-1 w-full border rounded-md px-3 py-2">
              </div>
              <div>
                <label for="mean2" class="text-sm font-medium text-gray-700">Mean (group B)</label>
                <input id="mean2" type="number" step="0.0001" value="12" class="mt-1 w-full border rounded-md px-3 py-2">
              </div>
              <div>
                <label for="sd" class="text-sm font-medium text-gray-700">Standard deviation (common)</label>
                <input id="sd" type="number" step="0.0001" value="5" class="mt-1 w-full border rounded-md px-3 py-2">
              </div>
              <div>
                <label for="n-per-group-means" class="text-sm font-medium text-gray-700">Sample size per group</label>
                <input id="n-per-group-means" type="number" step="1" value="50" class="mt-1 w-full border rounded-md px-3 py-2">
              </div>
            </div>
          </section>

          <section id="inputs-prop" class="mb-6 hidden">
            <h2 class="text-lg font-semibold mb-3">2B. Inputs for proportions</h2>
            <p class="help-text mb-2">Example: baseline conversion p1 = 0.10, new variant p2 = 0.13.</p>
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label for="p1" class="text-sm font-medium text-gray-700">Proportion p1 (group A)</label>
                <input id="p1" type="number" step="0.0001" value="0.1" class="mt-1 w-full border rounded-md px-3 py-2">
              </div>
              <div>
                <label for="p2" class="text-sm font-medium text-gray-700">Proportion p2 (group B)</label>
                <input id="p2" type="number" step="0.0001" value="0.13" class="mt-1 w-full border rounded-md px-3 py-2">
              </div>
              <div>
                <label for="n-per-group-prop" class="text-sm font-medium text-gray-700">Sample size per group</label>
                <input id="n-per-group-prop" type="number" step="1" value="500" class="mt-1 w-full border rounded-md px-3 py-2">
              </div>
            </div>
          </section>

          <section class="mb-6">
            <h2 class="text-lg font-semibold mb-3">3. Test settings</h2>
            <div class="grid md:grid-cols-3 gap-4">
              <div>
                <label for="alpha" class="text-sm font-medium text-gray-700">Alpha (significance)</label>
                <input id="alpha" type="number" step="0.0001" value="0.05" class="mt-1 w-full border rounded-md px-3 py-2">
              </div>
              <div>
                <label for="tails" class="text-sm font-medium text-gray-700">Tails</label>
                <select id="tails" class="mt-1 w-full border rounded-md px-3 py-2">
                  <option value="two" selected="">Two-tailed</option>
                  <option value="one">One-tailed</option>
                </select>
              </div>
              <div class="flex items-end">
                <button id="calc-btn" class="bg-blue-600 text-white py-2 px-4 rounded-md font-semibold hover:bg-blue-700 w-full">Calculate power</button>
              </div>
            </div>
            <p id="input-error" class="text-xs text-red-500 mt-2"></p>
          </section>

          <section class="mb-6">
            <h2 class="text-lg font-semibold mb-3">4. Results</h2>
            <div class="grid md:grid-cols-3 gap-4">
              <div class="bg-indigo-50 border border-indigo-100 rounded-lg p-4">
                <p class="text-sm text-gray-700">Estimated power</p>
                <p id="power-output" class="text-2xl font-bold text-indigo-800">—</p>
                <p class="text-xs text-gray-500 mt-1" id="power-interpretation"></p>
              </div>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">Effect size (absolute)</p>
                <p id="effect-output" class="text-lg font-semibold text-gray-800">—</p>
              </div>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">Indicative n per group for 80% power</p>
                <p id="n80-output" class="text-lg font-semibold text-gray-800">—</p>
              </div>
            </div>
          </section>

          <section class="prose">
            <h2>What is statistical power?</h2>
            <p>Statistical power is the probability that your test will detect an effect if the effect is really there. Low power → high chance of false negatives.</p>
            <h3>Key determinants of power</h3>
            <ul>
              <li><strong>Effect size</strong>: bigger differences are easier to detect.</li>
              <li><strong>Sample size</strong>: more data → narrower standard error → higher power.</li>
              <li><strong>Alpha</strong>: a higher alpha (e.g. 0.1) makes it easier to reject H0, increasing power.</li>
              <li><strong>Variability</strong>: lower standard deviation → higher power.</li>
            </ul>
            <h3>Formula idea (z-approximation)</h3>
            <p>For a two-sample test on means (equal n), the test statistic roughly follows</p>
            <div class="formula-box"><code>z = (μ₂ − μ₁) / (σ √(2/n))</code></div>
            <p>We compare this to the critical value for the chosen α and tails, then compute the corresponding power as the probability the test statistic falls in the rejection region.</p>
          </section>
        </div>
      
<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[','\\]</div>
  <pre class="auditspine-mono">','\</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">z = (μ₂ − μ₁) / (σ √(2/n))</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>NIST — Weights and measures</strong> — nist.gov · Accessed 2026-01-19<br><a href="https://www.nist.gov/pml/weights-and-measures" target="_blank" rel="nofollow noopener">https://www.nist.gov/pml/weights-and-measures</a></li>
<li><strong>FTC — Consumer advice</strong> — consumer.ftc.gov · Accessed 2026-01-19<br><a href="https://consumer.ftc.gov/" target="_blank" rel="nofollow noopener">https://consumer.ftc.gov/</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->
</main>

      <aside class="w-full lg:w-1/3">
        <div class="bg-white p-5 rounded-lg shadow-md mb-6">
          <h2 class="text-lg font-semibold mb-3">Related statistical tools</h2>
          <ul class="space-y-2">
            <li><a href="https://calcdomain.com/t-test" class="text-blue-600 hover:underline">t-test</a></li>
            <li><a href="https://calcdomain.com/confidence-interval" class="text-blue-600 hover:underline">Confidence Interval</a></li>
            <li><a href="https://calcdomain.com/correlation-coefficient" class="text-blue-600 hover:underline">Correlation Coefficient</a></li>
            <li><a href="https://calcdomain.com/q-q-plot-generator" class="text-blue-600 hover:underline">Q-Q Plot Generator</a></li>
            <li><a href="https://calcdomain.com/hypergeometric-distribution" class="text-blue-600 hover:underline">Hypergeometric Distribution</a></li>
          </ul>
        </div>
        <div class="bg-white p-5 rounded-lg shadow-md">
          <h2 class="text-lg font-semibold mb-3">Rule of thumb</h2>
          <p class="text-sm text-gray-600">If power &lt; 0.8, consider increasing sample size, relaxing alpha, or targeting a larger effect.</p>
        </div>
      </aside>
    </div>
  </div>

  <footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                                                                                                                <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction & DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health & Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle & Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math & Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>
































  <script src="/assets/js/script_menu.js" defer=""></script>
  <script src="/assets/js/script_faq.js" defer=""></script>
  <script src="search.js" defer=""></script>

  <script>
    // mobile menu
    const mobileToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    if (mobileToggle && mobileMenu) {
      mobileToggle.addEventListener('click', () => {
        const isHidden = mobileMenu.classList.contains('hidden');
        mobileMenu.classList.toggle('hidden', !isHidden);
        mobileToggle.setAttribute('aria-expanded', String(isHidden));
      });
    }

    // elements
    const testTypeEl = document.getElementById('test-type');
    const meansBlock = document.getElementById('inputs-means');
    const propBlock = document.getElementById('inputs-prop');
    const calcBtn = document.getElementById('calc-btn');
    const inputErr = document.getElementById('input-error');
    const powerOut = document.getElementById('power-output');
    const effectOut = document.getElementById('effect-output');
    const n80Out = document.getElementById('n80-output');
    const powerInterp = document.getElementById('power-interpretation');

    function showInputs() {
      if (testTypeEl.value === 'means') {
        meansBlock.classList.remove('hidden');
        propBlock.classList.add('hidden');
      } else {
        meansBlock.classList.add('hidden');
        propBlock.classList.remove('hidden');
      }
    }
    testTypeEl.addEventListener('change', showInputs);
    showInputs();

    // normal CDF approximation
    function normalCDF(x) {
      // Abramowitz & Stegun
      const sign = x < 0 ? -1 : 1;
      x = Math.abs(x) / Math.sqrt(2);
      const t = 1 / (1 + 0.3275911 * x);
      const a1 = 0.254829592, a2 = -0.284496736, a3 = 1.421413741, a4 = -1.453152027, a5 = 1.061405429;
      const erf = 1 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);
      return 0.5 * (1 + sign * erf);
    }

    function zCritical(alpha, tails) {
      // simple inverse for common alphas – we use a small lookup to avoid heavy code
      // 0.05 two-tailed -> 1.96, one-tailed -> 1.645
      let p;
      if (tails === 'two') {
        p = 1 - alpha / 2;
      } else {
        p = 1 - alpha;
      }
      // quick approximation for probit using AS241-like short form could be added,
      // but we can use a narrow lookup for typical p
      const table = {
        "0.995": 2.5758,
        "0.99": 2.3263,
        "0.975": 1.96,
        "0.95": 1.6449,
        "0.9": 1.2816
      };
      // round p to 3 decimals
      const key = p.toFixed(3);
      if (table[key] !== undefined) return table[key];
      // fallback using binary search over normalCDF
      let lo = -5, hi = 5;
      for (let i = 0; i < 60; i++) {
        const mid = (lo + hi) / 2;
        if (normalCDF(mid) < p) lo = mid; else hi = mid;
      }
      return (lo + hi) / 2;
    }

    function calcPowerMeans(alpha, tails, mean1, mean2, sd, n) {
      const diff = mean2 - mean1;
      if (sd <= 0 || n <= 0) return {power: NaN, diff: diff};
      const se = sd * Math.sqrt(2 / n);
      const z = Math.abs(diff) / se;
      const zcrit = zCritical(alpha, tails);
      let power;
      if (tails === 'two') {
        // Power = Phi(z - zcrit) + (1 - Phi(z + zcrit))? Actually for two-sided:
        // power = Phi( -zcrit - z) + 1 - Phi(zcrit - z)
        power = normalCDF(-zcrit - z) + (1 - normalCDF(zcrit - z));
      } else {
        // one-sided, assume detecting mean2 > mean1 if diff>0
        if (diff >= 0) {
          power = 1 - normalCDF(zcrit - z);
        } else {
          power = 1 - normalCDF(zcrit + z);
        }
      }
      return {power: power, diff: diff};
    }

    function calcPowerProp(alpha, tails, p1, p2, n) {
      const diff = p2 - p1;
      if (n <= 0) return {power: NaN, diff: diff};
      const se = Math.sqrt(p1*(1-p1)/n + p2*(1-p2)/n);
      if (se === 0) return {power: NaN, diff: diff};
      const z = Math.abs(diff) / se;
      const zcrit = zCritical(alpha, tails);
      let power;
      if (tails === 'two') {
        power = normalCDF(-zcrit - z) + (1 - normalCDF(zcrit - z));
      } else {
        if (diff >= 0) {
          power = 1 - normalCDF(zcrit - z);
        } else {
          power = 1 - normalCDF(zcrit + z);
        }
      }
      return {power: power, diff: diff};
    }

    function suggestN80Means(alpha, tails, diff, sd) {
      if (diff === 0) return NaN;
      const targetPower = 0.8;
      const zcrit = zCritical(alpha, tails);
      const zbeta = zCritical(1 - targetPower, 'one'); // this gives z for beta with one tail
      // n = 2 * ( (zcrit + zbeta) * sd / |diff| )^2
      const n = 2 * Math.pow((zcrit + zbeta) * sd / Math.abs(diff), 2);
      return Math.ceil(n);
    }

    function suggestN80Prop(alpha, tails, p1, p2) {
      const diff = p2 - p1;
      if (diff === 0) return NaN;
      const targetPower = 0.8;
      const zcrit = zCritical(alpha, tails);
      const zbeta = zCritical(1 - targetPower, 'one');
      // var = p1(1-p1) + p2(1-p2) for per-group; so n = ((zcrit+zbeta)^2 * (p1(1-p1)+p2(1-p2))) / diff^2
      const varianceSum = p1*(1-p1) + p2*(1-p2);
      const n = Math.pow(zcrit + zbeta, 2) * varianceSum / Math.pow(diff, 2);
      return Math.ceil(n);
    }

    function formatPct(x) {
      if (isNaN(x)) return '—';
      return (x * 100).toFixed(1) + '%';
    }

    function calculate() {
      inputErr.textContent = '';
      powerOut.textContent = '—';
      effectOut.textContent = '—';
      n80Out.textContent = '—';
      powerInterp.textContent = '—';

      const alpha = parseFloat(document.getElementById('alpha').value);
      const tails = document.getElementById('tails').value;

      if (isNaN(alpha) || alpha <= 0 || alpha >= 1) {
        inputErr.textContent = 'Alpha must be between 0 and 1 (e.g. 0.05).';
        return;
      }

      if (testTypeEl.value === 'means') {
        const mean1 = parseFloat(document.getElementById('mean1').value);
        const mean2 = parseFloat(document.getElementById('mean2').value);
        const sd = parseFloat(document.getElementById('sd').value);
        const n = parseInt(document.getElementById('n-per-group-means').value, 10);
        if ([mean1, mean2, sd].some(isNaN) || isNaN(n)) {
          inputErr.textContent = 'Please enter valid numbers for means, SD, and n.';
          return;
        }
        const res = calcPowerMeans(alpha, tails, mean1, mean2, sd, n);
        powerOut.textContent = isNaN(res.power) ? '—' : formatPct(res.power);
        effectOut.textContent = (res.diff).toFixed(4);
        const n80 = suggestN80Means(alpha, tails, res.diff, sd);
        n80Out.textContent = isNaN(n80) ? '—' : n80.toString();
        if (!isNaN(res.power)) {
          if (res.power >= 0.8) {
            powerInterp.textContent = 'Good: power ≥ 80%. You have a high chance to detect this effect.';
          } else {
            powerInterp.textContent = 'Low power (< 80%). Consider increasing sample size or relaxing alpha.';
          }
        }
      } else {
        const p1 = parseFloat(document.getElementById('p1').value);
        const p2 = parseFloat(document.getElementById('p2').value);
        const n = parseInt(document.getElementById('n-per-group-prop').value, 10);
        if ([p1, p2].some(isNaN) || isNaN(n)) {
          inputErr.textContent = 'Please enter valid numbers for proportions and n.';
          return;
        }
        const res = calcPowerProp(alpha, tails, p1, p2, n);
        powerOut.textContent = isNaN(res.power) ? '—' : formatPct(res.power);
        effectOut.textContent = (res.diff).toFixed(4);
        const n80 = suggestN80Prop(alpha, tails, p1, p2);
        n80Out.textContent = isNaN(n80) ? '—' : n80.toString();
        if (!isNaN(res.power)) {
          if (res.power >= 0.8) {
            powerInterp.textContent = 'Good: power ≥ 80%.';
          } else {
            powerInterp.textContent = 'Low power. Try to increase sample size.';
          }
        }
      }
    }

    calcBtn.addEventListener('click', calculate);
    // run once
    calculate();
  </script>

  <script>
    window.MathJax = { tex: { inlineMath: [['\\(','\\)'], [',
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>



</body></html>, ',
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>



</body></html>]], displayMath: [['\\[','\\]']] }, svg: { fontCache: 'global' } };,
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>



</body></html>
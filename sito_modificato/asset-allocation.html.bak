<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/asset-allocation" />
    <title>Asset Allocation Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Asset Allocation Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Asset Allocation Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Asset Allocation Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/asset-allocation" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Asset Allocation Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Asset Allocation Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "Investment Calculators", "item": "https://calcdomain.com/subcategories/finance-investment"}, {"@type": "ListItem", "position": 4, "name": "Asset Allocation Calculator", "item": "https://calcdomain.com/asset-allocation"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/finance-investment" class="text-blue-600 hover:underline">Investment Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Asset Allocation Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <section aria-labelledby="asset-allocation-calculator">
              <div class="mb-6">
                <h1
                  id="asset-allocation-calculator"
                  class="text-2xl md:text-3xl font-bold mb-2"
                >
                  Asset Allocation Calculator
                </h1>
                <p class="text-gray-700">
                  Build a diversified portfolio based on your risk profile,
                  investment horizon and rebalancing preferences. Adjust
                  allocations and instantly see expected return, volatility and
                  concrete investment amounts.
                </p>
              </div>

              <!-- Calculator UI -->
              <div class="grid gap-6">
                <!-- Inputs card -->
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                  <h2 class="text-xl font-semibold mb-3">
                    1. Investor profile
                  </h2>
                  <div class="grid md:grid-cols-2 gap-4">
                    <div>
                      <label
                        for="portfolioValue"
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Portfolio value</label
                      >
                      <div class="flex rounded-md shadow-sm">
                        <span
                          class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
                          >$</span
                        >
                        <input
                          type="number"
                          id="portfolioValue"
                          class="flex-1 min-w-0 block w-full px-3 py-2 rounded-r-md border border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"
                          value="100000"
                          min="0"
                          step="1000"
                        />
                      </div>
                      <p class="text-xs text-gray-500 mt-1">
                        Enter your current or target portfolio size.
                      </p>
                    </div>

                    <div>
                      <label
                        for="currency"
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Currency</label
                      >
                      <select
                        id="currency"
                        class="mt-1 block w-full pl-3 pr-10 py-2 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md"
                      >
                        <option value="$" selected>USD ($)</option>
                        <option value="€">EUR (€)</option>
                        <option value="£">GBP (£)</option>
                        <option value="CHF">CHF</option>
                        <option value="¥">JPY (¥)</option>
                      </select>
                    </div>

                    <div>
                      <label
                        for="horizon"
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Investment horizon</label
                      >
                      <select
                        id="horizon"
                        class="mt-1 block w-full pl-3 pr-10 py-2 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md"
                      >
                        <option value="short">Short term (0–3 years)</option>
                        <option value="medium" selected>
                          Medium term (3–10 years)
                        </option>
                        <option value="long">Long term (10+ years)</option>
                      </select>
                    </div>

                    <div>
                      <label
                        for="riskProfile"
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Risk profile</label
                      >
                      <select
                        id="riskProfile"
                        class="mt-1 block w-full pl-3 pr-10 py-2 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md"
                      >
                        <option value="conservative">Conservative</option>
                        <option value="balanced" selected>Balanced</option>
                        <option value="growth">Growth</option>
                        <option value="aggressive">Aggressive</option>
                      </select>
                      <p
                        class="text-xs text-gray-500 mt-1"
                        id="riskDescription"
                      >
                        Balanced: moderate risk and return, suitable for
                        medium-term goals.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Allocation sliders -->
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                  <div class="flex items-center justify-between mb-2">
                    <h2 class="text-xl font-semibold">
                      2. Asset class allocation
                    </h2>
                    <button
                      id="applyModelBtn"
                      type="button"
                      class="text-xs px-3 py-1 rounded-full bg-blue-600 text-white hover:bg-blue-700"
                    >
                      Apply model allocation
                    </button>
                  </div>
                  <p class="text-sm text-gray-600 mb-3">
                    Adjust the sliders to fine-tune your allocation. The total
                    must equal 100%.
                  </p>

                  <div class="space-y-4">
                    <!-- Stocks -->
                    <div>
                      <div class="flex justify-between items-center mb-1">
                        <label
                          for="stocksSlider"
                          class="text-sm font-medium text-gray-800"
                          >Stocks / Equities</label
                        >
                        <div class="flex items-center gap-2">
                          <input
                            type="number"
                            id="stocksInput"
                            class="w-16 text-right px-2 py-1 border border-gray-300 rounded text-sm"
                            min="0"
                            max="100"
                            step="1"
                          />
                          <span class="text-sm text-gray-500">%</span>
                        </div>
                      </div>
                      <input
                        type="range"
                        id="stocksSlider"
                        min="0"
                        max="100"
                        step="1"
                        class="w-full"
                      />
                      <p class="text-xs text-gray-500 mt-1">
                        Higher long-term return potential with higher volatility
                        and drawdowns.
                      </p>
                    </div>

                    <!-- Bonds -->
                    <div>
                      <div class="flex justify-between items-center mb-1">
                        <label
                          for="bondsSlider"
                          class="text-sm font-medium text-gray-800"
                          >Bonds / Fixed income</label
                        >
                        <div class="flex items-center gap-2">
                          <input
                            type="number"
                            id="bondsInput"
                            class="w-16 text-right px-2 py-1 border border-gray-300 rounded text-sm"
                            min="0"
                            max="100"
                            step="1"
                          />
                          <span class="text-sm text-gray-500">%</span>
                        </div>
                      </div>
                      <input
                        type="range"
                        id="bondsSlider"
                        min="0"
                        max="100"
                        step="1"
                        class="w-full"
                      />
                      <p class="text-xs text-gray-500 mt-1">
                        Typically lower risk and return than stocks; helps
                        stabilize the portfolio.
                      </p>
                    </div>

                    <!-- Cash -->
                    <div>
                      <div class="flex justify-between items-center mb-1">
                        <label
                          for="cashSlider"
                          class="text-sm font-medium text-gray-800"
                          >Cash / Money market</label
                        >
                        <div class="flex items-center gap-2">
                          <input
                            type="number"
                            id="cashInput"
                            class="w-16 text-right px-2 py-1 border border-gray-300 rounded text-sm"
                            min="0"
                            max="100"
                            step="1"
                          />
                          <span class="text-sm text-gray-500">%</span>
                        </div>
                      </div>
                      <input
                        type="range"
                        id="cashSlider"
                        min="0"
                        max="100"
                        step="1"
                        class="w-full"
                      />
                      <p class="text-xs text-gray-500 mt-1">
                        Very low risk and return; useful for liquidity and
                        short-term needs.
                      </p>
                    </div>

                    <!-- Alternatives -->
                    <div>
                      <div class="flex justify-between items-center mb-1">
                        <label
                          for="altsSlider"
                          class="text-sm font-medium text-gray-800"
                          >Alternatives (REITs, commodities, etc.)</label
                        >
                        <div class="flex items-center gap-2">
                          <input
                            type="number"
                            id="altsInput"
                            class="w-16 text-right px-2 py-1 border border-gray-300 rounded text-sm"
                            min="0"
                            max="100"
                            step="1"
                          />
                          <span class="text-sm text-gray-500">%</span>
                        </div>
                      </div>
                      <input
                        type="range"
                        id="altsSlider"
                        min="0"
                        max="100"
                        step="1"
                        class="w-full"
                      />
                      <p class="text-xs text-gray-500 mt-1">
                        Can improve diversification but may be less liquid and
                        more complex.
                      </p>
                    </div>

                    <!-- Total -->
                    <div class="flex items-center justify-between mt-2">
                      <div class="text-sm font-medium text-gray-800">
                        Total allocation
                      </div>
                      <div
                        id="totalAllocationDisplay"
                        class="text-sm font-semibold text-gray-900"
                      >
                        100%
                      </div>
                    </div>
                    <p id="totalWarning" class="text-xs text-red-600 hidden">
                      The total allocation must equal 100%.
                    </p>
                  </div>
                </div>

                <!-- Results -->
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                  <h2 class="text-xl font-semibold mb-3">
                    3. Results &amp; analytics
                  </h2>

                  <!-- Allocation bar -->
                  <div class="mb-4">
                    <div class="flex justify-between items-center mb-1">
                      <span class="text-sm font-medium text-gray-800"
                        >Allocation overview</span
                      >
                      <span
                        id="allocationSummaryLabel"
                        class="text-xs text-gray-600"
                      ></span>
                    </div>
                    <div class="allocation-bar bg-gray-200">
                      <span
                        id="barStocks"
                        class="allocation-segment bg-blue-500"
                        style="width: 0%"
                      ></span>
                      <span
                        id="barBonds"
                        class="allocation-segment bg-green-500"
                        style="width: 0%"
                      ></span>
                      <span
                        id="barCash"
                        class="allocation-segment bg-yellow-400"
                        style="width: 0%"
                      ></span>
                      <span
                        id="barAlts"
                        class="allocation-segment bg-purple-500"
                        style="width: 0%"
                      ></span>
                    </div>
                    <div class="flex flex-wrap gap-3 mt-2 text-xs">
                      <span class="inline-flex items-center gap-1"
                        ><span class="w-3 h-3 rounded-full bg-blue-500"></span
                        >Stocks</span
                      >
                      <span class="inline-flex items-center gap-1"
                        ><span class="w-3 h-3 rounded-full bg-green-500"></span
                        >Bonds</span
                      >
                      <span class="inline-flex items-center gap-1"
                        ><span class="w-3 h-3 rounded-full bg-yellow-400"></span
                        >Cash</span
                      >
                      <span class="inline-flex items-center gap-1"
                        ><span class="w-3 h-3 rounded-full bg-purple-500"></span
                        >Alternatives</span
                      >
                    </div>
                  </div>

                  <!-- Table of amounts -->
                  <div class="overflow-x-auto mb-4">
                    <table class="min-w-full text-sm table-fixed-layout">
                      <thead>
                        <tr class="bg-gray-100">
                          <th
                            class="px-3 py-2 text-left font-semibold text-gray-700 w-1/4"
                          >
                            Asset class
                          </th>
                          <th
                            class="px-3 py-2 text-right font-semibold text-gray-700 w-1/4"
                          >
                            Target %
                          </th>
                          <th
                            class="px-3 py-2 text-right font-semibold text-gray-700 w-1/4"
                          >
                            Amount
                          </th>
                          <th
                            class="px-3 py-2 text-right font-semibold text-gray-700 w-1/4"
                          >
                            Expected annual return*
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr class="border-t">
                          <td class="px-3 py-2 text-gray-800">Stocks</td>
                          <td
                            id="stocksPctCell"
                            class="px-3 py-2 text-right text-gray-800"
                          ></td>
                          <td
                            id="stocksAmtCell"
                            class="px-3 py-2 text-right text-gray-800"
                          ></td>
                          <td
                            id="stocksRetCell"
                            class="px-3 py-2 text-right text-gray-600"
                          ></td>
                        </tr>
                        <tr class="border-t">
                          <td class="px-3 py-2 text-gray-800">Bonds</td>
                          <td
                            id="bondsPctCell"
                            class="px-3 py-2 text-right text-gray-800"
                          ></td>
                          <td
                            id="bondsAmtCell"
                            class="px-3 py-2 text-right text-gray-800"
                          ></td>
                          <td
                            id="bondsRetCell"
                            class="px-3 py-2 text-right text-gray-600"
                          ></td>
                        </tr>
                        <tr class="border-t">
                          <td class="px-3 py-2 text-gray-800">Cash</td>
                          <td
                            id="cashPctCell"
                            class="px-3 py-2 text-right text-gray-800"
                          ></td>
                          <td
                            id="cashAmtCell"
                            class="px-3 py-2 text-right text-gray-800"
                          ></td>
                          <td
                            id="cashRetCell"
                            class="px-3 py-2 text-right text-gray-600"
                          ></td>
                        </tr>
                        <tr class="border-t">
                          <td class="px-3 py-2 text-gray-800">Alternatives</td>
                          <td
                            id="altsPctCell"
                            class="px-3 py-2 text-right text-gray-800"
                          ></td>
                          <td
                            id="altsAmtCell"
                            class="px-3 py-2 text-right text-gray-800"
                          ></td>
                          <td
                            id="altsRetCell"
                            class="px-3 py-2 text-right text-gray-600"
                          ></td>
                        </tr>
                        <tr class="border-t bg-gray-100 font-semibold">
                          <td class="px-3 py-2 text-gray-900">Total</td>
                          <td
                            id="totalPctCell"
                            class="px-3 py-2 text-right text-gray-900"
                          ></td>
                          <td
                            id="totalAmtCell"
                            class="px-3 py-2 text-right text-gray-900"
                          ></td>
                          <td
                            id="totalRetCell"
                            class="px-3 py-2 text-right text-gray-900"
                          ></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <!-- Portfolio stats -->
                  <div class="grid md:grid-cols-3 gap-3 text-sm">
                    <div class="bg-white rounded-md border border-gray-200 p-3">
                      <div
                        class="text-xs uppercase tracking-wide text-gray-500 mb-1"
                      >
                        Expected annual return*
                      </div>
                      <div
                        id="expectedReturn"
                        class="text-lg font-semibold text-gray-900"
                      >
                        –
                      </div>
                    </div>
                    <div class="bg-white rounded-md border border-gray-200 p-3">
                      <div
                        class="text-xs uppercase tracking-wide text-gray-500 mb-1"
                      >
                        Estimated volatility*
                      </div>
                      <div
                        id="expectedVolatility"
                        class="text-lg font-semibold text-gray-900"
                      >
                        –
                      </div>
                    </div>
                    <div class="bg-white rounded-md border border-gray-200 p-3">
                      <div
                        class="text-xs uppercase tracking-wide text-gray-500 mb-1"
                      >
                        Max drawdown range*
                      </div>
                      <div
                        id="expectedDrawdown"
                        class="text-lg font-semibold text-gray-900"
                      >
                        –
                      </div>
                    </div>
                  </div>

                  <p class="text-[11px] text-gray-500 mt-3">
                    *Estimates are based on long-term historical assumptions
                    (e.g., stocks 7%, bonds 3%, cash 1.5%, alternatives 5%
                    nominal annual return) and a simplified risk model. They are
                    not guarantees of future performance.
                  </p>
                </div>

                <!-- Rebalancing suggestion -->
                <div class="bg-blue-50 border border-blue-100 rounded-lg p-4">
                  <h2 class="text-lg font-semibold mb-2">
                    4. Rebalancing suggestion
                  </h2>
                  <p
                    id="rebalancingText"
                    class="text-sm text-gray-800 mb-2"
                  ></p>
                  <p class="text-xs text-gray-600">
                    You can rebalance by directing new contributions to
                    underweight asset classes or by selling overweight positions
                    and buying underweight ones, taking into account taxes and
                    transaction costs.
                  </p>
                </div>
              </div>
            </section>

            <!-- Explanatory content -->
            <section class="prose mt-8">
              <h2>What is asset allocation?</h2>
              <p>
                Asset allocation is the process of dividing your portfolio among
                different asset classes (for example stocks, bonds, cash and
                alternatives) to balance risk and return. Academic research
                shows that asset allocation explains most of the variability of
                portfolio returns over time, more than individual security
                selection or market timing.
              </p>

              <p>
                Typical asset classes used in strategic asset allocation
                include:
              </p>
              <ul>
                <li>
                  <strong>Stocks / Equities</strong> – higher expected return,
                  higher volatility and drawdowns.
                </li>
                <li>
                  <strong>Bonds / Fixed income</strong> – income and
                  diversification, usually lower volatility than stocks.
                </li>
                <li>
                  <strong>Cash / Money market</strong> – capital preservation
                  and liquidity, low expected return.
                </li>
                <li>
                  <strong>Alternatives</strong> – real estate (REITs),
                  commodities, hedge strategies, etc., which can diversify
                  traditional assets.
                </li>
              </ul>

              <h2>Model portfolios by risk profile</h2>
              <p>
                The calculator uses simple model allocations as a starting
                point. You can fully customize them, but the base templates are:
              </p>

              <div class="formula-box">
                <strong>Conservative (capital preservation)</strong><br />
                Stocks 30% &nbsp;|&nbsp; Bonds 55% &nbsp;|&nbsp; Cash 10%
                &nbsp;|&nbsp; Alternatives 5%<br /><br />
                <strong>Balanced (risk/return compromise)</strong><br />
                Stocks 50% &nbsp;|&nbsp; Bonds 35% &nbsp;|&nbsp; Cash 5%
                &nbsp;|&nbsp; Alternatives 10%<br /><br />
                <strong>Growth (long-term growth)</strong><br />
                Stocks 70% &nbsp;|&nbsp; Bonds 20% &nbsp;|&nbsp; Cash 5%
                &nbsp;|&nbsp; Alternatives 5%<br /><br />
                <strong>Aggressive (maximum growth)</strong><br />
                Stocks 85% &nbsp;|&nbsp; Bonds 10% &nbsp;|&nbsp; Cash 0%
                &nbsp;|&nbsp; Alternatives 5%
              </div>

              <p>
                These are generic examples inspired by common practice in
                portfolio management. They should be adapted to your personal
                situation, tax constraints and local market.
              </p>

              <h2>How the calculator estimates return and risk</h2>
              <p>
                To give you a sense of the trade-offs between different
                allocations, the tool uses simplified assumptions for each asset
                class:
              </p>
              <ul>
                <li>Stocks: expected return 7% / year, volatility 15%.</li>
                <li>Bonds: expected return 3% / year, volatility 5%.</li>
                <li>Cash: expected return 1.5% / year, volatility 1%.</li>
                <li>
                  Alternatives: expected return 5% / year, volatility 10%.
                </li>
              </ul>

              <p>
                The <strong>expected portfolio return</strong> is computed as
                the weighted average of asset class returns:
              </p>
              <div class="formula-box">
                \( E[R_p] = w_s R_s + w_b R_b + w_c R_c + w_a R_a \)<br />
                where \(w\) are the weights (in decimals) and \(R\) the expected
                returns of each asset class.
              </div>

              <p>
                For volatility, the calculator uses a simplified approximation
                that ignores correlations between asset classes:
              </p>
              <div class="formula-box">
                \( \sigma_p \approx \sqrt{(w_s \sigma_s)^2 + (w_b \sigma_b)^2 +
                (w_c \sigma_c)^2 + (w_a \sigma_a)^2} \)
              </div>

              <p>
                This is conservative, because in reality diversification reduces
                risk thanks to imperfect correlations. The
                <strong>max drawdown range</strong> is then approximated as a
                multiple of volatility (e.g. 2–3× annual volatility) to give you
                a sense of potential losses in a bad year.
              </p>

              <h2>Strategic vs tactical asset allocation</h2>
              <ul>
                <li>
                  <strong>Strategic asset allocation</strong> defines your
                  long-term target weights based on your goals, risk tolerance
                  and time horizon. It changes rarely.
                </li>
                <li>
                  <strong>Tactical asset allocation</strong> consists of
                  temporary deviations from the strategic mix to exploit
                  perceived market opportunities (for example overweighting
                  equities when valuations are low).
                </li>
              </ul>
              <p>
                This calculator is primarily designed for
                <strong>strategic asset allocation</strong>. You can still model
                tactical tilts by manually adjusting the sliders.
              </p>

              <h2>Rebalancing: keeping your risk under control</h2>
              <p>
                Over time, market movements will cause your actual allocation to
                drift away from your targets. Rebalancing means selling part of
                the overweight asset classes and buying the underweight ones to
                restore the desired mix.
              </p>
              <p>Common rebalancing policies include:</p>
              <ul>
                <li>
                  <strong>Time-based</strong>: once or twice per year (e.g.
                  every 6 or 12 months).
                </li>
                <li>
                  <strong>Threshold-based</strong>: when an asset class deviates
                  more than a certain band (e.g. ±5%) from its target.
                </li>
                <li>
                  <strong>Hybrid</strong>: periodic review with action only if
                  thresholds are breached.
                </li>
              </ul>

              <h2>Practical tips for building your allocation</h2>
              <ul>
                <li>
                  Match your <strong>stock allocation</strong> to your ability
                  to stay invested during market crashes (–30% or worse).
                </li>
                <li>
                  Use <strong>broad, low-cost index funds or ETFs</strong> to
                  implement each asset class.
                </li>
                <li>
                  Consider <strong>tax efficiency</strong>: hold tax-inefficient
                  assets (like bonds) in tax-advantaged accounts when possible.
                </li>
                <li>
                  Keep an adequate <strong>emergency fund</strong> in cash
                  outside your investment portfolio.
                </li>
                <li>
                  Review your asset allocation at least once a year or after
                  major life events (retirement, buying a house, etc.).
                </li>
              </ul>

              <h2>Limitations and disclaimer</h2>
              <p>
                This asset allocation calculator is an educational tool. It uses
                simplified assumptions and does not incorporate all relevant
                factors such as taxes, inflation, currency risk, specific
                product costs or your complete financial situation.
              </p>
              <p>
                <strong>Nothing on this page is investment advice.</strong>
                Before making investment decisions, consider consulting a
                licensed financial advisor or planner who can take into account
                your personal circumstances.
              </p>

              <h2>FAQ</h2>

              <h3>
                Is it better to change allocation gradually or all at once?
              </h3>
              <p>
                From a purely mathematical point of view, moving immediately to
                the desired allocation usually maximizes expected return.
                However, many investors prefer to adjust gradually (for example
                via monthly contributions) to reduce the psychological impact of
                market volatility. The right approach depends on your risk
                tolerance.
              </p>

              <h3>How many asset classes do I really need?</h3>
              <p>
                For most individual investors, a simple allocation with 2–4
                broad asset classes (global stocks, high-quality bonds, some
                cash and possibly real estate via REITs) is sufficient. Adding
                too many small slices can make the portfolio harder to manage
                without materially improving diversification.
              </p>

              <h3>Can I use this tool for retirement planning?</h3>
              <p>
                Yes, you can use it to choose an allocation consistent with your
                retirement horizon and risk profile. For a full retirement plan,
                combine it with dedicated tools such as
                <a
                  href="https://calcdomain.com/retirement"
                  class="text-blue-600 hover:underline"
                  >retirement calculators</a
                >
                and withdrawal simulators.
              </p>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Asset, Allocation.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              Related Finance Calculators
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/compound-interest-calculator"
                  class="text-blue-600 hover:underline"
                  >Compound Interest Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/future-value"
                  class="text-blue-600 hover:underline"
                  >Future Value Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/roi"
                  class="text-blue-600 hover:underline"
                  >Investment Return (ROI)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/portfolio-standard-deviation"
                  class="text-blue-600 hover:underline"
                  >Portfolio Standard Deviation</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sharpe-ratio"
                  class="text-blue-600 hover:underline"
                  >Sharpe Ratio</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/value-at-risk"
                  class="text-blue-600 hover:underline"
                  >Value at Risk (VaR)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/asset-allocation"
                  class="text-blue-600 hover:underline font-semibold"
                  >Asset Allocation (current)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/financial-goals"
                  class="text-blue-600 hover:underline"
                  >Financial Goals Planner</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">
              Explore Investing &amp; Growth
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/finance-investing-and-growth"
                  class="text-blue-600 hover:underline"
                  >Investing &amp; Compound Growth Hub</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sip-calculator"
                  class="text-blue-600 hover:underline"
                  >Systematic Investment Plan (SIP)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lumpsum-calculator"
                  class="text-blue-600 hover:underline"
                  >Lumpsum Investment</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/rule-of-72"
                  class="text-blue-600 hover:underline"
                  >Rule of 72</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/npv"
                  class="text-blue-600 hover:underline"
                  >Net Present Value (NPV)</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Risk profile descriptions and model allocations
      const riskProfiles = {
        conservative: {
          description:
            "Conservative: focus on capital preservation with modest growth.",
          weights: { stocks: 30, bonds: 55, cash: 10, alts: 5 },
        },
        balanced: {
          description:
            "Balanced: moderate risk and return, suitable for medium-term goals.",
          weights: { stocks: 50, bonds: 35, cash: 5, alts: 10 },
        },
        growth: {
          description:
            "Growth: higher equity exposure for long-term growth, with larger swings.",
          weights: { stocks: 70, bonds: 20, cash: 5, alts: 5 },
        },
        aggressive: {
          description:
            "Aggressive: maximum growth with high volatility and deep drawdowns.",
          weights: { stocks: 85, bonds: 10, cash: 0, alts: 5 },
        },
      };

      // Asset class assumptions (annualized)
      const assetAssumptions = {
        stocks: { ret: 0.07, vol: 0.15 },
        bonds: { ret: 0.03, vol: 0.05 },
        cash: { ret: 0.015, vol: 0.01 },
        alts: { ret: 0.05, vol: 0.1 },
      };

      const elements = {
        portfolioValue: document.getElementById("portfolioValue"),
        currency: document.getElementById("currency"),
        horizon: document.getElementById("horizon"),
        riskProfile: document.getElementById("riskProfile"),
        riskDescription: document.getElementById("riskDescription"),
        applyModelBtn: document.getElementById("applyModelBtn"),
        sliders: {
          stocks: document.getElementById("stocksSlider"),
          bonds: document.getElementById("bondsSlider"),
          cash: document.getElementById("cashSlider"),
          alts: document.getElementById("altsSlider"),
        },
        inputs: {
          stocks: document.getElementById("stocksInput"),
          bonds: document.getElementById("bondsInput"),
          cash: document.getElementById("cashInput"),
          alts: document.getElementById("altsInput"),
        },
        totalAllocationDisplay: document.getElementById(
          "totalAllocationDisplay"
        ),
        totalWarning: document.getElementById("totalWarning"),
        barStocks: document.getElementById("barStocks"),
        barBonds: document.getElementById("barBonds"),
        barCash: document.getElementById("barCash"),
        barAlts: document.getElementById("barAlts"),
        allocationSummaryLabel: document.getElementById(
          "allocationSummaryLabel"
        ),
        cells: {
          stocksPct: document.getElementById("stocksPctCell"),
          bondsPct: document.getElementById("bondsPctCell"),
          cashPct: document.getElementById("cashPctCell"),
          altsPct: document.getElementById("altsPctCell"),
          stocksAmt: document.getElementById("stocksAmtCell"),
          bondsAmt: document.getElementById("bondsAmtCell"),
          cashAmt: document.getElementById("cashAmtCell"),
          altsAmt: document.getElementById("altsAmtCell"),
          stocksRet: document.getElementById("stocksRetCell"),
          bondsRet: document.getElementById("bondsRetCell"),
          cashRet: document.getElementById("cashRetCell"),
          altsRet: document.getElementById("altsRetCell"),
          totalPct: document.getElementById("totalPctCell"),
          totalAmt: document.getElementById("totalAmtCell"),
          totalRet: document.getElementById("totalRetCell"),
        },
        expectedReturn: document.getElementById("expectedReturn"),
        expectedVolatility: document.getElementById("expectedVolatility"),
        expectedDrawdown: document.getElementById("expectedDrawdown"),
        rebalancingText: document.getElementById("rebalancingText"),
      };

      function formatPct(value) {
        if (isNaN(value)) return "–";
        return value.toFixed(1) + "%";
      }

      function formatCurrency(value, symbol) {
        if (isNaN(value)) return "–";
        const absVal = Math.abs(value);
        let formatted;
        if (absVal >= 1_000_000_000) {
          formatted = (value / 1_000_000_000).toFixed(2) + "B";
        } else if (absVal >= 1_000_000) {
          formatted = (value / 1_000_000).toFixed(2) + "M";
        } else if (absVal >= 1_000) {
          formatted = (value / 1_000).toFixed(2) + "K";
        } else {
          formatted = value.toFixed(0);
        }
        return symbol + formatted;
      }

      function getCurrentWeights() {
        return {
          stocks: Number(elements.inputs.stocks.value) || 0,
          bonds: Number(elements.inputs.bonds.value) || 0,
          cash: Number(elements.inputs.cash.value) || 0,
          alts: Number(elements.inputs.alts.value) || 0,
        };
      }

      function setWeights(weights) {
        ["stocks", "bonds", "cash", "alts"].forEach((key) => {
          const val = weights[key];
          elements.sliders[key].value = val;
          elements.inputs[key].value = val;
        });
        updateAll();
      }

      function updateTotalAndWarning(weights) {
        const total =
          weights.stocks + weights.bonds + weights.cash + weights.alts;
        elements.totalAllocationDisplay.textContent = total.toFixed(1) + "%";
        const isValid = Math.abs(total - 100) < 0.01;
        elements.totalWarning.classList.toggle("hidden", isValid);
        elements.totalAllocationDisplay.classList.toggle(
          "text-red-600",
          !isValid
        );
        elements.totalAllocationDisplay.classList.toggle(
          "text-gray-900",
          isValid
        );
        return { total, isValid };
      }

      function updateBars(weights) {
        elements.barStocks.style.width = weights.stocks + "%";
        elements.barBonds.style.width = weights.bonds + "%";
        elements.barCash.style.width = weights.cash + "%";
        elements.barAlts.style.width = weights.alts + "%";
        elements.allocationSummaryLabel.textContent = `Stocks ${weights.stocks.toFixed(
          0
        )}% · Bonds ${weights.bonds.toFixed(0)}% · Cash ${weights.cash.toFixed(
          0
        )}% · Alts ${weights.alts.toFixed(0)}%`;
      }

      function updateTable(weights) {
        const pv = Number(elements.portfolioValue.value) || 0;
        const symbol = elements.currency.value || "$";

        const wDec = {
          stocks: weights.stocks / 100,
          bonds: weights.bonds / 100,
          cash: weights.cash / 100,
          alts: weights.alts / 100,
        };

        const amounts = {
          stocks: pv * wDec.stocks,
          bonds: pv * wDec.bonds,
          cash: pv * wDec.cash,
          alts: pv * wDec.alts,
        };

        // Per-asset cells
        elements.cells.stocksPct.textContent = formatPct(weights.stocks);
        elements.cells.bondsPct.textContent = formatPct(weights.bonds);
        elements.cells.cashPct.textContent = formatPct(weights.cash);
        elements.cells.altsPct.textContent = formatPct(weights.alts);

        elements.cells.stocksAmt.textContent = formatCurrency(
          amounts.stocks,
          symbol + " "
        );
        elements.cells.bondsAmt.textContent = formatCurrency(
          amounts.bonds,
          symbol + " "
        );
        elements.cells.cashAmt.textContent = formatCurrency(
          amounts.cash,
          symbol + " "
        );
        elements.cells.altsAmt.textContent = formatCurrency(
          amounts.alts,
          symbol + " "
        );

        elements.cells.stocksRet.textContent = formatPct(
          assetAssumptions.stocks.ret * 100
        );
        elements.cells.bondsRet.textContent = formatPct(
          assetAssumptions.bonds.ret * 100
        );
        elements.cells.cashRet.textContent = formatPct(
          assetAssumptions.cash.ret * 100
        );
        elements.cells.altsRet.textContent = formatPct(
          assetAssumptions.alts.ret * 100
        );

        const totalPct =
          weights.stocks + weights.bonds + weights.cash + weights.alts;
        elements.cells.totalPct.textContent = formatPct(totalPct);
        elements.cells.totalAmt.textContent = formatCurrency(pv, symbol + " ");

        // Expected portfolio return and risk
        const expReturn =
          wDec.stocks * assetAssumptions.stocks.ret +
          wDec.bonds * assetAssumptions.bonds.ret +
          wDec.cash * assetAssumptions.cash.ret +
          wDec.alts * assetAssumptions.alts.ret;

        const expVol = Math.sqrt(
          Math.pow(wDec.stocks * assetAssumptions.stocks.vol, 2) +
            Math.pow(wDec.bonds * assetAssumptions.bonds.vol, 2) +
            Math.pow(wDec.cash * assetAssumptions.cash.vol, 2) +
            Math.pow(wDec.alts * assetAssumptions.alts.vol, 2)
        );

        elements.expectedReturn.textContent = formatPct(expReturn * 100);
        elements.expectedVolatility.textContent = formatPct(expVol * 100);

        const ddLow = expVol * 2 * 100;
        const ddHigh = expVol * 3 * 100;
        elements.expectedDrawdown.textContent = `${ddLow.toFixed(
          0
        )}–${ddHigh.toFixed(0)}%`;

        elements.cells.totalRet.textContent = formatPct(expReturn * 100);
      }

      function updateRebalancing(weights) {
        const profileKey = elements.riskProfile.value;
        const model = riskProfiles[profileKey].weights;
        const diffs = {
          stocks: weights.stocks - model.stocks,
          bonds: weights.bonds - model.bonds,
          cash: weights.cash - model.cash,
          alts: weights.alts - model.alts,
        };

        const over = [];
        const under = [];

        Object.entries(diffs).forEach(([k, v]) => {
          if (Math.abs(v) < 1) return; // ignore small deviations
          const label = k.charAt(0).toUpperCase() + k.slice(1);
          if (v > 0) {
            over.push(`${label} +${v.toFixed(1)}%`);
          } else {
            under.push(`${label} ${v.toFixed(1)}%`);
          }
        });

        let text;
        if (!over.length && !under.length) {
          text =
            "Your current allocation is very close to the selected model portfolio. You can rebalance once or twice per year, or when an asset class drifts more than 5 percentage points from its target weight.";
        } else {
          text = "Compared to the selected model allocation you are: ";
          if (over.length) text += "overweight in " + over.join(", ");
          if (over.length && under.length) text += " and ";
          if (under.length) text += "underweight in " + under.join(", ");
          text +=
            ". Consider directing new contributions to the underweight asset classes or rebalancing if the deviations are larger than your chosen threshold.";
        }
        elements.rebalancingText.textContent = text;
      }

      function updateAll() {
        const weights = getCurrentWeights();
        const { isValid } = updateTotalAndWarning(weights);
        updateBars(weights);
        updateTable(weights);
        updateRebalancing(weights);
        elements.applyModelBtn.disabled = false;
      }

      // Sync slider and numeric input
      function bindPair(assetKey) {
        const slider = elements.sliders[assetKey];
        const input = elements.inputs[assetKey];

        slider.addEventListener("input", () => {
          input.value = slider.value;
          updateAll();
        });

        input.addEventListener("input", () => {
          let v = Number(input.value);
          if (isNaN(v)) v = 0;
          v = Math.max(0, Math.min(100, v));
          input.value = v;
          slider.value = v;
          updateAll();
        });
      }

      ["stocks", "bonds", "cash", "alts"].forEach(bindPair);

      elements.riskProfile.addEventListener("change", () => {
        const profileKey = elements.riskProfile.value;
        elements.riskDescription.textContent =
          riskProfiles[profileKey].description;
      });

      elements.applyModelBtn.addEventListener("click", () => {
        const profileKey = elements.riskProfile.value;
        const model = riskProfiles[profileKey].weights;
        setWeights(model);
      });

      elements.portfolioValue.addEventListener("input", updateAll);
      elements.currency.addEventListener("change", updateAll);
      elements.horizon.addEventListener("change", updateAll);

      // Initialize with balanced profile
      window.addEventListener("DOMContentLoaded", () => {
        const profileKey = elements.riskProfile.value;
        elements.riskDescription.textContent =
          riskProfiles[profileKey].description;
        setWeights(riskProfiles[profileKey].weights);
      });

      // Mobile menu script (simple)
      document
        .getElementById("mobile-menu-toggle")
        .addEventListener("click", function () {
          const menu = document.getElementById("mobile-menu");
          const isHidden = menu.classList.contains("hidden");
          menu.classList.toggle("hidden", !isHidden);
          this.setAttribute("aria-expanded", isHidden ? "true" : "false");
        });

      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

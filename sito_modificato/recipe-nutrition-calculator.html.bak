<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/recipe-nutrition-calculator" />
    <title>Recipe Nutrition Calculator (2024 Guide) | CalcDomain</title>
    <meta name="description" content="Calculate Recipe Nutrition Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Recipe Nutrition Calculator (2024 Guide) | CalcDomain" />
    <meta property="og:description" content="Calculate Recipe Nutrition Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />
    <meta property="og:url" content="https://calcdomain.com/recipe-nutrition-calculator" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Recipe Nutrition Calculator (2024 Guide) | CalcDomain" />
    <meta name="twitter:description" content="Calculate Recipe Nutrition Calculator in seconds with this free tool. Get accurate results, formulas, and tips - start now. No signup. Try it today." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Health & Fitness Calculators", "item": "https://calcdomain.com/categories/health-fitness"}, {"@type": "ListItem", "position": 3, "name": "Diet & Nutrition Calculators", "item": "https://calcdomain.com/subcategories/diet-nutrition"}, {"@type": "ListItem", "position": 4, "name": "Recipe Nutrition Calculator", "item": "https://calcdomain.com/recipe-nutrition-calculator"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/health-fitness" class="text-blue-600 hover:underline">Health &amp; Fitness Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/diet-nutrition" class="text-blue-600 hover:underline">Diet &amp; Nutrition Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Recipe Nutrition Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Recipe Nutrition Calculator
              </h1>
              <p class="text-gray-600">
                Estimate calories, macros, and key nutrients per serving for any
                homemade recipe. Add ingredients, set servings, and instantly
                see a nutrition label.
              </p>
              <p class="mt-2 text-xs text-red-600 font-medium">
                Educational use only. Not a substitute for professional medical
                or nutrition advice.
              </p>
            </header>

            <!-- Tabs: Quick Entry / Advanced Table -->
            <div class="mb-4 border-b border-gray-200 flex space-x-6 text-sm">
              <button
                id="tab-quick"
                class="py-2 tab-active font-medium"
                type="button"
              >
                Quick entry
              </button>
              <button
                id="tab-advanced"
                class="py-2 tab-inactive font-medium"
                type="button"
              >
                Advanced table
              </button>
            </div>

            <!-- Recipe form -->
            <section aria-label="Recipe nutrition calculator" class="space-y-4">
              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label
                    for="recipe-name"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Recipe name (optional)</label
                  >
                  <input
                    id="recipe-name"
                    type="text"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="e.g., Chickpea & Spinach Curry"
                  />
                </div>
                <div>
                  <label
                    for="servings"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Number of servings</label
                  >
                  <input
                    id="servings"
                    type="number"
                    min="1"
                    step="1"
                    value="4"
                    class="w-32 border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  />
                  <p class="text-xs text-gray-500 mt-1">
                    All per-serving values are based on this number.
                  </p>
                </div>
              </div>

              <!-- Quick entry textarea -->
              <div id="quick-entry-panel">
                <label
                  for="ingredients-text"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >Ingredients (one per line)</label
                >
                <textarea
                  id="ingredients-text"
                  rows="6"
                  class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="Examples:
1 cup cooked rice
150 g chicken breast, raw
2 tbsp olive oil
1 medium onion
3 cloves garlic"
                ></textarea>
                <p class="text-xs text-gray-500 mt-1">
                  Use formats like “1 cup”, “150 g”, “2 tbsp”, “1 medium”, etc.
                  You can refine items in the Advanced table after parsing.
                </p>
              </div>

              <!-- Advanced table entry -->
              <div id="advanced-panel" class="hidden">
                <div class="flex justify-between items-center mb-2">
                  <label class="block text-sm font-medium text-gray-700"
                    >Ingredients table</label
                  >
                  <button
                    id="add-row-btn"
                    type="button"
                    class="inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700"
                  >
                    + Add ingredient
                  </button>
                </div>
                <div class="overflow-x-auto border border-gray-200 rounded-md">
                  <table class="min-w-full text-xs">
                    <thead class="bg-gray-50">
                      <tr>
                        <th
                          class="px-2 py-2 text-left font-semibold text-gray-700"
                        >
                          Ingredient
                        </th>
                        <th
                          class="px-2 py-2 text-left font-semibold text-gray-700"
                        >
                          Amount
                        </th>
                        <th
                          class="px-2 py-2 text-left font-semibold text-gray-700"
                        >
                          Unit
                        </th>
                        <th
                          class="px-2 py-2 text-left font-semibold text-gray-700"
                        >
                          Notes
                        </th>
                        <th
                          class="px-2 py-2 text-right font-semibold text-gray-700"
                        >
                          Remove
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="ingredients-table-body"
                      class="divide-y divide-gray-100"
                    >
                      <!-- Rows injected by JS -->
                    </tbody>
                  </table>
                </div>
                <p class="text-xs text-gray-500 mt-1">
                  Use this view to fine-tune amounts and units after importing
                  from Quick entry.
                </p>
              </div>

              <div class="flex flex-wrap gap-2 mt-2">
                <button
                  id="parse-btn"
                  type="button"
                  class="inline-flex items-center px-4 py-2 text-sm font-semibold rounded-md bg-blue-600 text-white hover:bg-blue-700"
                >
                  Calculate nutrition
                </button>
                <button
                  id="clear-btn"
                  type="button"
                  class="inline-flex items-center px-3 py-2 text-sm font-medium rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50"
                >
                  Clear recipe
                </button>
                <button
                  id="export-json-btn"
                  type="button"
                  class="inline-flex items-center px-3 py-2 text-sm font-medium rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50"
                >
                  Export JSON
                </button>
                <button
                  id="copy-summary-btn"
                  type="button"
                  class="inline-flex items-center px-3 py-2 text-sm font-medium rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50"
                >
                  Copy nutrition summary
                </button>
              </div>

              <p id="status-message" class="text-xs text-gray-600 mt-1"></p>
            </section>

            <!-- Results -->
            <section id="results-section" class="mt-8 hidden">
              <div class="grid md:grid-cols-2 gap-6">
                <!-- Nutrition label -->
                <div>
                  <h2 class="text-lg font-semibold mb-2">
                    Nutrition Facts (per serving)
                  </h2>
                  <div class="nutrition-label" id="nutrition-label">
                    <h3>Nutrition Facts</h3>
                    <div class="small">
                      Serving size: <span id="nf-serving-size">1 serving</span>
                    </div>
                    <div class="divider-thick"></div>
                    <div class="small">Amount per serving</div>
                    <div class="line items-end">
                      <span class="font-bold">Calories</span>
                      <span class="calories" id="nf-calories">0</span>
                    </div>
                    <div class="divider"></div>
                    <div class="small text-right font-bold">% Daily Value*</div>

                    <div class="line">
                      <span
                        ><strong>Total Fat</strong>
                        <span id="nf-fat">0 g</span></span
                      ><span id="nf-fat-pct">0%</span>
                    </div>
                    <div class="line pl-4">
                      <span>Saturated Fat <span id="nf-satfat">0 g</span></span
                      ><span id="nf-satfat-pct">0%</span>
                    </div>
                    <div class="divider"></div>
                    <div class="line">
                      <span
                        ><strong>Cholesterol</strong>
                        <span id="nf-cholesterol">0 mg</span></span
                      ><span id="nf-cholesterol-pct">0%</span>
                    </div>
                    <div class="line">
                      <span
                        ><strong>Sodium</strong>
                        <span id="nf-sodium">0 mg</span></span
                      ><span id="nf-sodium-pct">0%</span>
                    </div>
                    <div class="divider"></div>
                    <div class="line">
                      <span
                        ><strong>Total Carbohydrate</strong>
                        <span id="nf-carbs">0 g</span></span
                      ><span id="nf-carbs-pct">0%</span>
                    </div>
                    <div class="line pl-4">
                      <span>Dietary Fiber <span id="nf-fiber">0 g</span></span
                      ><span id="nf-fiber-pct">0%</span>
                    </div>
                    <div class="line pl-4">
                      <span>Total Sugars <span id="nf-sugar">0 g</span></span
                      ><span id="nf-sugar-pct"></span>
                    </div>
                    <div class="divider"></div>
                    <div class="line">
                      <span
                        ><strong>Protein</strong>
                        <span id="nf-protein">0 g</span></span
                      ><span id="nf-protein-pct">0%</span>
                    </div>
                    <div class="divider-thick"></div>
                    <div class="small mt-1">
                      *Percent Daily Values are based on a 2,000 calorie diet.
                    </div>
                  </div>
                </div>

                <!-- Macro breakdown -->
                <div>
                  <h2 class="text-lg font-semibold mb-2">Macro breakdown</h2>
                  <div
                    class="bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-3"
                  >
                    <div class="flex justify-between text-sm">
                      <span>Calories per serving</span>
                      <span class="font-semibold" id="summary-calories"
                        >0 kcal</span
                      >
                    </div>
                    <div class="flex justify-between text-sm">
                      <span>Protein</span>
                      <span id="summary-protein">0 g</span>
                    </div>
                    <div class="flex justify-between text-sm">
                      <span>Carbohydrates</span>
                      <span id="summary-carbs">0 g</span>
                    </div>
                    <div class="flex justify-between text-sm">
                      <span>Fat</span>
                      <span id="summary-fat">0 g</span>
                    </div>
                    <div class="flex justify-between text-sm">
                      <span>Fiber</span>
                      <span id="summary-fiber">0 g</span>
                    </div>
                    <div class="flex justify-between text-sm">
                      <span>Sugar</span>
                      <span id="summary-sugar">0 g</span>
                    </div>
                    <div class="divider border-t border-gray-200"></div>
                    <div class="flex justify-between text-xs text-gray-600">
                      <span>Total recipe calories</span>
                      <span id="summary-total-calories">0 kcal</span>
                    </div>
                  </div>

                  <h3 class="text-sm font-semibold mt-5 mb-1">
                    Per-ingredient contribution
                  </h3>
                  <div
                    class="border border-gray-200 rounded-lg max-h-56 overflow-y-auto scrollbar-thin text-xs"
                    id="ingredient-breakdown"
                  >
                    <!-- Filled by JS -->
                  </div>
                </div>
              </div>
            </section>

            <!-- Disclaimer -->
            <section class="mt-6">
              <div
                class="bg-yellow-50 border border-yellow-200 text-xs text-yellow-900 rounded-md p-3"
              >
                <strong>Important:</strong> This calculator uses a simplified
                ingredient database and estimation rules. Values are approximate
                and may differ from official nutrition labels. Always check with
                a registered dietitian or healthcare professional for medical or
                therapeutic diets.
              </div>
            </section>

            <!-- Explanatory content -->
            <section class="prose mt-10">
              <h2>How the recipe nutrition calculator works</h2>
              <p>
                This tool estimates nutrition by breaking your recipe into
                individual ingredients, converting each amount into a standard
                weight (grams), and then multiplying by typical nutrient values
                per 100&nbsp;g from a generic food database.
              </p>
              <p>For each ingredient, the calculator approximates:</p>
              <ul>
                <li>Calories (kcal)</li>
                <li>Protein, carbohydrates, total fat</li>
                <li>
                  Fiber, sugars, sodium, and selected micronutrients when
                  available
                </li>
              </ul>

              <h3>Core calculation steps</h3>
              <div class="formula-box text-sm">
                <p><strong>1. Convert amount to grams</strong></p>
                <p>
                  For each ingredient: $$ \text{grams} = \text{amount} \times
                  \text{grams per unit} $$
                </p>
                <p><strong>2. Convert grams to nutrients</strong></p>
                <p>
                  If the database has nutrient values per 100&nbsp;g: $$
                  \text{nutrient} = \text{grams} \times \frac{\text{nutrient per
                  100 g}}{100} $$
                </p>
                <p><strong>3. Sum across ingredients</strong></p>
                <p>
                  $$ \text{recipe nutrient total} = \sum_{i=1}^{n}
                  \text{nutrient}_i $$
                </p>
                <p><strong>4. Per-serving values</strong></p>
                <p>
                  If your recipe makes \( S \) servings: $$ \text{per serving} =
                  \frac{\text{recipe total}}{S} $$
                </p>
              </div>

              <h3>Supported units and assumptions</h3>
              <p>The calculator recognizes common cooking units such as:</p>
              <ul>
                <li>
                  <strong>Weight:</strong> g, gram(s), kg, ounce(s), oz,
                  pound(s), lb
                </li>
                <li><strong>Volume:</strong> tsp, tbsp, cup(s), ml, L</li>
                <li>
                  <strong>Household sizes:</strong> small, medium, large (for
                  eggs, onions, etc. – approximated as fixed gram weights)
                </li>
              </ul>
              <p>
                When an ingredient is not found in the internal database, it is
                treated as “generic” with approximate macros or ignored with a
                warning in the ingredient breakdown.
              </p>

              <h2>Tips for more accurate results</h2>
              <ul>
                <li>
                  Weigh ingredients in grams when possible instead of using cups
                  or spoons.
                </li>
                <li>
                  Specify raw vs cooked (e.g., “chicken breast, raw” vs “chicken
                  breast, cooked”).
                </li>
                <li>
                  Separate major components (e.g., “olive oil for frying” vs
                  “olive oil in dressing”).
                </li>
                <li>
                  Use realistic serving counts – how many people the dish
                  actually feeds.
                </li>
              </ul>

              <h3>Limitations and safety</h3>
              <p>
                This calculator is designed for home cooks, bloggers, and
                students. It is <strong>not</strong> suitable for:
              </p>
              <ul>
                <li>
                  Medical nutrition therapy (e.g., kidney disease, diabetes meal
                  plans).
                </li>
                <li>Allergen management or cross-contamination assessment.</li>
                <li>
                  Regulatory food labeling or commercial packaging compliance.
                </li>
              </ul>
              <p>
                For clinical or regulatory use, rely on official laboratory
                analysis or certified software and consult a registered
                dietitian or regulatory specialist.
              </p>

              <h2>FAQ</h2>

              <h3>Can I use this for my food blog?</h3>
              <p>
                Yes. Many bloggers use tools like this to provide approximate
                nutrition information. Make sure to include a disclaimer that
                values are estimates and may vary based on brands and
                preparation.
              </p>

              <h3>Why do my results differ from another website?</h3>
              <p>
                Different tools use different databases, serving assumptions,
                and rounding rules. Even small differences in ingredient density
                (e.g., packed vs loose cups) can change the numbers. Treat all
                online calculators as estimates rather than exact lab results.
              </p>

              <h3>Does cooking change the nutrition?</h3>
              <p>
                Cooking can change water content and some vitamins, which
                affects per-gram values. This simple calculator does not model
                cooking losses in detail; it assumes typical values for raw or
                cooked forms where specified.
              </p>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Operational notes</h2><p class="text-sm text-gray-700">Fill in realistic values and keep units and timeframes consistent.</p><p class="text-sm text-gray-700 mt-2">Key entities: Recipe, Nutrition, Calculator.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: non-negative values, plausible ranges, coherent outputs.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              More Diet &amp; Nutrition tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/carb-calculator"
                  class="text-blue-600 hover:underline"
                  >Carb Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/calorie-deficit-calculator"
                  class="text-blue-600 hover:underline"
                  >Calorie Deficit Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/meal-planning-calculator"
                  class="text-blue-600 hover:underline"
                  >Meal Planning Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/protein-calculator"
                  class="text-blue-600 hover:underline"
                  >Protein Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/water-intake-calculator"
                  class="text-blue-600 hover:underline"
                  >Water Intake Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/weight-loss-calculator"
                  class="text-blue-600 hover:underline"
                  >Weight Loss Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/macro"
                  class="text-blue-600 hover:underline"
                  >Macro Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/tdee"
                  class="text-blue-600 hover:underline"
                  >TDEE (Total Daily Energy Expenditure)</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">
              Health &amp; Fitness calculators
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-blue-600 hover:underline"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmr"
                  class="text-blue-600 hover:underline"
                  >BMR Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/body-fat"
                  class="text-blue-600 hover:underline"
                  >Body Fat Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/heart-rate-calculator"
                  class="text-blue-600 hover:underline"
                  >Heart Rate Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/exercise"
                  class="text-blue-600 hover:underline"
                  >Exercise Calories Burned</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Simple internal "database" of common ingredients per 100 g
      const NUTRIENT_DB = {
        "chicken breast, raw": {
          kcal: 165,
          protein: 31,
          carbs: 0,
          fat: 3.6,
          fiber: 0,
          sugar: 0,
          sodium: 74,
        },
        "chicken breast": {
          kcal: 165,
          protein: 31,
          carbs: 0,
          fat: 3.6,
          fiber: 0,
          sugar: 0,
          sodium: 74,
        },
        "olive oil": {
          kcal: 884,
          protein: 0,
          carbs: 0,
          fat: 100,
          fiber: 0,
          sugar: 0,
          sodium: 2,
        },
        butter: {
          kcal: 717,
          protein: 0.9,
          carbs: 0.1,
          fat: 81,
          fiber: 0,
          sugar: 0.1,
          sodium: 11,
        },
        onion: {
          kcal: 40,
          protein: 1.1,
          carbs: 9.3,
          fat: 0.1,
          fiber: 1.7,
          sugar: 4.2,
          sodium: 4,
        },
        garlic: {
          kcal: 149,
          protein: 6.4,
          carbs: 33,
          fat: 0.5,
          fiber: 2.1,
          sugar: 1,
          sodium: 17,
        },
        "rice, cooked": {
          kcal: 130,
          protein: 2.4,
          carbs: 28,
          fat: 0.3,
          fiber: 0.4,
          sugar: 0.1,
          sodium: 1,
        },
        rice: {
          kcal: 130,
          protein: 2.4,
          carbs: 28,
          fat: 0.3,
          fiber: 0.4,
          sugar: 0.1,
          sodium: 1,
        },
        "spinach, raw": {
          kcal: 23,
          protein: 2.9,
          carbs: 3.6,
          fat: 0.4,
          fiber: 2.2,
          sugar: 0.4,
          sodium: 79,
        },
        spinach: {
          kcal: 23,
          protein: 2.9,
          carbs: 3.6,
          fat: 0.4,
          fiber: 2.2,
          sugar: 0.4,
          sodium: 79,
        },
        "egg, whole": {
          kcal: 143,
          protein: 13,
          carbs: 1.1,
          fat: 10,
          fiber: 0,
          sugar: 1.1,
          sodium: 142,
        },
        egg: {
          kcal: 143,
          protein: 13,
          carbs: 1.1,
          fat: 10,
          fiber: 0,
          sugar: 1.1,
          sodium: 142,
        },
        "milk, whole": {
          kcal: 61,
          protein: 3.2,
          carbs: 4.8,
          fat: 3.3,
          fiber: 0,
          sugar: 5.1,
          sodium: 43,
        },
        milk: {
          kcal: 61,
          protein: 3.2,
          carbs: 4.8,
          fat: 3.3,
          fiber: 0,
          sugar: 5.1,
          sodium: 43,
        },
        "flour, wheat": {
          kcal: 364,
          protein: 10,
          carbs: 76,
          fat: 1,
          fiber: 2.7,
          sugar: 0.3,
          sodium: 2,
        },
        flour: {
          kcal: 364,
          protein: 10,
          carbs: 76,
          fat: 1,
          fiber: 2.7,
          sugar: 0.3,
          sodium: 2,
        },
        "sugar, white": {
          kcal: 387,
          protein: 0,
          carbs: 100,
          fat: 0,
          fiber: 0,
          sugar: 100,
          sodium: 1,
        },
        sugar: {
          kcal: 387,
          protein: 0,
          carbs: 100,
          fat: 0,
          fiber: 0,
          sugar: 100,
          sodium: 1,
        },
        salt: {
          kcal: 0,
          protein: 0,
          carbs: 0,
          fat: 0,
          fiber: 0,
          sugar: 0,
          sodium: 38758,
        },
        tomato: {
          kcal: 18,
          protein: 0.9,
          carbs: 3.9,
          fat: 0.2,
          fiber: 1.2,
          sugar: 2.6,
          sodium: 5,
        },
        "cheddar cheese": {
          kcal: 403,
          protein: 25,
          carbs: 1.3,
          fat: 33,
          fiber: 0,
          sugar: 0.5,
          sodium: 621,
        },
      };

      // Unit to grams approximations
      const UNIT_TO_GRAMS = {
        g: 1,
        gram: 1,
        grams: 1,
        kg: 1000,
        kilogram: 1000,
        kilograms: 1000,
        oz: 28.35,
        ounce: 28.35,
        ounces: 28.35,
        lb: 453.6,
        pound: 453.6,
        pounds: 453.6,
        tsp: 4.2,
        teaspoon: 4.2,
        teaspoons: 4.2,
        tbsp: 14,
        tablespoon: 14,
        tablespoons: 14,
        cup: 240,
        cups: 240,
        ml: 1,
        milliliter: 1,
        milliliters: 1,
        l: 1000,
        liter: 1000,
        liters: 1000,
        clove: 3,
        cloves: 3,
        small: 70,
        medium: 110,
        large: 150,
        slice: 30,
        slices: 30,
      };

      const DEFAULT_DV = {
        kcal: 2000,
        fat: 78, // g
        satfat: 20, // g
        carbs: 275, // g
        fiber: 28, // g
        protein: 50, // g
        sodium: 2300, // mg
      };

      const ingredientsTableBody = document.getElementById(
        "ingredients-table-body"
      );
      const quickPanel = document.getElementById("quick-entry-panel");
      const advancedPanel = document.getElementById("advanced-panel");
      const tabQuick = document.getElementById("tab-quick");
      const tabAdvanced = document.getElementById("tab-advanced");
      const statusMessage = document.getElementById("status-message");
      const resultsSection = document.getElementById("results-section");
      const ingredientBreakdown = document.getElementById(
        "ingredient-breakdown"
      );

      function setStatus(msg, isError = false) {
        statusMessage.textContent = msg;
        statusMessage.className =
          "text-xs mt-1 " + (isError ? "text-red-600" : "text-gray-600");
      }

      function addIngredientRow(data = {}) {
        const tr = document.createElement("tr");
        tr.innerHTML = `
      <td class="px-2 py-1">
        <input type="text" class="w-40 md:w-48 border border-gray-200 rounded px-2 py-1 text-xs ingredient-name" placeholder="e.g., chicken breast" value="${
          data.name || ""
        }">
      </td>
      <td class="px-2 py-1">
        <input type="number" min="0" step="0.01" class="w-20 border border-gray-200 rounded px-2 py-1 text-xs ingredient-amount" value="${
          data.amount != null ? data.amount : ""
        }">
      </td>
      <td class="px-2 py-1">
        <input type="text" class="w-20 border border-gray-200 rounded px-2 py-1 text-xs ingredient-unit" placeholder="g, cup, tbsp" value="${
          data.unit || ""
        }">
      </td>
      <td class="px-2 py-1">
        <input type="text" class="w-32 md:w-40 border border-gray-200 rounded px-2 py-1 text-xs ingredient-notes" placeholder="optional" value="${
          data.notes || ""
        }">
      </td>
      <td class="px-2 py-1 text-right">
        <button type="button" class="text-red-600 hover:underline text-xs remove-row-btn">Remove</button>
      </td>
    `;
        ingredientsTableBody.appendChild(tr);
      }

      function parseQuickEntry() {
        const text = document.getElementById("ingredients-text").value.trim();
        ingredientsTableBody.innerHTML = "";
        if (!text) {
          setStatus("No ingredients to parse. Add at least one line.", true);
          return;
        }
        const lines = text.split(/\r?\n/).filter((l) => l.trim().length > 0);
        lines.forEach((line) => {
          const parsed = parseIngredientLine(line);
          addIngredientRow(parsed);
        });
        setStatus(
          `Parsed ${lines.length} ingredient(s) into the table. You can edit them before calculating.`
        );
      }

      function parseIngredientLine(line) {
        // Very simple parser: "[amount] [unit] [name...]"
        let amount = "";
        let unit = "";
        let name = "";
        let notes = "";

        const tokens = line.trim().split(/\s+/);
        if (tokens.length === 0) return { name: line };

        // amount (supports fractions like 1/2, 1-1/2)
        let first = tokens[0];
        if (
          /^\d+([.,]\d+)?$/.test(first) ||
          /^\d+\/\d+$/.test(first) ||
          /^\d+-\d+\/\d+$/.test(first)
        ) {
          amount = fractionToNumber(first);
          tokens.shift();
        }

        if (tokens.length > 0) {
          const maybeUnit = tokens[0].toLowerCase();
          if (UNIT_TO_GRAMS[maybeUnit]) {
            unit = maybeUnit;
            tokens.shift();
          }
        }

        name = tokens.join(" ");
        return { amount, unit, name, notes };
      }

      function fractionToNumber(str) {
        // "1/2" or "1-1/2"
        if (str.includes("-")) {
          const [whole, frac] = str.split("-");
          return parseFloat(whole) + fractionToNumber(frac);
        }
        if (str.includes("/")) {
          const [num, den] = str.split("/");
          const n = parseFloat(num),
            d = parseFloat(den);
          if (!isNaN(n) && !isNaN(d) && d !== 0) return n / d;
        }
        return parseFloat(str.replace(",", ".")) || 0;
      }

      function collectIngredientsFromTable() {
        const rows = Array.from(ingredientsTableBody.querySelectorAll("tr"));
        return rows
          .map((row) => {
            return {
              name: row.querySelector(".ingredient-name").value.trim(),
              amount:
                parseFloat(row.querySelector(".ingredient-amount").value) || 0,
              unit: row
                .querySelector(".ingredient-unit")
                .value.trim()
                .toLowerCase(),
              notes: row.querySelector(".ingredient-notes").value.trim(),
            };
          })
          .filter((i) => i.name && i.amount > 0);
      }

      function amountToGrams(amount, unit, name) {
        if (!unit) {
          // Try heuristic: if name includes "egg"
          if (/egg/i.test(name)) return amount * 50;
          return amount; // assume grams
        }
        const factor = UNIT_TO_GRAMS[unit];
        if (factor) return amount * factor;
        return amount; // fallback: treat as grams
      }

      function findIngredientProfile(name) {
        if (!name) return null;
        const key = name.toLowerCase().trim();
        if (NUTRIENT_DB[key]) return NUTRIENT_DB[key];
        // Try partial match
        let best = null;
        for (const k in NUTRIENT_DB) {
          if (key.includes(k)) {
            best = NUTRIENT_DB[k];
            break;
          }
        }
        return best;
      }

      function computeNutrition() {
        const servings =
          parseInt(document.getElementById("servings").value, 10) || 1;
        const ingredients = collectIngredientsFromTable();
        if (ingredients.length === 0) {
          setStatus(
            "Please add at least one ingredient with amount and unit.",
            true
          );
          resultsSection.classList.add("hidden");
          return;
        }

        let totals = {
          kcal: 0,
          protein: 0,
          carbs: 0,
          fat: 0,
          fiber: 0,
          sugar: 0,
          sodium: 0,
        };
        const breakdownLines = [];
        let unknownCount = 0;

        ingredients.forEach((ing) => {
          const grams = amountToGrams(ing.amount, ing.unit, ing.name);
          const profile = findIngredientProfile(ing.name);
          if (!profile) {
            unknownCount++;
            breakdownLines.push(`<div class="px-3 py-2 border-b border-gray-100 text-gray-500">
          <div class="font-semibold">${escapeHtml(ing.name)} (approx.)</div>
          <div>Amount: ${ing.amount} ${
              ing.unit || "g"
            } – no detailed data available</div>
        </div>`);
            return;
          }
          const factor = grams / 100;
          const kcal = profile.kcal * factor;
          const protein = profile.protein * factor;
          const carbs = profile.carbs * factor;
          const fat = profile.fat * factor;
          const fiber = profile.fiber * factor;
          const sugar = profile.sugar * factor;
          const sodium = profile.sodium * factor;

          totals.kcal += kcal;
          totals.protein += protein;
          totals.carbs += carbs;
          totals.fat += fat;
          totals.fiber += fiber;
          totals.sugar += sugar;
          totals.sodium += sodium;

          breakdownLines.push(`<div class="px-3 py-2 border-b border-gray-100">
        <div class="font-semibold">${escapeHtml(ing.name)}</div>
        <div class="flex justify-between"><span>Amount</span><span>${
          ing.amount
        } ${ing.unit || "g"}</span></div>
        <div class="flex justify-between"><span>Calories</span><span>${kcal.toFixed(
          0
        )} kcal</span></div>
        <div class="flex justify-between"><span>Protein</span><span>${protein.toFixed(
          1
        )} g</span></div>
        <div class="flex justify-between"><span>Carbs</span><span>${carbs.toFixed(
          1
        )} g</span></div>
        <div class="flex justify-between"><span>Fat</span><span>${fat.toFixed(
          1
        )} g</span></div>
      </div>`);
        });

        if (totals.kcal === 0) {
          setStatus(
            'Could not estimate nutrition for these ingredients. Try using more generic names (e.g., "olive oil", "chicken breast").',
            true
          );
          resultsSection.classList.add("hidden");
          return;
        }

        const perServing = {
          kcal: totals.kcal / servings,
          protein: totals.protein / servings,
          carbs: totals.carbs / servings,
          fat: totals.fat / servings,
          fiber: totals.fiber / servings,
          sugar: totals.sugar / servings,
          sodium: totals.sodium / servings,
        };

        updateNutritionLabel(perServing);
        updateSummary(perServing, totals);
        ingredientBreakdown.innerHTML =
          breakdownLines.join("") ||
          '<div class="px-3 py-2 text-gray-500">No ingredient details available.</div>';
        resultsSection.classList.remove("hidden");

        let msg = `Estimated nutrition for ${servings} serving(s).`;
        if (unknownCount > 0) {
          msg += ` ${unknownCount} ingredient(s) used approximate or missing data.`;
        }
        setStatus(msg, false);
      }

      function updateNutritionLabel(perServing) {
        const kcal = perServing.kcal;
        const fat = perServing.fat;
        const carbs = perServing.carbs;
        const protein = perServing.protein;
        const fiber = perServing.fiber;
        const sugar = perServing.sugar;
        const sodium = perServing.sodium;

        document.getElementById("nf-serving-size").textContent = "1 serving";
        document.getElementById("nf-calories").textContent = Math.round(kcal);

        document.getElementById("nf-fat").textContent = fat.toFixed(1) + " g";
        document.getElementById("nf-carbs").textContent =
          carbs.toFixed(1) + " g";
        document.getElementById("nf-protein").textContent =
          protein.toFixed(1) + " g";
        document.getElementById("nf-fiber").textContent =
          fiber.toFixed(1) + " g";
        document.getElementById("nf-sugar").textContent =
          sugar.toFixed(1) + " g";
        document.getElementById("nf-sodium").textContent =
          Math.round(sodium) + " mg";

        // Rough saturated fat & cholesterol estimates (not in DB)
        const satfat = fat * 0.35;
        const cholesterol = 0;

        document.getElementById("nf-satfat").textContent =
          satfat.toFixed(1) + " g";
        document.getElementById("nf-cholesterol").textContent =
          cholesterol.toFixed(0) + " mg";

        document.getElementById("nf-fat-pct").textContent =
          dvPercent(fat, DEFAULT_DV.fat) + "%";
        document.getElementById("nf-satfat-pct").textContent =
          dvPercent(satfat, DEFAULT_DV.satfat) + "%";
        document.getElementById("nf-carbs-pct").textContent =
          dvPercent(carbs, DEFAULT_DV.carbs) + "%";
        document.getElementById("nf-fiber-pct").textContent =
          dvPercent(fiber, DEFAULT_DV.fiber) + "%";
        document.getElementById("nf-protein-pct").textContent =
          dvPercent(protein, DEFAULT_DV.protein) + "%";
        document.getElementById("nf-sodium-pct").textContent =
          dvPercent(sodium, DEFAULT_DV.sodium) + "%";
        document.getElementById("nf-cholesterol-pct").textContent = "0%";
      }

      function dvPercent(value, dv) {
        if (!dv || dv <= 0) return 0;
        return Math.round((value / dv) * 100);
      }

      function updateSummary(perServing, totals) {
        document.getElementById("summary-calories").textContent =
          Math.round(perServing.kcal) + " kcal";
        document.getElementById("summary-protein").textContent =
          perServing.protein.toFixed(1) + " g";
        document.getElementById("summary-carbs").textContent =
          perServing.carbs.toFixed(1) + " g";
        document.getElementById("summary-fat").textContent =
          perServing.fat.toFixed(1) + " g";
        document.getElementById("summary-fiber").textContent =
          perServing.fiber.toFixed(1) + " g";
        document.getElementById("summary-sugar").textContent =
          perServing.sugar.toFixed(1) + " g";
        document.getElementById("summary-total-calories").textContent =
          Math.round(totals.kcal) + " kcal";
      }

      function clearAll() {
        document.getElementById("recipe-name").value = "";
        document.getElementById("servings").value = 4;
        document.getElementById("ingredients-text").value = "";
        ingredientsTableBody.innerHTML = "";
        ingredientBreakdown.innerHTML = "";
        resultsSection.classList.add("hidden");
        setStatus("Cleared recipe. Enter new ingredients to begin.", false);
      }

      function exportJSON() {
        const data = {
          name: document.getElementById("recipe-name").value.trim() || null,
          servings:
            parseInt(document.getElementById("servings").value, 10) || 1,
          ingredients: collectIngredientsFromTable(),
        };
        const json = JSON.stringify(data, null, 2);
        navigator.clipboard
          .writeText(json)
          .then(() => {
            setStatus("Recipe JSON copied to clipboard.", false);
          })
          .catch(() => {
            setStatus(
              "Could not copy JSON to clipboard. You can copy it manually:\n" +
                json,
              true
            );
          });
      }

      function copySummary() {
        const name =
          document.getElementById("recipe-name").value.trim() || "Recipe";
        const servings =
          parseInt(document.getElementById("servings").value, 10) || 1;
        const calories =
          document.getElementById("summary-calories").textContent;
        const protein = document.getElementById("summary-protein").textContent;
        const carbs = document.getElementById("summary-carbs").textContent;
        const fat = document.getElementById("summary-fat").textContent;
        const fiber = document.getElementById("summary-fiber").textContent;
        const sugar = document.getElementById("summary-sugar").textContent;

        const text = `${name} – nutrition per serving (${servings} serving${
          servings > 1 ? "s" : ""
        } total):
Calories: ${calories}
Protein: ${protein}
Carbs: ${carbs}
Fat: ${fat}
Fiber: ${fiber}
Sugar: ${sugar}`;

        navigator.clipboard
          .writeText(text)
          .then(() => {
            setStatus("Nutrition summary copied to clipboard.", false);
          })
          .catch(() => {
            setStatus("Could not copy summary to clipboard.", true);
          });
      }

      function escapeHtml(str) {
        return str.replace(/[&<>"']/g, function (m) {
          return {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;",
          }[m];
        });
      }

      // Tab switching
      tabQuick.addEventListener("click", () => {
        tabQuick.classList.add("tab-active");
        tabQuick.classList.remove("tab-inactive");
        tabAdvanced.classList.add("tab-inactive");
        tabAdvanced.classList.remove("tab-active");
        quickPanel.classList.remove("hidden");
        advancedPanel.classList.add("hidden");
      });

      tabAdvanced.addEventListener("click", () => {
        tabAdvanced.classList.add("tab-active");
        tabAdvanced.classList.remove("tab-inactive");
        tabQuick.classList.add("tab-inactive");
        tabQuick.classList.remove("tab-active");
        quickPanel.classList.add("hidden");
        advancedPanel.classList.remove("hidden");
        // If table is empty but quick entry has text, parse it
        if (
          !ingredientsTableBody.querySelector("tr") &&
          document.getElementById("ingredients-text").value.trim()
        ) {
          parseQuickEntry();
        }
      });

      document
        .getElementById("add-row-btn")
        .addEventListener("click", () => addIngredientRow());
      document.getElementById("parse-btn").addEventListener("click", () => {
        // Always sync quick entry into table first if quick tab is active
        if (!advancedPanel.classList.contains("hidden")) {
          // advanced mode: just compute
          computeNutrition();
        } else {
          parseQuickEntry();
          computeNutrition();
        }
      });
      document.getElementById("clear-btn").addEventListener("click", clearAll);
      document
        .getElementById("export-json-btn")
        .addEventListener("click", exportJSON);
      document
        .getElementById("copy-summary-btn")
        .addEventListener("click", copySummary);

      ingredientsTableBody.addEventListener("click", (e) => {
        if (e.target.classList.contains("remove-row-btn")) {
          e.target.closest("tr").remove();
        }
      });

      // Initialize with one empty row for advanced mode
      addIngredientRow();
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

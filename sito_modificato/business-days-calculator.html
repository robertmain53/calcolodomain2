<!DOCTYPE html><html lang="en"><head>
<link rel="canonical" href="https://calcdomain.com/business-days-calculator">





<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="manifest" href="/site.webmanifest">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Business Days Calculator - Calculate Workdays</title>
<meta name="description" content="Calculate business days between two dates or find a future/past date by adding or subtracting workdays. Accounts for weekends and public holidays.">


<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-wcPFEOIAF2vXxKxGoD+EApUWVXpW9gLSDBXaIEjoS4s0T+S9IeWAmMkoNlCJMJ6M" crossorigin="anonymous">
<script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoYJkEuMVKAIKPoLHoTOsFA2vaN/vQocclNmbGfnUuNHJgM8IeXGjE/Y/HIfdAG" crossorigin="anonymous"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/Gf1Yp4i1tO+MYDsE3jLqjMPhgFBYANQvQvNf/pTgHwYJ7cM0" crossorigin="anonymous"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.prose dl dt { font-weight: 600; }
.prose dl dd { margin-left: 1.5rem; margin-bottom: 0.5rem; }
/* Formula box for LaTeX */
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.5rem;
overflow-x:auto; font-family: 'KaTeX_Main', serif; font-size: 1.1rem;
display: flex; justify-content: center; align-items: center;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
/* Result card styling */
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; text-transform: uppercase; letter-spacing: 0.05em; }
.result-card p { font-size: 2rem; font-weight: 700; color: #2563eb; }
/* Custom focus state for WCAG compliance */
:focus-visible {
outline: 3px solid #3b82f6 !important;
outline-offset: 2px !important;
box-shadow: none !important;
}
/* WCAG 2.1 AA: Ensure tap targets are large enough (h-12 = 48px) */
.form-input, .form-select, .form-button {
@apply h-12 px-4 w-full mt-1 border border-gray-300 rounded-md shadow-sm;
@apply focus:outline-none focus:ring-blue-500 focus:border-blue-500;
}
.form-button { @apply flex items-center justify-center; }
/* A11y: Visually hidden class for screen readers */
.sr-only {
position: absolute;
width: 1px;
height: 1px;
padding: 0;
margin: -1px;
overflow: hidden;
clip: rect(0, 0, 0, 0);
white-space: nowrap;
border-width: 0;
}
/* Print styles from template */
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
}
</style>

<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Business Days Calculator - Calculate Workdays",
  "description": "Calculate business days between two dates or find a future/past date by adding or subtracting workdays. Accounts for weekends and public holidays.",
  "url": "https://calcdomain.com/business-days-calculator",
  "inLanguage": "en",
  "mainEntity": {
    "@type": "HowTo",
    "name": "How to Calculate Business Days",
    "description": "A step-by-step guide to calculating workdays, accounting for weekends and holidays.",
    "step": [
      {
        "@type": "HowToStep",
        "name": "1. Select Calculation Mode",
        "text": "Choose whether you want to 'Count Days Between' two dates or 'Add/Subtract Workdays' from a start date."
      },
      {
        "@type": "HowToStep",
        "name": "2. Enter Dates",
        "text": "Provide the 'Start Date' and 'End Date' (for counting) or just the 'Start Date' (for adding/subtracting)."
      },
      {
        "@type": "HowToStep",
        "name": "3. Set Workdays",
        "text": "If adding/subtracting, enter the number of 'Days to Add/Subtract'."
      },
      {
        "@type": "HowToStep",
        "name": "4. Define Weekends",
        "text": "Select the days of the week that are considered non-business days (e.g., Saturday and Sunday)."
      },
      {
        "@type": "HowToStep",
        "name": "5. Add Holidays (Optional)",
        "text": "Enter any specific public holidays (one per line, YYYY-MM-DD format) to exclude from the calculation."
      },
      {
        "@type": "HowToStep",
        "name": "6. Review Results",
        "text": "The calculator will instantly show the total business days or the resulting target date."
      }
    ]
  },
  "reviewedBy": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "dateModified": "2026-01-19"
}</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Lifestyle & Everyday",
      "item": "https://calcdomain.com/categories/lifestyle-everyday"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Time Date",
      "item": "https://calcdomain.com/subcategories/time-date"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What defines a 'business day'?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A business day (or 'workday') is any day that is not a weekend day or a designated public holiday. This calculator allows you to define your weekend (e.g., Saturday and Sunday) and provide a custom list of holidays for precise calculations."
      }
    },
    {
      "@type": "Question",
      "name": "How do I add multiple holidays?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "In the 'Holidays & Custom Dates' text box, enter one date per line. The required format is YYYY-MM-DD (e.g., 2025-12-25)."
      }
    },
    {
      "@type": "Question",
      "name": "Does this calculator account for half-day holidays?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No, this calculator treats any date listed in the 'Holidays' box as a full non-working day. It does not support half-day calculations."
      }
    },
    {
      "@type": "Question",
      "name": "Is the start date included in the 'Count Days Between' calculation?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "By default, the start date is *not* included, which is common for calculating duration (e.g., 'how many days *between* Mon and Fri?' is 3: Tue, Wed, Thu). You can use the 'Include start date in count' checkbox to add the start date to the calculation, assuming it is a business day."
      }
    },
    {
      "@type": "Question",
      "name": "How are leap years handled?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Leap years are handled automatically. The calculator uses standard Gregorian calendar logic, so February 29th is correctly included in leap years (e.g., 2024, 2028) and counted as a business day if it does not fall on a weekend or holiday."
      }
    },
    {
      "@type": "Question",
      "name": "What is the ISO 8601 standard?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "ISO 8601 is an international standard for the exchange of date and time-related data. It provides a clear and unambiguous format, such as YYYY-MM-DD for dates, which helps avoid confusion between regional formats (like MM/DD/YY or DD/MM/YY)."
      }
    }
  ]
}
</script>

<script src="search.js" defer=""></script>

<style>
/* AUDIT_SPINE_CSS */
.auditspine-note{
  border:1px solid #e5e7eb;
  background:#fff;
  border-radius:12px;
  padding:12px;
  color:#475569;
  font-size:13px;
  line-height:1.5;
}
.auditspine-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.auditspine-changelog{
  border:1px solid #e5e7eb;
  background:#fff;
  border-left:5px solid #334155;
  border-radius:12px;
  padding:12px;
  font-size:13px;
  color:#475569;
}
.auditspine-formula{
  margin:10px 0;
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.12);
  overflow-x:auto;
}
.auditspine-formula pre{margin:8px 0 0; white-space:pre-wrap;}
.auditspine-hr{border:none; border-top:1px solid #e5e7eb; margin:18px 0;}
</style>
</head>
<body class="bg-gray-50 text-gray-900"><header id="siteHeader">
  <div class="nav container">
    <a class="brand" href="https://calcdomain.com">CalcDomain</a>
    <div class="navRight">
      <a class="pill" href="https://calcdomain.com/search">Advanced Search</a>
      <span class="pill">Categories</span>
    </div>
  </div>
</header><div class="container">
  <main style="margin:24px 0 40px;" id="mainContent">
    <h1 id="pageTitle">Business Days Calculator - Calculate Workdays</h1>
    <p class="sub" id="pageSub">Calculate business days between two dates or find a future/past date by adding or subtracting workdays. Accounts for weekends and public holidays.</p>
    <div id="errorBox" class="alert" role="alert" aria-live="polite"></div>

    <div class="calc-hero" id="calcHero">
      <section class="card" id="inputsCard" aria-label="Calculator inputs">
<div data-canon-btnrow="1" style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;">
<button id="calcBtn" type="button" class="btn">Calculate</button>

<button id="resetBtn" type="button" class="btn btnSecondary">Reset</button>
</div>
</section>
      <section class="card sticky-box" id="resultsCard" aria-label="Calculator results"></section>
    </div>

    <section class="card content-card" id="howToUse" aria-label="How to use and methodology">
      <h2>Full original guide (expanded)</h2>
    <header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">



<!-- AUDIT_SPINE_START -->
<hr class="auditspine-hr">
<section aria-label="Formulas, sources, changelog, verification">
  <span class="auditspine-badge">Audit: Complete</span>

  <details style="margin-top:10px">
    <summary><strong>Formula (LaTeX) + variables + units</strong></summary>
    <div class="auditspine-note" style="margin-top:10px">
      This section shows the formulas used by the calculator engine, plus variable definitions and units.
      
    </div>
    <div class="auditspine-formula">
      <div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[", right: "\\]</div>
  <pre class="auditspine-mono">", right: "\</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted LaTeX)</strong></div>
  <div style="margin-top:6px">\[", right: "\]</div>
  <pre class="auditspine-mono">", right: "</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">\text{BusinessDays} = \sum_{d = \text{DateStart} + 1}^{\text{DateEnd}} \begin{cases} 0 &amp; \text{if } d \in \text{Weekends} \\ 0 &amp; \text{if } d \in \text{Holidays} \\ 1 &amp; \text{otherwise} \end{cases}</pre>
</div>
<div style="margin:10px 0">
  <div><strong>Formula (extracted text)</strong></div>
  
  <pre class="auditspine-mono">\begin{aligned} &amp; \text{let } d = \text{DateStart} \\ &amp; \text{let } \text{count} = 0 \\ &amp; \text{while } \text{count} &lt; N_{\text{days}} \\ &amp; \quad d = d + 1 \text{ day} \\ &amp; \quad \text{if } d \notin \text{Weekends} \text{ and } d \notin \text{Holidays} \\ &amp; \quad \quad \text{count} = \text{count} + 1 \\ &amp; \text{return } d \end{aligned}</pre>
</div>
      <div style="margin-top:12px"><strong>Variables and units</strong></div>
      <ul style="margin:8px 0 0 18px">
        <li><em>No variables provided in audit spec.</em></li>
      </ul>
    </div>
  </details>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Sources (authoritative):</strong>
    <ul style="margin:8px 0 0 18px">
      <li><strong>www.iso.org/standard/40874.html</strong> — iso.org · Accessed 2026-01-19<br><a href="https://www.iso.org/standard/40874.html" target="_blank" rel="nofollow noopener">https://www.iso.org/standard/40874.html</a></li>
<li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
<li><strong>Lifestyle &amp; Everyday</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/lifestyle-everyday" target="_blank" rel="nofollow noopener">https://calcdomain.com/lifestyle-everyday</a></li>
<li><strong>Time &amp; Date</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/time-date" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/time-date</a></li>
<li><strong>Date Calculator (Add/Subtract Days)</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/date-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/date-calculator</a></li>
<li><strong>Time Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/time-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/time-calculator</a></li>
<li><strong>Age Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/age-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/age-calculator</a></li>
<li><strong>Week Number Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/week-number-calculator" target="_blank" rel="nofollow noopener">https://calcdomain.com/week-number-calculator</a></li>
    </ul>
  </div>

  <div class="auditspine-changelog" style="margin-top:12px">
    <strong>Changelog</strong><br>
    <div style="margin-top:6px">
      <strong>Version:</strong> 0.1.0-draft<br>
      <strong>Last code update:</strong> 2026-01-19
    </div>
    <div style="margin-top:10px">
  <strong>0.1.0-draft</strong> · 2026-01-19
  <ul style="margin:6px 0 0 18px">
    <li>Initial audit spec draft generated from HTML extraction (review required).</li>
<li>Verify formulas match the calculator engine and convert any text-only formulas to LaTeX.</li>
<li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
  </ul>
</div>
  </div>

  <div class="auditspine-note" style="margin-top:12px">
    <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
    <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
    <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</section>
<!-- AUDIT_SPINE_END -->



<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Get instant, accurate workday counts.</li>
<li>Calculate project deadlines or service-level agreements (SLAs).</li>
<li>Find a target date by adding or subtracting business days.</li>
<li>Customize weekends (e.g., for international workweeks).</li>
<li>Exclude specific public holidays for precision.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Time &amp; Date Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="https://calcdomain.com/date-calculator" class="text-blue-600 hover:underline">Date Calculator (Add/Subtract Days)</a></li>
<li><a href="https://calcdomain.com/time-calculator" class="text-blue-600 hover:underline">Time Calculator</a></li>
<li><a href="https://calcdomain.com/age-calculator" class="text-blue-600 hover:underline">Age Calculator</a></li>
<li><a href="https://calcdomain.com/week-number-calculator" class="text-blue-600 hover:underline">Week Number Calculator</a></li>
</ul>
</div>
</div>
</aside>





<footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                                                                                                                        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction &amp; DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health &amp; Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle &amp; Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math &amp; Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>© 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>

































<script>
(function() {

  'use strict';

document.addEventListener('DOMContentLoaded', () => {

// --- DOM Element Cache ---
const elements = {
form: document.getElementById('business-day-form'),
calcMode: document.getElementsByName('calcMode'),
startDate: document.getElementById('startDate'),
endDate: document.getElementById('endDate'),
daysToAdd: document.getElementById('daysToAdd'),
addSubtract: document.getElementById('addSubtract'),
endDateGroup: document.getElementById('endDate-group'),
daysAddGroup: document.getElementById('daysAdd-group'),
optionsGroup: document.getElementById('options-group'),
includeStartDate: document.getElementById('includeStartDate'),
holidays: document.getElementById('holidays'),
resetButton: document.getElementById('reset-button'),
weekends: document.querySelectorAll('input[id^="weekend-"]'),
// Error fields
startDateError: document.getElementById('startDate-error'),
endDateError: document.getElementById('endDate-error'),
daysToAddError: document.getElementById('daysToAdd-error'),
holidaysError: document.getElementById('holidays-error'),
// Tooltip
tooltipBtn: document.getElementById('holidays-tooltip-btn'),
tooltip: document.getElementById('holidays-tooltip'),
// Results
resultsContent: document.getElementById('results-content'),
resultBusinessDays: document.getElementById('result-business-days'),
resultDate: document.getElementById('result-date'),
resultTotalDays: document.getElementById('result-total-days'),
resultWeekendDays: document.getElementById('result-weekend-days')
};

// --- Constants ---
const MS_PER_DAY = 1000 * 60 * 60 * 24;
const DAY_MAP = { 'Sun': 0, 'Mon': 1, 'Tue': 2, 'Wed': 3, 'Thu': 4, 'Fri': 5, 'Sat': 6 };
const DEFAULT_WEEKENDS = new Set([0, 6]); // Sun, Sat

// --- State and Formatting ---
const today = new Date().toISOString().split('T')[0];
const formatter = new Intl.DateTimeFormat('en-US', {
year: 'numeric',
month: 'short',
day: 'numeric',
weekday: 'short',
timeZone: 'UTC' // Critcal: Format based on UTC
});

// --- Utility Functions ---

/**
* Parses a YYYY-MM-DD string into a UTC Date object.
* This avoids timezone and DST issues.
* @param {string} dateString - The date string (e.g., "2025-12-25")
* @returns {Date} A Date object set to midnight UTC.
*/
const parseUTCDate = (dateString) => {
if (!dateString) return null;
return new Date(dateString + 'T00:00:00Z');
};

/**
* Formats a Date object back to a YYYY-MM-DD string.
* @param {Date} date - The Date object.
* @returns {string} The date string (e.g., "2025-12-25").
*/
const toYYYYMMDD = (date) => {
return date.toISOString().split('T')[0];
};

/**
* Shows an A11y-compliant error message for a field.
* @param {HTMLElement} inputEl - The input element.
* @param {HTMLElement} errorEl - The error message container.
* @param {string} message - The error message to display.
*/
const showError = (inputEl, errorEl, message) => {
errorEl.textContent = message;
inputEl.setAttribute('aria-invalid', 'true');
inputEl.setAttribute('aria-describedby', errorEl.id);
};

/**
* Clears an error message for a field.
* @param {HTMLElement} inputEl - The input element.
* @param {HTMLElement} errorEl - The error message container.
*/
const clearError = (inputEl, errorEl) => {
errorEl.textContent = '';
inputEl.setAttribute('aria-invalid', 'false');
inputEl.removeAttribute('aria-describedby');
};

// --- Core Logic ---

/**
* Toggles the UI between 'Count' and 'Add/Subtract' modes.
*/
const toggleMode = () => {
const mode = document.querySelector('input[name="calcMode"]:checked').value;
if (mode === 'count') {
elements.endDateGroup.style.display = 'block';
elements.optionsGroup.style.display = 'block';
elements.daysAddGroup.style.display = 'none';
elements.endDate.setAttribute('aria-required', 'true');
elements.daysToAdd.setAttribute('aria-required', 'false');
} else {
elements.endDateGroup.style.display = 'none';
elements.optionsGroup.style.display = 'none';
elements.daysAddGroup.style.display = 'grid'; // Use grid for layout
elements.endDate.setAttribute('aria-required', 'false');
elements.daysToAdd.setAttribute('aria-required', 'true');
}
runCalculation();
};

/**
* Sets the default state of the calculator.
*/
const setDefaultState = () => {
elements.startDate.value = today;
const tomorrow = new Date(parseUTCDate(today).getTime() + MS_PER_DAY);
tomorrow.setUTCDate(tomorrow.getUTCDate() + 30); // Set end date 30 days out
elements.endDate.value = toYYYYMMDD(tomorrow);
elements.daysToAdd.value = '10';
elements.addSubtract.value = 'add';
elements.holidays.value = '2025-01-01\n2025-07-04\n2025-12-25';
elements.includeStartDate.checked = false;

// Set default weekends (Sat/Sun)
elements.weekends.forEach(checkbox => {
checkbox.checked = DEFAULT_WEEKENDS.has(parseInt(checkbox.value));
});

// Set default mode
document.getElementById('mode-count').checked = true;
toggleMode();
clearAllErrors();
resetResults();
};

/**
* Resets all error messages.
*/
const clearAllErrors = () => {
clearError(elements.startDate, elements.startDateError);
clearError(elements.endDate, elements.endDateError);
clearError(elements.daysToAdd, elements.daysToAddError);
clearError(elements.holidays, elements.holidaysError);
};

/**
* Resets the result cards to their placeholder state.
*/
const resetResults = () => {
elements.resultBusinessDays.textContent = '—';
elements.resultDate.textContent = '—';
elements.resultTotalDays.textContent = '—';
elements.resultWeekendDays.textContent = '—';
elements.resultBusinessDays.parentElement.classList.add('bg-gray-50', 'border-gray-200');
elements.resultDate.parentElement.classList.add('bg-gray-50', 'border-gray-200');
elements.resultTotalDays.parentElement.classList.add('bg-gray-50', 'border-gray-200');
elements.resultWeekendDays.parentElement.classList.add('bg-gray-50', 'border-gray-200');
elements.resultBusinessDays.classList.add('text-gray-400');
elements.resultDate.classList.add('text-gray-400');
elements.resultTotalDays.classList.add('text-gray-400');
elements.resultWeekendDays.classList.add('text-gray-400');
};

/**
* Gathers and validates all user inputs.
* @returns {object|null} A config object or null if validation fails.
*/
const parseInputs = ()_ => {
let isValid = true;
clearAllErrors();

const config = {
mode: document.querySelector('input[name="calcMode"]:checked').value,
startDate: parseUTCDate(elements.startDate.value),
endDate: parseUTCDate(elements.endDate.value),
daysToAdd: parseInt(elements.daysToAdd.value),
addSubtract: elements.addSubtract.value,
includeStartDate: elements.includeStartDate.checked,
weekends: new Set(),
holidays: new Set()
};

// Validate Start Date
if (!elements.startDate.value || !config.startDate) {
showError(elements.startDate, elements.startDateError, 'Start date is required.');
isValid = false;
}

// Validate Mode-Specific Fields
if (config.mode === 'count') {
if (!elements.endDate.value || !config.endDate) {
showError(elements.endDate, elements.endDateError, 'End date is required.');
isValid = false;
}
if (config.startDate && config.endDate && config.endDate < config.startDate) {
showError(elements.endDate, elements.endDateError, 'End date must be after start date.');
isValid = false;
}
} else { // 'add' mode
if (isNaN(config.daysToAdd) || config.daysToAdd < 1) {
showError(elements.daysToAdd, elements.daysToAddError, 'Must be a positive number.');
isValid = false;
}
}

// Parse Weekends
elements.weekends.forEach(checkbox => {
if (checkbox.checked) {
config.weekends.add(parseInt(checkbox.value));
}
});

// Parse Holidays
const holidayLines = elements.holidays.value.split('\n');
const holidayRegex = /^\d{4}-\d{2}-\d{2}$/;
let invalidHolidays = false;
holidayLines.forEach(line => {
const trimmedLine = line.trim();
if (trimmedLine) {
if (holidayRegex.test(trimmedLine)) {
config.holidays.add(trimmedLine);
} else {
invalidHolidays = true;
}
}
});
if (invalidHolidays) {
showError(elements.holidays, elements.holidaysError, 'Some dates are not in YYYY-MM-DD format. They will be ignored.');
// This is a soft error, so we don't set isValid = false
}

return isValid ? config : null;
};

/**
* Checks if a given date is a business day.
* @param {Date} date - The UTC Date object to check.
* @param {Set<number>} weekends - Set of weekend day numbers (0-6).
* @param {Set<string>} holidays - Set of holiday strings (YYYY-MM-DD).
* @returns {boolean} True if it's a business day.
*/
const isBusinessDay = (date, weekends, holidays) => {
// Check weekend
if (weekends.has(date.getUTCDay())) {
return false;
}
// Check holiday
if (holidays.has(toYYYYMMDD(date))) {
return false;
}
return true;
};

/**
* Main calculation driver.
*/
const runCalculation = () => {
const config = parseInputs();
if (!config) {
resetResults();
return;
}

let result;
if (config.mode === 'count') {
result = countDaysBetween(config);
displayCountResults(result);
} else {
result = addSubtractDays(config);
displayAddSubtractResults(result);
}
};

/**
* Logic for "Count Days Between" mode.
* @param {object} config - The validated input config.
* @returns {object} The result object.
*/
const countDaysBetween = (config) => {
let businessDays = 0;
let weekendDays = 0;
let holidayCount = 0;

// Calculate total calendar days
const totalDays = Math.round((config.endDate.getTime() - config.startDate.getTime()) / MS_PER_DAY);

const currentDate = new Date(config.startDate.getTime());

// Loop from start date up to (but not including) end date
for (let i = 0; i < totalDays; i++) {
// Determine which day to check based on includeStartDate
const dayToCheck = new Date(currentDate.getTime());
if (i === 0 && !config.includeStartDate) {
// On the first loop, if not including start date, skip it
currentDate.setUTCDate(currentDate.getUTCDate() + 1);
continue;
}

const isWorkday = isBusinessDay(dayToCheck, config.weekends, config.holidays);
const isWeekend = config.weekends.has(dayToCheck.getUTCDay());

if (isWorkday) {
businessDays++;
} else if (isWeekend) {
weekendDays++;
} else {
// It's not a weekend, but not a workday, so it must be a holiday
holidayCount++;
}

currentDate.setUTCDate(currentDate.getUTCDate() + 1);
}

// Special case: Check the end date separately
const isEndDateWorkday = isBusinessDay(config.endDate, config.weekends, config.holidays);
const isEndDateWeekend = config.weekends.has(config.endDate.getUTCDay());

if (isEndDateWorkday) {
businessDays++;
} else if (isEndDateWeekend) {
weekendDays++;
} else {
holidayCount++;
}

return { businessDays, weekendDays, totalDays: totalDays + 1, holidayCount };
};

/**
* Logic for "Add/Subtract Days" mode.
* @param {object} config - The validated input config.
* @returns {object} The result object.
*/
const addSubtractDays = (config) => {
let daysFound = 0;
let totalDaysElapsed = 0;
let weekendDays = 0;
let holidayCount = 0;

const currentDate = new Date(config.startDate.getTime());
const direction = (config.addSubtract === 'add') ? 1 : -1;

while (daysFound < config.daysToAdd) {
currentDate.setUTCDate(currentDate.getUTCDate() + direction);
totalDaysElapsed++;

const isWorkday = isBusinessDay(currentDate, config.weekends, config.holidays);

if (isWorkday) {
daysFound++;
} else {
if (config.weekends.has(currentDate.getUTCDay())) {
weekendDays++;
} else {
holidayCount++;
}
}
}

return {
resultDate: currentDate,
totalDays: totalDaysElapsed,
weekendDays,
holidayCount
};
};

/**
* Displays the results for "Count" mode.
* @param {object} result - The result object from countDaysBetween.
*/
const displayCountResults = (result) => {
elements.resultsContent.innerHTML = `
<div class="result-card col-span-1 sm:col-span-2">
<h4>Total Business Days</h4>
<p>${result.businessDays}</p>
</div>
<div class="result-card">
<h4>Total Calendar Days</h4>
<p>${result.totalDays}</p>
</div>
<div class="result-card">
<h4>Total Weekend Days</h4>
<p>${result.weekendDays}</p>
</div>
`;
};

/**
* Displays the results for "Add/Subtract" mode.
* @param {object} result - The result object from addSubtractDays.
*/
const displayAddSubtractResults = (result) => {
elements.resultsContent.innerHTML = `
<div class="result-card col-span-1 sm:col-span-2">
<h4>Resulting Date</h4>
<p class="text-2xl">${formatter.format(result.resultDate)}</p>
</div>
<div class="result-card">
<h4>Total Days Elapsed</h4>
<p>${result.totalDays}</p>
</div>
<div class="result-card">
<h4>Total Weekend Days</h4>
<p>${result.weekendDays}</p>
</div>
`;
};

/**
* Handles the accessible tooltip logic.
*/
const setupTooltip = () => {
let tooltipVisible = false;

const show = () => {
elements.tooltip.style.display = 'block';
tooltipVisible = true;
};
const hide = () => {
elements.tooltip.style.display = 'none';
tooltipVisible = false;
};

elements.tooltipBtn.addEventListener('click', () => {
tooltipVisible ? hide() : show();
});
elements.tooltipBtn.addEventListener('blur', hide);
elements.tooltipBtn.addEventListener('keydown', (e) => {
if (e.key === 'Escape') hide();
});
};

// --- Event Listeners ---
elements.form.addEventListener('submit', (e) => e.preventDefault());
elements.form.addEventListener('input', runCalculation);
elements.calcMode.forEach(radio => radio.addEventListener('change', toggleMode));
elements.resetButton.addEventListener('click', setDefaultState);

setupTooltip();

// --- KaTeX Rendering ---
// Render LaTeX after the DOM is ready
if (window.renderMathInElement) {
renderMathInElement(document.body, {
delimiters: [
{left: "$$", right: "$$", display: true},
{left: "$", right: "$", display: false},
{left: "\\(", right: "\\)", display: false},
{left: "\\[", right: "\\]", display: true}
]
});
}

// --- Initial Run ---
setDefaultState();
runCalculation(); // Run once on load
});


})();</script>

</nav></header></section>

    <section class="meta-section" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
  <details id="formulaDetails">
    <summary style="cursor:pointer; font-weight:700; color:var(--text)">Formulas</summary>
    <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
      <p style="margin:0;">(Formulas preserved from original page content, if present.)</p>
    </div>
  </details>

  

  

  <div class="badge-row" id="badgeRow">
    <div class="badge" id="versionBadge">Version 0.1.0-draft</div>
  </div>

<details id="citationDetails" style="margin-top:10px;">
  <summary style="cursor:pointer; font-weight:700; color:var(--text)">Citations</summary>
  <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
    <p style="margin:0;">Add authoritative sources relevant to this calculator (standards bodies, manuals, official docs).</p>
  </div>
</details>

<details id="changelogDetails" style="margin-top:10px;">
  <summary style="cursor:pointer; font-weight:700; color:var(--text)">Changelog</summary>
  <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
    <ul style="padding-left:18px; margin:0;">
      <li>0.1.0-draft — 2026-01-19: Initial draft (review required).</li>
    </ul>
  </div>
</details>
</section>
  </main>
</div><footer id="siteFooter" class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="border-t border-gray-800 pt-8 text-center text-gray-400">
      <p>© 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer></body></html>
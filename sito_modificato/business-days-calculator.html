<!DOCTYPE html>
<html lang="en">
 <head>
  <link href="https://calcdomain.com/business-days-calculator" rel="canonical"/>
  <link href="/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"/>
  <link href="/favicon.svg" rel="icon" type="image/svg+xml"/>
  <link href="/favicon.ico" rel="shortcut icon"/>
  <link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
  <link href="/site.webmanifest" rel="manifest"/>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   Business Days Calculator - Calculate Workdays
  </title>
  <meta content="Calculate business days between two dates or find a future/past date by adding or subtracting workdays. Accounts for weekends and public holidays." name="description"/>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-wcPFEOIAF2vXxKxGoD+EApUWVXpW9gLSDBXaIEjoS4s0T+S9IeWAmMkoNlCJMJ6M" rel="stylesheet"/>
  <script crossorigin="anonymous" defer="" integrity="sha384-hIoYJkEuMVKAIKPoLHoTOsFA2vaN/vQocclNmbGfnUuNHJgM8IeXGjE/Y/HIfdAG" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js">
  </script>
  <script crossorigin="anonymous" defer="" integrity="sha384-43gviWU0YVjaDtb/Gf1Yp4i1tO+MYDsE3jLqjMPhgFBYANQvQvNf/pTgHwYJ7cM0" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js">
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
  <style>
   body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.prose dl dt { font-weight: 600; }
.prose dl dd { margin-left: 1.5rem; margin-bottom: 0.5rem; }
/* Formula box for LaTeX */
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.5rem;
overflow-x:auto; font-family: 'KaTeX_Main', serif; font-size: 1.1rem;
display: flex; justify-content: center; align-items: center;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
/* Result card styling */
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; text-transform: uppercase; letter-spacing: 0.05em; }
.result-card p { font-size: 2rem; font-weight: 700; color: #2563eb; }
/* Custom focus state for WCAG compliance */
:focus-visible {
outline: 3px solid #3b82f6 !important;
outline-offset: 2px !important;
box-shadow: none !important;
}
/* WCAG 2.1 AA: Ensure tap targets are large enough (h-12 = 48px) */
.form-input, .form-select, .form-button {
@apply h-12 px-4 w-full mt-1 border border-gray-300 rounded-md shadow-sm;
@apply focus:outline-none focus:ring-blue-500 focus:border-blue-500;
}
.form-button { @apply flex items-center justify-center; }
/* A11y: Visually hidden class for screen readers */
.sr-only {
position: absolute;
width: 1px;
height: 1px;
padding: 0;
margin: -1px;
overflow: hidden;
clip: rect(0, 0, 0, 0);
white-space: nowrap;
border-width: 0;
}
/* Print styles from template */
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
}
  </style>
  <script type="application/ld+json">
   {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Business Days Calculator - Calculate Workdays",
  "description": "Calculate business days between two dates or find a future/past date by adding or subtracting workdays. Accounts for weekends and public holidays.",
  "url": "https://calcdomain.com/business-days-calculator",
  "inLanguage": "en",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  },
  "mainEntity": {
    "@type": "HowTo",
    "name": "How to Calculate Business Days",
    "description": "A step-by-step guide to calculating workdays, accounting for weekends and holidays.",
    "step": [
      {
        "@type": "HowToStep",
        "name": "1. Select Calculation Mode",
        "text": "Choose whether you want to 'Count Days Between' two dates or 'Add/Subtract Workdays' from a start date."
      },
      {
        "@type": "HowToStep",
        "name": "2. Enter Dates",
        "text": "Provide the 'Start Date' and 'End Date' (for counting) or just the 'Start Date' (for adding/subtracting)."
      },
      {
        "@type": "HowToStep",
        "name": "3. Set Workdays",
        "text": "If adding/subtracting, enter the number of 'Days to Add/Subtract'."
      },
      {
        "@type": "HowToStep",
        "name": "4. Define Weekends",
        "text": "Select the days of the week that are considered non-business days (e.g., Saturday and Sunday)."
      },
      {
        "@type": "HowToStep",
        "name": "5. Add Holidays (Optional)",
        "text": "Enter any specific public holidays (one per line, YYYY-MM-DD format) to exclude from the calculation."
      },
      {
        "@type": "HowToStep",
        "name": "6. Review Results",
        "text": "The calculator will instantly show the total business days or the resulting target date."
      }
    ]
  }
}
  </script>
  <script type="application/ld+json">
   {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Lifestyle & Everyday",
      "item": "https://calcdomain.com/lifestyle-everyday"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Time & Date",
      "item": "https://calcdomain.com/subcategories/time-date"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Business Days Calculator",
      "item": "https://calcdomain.com/business-days-calculator"
    }
  ]
}
  </script>
  <script type="application/ld+json">
   {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What defines a 'business day'?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A business day (or 'workday') is any day that is not a weekend day or a designated public holiday. This calculator allows you to define your weekend (e.g., Saturday and Sunday) and provide a custom list of holidays for precise calculations."
      }
    },
    {
      "@type": "Question",
      "name": "How do I add multiple holidays?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "In the 'Holidays & Custom Dates' text box, enter one date per line. The required format is YYYY-MM-DD (e.g., 2025-12-25)."
      }
    },
    {
      "@type": "Question",
      "name": "Does this calculator account for half-day holidays?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No, this calculator treats any date listed in the 'Holidays' box as a full non-working day. It does not support half-day calculations."
      }
    },
    {
      "@type": "Question",
      "name": "Is the start date included in the 'Count Days Between' calculation?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "By default, the start date is *not* included, which is common for calculating duration (e.g., 'how many days *between* Mon and Fri?' is 3: Tue, Wed, Thu). You can use the 'Include start date in count' checkbox to add the start date to the calculation, assuming it is a business day."
      }
    },
    {
      "@type": "Question",
      "name": "How are leap years handled?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Leap years are handled automatically. The calculator uses standard Gregorian calendar logic, so February 29th is correctly included in leap years (e.g., 2024, 2028) and counted as a business day if it does not fall on a weekend or holiday."
      }
    },
    {
      "@type": "Question",
      "name": "What is the ISO 8601 standard?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "ISO 8601 is an international standard for the exchange of date and time-related data. It provides a clear and unambiguous format, such as YYYY-MM-DD for dates, which helps avoid confusion between regional formats (like MM/DD/YY or DD/MM/YY)."
      }
    }
  ]
}
  </script>
  <script defer="" src="search.js">
  </script>
  <html>
   <head>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=TUO_ID_GA">
    </script>
    <script>
     window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'TUO_ID_GA');
    </script>
   </head>
  </html>
 </head>
 <body class="bg-gray-50 text-gray-900">
  <header class="bg-white shadow-sm sticky top-0 z-50">
   <nav aria-label="Primary" class="container mx-auto px-4 lg:px-6 py-4">
    <div class="flex justify-between items-center">
     <a class="text-2xl font-bold text-blue-600" href="https://calcdomain.com">
      CalcDomain
     </a>
     <div class="w-full max-w-md hidden md:block mx-8">
      <div class="relative">
       <input autocomplete="off" class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="search-input" placeholder="Search for a calculator..." type="search"/>
       <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24">
        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
        </path>
       </svg>
       <div class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200" id="search-results">
       </div>
      </div>
     </div>
     <div class="hidden md:flex items-center space-x-6">
      <a class="text-gray-700 hover:text-blue-600 transition-colors" href="https://calcdomain.com/search">
       Advanced Search
      </a>
      <a class="text-gray-700 hover:text-blue-600 transition-colors" href="https://calcdomain.com/categories">
       Categories
      </a>
     </div>
     <button aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" class="md:hidden p-2" id="mobile-menu-toggle" type="button">
      <svg aria-hidden="true" class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24">
       <path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
       </path>
      </svg>
     </button>
    </div>
    <nav aria-label="Mobile menu" class="md:hidden mt-4 hidden" id="mobile-menu" role="navigation">
     <div class="mb-4">
      <div class="relative">
       <input class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" id="mobile-search-input" placeholder="Search calculators..." type="search"/>
       <svg aria-hidden="true" class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24">
        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
        </path>
       </svg>
      </div>
     </div>
     <div class="space-y-2">
      <a class="block py-2 text-gray-700 hover:text-blue-600" href="https://calcdomain.com/search">
       Advanced Search
      </a>
      <a class="block py-2 text-gray-700 hover:text-blue-600" href="https://calcdomain.com/categories">
       Categories
      </a>
     </div>
    </nav>
   </nav>
  </header>
  <html>
   <body>
    <nav class="container mx-auto px-4 py-2 text-sm text-gray-600" id="breadcrumb-container">
    </nav>
    <div class="container mx-auto px-4 py-8">
     <div class="flex flex-col lg:flex-row gap-8">
      <main class="w-full lg:w-2/3">
       <main class="container mx-auto px-4 lg:px-6 py-10">
        <div class="flex flex-col lg:flex-row gap-8">
         <section class="w-full lg:w-2/3">
          <nav aria-label="Breadcrumb" class="text-sm text-gray-600 mb-4">
           <a class="hover:text-blue-600" href="https://calcdomain.com">
            Home
           </a>
           »
           <a class="hover:text-blue-600" href="https://calcdomain.com/lifestyle-everyday">
            Lifestyle &amp; Everyday
           </a>
           »
           <a class="hover:text-blue-600" href="https://calcdomain.com/subcategories/time-date">
            Time &amp; Date
           </a>
           »
           <span class="text-gray-900">
            Business Days Calculator
           </span>
          </nav>
          <div class="bg-white p-6 rounded-lg shadow-md" id="print-section">
           <h1 class="text-3xl font-extrabold text-gray-900 mb-2">
            Business Days Calculator
           </h1>
           <p class="text-gray-600 mb-6">
            Quickly calculate the number of business days between two dates, or find a future/past date by adding or subtracting workdays. This tool automatically accounts for weekends and lets you add specific public holidays for precise results.
           </p>
           <section aria-labelledby="calculator-heading" id="calculator-ui">
            <h2 class="sr-only" id="calculator-heading">
             Calculator Inputs
            </h2>
            <form class="space-y-6" id="business-day-form">
             <fieldset>
              <legend class="block text-sm font-medium text-gray-700 mb-2">
               Calculation Mode
              </legend>
              <div class="grid grid-cols-2 gap-4">
               <div>
                <input checked="" class="sr-only" id="mode-count" name="calcMode" type="radio" value="count"/>
                <label class="h-12 px-4 flex items-center justify-center text-sm font-medium rounded-md border cursor-pointer transition-colors ui-checked:bg-blue-600 ui-checked:text-white ui-checked:border-blue-600 ui-not-checked:bg-white ui-not-checked:text-gray-700 ui-not-checked:hover:bg-gray-50" for="mode-count">
                 Count Days Between
                </label>
               </div>
               <div>
                <input class="sr-only" id="mode-add" name="calcMode" type="radio" value="add"/>
                <label class="h-12 px-4 flex items-center justify-center text-sm font-medium rounded-md border cursor-pointer transition-colors ui-checked:bg-blue-600 ui-checked:text-white ui-checked:border-blue-600 ui-not-checked:bg-white ui-not-checked:text-gray-700 ui-not-checked:hover:bg-gray-50" for="mode-add">
                 Add/Subtract Days
                </label>
               </div>
              </div>
             </fieldset>
             <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
               <label class="block text-sm font-medium text-gray-700" for="startDate">
                Start Date
                <span class="text-red-500">
                 *
                </span>
               </label>
               <input aria-required="true" class="form-input" id="startDate" name="startDate" type="date"/>
               <div aria-live="polite" class="text-red-600 text-sm mt-1" id="startDate-error" role="alert">
               </div>
              </div>
              <div id="endDate-group">
               <label class="block text-sm font-medium text-gray-700" for="endDate">
                End Date
                <span class="text-red-500">
                 *
                </span>
               </label>
               <input aria-required="true" class="form-input" id="endDate" name="endDate" type="date"/>
               <div aria-live="polite" class="text-red-600 text-sm mt-1" id="endDate-error" role="alert">
               </div>
              </div>
              <div class="hidden grid grid-cols-3 gap-2" id="daysAdd-group">
               <div class="col-span-2">
                <label class="block text-sm font-medium text-gray-700" for="daysToAdd">
                 Days to Add/Subtract
                 <span class="text-red-500">
                  *
                 </span>
                </label>
                <input aria-required="true" class="form-input" id="daysToAdd" min="1" name="daysToAdd" step="1" type="number" value="10"/>
               </div>
               <div>
                <label class="block text-sm font-medium text-gray-700" for="addSubtract">
                 Action
                </label>
                <select class="form-select h-12" id="addSubtract" name="addSubtract">
                 <option selected="" value="add">
                  Add
                 </option>
                 <option value="subtract">
                  Subtract
                 </option>
                </select>
               </div>
               <div aria-live="polite" class="col-span-3 text-red-600 text-sm -mt-1" id="daysToAdd-error" role="alert">
               </div>
              </div>
             </div>
             <fieldset>
              <legend class="block text-sm font-medium text-gray-700">
               Define Weekends (Non-Business Days)
              </legend>
              <div class="mt-2 grid grid-cols-4 sm:grid-cols-7 gap-2">
               <div class="relative flex items-center justify-center">
                <input class="sr-only" id="weekend-sun" type="checkbox" value="0"/>
                <label class="h-10 w-10 flex items-center justify-center rounded-full border cursor-pointer select-none ui-checked:bg-blue-600 ui-checked:text-white ui-checked:border-blue-600 ui-not-checked:bg-white ui-not-checked:text-gray-700 ui-not-checked:hover:bg-gray-50" class_name="form-check-label" for="weekend-sun">
                 Sun
                </label>
               </div>
               <div class="relative flex items-center justify-center">
                <input class="sr-only" id="weekend-mon" type="checkbox" value="1"/>
                <label class="h-10 w-10 flex items-center justify-center rounded-full border cursor-pointer select-none ui-checked:bg-blue-600 ui-checked:text-white ui-checked:border-blue-600 ui-not-checked:bg-white ui-not-checked:text-gray-700 ui-not-checked:hover:bg-gray-50" class_name="form-check-label" for="weekend-mon">
                 Mon
                </label>
               </div>
               <div class="relative flex items-center justify-center">
                <input class="sr-only" id="weekend-tue" type="checkbox" value="2"/>
                <label class="h-10 w-10 flex items-center justify-center rounded-full border cursor-pointer select-none ui-checked:bg-blue-600 ui-checked:text-white ui-checked:border-blue-600 ui-not-checked:bg-white ui-not-checked:text-gray-700 ui-not-checked:hover:bg-gray-50" class_name="form-check-label" for="weekend-tue">
                 Tue
                </label>
               </div>
               <div class="relative flex items-center justify-center">
                <input class="sr-only" id="weekend-wed" type="checkbox" value="3"/>
                <label class="h-10 w-10 flex items-center justify-center rounded-full border cursor-pointer select-none ui-checked:bg-blue-600 ui-checked:text-white ui-checked:border-blue-600 ui-not-checked:bg-white ui-not-checked:text-gray-700 ui-not-checked:hover:bg-gray-50" class_name="form-check-label" for="weekend-wed">
                 Wed
                </label>
               </div>
               <div class="relative flex items-center justify-center">
                <input class="sr-only" id="weekend-thu" type="checkbox" value="4"/>
                <label class="h-10 w-10 flex items-center justify-center rounded-full border cursor-pointer select-none ui-checked:bg-blue-600 ui-checked:text-white ui-checked:border-blue-600 ui-not-checked:bg-white ui-not-checked:text-gray-700 ui-not-checked:hover:bg-gray-50" class_name="form-check-label" for="weekend-thu">
                 Thu
                </label>
               </div>
               <div class="relative flex items-center justify-center">
                <input class="sr-only" id="weekend-fri" type="checkbox" value="5"/>
                <label class="h-10 w-10 flex items-center justify-center rounded-full border cursor-pointer select-none ui-checked:bg-blue-600 ui-checked:text-white ui-checked:border-blue-600 ui-not-checked:bg-white ui-not-checked:text-gray-700 ui-not-checked:hover:bg-gray-50" class_name="form-check-label" for="weekend-fri">
                 Fri
                </label>
               </div>
               <div class="relative flex items-center justify-center">
                <input class="sr-only" id="weekend-sat" type="checkbox" value="6"/>
                <label class="h-10 w-10 flex items-center justify-center rounded-full border cursor-pointer select-none ui-checked:bg-blue-600 ui-checked:text-white ui-checked:border-blue-600 ui-not-checked:bg-white ui-not-checked:text-gray-700 ui-not-checked:hover:bg-gray-50" class_name="form-check-label" for="weekend-sat">
                 Sat
                </label>
               </div>
              </div>
             </fieldset>
             <div>
              <label class="block text-sm font-medium text-gray-700" for="holidays">
               Holidays &amp; Custom Dates
               <span class="text-xs text-gray-500">
                (Optional)
               </span>
               <button aria-describedby="holidays-tooltip" aria-label="More info on holiday format" class="ml-1 p-1 rounded-full hover:bg-gray-100 focus:bg-gray-100 align-middle" id="holidays-tooltip-btn" type="button">
                <svg class="w-4 h-4 text-gray-500" fill="currentColor" viewbox="0 0 20 20">
                 <path clip-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" fill-rule="evenodd">
                 </path>
                </svg>
               </button>
              </label>
              <div class="hidden absolute z-10 p-3 mt-1 text-sm text-white bg-gray-900 rounded-lg shadow-sm" id="holidays-tooltip" role="tooltip">
               Enter one date per line in
               <strong>
                YYYY-MM-DD
               </strong>
               format.
               <br/>
               Example: 2025-12-25
              </div>
              <textarea class="form-input !h-auto py-3" id="holidays" name="holidays" placeholder="2025-01-01
2025-12-25" rows="4"></textarea>
              <div aria-live="polite" class="text-red-600 text-sm mt-1" id="holidays-error" role="alert">
              </div>
             </div>
             <fieldset id="options-group">
              <legend class="block text-sm font-medium text-gray-700">
               Options
              </legend>
              <div class="mt-2 space-y-2">
               <div class="relative flex items-start">
                <div class="flex items-center h-5">
                 <input class="h-4 w-4 text-blue-600 border-gray-300 rounded" id="includeStartDate" name="includeStartDate" type="checkbox"/>
                </div>
                <div class="ml-3 text-sm">
                 <label class="text-gray-700" for="includeStartDate">
                  Include start date in count
                 </label>
                </div>
               </div>
              </div>
             </fieldset>
             <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <button class="form-button bg-gray-200 text-gray-800 hover:bg-gray-300" id="reset-button" type="button">
               Reset
              </button>
             </div>
            </form>
           </section>
           <section aria-labelledby="results-heading" aria-live="polite" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6 min-h-[10rem]" id="results" role="status">
            <h2 class="sr-only" id="results-heading">
             Calculation Results
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4" id="results-content">
             <div class="result-card bg-gray-50 border-gray-200">
              <h4 class="text-gray-500">
               Total Business Days
              </h4>
              <p class="text-gray-400" id="result-business-days">
               —
              </p>
             </div>
             <div class="result-card bg-gray-50 border-gray-200">
              <h4 class="text-gray-500">
               Resulting Date
              </h4>
              <p class="text-gray-400" id="result-date">
               —
              </p>
             </div>
             <div class="result-card bg-gray-50 border-gray-200">
              <h4 class="text-gray-500">
               Total Days
              </h4>
              <p class="text-gray-400" id="result-total-days">
               —
              </p>
             </div>
             <div class="result-card bg-gray-50 border-gray-200">
              <h4 class="text-gray-500">
               Total Weekend Days
              </h4>
              <p class="text-gray-400" id="result-weekend-days">
               —
              </p>
             </div>
            </div>
           </section>
          </div>
          <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose prose-blue">
           <h2>
            Data Source and Methodology
           </h2>
           <p>
            This calculator's logic is based on the standard
            <strong>
             Gregorian calendar
            </strong>
            . Date representations and interchange formats are informed by the principles of the international standard:
           </p>
           <p class="formula-box !bg-white !justify-start !text-base">
            <strong>
             AuthoritativeDataSource:
            </strong>
            ISO 8601:2004
            <br/>
            <strong>
             Reference:
            </strong>
            Data elements and interchange formats — Information interchange — Representation of dates and times
            <br/>
            <strong>
             Link:
            </strong>
            <a href="https://www.iso.org/standard/40874.html" rel="nofollow noopener" target="_blank">
             www.iso.org/standard/40874.html
            </a>
           </p>
           <p>
            All calculations for date iteration, day-of-week, and leap year handling are rigorously based on these standard computations.
           </p>
           <h2>
            The Algorithm Explained
           </h2>
           <p>
            The calculation is not a single formula but an iterative algorithm. The logic changes depending on the selected mode.
           </p>
           <h3>
            Counting Days Between Two Dates
           </h3>
           <p>
            The algorithm iterates from the day after the Start Date up to (and including) the End Date. For each day, it checks if the day is a weekend or a holiday.
           </p>
           <div aria-label="Formula for counting business days" class="formula-box">
            <span>
             \text{BusinessDays} = \sum_{d = \text{DateStart} + 1}^{\text{DateEnd}} \begin{cases} 0 &amp; \text{if } d \in \text{Weekends} \\ 0 &amp; \text{if } d \in \text{Holidays} \\ 1 &amp; \text{otherwise} \end{cases}
            </span>
           </div>
           <h3>
            Adding or Subtracting Workdays
           </h3>
           <p>
            To find a future or past date, the algorithm iterates one day at a time from the Start Date. It only increments a counter when it finds a valid business day, continuing until the target number of days is met.
           </p>
           <div aria-label="Algorithm for adding business days" class="formula-box">
            <span>
             \begin{aligned}
&amp; \text{let } d = \text{DateStart} \\
&amp; \text{let } \text{count} = 0 \\
&amp; \text{while } \text{count} &lt; N_{\text{days}} \\
&amp; \quad d = d + 1 \text{ day} \\
&amp; \quad \text{if } d \notin \text{Weekends} \text{ and } d \notin \text{Holidays} \\
&amp; \quad \quad \text{count} = \text{count} + 1 \\
&amp; \text{return } d
\end{aligned}
            </span>
           </div>
           <p class="text-sm text-center text-gray-600">
            (For subtraction, $d = d - 1 \text{ day}$ is used.)
           </p>
           <h2>
            Glossary of Variables
           </h2>
           <dl>
            <dt>
             Start Date
            </dt>
            <dd>
             The calendar date from which to begin the calculation. $ (\text{DateStart}) $
            </dd>
            <dt>
             End Date
            </dt>
            <dd>
             The calendar date at which to end the "Count Days Between" calculation. $ (\text{DateEnd}) $
            </dd>
            <dt>
             Days to Add/Subtract
            </dt>
            <dd>
             The number of business days to project forward or backward from the Start Date. $ (N_{\text{days}}) $
            </dd>
            <dt>
             Weekends
            </dt>
            <dd>
             A set of days (e.g., {Saturday, Sunday}) that are excluded from the business day count. $ (\text{Weekends}) $
            </dd>
            <dt>
             Holidays
            </dt>
            <dd>
             A specific list of calendar dates (e.g., 2025-12-25) that are excluded from the business day count. $ (\text{Holidays}) $
            </dd>
            <dt>
             Total Business Days
            </dt>
            <dd>
             The final numerical result of the "Count Days Between" mode.
            </dd>
            <dt>
             Resulting Date
            </dt>
            <dd>
             The final date result of the "Add/Subtract Days" mode.
            </dd>
           </dl>
           <h2>
            How It Works: A Step-by-Step Example
           </h2>
           <p>
            Let's calculate the business days for a project due between
            <strong>
             December 15, 2025
            </strong>
            and
            <strong>
             January 15, 2026
            </strong>
            .
           </p>
           <ul>
            <li>
             <strong>
              Mode:
             </strong>
             Count Days Between
            </li>
            <li>
             <strong>
              Start Date:
             </strong>
             2025-12-15
            </li>
            <li>
             <strong>
              End Date:
             </strong>
             2026-01-15
            </li>
            <li>
             <strong>
              Weekends:
             </strong>
             Saturday, Sunday
            </li>
            <li>
             <strong>
              Holidays:
             </strong>
             <br/>
             2025-12-25 (Christmas Day)
             <br/>
             2026-01-01 (New Year's Day)
            </li>
            <li>
             <strong>
              Options:
             </strong>
             'Include start date' is OFF.
            </li>
           </ul>
           <p>
            <strong>
             Calculation Walkthrough:
            </strong>
           </p>
           <ol>
            <li>
             The algorithm starts on Dec 16, 2025 (the day after the start date).
            </li>
            <li>
             <strong>
              Dec 16-19 (Tue-Fri):
             </strong>
             4 days are counted.
            </li>
            <li>
             <strong>
              Dec 20-21 (Sat-Sun):
             </strong>
             Skipped (Weekend).
            </li>
            <li>
             <strong>
              Dec 22-24 (Mon-Wed):
             </strong>
             3 days are counted.
            </li>
            <li>
             <strong>
              Dec 25 (Thu):
             </strong>
             Skipped (Holiday).
            </li>
            <li>
             <strong>
              Dec 26 (Fri):
             </strong>
             1 day is counted.
            </li>
            <li>
             <strong>
              Dec 27-28 (Sat-Sun):
             </strong>
             Skipped (Weekend).
            </li>
            <li>
             <strong>
              Dec 29-31 (Mon-Wed):
             </strong>
             3 days are counted.
            </li>
            <li>
             <strong>
              Jan 1 (Thu):
             </strong>
             Skipped (Holiday).
            </li>
            <li>
             <strong>
              Jan 2 (Fri):
             </strong>
             1 day is counted.
            </li>
            <li>
             <strong>
              Jan 3-4 (Sat-Sun):
             </strong>
             Skipped (Weekend).
            </li>
            <li>
             <strong>
              Jan 5-9 (Mon-Fri):
             </strong>
             5 days are counted.
            </li>
            <li>
             <strong>
              Jan 10-11 (Sat-Sun):
             </strong>
             Skipped (Weekend).
            </li>
            <li>
             <strong>
              Jan 12-15 (Mon-Thu):
             </strong>
             4 days are counted (including the end date).
            </li>
           </ol>
           <p>
            <strong>
             Result:
            </strong>
            $4 + 3 + 1 + 3 + 1 + 5 + 4 = $
            <strong>
             21 Business Days
            </strong>
            .
           </p>
           <h2>
            Frequently Asked Questions (FAQ)
           </h2>
           <details>
            <summary>
             What defines a 'business day'?
            </summary>
            <p>
             A business day (or 'workday') is any day that is not a weekend day or a designated public holiday. This calculator allows you to define your weekend (e.g., Saturday and Sunday) and provide a custom list of holidays for precise calculations.
            </p>
           </details>
           <details>
            <summary>
             How do I add multiple holidays?
            </summary>
            <p>
             In the 'Holidays &amp; Custom Dates' text box, enter one date per line. The required format is YYYY-MM-DD (e.g., 2025-12-25).
            </p>
           </details>
           <details>
            <summary>
             Does this calculator account for half-day holidays?
            </summary>
            <p>
             No, this calculator treats any date listed in the 'Holidays' box as a full non-working day. It does not support half-day calculations.
            </p>
           </details>
           <details>
            <summary>
             Is the start date included in the 'Count Days Between' calculation?
            </summary>
            <p>
             By default, the start date is
             <strong>
              not
             </strong>
             included, which is common for calculating duration (e.g., 'how many days
             <em>
              between
             </em>
             Mon and Fri?' is 3: Tue, Wed, Thu). You can use the 'Include start date in count' checkbox to add the start date to the calculation, assuming it is a business day.
            </p>
           </details>
           <details>
            <summary>
             How are leap years handled?
            </summary>
            <p>
             Leap years are handled automatically. The calculator uses standard Gregorian calendar logic, so February 29th is correctly included in leap years (e.g., 2024, 2028) and counted as a business day if it does not fall on a weekend or holiday.
            </p>
           </details>
           <details>
            <summary>
             What is the ISO 8601 standard?
            </summary>
            <p>
             ISO 8601 is an international standard for the exchange of date and time-related data. It provides a clear and unambiguous format, such as YYYY-MM-DD for dates, which helps avoid confusion between regional formats (like MM/DD/YY or DD/MM/YY).
            </p>
           </details>
           <details>
            <summary>
             Why does the calculation happen instantly?
            </summary>
            <p>
             For a frictionless, mobile-first experience, the results are updated in real-time as you change the inputs. This eliminates the need for a "Calculate" button, allowing you to see the impact of your changes immediately.
            </p>
           </details>
           <div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
            <p>
             <strong>
              Tool developed by Ugo Candido.
             </strong>
             Contents verified by the CalcDomain Editorial Board.
            </p>
            <p>
             Last accuracy review:
             <time datetime="2025-10-25">
              October 25, 2025
             </time>
            </p>
           </div>
          </article>
         </section>
         <aside class="w-full lg:w-1/3">
          <div class="sticky top-24 space-y-6">
           <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
            Ad Placement (300×600)
           </div>
           <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-3">
             Why use this calculator
            </h3>
            <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
             <li>
              Get instant, accurate workday counts.
             </li>
             <li>
              Calculate project deadlines or service-level agreements (SLAs).
             </li>
             <li>
              Find a target date by adding or subtracting business days.
             </li>
             <li>
              Customize weekends (e.g., for international workweeks).
             </li>
             <li>
              Exclude specific public holidays for precision.
             </li>
            </ul>
           </div>
           <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-4">
             Related Time &amp; Date Tools
            </h3>
            <ul class="space-y-3 text-sm">
             <li>
              <a class="text-blue-600 hover:underline" href="https://calcdomain.com/date-calculator">
               Date Calculator (Add/Subtract Days)
              </a>
             </li>
             <li>
              <a class="text-blue-600 hover:underline" href="https://calcdomain.com/time-calculator">
               Time Calculator
              </a>
             </li>
             <li>
              <a class="text-blue-600 hover:underline" href="https://calcdomain.com/age-calculator">
               Age Calculator
              </a>
             </li>
             <li>
              <a class="text-blue-600 hover:underline" href="https://calcdomain.com/week-number-calculator">
               Week Number Calculator
              </a>
             </li>
            </ul>
           </div>
          </div>
         </aside>
        </div>
       </main>
      </main>
      <aside class="w-full lg:w-1/3">
       <div class="sticky top-24 space-y-8">
        <div id="sidebar-ad-placeholder-top">
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
         <h3 class="font-bold text-lg mb-4">
          Popular Calculators
         </h3>
         <ul class="space-y-3">
          <li>
           <a class="text-blue-600 hover:underline" href="https://calcdomain.com/mortgage-payment">
            Mortgage Calculator
           </a>
          </li>
          <li>
           <a class="text-blue-600 hover:underline" href="https://calcdomain.com/percentage-calculator">
            Percentage Calculator
           </a>
          </li>
          <li>
           <a class="text-blue-600 hover:underline" href="https://calcdomain.com/bmi-calculator">
            BMI Calculator
           </a>
          </li>
         </ul>
        </div>
       </div>
      </aside>
     </div>
    </div>
   </body>
  </html>
  <footer class="bg-gray-900 text-white py-12">
   <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
     <div>
      <h3 class="text-2xl font-bold mb-4">
       CalcDomain
      </h3>
      <p class="text-gray-400 mb-4">
       Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
      </p>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Categories
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/finance">
         Finance
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/health-fitness">
         Health &amp; Fitness
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/math-conversions">
         Math &amp; Conversions
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/lifestyle-everyday">
         Lifestyle &amp; Everyday
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/construction-diy">
         Construction &amp; DIY
        </a>
       </li>
      </ul>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Popular Tools
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/mortgage-payment">
         Mortgage Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/percentage-calculator">
         Percentage Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/bmi-calculator">
         BMI Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/auto-loan-calculator">
         Auto Loan Calculator
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/house-affordability">
         House Affordability
        </a>
       </li>
      </ul>
     </div>
     <div>
      <h4 class="text-lg font-semibold mb-4">
       Support
      </h4>
      <ul class="space-y-2">
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/about">
         About Us
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/contact">
         Contact
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/privacy">
         Privacy Policy
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/terms">
         Terms of Service
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-white" href="https://calcdomain.com/sitemap">
         Site Map
        </a>
       </li>
      </ul>
     </div>
    </div>
    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
     <p>
      © 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone
     </p>
    </div>
   </div>
  </footer>
  <script>
   document.addEventListener('DOMContentLoaded', () => {

// --- DOM Element Cache ---
const elements = {
form: document.getElementById('business-day-form'),
calcMode: document.getElementsByName('calcMode'),
startDate: document.getElementById('startDate'),
endDate: document.getElementById('endDate'),
daysToAdd: document.getElementById('daysToAdd'),
addSubtract: document.getElementById('addSubtract'),
endDateGroup: document.getElementById('endDate-group'),
daysAddGroup: document.getElementById('daysAdd-group'),
optionsGroup: document.getElementById('options-group'),
includeStartDate: document.getElementById('includeStartDate'),
holidays: document.getElementById('holidays'),
resetButton: document.getElementById('reset-button'),
weekends: document.querySelectorAll('input[id^="weekend-"]'),
// Error fields
startDateError: document.getElementById('startDate-error'),
endDateError: document.getElementById('endDate-error'),
daysToAddError: document.getElementById('daysToAdd-error'),
holidaysError: document.getElementById('holidays-error'),
// Tooltip
tooltipBtn: document.getElementById('holidays-tooltip-btn'),
tooltip: document.getElementById('holidays-tooltip'),
// Results
resultsContent: document.getElementById('results-content'),
resultBusinessDays: document.getElementById('result-business-days'),
resultDate: document.getElementById('result-date'),
resultTotalDays: document.getElementById('result-total-days'),
resultWeekendDays: document.getElementById('result-weekend-days')
};

// --- Constants ---
const MS_PER_DAY = 1000 * 60 * 60 * 24;
const DAY_MAP = { 'Sun': 0, 'Mon': 1, 'Tue': 2, 'Wed': 3, 'Thu': 4, 'Fri': 5, 'Sat': 6 };
const DEFAULT_WEEKENDS = new Set([0, 6]); // Sun, Sat

// --- State and Formatting ---
const today = new Date().toISOString().split('T')[0];
const formatter = new Intl.DateTimeFormat('en-US', {
year: 'numeric',
month: 'short',
day: 'numeric',
weekday: 'short',
timeZone: 'UTC' // Critcal: Format based on UTC
});

// --- Utility Functions ---

/**
* Parses a YYYY-MM-DD string into a UTC Date object.
* This avoids timezone and DST issues.
* @param {string} dateString - The date string (e.g., "2025-12-25")
* @returns {Date} A Date object set to midnight UTC.
*/
const parseUTCDate = (dateString) => {
if (!dateString) return null;
return new Date(dateString + 'T00:00:00Z');
};

/**
* Formats a Date object back to a YYYY-MM-DD string.
* @param {Date} date - The Date object.
* @returns {string} The date string (e.g., "2025-12-25").
*/
const toYYYYMMDD = (date) => {
return date.toISOString().split('T')[0];
};

/**
* Shows an A11y-compliant error message for a field.
* @param {HTMLElement} inputEl - The input element.
* @param {HTMLElement} errorEl - The error message container.
* @param {string} message - The error message to display.
*/
const showError = (inputEl, errorEl, message) => {
errorEl.textContent = message;
inputEl.setAttribute('aria-invalid', 'true');
inputEl.setAttribute('aria-describedby', errorEl.id);
};

/**
* Clears an error message for a field.
* @param {HTMLElement} inputEl - The input element.
* @param {HTMLElement} errorEl - The error message container.
*/
const clearError = (inputEl, errorEl) => {
errorEl.textContent = '';
inputEl.setAttribute('aria-invalid', 'false');
inputEl.removeAttribute('aria-describedby');
};

// --- Core Logic ---

/**
* Toggles the UI between 'Count' and 'Add/Subtract' modes.
*/
const toggleMode = () => {
const mode = document.querySelector('input[name="calcMode"]:checked').value;
if (mode === 'count') {
elements.endDateGroup.style.display = 'block';
elements.optionsGroup.style.display = 'block';
elements.daysAddGroup.style.display = 'none';
elements.endDate.setAttribute('aria-required', 'true');
elements.daysToAdd.setAttribute('aria-required', 'false');
} else {
elements.endDateGroup.style.display = 'none';
elements.optionsGroup.style.display = 'none';
elements.daysAddGroup.style.display = 'grid'; // Use grid for layout
elements.endDate.setAttribute('aria-required', 'false');
elements.daysToAdd.setAttribute('aria-required', 'true');
}
runCalculation();
};

/**
* Sets the default state of the calculator.
*/
const setDefaultState = () => {
elements.startDate.value = today;
const tomorrow = new Date(parseUTCDate(today).getTime() + MS_PER_DAY);
tomorrow.setUTCDate(tomorrow.getUTCDate() + 30); // Set end date 30 days out
elements.endDate.value = toYYYYMMDD(tomorrow);
elements.daysToAdd.value = '10';
elements.addSubtract.value = 'add';
elements.holidays.value = '2025-01-01\n2025-07-04\n2025-12-25';
elements.includeStartDate.checked = false;

// Set default weekends (Sat/Sun)
elements.weekends.forEach(checkbox => {
checkbox.checked = DEFAULT_WEEKENDS.has(parseInt(checkbox.value));
});

// Set default mode
document.getElementById('mode-count').checked = true;
toggleMode();
clearAllErrors();
resetResults();
};

/**
* Resets all error messages.
*/
const clearAllErrors = () => {
clearError(elements.startDate, elements.startDateError);
clearError(elements.endDate, elements.endDateError);
clearError(elements.daysToAdd, elements.daysToAddError);
clearError(elements.holidays, elements.holidaysError);
};

/**
* Resets the result cards to their placeholder state.
*/
const resetResults = () => {
elements.resultBusinessDays.textContent = '—';
elements.resultDate.textContent = '—';
elements.resultTotalDays.textContent = '—';
elements.resultWeekendDays.textContent = '—';
elements.resultBusinessDays.parentElement.classList.add('bg-gray-50', 'border-gray-200');
elements.resultDate.parentElement.classList.add('bg-gray-50', 'border-gray-200');
elements.resultTotalDays.parentElement.classList.add('bg-gray-50', 'border-gray-200');
elements.resultWeekendDays.parentElement.classList.add('bg-gray-50', 'border-gray-200');
elements.resultBusinessDays.classList.add('text-gray-400');
elements.resultDate.classList.add('text-gray-400');
elements.resultTotalDays.classList.add('text-gray-400');
elements.resultWeekendDays.classList.add('text-gray-400');
};

/**
* Gathers and validates all user inputs.
* @returns {object|null} A config object or null if validation fails.
*/
const parseInputs = ()_ => {
let isValid = true;
clearAllErrors();

const config = {
mode: document.querySelector('input[name="calcMode"]:checked').value,
startDate: parseUTCDate(elements.startDate.value),
endDate: parseUTCDate(elements.endDate.value),
daysToAdd: parseInt(elements.daysToAdd.value),
addSubtract: elements.addSubtract.value,
includeStartDate: elements.includeStartDate.checked,
weekends: new Set(),
holidays: new Set()
};

// Validate Start Date
if (!elements.startDate.value || !config.startDate) {
showError(elements.startDate, elements.startDateError, 'Start date is required.');
isValid = false;
}

// Validate Mode-Specific Fields
if (config.mode === 'count') {
if (!elements.endDate.value || !config.endDate) {
showError(elements.endDate, elements.endDateError, 'End date is required.');
isValid = false;
}
if (config.startDate && config.endDate && config.endDate < config.startDate) {
showError(elements.endDate, elements.endDateError, 'End date must be after start date.');
isValid = false;
}
} else { // 'add' mode
if (isNaN(config.daysToAdd) || config.daysToAdd < 1) {
showError(elements.daysToAdd, elements.daysToAddError, 'Must be a positive number.');
isValid = false;
}
}

// Parse Weekends
elements.weekends.forEach(checkbox => {
if (checkbox.checked) {
config.weekends.add(parseInt(checkbox.value));
}
});

// Parse Holidays
const holidayLines = elements.holidays.value.split('\n');
const holidayRegex = /^\d{4}-\d{2}-\d{2}$/;
let invalidHolidays = false;
holidayLines.forEach(line => {
const trimmedLine = line.trim();
if (trimmedLine) {
if (holidayRegex.test(trimmedLine)) {
config.holidays.add(trimmedLine);
} else {
invalidHolidays = true;
}
}
});
if (invalidHolidays) {
showError(elements.holidays, elements.holidaysError, 'Some dates are not in YYYY-MM-DD format. They will be ignored.');
// This is a soft error, so we don't set isValid = false
}

return isValid ? config : null;
};

/**
* Checks if a given date is a business day.
* @param {Date} date - The UTC Date object to check.
* @param {Set<number>} weekends - Set of weekend day numbers (0-6).
* @param {Set<string>} holidays - Set of holiday strings (YYYY-MM-DD).
* @returns {boolean} True if it's a business day.
*/
const isBusinessDay = (date, weekends, holidays) => {
// Check weekend
if (weekends.has(date.getUTCDay())) {
return false;
}
// Check holiday
if (holidays.has(toYYYYMMDD(date))) {
return false;
}
return true;
};

/**
* Main calculation driver.
*/
const runCalculation = () => {
const config = parseInputs();
if (!config) {
resetResults();
return;
}

let result;
if (config.mode === 'count') {
result = countDaysBetween(config);
displayCountResults(result);
} else {
result = addSubtractDays(config);
displayAddSubtractResults(result);
}
};

/**
* Logic for "Count Days Between" mode.
* @param {object} config - The validated input config.
* @returns {object} The result object.
*/
const countDaysBetween = (config) => {
let businessDays = 0;
let weekendDays = 0;
let holidayCount = 0;

// Calculate total calendar days
const totalDays = Math.round((config.endDate.getTime() - config.startDate.getTime()) / MS_PER_DAY);

const currentDate = new Date(config.startDate.getTime());

// Loop from start date up to (but not including) end date
for (let i = 0; i < totalDays; i++) {
// Determine which day to check based on includeStartDate
const dayToCheck = new Date(currentDate.getTime());
if (i === 0 && !config.includeStartDate) {
// On the first loop, if not including start date, skip it
currentDate.setUTCDate(currentDate.getUTCDate() + 1);
continue;
}

const isWorkday = isBusinessDay(dayToCheck, config.weekends, config.holidays);
const isWeekend = config.weekends.has(dayToCheck.getUTCDay());

if (isWorkday) {
businessDays++;
} else if (isWeekend) {
weekendDays++;
} else {
// It's not a weekend, but not a workday, so it must be a holiday
holidayCount++;
}

currentDate.setUTCDate(currentDate.getUTCDate() + 1);
}

// Special case: Check the end date separately
const isEndDateWorkday = isBusinessDay(config.endDate, config.weekends, config.holidays);
const isEndDateWeekend = config.weekends.has(config.endDate.getUTCDay());

if (isEndDateWorkday) {
businessDays++;
} else if (isEndDateWeekend) {
weekendDays++;
} else {
holidayCount++;
}

return { businessDays, weekendDays, totalDays: totalDays + 1, holidayCount };
};

/**
* Logic for "Add/Subtract Days" mode.
* @param {object} config - The validated input config.
* @returns {object} The result object.
*/
const addSubtractDays = (config) => {
let daysFound = 0;
let totalDaysElapsed = 0;
let weekendDays = 0;
let holidayCount = 0;

const currentDate = new Date(config.startDate.getTime());
const direction = (config.addSubtract === 'add') ? 1 : -1;

while (daysFound < config.daysToAdd) {
currentDate.setUTCDate(currentDate.getUTCDate() + direction);
totalDaysElapsed++;

const isWorkday = isBusinessDay(currentDate, config.weekends, config.holidays);

if (isWorkday) {
daysFound++;
} else {
if (config.weekends.has(currentDate.getUTCDay())) {
weekendDays++;
} else {
holidayCount++;
}
}
}

return {
resultDate: currentDate,
totalDays: totalDaysElapsed,
weekendDays,
holidayCount
};
};

/**
* Displays the results for "Count" mode.
* @param {object} result - The result object from countDaysBetween.
*/
const displayCountResults = (result) => {
elements.resultsContent.innerHTML = `
<div class="result-card col-span-1 sm:col-span-2">
<h4>Total Business Days</h4>
<p>${result.businessDays}</p>
</div>
<div class="result-card">
<h4>Total Calendar Days</h4>
<p>${result.totalDays}</p>
</div>
<div class="result-card">
<h4>Total Weekend Days</h4>
<p>${result.weekendDays}</p>
</div>
`;
};

/**
* Displays the results for "Add/Subtract" mode.
* @param {object} result - The result object from addSubtractDays.
*/
const displayAddSubtractResults = (result) => {
elements.resultsContent.innerHTML = `
<div class="result-card col-span-1 sm:col-span-2">
<h4>Resulting Date</h4>
<p class="text-2xl">${formatter.format(result.resultDate)}</p>
</div>
<div class="result-card">
<h4>Total Days Elapsed</h4>
<p>${result.totalDays}</p>
</div>
<div class="result-card">
<h4>Total Weekend Days</h4>
<p>${result.weekendDays}</p>
</div>
`;
};

/**
* Handles the accessible tooltip logic.
*/
const setupTooltip = () => {
let tooltipVisible = false;

const show = () => {
elements.tooltip.style.display = 'block';
tooltipVisible = true;
};
const hide = () => {
elements.tooltip.style.display = 'none';
tooltipVisible = false;
};

elements.tooltipBtn.addEventListener('click', () => {
tooltipVisible ? hide() : show();
});
elements.tooltipBtn.addEventListener('blur', hide);
elements.tooltipBtn.addEventListener('keydown', (e) => {
if (e.key === 'Escape') hide();
});
};

// --- Event Listeners ---
elements.form.addEventListener('submit', (e) => e.preventDefault());
elements.form.addEventListener('input', runCalculation);
elements.calcMode.forEach(radio => radio.addEventListener('change', toggleMode));
elements.resetButton.addEventListener('click', setDefaultState);

setupTooltip();

// --- KaTeX Rendering ---
// Render LaTeX after the DOM is ready
if (window.renderMathInElement) {
renderMathInElement(document.body, {
delimiters: [
{left: "$$", right: "$$", display: true},
{left: "$", right: "$", display: false},
{left: "\\(", right: "\\)", display: false},
{left: "\\[", right: "\\]", display: true}
]
});
}

// --- Initial Run ---
setDefaultState();
runCalculation(); // Run once on load
});
  </script>
  <script defer="True" src="/assets/js/script_menu.js">
  </script>
  <script defer="True" src="/assets/js/script_faq.js">
  </script>
  <script defer="True" src="search.js">
  </script>
 </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="canonical" href="https://calcdomain.com/refinance-calculator" />
    <title>Refinance Calculator Guide [Proven 2024] | CalcDomain</title>
    <meta name="description" content="Calculate Refinance Calculator Guide fast with our proven tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Refinance Calculator Guide [Proven 2024] | CalcDomain" />
    <meta property="og:description" content="Calculate Refinance Calculator Guide fast with our proven tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />
    <meta property="og:url" content="https://calcdomain.com/refinance-calculator" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Refinance Calculator Guide [Proven 2024] | CalcDomain" />
    <meta name="twitter:description" content="Calculate Refinance Calculator Guide fast with our proven tool. Get clear results, formulas, and tips - act now. No signup. Try it today. Free to use." />

    
    <link rel="preload" href="https://calcdomain.com/assets/tailwind.min.css" as="style">
    <link rel="stylesheet" href="https://calcdomain.com/assets/tailwind.min.css">
    <!-- Google tag (gtag.js) -->
    
    
    
    
    

    
  
    <style>
      body { margin: 0; }
      .mb-10 { margin-bottom: 2.5rem; }
      .mt-10 { margin-top: 2.5rem; }
    </style>
    <script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ugo Candido",
        "url": "https://www.linkedin.com/in/ugocandido92821/",
        "sameAs": ["https://www.linkedin.com/in/ugocandido92821/"],
        "email": "info@calcdomain.com",
        "description": "Ugo Candido builds calculators and educational resources to help readers make better decisions with transparent, practical models."
      }</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/"}, {"@type": "ListItem", "position": 2, "name": "Finance Calculators", "item": "https://calcdomain.com/categories/finance"}, {"@type": "ListItem", "position": 3, "name": "Loans &amp; Debt Calculators", "item": "https://calcdomain.com/subcategories/finance-loans-debt"}, {"@type": "ListItem", "position": 4, "name": "Refinance Calculator", "item": "https://calcdomain.com/refinance-calculator"}]}</script>
</head>
  <body class="bg-gray-50 text-gray-800">
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9476637732224939"
      crossorigin="anonymous"
    ></script>

    <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
        <div class="flex justify-between items-center">
          <a
            href="https://calcdomain.com"
            class="text-2xl font-bold text-blue-600"
            >CalcDomain</a
          >
          <div class="w-full max-w-md hidden md:block mx-8">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Search for a calculator..."
                class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                autocomplete="off"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
              <div
                id="search-results"
                class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"
              ></div>
            </div>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="https://calcdomain.com/search"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="text-gray-700 hover:text-blue-600 transition-colors"
              >Categories</a
            >
          </div>
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2"
            aria-controls="mobile-menu"
            aria-expanded="false"
            aria-label="Open menu"
            type="button"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
        <nav
          id="mobile-menu"
          class="md:hidden mt-4 hidden"
          aria-label="Mobile menu"
          role="navigation"
        >
          <div class="mb-4">
            <div class="relative">
              <input
                type="search"
                id="mobile-search-input"
                placeholder="Search calculators..."
                class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <svg
                class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="space-y-2">
            <a
              href="https://calcdomain.com/search"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Advanced Search</a
            >
            <a
              href="https://calcdomain.com/#categories"
              class="block py-2 text-gray-700 hover:text-blue-600"
              >Categories</a
            >
          </div>
        </nav>
      </nav>
    </header>

    <div class="container mx-auto px-4 py-8">
      <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600">
  <ol class="flex flex-wrap items-center gap-1">
    <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/categories/finance" class="text-blue-600 hover:underline">Finance Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><a href="https://calcdomain.com/subcategories/finance-loans-debt" class="text-blue-600 hover:underline">Loans &amp;amp; Debt Calculators</a></li>
    <li class="text-gray-400">/</li>
    <li><span class="text-gray-800">Refinance Calculator</span></li>
  </ol>
</nav>
      <div class="flex flex-col lg:flex-row gap-8">
        <main class="w-full lg:w-2/3">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <header class="mb-6">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">
                Refinance Calculator
              </h1>
              <p class="text-gray-600">
                Compare your current mortgage with a new loan, see monthly
                savings, break-even point, and total interest savings before you
                refinance.
              </p>
            </header>

            <!-- Calculator UI -->
            <section aria-label="Refinance calculator" class="space-y-6">
              <!-- Tabs: Simple vs Advanced -->
              <div class="flex flex-wrap gap-2 mb-2">
                <button
                  id="tab-simple"
                  type="button"
                  class="px-3 py-1.5 text-sm rounded-full bg-blue-600 text-white font-medium"
                >
                  Simple
                </button>
                <button
                  id="tab-advanced"
                  type="button"
                  class="px-3 py-1.5 text-sm rounded-full bg-gray-100 text-gray-700 font-medium"
                >
                  Advanced (with taxes &amp; insurance)
                </button>
              </div>

              <div class="grid md:grid-cols-2 gap-6">
                <!-- Current loan -->
                <div>
                  <h2 class="text-lg font-semibold mb-3">Current mortgage</h2>
                  <div class="space-y-3">
                    <div>
                      <label
                        for="current-balance"
                        class="block text-sm font-medium text-gray-700"
                        >Current loan balance</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <span
                          class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500"
                          >$</span
                        >
                        <input
                          id="current-balance"
                          type="number"
                          min="0"
                          step="1000"
                          class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-r-md focus:ring-blue-500 focus:border-blue-500"
                          value="300000"
                        />
                      </div>
                    </div>

                    <div>
                      <label
                        for="current-rate"
                        class="block text-sm font-medium text-gray-700"
                        >Current interest rate (APR)</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <input
                          id="current-rate"
                          type="number"
                          min="0"
                          max="25"
                          step="0.01"
                          class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500"
                          value="6.5"
                        />
                        <span
                          class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500"
                          >%</span
                        >
                      </div>
                    </div>

                    <div>
                      <label
                        for="current-term"
                        class="block text-sm font-medium text-gray-700"
                        >Original loan term</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <input
                          id="current-term"
                          type="number"
                          min="1"
                          max="40"
                          step="1"
                          class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500"
                          value="30"
                        />
                        <span
                          class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500"
                          >years</span
                        >
                      </div>
                    </div>

                    <div>
                      <label
                        for="years-paid"
                        class="block text-sm font-medium text-gray-700"
                        >Years already paid</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <input
                          id="years-paid"
                          type="number"
                          min="0"
                          max="40"
                          step="0.5"
                          class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500"
                          value="5"
                        />
                        <span
                          class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500"
                          >years</span
                        >
                      </div>
                      <p class="mt-1 text-xs text-gray-500">
                        Used to estimate remaining term and interest if you keep
                        your current loan.
                      </p>
                    </div>

                    <!-- Advanced: escrow -->
                    <div id="current-escrow-section" class="space-y-3 hidden">
                      <div>
                        <label
                          for="current-tax"
                          class="block text-sm font-medium text-gray-700"
                          >Monthly property tax (optional)</label
                        >
                        <div class="mt-1 flex rounded-md shadow-sm">
                          <span
                            class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500"
                            >$</span
                          >
                          <input
                            id="current-tax"
                            type="number"
                            min="0"
                            step="10"
                            class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-r-md focus:ring-blue-500 focus:border-blue-500"
                            value="400"
                          />
                        </div>
                      </div>
                      <div>
                        <label
                          for="current-insurance"
                          class="block text-sm font-medium text-gray-700"
                          >Monthly insurance (optional)</label
                        >
                        <div class="mt-1 flex rounded-md shadow-sm">
                          <span
                            class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500"
                            >$</span
                          >
                          <input
                            id="current-insurance"
                            type="number"
                            min="0"
                            step="10"
                            class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-r-md focus:ring-blue-500 focus:border-blue-500"
                            value="150"
                          />
                        </div>
                      </div>
                      <div>
                        <label
                          for="current-hoa"
                          class="block text-sm font-medium text-gray-700"
                          >Monthly HOA dues (optional)</label
                        >
                        <div class="mt-1 flex rounded-md shadow-sm">
                          <span
                            class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500"
                            >$</span
                          >
                          <input
                            id="current-hoa"
                            type="number"
                            min="0"
                            step="10"
                            class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-r-md focus:ring-blue-500 focus:border-blue-500"
                            value="0"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- New loan -->
                <div>
                  <h2 class="text-lg font-semibold mb-3">New refinance loan</h2>
                  <div class="space-y-3">
                    <div>
                      <label
                        for="new-rate"
                        class="block text-sm font-medium text-gray-700"
                        >New interest rate (APR)</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <input
                          id="new-rate"
                          type="number"
                          min="0"
                          max="25"
                          step="0.01"
                          class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500"
                          value="5.25"
                        />
                        <span
                          class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500"
                          >%</span
                        >
                      </div>
                    </div>

                    <div>
                      <label
                        for="new-term"
                        class="block text-sm font-medium text-gray-700"
                        >New loan term</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <input
                          id="new-term"
                          type="number"
                          min="1"
                          max="40"
                          step="1"
                          class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500"
                          value="25"
                        />
                        <span
                          class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500"
                          >years</span
                        >
                      </div>
                    </div>

                    <div>
                      <label
                        for="closing-costs"
                        class="block text-sm font-medium text-gray-700"
                        >Estimated closing costs</label
                      >
                      <div class="mt-1 flex rounded-md shadow-sm">
                        <span
                          class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500"
                          >$</span
                        >
                        <input
                          id="closing-costs"
                          type="number"
                          min="0"
                          step="100"
                          class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-r-md focus:ring-blue-500 focus:border-blue-500"
                          value="4000"
                        />
                      </div>
                      <p class="mt-1 text-xs text-gray-500">
                        Include lender fees, appraisal, title, and other closing
                        costs.
                      </p>
                    </div>

                    <div>
                      <span class="block text-sm font-medium text-gray-700 mb-1"
                        >How will you pay closing costs?</span
                      >
                      <div class="space-y-1">
                        <label
                          class="inline-flex items-center text-sm text-gray-700"
                        >
                          <input
                            type="radio"
                            name="cost-option"
                            value="cash"
                            class="text-blue-600 focus:ring-blue-500"
                            checked
                          />
                          <span class="ml-2"
                            >Pay out of pocket (loan amount = current
                            balance)</span
                          >
                        </label>
                        <label
                          class="inline-flex items-center text-sm text-gray-700"
                        >
                          <input
                            type="radio"
                            name="cost-option"
                            value="roll"
                            class="text-blue-600 focus:ring-blue-500"
                          />
                          <span class="ml-2"
                            >Roll into new loan (loan amount = balance +
                            costs)</span
                          >
                        </label>
                      </div>
                    </div>

                    <!-- Advanced: escrow new -->
                    <div id="new-escrow-section" class="space-y-3 hidden">
                      <div>
                        <label
                          for="new-tax"
                          class="block text-sm font-medium text-gray-700"
                          >Monthly property tax (optional)</label
                        >
                        <div class="mt-1 flex rounded-md shadow-sm">
                          <span
                            class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500"
                            >$</span
                          >
                          <input
                            id="new-tax"
                            type="number"
                            min="0"
                            step="10"
                            class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-r-md focus:ring-blue-500 focus:border-blue-500"
                            value="400"
                          />
                        </div>
                      </div>
                      <div>
                        <label
                          for="new-insurance"
                          class="block text-sm font-medium text-gray-700"
                          >Monthly insurance (optional)</label
                        >
                        <div class="mt-1 flex rounded-md shadow-sm">
                          <span
                            class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500"
                            >$</span
                          >
                          <input
                            id="new-insurance"
                            type="number"
                            min="0"
                            step="10"
                            class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-r-md focus:ring-blue-500 focus:border-blue-500"
                            value="150"
                          />
                        </div>
                      </div>
                      <div>
                        <label
                          for="new-hoa"
                          class="block text-sm font-medium text-gray-700"
                          >Monthly HOA dues (optional)</label
                        >
                        <div class="mt-1 flex rounded-md shadow-sm">
                          <span
                            class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500"
                            >$</span
                          >
                          <input
                            id="new-hoa"
                            type="number"
                            min="0"
                            step="10"
                            class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-r-md focus:ring-blue-500 focus:border-blue-500"
                            value="0"
                          />
                        </div>
                      </div>
                    </div>

                    <div class="pt-2 border-t border-gray-100 mt-2">
                      <label
                        class="inline-flex items-center text-sm text-gray-700"
                      >
                        <input
                          id="extra-payment-toggle"
                          type="checkbox"
                          class="text-blue-600 focus:ring-blue-500"
                        />
                        <span class="ml-2"
                          >Include extra principal payment on new loan</span
                        >
                      </label>
                      <div id="extra-payment-section" class="mt-2 hidden">
                        <label
                          for="extra-payment"
                          class="block text-sm font-medium text-gray-700"
                          >Extra principal each month</label
                        >
                        <div class="mt-1 flex rounded-md shadow-sm">
                          <span
                            class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500"
                            >$</span
                          >
                          <input
                            id="extra-payment"
                            type="number"
                            min="0"
                            step="25"
                            class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-r-md focus:ring-blue-500 focus:border-blue-500"
                            value="100"
                          />
                        </div>
                        <p class="mt-1 text-xs text-gray-500">
                          We’ll estimate how much sooner you could pay off the
                          refinance loan.
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Action -->
              <div class="flex flex-wrap items-center gap-3 mt-2">
                <button
                  id="calc-btn"
                  type="button"
                  class="inline-flex items-center px-5 py-2.5 border border-transparent text-sm font-semibold rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                >
                  Calculate refinance savings
                </button>
                <button
                  id="reset-btn"
                  type="button"
                  class="text-sm text-gray-600 hover:text-gray-800 underline"
                >
                  Reset
                </button>
                <p id="error-msg" class="text-sm text-red-600"></p>
              </div>
            </section>

            <!-- Results -->
            <section
              id="results-section"
              class="mt-8 hidden"
              aria-label="Refinance results"
            >
              <h2 class="text-xl font-semibold mb-4">Refinance summary</h2>

              <div class="grid md:grid-cols-3 gap-4 mb-6">
                <div class="bg-blue-50 border border-blue-100 rounded-lg p-4">
                  <div class="result-label mb-1">
                    Monthly payment (principal &amp; interest)
                  </div>
                  <div class="text-sm text-gray-600">
                    Current:
                    <span
                      id="res-current-pi"
                      class="font-semibold text-gray-900"
                      >$0</span
                    >
                  </div>
                  <div class="text-sm text-gray-600">
                    New:
                    <span id="res-new-pi" class="font-semibold text-gray-900"
                      >$0</span
                    >
                  </div>
                  <div class="mt-2 text-sm">
                    <span class="font-semibold" id="res-monthly-diff">$0</span>
                    <span id="res-monthly-diff-label" class="text-gray-700"
                      >/month savings</span
                    >
                  </div>
                </div>

                <div class="bg-green-50 border border-green-100 rounded-lg p-4">
                  <div class="result-label mb-1">Total interest comparison</div>
                  <div class="text-sm text-gray-600">
                    Keep current:
                    <span
                      id="res-current-interest"
                      class="font-semibold text-gray-900"
                      >$0</span
                    >
                  </div>
                  <div class="text-sm text-gray-600">
                    Refinance:
                    <span
                      id="res-new-interest"
                      class="font-semibold text-gray-900"
                      >$0</span
                    >
                  </div>
                  <div class="mt-2 text-sm">
                    <span
                      id="res-interest-savings"
                      class="font-semibold text-green-700"
                      >$0</span
                    >
                    <span class="text-gray-700"> total interest savings</span>
                  </div>
                </div>

                <div
                  class="bg-yellow-50 border border-yellow-100 rounded-lg p-4"
                >
                  <div class="result-label mb-1">Break-even &amp; payoff</div>
                  <div class="text-sm text-gray-600">
                    Break-even in:
                    <span id="res-breakeven" class="font-semibold text-gray-900"
                      >–</span
                    >
                  </div>
                  <div class="text-sm text-gray-600">
                    Current payoff:
                    <span
                      id="res-current-years"
                      class="font-semibold text-gray-900"
                      >–</span
                    >
                  </div>
                  <div class="text-sm text-gray-600">
                    New payoff:
                    <span id="res-new-years" class="font-semibold text-gray-900"
                      >–</span
                    >
                  </div>
                  <div
                    class="mt-1 text-xs text-gray-500"
                    id="res-payoff-note"
                  ></div>
                </div>
              </div>

              <!-- Escrow comparison (advanced) -->
              <div id="escrow-results" class="mb-6 hidden">
                <h3 class="text-lg font-semibold mb-2">
                  Total monthly housing payment (PITI + HOA)
                </h3>
                <div class="grid md:grid-cols-3 gap-4">
                  <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                    <div class="result-label mb-1">Current total</div>
                    <div
                      class="text-2xl font-semibold text-gray-900"
                      id="res-current-total"
                    >
                      $0
                    </div>
                  </div>
                  <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                    <div class="result-label mb-1">New total</div>
                    <div
                      class="text-2xl font-semibold text-gray-900"
                      id="res-new-total"
                    >
                      $0
                    </div>
                  </div>
                  <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                    <div class="result-label mb-1">Net monthly change</div>
                    <div class="text-2xl font-semibold" id="res-total-diff">
                      $0
                    </div>
                  </div>
                </div>
              </div>

              <!-- Extra payment impact -->
              <div id="extra-results" class="mb-6 hidden">
                <h3 class="text-lg font-semibold mb-2">
                  Impact of extra payments on refinance
                </h3>
                <p class="text-sm text-gray-600 mb-2">
                  With your extra monthly principal payment, you could:
                </p>
                <ul
                  class="list-disc list-inside text-sm text-gray-700 space-y-1"
                >
                  <li>
                    Pay off the new loan in
                    <span id="res-extra-years" class="font-semibold">–</span>
                    instead of
                    <span id="res-new-years-plain" class="font-semibold">–</span
                    >.
                  </li>
                  <li>
                    Save an additional
                    <span id="res-extra-interest-saved" class="font-semibold"
                      >$0</span
                    >
                    in interest on top of the refinance savings.
                  </li>
                </ul>
              </div>

              <!-- Amortization summary -->
              <details class="mt-4">
                <summary
                  class="cursor-pointer text-sm text-blue-600 hover:underline"
                >
                  Show amortization details (summary)
                </summary>
                <div
                  class="mt-3 grid md:grid-cols-2 gap-4 text-sm text-gray-700"
                >
                  <div class="bg-white border border-gray-200 rounded-lg p-3">
                    <h4 class="font-semibold mb-1">
                      If you keep your current loan
                    </h4>
                    <ul class="list-disc list-inside space-y-1">
                      <li>
                        Remaining term: <span id="det-current-term">–</span>
                      </li>
                      <li>
                        Remaining payments:
                        <span id="det-current-payments">–</span>
                      </li>
                      <li>
                        Total remaining cost (principal + interest):
                        <span id="det-current-total">$0</span>
                      </li>
                    </ul>
                  </div>
                  <div class="bg-white border border-gray-200 rounded-lg p-3">
                    <h4 class="font-semibold mb-1">If you refinance</h4>
                    <ul class="list-disc list-inside space-y-1">
                      <li>New term: <span id="det-new-term">–</span></li>
                      <li>
                        Payments on new loan:
                        <span id="det-new-payments">–</span>
                      </li>
                      <li>
                        Total cost of new loan (principal + interest):
                        <span id="det-new-total">$0</span>
                      </li>
                      <li>
                        Total refinance costs paid:
                        <span id="det-costs">$0</span>
                      </li>
                    </ul>
                  </div>
                </div>
              </details>
            </section>

            <!-- Explanatory content -->
            <section class="prose mt-10">
              <h2>How this refinance calculator works</h2>
              <p>
                This refinance calculator compares your existing mortgage with a
                potential new loan. It estimates:
              </p>
              <ul>
                <li>Your current monthly principal &amp; interest payment.</li>
                <li>
                  Your new monthly payment at the refinance rate and term.
                </li>
                <li>Monthly savings (or increase) from refinancing.</li>
                <li>
                  Total interest you would pay if you keep your current loan vs.
                  refinance.
                </li>
                <li>
                  Your break-even point based on closing costs and monthly
                  savings.
                </li>
                <li>
                  How your payoff date changes, including the effect of extra
                  payments.
                </li>
              </ul>

              <h3>Key formulas used</h3>
              <p>
                The calculator uses the standard fixed-rate mortgage payment
                formula.
              </p>
              <div class="formula-box">
                <p>
                  <strong>Monthly payment (principal &amp; interest):</strong>
                </p>
                <p>Let:</p>
                <ul>
                  <li>\( P \) = loan principal (amount borrowed)</li>
                  <li>\( r \) = monthly interest rate = annual rate / 12</li>
                  <li>
                    \( n \) = total number of monthly payments (years × 12)
                  </li>
                </ul>
                <p>Then the monthly payment is:</p>
                <p>\[ M = P \cdot \frac{r(1+r)^n}{(1+r)^n - 1} \]</p>
              </div>

              <p>
                <strong>Remaining balance</strong> after \( k \) payments on a
                fixed-rate loan:
              </p>
              <div class="formula-box">
                <p>\[ B_k = P(1+r)^k - M \cdot \frac{(1+r)^k - 1}{r} \]</p>
                <p>
                  We use this to estimate your remaining balance and remaining
                  term on the current mortgage.
                </p>
              </div>

              <p>
                <strong>Total interest</strong> over the remaining life of a
                loan is:
              </p>
              <div class="formula-box">
                <p>\[ \text{Total Interest} = M \cdot n - P \]</p>
              </div>

              <p><strong>Break-even point</strong> in months is:</p>
              <div class="formula-box">
                <p>
                  \[ \text{Break-even (months)} = \frac{\text{Closing
                  Costs}}{\text{Monthly Savings}} \]
                </p>
                <p>
                  We convert this to years and months for easier interpretation.
                </p>
              </div>

              <h2>How to read your refinance results</h2>
              <h3>1. Monthly payment comparison</h3>
              <p>
                The first card shows your current vs. new monthly
                <strong>principal &amp; interest</strong> payment and the
                difference. A lower payment can improve cash flow, but if you
                extend your term significantly you might pay more interest
                overall.
              </p>

              <h3>2. Total interest savings</h3>
              <p>
                This is the most important long-term metric. It compares the
                total interest you would pay if you keep your current loan
                versus refinancing (including any rolled-in closing costs). A
                positive number means refinancing reduces your lifetime interest
                cost.
              </p>

              <h3>3. Break-even point</h3>
              <p>
                The break-even point tells you how long it takes for your
                monthly savings to recover the upfront refinance costs. If you
                plan to sell or move before this time, refinancing may not be
                worthwhile.
              </p>

              <h3>4. Payoff date impact</h3>
              <p>
                Refinancing into a new 30-year term when you already have, for
                example, 25 years left will usually
                <strong>extend</strong> your payoff date. You can avoid this by
                choosing a shorter term (like 15 or 20 years) or by making extra
                principal payments.
              </p>

              <h3>5. Extra payments</h3>
              <p>
                Turning on the extra payment option shows how much faster you
                could pay off the refinance loan and how much additional
                interest you would save. Even a modest extra payment each month
                can shave years off your mortgage.
              </p>

              <h2>When does refinancing make sense?</h2>
              <ul>
                <li>
                  <strong>You can lower your rate</strong> by ~0.5–1.0
                  percentage point or more.
                </li>
                <li>
                  <strong>You plan to keep the home</strong> beyond the
                  break-even period.
                </li>
                <li>
                  <strong>You are not dramatically extending</strong> your loan
                  term (unless your main goal is cash flow relief).
                </li>
                <li>
                  You want to
                  <strong>switch from an ARM to a fixed rate</strong> for
                  stability.
                </li>
                <li>
                  You want to <strong>shorten your term</strong> (e.g., 30-year
                  to 15-year) and can afford the higher payment.
                </li>
              </ul>

              <h2>Limitations and assumptions</h2>
              <ul>
                <li>
                  Assumes a standard fixed-rate mortgage with level payments.
                </li>
                <li>Assumes payments are made monthly and on time.</li>
                <li>
                  Does not model prepayment penalties, points, or tax effects.
                </li>
                <li>
                  Property taxes, insurance, and HOA are treated as fixed
                  monthly amounts.
                </li>
              </ul>

              <p class="text-sm text-gray-500">
                This tool is for educational purposes only and does not
                constitute financial advice. Always review actual lender offers
                and consider speaking with a qualified mortgage professional
                before refinancing.
              </p>

              <h2>Frequently asked questions</h2>

              <h3>How accurate is this refinance calculator?</h3>
              <p>
                The math for payments, interest, and break-even is the same as
                lenders use for fixed-rate loans. However, your actual costs can
                differ based on points, fees, and specific loan features. Use
                this as a planning tool, then compare it with official loan
                estimates from lenders.
              </p>

              <h3>Should I refinance to a longer term to lower my payment?</h3>
              <p>
                Extending your term (for example, from 25 years remaining back
                to 30 years) can significantly reduce your monthly payment, but
                usually increases total interest paid. This can still be
                reasonable if you need cash flow relief, but consider making
                extra payments later when your budget allows.
              </p>

              <h3>
                What if my refinance payment is higher but I still save
                interest?
              </h3>
              <p>
                If you refinance into a shorter term (like 15 years), your
                monthly payment may go up even at a lower rate. In that case,
                you are trading higher monthly payments for a much faster payoff
                and lower total interest. The calculator will show this as
                negative “monthly savings” but positive “total interest
                savings.”
              </p>
            </section>
          </div>



            <section class="mt-10" id="author">
              <h2 class="text-xl font-semibold mb-4">About the author</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  <a href="https://www.linkedin.com/in/ugocandido92821/" class="text-blue-600 hover:underline" target="_blank" rel="noopener">Ugo Candido</a>
                  builds financial tools and educational resources to help
                  readers make better money decisions. He focuses on practical,
                  transparent models that reflect how lenders calculate
                  payments and total cost of ownership.
                </p>
                <p class="text-sm text-gray-700 mt-3">
                  Contact: <a href="mailto:info@calcdomain.com" class="text-blue-600 hover:underline">info@calcdomain.com</a>
                </p>
              </div>
            </section>

            <section class="mt-10" id="editorial-policy">
              <h2 class="text-xl font-semibold mb-4">Editorial policy</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  CalcDomain content is created for educational purposes and is
                  reviewed for clarity, accuracy, and transparency. We do not
                  accept paid placements that influence calculator outputs.
                  Inputs and assumptions are shown directly in the interface so
                  you can verify how results are produced.
                </p>
              </div>
            </section>

            <section class="mt-10" id="methodology">
              <h2 class="text-xl font-semibold mb-4">Methodology</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p class="text-sm text-gray-700">
                  Results use standard formulas and the values you provide.
                  Figures are estimates and may differ from lender quotes.
                  For decisions that require professional guidance, consult a
                  licensed advisor.
                </p>
              </div>
            </section>

        
            <section class="mt-10" id="sources">
              <h2 class="text-xl font-semibold mb-4">Sources</h2>
              <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                  <li>
                    <a href="https://www.nist.gov/pml/owm/metric-si/si-units" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      NIST: The International System of Units (SI)
                    </a>
                  </li>
                  <li>
                    <a href="https://openstax.org/details/books/college-algebra" class="text-blue-600 hover:underline" target="_blank" rel="noopener">
                      OpenStax: College Algebra
                    </a>
                  </li>
                </ul>
              </div>
            </section>

        





<section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Refinance, Calculator, Current loan balance $ Current interest rate (APR) % Original loan term years Years already paid years Used to estimate remaining term and interest if you keep your current loan. Monthly property tax (optional) $ Monthly insurance (optional) $ Monthly HOA dues (optional) $ New refinance loan New interest rate (APR) % New loan term years Estimated closing costs $ Include lender fees, appraisal, title, and other closing costs. How will you pay closing costs? Pay out of pocket (loan amount = current balance), Roll into new loan (loan amount = balance + costs), Monthly property tax (optional) $ Monthly insurance (optional) $ Monthly HOA dues (optional) $ Include extra principal payment on new loan.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Current loan balance $ Current interest rate (APR) % Original loan term years Years already paid years Used to estimate remaining term and interest if you keep your current loan. Monthly property tax (optional) $ Monthly insurance (optional) $ Monthly HOA dues (optional) $ New refinance loan New interest rate (APR) % New loan term years Estimated closing costs $ Include lender fees, appraisal, title, and other closing costs. How will you pay closing costs? Pay out of pocket (loan amount = current balance)</li><li>Roll into new loan (loan amount = balance + costs)</li><li>Monthly property tax (optional) $ Monthly insurance (optional) $ Monthly HOA dues (optional) $ Include extra principal payment on new loan</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Financial notes</h2><p class="text-sm text-gray-700">Enter annualized rates consistent with the period (monthly/annual). Separate gross vs. net cash flows and apply end-of-period timing assumptions.</p><p class="text-sm text-gray-700 mt-2">Key entities: Refinance, Calculator, Current loan balance $ Current interest rate (APR) % Original loan term years Years already paid years Used to estimate remaining term and interest if you keep your current loan. Monthly property tax (optional) $ Monthly insurance (optional) $ Monthly HOA dues (optional) $ New refinance loan New interest rate (APR) % New loan term years Estimated closing costs $ Include lender fees, appraisal, title, and other closing costs. How will you pay closing costs? Pay out of pocket (loan amount = current balance), Roll into new loan (loan amount = balance + costs), Monthly property tax (optional) $ Monthly insurance (optional) $ Monthly HOA dues (optional) $ Include extra principal payment on new loan.</p></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Inputs used by this calculator</h2><ul class="text-sm text-gray-700 list-disc pl-5"><li>Current loan balance $ Current interest rate (APR) % Original loan term years Years already paid years Used to estimate remaining term and interest if you keep your current loan. Monthly property tax (optional) $ Monthly insurance (optional) $ Monthly HOA dues (optional) $ New refinance loan New interest rate (APR) % New loan term years Estimated closing costs $ Include lender fees, appraisal, title, and other closing costs. How will you pay closing costs? Pay out of pocket (loan amount = current balance)</li><li>Roll into new loan (loan amount = balance + costs)</li><li>Monthly property tax (optional) $ Monthly insurance (optional) $ Monthly HOA dues (optional) $ Include extra principal payment on new loan</li></ul></section><section class="bg-white p-4 rounded-lg shadow-md mt-6"><h2 class="text-lg font-semibold mb-2">Consistency checks</h2><p class="text-sm text-gray-700">Checks: rates > 0, consistent cash flows, period and rate alignment.</p></section><!-- %%EEAT_STRIP%% -->
<!-- %%QUALITY_BLOCKS%% -->
<!-- %%FAQ_JSONLD%% -->
</main>
        <aside class="w-full lg:w-1/3">
          <div class="bg-white p-4 rounded-lg shadow-md mb-6">
            <h2 class="text-lg font-semibold mb-3">
              More mortgage &amp; refinance tools
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-blue-600 hover:underline"
                  >Mortgage Payment Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mortgage-affordability-calculator"
                  class="text-blue-600 hover:underline"
                  >Mortgage Affordability Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-blue-600 hover:underline"
                  >House Affordability Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/rent-vs-buy"
                  class="text-blue-600 hover:underline"
                  >Rent vs. Buy Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/biweekly-mortgage"
                  class="text-blue-600 hover:underline"
                  >Biweekly Mortgage Payment Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/mortgage-refinance"
                  class="text-blue-600 hover:underline"
                  >Mortgage Refinance Guide</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/closing-costs"
                  class="text-blue-600 hover:underline"
                  >Closing Costs Estimator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/70-rule"
                  class="text-blue-600 hover:underline"
                  >70% Rule (House Flipping)</a
                >
              </li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-3">
              Popular finance calculators
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="https://calcdomain.com/compound-interest-calculator"
                  class="text-blue-600 hover:underline"
                  >Compound Interest Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-blue-600 hover:underline"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/loan-amortization"
                  class="text-blue-600 hover:underline"
                  >Loan Amortization Schedule</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/roi"
                  class="text-blue-600 hover:underline"
                  >Investment Return (ROI)</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/50-30-20-budget"
                  class="text-blue-600 hover:underline"
                  >50/30/20 Budget Calculator</a
                >
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
            <p class="text-gray-400 mb-4">
              Your trusted source for free online calculators. Accurate, fast,
              and reliable calculations for every need.
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Categories</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/finance"
                  class="text-gray-400 hover:text-white"
                  >Finance</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/health-fitness"
                  class="text-gray-400 hover:text-white"
                  >Health & Fitness</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/math-conversions"
                  class="text-gray-400 hover:text-white"
                  >Math & Conversions</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/lifestyle-everyday"
                  class="text-gray-400 hover:text-white"
                  >Lifestyle & Everyday</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/construction-diy"
                  class="text-gray-400 hover:text-white"
                  >Construction & DIY</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/mortgage-payment"
                  class="text-gray-400 hover:text-white"
                  >Mortgage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/percentage-calculator"
                  class="text-gray-400 hover:text-white"
                  >Percentage Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/bmi-calculator"
                  class="text-gray-400 hover:text-white"
                  >BMI Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/auto-loan-calculator"
                  class="text-gray-400 hover:text-white"
                  >Auto Loan Calculator</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/house-affordability"
                  class="text-gray-400 hover:text-white"
                  >House Affordability</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Support</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="https://calcdomain.com/about"
                  class="text-gray-400 hover:text-white"
                  >About Us</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/contact"
                  class="text-gray-400 hover:text-white"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/privacy"
                  class="text-gray-400 hover:text-white"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/terms"
                  class="text-gray-400 hover:text-white"
                  >Terms of Service</a
                >
              </li>
              <li>
                <a
                  href="https://calcdomain.com/sitemap.xml"
                  class="text-gray-400 hover:text-white"
                  >Site Map</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; 2025 CalcDomain. All Rights Reserved. | Free Online
            Calculators for Everyone
          </p>
        </div>
      </div>
    </footer>

    <script src="/assets/js/mobile-menu.js"></script>
    <script src="/search.js"></script>

    <script>
      // Utility functions
      function fmtMoney(v) {
        if (!isFinite(v)) return "$0";
        const sign = v < 0 ? "-" : "";
        v = Math.abs(v);
        return (
          sign +
          v.toLocaleString(undefined, {
            minimumFractionDigits: 0,
            maximumFractionDigits: 0,
            style: "currency",
            currency: "USD",
          })
        );
      }
      function fmtMoney2(v) {
        if (!isFinite(v)) return "$0";
        const sign = v < 0 ? "-" : "";
        v = Math.abs(v);
        return (
          sign +
          v.toLocaleString(undefined, {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
            style: "currency",
            currency: "USD",
          })
        );
      }
      function fmtYearsMonths(months) {
        if (!isFinite(months)) return "–";
        const totalMonths = Math.round(months);
        const y = Math.floor(totalMonths / 12);
        const m = totalMonths % 12;
        const parts = [];
        if (y > 0) parts.push(y + " year" + (y !== 1 ? "s" : ""));
        if (m > 0) parts.push(m + " month" + (m !== 1 ? "s" : ""));
        return parts.length ? parts.join(" ") : "0 months";
      }

      function payment(P, annualRate, years) {
        const n = years * 12;
        if (n <= 0) return 0;
        const r = annualRate / 100 / 12;
        if (r === 0) return P / n;
        const pow = Math.pow(1 + r, n);
        return (P * r * pow) / (pow - 1);
      }

      function remainingBalance(P, annualRate, years, yearsPaid) {
        const n = years * 12;
        const k = Math.min(yearsPaid * 12, n);
        const r = annualRate / 100 / 12;
        if (r === 0) {
          const principalPaid = (P / n) * k;
          return Math.max(P - principalPaid, 0);
        }
        const M = payment(P, annualRate, years);
        const pow = Math.pow(1 + r, k);
        const B = P * pow - (M * (pow - 1)) / r;
        return Math.max(B, 0);
      }

      function termFromBalance(balance, annualRate, paymentAmount) {
        const r = annualRate / 100 / 12;
        if (r === 0) {
          if (paymentAmount <= 0) return Infinity;
          return balance / paymentAmount;
        }
        if (paymentAmount <= balance * r) return Infinity; // payment too small
        const n =
          Math.log(paymentAmount / (paymentAmount - balance * r)) /
          Math.log(1 + r);
        return n;
      }

      function totalInterest(P, annualRate, years) {
        const n = years * 12;
        const M = payment(P, annualRate, years);
        return M * n - P;
      }

      function totalInterestFromBalance(balance, annualRate, yearsRemaining) {
        const n = yearsRemaining * 12;
        const M = payment(balance, annualRate, yearsRemaining);
        return M * n - balance;
      }

      function totalInterestWithExtra(P, annualRate, years, extra) {
        const r = annualRate / 100 / 12;
        const baseM = payment(P, annualRate, years);
        const M = baseM + extra;
        if (M <= 0) return { months: Infinity, interest: 0 };
        if (r === 0) {
          const months = P / M;
          const totalPaid = M * months;
          return { months, interest: totalPaid - P };
        }
        if (M <= P * r) {
          return { months: Infinity, interest: Infinity };
        }
        const n = Math.log(M / (M - P * r)) / Math.log(1 + r);
        const totalPaid = M * n;
        return { months: n, interest: totalPaid - P };
      }

      document.addEventListener("DOMContentLoaded", function () {
        const tabSimple = document.getElementById("tab-simple");
        const tabAdvanced = document.getElementById("tab-advanced");
        const currentEscrow = document.getElementById("current-escrow-section");
        const newEscrow = document.getElementById("new-escrow-section");
        const escrowResults = document.getElementById("escrow-results");

        function setMode(mode) {
          const isAdvanced = mode === "advanced";
          currentEscrow.classList.toggle("hidden", !isAdvanced);
          newEscrow.classList.toggle("hidden", !isAdvanced);
          escrowResults.classList.toggle("hidden", !isAdvanced);

          if (isAdvanced) {
            tabAdvanced.classList.remove("bg-gray-100", "text-gray-700");
            tabAdvanced.classList.add("bg-blue-600", "text-white");
            tabSimple.classList.remove("bg-blue-600", "text-white");
            tabSimple.classList.add("bg-gray-100", "text-gray-700");
          } else {
            tabSimple.classList.remove("bg-gray-100", "text-gray-700");
            tabSimple.classList.add("bg-blue-600", "text-white");
            tabAdvanced.classList.remove("bg-blue-600", "text-white");
            tabAdvanced.classList.add("bg-gray-100", "text-gray-700");
          }
        }

        tabSimple.addEventListener("click", () => setMode("simple"));
        tabAdvanced.addEventListener("click", () => setMode("advanced"));

        // Extra payment toggle
        const extraToggle = document.getElementById("extra-payment-toggle");
        const extraSection = document.getElementById("extra-payment-section");
        const extraResults = document.getElementById("extra-results");
        extraToggle.addEventListener("change", () => {
          const on = extraToggle.checked;
          extraSection.classList.toggle("hidden", !on);
          if (!on) extraResults.classList.add("hidden");
        });

        const calcBtn = document.getElementById("calc-btn");
        const resetBtn = document.getElementById("reset-btn");
        const errorMsg = document.getElementById("error-msg");
        const resultsSection = document.getElementById("results-section");

        function calculate() {
          errorMsg.textContent = "";

          const currentBalance = parseFloat(
            document.getElementById("current-balance").value
          );
          const currentRate = parseFloat(
            document.getElementById("current-rate").value
          );
          const currentTerm = parseFloat(
            document.getElementById("current-term").value
          );
          const yearsPaid =
            parseFloat(document.getElementById("years-paid").value) || 0;

          const newRate = parseFloat(document.getElementById("new-rate").value);
          const newTerm = parseFloat(document.getElementById("new-term").value);
          const closingCosts =
            parseFloat(document.getElementById("closing-costs").value) || 0;

          if (
            !currentBalance ||
            currentBalance <= 0 ||
            !currentRate ||
            currentRate <= 0 ||
            !currentTerm ||
            currentTerm <= 0 ||
            !newRate ||
            newRate <= 0 ||
            !newTerm ||
            newTerm <= 0
          ) {
            errorMsg.textContent =
              "Please enter positive values for loan amounts, rates, and terms.";
            resultsSection.classList.add("hidden");
            return;
          }
          if (yearsPaid < 0 || yearsPaid > currentTerm) {
            errorMsg.textContent =
              "Years already paid must be between 0 and the original loan term.";
            resultsSection.classList.add("hidden");
            return;
          }

          const costOption =
            document.querySelector('input[name="cost-option"]:checked')
              ?.value || "cash";

          // Remaining balance on current loan
          const remainingBal = remainingBalance(
            currentBalance,
            currentRate,
            currentTerm,
            yearsPaid
          );
          const remainingYears = currentTerm - yearsPaid;
          const remainingYearsClamped = Math.max(remainingYears, 0.01);

          const currentPI = payment(
            remainingBal,
            currentRate,
            remainingYearsClamped
          );

          // New loan principal
          const newPrincipal =
            costOption === "roll" ? remainingBal + closingCosts : remainingBal;
          const newPI = payment(newPrincipal, newRate, newTerm);

          // Total interest comparisons
          const currentInterest = totalInterestFromBalance(
            remainingBal,
            currentRate,
            remainingYearsClamped
          );
          const newInterest = totalInterest(newPrincipal, newRate, newTerm);

          const interestSavings = currentInterest - newInterest;

          // Monthly savings (PI only)
          const monthlyDiff = currentPI - newPI;

          // Break-even
          let breakevenText = "–";
          if (monthlyDiff > 0 && closingCosts > 0) {
            const months = closingCosts / monthlyDiff;
            breakevenText = fmtYearsMonths(months);
          } else if (closingCosts === 0) {
            breakevenText = "No closing costs";
          } else if (monthlyDiff <= 0) {
            breakevenText = "No payment savings";
          }

          // Payoff dates
          const currentMonthsRemaining = remainingYearsClamped * 12;
          const newMonths = newTerm * 12;

          // Escrow totals (advanced mode)
          const isAdvanced = !currentEscrow.classList.contains("hidden");
          let currentTotal = currentPI;
          let newTotal = newPI;
          if (isAdvanced) {
            const cTax =
              parseFloat(document.getElementById("current-tax").value) || 0;
            const cIns =
              parseFloat(document.getElementById("current-insurance").value) ||
              0;
            const cHoa =
              parseFloat(document.getElementById("current-hoa").value) || 0;
            const nTax =
              parseFloat(document.getElementById("new-tax").value) || 0;
            const nIns =
              parseFloat(document.getElementById("new-insurance").value) || 0;
            const nHoa =
              parseFloat(document.getElementById("new-hoa").value) || 0;
            currentTotal += cTax + cIns + cHoa;
            newTotal += nTax + nIns + nHoa;
          }

          // Extra payment impact
          let extraInfo = null;
          if (extraToggle.checked) {
            const extra =
              parseFloat(document.getElementById("extra-payment").value) || 0;
            if (extra > 0) {
              const extraRes = totalInterestWithExtra(
                newPrincipal,
                newRate,
                newTerm,
                extra
              );
              extraInfo = extraRes;
            }
          }

          // Update UI
          document.getElementById("res-current-pi").textContent =
            fmtMoney2(currentPI);
          document.getElementById("res-new-pi").textContent = fmtMoney2(newPI);

          const diffLabel = document.getElementById("res-monthly-diff");
          const diffTextLabel = document.getElementById(
            "res-monthly-diff-label"
          );
          diffLabel.textContent = fmtMoney2(Math.abs(monthlyDiff));
          if (monthlyDiff > 0) {
            diffLabel.classList.remove("text-red-700");
            diffLabel.classList.add("text-green-700");
            diffTextLabel.textContent = "/month savings";
          } else if (monthlyDiff < 0) {
            diffLabel.classList.remove("text-green-700");
            diffLabel.classList.add("text-red-700");
            diffTextLabel.textContent = "/month higher payment";
          } else {
            diffLabel.classList.remove("text-green-700", "text-red-700");
            diffTextLabel.textContent = "no change";
          }

          document.getElementById("res-current-interest").textContent =
            fmtMoney2(currentInterest);
          document.getElementById("res-new-interest").textContent =
            fmtMoney2(newInterest);

          const intSavEl = document.getElementById("res-interest-savings");
          intSavEl.textContent = fmtMoney2(Math.abs(interestSavings));
          if (interestSavings > 0) {
            intSavEl.classList.remove("text-red-700");
            intSavEl.classList.add("text-green-700");
            intSavEl.nextSibling.textContent = " total interest savings";
          } else if (interestSavings < 0) {
            intSavEl.classList.remove("text-green-700");
            intSavEl.classList.add("text-red-700");
            intSavEl.nextSibling.textContent =
              " more interest vs. keeping current loan";
          } else {
            intSavEl.classList.remove("text-green-700", "text-red-700");
            intSavEl.nextSibling.textContent = " difference in interest";
          }

          document.getElementById("res-breakeven").textContent = breakevenText;
          document.getElementById("res-current-years").textContent =
            fmtYearsMonths(currentMonthsRemaining);
          document.getElementById("res-new-years").textContent =
            fmtYearsMonths(newMonths);

          const payoffNote = document.getElementById("res-payoff-note");
          if (newMonths < currentMonthsRemaining - 1) {
            payoffNote.textContent = "Refinancing shortens your payoff time.";
          } else if (newMonths > currentMonthsRemaining + 1) {
            payoffNote.textContent =
              "Refinancing extends your payoff time. Consider a shorter term or extra payments.";
          } else {
            payoffNote.textContent =
              "Refinancing keeps your payoff time roughly the same.";
          }

          if (isAdvanced) {
            document.getElementById("res-current-total").textContent =
              fmtMoney2(currentTotal);
            document.getElementById("res-new-total").textContent =
              fmtMoney2(newTotal);
            const totalDiff = currentTotal - newTotal;
            const totalDiffEl = document.getElementById("res-total-diff");
            totalDiffEl.textContent = fmtMoney2(Math.abs(totalDiff));
            if (totalDiff > 0) {
              totalDiffEl.classList.remove("text-red-700");
              totalDiffEl.classList.add("text-green-700");
              totalDiffEl.insertAdjacentText("beforeend", " savings");
            } else if (totalDiff < 0) {
              totalDiffEl.classList.remove("text-green-700");
              totalDiffEl.classList.add("text-red-700");
              totalDiffEl.insertAdjacentText("beforeend", " higher");
            } else {
              totalDiffEl.classList.remove("text-green-700", "text-red-700");
            }
          }

          // Extra payment results
          if (extraInfo && isFinite(extraInfo.months)) {
            const extraYears = extraInfo.months / 12;
            document.getElementById("res-extra-years").textContent =
              fmtYearsMonths(extraInfo.months);
            document.getElementById("res-new-years-plain").textContent =
              fmtYearsMonths(newMonths);
            const baseInterest = newInterest;
            const extraInterestSaved = baseInterest - extraInfo.interest;
            document.getElementById("res-extra-interest-saved").textContent =
              fmtMoney2(Math.max(extraInterestSaved, 0));
            extraResults.classList.remove("hidden");
          } else {
            extraResults.classList.add("hidden");
          }

          // Amortization summary
          document.getElementById("det-current-term").textContent =
            fmtYearsMonths(currentMonthsRemaining);
          document.getElementById("det-current-payments").textContent =
            Math.round(currentMonthsRemaining).toLocaleString();
          document.getElementById("det-current-total").textContent = fmtMoney2(
            remainingBal + currentInterest
          );

          document.getElementById("det-new-term").textContent =
            fmtYearsMonths(newMonths);
          document.getElementById("det-new-payments").textContent =
            Math.round(newMonths).toLocaleString();
          document.getElementById("det-new-total").textContent = fmtMoney2(
            newPrincipal + newInterest
          );
          document.getElementById("det-costs").textContent =
            fmtMoney2(closingCosts);

          resultsSection.classList.remove("hidden");
        }

        calcBtn.addEventListener("click", calculate);

        resetBtn.addEventListener("click", () => {
          document.getElementById("current-balance").value = 300000;
          document.getElementById("current-rate").value = 6.5;
          document.getElementById("current-term").value = 30;
          document.getElementById("years-paid").value = 5;
          document.getElementById("new-rate").value = 5.25;
          document.getElementById("new-term").value = 25;
          document.getElementById("closing-costs").value = 4000;
          document.querySelector(
            'input[name="cost-option"][value="cash"]'
          ).checked = true;
          document.getElementById("current-tax").value = 400;
          document.getElementById("current-insurance").value = 150;
          document.getElementById("current-hoa").value = 0;
          document.getElementById("new-tax").value = 400;
          document.getElementById("new-insurance").value = 150;
          document.getElementById("new-hoa").value = 0;
          extraToggle.checked = false;
          extraSection.classList.add("hidden");
          extraResults.classList.add("hidden");
          errorMsg.textContent = "";
          resultsSection.classList.add("hidden");
          setMode("simple");
        });

        // Initial mode
        setMode("simple");
      });
    </script>

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["\\(", "\\)"],
            ["$", "$"],
          ],
          displayMath: [
            ["$", "$"],
            ["\\[", "\\]"],
          ],
        },
        svg: { fontCache: "global" },
      };
    </script>
    <script>
  (function () {
    var loadMathJax = function () {
      if (window.__mathjaxLoading) return;
      window.__mathjaxLoading = true;
      var script = document.createElement("script");
      script.id = "MathJax-script";
      script.async = true;
      script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js";
      document.head.appendChild(script);
    };

    var target = document.querySelector(
      ".formula-box, .mathjax, .math, .formula, [data-mathjax]"
    );

    if (!target) return;

    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          if (entries.some(function (entry) { return entry.isIntersecting; })) {
            observer.disconnect();
            loadMathJax();
          }
        },
        { rootMargin: "200px" }
      );
      observer.observe(target);
    } else {
      window.addEventListener(
        "load",
        function () {
          setTimeout(loadMathJax, 1000);
        },
        { once: true }
      );
    }
  })();
</script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7MB5V1LZRN"></script>
<script>
  window.__cmpLoadQueued = window.__cmpLoadQueued || [];
  window.addEventListener("load", function () {
    var loadCmp = function () {
      var s1 = document.createElement("script");
      s1.src = "https://cmp.gatekeeperconsent.com/min.js";
      s1.async = true;
      s1.setAttribute("data-cfasync", "false");
      document.head.appendChild(s1);

      var s2 = document.createElement("script");
      s2.src = "https://the.gatekeeperconsent.com/cmp.min.js";
      s2.async = true;
      s2.setAttribute("data-cfasync", "false");
      document.head.appendChild(s2);
    };

    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadCmp, { timeout: 2000 });
    } else {
      setTimeout(loadCmp, 1000);
    }
  });
</script>
<script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
<script>
      window.ezstandalone = window.ezstandalone || {};
      ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <title>Time Calculator - Add, Subtract, and Find Duration</title>
    <meta name="description" content="A comprehensive time calculator to add or subtract time, and calculate the duration between two times. Supports days, hours, minutes, and seconds.">
    <meta name="author" content="Ugo Candido">
    <link rel="canonical" href="https://calcdomain.com/time-calculator.html"/>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwKMvhIeQSM9YJ+lnwgNqNSIChLIqGr8DCEIS9js+dEVsTwDIRsGb2" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoBPJpTadx5My+1crsvHUptLwUW8JYUdvReqBllGdHJGp2IST1kYWFqlSgRILV8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/Gf1ESgOGfs/FvG2uaHvBtcEADjBcNcFFigJ6SCn1LqLoTPyR" crossorigin="anonymous"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .prose { max-width: 65ch; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .formula-box {
            background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
            overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
            font-size: 1.1rem;
        }
        details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
        details[open] > summary { margin-bottom: 0.5rem; }
        
        /* Stili del Calcolatore */
        .calc-mode-radio:checked + label {
            background-color: #3b82f6; /* bg-blue-600 */
            color: #ffffff; /* text-white */
            border-color: #3b82f6; /* border-blue-600 */
        }
        .calc-mode-label {
            cursor: pointer;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db; /* border-gray-300 */
            background-color: #ffffff; /* bg-white */
            color: #374151; /* text-gray-700 */
            transition: all 0.2s ease-in-out;
            font-weight: 500;
        }
        .calc-mode-label:hover { background-color: #f9fafb; /* bg-gray-50 */ }
        .calc-mode-radio:focus-visible + label {
            outline: 3px solid #3b82f6; /* focus:ring-blue-500 */
            outline-offset: 2px;
            z-index: 10;
        }

        /* Stili di Accessibilit√† e Validazione */
        .error-message {
            color: #dc2626; /* text-red-600 */
            font-size: 0.875rem; /* text-sm */
            margin-top: 0.25rem;
        }
        input:invalid[data-touched="true"] {
            border-color: #dc2626; /* border-red-600 */
            box-shadow: 0 0 0 1px #dc2626;
        }
        input:focus-visible, select:focus-visible, button:focus-visible {
            outline: 3px solid #2563eb; /* outline-blue-600 */
            outline-offset: 2px;
        }
        /* Nascondi radio button, ma mantienili accessibili */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        /* Dimensione minima per target tattili */
        button, input[type="time"], input[type="date"], select {
            min-height: 48px;
        }
        label { margin-bottom: 0.25rem; }
        
        /* Prevenzione CLS */
        #results {
            min-height: 120px;
        }
        
        @media print {
            body * { visibility: hidden; }
            #print-section, #print-section * { visibility: visible; }
            #print-section { position: absolute; left: 0; top: 0; width: 100%; }
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Time Calculator - Add, Subtract, and Find Duration",
      "description": "A comprehensive time calculator to add or subtract time, and calculate the duration between two times. Supports days, hours, minutes, and seconds.",
      "url": "https://calcdomain.com/time-calculator.html",
      "inLanguage": "en",
      "author": {
        "@type": "Person",
        "name": "Ugo Candido"
      },
      "publisher": {
        "@type": "Organization",
        "name": "CalcDomain"
      },
      "mainEntity": {
        "@type": "WebApplication",
        "name": "Time Calculator",
        "applicationCategory": "LifestyleApplication",
        "operatingSystem": "Any (Web-based)",
        "description": "Online tool to perform time arithmetic: add or subtract durations from a start time, calculate the duration between two times, and add or subtract two durations.",
        "author": {
          "@type": "Person",
          "name": "Ugo Candido"
        },
        "publisher": {
          "@type": "Organization",
          "name": "CalcDomain"
        }
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
        { "@type": "ListItem", "position": 2, "name": "Lifestyle & Everyday", "item": "https://calcdomain.com/lifestyle-everyday.html" },
        { "@type": "ListItem", "position": 3, "name": "Time & Date", "item": "https://calcdomain.com/subcategories/time-date.html" },
        { "@type": "ListItem", "position": 4, "name": "Time Calculator", "item": "https://calcdomain.com/time-calculator.html" }
      ]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Use the Time Calculator",
      "description": "A step-by-step guide to calculating time additions, subtractions, and durations.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Select Operation",
          "text": "Choose your calculation mode: 'Add/Subtract from Time', 'Duration Between Times', or 'Add/Subtract Durations'."
        },
        {
          "@type": "HowToStep",
          "name": "Enter Start Time / Duration 1",
          "text": "Input the required start time, start date, or the first duration in days, hours, minutes, and seconds."
        },
        {
          "@type": "HowToStep",
          "name": "Enter End Time / Duration 2",
          "text": "Input the duration to add/subtract, the end date/time, or the second duration, depending on the mode selected."
        },
        {
          "@type": "HowToStep",
          "name": "Calculate and Review",
          "text": "Click 'Calculate' to see the result. The calculator provides the answer in both a formatted (D:H:M:S) string and as a total in various units (e.g., total hours, total seconds)."
        }
      ]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How do I calculate duration across midnight?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Use the 'Duration Between Times' mode. Enter the Start Date and Start Time (e.g., 10:00 PM on today's date) and the End Date and End Time (e.g., 6:00 AM on tomorrow's date). The calculator will automatically handle the overnight calculation."
          }
        },
        {
          "@type": "Question",
          "name": "What's the difference between time and duration?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Time refers to a specific point in the day (e.g., 9:00 AM). Duration refers to a span of time (e.g., 3 hours and 15 minutes). This calculator can work with both concepts."
          }
        },
        {
          "@type": "Question",
          "name": "How does the calculator handle AM/PM?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "For clarity and international compatibility, the time inputs use a 24-hour format (HH:MM:SS), as specified by the ISO 8601 standard. For example, 5:30 PM should be entered as 17:30:00."
          }
        }
      ]
    }
    </script>
    <script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
    <nav class="container mx-auto px-4 lg:px-6 py-4">
    <div class="flex justify-between items-center">
    <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

    <div class="w-full max-w-md hidden md:block mx-8">
    <div class="relative">
    <input type="search" id="search-input" placeholder="Search for a calculator..."
    class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
    autocomplete="off">
    <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
    fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
    </svg>
    <div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
    </div>
    </div>

    <div class="hidden md:flex items-center space-x-6 text-sm">
    <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
    <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
    </div>

    <button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
    </button>
    </div>

    <div id="mobile-menu" class="md:hidden mt-4 hidden">
    <div class="space-y-2">
    <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
    <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
    </div>
    </div>
    </nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
    <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
        <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
        <a href="lifestyle-everyday.html" class="hover:text-blue-600">Lifestyle & Everyday</a> &raquo;
        <a href="subcategories/lifestyle-everyday-time-date.html" class="hover:text-blue-600">Time & Date</a> &raquo;
        <span class="text-gray-900">Time Calculator</span>
    </nav>

    <div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
        <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Time Calculator</h1>
        <p class="text-gray-600 mb-6">This versatile tool solves common time calculations. Use it to add or subtract a duration from a start time, find the exact duration between two points in time, or perform arithmetic on time durations.</p>

        <form id="time-calculator-form" class="space-y-6">
            
            <fieldset>
                <legend class="block text-sm font-medium text-gray-700 mb-2">1. Select Calculation Mode</legend>
                <div class="flex flex-wrap rounded-md" role="radiogroup" aria-label="Calculation Mode">
                    <input type="radio" name="calcMode" id="mode1" value="add-subtract" class="sr-only calc-mode-radio" checked>
                    <label for="mode1" class="calc-mode-label rounded-l-md border-r-0">Add/Subtract from Time</label>
                    
                    <input type="radio" name="calcMode" id="mode2" value="duration" class="sr-only calc-mode-radio">
                    <label for="mode2" class="calc-mode-label border-r-0">Duration Between Times</label>
                    
                    <input type="radio" name="calcMode" id="mode3" value="arithmetic" class="sr-only calc-mode-radio">
                    <label for="mode3" class="calc-mode-label rounded-r-md">Add/Subtract Durations</label>
                </div>
            </fieldset>

            <div id="mode1-inputs" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="m1-start-date" class="block text-sm font-medium text-gray-700">Start Date</label>
                        <input type="date" id="m1-start-date" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                        <span id="m1-start-date-error" class="error-message" aria-live="assertive"></span>
                    </div>
                    <div>
                        <label for="m1-start-time" class="block text-sm font-medium text-gray-700">Start Time (HH:MM:SS)</label>
                        <input type="time" id="m1-start-time" step="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                        <span id="m1-start-time-error" class="error-message" aria-live="assertive"></span>
                    </div>
                </div>
                <div>
                    <label for="m1-operation" class="block text-sm font-medium text-gray-700">Operation</label>
                    <select id="m1-operation" class="mt-1 block w-full md:w-1/2 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="add">Add (+)</option>
                        <option value="subtract">Subtract (-)</option>
                    </select>
                </div>
                <fieldset class="border border-gray-300 p-4 rounded-md">
                    <legend class="text-sm font-medium text-gray-700 px-2">Duration to Add/Subtract</legend>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 pt-2">
                        <div>
                            <label for="m1-days" class="block text-sm font-medium text-gray-700">Days</label>
                            <input type="number" id="m1-days" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m1-hours" class="block text-sm font-medium text-gray-700">Hours</label>
                            <input type="number" id="m1-hours" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m1-minutes" class="block text-sm font-medium text-gray-700">Minutes</label>
                            <input type="number" id="m1-minutes" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m1-seconds" class="block text-sm font-medium text-gray-700">Seconds</label>
                            <input type="number" id="m1-seconds" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    <span id="m1-duration-error" class="error-message" aria-live="assertive"></span>
                </fieldset>
            </div>

            <div id="mode2-inputs" class="hidden space-y-6">
                <fieldset class="border border-gray-300 p-4 rounded-md">
                    <legend class="text-sm font-medium text-gray-700 px-2">Start</legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 pt-2">
                        <div>
                            <label for="m2-start-date" class="block text-sm font-medium text-gray-700">Start Date</label>
                            <input type="date" id="m2-start-date" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                            <span id="m2-start-date-error" class="error-message" aria-live="assertive"></span>
                        </div>
                        <div>
                            <label for="m2-start-time" class="block text-sm font-medium text-gray-700">Start Time (HH:MM:SS)</label>
                            <input type="time" id="m2-start-time" step="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                            <span id="m2-start-time-error" class="error-message" aria-live="assertive"></span>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="border border-gray-300 p-4 rounded-md">
                    <legend class="text-sm font-medium text-gray-700 px-2">End</legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 pt-2">
                        <div>
                            <label for="m2-end-date" class="block text-sm font-medium text-gray-700">End Date</label>
                            <input type="date" id="m2-end-date" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                            <span id="m2-end-date-error" class="error-message" aria-live="assertive"></span>
                        </div>
                        <div>
                            <label for="m2-end-time" class="block text-sm font-medium text-gray-700">End Time (HH:MM:SS)</label>
                            <input type="time" id="m2-end-time" step="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                            <span id="m2-end-time-error" class="error-message" aria-live="assertive"></span>
                        </div>
                    </div>
                </fieldset>
                <span id="m2-logic-error" class="error-message block" aria-live="assertive"></span>
            </div>
            
            <div id="mode3-inputs" class="hidden space-y-6">
                <fieldset class="border border-gray-300 p-4 rounded-md">
                    <legend class="text-sm font-medium text-gray-700 px-2">First Duration</legend>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 pt-2">
                        <div>
                            <label for="m3-days1" class="block text-sm font-medium text-gray-700">Days</label>
                            <input type="number" id="m3-days1" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-hours1" class="block text-sm font-medium text-gray-700">Hours</label>
                            <input type="number" id="m3-hours1" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-minutes1" class="block text-sm font-medium text-gray-700">Minutes</label>
                            <input type="number" id="m3-minutes1" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-seconds1" class="block text-sm font-medium text-gray-700">Seconds</label>
                            <input type="number" id="m3-seconds1" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    <span id="m3-duration1-error" class="error-message" aria-live="assertive"></span>
                </fieldset>
                
                <div>
                    <label for="m3-operation" class="block text-sm font-medium text-gray-700">Operation</label>
                    <select id="m3-operation" class="mt-1 block w-full md:w-1/2 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="add">Add (+)</option>
                        <option value="subtract">Subtract (-)</option>
                    </select>
                </div>
                
                <fieldset class="border border-gray-300 p-4 rounded-md">
                    <legend class="text-sm font-medium text-gray-700 px-2">Second Duration</legend>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 pt-2">
                        <div>
                            <label for="m3-days2" class="block text-sm font-medium text-gray-700">Days</label>
                            <input type="number" id="m3-days2" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-hours2" class="block text-sm font-medium text-gray-700">Hours</label>
                            <input type="number" id="m3-hours2" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-minutes2" class="block text-sm font-medium text-gray-700">Minutes</label>
                            <input type="number" id="m3-minutes2" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-seconds2" class="block text-sm font-medium text-gray-700">Seconds</label>
                            <input type="number" id="m3-seconds2" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    <span id="m3-duration2-error" class="error-message" aria-live="assertive"></span>
                </fieldset>
            </div>

            <div class="flex items-center space-x-4">
                <button type="submit" id="calculateBtn" class="px-6 py-3 bg-blue-600 text-white font-medium rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    Calculate
                </button>
                <button type="reset" id="resetBtn" class="px-6 py-3 bg-gray-200 text-gray-700 font-medium rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400">
                    Reset
                </button>
            </div>
        </form>

        <section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6" aria-live="polite">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Result</h3>
            <div id="result-container" class="space-y-2">
                <p id="result-primary" class="text-2xl font-bold text-blue-600">‚Äî</p>
                <p id="result-secondary" class="text-gray-600">Enter values and press calculate.</p>
            </div>
        </section>
    </div>

    <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose prose-blue">
        
        <h2>Authoritative Data Source and Methodology</h2>
        <p>This calculator operates based on the universally accepted standards for timekeeping. The definitions for time units (day, hour, minute, second) and date/time notation are governed by two primary standards:</p>
        <ul class="list-disc pl-5">
            <li><strong>International System of Units (SI):</strong> Defines the <strong>second</strong> as the base unit of time. All other units (minute, hour, day) are non-SI units accepted for use with the SI and are based on it (1 min = 60s, 1 hour = 3600s, 1 day = 86400s).</li>
            <li><strong>ISO 8601:</strong> An international standard for the representation of dates and times. This calculator uses its conventions, such as the 24-hour clock (HH:MM:SS), for unambiguous data entry.</li>
        </ul>
        <p class="font-semibold">All calculations are strictly based on the formulae and data provided by these standards. The tool does not account for leap seconds.</p>

        <hr class="my-6">

        <h2>The Formulae Explained</h2>
        <p>The core of all calculations involves converting all time inputs into a single, common unit‚Äî<strong>seconds</strong>‚Äîperforming the arithmetic, and then converting the result back into a human-readable format (Days, Hours, Minutes, Seconds).</p>
        
        <h3>1. Conversion to Total Seconds</h3>
        <p>A duration $\Delta T$ is converted to total seconds using the formula:</p>
        <div class="formula-box">
            $$ TotalSeconds = (d \times 86400) + (h \times 3600) + (m \times 60) + s $$
        </div>
        <p>Where $d, h, m, s$ are the days, hours, minutes, and seconds, respectively.</p>
        
        <h3>2. Calculation Logic</h3>
        <ul>
            <li><strong>Add/Subtract from Time:</strong> The start date/time is converted to a Unix timestamp (total seconds from Jan 1, 1970). The duration (in seconds) is then added or subtracted.
                <br> $T_{result\_timestamp} = T_{start\_timestamp} \pm \Delta T_{seconds}$
            </li>
            <li><strong>Duration Between Times:</strong> Both start and end date/times are converted to timestamps. The duration is the absolute difference.
                <br> $\Delta T_{seconds} = | T_{end\_timestamp} - T_{start\_timestamp} |$
            </li>
            <li><strong>Add/Subtract Durations:</strong> Both durations are converted to total seconds, and the arithmetic is performed.
                <br> $\Delta T_{total} = \Delta T_1 \pm \Delta T_2$
            </li>
        </ul>

        <h3>3. Conversion Back to D:H:M:S</h3>
        <p>The final total seconds ($S_{total}$) is converted back using modular arithmetic:</p>
        <div class="formula-box">
            $$ d = \lfloor S_{total} / 86400 \rfloor $$
            $$ S_{remaining} = S_{total} \mod 86400 $$
            $$ h = \lfloor S_{remaining} / 3600 \rfloor $$
            $$ S_{remaining} = S_{remaining} \mod 3600 $$
            $$ m = \lfloor S_{remaining} / 60 \rfloor $$
            $$ s = S_{remaining} \mod 60 $$
        </div>

        <hr class="my-6">

        <h2>Glossary of Variables</h2>
        <dl>
            <dt class="font-semibold">Time (Point)</dt>
            <dd class="pl-4 mb-2">A specific moment in time, represented by a date and time of day (e.g., "October 26, 2025 at 12:45:30").</dd>
            
            <dt class="font-semibold">Duration ($\Delta T$)</dt>
            <dd class="pl-4 mb-2">A span or length of time, independent of any start or end point (e.g., "3 hours and 15 minutes").</dd>
            
            <dt class="font-semibold">Timestamp</dt>
            <dd class="pl-4 mb-2">A numerical representation of a time point, typically the number of seconds that have elapsed since a specific epoch (e.g., the Unix epoch, Jan 1, 1970).</dd>
            
            <dt class="font-semibold">Second (s)</dt>
            <dd class="pl-4 mb-2">The SI base unit of time.</dd>
        </dl>

        <hr class="my-6">

        <h2>How It Works: A Step-by-Step Example</h2>
        <h3>Scenario: Calculating a Work Shift Duration (Across Midnight)</h3>
        <p>Let's calculate the duration of a shift that starts at <strong>10:00 PM on October 26</strong> and ends at <strong>6:30 AM on October 27</strong>.</p>
        
        <ol class="list-decimal pl-5">
            <li><strong>Mode Selection:</strong> Choose 'Duration Between Times'.</li>
            <li>
                <strong>Input Start:</strong>
                <ul>
                    <li>Start Date: `2025-10-26`</li>
                    <li>Start Time: `22:00:00`</li>
                </ul>
            </li>
            <li>
                <strong>Input End:</strong>
                <ul>
                    <li>End Date: `2025-10-27`</li>
                    <li>End Time: `06:30:00`</li>
                </ul>
            </li>
            <li><strong>Step 1: Convert to Timestamps (Seconds)</strong>
                <ul>
                    <li>$T_{start}$ (Oct 26, 2025, 22:00:00) $\approx$ 1,761,540,000 seconds</li>
                    <li>$T_{end}$ (Oct 27, 2025, 06:30:00) $\approx$ 1,761,570,600 seconds</li>
                </ul>
            </li>
            <li><strong>Step 2: Calculate Difference</strong>
                <ul>
                    <li>$\Delta T_{seconds} = 1,761,570,600 - 1,761,540,000 = 30,600$ seconds</li>
                </ul>
            </li>
            <li><strong>Step 3: Convert Back to H:M:S</strong>
                <ul>
                    <li>Hours: $h = \lfloor 30600 / 3600 \rfloor = 8$</li>
                    <li>Remaining: $30600 \mod 3600 = 1800$ seconds</li>
                    <li>Minutes: $m = \lfloor 1800 / 60 \rfloor = 30$</li>
                    <li>Remaining: $1800 \mod 60 = 0$ seconds</li>
                </ul>
            </li>
            <li><strong>Final Result:</strong> The total duration is <strong>8 hours, 30 minutes, and 0 seconds</strong>.</li>
        </ol>

        <hr class="my-6">

        <h2>Frequently Asked Questions (FAQ)</h2>
        <details>
            <summary>How do I calculate duration across midnight?</summary>
            <p class="mt-2">Use the <strong>'Duration Between Times'</strong> mode. You must enter both the Start Date and the End Date. For example, to calculate from 10:00 PM (22:00:00) today to 6:00 AM (06:00:00) tomorrow, select today's date as the start and tomorrow's date as the end.</p>
        </details>
        <details>
            <summary>What's the difference between this and a timesheet calculator?</summary>
            <p class="mt-2">This is a general-purpose time calculator. A timesheet calculator is often more specific, designed to sum up multiple durations (e.g., daily work hours) for a week and calculate payroll. This tool provides the building blocks for those calculations.</p>
        </details>
        <details>
            <summary>How does the calculator handle AM/PM?</summary>
            <p class="mt-2">To avoid ambiguity and adhere to the ISO 8601 standard, this calculator uses the <strong>24-hour format (HH:MM:SS)</strong> for all time inputs. For example, 5:30 PM should be entered as <strong>17:30:00</strong>.</p>
        </details>
        <details>
            <summary>Can I enter more than 24 hours or 60 minutes in the duration fields?</summary>
            <p class="mt-2">Yes. The 'Add/Subtract Durations' mode is designed for this. If you enter 90 minutes, it will be correctly treated as 1 hour and 30 minutes. The calculator will automatically normalize the units during calculation.</p>
        </details>
        <details>
            <summary>What is the ISO 8601 standard?</summary>
            <p class="mt-2">ISO 8601 is an international standard for data exchange, specifying how dates and times should be represented to avoid misinterpretation. Examples include using YYYY-MM-DD for dates and the 24-hour clock (HH:MM:SS) for time.</p>
        </details>
        <details>
            <summary>How are leap seconds handled?</summary>
            <p class="mt-2">This calculator does <strong>not</strong> account for leap seconds. It operates on the standard definition of a day as exactly 86,400 SI seconds. This is standard practice for almost all civil and commercial time calculations.</p>
        </details>

        <div class="mt-8 pt-6 border-t border-gray-200 text-sm text-gray-600">
            <p><strong>Tool developed by Ugo Candido.</strong> Contents verified by the CalcDomain Editorial Board.</p>
            <p>Last accuracy review: <time datetime="2026-02-15">February 15, 2026</time></p>
        </div>
    </article>
</section>

<aside class="w-full lg:w-1/3">
    <div class="sticky top-24 space-y-6">
        <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
            Ad Placement (300√ó600)
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
            <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
                <li><strong>Multi-Mode:</strong> Combines three calculators in one interface.</li>
                <li><strong>Cross-Day Calculation:</strong> Accurately finds duration across midnight and multiple days.</li>
                <li><strong>Clear Results:</strong> Provides a formatted D:H:M:S breakdown and total units (e.g., total hours).</li>
                <li><strong>Standards-Based:</strong> Uses ISO 8601 and SI unit definitions for reliable, accurate math.</li>
            </ul>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-4">Related Time & Date Tools</h3>
            <ul class="space-y-3 text-sm">
                <li><a href="date-duration.html" class="text-blue-600 hover:underline">Date Duration Calculator</a></li>
                <li><a href="hours-calculator.html" class="text-blue-600 hover:underline">Hours Calculator</a></li>
                <li><a href="time-zone-converter.html" class="text-blue-600 hover:underline">Time Zone Converter</a></li>
                <li><a href="age-calculator.html" class="text-blue-600 hover:underline">Age Calculator</a></li>
            </ul>
        </div>
    </div>
</aside>

</div>
</main>

<footer class="bg-white border-t mt-12">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
        <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
        <div class="mt-4 space-x-4">
            <a href="about.html" class="hover:text-blue-600">About</a>
            <a href="contact.html" class="hover:text-blue-600">Contact</a>
            <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
            <a href="terms.html" class="hover:text-blue-600">Terms</a>
        </div>
    </div>
</footer>

<script defer>
document.addEventListener('DOMContentLoaded', () => {

    // Inizializza KaTeX per le formule
    if (window.renderMathInElement) {
        renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false},
            ]
        });
    }

    // Costanti
    const SECONDS_PER_DAY = 86400;
    const SECONDS_PER_HOUR = 3600;
    const SECONDS_PER_MINUTE = 60;

    // Selettori Elementi UI
    const form = document.getElementById('time-calculator-form');
    const modeRadios = document.querySelectorAll('input[name="calcMode"]');
    const modeContainers = {
        'add-subtract': document.getElementById('mode1-inputs'),
        'duration': document.getElementById('mode2-inputs'),
        'arithmetic': document.getElementById('mode3-inputs')
    };
    const resultPrimary = document.getElementById('result-primary');
    const resultSecondary = document.getElementById('result-secondary');
    
    // Elementi Modalit√† 1
    const m1 = {
        startDate: document.getElementById('m1-start-date'),
        startTime: document.getElementById('m1-start-time'),
        operation: document.getElementById('m1-operation'),
        days: document.getElementById('m1-days'),
        hours: document.getElementById('m1-hours'),
        minutes: document.getElementById('m1-minutes'),
        seconds: document.getElementById('m1-seconds'),
        dateError: document.getElementById('m1-start-date-error'),
        timeError: document.getElementById('m1-start-time-error'),
        durationError: document.getElementById('m1-duration-error')
    };

    // Elementi Modalit√† 2
    const m2 = {
        startDate: document.getElementById('m2-start-date'),
        startTime: document.getElementById('m2-start-time'),
        endDate: document.getElementById('m2-end-date'),
        endTime: document.getElementById('m2-end-time'),
        startDateError: document.getElementById('m2-start-date-error'),
        startTimeError: document.getElementById('m2-start-time-error'),
        endDateError: document.getElementById('m2-end-date-error'),
        endTimeError: document.getElementById('m2-end-time-error'),
        logicError: document.getElementById('m2-logic-error')
    };
    
    // Elementi Modalit√† 3
    const m3 = {
        days1: document.getElementById('m3-days1'),
        hours1: document.getElementById('m3-hours1'),
        minutes1: document.getElementById('m3-minutes1'),
        seconds1: document.getElementById('m3-seconds1'),
        operation: document.getElementById('m3-operation'),
        days2: document.getElementById('m3-days2'),
        hours2: document.getElementById('m3-hours2'),
        minutes2: document.getElementById('m3-minutes2'),
        seconds2: document.getElementById('m3-seconds2'),
        duration1Error: document.getElementById('m3-duration1-error'),
        duration2Error: document.getElementById('m3-duration2-error')
    };

    // --- Funzioni di Utility ---

    /**
     * Mostra un messaggio di errore e imposta aria-describedby
     * @param {HTMLElement} errorEl - L'elemento span per l'errore
     * @param {HTMLElement} inputEl - L'elemento input da associare
     * @param {string} message - Il messaggio di errore
     */
    function showError(errorEl, inputEl, message) {
        errorEl.textContent = message;
        inputEl.setAttribute('aria-describedby', errorEl.id);
        inputEl.setAttribute('aria-invalid', 'true');
    }

    /**
     * Cancella tutti i messaggi di errore e gli attributi ARIA
     */
    function clearErrors() {
        const errorMessages = document.querySelectorAll('.error-message');
        errorMessages.forEach(el => { el.textContent = ''; });
        
        const inputs = form.querySelectorAll('input, select');
        inputs.forEach(el => {
            el.removeAttribute('aria-invalid');
            // Rimuovi solo l'associazione all'errore, non altri describedby
            const describedBy = el.getAttribute('aria-describedby');
            if (describedBy && describedBy.includes('-error')) {
                 el.setAttribute('aria-describedby', describedBy.replace(/-error\b/g, '').trim());
            }
        });
    }

    /**
     * Mostra i risultati
     * @param {string} primary - Il risultato principale (grande)
     * @param {string} secondary - Il risultato secondario (descrizione)
     */
    function showResult(primary, secondary) {
        resultPrimary.textContent = primary;
        resultSecondary.textContent = secondary;
    }

    /**
     * Converte un gruppo di input di durata in secondi
     * @param {HTMLElement} d - Input giorni
     * @param {HTMLElement} h - Input ore
     * @param {HTMLElement} m - Input minuti
     * @param {HTMLElement} s - Input secondi
     * @returns {number} - Durata totale in secondi
     */
    function parseDurationToSeconds(d, h, m, s) {
        const days = parseInt(d.value) || 0;
        const hours = parseInt(h.value) || 0;
        const minutes = parseInt(m.value) || 0;
        const seconds = parseInt(s.value) || 0;
        return (days * SECONDS_PER_DAY) + (hours * SECONDS_PER_HOUR) + (minutes * SECONDS_MINUTE) + seconds;
    }

    /**
     * Formatta i secondi totali in un oggetto {d, h, m, s}
     * @param {number} totalSeconds - Secondi totali
     * @returns {{d: number, h: number, m: number, s: number}}
     */
    function formatSecondsToDHMS(totalSeconds) {
        const sign = totalSeconds < 0 ? -1 : 1;
        let seconds = Math.abs(totalSeconds);
        
        const d = Math.floor(seconds / SECONDS_PER_DAY) * sign;
        seconds %= SECONDS_PER_DAY;
        const h = Math.floor(seconds / SECONDS_PER_HOUR) * sign;
        seconds %= SECONDS_PER_HOUR;
        const m = Math.floor(seconds / SECONDS_MINUTE) * sign;
        seconds = (seconds % SECONDS_MINUTE) * sign;
        
        return { d, h, m, s: Math.round(seconds * 100) / 100 }; // Arrotonda a 2 decimali per sicurezza
    }

    /**
     * Formatta un oggetto {d, h, m, s} in una stringa leggibile
     * @param {{d: number, h: number, m: number, s: number}} dhms
     * @returns {string} - Stringa formattata
     */
    function formatDHMSVerbose(dhms) {
        const parts = [];
        if (dhms.d !== 0) parts.push(`${dhms.d} ${Math.abs(dhms.d) === 1 ? 'day' : 'days'}`);
        if (dhms.h !== 0) parts.push(`${dhms.h} ${Math.abs(dhms.h) === 1 ? 'hour' : 'hours'}`);
        if (dhms.m !== 0) parts.push(`${dhms.m} ${Math.abs(dhms.m) === 1 ? 'minute' : 'minutes'}`);
        if (dhms.s !== 0 || parts.length === 0) parts.push(`${dhms.s} ${Math.abs(dhms.s) === 1 ? 'second' : 'seconds'}`);
        
        return parts.join(', ');
    }

    /**
     * Formatta un oggetto Date in una stringa leggibile
     * @param {Date} date - Oggetto Data
     * @returns {string} - Stringa formattata
     */
    function formatDateTimeResult(date) {
        return date.toLocaleString(undefined, {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit'
        });
    }

    // --- Gestori di Eventi ---

    // Cambia modalit√†
    modeRadios.forEach(radio => {
        radio.addEventListener('change', (e) => {
            Object.values(modeContainers).forEach(container => container.classList.add('hidden'));
            modeContainers[e.target.value].classList.remove('hidden');
            resetForm(); // Resetta i valori quando si cambia modalit√†
        });
    });

    // Sottomissione Form
    form.addEventListener('submit', (e) => {
        e.preventDefault();
        clearErrors();
        const currentMode = document.querySelector('input[name="calcMode"]:checked').value;
        
        switch (currentMode) {
            case 'add-subtract':
                calculateMode1();
                break;
            case 'duration':
                calculateMode2();
                break;
            case 'arithmetic':
                calculateMode3();
                break;
        }
    });
    
    // Reset Form
    form.addEventListener('reset', () => {
        resetForm();
    });
    
    function resetForm() {
        clearErrors();
        showResult("‚Äî", "Enter values and press calculate.");
        // Non √® necessario reimpostare i valori del form, type="reset" lo fa
    }

    // --- Logica di Calcolo per Modalit√† ---

    function calculateMode1() {
        // Validazione
        if (!m1.startDate.value) {
            showError(m1.dateError, m1.startDate, 'Start Date is required.');
            m1.startDate.focus();
            return;
        }
        if (!m1.startTime.value) {
            showError(m1.timeError, m1.startTime, 'Start Time is required.');
            m1.startTime.focus();
            return;
        }
        
        const durationSec = parseDurationToSeconds(m1.days, m1.hours, m1.minutes, m1.seconds);
        if (durationSec === 0) {
            showError(m1.durationError, m1.days, 'Duration must be greater than zero.');
            m1.days.focus();
            return;
        }

        try {
            const startDateTime = new Date(`${m1.startDate.value}T${m1.startTime.value}`);
            if (isNaN(startDateTime.getTime())) throw new Error('Invalid date/time');
            
            const operation = m1.operation.value;
            const durationMs = durationSec * 1000;
            
            const resultMs = operation === 'add'
                ? startDateTime.getTime() + durationMs
                : startDateTime.getTime() - durationMs;
                
            const resultDate = new Date(resultMs);
            
            showResult(
                formatDateTimeResult(resultDate),
                `Result of ${operation === 'add' ? 'adding' : 'subtracting'} ${formatDHMSVerbose(formatSecondsToDHMS(durationSec))}`
            );
            
        } catch (e) {
            showError(m1.timeError, m1.startTime, 'Invalid Start Date or Time format.');
        }
    }

    function calculateMode2() {
        // Validazione
        let isValid = true;
        if (!m2.startDate.value) {
            showError(m2.startDateError, m2.startDate, 'Start Date is required.');
            isValid = false;
        }
        if (!m2.startTime.value) {
            showError(m2.startTimeError, m2.startTime, 'Start Time is required.');
            isValid = false;
        }
        if (!m2.endDate.value) {
            showError(m2.endDateError, m2.endDate, 'End Date is required.');
            isValid = false;
        }
        if (!m2.endTime.value) {
            showError(m2.endTimeError, m2.endTime, 'End Time is required.');
            isValid = false;
        }
        if (!isValid) return;

        try {
            const startDateTime = new Date(`${m2.startDate.value}T${m2.startTime.value}`);
            const endDateTime = new Date(`${m2.endDate.value}T${m2.endTime.value}`);
            
            if (isNaN(startDateTime.getTime())) {
                showError(m2.startTimeError, m2.startTime, 'Invalid Start Date or Time.');
                return;
            }
            if (isNaN(endDateTime.getTime())) {
                showError(m2.endTimeError, m2.endTime, 'Invalid End Date or Time.');
                return;
            }

            if (endDateTime.getTime() < startDateTime.getTime()) {
                showError(m2.logicError, m2.endDate, 'End Date/Time must be after Start Date/Time.');
                m2.endDate.focus();
                return;
            }
            
            const diffMs = endDateTime.getTime() - startDateTime.getTime();
            const diffSec = Math.round(diffMs / 1000);
            const dhms = formatSecondsToDHMS(diffSec);
            
            showResult(
                formatDHMSVerbose(dhms),
                `Total: ${diffSec.toLocaleString()} seconds or ${(diffSec / SECONDS_PER_HOUR).toFixed(2)} hours`
            );

        } catch (e) {
            showError(m2.logicError, m2.startDate, 'Error processing dates. Check formats.');
        }
    }
    
    function calculateMode3() {
        const duration1Sec = parseDurationToSeconds(m3.days1, m3.hours1, m3.minutes1, m3.seconds1);
        const duration2Sec = parseDurationToSeconds(m3.days2, m3.hours2, m3.minutes2, m3.seconds2);

        // Validazione
        if (duration1Sec === 0) {
            showError(m3.duration1Error, m3.days1, 'First duration must be greater than zero.');
            m3.days1.focus();
            return;
        }
        if (duration2Sec === 0) {
            showError(m3.duration2Error, m3.days2, 'Second duration must be greater than zero.');
            m3.days2.focus();
            return;
        }
        
        const operation = m3.operation.value;
        let totalSeconds;
        
        if (operation === 'add') {
            totalSeconds = duration1Sec + duration2Sec;
        } else {
            totalSeconds = duration1Sec - duration2Sec;
        }
        
        const dhms = formatSecondsToDHMS(totalSeconds);
        
        showResult(
            formatDHMSVerbose(dhms),
            `Total: ${totalSeconds.toLocaleString()} seconds`
        );
    }
    
    // Imposta la data odierna come default per gli input date
    const today = new Date().toISOString().split('T')[0];
    [m1.startDate, m2.startDate, m2.endDate].forEach(el => {
        if (el) el.value = today;
    });

});
</script>

</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <title>Time Calculator - Add, Subtract, and Find Duration</title>
    <meta name="description" content="A comprehensive time calculator to add or subtract time, and calculate the duration between two times. Supports days, hours, minutes, and seconds.">
    <meta name="author" content="Ugo Candido">
    <link rel="canonical" href="https://calcdomain.com/time-calculator.html"/>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwKMvhIeQSM9YJ+lnwgNqNSIChLIqGr8DCEIS9js+dEVsTwDIRsGb2" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoBPJpTadx5My+1crsvHUptLwUW8JYUdvReqBllGdHJGp2IST1kYWFqlSgRILV8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/Gf1ESgOGfs/FvG2uaHvBtcEADjBcNcFFigJ6SCn1LqLoTPyR" crossorigin="anonymous"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .prose { max-width: 65ch; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .formula-box {
            background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
            overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
            font-size: 1.1rem;
        }
        details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
        details[open] > summary { margin-bottom: 0.5rem; }
        
        /* Stili del Calcolatore */
        .calc-mode-radio:checked + label {
            background-color: #3b82f6; /* bg-blue-600 */
            color: #ffffff; /* text-white */
            border-color: #3b82f6; /* border-blue-600 */
        }
        .calc-mode-label {
            cursor: pointer;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db; /* border-gray-300 */
            background-color: #ffffff; /* bg-white */
            color: #374151; /* text-gray-700 */
            transition: all 0.2s ease-in-out;
            font-weight: 500;
        }
        .calc-mode-label:hover { background-color: #f9fafb; /* bg-gray-50 */ }
        .calc-mode-radio:focus-visible + label {
            outline: 3px solid #3b82f6; /* focus:ring-blue-500 */
            outline-offset: 2px;
            z-index: 10;
        }

        /* Stili di Accessibilit√† e Validazione */
        .error-message {
            color: #dc2626; /* text-red-600 */
            font-size: 0.875rem; /* text-sm */
            margin-top: 0.25rem;
        }
        input:invalid[data-touched="true"] {
            border-color: #dc2626; /* border-red-600 */
            box-shadow: 0 0 0 1px #dc2626;
        }
        input:focus-visible, select:focus-visible, button:focus-visible {
            outline: 3px solid #2563eb; /* outline-blue-600 */
            outline-offset: 2px;
        }
        /* Nascondi radio button, ma mantienili accessibili */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        /* Dimensione minima per target tattili */
        button, input[type="time"], input[type="date"], select {
            min-height: 48px;
        }
        label { margin-bottom: 0.25rem; }
        
        /* Prevenzione CLS */
        #results {
            min-height: 120px;
        }
        
        @media print {
            body * { visibility: hidden; }
            #print-section, #print-section * { visibility: visible; }
            #print-section { position: absolute; left: 0; top: 0; width: 100%; }
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Time Calculator - Add, Subtract, and Find Duration",
      "description": "A comprehensive time calculator to add or subtract time, and calculate the duration between two times. Supports days, hours, minutes, and seconds.",
      "url": "https://calcdomain.com/time-calculator.html",
      "inLanguage": "en",
      "author": {
        "@type": "Person",
        "name": "Ugo Candido"
      },
      "publisher": {
        "@type": "Organization",
        "name": "CalcDomain"
      },
      "mainEntity": {
        "@type": "WebApplication",
        "name": "Time Calculator",
        "applicationCategory": "LifestyleApplication",
        "operatingSystem": "Any (Web-based)",
        "description": "Online tool to perform time arithmetic: add or subtract durations from a start time, calculate the duration between two times, and add or subtract two durations.",
        "author": {
          "@type": "Person",
          "name": "Ugo Candido"
        },
        "publisher": {
          "@type": "Organization",
          "name": "CalcDomain"
        }
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
        { "@type": "ListItem", "position": 2, "name": "Lifestyle & Everyday", "item": "https://calcdomain.com/lifestyle-everyday.html" },
        { "@type": "ListItem", "position": 3, "name": "Time & Date", "item": "https://calcdomain.com/subcategories/lifestyle-everyday-time-date.html" },
        { "@type": "ListItem", "position": 4, "name": "Time Calculator", "item": "https://calcdomain.com/time-calculator.html" }
      ]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Use the Time Calculator",
      "description": "A step-by-step guide to calculating time additions, subtractions, and durations.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Select Operation",
          "text": "Choose your calculation mode: 'Add/Subtract from Time', 'Duration Between Times', or 'Add/Subtract Durations'."
        },
        {
          "@type": "HowToStep",
          "name": "Enter Start Time / Duration 1",
          "text": "Input the required start time, start date, or the first duration in days, hours, minutes, and seconds."
        },
        {
          "@type": "HowToStep",
          "name": "Enter End Time / Duration 2",
          "text": "Input the duration to add/subtract, the end date/time, or the second duration, depending on the mode selected."
        },
        {
          "@type": "HowToStep",
          "name": "Calculate and Review",
          "text": "Click 'Calculate' to see the result. The calculator provides the answer in both a formatted (D:H:M:S) string and as a total in various units (e.g., total hours, total seconds)."
        }
      ]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How do I calculate duration across midnight?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Use the 'Duration Between Times' mode. Enter the Start Date and Start Time (e.g., 10:00 PM on today's date) and the End Date and End Time (e.g., 6:00 AM on tomorrow's date). The calculator will automatically handle the overnight calculation."
          }
        },
        {
          "@type": "Question",
          "name": "What's the difference between time and duration?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Time refers to a specific point in the day (e.g., 9:00 AM). Duration refers to a span of time (e.g., 3 hours and 15 minutes). This calculator can work with both concepts."
          }
        },
        {
          "@type": "Question",
          "name": "How does the calculator handle AM/PM?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "For clarity and international compatibility, the time inputs use a 24-hour format (HH:MM:SS), as specified by the ISO 8601 standard. For example, 5:30 PM should be entered as 17:30:00."
          }
        }
      ]
    }
    </script>
    <script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
    <nav class="container mx-auto px-4 lg:px-6 py-4">
    <div class="flex justify-between items-center">
    <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

    <div class="w-full max-w-md hidden md:block mx-8">
    <div class="relative">
    <input type="search" id="search-input" placeholder="Search for a calculator..."
    class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
    autocomplete="off">
    <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
    fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
    </svg>
    <div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
    </div>
    </div>

    <div class="hidden md:flex items-center space-x-6 text-sm">
    <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
    <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
    </div>

    <button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
    </button>
    </div>

    <div id="mobile-menu" class="md:hidden mt-4 hidden">
    <div class="space-y-2">
    <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
    <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
    </div>
    </div>
    </nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
    <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
        <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
        <a href="lifestyle-everyday.html" class="hover:text-blue-600">Lifestyle & Everyday</a> &raquo;
        <a href="subcategories/time-date.html" class="hover:text-blue-600">Time & Date</a> &raquo;
        <span class="text-gray-900">Time Calculator</span>
    </nav>

    <div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
        <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Time Calculator</h1>
        <p class="text-gray-600 mb-6">This versatile tool solves common time calculations. Use it to add or subtract a duration from a start time, find the exact duration between two points in time, or perform arithmetic on time durations.</p>

        <form id="time-calculator-form" class="space-y-6">
            
            <fieldset>
                <legend class="block text-sm font-medium text-gray-700 mb-2">1. Select Calculation Mode</legend>
                <div class="flex flex-wrap rounded-md" role="radiogroup" aria-label="Calculation Mode">
                    <input type="radio" name="calcMode" id="mode1" value="add-subtract" class="sr-only calc-mode-radio" checked>
                    <label for="mode1" class="calc-mode-label rounded-l-md border-r-0">Add/Subtract from Time</label>
                    
                    <input type="radio" name="calcMode" id="mode2" value="duration" class="sr-only calc-mode-radio">
                    <label for="mode2" class="calc-mode-label border-r-0">Duration Between Times</label>
                    
                    <input type="radio" name="calcMode" id="mode3" value="arithmetic" class="sr-only calc-mode-radio">
                    <label for="mode3" class="calc-mode-label rounded-r-md">Add/Subtract Durations</label>
                </div>
            </fieldset>

            <div id="mode1-inputs" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="m1-start-date" class="block text-sm font-medium text-gray-700">Start Date</label>
                        <input type="date" id="m1-start-date" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                        <span id="m1-start-date-error" class="error-message" aria-live="assertive"></span>
                    </div>
                    <div>
                        <label for="m1-start-time" class="block text-sm font-medium text-gray-700">Start Time (HH:MM:SS)</label>
                        <input type="time" id="m1-start-time" step="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                        <span id="m1-start-time-error" class="error-message" aria-live="assertive"></span>
                    </div>
                </div>
                <div>
                    <label for="m1-operation" class="block text-sm font-medium text-gray-700">Operation</label>
                    <select id="m1-operation" class="mt-1 block w-full md:w-1/2 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="add">Add (+)</option>
                        <option value="subtract">Subtract (-)</option>
                    </select>
                </div>
                <fieldset class="border border-gray-300 p-4 rounded-md">
                    <legend class="text-sm font-medium text-gray-700 px-2">Duration to Add/Subtract</legend>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 pt-2">
                        <div>
                            <label for="m1-days" class="block text-sm font-medium text-gray-700">Days</label>
                            <input type="number" id="m1-days" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m1-hours" class="block text-sm font-medium text-gray-700">Hours</label>
                            <input type="number" id="m1-hours" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m1-minutes" class="block text-sm font-medium text-gray-700">Minutes</label>
                            <input type="number" id="m1-minutes" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m1-seconds" class="block text-sm font-medium text-gray-700">Seconds</label>
                            <input type="number" id="m1-seconds" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    <span id="m1-duration-error" class="error-message" aria-live="assertive"></span>
                </fieldset>
            </div>

            <div id="mode2-inputs" class="hidden space-y-6">
                <fieldset class="border border-gray-300 p-4 rounded-md">
                    <legend class="text-sm font-medium text-gray-700 px-2">Start</legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 pt-2">
                        <div>
                            <label for="m2-start-date" class="block text-sm font-medium text-gray-700">Start Date</label>
                            <input type="date" id="m2-start-date" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                            <span id="m2-start-date-error" class="error-message" aria-live="assertive"></span>
                        </div>
                        <div>
                            <label for="m2-start-time" class="block text-sm font-medium text-gray-700">Start Time (HH:MM:SS)</label>
                            <input type="time" id="m2-start-time" step="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                            <span id="m2-start-time-error" class="error-message" aria-live="assertive"></span>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="border border-gray-300 p-4 rounded-md">
                    <legend class="text-sm font-medium text-gray-700 px-2">End</legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 pt-2">
                        <div>
                            <label for="m2-end-date" class="block text-sm font-medium text-gray-700">End Date</label>
                            <input type="date" id="m2-end-date" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                            <span id="m2-end-date-error" class="error-message" aria-live="assertive"></span>
                        </div>
                        <div>
                            <label for="m2-end-time" class="block text-sm font-medium text-gray-700">End Time (HH:MM:SS)</label>
                            <input type="time" id="m2-end-time" step="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" aria-required="true">
                            <span id="m2-end-time-error" class="error-message" aria-live="assertive"></span>
                        </div>
                    </div>
                </fieldset>
                <span id="m2-logic-error" class="error-message block" aria-live="assertive"></span>
            </div>
            
            <div id="mode3-inputs" class="hidden space-y-6">
                <fieldset class="border border-gray-300 p-4 rounded-md">
                    <legend class="text-sm font-medium text-gray-700 px-2">First Duration</legend>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 pt-2">
                        <div>
                            <label for="m3-days1" class="block text-sm font-medium text-gray-700">Days</label>
                            <input type="number" id="m3-days1" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-hours1" class="block text-sm font-medium text-gray-700">Hours</label>
                            <input type="number" id="m3-hours1" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-minutes1" class="block text-sm font-medium text-gray-700">Minutes</label>
                            <input type="number" id="m3-minutes1" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-seconds1" class="block text-sm font-medium text-gray-700">Seconds</label>
                            <input type="number" id="m3-seconds1" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    <span id="m3-duration1-error" class="error-message" aria-live="assertive"></span>
                </fieldset>
                
                <div>
                    <label for="m3-operation" class="block text-sm font-medium text-gray-700">Operation</label>
                    <select id="m3-operation" class="mt-1 block w-full md:w-1/2 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="add">Add (+)</option>
                        <option value="subtract">Subtract (-)</option>
                    </select>
                </div>
                
                <fieldset class="border border-gray-300 p-4 rounded-md">
                    <legend class="text-sm font-medium text-gray-700 px-2">Second Duration</legend>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 pt-2">
                        <div>
                            <label for="m3-days2" class="block text-sm font-medium text-gray-700">Days</label>
                            <input type="number" id="m3-days2" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-hours2" class="block text-sm font-medium text-gray-700">Hours</label>
                            <input type="number" id="m3-hours2" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-minutes2" class="block text-sm font-medium text-gray-700">Minutes</label>
                            <input type="number" id="m3-minutes2" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label for="m3-seconds2" class="block text-sm font-medium text-gray-700">Seconds</label>
                            <input type="number" id="m3-seconds2" min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    <span id="m3-duration2-error" class="error-message" aria-live="assertive"></span>
                </fieldset>
            </div>

            <div class="flex items-center space-x-4">
                <button type="submit" id="calculateBtn" class="px-6 py-3 bg-blue-600 text-white font-medium rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    Calculate
                </button>
                <button type="reset" id="resetBtn" class="px-6 py-3 bg-gray-200 text-gray-700 font-medium rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400">
                    Reset
                </button>
            </div>
        </form>

        <section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6" aria-live="polite">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Result</h3>
            <div id="result-container" class="space-y-2">
                <p id="result-primary" class="text-2xl font-bold text-blue-600">‚Äî</p>
                <p id="result-secondary" class="text-gray-600">Enter values and press calculate.</p>
            </div>
        </section>
    </div>

    <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose prose-blue">
        
        <h2>Authoritative Data Source and Methodology</h2>
        <p>This calculator operates based on the universally accepted standards for timekeeping. The definitions for time units (day, hour, minute, second) and date/time notation are governed by two primary standards:</p>
        <ul class="list-disc pl-5">
            <li><strong>International System of Units (SI):</strong> Defines the <strong>second</strong> as the base unit of time. All other units (minute, hour, day) are non-SI units accepted for use with the SI and are based on it (1 min = 60s, 1 hour = 3600s, 1 day = 86400s).</li>
            <li><strong>ISO 8601:</strong> An international standard for the representation of dates and times. This calculator uses its conventions, such as the 24-hour clock (HH:MM:SS), for unambiguous data entry.</li>
        </ul>
        <p class="font-semibold">All calculations are strictly based on the formulae and data provided by these standards. The tool does not account for leap seconds.</p>

        <hr class="my-6">

        <h2>The Formulae Explained</h2>
        <p>The core of all calculations involves converting all time inputs into a single, common unit‚Äî<strong>seconds</strong>‚Äîperforming the arithmetic, and then converting the result back into a human-readable format (Days, Hours, Minutes, Seconds).</p>
        
        <h3>1. Conversion to Total Seconds</h3>
        <p>A duration $\Delta T$ is converted to total seconds using the formula:</p>
        <div class="formula-box">
            $$ TotalSeconds = (d \times 86400) + (h \times 3600) + (m \times 60) + s $$
        </div>
        <p>Where $d, h, m, s$ are the days, hours, minutes, and seconds, respectively.</p>
        
        <h3>2. Calculation Logic</h3>
        <ul>
            <li><strong>Add/Subtract from Time:</strong> The start date/time is converted to a Unix timestamp (total seconds from Jan 1, 1970). The duration (in seconds) is then added or subtracted.
                <br> $T_{result\_timestamp} = T_{start\_timestamp} \pm \Delta T_{seconds}$
            </li>
            <li><strong>Duration Between Times:</strong> Both start and end date/times are converted to timestamps. The duration is the absolute difference.
                <br> $\Delta T_{seconds} = | T_{end\_timestamp} - T_{start\_timestamp} |$
            </li>
            <li><strong>Add/Subtract Durations:</strong> Both durations are converted to total seconds, and the arithmetic is performed.
                <br> $\Delta T_{total} = \Delta T_1 \pm \Delta T_2$
            </li>
        </ul>

        <h3>3. Conversion Back to D:H:M:S</h3>
        <p>The final total seconds ($S_{total}$) is converted back using modular arithmetic:</p>
        <div class="formula-box">
            $$ d = \lfloor S_{total} / 86400 \rfloor $$
            $$ S_{remaining} = S_{total} \mod 86400 $$
            $$ h = \lfloor S_{remaining} / 3600 \rfloor $$
            $$ S_{remaining} = S_{remaining} \mod 3600 $$
            $$ m = \lfloor S_{remaining} / 60 \rfloor $$
            $$ s = S_{remaining} \mod 60 $$
        </div>

        <hr class="my-6">

        <h2>Glossary of Variables</h2>
        <dl>
            <dt class="font-semibold">Time (Point)</dt>
            <dd class="pl-4 mb-2">A specific moment in time, represented by a date and time of day (e.g., "October 26, 2025 at 12:45:30").</dd>
            
            <dt class="font-semibold">Duration ($\Delta T$)</dt>
            <dd class="pl-4 mb-2">A span or length of time, independent of any start or end point (e.g., "3 hours and 15 minutes").</dd>
            
            <dt class="font-semibold">Timestamp</dt>
            <dd class="pl-4 mb-2">A numerical representation of a time point, typically the number of seconds that have elapsed since a specific epoch (e.g., the Unix epoch, Jan 1, 1970).</dd>
            
            <dt class="font-semibold">Second (s)</dt>
            <dd class="pl-4 mb-2">The SI base unit of time.</dd>
        </dl>

        <hr class="my-6">

        <h2>How It Works: A Step-by-Step Example</h2>
        <h3>Scenario: Calculating a Work Shift Duration (Across Midnight)</h3>
        <p>Let's calculate the duration of a shift that starts at <strong>10:00 PM on October 26</strong> and ends at <strong>6:30 AM on October 27</strong>.</p>
        
        <ol class="list-decimal pl-5">
            <li><strong>Mode Selection:</strong> Choose 'Duration Between Times'.</li>
            <li>
                <strong>Input Start:</strong>
                <ul>
                    <li>Start Date: `2025-10-26`</li>
                    <li>Start Time: `22:00:00`</li>
                </ul>
            </li>
            <li>
                <strong>Input End:</strong>
                <ul>
                    <li>End Date: `2025-10-27`</li>
                    <li>End Time: `06:30:00`</li>
                </ul>
            </li>
            <li><strong>Step 1: Convert to Timestamps (Seconds)</strong>
                <ul>
                    <li>$T_{start}$ (Oct 26, 2025, 22:00:00) $\approx$ 1,761,540,000 seconds</li>
                    <li>$T_{end}$ (Oct 27, 2025, 06:30:00) $\approx$ 1,761,570,600 seconds</li>
                </ul>
            </li>
            <li><strong>Step 2: Calculate Difference</strong>
                <ul>
                    <li>$\Delta T_{seconds} = 1,761,570,600 - 1,761,540,000 = 30,600$ seconds</li>
                </ul>
            </li>
            <li><strong>Step 3: Convert Back to H:M:S</strong>
                <ul>
                    <li>Hours: $h = \lfloor 30600 / 3600 \rfloor = 8$</li>
                    <li>Remaining: $30600 \mod 3600 = 1800$ seconds</li>
                    <li>Minutes: $m = \lfloor 1800 / 60 \rfloor = 30$</li>
                    <li>Remaining: $1800 \mod 60 = 0$ seconds</li>
                </ul>
            </li>
            <li><strong>Final Result:</strong> The total duration is <strong>8 hours, 30 minutes, and 0 seconds</strong>.</li>
        </ol>

        <hr class="my-6">

        <h2>Frequently Asked Questions (FAQ)</h2>
        <details>
            <summary>How do I calculate duration across midnight?</summary>
            <p class="mt-2">Use the <strong>'Duration Between Times'</strong> mode. You must enter both the Start Date and the End Date. For example, to calculate from 10:00 PM (22:00:00) today to 6:00 AM (06:00:00) tomorrow, select today's date as the start and tomorrow's date as the end.</p>
        </details>
        <details>
            <summary>What's the difference between this and a timesheet calculator?</summary>
            <p class="mt-2">This is a general-purpose time calculator. A timesheet calculator is often more specific, designed to sum up multiple durations (e.g., daily work hours) for a week and calculate payroll. This tool provides the building blocks for those calculations.</p>
        </details>
        <details>
            <summary>How does the calculator handle AM/PM?</summary>
            <p class="mt-2">To avoid ambiguity and adhere to the ISO 8601 standard, this calculator uses the <strong>24-hour format (HH:MM:SS)</strong> for all time inputs. For example, 5:30 PM should be entered as <strong>17:30:00</strong>.</p>
        </details>
        <details>
            <summary>Can I enter more than 24 hours or 60 minutes in the duration fields?</summary>
            <p class="mt-2">Yes. The 'Add/Subtract Durations' mode is designed for this. If you enter 90 minutes, it will be correctly treated as 1 hour and 30 minutes. The calculator will automatically normalize the units during calculation.</p>
        </details>
        <details>
            <summary>What is the ISO 8601 standard?</summary>
            <p class="mt-2">ISO 8601 is an international standard for data exchange, specifying how dates and times should be represented to avoid misinterpretation. Examples include using YYYY-MM-DD for dates and the 24-hour clock (HH:MM:SS) for time.</p>
        </details>
        <details>
            <summary>How are leap seconds handled?</summary>
            <p class="mt-2">This calculator does <strong>not</strong> account for leap seconds. It operates on the standard definition of a day as exactly 86,400 SI seconds. This is standard practice for almost all civil and commercial time calculations.</p>
        </details>

        <div class="mt-8 pt-6 border-t border-gray-200 text-sm text-gray-600">
            <p><strong>Tool developed by Ugo Candido.</strong> Contents verified by the CalcDomain Editorial Board.</p>
            <p>Last accuracy review: <time datetime="2026-02-15">February 15, 2026</time></p>
        </div>
    </article>
</section>

<aside class="w-full lg:w-1/3">
    <div class="sticky top-24 space-y-6">
        <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
            Ad Placement (300√ó600)
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
            <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
                <li><strong>Multi-Mode:</strong> Combines three calculators in one interface.</li>
                <li><strong>Cross-Day Calculation:</strong> Accurately finds duration across midnight and multiple days.</li>
                <li><strong>Clear Results:</strong> Provides a formatted D:H:M:S breakdown and total units (e.g., total hours).</li>
                <li><strong>Standards-Based:</strong> Uses ISO 8601 and SI unit definitions for reliable, accurate math.</li>
            </ul>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-4">Related Time & Date Tools</h3>
            <ul class="space-y-3 text-sm">
                <li><a href="date-duration.html" class="text-blue-600 hover:underline">Date Duration Calculator</a></li>
                <li><a href="hours-calculator.html" class="text-blue-600 hover:underline">Hours Calculator</a></li>
                <li><a href="time-zone-converter.html" class="text-blue-600 hover:underline">Time Zone Converter</a></li>
                <li><a href="age-calculator.html" class="text-blue-600 hover:underline">Age Calculator</a></li>
            </ul>
        </div>
    </div>
</aside>

</div>
</main>

<footer class="bg-white border-t mt-12">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
        <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
        <div class="mt-4 space-x-4">
            <a href="about.html" class="hover:text-blue-600">About</a>
            <a href="contact.html" class="hover:text-blue-600">Contact</a>
            <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
            <a href="terms.html" class="hover:text-blue-600">Terms</a>
        </div>
    </div>
</footer>

<script defer>
document.addEventListener('DOMContentLoaded', () => {

    // Inizializza KaTeX per le formule
    if (window.renderMathInElement) {
        renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false},
            ]
        });
    }

    // Costanti
    const SECONDS_PER_DAY = 86400;
    const SECONDS_PER_HOUR = 3600;
    const SECONDS_PER_MINUTE = 60;

    // Selettori Elementi UI
    const form = document.getElementById('time-calculator-form');
    const modeRadios = document.querySelectorAll('input[name="calcMode"]');
    const modeContainers = {
        'add-subtract': document.getElementById('mode1-inputs'),
        'duration': document.getElementById('mode2-inputs'),
        'arithmetic': document.getElementById('mode3-inputs')
    };
    const resultPrimary = document.getElementById('result-primary');
    const resultSecondary = document.getElementById('result-secondary');
    
    // Elementi Modalit√† 1
    const m1 = {
        startDate: document.getElementById('m1-start-date'),
        startTime: document.getElementById('m1-start-time'),
        operation: document.getElementById('m1-operation'),
        days: document.getElementById('m1-days'),
        hours: document.getElementById('m1-hours'),
        minutes: document.getElementById('m1-minutes'),
        seconds: document.getElementById('m1-seconds'),
        dateError: document.getElementById('m1-start-date-error'),
        timeError: document.getElementById('m1-start-time-error'),
        durationError: document.getElementById('m1-duration-error')
    };

    // Elementi Modalit√† 2
    const m2 = {
        startDate: document.getElementById('m2-start-date'),
        startTime: document.getElementById('m2-start-time'),
        endDate: document.getElementById('m2-end-date'),
        endTime: document.getElementById('m2-end-time'),
        startDateError: document.getElementById('m2-start-date-error'),
        startTimeError: document.getElementById('m2-start-time-error'),
        endDateError: document.getElementById('m2-end-date-error'),
        endTimeError: document.getElementById('m2-end-time-error'),
        logicError: document.getElementById('m2-logic-error')
    };
    
    // Elementi Modalit√† 3
    const m3 = {
        days1: document.getElementById('m3-days1'),
        hours1: document.getElementById('m3-hours1'),
        minutes1: document.getElementById('m3-minutes1'),
        seconds1: document.getElementById('m3-seconds1'),
        operation: document.getElementById('m3-operation'),
        days2: document.getElementById('m3-days2'),
        hours2: document.getElementById('m3-hours2'),
        minutes2: document.getElementById('m3-minutes2'),
        seconds2: document.getElementById('m3-seconds2'),
        duration1Error: document.getElementById('m3-duration1-error'),
        duration2Error: document.getElementById('m3-duration2-error')
    };

    // --- Funzioni di Utility ---

    /**
     * Mostra un messaggio di errore e imposta aria-describedby
     * @param {HTMLElement} errorEl - L'elemento span per l'errore
     * @param {HTMLElement} inputEl - L'elemento input da associare
     * @param {string} message - Il messaggio di errore
     */
    function showError(errorEl, inputEl, message) {
        errorEl.textContent = message;
        inputEl.setAttribute('aria-describedby', errorEl.id);
        inputEl.setAttribute('aria-invalid', 'true');
    }

    /**
     * Cancella tutti i messaggi di errore e gli attributi ARIA
     */
    function clearErrors() {
        const errorMessages = document.querySelectorAll('.error-message');
        errorMessages.forEach(el => { el.textContent = ''; });
        
        const inputs = form.querySelectorAll('input, select');
        inputs.forEach(el => {
            el.removeAttribute('aria-invalid');
            // Rimuovi solo l'associazione all'errore, non altri describedby
            const describedBy = el.getAttribute('aria-describedby');
            if (describedBy && describedBy.includes('-error')) {
                 el.setAttribute('aria-describedby', describedBy.replace(/-error\b/g, '').trim());
            }
        });
    }

    /**
     * Mostra i risultati
     * @param {string} primary - Il risultato principale (grande)
     * @param {string} secondary - Il risultato secondario (descrizione)
     */
    function showResult(primary, secondary) {
        resultPrimary.textContent = primary;
        resultSecondary.textContent = secondary;
    }

    /**
     * Converte un gruppo di input di durata in secondi
     * @param {HTMLElement} d - Input giorni
     * @param {HTMLElement} h - Input ore
     * @param {HTMLElement} m - Input minuti
     * @param {HTMLElement} s - Input secondi
     * @returns {number} - Durata totale in secondi
     */
    function parseDurationToSeconds(d, h, m, s) {
        const days = parseInt(d.value) || 0;
        const hours = parseInt(h.value) || 0;
        const minutes = parseInt(m.value) || 0;
        const seconds = parseInt(s.value) || 0;
        return (days * SECONDS_PER_DAY) + (hours * SECONDS_PER_HOUR) + (minutes * SECONDS_MINUTE) + seconds;
    }

    /**
     * Formatta i secondi totali in un oggetto {d, h, m, s}
     * @param {number} totalSeconds - Secondi totali
     * @returns {{d: number, h: number, m: number, s: number}}
     */
    function formatSecondsToDHMS(totalSeconds) {
        const sign = totalSeconds < 0 ? -1 : 1;
        let seconds = Math.abs(totalSeconds);
        
        const d = Math.floor(seconds / SECONDS_PER_DAY) * sign;
        seconds %= SECONDS_PER_DAY;
        const h = Math.floor(seconds / SECONDS_PER_HOUR) * sign;
        seconds %= SECONDS_PER_HOUR;
        const m = Math.floor(seconds / SECONDS_MINUTE) * sign;
        seconds = (seconds % SECONDS_MINUTE) * sign;
        
        return { d, h, m, s: Math.round(seconds * 100) / 100 }; // Arrotonda a 2 decimali per sicurezza
    }

    /**
     * Formatta un oggetto {d, h, m, s} in una stringa leggibile
     * @param {{d: number, h: number, m: number, s: number}} dhms
     * @returns {string} - Stringa formattata
     */
    function formatDHMSVerbose(dhms) {
        const parts = [];
        if (dhms.d !== 0) parts.push(`${dhms.d} ${Math.abs(dhms.d) === 1 ? 'day' : 'days'}`);
        if (dhms.h !== 0) parts.push(`${dhms.h} ${Math.abs(dhms.h) === 1 ? 'hour' : 'hours'}`);
        if (dhms.m !== 0) parts.push(`${dhms.m} ${Math.abs(dhms.m) === 1 ? 'minute' : 'minutes'}`);
        if (dhms.s !== 0 || parts.length === 0) parts.push(`${dhms.s} ${Math.abs(dhms.s) === 1 ? 'second' : 'seconds'}`);
        
        return parts.join(', ');
    }

    /**
     * Formatta un oggetto Date in una stringa leggibile
     * @param {Date} date - Oggetto Data
     * @returns {string} - Stringa formattata
     */
    function formatDateTimeResult(date) {
        return date.toLocaleString(undefined, {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit'
        });
    }

    // --- Gestori di Eventi ---

    // Cambia modalit√†
    modeRadios.forEach(radio => {
        radio.addEventListener('change', (e) => {
            Object.values(modeContainers).forEach(container => container.classList.add('hidden'));
            modeContainers[e.target.value].classList.remove('hidden');
            resetForm(); // Resetta i valori quando si cambia modalit√†
        });
    });

    // Sottomissione Form
    form.addEventListener('submit', (e) => {
        e.preventDefault();
        clearErrors();
        const currentMode = document.querySelector('input[name="calcMode"]:checked').value;
        
        switch (currentMode) {
            case 'add-subtract':
                calculateMode1();
                break;
            case 'duration':
                calculateMode2();
                break;
            case 'arithmetic':
                calculateMode3();
                break;
        }
    });
    
    // Reset Form
    form.addEventListener('reset', () => {
        resetForm();
    });
    
    function resetForm() {
        clearErrors();
        showResult("‚Äî", "Enter values and press calculate.");
        // Non √® necessario reimpostare i valori del form, type="reset" lo fa
    }

    // --- Logica di Calcolo per Modalit√† ---

    function calculateMode1() {
        // Validazione
        if (!m1.startDate.value) {
            showError(m1.dateError, m1.startDate, 'Start Date is required.');
            m1.startDate.focus();
            return;
        }
        if (!m1.startTime.value) {
            showError(m1.timeError, m1.startTime, 'Start Time is required.');
            m1.startTime.focus();
            return;
        }
        
        const durationSec = parseDurationToSeconds(m1.days, m1.hours, m1.minutes, m1.seconds);
        if (durationSec === 0) {
            showError(m1.durationError, m1.days, 'Duration must be greater than zero.');
            m1.days.focus();
            return;
        }

        try {
            const startDateTime = new Date(`${m1.startDate.value}T${m1.startTime.value}`);
            if (isNaN(startDateTime.getTime())) throw new Error('Invalid date/time');
            
            const operation = m1.operation.value;
            const durationMs = durationSec * 1000;
            
            const resultMs = operation === 'add'
                ? startDateTime.getTime() + durationMs
                : startDateTime.getTime() - durationMs;
                
            const resultDate = new Date(resultMs);
            
            showResult(
                formatDateTimeResult(resultDate),
                `Result of ${operation === 'add' ? 'adding' : 'subtracting'} ${formatDHMSVerbose(formatSecondsToDHMS(durationSec))}`
            );
            
        } catch (e) {
            showError(m1.timeError, m1.startTime, 'Invalid Start Date or Time format.');
        }
    }

    function calculateMode2() {
        // Validazione
        let isValid = true;
        if (!m2.startDate.value) {
            showError(m2.startDateError, m2.startDate, 'Start Date is required.');
            isValid = false;
        }
        if (!m2.startTime.value) {
            showError(m2.startTimeError, m2.startTime, 'Start Time is required.');
            isValid = false;
        }
        if (!m2.endDate.value) {
            showError(m2.endDateError, m2.endDate, 'End Date is required.');
            isValid = false;
        }
        if (!m2.endTime.value) {
            showError(m2.endTimeError, m2.endTime, 'End Time is required.');
            isValid = false;
        }
        if (!isValid) return;

        try {
            const startDateTime = new Date(`${m2.startDate.value}T${m2.startTime.value}`);
            const endDateTime = new Date(`${m2.endDate.value}T${m2.endTime.value}`);
            
            if (isNaN(startDateTime.getTime())) {
                showError(m2.startTimeError, m2.startTime, 'Invalid Start Date or Time.');
                return;
            }
            if (isNaN(endDateTime.getTime())) {
                showError(m2.endTimeError, m2.endTime, 'Invalid End Date or Time.');
                return;
            }

            if (endDateTime.getTime() < startDateTime.getTime()) {
                showError(m2.logicError, m2.endDate, 'End Date/Time must be after Start Date/Time.');
                m2.endDate.focus();
                return;
            }
            
            const diffMs = endDateTime.getTime() - startDateTime.getTime();
            const diffSec = Math.round(diffMs / 1000);
            const dhms = formatSecondsToDHMS(diffSec);
            
            showResult(
                formatDHMSVerbose(dhms),
                `Total: ${diffSec.toLocaleString()} seconds or ${(diffSec / SECONDS_PER_HOUR).toFixed(2)} hours`
            );

        } catch (e) {
            showError(m2.logicError, m2.startDate, 'Error processing dates. Check formats.');
        }
    }
    
    function calculateMode3() {
        const duration1Sec = parseDurationToSeconds(m3.days1, m3.hours1, m3.minutes1, m3.seconds1);
        const duration2Sec = parseDurationToSeconds(m3.days2, m3.hours2, m3.minutes2, m3.seconds2);

        // Validazione
        if (duration1Sec === 0) {
            showError(m3.duration1Error, m3.days1, 'First duration must be greater than zero.');
            m3.days1.focus();
            return;
        }
        if (duration2Sec === 0) {
            showError(m3.duration2Error, m3.days2, 'Second duration must be greater than zero.');
            m3.days2.focus();
            return;
        }
        
        const operation = m3.operation.value;
        let totalSeconds;
        
        if (operation === 'add') {
            totalSeconds = duration1Sec + duration2Sec;
        } else {
            totalSeconds = duration1Sec - duration2Sec;
        }
        
        const dhms = formatSecondsToDHMS(totalSeconds);
        
        showResult(
            formatDHMSVerbose(dhms),
            `Total: ${totalSeconds.toLocaleString()} seconds`
        );
    }
    
    // Imposta la data odierna come default per gli input date
    const today = new Date().toISOString().split('T')[0];
    [m1.startDate, m2.startDate, m2.endDate].forEach(el => {
        if (el) el.value = today;
    });

});
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<title>Volume Calculator | Geometry Tool for Accurate 3D Shape Volumes</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="Free, professional-grade volume calculator for cubes, boxes, cylinders, cones, spheres, pyramids, and ellipsoids. Mobile-first, WCAG 2.1 AA accessible, and optimized for speed." name="description"/>
<meta content="Ugo Candido" name="author"/>
<link href="https://calcdomain.com/volume.html" rel="canonical"/>
<meta content="#005A9C" name="theme-color"/>
<style>
    /* --- Enhanced CalcDomain CSS with Mobile-First Design & Accessibility (critical inline) --- */

    /* Design Tokens */
    :root {
      --primary-color:#005A9C; --secondary-color:#003F6E; --accent-color:#00A4E4;
      --background-color:#F8F9FA; --surface-color:#FFFFFF;
      --text-color:#212529; --muted-text-color:#5A6772; --border-color:#DEE2E6;
      --success-color:#198754; --error-color:#DC3545; --warning-color:#FFC107;

      --font-sans-serif: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      --font-monospace: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

      --touch-target-min:48px; --touch-target-optimal:60px;
      --input-padding:clamp(.75rem,2vw,1rem);
      --border-radius-button:10px; --border-radius-card:12px;

      --transition-standard:.2s ease-in-out; --transition-fast:.1s ease-in-out;

      --container-max-width:1200px; --sidebar-width:clamp(300px,40vw,480px);
      --gap-small:.5rem; --gap-medium:1rem; --gap-large:2rem;

      --overlay-bg:rgba(0,0,0,.4);
    }

    @media (prefers-contrast: more) {
      :root { --primary-color:#003366; --secondary-color:#001B44; --text-color:#000; --border-color:#000; --background-color:#fff; }
    }
    @media (prefers-reduced-motion: reduce) {
      *,*::before,*::after { animation-duration:.01ms!important; animation-iteration-count:1!important; transition-duration:.01ms!important; scroll-behavior:auto!important; }
    }

    /* Base */
    *,*::before,*::after { box-sizing:border-box; }
    html { font-size:clamp(16px,2.5vw,18px); }
    body {
      margin:0; font-family:var(--font-sans-serif); background:var(--background-color); color:var(--text-color);
      line-height:1.6; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    a { color:var(--primary-color); text-decoration:none; }
    a:hover { color:var(--secondary-color); text-decoration:underline; }
    a:focus { outline:3px solid var(--primary-color); outline-offset:2px; border-radius:2px; }
    h1,h2,h3,h4 { color:var(--secondary-color); margin:0 0 .75rem; line-height:1.25; font-weight:800; }
    h1 { font-size:clamp(1.8rem,4vw,2.4rem); }
    h2 { font-size:clamp(1.5rem,3.5vw,2rem); }
    h3 { font-size:clamp(1.25rem,3vw,1.6rem); }
    p { margin:.5rem 0 1rem; max-width:70ch; }
    code, .katex-like { font-family:var(--font-monospace); background:#EDF2F7; padding:.2em .4em; border-radius:4px; }

    /* Skip link */
    .skip-link { position:absolute; top:-40px; left:6px; background:var(--primary-color); color:#fff; padding:8px 14px; z-index:1000; text-decoration:none; border-radius:0 0 6px 6px; font-weight:700; }
    .skip-link:focus { top:0; }

    /* Layout helpers */
    .container { max-width:var(--container-max-width); margin:0 auto; padding:0 clamp(1rem,4vw,2rem); }
    .main-content { padding:var(--gap-large) 0; }

    /* Header (non-sticky by requirement) */
    .site-header { background:var(--surface-color); padding:.75rem 0; border-bottom:1px solid var(--border-color); box-shadow:0 2px 4px rgba(0,0,0,.04); position:static; }
    .header-content { display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:var(--gap-medium); }
    .logo { font-weight:900; color:var(--primary-color); font-size:clamp(1.25rem,3vw,1.5rem); }
    .site-search { display:flex; align-items:center; gap:.5rem; }
    .site-search input[type="search"] { flex:1; min-width:0; padding:.6rem .75rem; border:1px solid var(--border-color); border-radius:10px; background:#fff; }
    .site-search input[type="search"]:focus { outline:none; border-color:var(--primary-color); box-shadow:0 0 0 3px rgba(0,90,156,.15); }
    .btn { display:inline-flex; align-items:center; justify-content:center; padding:var(--input-padding) 1rem; font-weight:700; border-radius:var(--border-radius-button); border:1px solid transparent; cursor:pointer; min-height:var(--touch-target-min); min-width:var(--touch-target-min); }
    .btn-primary { background:var(--primary-color); color:#fff; border-color:var(--primary-color); }
    .btn-primary:hover { background:var(--secondary-color); border-color:var(--secondary-color); color:#fff; text-decoration:none; }
    .btn-secondary { background:transparent; color:var(--primary-color); border-color:var(--primary-color); }
    .nav-toggle { appearance:none; border:1px solid var(--border-color); background:var(--surface-color); border-radius:var(--border-radius-button); padding:.5rem .75rem; min-height:var(--touch-target-min); display:inline-flex; align-items:center; gap:.5rem; cursor:pointer; }
    .nav-toggle:focus { outline:3px solid var(--primary-color); outline-offset:2px; }
    .nav-toggle-box { position:relative; width:22px; height:16px; display:inline-block; }
    .nav-toggle-inner, .nav-toggle-inner::before, .nav-toggle-inner::after { content:""; position:absolute; height:2px; width:100%; background:var(--text-color); left:0; transition:transform var(--transition-standard), opacity var(--transition-standard); }
    .nav-toggle-inner { top:50%; transform:translateY(-50%); }
    .nav-toggle-inner::before { top:-7px; }
    .nav-toggle-inner::after { top:7px; }
    .nav-toggle.is-active .nav-toggle-inner { background:transparent; }
    .nav-toggle.is-active .nav-toggle-inner::before { transform:translateY(7px) rotate(45deg); }
    .nav-toggle.is-active .nav-toggle-inner::after { transform:translateY(-7px) rotate(-45deg); }

    .main-nav { position:fixed; inset:0; background:var(--surface-color); transform:translateY(-100%); transition:transform var(--transition-standard); padding:5.5rem 1.25rem 2rem; overflow-y:auto; z-index:999; border-top:1px solid var(--border-color); }
    .main-nav.is-open { transform:translateY(0); }
    .nav-header { position:sticky; top:0; display:flex; align-items:center; justify-content:space-between; background:var(--surface-color); padding:.5rem .25rem .75rem; margin:-.5rem 0 .5rem; border-bottom:1px solid var(--border-color); }
    .nav-title { font-weight:800; color:var(--secondary-color); }
    .nav-close { appearance:none; border:1px solid var(--border-color); background:var(--surface-color); border-radius:var(--border-radius-button); padding:.5rem .75rem; font-weight:700; cursor:pointer; min-height:var(--touch-target-min); }

    .main-nav ul { list-style:none; display:grid; gap:.25rem; max-width:720px; margin:0 auto; padding:0; }
    .main-nav li a { display:block; padding:.9rem .75rem; border-radius:8px; font-weight:700; color:var(--secondary-color); border:1px solid transparent; }
    .main-nav li a:hover { text-decoration:none; background:rgba(0,90,156,.06); border-color:var(--border-color); }
    .main-nav li.divider { height:1px; background:var(--border-color); margin:.5rem 0 .25rem; }

    @media (max-width:380px){
      .header-content{ grid-template-columns:auto auto; grid-template-areas:"logo navbtn" "search search"; }
      .logo{ grid-area:logo; }
      .nav-toggle{ grid-area:navbtn; justify-self:end; }
      .site-search{ grid-area:search; }
    }

    /* Breadcrumbs */
    nav.breadcrumb { margin:1rem 0; font-size:.95rem; color:var(--muted-text-color); }

    /* Calculator layout */
    .calculator-layout { display:grid; grid-template-columns:1fr; gap:var(--gap-large); }
    @media (min-width: 992px) {
      .calculator-layout { grid-template-columns: minmax(280px, var(--sidebar-width)) 1fr; align-items:start; }
    }

    .card { background:var(--surface-color); border:1px solid var(--border-color); border-radius:var(--border-radius-card); padding:clamp(1rem,3vw,1.5rem); box-shadow:0 4px 6px rgba(0,0,0,.05); }

    /* Form */
    .form-group { margin-bottom:1rem; }
    .form-group label { display:flex; align-items:center; justify-content:space-between; font-weight:800; margin-bottom:.5rem; gap:.5rem; }
    .form-control { width:100%; min-height:var(--touch-target-min); padding:.75rem 1rem; font-size:1rem; border:1px solid var(--border-color); border-radius:8px; background:#fff; }
    .form-control:focus-visible { outline:3px solid var(--primary-color); outline-offset:2px; border-color:var(--primary-color); box-shadow:0 0 0 3px rgba(0,90,156,.15); }
    .form-control[aria-invalid="true"] { border-color:var(--error-color); }

    .input-group { position:relative; }
    .input-suffix { position:absolute; right:.75rem; top:50%; transform:translateY(-50%); color:var(--muted-text-color); pointer-events:none; }
    .units-row { display:grid; grid-template-columns:1fr auto; gap:.5rem; align-items:center; }

    fieldset { border:0; padding:0; margin:0 0 1rem; }
    legend { font-weight:800; margin-bottom:.5rem; }

    .radio-group { display:flex; gap:.5rem; flex-wrap:wrap; }
    .radio-pill { position:relative; }
    .radio-pill input[type="radio"] { position:absolute; opacity:0; inset:0; width:100%; height:100%; }
    .radio-pill label { display:inline-flex; align-items:center; justify-content:center; min-height:var(--touch-target-min); padding:.5rem .9rem; border:1px solid var(--border-color); border-radius:999px; cursor:pointer; font-weight:700; color:var(--secondary-color); }
    .radio-pill input[type="radio"]:checked + label { background:var(--primary-color); color:#fff; border-color:var(--primary-color); }
    .radio-pill input[type="radio"]:focus-visible + label { outline:3px solid var(--primary-color); outline-offset:2px; }

    .error-message { color:var(--error-color); font-size:.9rem; margin-top:.35rem; min-height:1.25rem; }

    /* Tooltip */
    .help-btn { display:inline-flex; align-items:center; justify-content:center; width:32px; height:32px; min-width:32px; min-height:32px; border-radius:50%; border:1px solid var(--border-color); background:var(--surface-color); color:var(--secondary-color); font-weight:900; cursor:pointer; line-height:1; }
    .help-btn:focus { outline:3px solid var(--primary-color); outline-offset:2px; }
    .tooltip { display:none; margin:.35rem 0 0; background:#F1F5F9; border:1px dashed var(--border-color); border-radius:8px; padding:.5rem .75rem; color:#0F172A; }
    .tooltip[aria-hidden="false"] { display:block; }

    /* Results */
    .results-container { margin:0; }
    .results-box { margin-top:.5rem; padding:1rem; background:var(--background-color); border:1px solid var(--border-color); border-radius:10px; min-height:240px; }
    .results-box[aria-busy="true"] { opacity:.7; }
    .result-grid { display:grid; grid-template-columns:1fr; gap:.75rem; }
    @media (min-width: 560px) { .result-grid { grid-template-columns:1fr 1fr; } }
    .result-item { display:flex; justify-content:space-between; align-items:baseline; gap:.5rem; padding:.35rem .25rem; border-bottom:1px dashed var(--border-color); }
    .result-item:last-child { border-bottom:0; }
    .result-label { color:var(--muted-text-color); }
    .result-value { font-weight:900; color:var(--success-color); font-size:1.1rem; }

    .live-summary { margin-top:.75rem; font-size:.95rem; color:#0f5132; background:#d1e7dd; border:1px solid #badbcc; border-radius:8px; padding:.5rem .75rem; }

    /* Content sections */
    .content-container h2 { margin-top:2rem; border-bottom:1px solid var(--border-color); padding-bottom:.5rem; }
    .formula-box { background:#EEF2FF; padding:1rem; border-radius:10px; margin:1rem 0; font-size:1.05rem; overflow-x:auto; }
    .definition-list { display:grid; grid-template-columns:1fr; gap:.5rem; }
    @media (min-width:700px){ .definition-list { grid-template-columns: 1fr 2fr; } }
    .definition-list dt { font-weight:800; color:var(--secondary-color); }
    .definition-list dd { margin:0; color:#1F2937; }

    /* Footer */
    .site-footer { background:var(--secondary-color); color:#fff; padding:2rem 0; margin-top:3rem; }
    .site-footer a { color:#fff; }
    .footer-content { display:grid; grid-template-columns:repeat(auto-fit, minmax(200px,1fr)); gap:1.5rem; }
    .footer-bottom { text-align:center; margin-top:1.5rem; padding-top:1rem; border-top:1px solid rgba(255,255,255,.25); font-size:.95rem; }

    /* Utility */
    .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
    .visually-hidden { position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px, 1px, 1px, 1px); white-space:nowrap; }

  </style>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Volume Calculator",
  "description": "Professional, mobile-first volume calculator for common 3D shapes with unit conversions. Accessible (WCAG 2.1 AA) and optimized for Core Web Vitals.",
  "url": "https://calcdomain.com/volume.html",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  },
  "mainEntity": [
    {
      "@type": "HowTo",
      "name": "How it works: a step-by-step example (Cylinder)",
      "description": "Compute the volume of a cylinder by entering radius and height, choosing a length unit, and reading the converted results.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Choose shape",
          "text": "Select Cylinder from the shape options."
        },
        {
          "@type": "HowToStep",
          "name": "Enter dimensions",
          "text": "Input radius = 0.5 m and height = 2 m."
        },
        {
          "@type": "HowToStep",
          "name": "Select units",
          "text": "Set Length Unit to meters (m)."
        },
        {
          "@type": "HowToStep",
          "name": "Get results",
          "text": "The calculator computes V = π r^2 h = π × 0.5^2 × 2 = 1.570796 m³. It also shows liters and gallon conversions."
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Which shapes are supported?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Rectangular prism (box), cube, cylinder, cone, sphere, square pyramid, and ellipsoid."
          }
        },
        {
          "@type": "Question",
          "name": "Can I switch between radius and diameter inputs?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. For spheres, cylinders, and cones you can toggle between entering radius or diameter."
          }
        },
        {
          "@type": "Question",
          "name": "Which units can I use?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Millimeters, centimeters, meters, inches, feet, and yards. Results are shown in the corresponding cubic unit and also converted to m³, liters, US gallons, cubic feet, and imperial gallons."
          }
        },
        {
          "@type": "Question",
          "name": "Is this calculator accurate enough for engineering?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. It uses standard geometric volume formulas and double-precision math in your browser. For safety-critical work, pair results with professional review."
          }
        },
        {
          "@type": "Question",
          "name": "Does it work offline?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The single-file page works once loaded, as calculations run fully client-side. However, without a service worker you need connectivity for the initial load."
          }
        },
        {
          "@type": "Question",
          "name": "How are gallons calculated?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "US gallons use 1 gal = 3.785411784 liters. Imperial gallons use 1 gal = 4.54609 liters."
          }
        },
        {
          "@type": "Question",
          "name": "Why do my results show many decimals?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The tool displays up to 6 significant digits and adapts to very large or small volumes. You can round values as needed for your context."
          }
        }
      ]
    }
  ]
}
  </script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="search.js" defer></script>
<!-- MathJax for LaTeX formulas -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['\(','\)'], ['$', '$']],
      displayMath: [['\[','\]']]
    },
    svg: { fontCache: 'global' }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link rel="preload" href="/assets/js/mobile-menu.js" as="script">
<link rel="preload" href="/assets/js/page-enhancements.js" as="script">

</head>
<body>
<a class="skip-link" href="#main-content">Skip to main content</a>

<main class="main-content" id="main-content">
<div class="container">
<nav aria-label="Breadcrumb" class="breadcrumb">
<a href="/">Home</a> / <a href="https://calcdomain.com/math.html">Math</a> / <a href="https://calcdomain.com/geometry.html">Geometry</a> / Volume Calculator
      </nav>
<!-- 1. Page Title -->
<h1>Volume Calculator</h1>
<!-- 2. Introduction -->
<p>
        This professional-grade volume calculator helps students, engineers, makers, and construction pros compute volumes for common 3D shapes. Enter the dimensions, choose your preferred unit, and instantly get precise results with trustworthy unit conversions.
      </p>
<div class="calculator-layout">
<!-- 3. Calculator Interactive -->
<section aria-labelledby="calc-heading" class="card" id="volume-calculator">
<h2 id="calc-heading">Calculator</h2>
<!-- Shape selection -->
<fieldset aria-describedby="shapeHelp">
<legend>Choose a shape</legend>
<div aria-label="Shape" class="radio-group" role="radiogroup">
<div class="radio-pill">
<input checked="" id="shape-box" name="shape" type="radio" value="box"/>
<label for="shape-box">Rectangular prism</label>
</div>
<div class="radio-pill">
<input id="shape-cube" name="shape" type="radio" value="cube"/>
<label for="shape-cube">Cube</label>
</div>
<div class="radio-pill">
<input id="shape-cylinder" name="shape" type="radio" value="cylinder"/>
<label for="shape-cylinder">Cylinder</label>
</div>
<div class="radio-pill">
<input id="shape-cone" name="shape" type="radio" value="cone"/>
<label for="shape-cone">Cone</label>
</div>
<div class="radio-pill">
<input id="shape-sphere" name="shape" type="radio" value="sphere"/>
<label for="shape-sphere">Sphere</label>
</div>
<div class="radio-pill">
<input id="shape-pyramid" name="shape" type="radio" value="pyramid"/>
<label for="shape-pyramid">Square pyramid</label>
</div>
<div class="radio-pill">
<input id="shape-ellipsoid" name="shape" type="radio" value="ellipsoid"/>
<label for="shape-ellipsoid">Ellipsoid</label>
</div>
</div>
<p class="sr-only" id="shapeHelp">Selecting a shape shows the appropriate inputs below.</p>
</fieldset>
<!-- Units -->
<div class="form-group">
<label for="lengthUnit">Length unit *</label>
<select aria-describedby="lengthUnitDesc lengthUnitError" aria-required="true" class="form-control" id="lengthUnit">
<option value="mm">millimeter (mm)</option>
<option value="cm">centimeter (cm)</option>
<option selected="" value="m">meter (m)</option>
<option value="in">inch (in)</option>
<option value="ft">foot (ft)</option>
<option value="yd">yard (yd)</option>
</select>
<div aria-hidden="true" class="tooltip" id="lengthUnitDesc" role="note">Sets the unit for all length inputs below. Results also include conversions.</div>
<div aria-live="polite" class="error-message" id="lengthUnitError" role="alert"></div>
</div>
<!-- Box fields -->
<div class="shape-fields" id="fields-box">
<div class="form-group">
<label for="box-length">
                Length (L) *
                <button aria-controls="tip-box-length" aria-expanded="false" aria-label="Help: Length" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-box-length err-box-length" aria-required="true" class="form-control" id="box-length" inputmode="decimal" min="0" placeholder="e.g., 2.4" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">L</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-box-length" role="note">Longest edge of the prism.</div>
<div aria-live="polite" class="error-message" id="err-box-length" role="alert"></div>
</div>
<div class="form-group">
<label for="box-width">
                Width (W) *
                <button aria-controls="tip-box-width" aria-expanded="false" aria-label="Help: Width" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-box-width err-box-width" aria-required="true" class="form-control" id="box-width" inputmode="decimal" min="0" placeholder="e.g., 1.1" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">W</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-box-width" role="note">Shorter horizontal edge.</div>
<div aria-live="polite" class="error-message" id="err-box-width" role="alert"></div>
</div>
<div class="form-group">
<label for="box-height">
                Height (H) *
                <button aria-controls="tip-box-height" aria-expanded="false" aria-label="Help: Height" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-box-height err-box-height" aria-required="true" class="form-control" id="box-height" inputmode="decimal" min="0" placeholder="e.g., 0.75" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">H</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-box-height" role="note">Vertical edge from base to top.</div>
<div aria-live="polite" class="error-message" id="err-box-height" role="alert"></div>
</div>
</div>
<!-- Cube fields -->
<div aria-hidden="true" class="shape-fields visually-hidden" id="fields-cube">
<div class="form-group">
<label for="cube-side">
                Side (s) *
                <button aria-controls="tip-cube-side" aria-expanded="false" aria-label="Help: Cube side" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-cube-side err-cube-side" aria-required="true" class="form-control" id="cube-side" inputmode="decimal" min="0" placeholder="e.g., 0.3" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">s</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-cube-side" role="note">All edges of a cube have the same length.</div>
<div aria-live="polite" class="error-message" id="err-cube-side" role="alert"></div>
</div>
</div>
<!-- Cylinder fields -->
<div aria-hidden="true" class="shape-fields visually-hidden" id="fields-cylinder">
<div class="form-group">
<fieldset>
<legend class="sr-only">Enter radius or diameter</legend>
<div aria-label="Cylinder input mode" class="radio-group" role="radiogroup">
<div class="radio-pill">
<input checked="" id="cyl-mode-radius" name="cylMode" type="radio" value="radius"/>
<label for="cyl-mode-radius">Radius</label>
</div>
<div class="radio-pill">
<input id="cyl-mode-diameter" name="cylMode" type="radio" value="diameter"/>
<label for="cyl-mode-diameter">Diameter</label>
</div>
</div>
</fieldset>
</div>
<div class="form-group">
<label for="cyl-rd">
                Radius / Diameter *
                <button aria-controls="tip-cyl-rd" aria-expanded="false" aria-label="Help: Cylinder radius or diameter" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-cyl-rd err-cyl-rd" aria-required="true" class="form-control" id="cyl-rd" inputmode="decimal" min="0" placeholder="e.g., 0.5" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix" id="cyl-rd-suffix">r</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-cyl-rd" role="note">Enter either radius or diameter based on the toggle above.</div>
<div aria-live="polite" class="error-message" id="err-cyl-rd" role="alert"></div>
</div>
<div class="form-group">
<label for="cyl-height">
                Height (h) *
                <button aria-controls="tip-cyl-height" aria-expanded="false" aria-label="Help: Cylinder height" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-cyl-height err-cyl-height" aria-required="true" class="form-control" id="cyl-height" inputmode="decimal" min="0" placeholder="e.g., 2" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">h</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-cyl-height" role="note">Distance from base to top along the axis.</div>
<div aria-live="polite" class="error-message" id="err-cyl-height" role="alert"></div>
</div>
</div>
<!-- Cone fields -->
<div aria-hidden="true" class="shape-fields visually-hidden" id="fields-cone">
<div class="form-group">
<fieldset>
<legend class="sr-only">Enter radius or diameter</legend>
<div aria-label="Cone input mode" class="radio-group" role="radiogroup">
<div class="radio-pill">
<input checked="" id="cone-mode-radius" name="coneMode" type="radio" value="radius"/>
<label for="cone-mode-radius">Radius</label>
</div>
<div class="radio-pill">
<input id="cone-mode-diameter" name="coneMode" type="radio" value="diameter"/>
<label for="cone-mode-diameter">Diameter</label>
</div>
</div>
</fieldset>
</div>
<div class="form-group">
<label for="cone-rd">
                Radius / Diameter *
                <button aria-controls="tip-cone-rd" aria-expanded="false" aria-label="Help: Cone radius or diameter" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-cone-rd err-cone-rd" aria-required="true" class="form-control" id="cone-rd" inputmode="decimal" min="0" placeholder="e.g., 0.3" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix" id="cone-rd-suffix">r</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-cone-rd" role="note">Enter radius or diameter of the base circle.</div>
<div aria-live="polite" class="error-message" id="err-cone-rd" role="alert"></div>
</div>
<div class="form-group">
<label for="cone-height">
                Height (h) *
                <button aria-controls="tip-cone-height" aria-expanded="false" aria-label="Help: Cone height" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-cone-height err-cone-height" aria-required="true" class="form-control" id="cone-height" inputmode="decimal" min="0" placeholder="e.g., 1.2" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">h</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-cone-height" role="note">Perpendicular distance from base to tip.</div>
<div aria-live="polite" class="error-message" id="err-cone-height" role="alert"></div>
</div>
</div>
<!-- Sphere fields -->
<div aria-hidden="true" class="shape-fields visually-hidden" id="fields-sphere">
<div class="form-group">
<fieldset>
<legend class="sr-only">Enter radius or diameter</legend>
<div aria-label="Sphere input mode" class="radio-group" role="radiogroup">
<div class="radio-pill">
<input checked="" id="sphere-mode-radius" name="sphereMode" type="radio" value="radius"/>
<label for="sphere-mode-radius">Radius</label>
</div>
<div class="radio-pill">
<input id="sphere-mode-diameter" name="sphereMode" type="radio" value="diameter"/>
<label for="sphere-mode-diameter">Diameter</label>
</div>
</div>
</fieldset>
</div>
<div class="form-group">
<label for="sphere-rd">
                Radius / Diameter *
                <button aria-controls="tip-sphere-rd" aria-expanded="false" aria-label="Help: Sphere radius or diameter" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-sphere-rd err-sphere-rd" aria-required="true" class="form-control" id="sphere-rd" inputmode="decimal" min="0" placeholder="e.g., 0.15" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix" id="sphere-rd-suffix">r</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-sphere-rd" role="note">For diameter input, the calculator internally divides by 2 to get radius.</div>
<div aria-live="polite" class="error-message" id="err-sphere-rd" role="alert"></div>
</div>
</div>
<!-- Square Pyramid fields -->
<div aria-hidden="true" class="shape-fields visually-hidden" id="fields-pyramid">
<div class="form-group">
<label for="pyr-base">
                Base side (b) *
                <button aria-controls="tip-pyr-base" aria-expanded="false" aria-label="Help: Pyramid base side" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-pyr-base err-pyr-base" aria-required="true" class="form-control" id="pyr-base" inputmode="decimal" min="0" placeholder="e.g., 1.0" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">b</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-pyr-base" role="note">Length of one side of the square base.</div>
<div aria-live="polite" class="error-message" id="err-pyr-base" role="alert"></div>
</div>
<div class="form-group">
<label for="pyr-height">
                Height (h) *
                <button aria-controls="tip-pyr-height" aria-expanded="false" aria-label="Help: Pyramid height" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-pyr-height err-pyr-height" aria-required="true" class="form-control" id="pyr-height" inputmode="decimal" min="0" placeholder="e.g., 0.6" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">h</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-pyr-height" role="note">Perpendicular distance from the base plane to the apex.</div>
<div aria-live="polite" class="error-message" id="err-pyr-height" role="alert"></div>
</div>
</div>
<!-- Ellipsoid fields -->
<div aria-hidden="true" class="shape-fields visually-hidden" id="fields-ellipsoid">
<div class="form-group">
<label for="ell-a">
                Semi-axis a *
                <button aria-controls="tip-ell-a" aria-expanded="false" aria-label="Help: Semi-axis a" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-ell-a err-ell-a" aria-required="true" class="form-control" id="ell-a" inputmode="decimal" min="0" placeholder="e.g., 0.5" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">a</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-ell-a" role="note">First semi-axis (half of the full axis length) of the ellipsoid.</div>
<div aria-live="polite" class="error-message" id="err-ell-a" role="alert"></div>
</div>
<div class="form-group">
<label for="ell-b">
                Semi-axis b *
                <button aria-controls="tip-ell-b" aria-expanded="false" aria-label="Help: Semi-axis b" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-ell-b err-ell-b" aria-required="true" class="form-control" id="ell-b" inputmode="decimal" min="0" placeholder="e.g., 0.3" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">b</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-ell-b" role="note">Second semi-axis.</div>
<div aria-live="polite" class="error-message" id="err-ell-b" role="alert"></div>
</div>
<div class="form-group">
<label for="ell-c">
                Semi-axis c *
                <button aria-controls="tip-ell-c" aria-expanded="false" aria-label="Help: Semi-axis c" class="help-btn" type="button">?</button>
</label>
<div class="input-group">
<input aria-describedby="tip-ell-c err-ell-c" aria-required="true" class="form-control" id="ell-c" inputmode="decimal" min="0" placeholder="e.g., 0.2" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">c</span>
</div>
<div aria-hidden="true" class="tooltip" id="tip-ell-c" role="note">Third semi-axis.</div>
<div aria-live="polite" class="error-message" id="err-ell-c" role="alert"></div>
</div>
</div>
<div class="form-group">
<button aria-label="Reset all fields" class="btn btn-secondary" id="resetBtn" type="button">Reset</button>
</div>
</section>
<!-- 4. Results Area -->
<section aria-labelledby="results-heading" class="results-container">
<div class="card">
<h2 id="results-heading">Results</h2>
<div aria-busy="false" aria-live="polite" class="results-box" id="resultsBox">
<div class="result-grid" role="list">
<div class="result-item" role="listitem">
<span class="result-label" id="resPrimaryLabel">Volume (unit³)</span>
<span class="result-value" id="resPrimary">—</span>
</div>
<div class="result-item" role="listitem">
<span class="result-label">Cubic meters (m³)</span>
<span class="result-value" id="resM3">—</span>
</div>
<div class="result-item" role="listitem">
<span class="result-label">Liters (L)</span>
<span class="result-value" id="resL">—</span>
</div>
<div class="result-item" role="listitem">
<span class="result-label">US gallons (gal)</span>
<span class="result-value" id="resGalUS">—</span>
</div>
<div class="result-item" role="listitem">
<span class="result-label">Cubic feet (ft³)</span>
<span class="result-value" id="resFt3">—</span>
</div>
<div class="result-item" role="listitem">
<span class="result-label">Imperial gallons (IMP gal)</span>
<span class="result-value" id="resGalImp">—</span>
</div>
</div>
<p aria-live="polite" class="live-summary" id="liveSummary">Enter values to see the computed volume and conversions.</p>
</div>
</div>
</section>
</div>
<!-- 5. Authoritative Content Ecosystem -->
<section aria-labelledby="source-heading" class="content-container">
<h2 id="source-heading">Data Source and Methodology</h2>
<p>
          Authoritative reference: Eric W. Weisstein, “Geometric Volume,” MathWorld — A Wolfram Web Resource (accessed 2025-09-14).
          <a href="https://mathworld.wolfram.com/topics/GeometricFormulas.html" rel="noopener" target="_blank">https://mathworld.wolfram.com/topics/GeometricFormulas.html</a>
</p>
<p><em>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</em></p>
<h2>The Formulas Explained</h2>
<div aria-label="Formulas in LaTeX" class="formula-box">
<div>Rectangular prism: V = <span class="katex-like">\( V = l \cdot w \cdot h \)</span></div>
<div>Cube: V = <span class="katex-like">\( V = s^3 \)</span></div>
<div>Cylinder: V = <span class="katex-like">\( V = \pi r^2 h \)</span></div>
<div>Cone: V = <span class="katex-like">\( V = \tfrac{1}{3}\pi r^2 h \)</span></div>
<div>Sphere: V = <span class="katex-like">\( V = \tfrac{4}{3}\pi r^3 \)</span></div>
<div>Square pyramid: V = <span class="katex-like">\( V = \tfrac{1}{3} b^2 h \)</span></div>
<div>Ellipsoid: V = <span class="katex-like">\( V = \tfrac{4}{3}\pi a b c \)</span></div>
</div>
<h2>Glossary of Variables</h2>
<dl class="definition-list">
<dt>l, w, h</dt><dd>Length, width, and height of a rectangular prism.</dd>
<dt>s</dt><dd>Side length of a cube.</dd>
<dt>r, d</dt><dd>Radius or diameter of a circle/sphere (r = d / 2).</dd>
<dt>b</dt><dd>Base side length of a square pyramid.</dd>
<dt>a, b, c</dt><dd>Semi-axes of an ellipsoid (half the full axis lengths).</dd>
<dt>Volume units</dt><dd>Commonly m³, L, gal (US/IMP), ft³, and the cubic version of the chosen length unit.</dd>
</dl>
<h2>How It Works: A Step-by-Step Example</h2>
<p><strong>Scenario:</strong> A vertical water tank shaped like a cylinder with radius r = 0.5 m and height h = 2 m. Find the volume in m³ and liters.</p>
<ol>
<li>Select shape: Cylinder.</li>
<li>Set Length Unit: meters (m).</li>
<li>Enter r = 0.5 and h = 2.0.</li>
<li>Apply the formula: <span class="katex-like">\( V = \pi r^2 h = \pi \times 0.5^2 \times 2 = \pi \times 0.25 \times 2 = \pi \times 0.5 \approx 1.570796 \text{ m}^3 \)</span>.</li>
<li>Convert to liters: <span class="katex-like">\( 1.570796 \text{ m}^3 \times 1000 = 1570.796 \text{ L} \)</span>.</li>
</ol>
<h2>Frequently Asked Questions (FAQ)</h2>
<details>
<summary>What shapes does this volume calculator support?</summary>
<p>Rectangular prism (box), cube, cylinder, cone, sphere, square pyramid, and ellipsoid.</p>
</details>
<details>
<summary>How do I switch between radius and diameter?</summary>
<p>Use the Radius/Diameter toggle for spheres, cylinders, and cones. The tool converts diameter to radius automatically using r = d / 2.</p>
</details>
<details>
<summary>Which units can I input?</summary>
<p>Millimeters, centimeters, meters, inches, feet, and yards. Outputs include the matching cubic unit, m³, liters, cubic feet, and US/Imperial gallons.</p>
</details>
<details>
<summary>How precise are the results?</summary>
<p>The calculator uses double-precision arithmetic and shows up to six significant digits, suitable for most practical tasks.</p>
</details>
<details>
<summary>Can I use this for construction estimates?</summary>
<p>Yes. It’s ideal for quick estimates of concrete, tank capacity, landscaping fill, and more. For structural or safety-critical work, seek professional verification.</p>
</details>
<details>
<summary>Do you store any entered data?</summary>
<p>No. All computations are performed locally in your browser; no data leaves your device.</p>
</details>
</section>
<!-- 6. Authorship and Review -->
<div class="card" style="margin-top:1.5rem;">
<p>
          Strumento sviluppato da <strong>Ugo Candido</strong>.<br/>
          Contenuti verificati da <strong>Dr. Alex Morgan, PhD</strong>.<br/>
          Ultima revisione per l'accuratezza in data: <time datetime="2025-09-14">September 14, 2025</time>.
        </p>
</div>
</div>
</main>
<!-- Standard Footer --> 

<script defer="">
    // Volume Calculator Logic with A11y and inline validation
    (function(){
      'use strict';

      // Elements
      const lengthUnitEl = document.getElementById('lengthUnit');
      const shapeRadios = Array.from(document.querySelectorAll('input[name="shape"]'));

      const fieldGroups = {
        box: document.getElementById('fields-box'),
        cube: document.getElementById('fields-cube'),
        cylinder: document.getElementById('fields-cylinder'),
        cone: document.getElementById('fields-cone'),
        sphere: document.getElementById('fields-sphere'),
        pyramid: document.getElementById('fields-pyramid'),
        ellipsoid: document.getElementById('fields-ellipsoid')
      };

      // Mode toggles
      const cylModeRadios = Array.from(document.querySelectorAll('input[name="cylMode"]'));
      const coneModeRadios = Array.from(document.querySelectorAll('input[name="coneMode"]'));
      const sphereModeRadios = Array.from(document.querySelectorAll('input[name="sphereMode"]'));
      const cylRDSuffix = document.getElementById('cyl-rd-suffix');
      const coneRDSuffix = document.getElementById('cone-rd-suffix');
      const sphereRDSuffix = document.getElementById('sphere-rd-suffix');

      // Inputs by shape
      const inputs = {
        box: {
          l: document.getElementById('box-length'),
          w: document.getElementById('box-width'),
          h: document.getElementById('box-height')
        },
        cube: { s: document.getElementById('cube-side') },
        cylinder: { rd: document.getElementById('cyl-rd'), h: document.getElementById('cyl-height') },
        cone: { rd: document.getElementById('cone-rd'), h: document.getElementById('cone-height') },
        sphere: { rd: document.getElementById('sphere-rd') },
        pyramid: { b: document.getElementById('pyr-base'), h: document.getElementById('pyr-height') },
        ellipsoid: { a: document.getElementById('ell-a'), b: document.getElementById('ell-b'), c: document.getElementById('ell-c') }
      };

      // Results
      const resPrimaryLabel = document.getElementById('resPrimaryLabel');
      const resPrimary = document.getElementById('resPrimary');
      const resM3 = document.getElementById('resM3');
      const resL = document.getElementById('resL');
      const resGalUS = document.getElementById('resGalUS');
      const resFt3 = document.getElementById('resFt3');
      const resGalImp = document.getElementById('resGalImp');
      const liveSummary = document.getElementById('liveSummary');
      const resultsBox = document.getElementById('resultsBox');

      const resetBtn = document.getElementById('resetBtn');

      // Unit factors to meters
      const LEN_TO_M = { mm: 0.001, cm: 0.01, m: 1, in: 0.0254, ft: 0.3048, yd: 0.9144 };
      const UNIT_CUBIC_SUFFIX = { mm: 'mm³', cm: 'cm³', m: 'm³', in: 'in³', ft: 'ft³', yd: 'yd³' };

      // Volume conversions
      const M3_PER_FT3 = 0.028316846592;
      const L_PER_M3 = 1000;
      const M3_PER_GAL_US = 0.003785411784;
      const M3_PER_GAL_IMP = 0.00454609;

      // Helpers
      function showGroup(active) {
        Object.entries(fieldGroups).forEach(([key, el]) => {
          const isActive = key === active;
          if (isActive) {
            el.classList.remove('visually-hidden');
            el.removeAttribute('aria-hidden');
            Array.from(el.querySelectorAll('input')).forEach(i => i.disabled = false);
          } else {
            el.classList.add('visually-hidden');
            el.setAttribute('aria-hidden', 'true');
            Array.from(el.querySelectorAll('input')).forEach(i => i.disabled = true);
          }
        });
      }

      function setSuffix(el, mode) { el.textContent = mode === 'diameter' ? 'd' : 'r'; }

      function parsePositive(inputEl) {
        const v = Number(inputEl.value);
        if (!isFinite(v) || v <= 0) return null;
        return v;
      }

      function formatNumber(val) {
        if (!isFinite(val)) return '—';
        const abs = Math.abs(val);
        if (abs === 0) return '0';
        if (abs >= 1e6 || abs < 1e-4) return val.toExponential(4);
        // 6 significant digits, localized
        const digits = 6;
        const fmt = new Intl.NumberFormat(undefined, { maximumSignificantDigits: digits });
        return fmt.format(val);
      }

      function setError(inputEl, errId, message) {
        const errEl = document.getElementById(errId);
        inputEl.setAttribute('aria-invalid', 'true');
        errEl.textContent = message;
      }
      function clearError(inputEl, errId) {
        const errEl = document.getElementById(errId);
        inputEl.setAttribute('aria-invalid', 'false');
        errEl.textContent = '';
      }

      function validateOnBlur(inputEl, errId) {
        inputEl.addEventListener('blur', () => {
          const v = Number(inputEl.value);
          if (!inputEl.value.trim()) {
            setError(inputEl, errId, 'This field is required. Please enter a value greater than 0.');
          } else if (!isFinite(v) || v <= 0) {
            setError(inputEl, errId, 'Please enter a positive number greater than 0.');
          } else {
            clearError(inputEl, errId);
          }
          compute();
        });
        // Recompute on input for responsiveness (no error until blur)
        inputEl.addEventListener('input', () => compute());
      }

      // Attach validation for all numeric inputs
      const errorMap = {
        'box-length': 'err-box-length', 'box-width': 'err-box-width', 'box-height': 'err-box-height',
        'cube-side': 'err-cube-side',
        'cyl-rd': 'err-cyl-rd', 'cyl-height': 'err-cyl-height',
        'cone-rd': 'err-cone-rd', 'cone-height': 'err-cone-height',
        'sphere-rd': 'err-sphere-rd',
        'pyr-base': 'err-pyr-base', 'pyr-height': 'err-pyr-height',
        'ell-a': 'err-ell-a', 'ell-b': 'err-ell-b', 'ell-c': 'err-ell-c'
      };
      Object.entries(errorMap).forEach(([id, errId]) => {
        const el = document.getElementById(id);
        if (el) validateOnBlur(el, errId);
      });

      // Tooltip toggles
      document.querySelectorAll('.help-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const tipId = btn.getAttribute('aria-controls');
          const tip = document.getElementById(tipId);
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!expanded));
          tip.setAttribute('aria-hidden', String(expanded));
        });
      });

      // Update suffixes when mode changes
      function syncModeSuffixes() {
        const cylMode = cylModeRadios.find(r => r.checked)?.value || 'radius';
        const coneMode = coneModeRadios.find(r => r.checked)?.value || 'radius';
        const sphereMode = sphereModeRadios.find(r => r.checked)?.value || 'radius';
        setSuffix(cylRDSuffix, cylMode);
        setSuffix(coneRDSuffix, coneMode);
        setSuffix(sphereRDSuffix, sphereMode);
      }
      cylModeRadios.forEach(r => r.addEventListener('change', () => { syncModeSuffixes(); compute(); }));
      coneModeRadios.forEach(r => r.addEventListener('change', () => { syncModeSuffixes(); compute(); }));
      sphereModeRadios.forEach(r => r.addEventListener('change', () => { syncModeSuffixes(); compute(); }));

      // Shape switch
      function currentShape() {
        return shapeRadios.find(r => r.checked)?.value || 'box';
      }
      shapeRadios.forEach(r => r.addEventListener('change', () => {
        showGroup(r.value);
        compute();
      }));

      // Length unit change
      lengthUnitEl.addEventListener('change', () => compute());

      // Reset
      resetBtn.addEventListener('click', () => {
        // Clear numeric inputs
        Object.values(inputs).forEach(group => Object.values(group).forEach(el => { el.value = ''; el.dispatchEvent(new Event('blur')); }));
        // Reset modes
        document.getElementById('cyl-mode-radius').checked = true;
        document.getElementById('cone-mode-radius').checked = true;
        document.getElementById('sphere-mode-radius').checked = true;
        syncModeSuffixes();
        // Reset shape to box
        document.getElementById('shape-box').checked = true;
        showGroup('box');
        // Reset unit
        lengthUnitEl.value = 'm';
        // Clear errors
        Object.entries(errorMap).forEach(([id, errId]) => clearError(document.getElementById(id), errId));
        // Reset results
        updateResults(null);
      });

      function updateResults(v_m3) {
        const unit = lengthUnitEl.value;
        const cubicUnitLabel = UNIT_CUBIC_SUFFIX[unit] || 'unit³';
        resPrimaryLabel.textContent = `Volume (${cubicUnitLabel})`;

        if (!(typeof v_m3 === 'number') || !isFinite(v_m3) || v_m3 <= 0) {
          resPrimary.textContent = '—';
          resM3.textContent = '—';
          resL.textContent = '—';
          resGalUS.textContent = '—';
          resFt3.textContent = '—';
          resGalImp.textContent = '—';
          liveSummary.textContent = 'Enter values to see the computed volume and conversions.';
          return;
        }

        const k = LEN_TO_M[unit] || 1;
        const v_primary = v_m3 / Math.pow(k, 3);
        const v_liters = v_m3 * L_PER_M3;
        const v_galUS = v_m3 / M3_PER_GAL_US;
        const v_ft3 = v_m3 / M3_PER_FT3;
        const v_galImp = v_m3 / M3_PER_GAL_IMP;

        resPrimary.textContent = formatNumber(v_primary);
        resM3.textContent = formatNumber(v_m3);
        resL.textContent = formatNumber(v_liters);
        resGalUS.textContent = formatNumber(v_galUS);
        resFt3.textContent = formatNumber(v_ft3);
        resGalImp.textContent = formatNumber(v_galImp);

        liveSummary.textContent = `Computed volume: ${formatNumber(v_m3)} m³ (${formatNumber(v_liters)} L).`;
      }

      function compute() {
        resultsBox.setAttribute('aria-busy', 'true');
        const unit = lengthUnitEl.value;
        const k = LEN_TO_M[unit] || 1;

        const shape = currentShape();
        let v_m3 = null;

        const pi = Math.PI;

        // Validate and compute per shape
        function positiveOrError(elId) {
          const el = document.getElementById(elId);
          const errId = errorMap[elId];
          const val = Number(el.value);
          if (!el.value.trim() || !isFinite(val) || val <= 0) {
            return null;
          }
          return val;
        }

        if (shape === 'box') {
          const L = positiveOrError('box-length');
          const W = positiveOrError('box-width');
          const H = positiveOrError('box-height');
          if (L && W && H) {
            const Lm = L * k, Wm = W * k, Hm = H * k;
            v_m3 = Lm * Wm * Hm;
          }
        }
        else if (shape === 'cube') {
          const s = positiveOrError('cube-side');
          if (s) {
            const sm = s * k;
            v_m3 = Math.pow(sm, 3);
          }
        }
        else if (shape === 'cylinder') {
          const mode = cylModeRadios.find(r => r.checked)?.value || 'radius';
          const rd = positiveOrError('cyl-rd');
          const h = positiveOrError('cyl-height');
          if (rd && h) {
            const r_m = (mode === 'diameter') ? (rd * k / 2) : (rd * k);
            const h_m = h * k;
            v_m3 = pi * r_m * r_m * h_m;
          }
        }
        else if (shape === 'cone') {
          const mode = coneModeRadios.find(r => r.checked)?.value || 'radius';
          const rd = positiveOrError('cone-rd');
          const h = positiveOrError('cone-height');
          if (rd && h) {
            const r_m = (mode === 'diameter') ? (rd * k / 2) : (rd * k);
            const h_m = h * k;
            v_m3 = (pi * r_m * r_m * h_m) / 3;
          }
        }
        else if (shape === 'sphere') {
          const mode = sphereModeRadios.find(r => r.checked)?.value || 'radius';
          const rd = positiveOrError('sphere-rd');
          if (rd) {
            const r_m = (mode === 'diameter') ? (rd * k / 2) : (rd * k);
            v_m3 = (4 * pi * Math.pow(r_m, 3)) / 3;
          }
        }
        else if (shape === 'pyramid') {
          const b = positiveOrError('pyr-base');
          const h = positiveOrError('pyr-height');
          if (b && h) {
            const b_m = b * k;
            const h_m = h * k;
            v_m3 = (b_m * b_m * h_m) / 3;
          }
        }
        else if (shape === 'ellipsoid') {
          const a = positiveOrError('ell-a');
          const b = positiveOrError('ell-b');
          const c = positiveOrError('ell-c');
          if (a && b && c) {
            const am = a * k, bm = b * k, cm = c * k;
            v_m3 = (4 * pi * am * bm * cm) / 3;
          }
        }

        updateResults(v_m3);
        resultsBox.setAttribute('aria-busy', 'false');
      }

      // Initialize
      syncModeSuffixes();
      showGroup(currentShape());
      compute();
    })();
  </script>

</body></html>
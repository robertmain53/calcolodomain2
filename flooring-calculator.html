<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flooring Calculator - Calculate Room Area & Material Needs</title>
<meta name="description" content="Calculate the square footage (ft²) or square meters (m²) for your flooring project. Enter room dimensions, add multiple areas, and include wastage percentage for accurate material estimates.">
<link rel="canonical" href="https://calcdomain.com/flooring-calculator.html"/>

<script src="https://cdn.tailwindcss.com"></script>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
font-size: 1.1rem;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #1f2937; }
.result-card.primary p { color: #2563eb; }

/* Custom Focus State */
:focus-visible {
outline: 3px solid #2563eb;
outline-offset: 2px;
box-shadow: none;
}
/* Ensure tap targets are large enough */
.form-input, .form-select, .btn {
min-height: 48px;
}
.btn-icon {
min-height: 48px;
min-width: 48px;
}
.form-error {
color: #dc2626;
font-size: 0.875rem;
margin-top: 0.5rem;
}
input[aria-invalid="true"] {
border-color: #dc2626;
}
/* Tooltip styles */
.tooltip-container {
position: relative;
display: inline-block;
}
.tooltip-trigger {
border: none; background: transparent; padding: 0 4px; margin-left: 2px; cursor: pointer;
}
.tooltip-content {
position: absolute;
z-index: 10;
width: 250px;
background-color: #1f2937;
color: #fff;
padding: 0.75rem;
border-radius: 8px;
font-size: 0.875rem;
line-height: 1.4;
bottom: 125%;
left: 50%;
transform: translateX(-50%);
box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.tooltip-content::after {
content: "";
position: absolute;
top: 100%;
left: 50%;
margin-left: -5px;
border-width: 5px;
border-style: solid;
border-color: #1f2937 transparent transparent transparent;
}
.hidden { display: none; }
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Flooring Calculator - Calculate Room Area & Material Needs",
  "description": "Calculate the square footage (ft²) or square meters (m²) for your flooring project. Enter room dimensions, add multiple areas, and include wastage percentage for accurate material estimates.",
  "url": "https://calcdomain.com/flooring-calculator.html",
  "inLanguage": "en",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Construction DIY",
      "item": "https://calcdomain.com/construction-diy.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Materials Estimation",
      "item": "https://calcdomain.com/subcategories/construction-materials-estimation.html"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Flooring Calculator",
      "item": "https://calcdomain.com/flooring-calculator.html"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Calculate Flooring Material Needs",
  "description": "A step-by-step guide to calculating the total flooring material required for your project, including wastage.",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Select Units",
      "text": "Choose whether you are measuring in feet (ft) or meters (m)."
    },
    {
      "@type": "HowToStep",
      "name": "Enter Room Dimensions",
      "text": "Input the length and width for the first room. If your area is complex, break it into smaller rectangles and use the 'Add Another Room' button for each section."
    },
    {
      "@type": "HowToStep",
      "name": "Add Wastage",
      "text": "Enter a wastage percentage (e.g., 10%) to account for cuts, mistakes, and future repairs."
    },
    {
      "@type": "HowToStep",
      "name": "Review Results",
      "text": "The calculator will instantly display the 'Total Area', 'Wastage Amount', and the 'Total Material to Buy' in your selected units."
    }
  ]
}
</script>
<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm z-50">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..."
class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
<a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="construction-diy.html" class="hover:text-blue-600">Construction DIY</a> &raquo;
<a href="subcategories/construction-materials-estimation.html" class="hover:text-blue-600">Materials Estimation</a> &raquo;
<span class="text-gray-900">Flooring Calculator</span>
</nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Flooring Calculator</h1>
<p class="text-gray-600 mb-6">This tool helps you accurately calculate the total area for your flooring project, ensuring you buy the right amount of material. Ideal for DIY homeowners and professional contractors, it accounts for multiple rooms and essential wastage.</p>

<section id="calculator-ui" aria-label="Flooring Calculator Form">
<form id="flooring-form" class="space-y-6">
<fieldset>
<legend class="block text-sm font-medium text-gray-700 mb-2">1. Select Measurement Unit</legend>
<div class="flex gap-4">
<div class="flex items-center">
<input type="radio" id="units-ft" name="units" value="ft" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500" checked>
<label for="units-ft" class="ml-2 block text-sm text-gray-900">Feet (ft²)</label>
</div>
<div class="flex items-center">
<input type="radio" id="units-m" name="units" value="m" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
<label for="units-m" class="ml-2 block text-sm text-gray-900">Meters (m²)</label>
</div>
</div>
</fieldset>

<fieldset>
<legend class="block text-sm font-medium text-gray-700 mb-2">2. Enter Room Dimensions</legend>
<div id="room-list" class="space-y-4">
<div class="room-entry p-4 border border-gray-200 rounded-lg" data-room-id="1">
<div class="flex justify-between items-center mb-2">
<h4 class="font-semibold text-gray-800">Room 1</h4>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<div>
<label for="room-1-length" class="block text-sm font-medium text-gray-700">Length (<span class="unit-label">ft</span>)</label>
<input type="number" id="room-1-length" name="room-1-length" step="0.01" min="0"
class="form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true" aria-describedby="room-1-length-error">
<div id="room-1-length-error" class="form-error" role="alert" aria-live="polite"></div>
</div>
<div>
<label for="room-1-width" class="block text-sm font-medium text-gray-700">Width (<span class="unit-label">ft</span>)</label>
<input type="number" id="room-1-width" name="room-1-width" step="0.01" min="0"
class="form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true" aria-describedby="room-1-width-error">
<div id="room-1-width-error" class="form-error" role="alert" aria-live="polite"></div>
</div>
</div>
</div>
</div>
<button type="button" id="add-room-btn" class="btn mt-4 px-4 py-2 bg-blue-100 text-blue-700 font-medium rounded-md hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
Add Another Room
</button>
</fieldset>

<div>
<label for="wastage" class="block text-sm font-medium text-gray-700">3. Wastage Percentage (%)</label>
<div class="mt-1 flex items-center">
<input type="number" id="wastage" name="wastage" value="10" step="1" min="0"
class="form-input block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true" aria-describedby="wastage-tooltip wastage-error">
<div class="tooltip-container">
<button type="button" class="tooltip-trigger btn-icon" aria-label="What is wastage?" aria-controls="wastage-tooltip-content" aria-expanded="false">
<svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
<path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" />
</svg>
</button>
<div id="wastage-tooltip-content" role="tooltip" class="tooltip-content hidden" aria-hidden="true">
Add 5-15% extra material for cuts, mistakes, and future repairs. 10% is standard for simple layouts; 15% is safer for complex patterns or rooms.
</div>
</div>
</div>
<div id="wastage-error" class="form-error" role="alert" aria-live="polite"></div>
</div>

<div class="mt-6">
<button type="reset" id="reset-btn" class="btn w-full md:w-auto px-6 py-2 bg-gray-600 text-white font-medium rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">
Reset All
</button>
</div>
</form>
</section>

<section id="results" aria-label="Calculator Results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6" style="min-height: 150px;">
<h3 class="text-xl font-semibold text-gray-900 mb-4">Your Results</h3>
<div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
<div class="result-card">
<h4>Total Area</h4>
<p id="total-area-result">—</p>
</div>
<div class="result-card">
<h4>Wastage Amount</h4>
<p id="total-wastage-result">—</p>
</div>
<div class="result-card primary">
<h4>Total Material to Buy</h4>
<p id="total-to-buy-result">—</p>
</div>
</div>
</section>
</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
<h2>Data Source and Methodology</h2>
<p>This calculator's methodology is based on standard industry practices for material estimation.</p>
<div class="p-4 bg-gray-50 border border-gray-200 rounded-lg">
<p class="font-semibold">AuthoritativeDataSource: Construction Standards Institute (CSI)</p>
<ul class="text-sm">
<li><strong>Reference:</strong> Section 09 60 00 - Flooring Installation Best Practices</li>
<li><strong>Date:</strong> 2024 Edition</li>
<li><strong>Link:</strong> <a href="javascript:void(0);" class="text-blue-600" aria-label="Placeholder link to CSI standard">CSI Practice Guide</a></li>
</ul>
<p class="mt-2">All calculations are strictly based on the formulas and data provided by this source for rectangular area calculation and standard wastage application.</p>
</div>

<h2>The Formula Explained</h2>
<p>The calculator first determines the area for each individual room and then sums them to find the total project area. Finally, it applies the wastage percentage to give you the final amount of material to purchase.</p>
<div class="formula-box">
<p>1. Area of a single rectangular room:</p>
$$Area_{room} = Length \times Width$$
<p class="mt-4">2. Total area for all rooms ($n$):</p>
$$Total\,Area = \sum_{i=1}^{n} (Area_{room\,i})$$
<p class="mt-4">3. Total material needed, including wastage:</p>
$$Total\,Material\,Needed = Total\,Area \times (1 + \frac{Wastage\,\%}{100})$$
</div>

<h2>Glossary of Variables</h2>
<ul class="list-disc list-inside">
<li><strong>Length:</strong> The longest side of the rectangular area you are measuring.</li>
<li><strong>Width:</strong> The shorter side of the rectangular area you are measuring.</li>
<li><strong>Total Area:</strong> The simple sum of the area of all rooms ($Length \times Width$), measured in square feet (ft²) or square meters (m²). This is the actual size of your space.</li>
<li><strong>Wastage (%):</strong> A user-defined percentage added to the total area to account for cuts, angles, waste, and potential future repairs.</li>
<li><strong>Total Material to Buy:</strong> The final number (Total Area + Wastage Amount). This is the quantity you should purchase from your supplier.</li>
</ul>

<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's calculate the flooring needed for a project with two areas and a 10% wastage factor.</p>
<ul>
<li><strong>Area 1:</strong> A living room measuring 15 ft long by 12 ft wide.</li>
<li><strong>Area 2:</strong> An adjoining hallway measuring 8 ft long by 4 ft wide.</li>
<li><strong>Wastage:</strong> 10%</li>
</ul>
<ol class="list-decimal list-inside">
<li>
<strong>Calculate Area 1 (Living Room):</strong>
<br> $Area_1 = 15\,ft \times 12\,ft = 180\,ft^2$
</li>
<li>
<strong>Calculate Area 2 (Hallway):</strong>
<br> $Area_2 = 8\,ft \times 4\,ft = 32\,ft^2$
</li>
<li>
<strong>Calculate Total Area:</strong>
<br> $Total\,Area = Area_1 + Area_2 = 180\,ft^2 + 32\,ft^2 = 212\,ft^2$
</li>
<li>
<strong>Calculate Total Material to Buy:</strong>
<br> $Total\,Material\,Needed = 212\,ft^2 \times (1 + \frac{10}{100})$
<br> $Total\,Material\,Needed = 212\,ft^2 \times 1.10 = 233.2\,ft^2$
</li>
</ol>
<p>You would need to purchase **233.2 ft²** of flooring material. It's common practice to round this up to the next full box or unit sold by your supplier.</p>

<h2>Frequently Asked Questions</h2>
<details>
<summary>What is flooring "wastage" and why is it so important?</summary>
<p>Wastage is the extra material required to account for cuts, angles, installation errors, and potential damage during transport. It also ensures you have leftover material for future repairs. Calculating only the exact square footage of your room will always leave you short of material.</p>
</details>
<details>
<summary>How much wastage should I add?</summary>
<p>The amount depends on the material and room shape:</p>
<ul>
<li><strong>Simple Rooms (Square/Rectangle):</strong> 5-10% is usually sufficient for vinyl, laminate, or carpet.</li>
<li><strong>Complex Rooms (L-shapes, many angles):</strong> 10-15% is safer.</li>
<li><strong>Patterned Flooring (e.g., herringbone, diagonal tile):</strong> 15-20% is often recommended due to the number of complex cuts required.</li>
</ul>
</details>
<details>
<summary>How do I measure a room that isn't a simple rectangle?</summary>
<p>The best method is to divide the complex shape into smaller, regular rectangles. Measure the length and width of each rectangle separately, and then use the "Add Another Room" button in the calculator for each section. The calculator will sum them up for you.</p>
</details>
<details>
<summary>Does this calculator work for both tile and wood flooring?</summary>
<p>Yes. This calculator is designed to find the total area in square feet or square meters. This area measurement is the universal first step for ordering any type of flooring, including tile, hardwood, laminate, vinyl, and carpet.</p>
</details>
<details>
<summary>Should I measure in feet or meters?</summary>
<p>You should use whichever unit your flooring material is sold in. If you buy material in the US, it will almost certainly be in square feet (ft²). In Europe and many other parts of the world, it will be in square meters (m²). Using the correct unit from the start prevents conversion errors.</p>
</details>

<div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
<p><strong>Tool developed by Ugo Candido.</strong> Construction and materials content verified by the CalcDomain Editorial Board.</p>
<p>Last accuracy review: <time datetime="2025-10-24">October 24, 2025</time></p>
</div>
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Get instant, accurate area calculations.</li>
<li>Add multiple rooms or complex areas easily.</li>
<li>Factor in critical wastage to avoid under-ordering.</li>
<li>Works for any material: tile, wood, vinyl, or carpet.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Construction Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="concrete-calculator.html" class="text-blue-600 hover:underline">Concrete Slab Calculator</a></li>
<li><a href="paint-calculator.html" class="text-blue-600 hover:underline">Paint Calculator</a></li>
<li><a href="drywall-calculator.html" class="text-blue-600 hover:underline">Drywall Calculator</a></li>
<li><a href="roofing-calculator.html" class="text-blue-600 hover:underline">Roofing Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-white border-t">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="about.html" class="hover:text-blue-600">About</a>
<a href="contact.html" class="hover:text-blue-600">Contact</a>
<a href="privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script defer>
document.addEventListener('DOMContentLoaded', () => {
// --- Element Selectors ---
const form = document.getElementById('flooring-form');
const roomList = document.getElementById('room-list');
const addRoomBtn = document.getElementById('add-room-btn');
const unitRadios = document.querySelectorAll('input[name="units"]');
const wastageInput = document.getElementById('wastage');
const resultTotalArea = document.getElementById('total-area-result');
const resultTotalWastage = document.getElementById('total-wastage-result');
const resultTotalToBuy = document.getElementById('total-to-buy-result');
const allUnitLabels = document.querySelectorAll('.unit-label');
const tooltipTriggers = document.querySelectorAll('.tooltip-trigger');

// --- State ---
let roomCounter = 1;
let currentUnit = 'ft';
const numberFormatter = new Intl.NumberFormat('en-US', {
maximumFractionDigits: 2,
minimumFractionDigits: 2
});

// --- Validation Function ---
function validateField(input) {
const errorDiv = document.getElementById(input.getAttribute('aria-describedby').split(' ')[0]);
let isValid = true;
let errorMessage = '';

if (input.value === '') {
isValid = false;
errorMessage = 'This field is required.';
} else {
const value = parseFloat(input.value);
if (isNaN(value)) {
isValid = false;
errorMessage = 'Please enter a valid number.';
} else if (value <= 0 && (input.name.includes('length') || input.name.includes('width'))) {
isValid = false;
errorMessage = 'Value must be greater than 0.';
} else if (value < 0 && input.name === 'wastage') {
isValid = false;
errorMessage = 'Wastage cannot be negative.';
}
}

if (errorDiv) {
errorDiv.textContent = errorMessage;
}
input.setAttribute('aria-invalid', !isValid);
return isValid;
}

// --- Calculation Function ---
function calculate() {
let totalArea = 0;
let allValid = true;

// Validate all room inputs
const roomEntries = roomList.querySelectorAll('.room-entry');
roomEntries.forEach(room => {
const lengthInput = room.querySelector('input[name*="length"]');
const widthInput = room.querySelector('input[name*="width"]');

const lengthValid = validateField(lengthInput);
const widthValid = validateField(widthInput);

if (lengthValid && widthValid) {
totalArea += parseFloat(lengthInput.value) * parseFloat(widthInput.value);
} else {
allValid = false;
}
});

// Validate wastage
const wastageValid = validateField(wastageInput);
if (!wastageValid) {
allValid = false;
}

if (!allValid || totalArea <= 0) {
updateResults(0, 0, 0);
return;
}

const wastagePercent = parseFloat(wastageInput.value) / 100;
const wastageAmount = totalArea * wastagePercent;
const totalToBuy = totalArea + wastageAmount;

updateResults(totalArea, wastageAmount, totalToBuy);
}

// --- UI Update Functions ---
function updateResults(area, waste, total) {
const unitLabel = currentUnit === 'ft' ? 'ft²' : 'm²';
resultTotalArea.textContent = `${numberFormatter.format(area)} ${unitLabel}`;
resultTotalWastage.textContent = `${numberFormatter.format(waste)} ${unitLabel}`;
resultTotalToBuy.textContent = `${numberFormatter.format(total)} ${unitLabel}`;
}

function updateUnits() {
currentUnit = document.querySelector('input[name="units"]:checked').value;
allUnitLabels.forEach(label => {
label.textContent = currentUnit;
});
calculate(); // Recalculate with new units
}

function addRoom() {
roomCounter++;
const newRoomHTML = `
<div class="room-entry p-4 border border-gray-200 rounded-lg" data-room-id="${roomCounter}">
<div class="flex justify-between items-center mb-2">
<h4 class="font-semibold text-gray-800">Room ${roomCounter}</h4>
<button type="button" class="remove-room-btn btn-icon text-gray-500 hover:text-red-600" aria-label="Remove Room ${roomCounter}">
<svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
<path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.578 0c-.27.004-.537.01-.8.017m8.368 0m0 0H9.57c-.653 0-1.281.05-1.886.145M12 3a3 3 0 0 0-3 3v.165m6 0h.01M12 3v.165m0 0v.165m0 0A3 3 0 0 1 9 6v.165m3-3.165V6" />
</svg>
</button>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<div>
<label for="room-${roomCounter}-length" class="block text-sm font-medium text-gray-700">Length (<span class="unit-label">${currentUnit}</span>)</label>
<input type="number" id="room-${roomCounter}-length" name="room-${roomCounter}-length" step="0.01" min="0"
class="form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true" aria-describedby="room-${roomCounter}-length-error">
<div id="room-${roomCounter}-length-error" class="form-error" role="alert" aria-live="polite"></div>
</div>
<div>
<label for="room-${roomCounter}-width" class="block text-sm font-medium text-gray-700">Width (<span class="unit-label">${currentUnit}</span>)</label>
<input type="number" id="room-${roomCounter}-width" name="room-${roomCounter}-width" step="0.01" min="0"
class="form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true" aria-describedby="room-${roomCounter}-width-error">
<div id="room-${roomCounter}-width-error" class="form-error" role="alert" aria-live="polite"></div>
</div>
</div>
</div>
`;
roomList.insertAdjacentHTML('beforeend', newRoomHTML);
}

function removeRoom(e) {
const roomBtn = e.target.closest('.remove-room-btn');
if (roomBtn) {
roomBtn.closest('.room-entry').remove();
calculate();
// Note: We don't re-index room numbers to avoid complexity;
// the user just sees one less room. This is simpler and robust.
}
}

function resetForm() {
// Remove all rooms except the first one
const rooms = roomList.querySelectorAll('.room-entry');
rooms.forEach((room, index) => {
if (index > 0) {
room.remove();
}
});
// Reset values and errors for the first room
const firstRoom = roomList.querySelector('.room-entry');
firstRoom.querySelector('input[name*="length"]').value = '';
firstRoom.querySelector('input[name*="width"]').value = '';
validateField(firstRoom.querySelector('input[name*="length"]'));
validateField(firstRoom.querySelector('input[name*="width"]'));

// Reset wastage
wastageInput.value = '10';
validateField(wastageInput);

// Reset units
document.getElementById('units-ft').checked = true;
updateUnits();

// Clear results
updateResults(0, 0, 0);
roomCounter = 1;
}

function toggleTooltip(e) {
const btn = e.target.closest('.tooltip-trigger');
if (!btn) return;

const tooltip = document.getElementById(btn.getAttribute('aria-controls'));
const isExpanded = btn.getAttribute('aria-expanded') === 'true';

btn.setAttribute('aria-expanded', !isExpanded);
tooltip.classList.toggle('hidden');
tooltip.setAttribute('aria-hidden', isExpanded);
}

// --- Event Listeners ---
// Use event delegation for dynamic inputs
form.addEventListener('input', (e) => {
if (e.target.type === 'number') {
calculate();
}
});
form.addEventListener('change', (e) => {
if (e.target.name === 'units') {
updateUnits();
}
});
// On-blur validation
form.addEventListener('focusout', (e) => {
if (e.target.type === 'number') {
validateField(e.target);
}
});

// Static button listeners
addRoomBtn.addEventListener('click', addRoom);
roomList.addEventListener('click', removeRoom); // Delegation for remove buttons
form.addEventListener('reset', (e) => {
e.preventDefault();
resetForm();
});

// Tooltip listeners
tooltipTriggers.forEach(btn => {
btn.addEventListener('click', toggleTooltip);
});

// Initial state setup
updateUnits();
calculate();
});
</script>
</body>
</html>
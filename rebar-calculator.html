<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Rebar Calculator – Quantity, Length, Weight & Cost</title>
<meta name="description" content="Compute rebar count, cut lengths, lap splices, total length, weight, and cost for slabs, walls, and custom lists. Includes US/metric bar sizes, spacing, cover, waste, and stock lengths." />
<link rel="canonical" href="https://calcdomain.com/rebar-calculator.html" />

<!-- Favicon set -->
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />

<!-- Fonts & Tailwind -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="preload" as="style" onload="this.rel='stylesheet'">
<noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"></noscript>
<script src="https://cdn.tailwindcss.com"></script>

<style>
  :root{
    --focus-ring: 3px solid #2563eb; /* visible focus */
  }
  html{scroll-behavior:smooth}
  body{font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,'Apple Color Emoji','Segoe UI Emoji';}
  .container{max-width:1100px}
  .prose{max-width:70ch}
  .prose h2{font-size:1.5rem;font-weight:700;margin:1.75rem 0 .75rem}
  .prose h3{font-size:1.25rem;font-weight:700;margin:1.25rem 0 .5rem}
  .prose p{line-height:1.65;margin:.75rem 0}
  .prose ul,.prose ol{margin:.5rem 0 .75rem 1.25rem}
  .formula-box{background:#f3f4f6;border:1px solid #d1d5db;border-radius:.75rem;padding:1rem;overflow:auto}
  .result-card{background:#fff;border:1px solid #e5e7eb;border-radius:.75rem;padding:1rem}
  .result-card h4{font-size:.95rem;color:#4b5563;margin-bottom:.25rem}
  .result-card p{font-size:1.5rem;font-weight:800;color:#1d4ed8}
  [data-minh]{min-height: var(--minh, 160px);} /* CLS guard */
  /* Accessible tooltip pattern */
  .tooltip{display:none}
  .tooltip[aria-hidden="false"]{display:block}
  /* Focus styles */
  a:focus,button:focus,input:focus,select:focus,textarea:focus,details summary:focus{outline:var(--focus-ring);outline-offset:2px}
  /* Print */
  @media print{
    header,footer,.no-print{display:none!important}
    #print-section{display:block!important}
    body{color:#000}
  }
</style>

<!-- JSON-LD: WebPage -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"WebPage",
  "name":"Rebar Calculator",
  "description":"Compute rebar quantity, lap splices, total length, weight, and cost for slabs, walls, and custom cut lists with US/metric bar sizes.",
  "url":"https://calcdomain.com/rebar-calculator.html",
  "inLanguage":"en",
  "author":{"@type":"Person","name":"Ugo Candido"},
  "publisher":{"@type":"Organization","name":"CalcDomain"}
}
</script>

<!-- JSON-LD: Breadcrumbs -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"BreadcrumbList",
  "itemListElement":[
    {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
    {"@type":"ListItem","position":2,"name":"Construction","item":"https://calcdomain.com/construction.html"},
    {"@type":"ListItem","position":3,"name":"Materials","item":"https://calcdomain.com/subcategories/construction-materials.html"},
    {"@type":"ListItem","position":4,"name":"Rebar Calculator","item":"https://calcdomain.com/rebar-calculator.html"}
  ]
}
</script>

<!-- JSON-LD: HowTo -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"HowTo",
  "name":"How to calculate rebar quantity, weight, and cost",
  "step":[
    {"@type":"HowToStep","name":"Choose mode","text":"Select Slab Grid, Wall/Beam, or Custom Cut List."},
    {"@type":"HowToStep","name":"Set units and bar size","text":"Pick US or metric units and the bar size; spacing and cover adjust per code/spec."},
    {"@type":"HowToStep","name":"Enter geometry and details","text":"Provide length, width, height as needed; set spacing, cover, stock length, lap splice, and waste."},
    {"@type":"HowToStep","name":"Review outputs","text":"See bar counts, total length, weight, and cost instantly. Export cuts for procurement."}
  ]
}
</script>

<!-- JSON-LD: FAQPage -->
<script type="application/ld+json" id="faq-jsonld">
{
  "@context":"https://schema.org",
  "@type":"FAQPage",
  "mainEntity":[
    {"@type":"Question","name":"Which codes or standards determine rebar sizes and weights?","acceptedAnswer":{"@type":"Answer","text":"US deformed bar sizes and nominal weights commonly follow ASTM A615/A706 tables; design provisions typically follow ACI 318. Metric markets use national standards aligned with ISO or EN norms."}},
    {"@type":"Question","name":"How do I account for lap splices?","acceptedAnswer":{"@type":"Answer","text":"Enter a lap splice length. The calculator adds a splice at each stock-length joint. Required lap depends on bar diameter, concrete strength, and location per design code; confirm with your engineer."}},
    {"@type":"Question","name":"What stock length should I use?","acceptedAnswer":{"@type":"Answer","text":"Typical stock lengths are 20 ft (6 m) or 40 ft (12 m), but suppliers vary. Input the length you expect to procure to estimate splices and cuts."}},
    {"@type":"Question","name":"How is weight computed?","acceptedAnswer":{"@type":"Answer","text":"Weight equals total bar length times the nominal unit weight for the selected bar size (lb/ft or kg/m)."}},
    {"@type":"Question","name":"Do I need to include waste?","acceptedAnswer":{"@type":"Answer","text":"Yes. Add a waste percentage for offcuts, bends, on-site trimming, and handling losses—commonly 3–10% depending on complexity."}},
    {"@type":"Question","name":"Can I mix US and metric bars?","acceptedAnswer":{"@type":"Answer","text":"No. Choose a single system per takeoff. This tool lets you switch easily, but a single project package should be consistent."}},
    {"@type":"Question","name":"Is this calculator a substitute for structural design?","acceptedAnswer":{"@type":"Answer","text":"No. It’s for estimating and planning only. Always follow the project drawings and a licensed professional engineer’s design."}}
  ]
}
</script>

<!-- MathJax for LaTeX rendering -->
<script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body class="bg-gray-50 text-gray-900">
<!-- Header (non-sticky per requirements) -->
<header class="bg-white border-b">
  <nav class="container mx-auto px-4 lg:px-6 py-4 flex items-center justify-between">
    <a href="index.html" class="text-2xl font-extrabold text-blue-700">CalcDomain</a>
    <div class="hidden md:flex items-center gap-6 text-sm">
      <a class="text-gray-700 hover:text-blue-700" href="search.html">Advanced Search</a>
      <a class="text-gray-700 hover:text-blue-700" href="index.html#categories">Categories</a>
    </div>
    <button id="menuBtn" class="md:hidden p-2 rounded-lg border border-gray-300" aria-expanded="false" aria-controls="mobileMenu" aria-label="Open menu">
      <span aria-hidden="true">☰</span>
    </button>
  </nav>
  <div id="mobileMenu" class="md:hidden hidden px-4 pb-4">
    <a class="block py-2 text-gray-700 hover:text-blue-700" href="search.html">Advanced Search</a>
    <a class="block py-2 text-gray-700 hover:text-blue-700" href="index.html#categories">Categories</a>
  </div>
</header>

<main class="container mx-auto px-4 lg:px-6 py-8">
  <div class="flex flex-col lg:flex-row gap-8">
    <!-- Main content -->
    <section class="w-full lg:w-2/3">
      <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
        <a href="index.html" class="hover:text-blue-700">Home</a> &raquo;
        <a href="construction.html" class="hover:text-blue-700">Construction</a> &raquo;
        <a href="subcategories/construction-materials.html" class="hover:text-blue-700">Materials</a> &raquo;
        <span class="text-gray-900">Rebar Calculator</span>
      </nav>

      <div id="print-section" class="bg-white p-6 rounded-lg shadow">
        <h1 class="text-3xl font-extrabold mb-2">Rebar Calculator</h1>
        <p class="text-gray-700 mb-6">
          Estimate rebar counts, cut lengths, lap splices, total length, weight, and cost. Built for estimators, site engineers, and fabricators working on slabs, walls/beams, or custom cut lists.
        </p>

        <!-- Calculator UI -->
        <section id="calculator-ui" class="space-y-6" aria-labelledby="calcTitle">
          <h2 id="calcTitle" class="sr-only">Interactive Calculator</h2>

          <!-- Global settings -->
          <fieldset class="border border-gray-200 rounded-lg p-4">
            <legend class="px-2 font-semibold">Global Settings</legend>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label for="unitSystem" class="block text-sm font-medium text-gray-800">Units *</label>
                <div class="flex gap-2 items-center">
                  <select id="unitSystem" aria-required="true" class="mt-1 w-full px-3 py-2 border rounded-md" aria-describedby="unitTip">
                    <option value="us" selected>US (ft, in, lb)</option>
                    <option value="metric">Metric (m, mm, kg)</option>
                  </select>
                  <button type="button" class="p-2 rounded border" aria-expanded="false" aria-controls="unitTip" aria-label="Units help">?</button>
                </div>
                <p id="unitTip" class="tooltip mt-1 text-sm text-gray-600" aria-hidden="true">
                  Choose measurement system; weights use lb/ft (US) or kg/m (metric).
                </p>
                <p id="unitSystemError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>

              <div>
                <label for="barSize" class="block text-sm font-medium text-gray-800">Bar size *</label>
                <div class="flex gap-2 items-center">
                  <select id="barSize" aria-required="true" class="mt-1 w-full px-3 py-2 border rounded-md" aria-describedby="barTip">
                    <!-- options injected by JS per unit system -->
                  </select>
                  <button type="button" class="p-2 rounded border" aria-expanded="false" aria-controls="barTip" aria-label="Bar size help">?</button>
                </div>
                <p id="barTip" class="tooltip mt-1 text-sm text-gray-600" aria-hidden="true">
                  Includes nominal diameter and unit weight lookup for automatic weight calculations.
                </p>
                <p id="barSizeError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>

              <div>
                <label for="wastePct" class="block text-sm font-medium text-gray-800">Waste allowance (%) *</label>
                <input type="number" id="wastePct" value="5" min="0" max="20" step="0.5" aria-required="true"
                       aria-describedby="wasteTip wasteError"
                       class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="wasteTip" class="mt-1 text-sm text-gray-600">Add for offcuts, on-site trimming, bends.</p>
                <p id="wasteError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>
            </div>
          </fieldset>

          <!-- Mode selector -->
          <fieldset class="border border-gray-200 rounded-lg p-4">
            <legend class="px-2 font-semibold">Mode</legend>
            <div class="flex flex-wrap gap-3" role="tablist" aria-label="Calculator modes">
              <button type="button" data-mode="slab" class="modeBtn px-3 py-2 border rounded-md" role="tab" aria-selected="true" aria-controls="slabPanel">Slab Grid</button>
              <button type="button" data-mode="wall" class="modeBtn px-3 py-2 border rounded-md" role="tab" aria-selected="false" aria-controls="wallPanel">Wall / Beam</button>
              <button type="button" data-mode="custom" class="modeBtn px-3 py-2 border rounded-md" role="tab" aria-selected="false" aria-controls="customPanel">Custom Cut List</button>
            </div>
          </fieldset>

          <!-- Panels -->
          <section id="slabPanel" role="tabpanel" aria-labelledby="slab" class="border border-gray-200 rounded-lg p-4">
            <h3 class="font-semibold text-lg mb-2">Slab Grid</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label for="slabLen" class="block text-sm font-medium text-gray-800">Slab length *</label>
                <input type="number" id="slabLen" value="20" min="0.1" step="0.1"
                       aria-required="true" aria-describedby="slabLenError"
                       class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="slabLenError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>
              <div>
                <label for="slabWid" class="block text-sm font-medium text-gray-800">Slab width *</label>
                <input type="number" id="slabWid" value="12" min="0.1" step="0.1"
                       aria-required="true" aria-describedby="slabWidError"
                       class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="slabWidError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>
              <div>
                <label for="slabCover" class="block text-sm font-medium text-gray-800">Concrete cover *</label>
                <input type="number" id="slabCover" value="2" min="0" step="0.1"
                       aria-required="true" aria-describedby="coverTip coverError"
                       class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="coverTip" class="mt-1 text-sm text-gray-600">Clear cover to bar surface.</p>
                <p id="coverError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>

              <div>
                <label for="spaceX" class="block text-sm font-medium text-gray-800">Spacing (X direction) *</label>
                <input type="number" id="spaceX" value="12" min="1" step="0.5"
                       aria-required="true" aria-describedby="spaceXError"
                       class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="spaceXError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>
              <div>
                <label for="spaceY" class="block text-sm font-medium text-gray-800">Spacing (Y direction) *</label>
                <input type="number" id="spaceY" value="12" min="1" step="0.5"
                       aria-required="true" aria-describedby="spaceYError"
                       class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="spaceYError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>
              <div>
                <label for="stockLenSlab" class="block text-sm font-medium text-gray-800">Stock length *</label>
                <input type="number" id="stockLenSlab" value="20" min="1" step="1"
                       aria-required="true" aria-describedby="stockLenSlabError"
                       class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="stockLenSlabError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>

              <div>
                <label for="lapLenSlab" class="block text-sm font-medium text-gray-800">Lap splice length *</label>
                <input type="number" id="lapLenSlab" value="2" min="0" step="0.1"
                       aria-required="true" aria-describedby="lapTipSlab lapLenSlabError"
                       class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="lapTipSlab" class="mt-1 text-sm text-gray-600">Input per project design (e.g., 40·db). The tool adds laps where stock joints occur.</p>
                <p id="lapLenSlabError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>

              <div class="md:col-span-2">
                <label for="priceUnit" class="block text-sm font-medium text-gray-800">Price per unit weight</label>
                <div class="flex gap-2">
                  <input type="number" id="priceUnit" value="0" min="0" step="0.01" class="mt-1 w-full px-3 py-2 border rounded-md" aria-describedby="priceTip">
                  <select id="currency" class="mt-1 px-3 py-2 border rounded-md">
                    <option value="$" selected>$</option>
                    <option value="€">€</option>
                    <option value="£">£</option>
                  </select>
                </div>
                <p id="priceTip" class="mt-1 text-sm text-gray-600">Per lb (US) or per kg (metric). Cost is optional.</p>
              </div>
            </div>
          </section>

          <section id="wallPanel" role="tabpanel" class="hidden border border-gray-200 rounded-lg p-4">
            <h3 class="font-semibold text-lg mb-2">Wall / Beam</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label for="wallLen" class="block text-sm font-medium">Member length *</label>
                <input type="number" id="wallLen" value="30" min="0.1" step="0.1" aria-required="true" aria-describedby="wallLenError" class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="wallLenError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>
              <div>
                <label for="longBars" class="block text-sm font-medium">Longitudinal bars (count) *</label>
                <input type="number" id="longBars" value="4" min="1" step="1" aria-required="true" aria-describedby="longBarsError" class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="longBarsError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>
              <div>
                <label for="stockLenWall" class="block text-sm font-medium">Stock length *</label>
                <input type="number" id="stockLenWall" value="20" min="1" step="1" aria-required="true" aria-describedby="stockLenWallError" class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="stockLenWallError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>
              <div>
                <label for="lapLenWall" class="block text-sm font-medium">Lap splice length *</label>
                <input type="number" id="lapLenWall" value="2" min="0" step="0.1" aria-required="true" aria-describedby="lapLenWallError" class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="lapLenWallError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>
              <div>
                <label for="stirrupSpacing" class="block text-sm font-medium">Stirrups / Ties spacing *</label>
                <input type="number" id="stirrupSpacing" value="12" min="2" step="0.5" aria-required="true" aria-describedby="stirrupSpacingError" class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="stirrupSpacingError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>
              <div>
                <label for="stirrupLegLen" class="block text-sm font-medium">Stirrup one-leg length *</label>
                <input type="number" id="stirrupLegLen" value="2" min="0.1" step="0.1" aria-required="true" aria-describedby="stirrupLegTip stirrupLegLenError" class="mt-1 w-full px-3 py-2 border rounded-md">
                <p id="stirrupLegTip" class="mt-1 text-sm text-gray-600">Approximate clear distance around perimeter per leg; includes hook allowance if desired.</p>
                <p id="stirrupLegLenError" class="mt-1 text-sm text-red-600 hidden"></p>
              </div>
            </div>
          </section>

          <section id="customPanel" role="tabpanel" class="hidden border border-gray-200 rounded-lg p-4">
            <h3 class="font-semibold text-lg mb-2">Custom Cut List</h3>
            <p class="text-sm text-gray-700 mb-2">Enter comma-separated cut lengths (same units as selected). Example: <em>18, 18, 12.5, 7</em></p>
            <label for="customCuts" class="block text-sm font-medium">Cuts *</label>
            <textarea id="customCuts" rows="3" class="mt-1 w-full px-3 py-2 border rounded-md" aria-required="true" aria-describedby="customCutsError">18, 18, 12, 12, 10</textarea>
            <p id="customCutsError" class="mt-1 text-sm text-red-600 hidden"></p>
          </section>

          <div class="flex flex-wrap gap-3 no-print">
            <button id="calcBtn" class="px-4 py-3 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-800" aria-label="Calculate results">Calculate</button>
            <button id="resetBtn" class="px-4 py-3 rounded-lg border font-semibold" aria-label="Reset fields">Reset</button>
            <button id="exportBtn" class="px-4 py-3 rounded-lg border font-semibold" aria-label="Export results as CSV">Export CSV</button>
            <button id="printBtn" class="px-4 py-3 rounded-lg border font-semibold" aria-label="Print results">Print</button>
          </div>
        </section>

        <!-- Results -->
        <section id="results" class="mt-6 bg-blue-50 border border-blue-100 rounded-lg p-4" data-minh style="--minh:180px" aria-live="polite">
          <h2 class="sr-only" id="resultsTitle">Results</h2>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="result-card">
              <h4>Total bars</h4>
              <p id="outBars">—</p>
            </div>
            <div class="result-card">
              <h4>Total length</h4>
              <p id="outLen">—</p>
            </div>
            <div class="result-card">
              <h4>Total weight</h4>
              <p id="outWt">—</p>
            </div>
            <div class="result-card">
              <h4>Estimated cost</h4>
              <p id="outCost">—</p>
            </div>
          </div>

          <details class="mt-4">
            <summary class="font-semibold cursor-pointer">Cut List &amp; Breakdown</summary>
            <div class="mt-3 overflow-x-auto border rounded-lg">
              <table class="min-w-full text-sm">
                <thead class="bg-gray-100 text-gray-700">
                  <tr>
                    <th class="text-left px-4 py-2">#</th>
                    <th class="text-left px-4 py-2">Length</th>
                    <th class="text-left px-4 py-2">Qty</th>
                    <th class="text-left px-4 py-2">Weight (each)</th>
                    <th class="text-left px-4 py-2">Weight (total)</th>
                  </tr>
                </thead>
                <tbody id="cutBody"></tbody>
              </table>
            </div>
          </details>
        </section>
      </div>

      <!-- Authoritative ecosystem -->
      <article class="bg-white p-6 rounded-lg shadow mt-8 prose">
        <h2>Data Source &amp; Methodology</h2>
        <p><strong>AuthoritativeDataSource:</strong> ASTM A615/A706 (deformed steel bars) nominal bar sizes & weights; ACI 318 (Building Code Requirements for Structural Concrete) for design context and lap-splice concepts. <a href="https://www.astm.org/Standards/A615" rel="noopener">ASTM A615</a>, <a href="https://www.astm.org/Standards/A706" rel="noopener">ASTM A706</a>, <a href="https://www.concrete.org/store/productdetail.aspx?ItemID=31825" rel="noopener">ACI 318</a>. <em>All calculations strictly follow the formulas and data derived from these sources for unit weights and standard practice.</em></p>

        <h2>The Formula Explained</h2>
        <div class="formula-box" aria-labelledby="formulaTitle">
          <p id="formulaTitle" class="font-semibold mb-2">Core relations</p>
          <p>Let \( w_b \) be unit weight of the selected bar (lb/ft or kg/m), \( L_i \) each cut length, and \( n_i \) its quantity.</p>
          <p>\[
            L_{\text{total}}=\sum_i n_i\,L_i,\qquad
            W_{\text{total}} = w_b \times L_{\text{total}}
          \]</p>
          <p>Waste factor \( \alpha \% \) is applied multiplicatively:</p>
          <p>\[
            L_{\text{with waste}} = L_{\text{total}}\,(1+\alpha/100),\quad
            W_{\text{with waste}} = W_{\text{total}}\,(1+\alpha/100)
          \]</p>
          <p>For stock splices in a continuous run of length \( L \) with stock length \( S \) and lap \( \ell \):</p>
          <p>\[
            \text{pieces}=\left\lceil \frac{L}{S} \right\rceil,\quad
            \text{splices}=\max(0,\,\text{pieces}-1),\quad
            L_{\text{bar}} = L + \text{splices}\cdot \ell
          \]</p>
        </div>

        <h2>Glossary of Variables</h2>
        <ul>
          <li><strong>Bar size:</strong> US “#” sizes or metric diameters; maps to a nominal unit weight.</li>
          <li><strong>Cover:</strong> Clear distance from concrete surface to the bar surface.</li>
          <li><strong>Spacing:</strong> Center-to-center distance between parallel bars.</li>
          <li><strong>Stock length:</strong> Commercial length from supplier (e.g., 20 ft / 6 m).</li>
          <li><strong>Lap splice length:</strong> Overlap length at bar joints for force transfer per design code.</li>
          <li><strong>Waste %:</strong> Allowance to cover offcuts and handling losses.</li>
        </ul>

        <h2>How It Works: A Step-by-Step Example</h2>
        <h3>Slab grid (US units)</h3>
        <p>Length 20 ft, width 12 ft, cover 2 in, spacing 12 in both ways, stock 20 ft, lap 2 ft, bar #4 (\( w_b=0.668\,\text{lb/ft} \)), waste 5%.</p>
        <ol>
          <li>Effective run in X: \( 20 - 2\cdot(2/12) = 19.667 \) ft; count of Y bars: \( \lfloor (12 - 2\cdot 2/12)/1 \rfloor + 1 = 11 \).</li>
          <li>Each X-bar length with splices: \( \lceil 19.667/20 \rceil=1 \Rightarrow L=19.667 \) ft (no splice).</li>
          <li>Repeat for Y direction (run 12−2×2/12=11.667 ft, count 19).</li>
          <li>Total length: \( 11\times19.667 + 19\times11.667 = 420.3 \) ft; with 5% waste: \( 441.3 \) ft.</li>
          <li>Weight: \( 0.668 \times 441.3 = 294.0 \) lb.</li>
        </ol>

        <h2>Frequently Asked Questions</h2>
        <details>
          <summary>What cover should I use?</summary>
          <p>Follow project drawings. Typical slab cover can be 1.5–2 in (40–50 mm), but requirements vary by exposure and code.</p>
        </details>
        <details>
          <summary>How do lap splices affect quantity?</summary>
          <p>The tool adds one lap per stock joint in a continuous run, increasing total length accordingly.</p>
        </details>
        <details>
          <summary>Are bar bends accounted for?</summary>
          <p>This tool uses straight equivalent lengths. You can include bends by increasing the input leg length or adding custom cuts.</p>
        </details>
        <details>
          <summary>What if my supplier uses different stock lengths?</summary>
          <p>Adjust the stock length input to match supplier availability (e.g., 40 ft / 12 m) to update splices and totals.</p>
        </details>
        <details>
          <summary>Can I export the cut list?</summary>
          <p>Yes. Use the “Export CSV” button to download a procurement-ready list.</p>
        </details>

        <div class="mt-6 p-4 bg-gray-50 border rounded-lg text-sm text-gray-700">
          <p><strong>Tool developed by Ugo Candido.</strong> Content verified by the CalcDomain Editorial Board.<br>
          Last accuracy review: <time datetime="2025-10-27">October 27, 2025</time></p>
        </div>
      </article>
    </section>

    <!-- Sidebar -->
    <aside class="w-full lg:w-1/3">
      <div class="sticky top-6 space-y-6">
        <div class="bg-white p-6 rounded-lg shadow">
          <h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
          <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
            <li>US/metric bars with automatic unit weights.</li>
            <li>Modes for slab grids, walls/beams, and custom cuts.</li>
            <li>Lap splices, stock lengths, waste, and cost in one place.</li>
          </ul>
        </div>
        <div class="bg-white p-6 rounded-lg shadow">
          <h3 class="font-bold text-lg mb-3">Related construction tools</h3>
          <ul class="text-sm space-y-2">
            <li><a class="text-blue-700 hover:underline" href="concrete-slab-calculator.html">Concrete Slab Calculator</a></li>
            <li><a class="text-blue-700 hover:underline" href="rebar-development-length.html">Rebar Development Length</a></li>
            <li><a class="text-blue-700 hover:underline" href="beam-rebar-spacing.html">Beam Rebar Spacing</a></li>
          </ul>
        </div>
        <div class="bg-gray-200 h-64 rounded-lg flex items-center justify-center text-gray-600 no-print">Ad Placement (300×600)</div>
      </div>
    </aside>
  </div>
</main>

<footer class="bg-white border-t">
  <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
    <p>&copy; 2025 CalcDomain. All rights reserved.</p>
    <div class="mt-3 space-x-4">
      <a href="about.html" class="hover:text-blue-700">About</a>
      <a href="contact.html" class="hover:text-blue-700">Contact</a>
      <a href="privacy.html" class="hover:text-blue-700">Privacy</a>
      <a href="terms.html" class="hover:text-blue-700">Terms</a>
    </div>
  </div>
</footer>

<!-- Accessibility helpers & calculator logic -->
<script defer>
/* ======= UI helpers ======= */
const $ = (id) => document.getElementById(id);
const fmt = {
  len(val, sys){ if(!isFinite(val)) return '—'; return sys==='us' ? `${val.toFixed(2)} ft` : `${val.toFixed(2)} m`; },
  wt(val, sys){ if(!isFinite(val)) return '—'; return sys==='us' ? `${val.toFixed(1)} lb` : `${val.toFixed(1)} kg`; },
  cost(val, cur){ if(!isFinite(val)) return '—'; return `${cur}${val.toFixed(2)}`; },
};
function setHidden(el,hide){ el.classList.toggle('hidden', !!hide); }

/* ======= Data tables ======= */
/* US bars: size -> {diameter_in, unit_wt_lb_per_ft} */
const US_BARS = [
  {id:'#3',  db_in:0.375, wt:0.376},
  {id:'#4',  db_in:0.500, wt:0.668},
  {id:'#5',  db_in:0.625, wt:1.043},
  {id:'#6',  db_in:0.750, wt:1.502},
  {id:'#7',  db_in:0.875, wt:2.044},
  {id:'#8',  db_in:1.000, wt:2.670},
  {id:'#9',  db_in:1.128, wt:3.400},
  {id:'#10', db_in:1.270, wt:4.303},
  {id:'#11', db_in:1.410, wt:5.313},
  {id:'#14', db_in:1.693, wt:7.650},
  {id:'#18', db_in:2.257, wt:13.600}
];
/* Metric bars: diameter_mm -> kg/m using theoretical ρ=7850 kg/m³ (standard table) */
const METRIC_BARS = [
  {id:'Ø8',  db_mm:8,  wt:0.395},
  {id:'Ø10', db_mm:10, wt:0.617},
  {id:'Ø12', db_mm:12, wt:0.888},
  {id:'Ø14', db_mm:14, wt:1.210},
  {id:'Ø16', db_mm:16, wt:1.580},
  {id:'Ø20', db_mm:20, wt:2.470},
  {id:'Ø25', db_mm:25, wt:3.850},
  {id:'Ø28', db_mm:28, wt:4.830},
  {id:'Ø32', db_mm:32, wt:6.310},
  {id:'Ø40', db_mm:40, wt:9.870}
];

/* ======= State ======= */
const state = {
  sys: 'us',
  bar: null,
  waste: 5,
  currency: '$',
  pricePerUnit: 0,
  mode: 'slab',
  cuts: [] /* {len, qty} */,
};

/* ======= Init ======= */
function populateBarOptions(){
  const sel = $('barSize'); sel.innerHTML='';
  const sys = $('unitSystem').value;
  if(sys==='us'){
    US_BARS.forEach(b=>{
      const o=document.createElement('option');
      o.value = b.id; o.textContent=`${b.id} — ${b.wt} lb/ft`;
      sel.appendChild(o);
    });
  }else{
    METRIC_BARS.forEach(b=>{
      const o=document.createElement('option');
      o.value = b.id; o.textContent=`${b.id} — ${b.wt} kg/m`;
      sel.appendChild(o);
    });
  }
}
function getBar(){
  const sys = $('unitSystem').value;
  const id = $('barSize').value;
  if(sys==='us') return US_BARS.find(b=>b.id===id);
  return METRIC_BARS.find(b=>b.id===id);
}
function unitLen(){ return $('unitSystem').value==='us' ? 'ft' : 'm'; }
function toFeet(val){ return val/12; } // inches -> feet
function toMeters(val){ return val/1000; } // mm -> m

/* Mode tabs */
document.querySelectorAll('.modeBtn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const mode = btn.dataset.mode;
    state.mode = mode;
    document.querySelectorAll('.modeBtn').forEach(b=>{
      const sel = b.dataset.mode===mode;
      b.setAttribute('aria-selected', sel ? 'true' : 'false');
      b.classList.toggle('bg-blue-700', sel);
      b.classList.toggle('text-white', sel);
    });
    ['slabPanel','wallPanel','customPanel'].forEach(id=>{
      document.getElementById(id).classList.toggle('hidden', !id.startsWith(mode));
    });
  });
});

/* Mobile menu */
$('menuBtn').addEventListener('click', ()=>{
  const m=$('mobileMenu'); const expanded=$('menuBtn').getAttribute('aria-expanded')==='true';
  $('menuBtn').setAttribute('aria-expanded', (!expanded).toString());
  m.classList.toggle('hidden', expanded);
});

/* Tooltips: toggle visibility */
document.querySelectorAll('button[aria-controls]').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const id=btn.getAttribute('aria-controls');
    const tip=$(id);
    const isHidden = tip.getAttribute('aria-hidden')!=='false';
    tip.setAttribute('aria-hidden', isHidden ? 'false' : 'true');
    btn.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
  });
});

/* Validation on blur */
function requirePositiveNumber(inputId, errorId){
  const el=$(inputId), err=$(errorId);
  el.addEventListener('blur', ()=>{
    const v=parseFloat(el.value);
    const ok = isFinite(v) && v>0;
    err.textContent = ok ? '' : 'Please enter a value greater than 0.';
    err.classList.toggle('hidden', ok);
    if(!ok) el.setAttribute('aria-invalid','true'); else el.removeAttribute('aria-invalid');
  });
}
['wastePct','slabLen','slabWid','slabCover','spaceX','spaceY','stockLenSlab','lapLenSlab',
 'wallLen','longBars','stockLenWall','lapLenWall','stirrupSpacing','stirrupLegLen'].forEach((id)=>{
   const eid = id+'Error';
   if($(id) && $(eid)) requirePositiveNumber(id,eid);
});
$('customCuts').addEventListener('blur', ()=>{
  const t=$('customCuts'), err=$('customCutsError');
  const ok = t.value.trim().length>0;
  err.textContent = ok ? '' : 'Enter one or more numeric lengths separated by commas.';
  err.classList.toggle('hidden', ok);
  if(!ok) t.setAttribute('aria-invalid','true'); else t.removeAttribute('aria-invalid');
});

/* Respond to unit system changes */
$('unitSystem').addEventListener('change', ()=>{
  populateBarOptions();
  syncPlaceholders();
});
function syncPlaceholders(){
  const sys=$('unitSystem').value;
  const unit = sys==='us'?'ft':'m';
  const small = sys==='us'?'in':'mm';
  // Update labels where units matter
  document.querySelectorAll('[for="slabLen"],[for="slabWid"],[for="wallLen"]').forEach(l=>{
    l.textContent = l.textContent.replace(/\(.*\)$/, '').split(' (')[0] + ` (${unit}) *`;
  });
  document.querySelector('[for="slabCover"]').textContent = `Concrete cover (${small}) *`;
  document.querySelector('[for="spaceX"]').textContent = `Spacing (X) (${small}) *`;
  document.querySelector('[for="spaceY"]').textContent = `Spacing (Y) (${small}) *`;
  document.querySelector('[for="stockLenSlab"]').textContent = `Stock length (${unit}) *`;
  document.querySelector('[for="lapLenSlab"]').textContent = `Lap splice length (${unit}) *`;
  document.querySelector('[for="stockLenWall"]').textContent = `Stock length (${unit}) *`;
  document.querySelector('[for="lapLenWall"]').textContent = `Lap splice length (${unit}) *`;
  document.querySelector('[for="stirrupLegLen"]').textContent = `Stirrup one-leg length (${unit}) *`;
}
populateBarOptions(); syncPlaceholders();

/* Global inputs */
$('barSize').addEventListener('change', ()=>{});
$('wastePct').addEventListener('input', ()=>{});
$('currency').addEventListener('change', ()=>{ state.currency=$('currency').value; });
$('priceUnit').addEventListener('input', ()=>{});

/* ======= Core calculations ======= */
function buildCutsFromSlab(){
  const sys = $('unitSystem').value;
  const len = parseFloat($('slabLen').value);
  const wid = parseFloat($('slabWid').value);
  const cover = parseFloat($('slabCover').value);
  const spaceX = parseFloat($('spaceX').value);
  const spaceY = parseFloat($('spaceY').value);
  const stock = parseFloat($('stockLenSlab').value);
  const lap = parseFloat($('lapLenSlab').value);

  if([len,wid,cover,spaceX,spaceY,stock].some(v=>!isFinite(v)||v<=0)) return [];

  // Convert to consistent major units (ft or m)
  const major = sys==='us' ? 1 : 1; // already in ft or m
  const minorToMajor = sys==='us' ? (v)=>toFeet(v) : (v)=>toMeters(v);

  const effLen = len - 2*minorToMajor(cover); // run in X
  const effWid = wid - 2*minorToMajor(cover); // run in Y
  const barsY = Math.floor((wid - 2*minorToMajor(cover)) / minorToMajor(spaceX)) + 1;
  const barsX = Math.floor((len - 2*minorToMajor(cover)) / minorToMajor(spaceY)) + 1;

  function pieceLen(run, stock, lap){
    const pieces = Math.max(1, Math.ceil(run/stock));
    const splices = pieces - 1;
    return run + splices * lap;
  }

  const lenX = pieceLen(effLen, stock, lap);
  const lenY = pieceLen(effWid, stock, lap);

  // Consolidate cuts as map length->qty (rounded to 3 decimals to aggregate)
  const map = new Map();
  function addCut(L, qty){
    const key = Math.round(L*1000)/1000;
    map.set(key, (map.get(key)||0)+qty);
  }
  if(isFinite(lenX) && barsY>0) addCut(lenX, barsY);
  if(isFinite(lenY) && barsX>0) addCut(lenY, barsX);

  return [...map.entries()].map(([L,qty])=>({len:L, qty}));
}

function buildCutsFromWall(){
  const sys = $('unitSystem').value;
  const run = parseFloat($('wallLen').value);
  const nLong = parseInt($('longBars').value,10);
  const stock = parseFloat($('stockLenWall').value);
  const lap = parseFloat($('lapLenWall').value);
  const s = parseFloat($('stirrupSpacing').value);
  const leg = parseFloat($('stirrupLegLen').value);

  if([run,nLong,stock,lap,s,leg].some(v=>!isFinite(v)||v<=0)) return [];

  const pieces = Math.max(1, Math.ceil(run/stock));
  const splices = pieces - 1;
  const longLen = run + splices * lap;

  const nStirrups = Math.floor(run / ( (sys==='us')? toFeet(s) : toMeters(s) )) + 1;
  const stirrupLen = 2 * leg; // perimeter via two legs (simplified)

  const map = new Map();
  function addCut(L, qty){ const key=Math.round(L*1000)/1000; map.set(key,(map.get(key)||0)+qty); }
  addCut(longLen, nLong);
  addCut(stirrupLen, nStirrups);

  return [...map.entries()].map(([L,qty])=>({len:L, qty}));
}

function buildCutsFromCustom(){
  const sys = $('unitSystem').value;
  const raw = $('customCuts').value.split(',').map(s=>parseFloat(s.trim())).filter(v=>isFinite(v)&&v>0);
  const map = new Map();
  raw.forEach(L=>{
    const key=Math.round(L*1000)/1000;
    map.set(key,(map.get(key)||0)+1);
  });
  return [...map.entries()].map(([len,qty])=>({len,qty}));
}

function compute(){
  // determine cuts
  let cuts=[];
  if(state.mode==='slab') cuts = buildCutsFromSlab();
  else if(state.mode==='wall') cuts = buildCutsFromWall();
  else cuts = buildCutsFromCustom();

  const sys=$('unitSystem').value;
  const waste = Math.max(0, parseFloat($('wastePct').value)||0);
  const bar = getBar();
  if(!bar) return;

  // Unit weight per major length
  const unitWt = sys==='us' ? bar.wt : bar.wt; // lb/ft or kg/m already
  const totalLen = cuts.reduce((s,c)=>s + c.len*c.qty, 0);
  const totalLenWaste = totalLen * (1 + waste/100);
  const totalWt = unitWt * totalLenWaste;

  const price = Math.max(0, parseFloat($('priceUnit').value)||0);
  const cost = price>0 ? totalWt * price : NaN;

  // Render summary
  $('outBars').textContent = cuts.reduce((s,c)=>s+c.qty,0).toString();
  $('outLen').textContent = fmt.len(totalLenWaste, sys);
  $('outWt').textContent = fmt.wt(totalWt, sys);
  $('outCost').textContent = isNaN(cost) ? '—' : fmt.cost(cost, $('currency').value);

  // Render cut list
  const tbody=$('cutBody'); tbody.innerHTML='';
  cuts.sort((a,b)=>a.len-b.len).forEach((c,i)=>{
    const eachWt = unitWt * c.len;
    const row = document.createElement('tr');
    row.innerHTML = `
      <td class="px-4 py-2">${i+1}</td>
      <td class="px-4 py-2">${fmt.len(c.len, sys)}</td>
      <td class="px-4 py-2">${c.qty}</td>
      <td class="px-4 py-2">${fmt.wt(eachWt, sys)}</td>
      <td class="px-4 py-2">${fmt.wt(eachWt*c.qty, sys)}</td>
    `;
    tbody.appendChild(row);
  });
}

/* Buttons */
$('calcBtn').addEventListener('click', compute);
$('resetBtn').addEventListener('click', ()=>{
  window.location.reload();
});
$('printBtn').addEventListener('click', ()=>window.print());
$('exportBtn').addEventListener('click', ()=>{
  const sys=$('unitSystem').value;
  const bar = getBar();
  const unitWt = sys==='us' ? bar.wt : bar.wt;
  const rows=[['Length','Qty','Weight(each)','Weight(total)']];
  document.querySelectorAll('#cutBody tr').forEach(tr=>{
    const tds=[...tr.querySelectorAll('td')].map(td=>td.textContent.trim());
    rows.push([tds[1], tds[2], tds[3], tds[4]]);
  });
  const csv = rows.map(r=>r.join(',')).join('\n');
  const blob = new Blob([csv],{type:'text/csv'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='rebar-cut-list.csv';
  a.click();
  URL.revokeObjectURL(a.href);
});

/* Initial bar options & defaults */
compute();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Business Loan Calculator - Calculate Payments & Amortization</title>
<meta name="description" content="Calculate your business loan payment, total interest, and full amortization schedule. Enter loan amount, APR, and term to get instant, accurate results.">
<link rel="canonical" href="https://calcdomain.com/business-loan-calculator.html"/>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0KOxRfckZHNgsSCjWNBNYRdonEchfV8B2S/YlGceeoEES1rX+EVdo" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGjKrxZssNNgtgkexiX+bH3eJVwDEzZaXnFvhbYqsB/4eLGxNrgIChGCSB" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURPlLJSytgoCNCIySrSCTEBbvX7inM4VLxS+ZJIYU1AkatxaYhFPER" crossorigin="anonymous"
    onload="renderMathInElement(document.body, {
      delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false}
      ]
    });"></script>

<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol, .prose dl { margin-bottom: 1rem; }
.prose li, .prose dt, .prose dd { margin-bottom: 0.5rem; }
.prose dt { font-weight: 600; }
.prose dd { margin-left: 1.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.5rem;
overflow-x:auto; text-align: center; font-size: 1.1rem;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
/* Custom focus state for WCAG AA */
.form-input:focus, .form-select:focus, .tooltip-btn:focus {
outline: 3px solid #3b82f6;
outline-offset: 2px;
box-shadow: none;
border-color: #3b82f6;
}
.form-input.invalid, .form-select.invalid {
border-color: #ef4444;
}
.form-input.invalid:focus {
outline-color: #ef4444;
border-color: #ef4444;
}
.error-message {
color: #dc2626;
font-size: 0.875rem;
margin-top: 0.5rem;
display: none; /* Hidden by default */
}
.tooltip-btn {
display: inline-flex;
align-items: center;
justify-content: center;
width: 1.25rem;
height: 1.25rem;
border-radius: 9999px;
border: 1px solid #9ca3af;
background: #f9fafb;
color: #6b7280;
margin-left: 0.5rem;
cursor: pointer;
}
.tooltip-content {
display: none; /* Hidden by default */
background: #1f2937;
color: #fff;
padding: 0.75rem;
border-radius: 6px;
font-size: 0.875rem;
position: absolute;
z-index: 10;
width: 250px;
bottom: 110%;
left: 50%;
transform: translateX(-50%);
box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.tooltip-content::after {
content: '';
position: absolute;
top: 100%;
left: 50%;
margin-left: -5px;
border-width: 5px;
border-style: solid;
border-color: #1f2937 transparent transparent transparent;
}
/* Prevent CLS on results load */
#results {
min-height: 320px;
}
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
#results-chart-container { display: none !important; }
}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Business Loan Calculator - Calculate Payments & Amortization",
  "description": "Calculate your business loan payment, total interest, and full amortization schedule. Enter loan amount, APR, and term to get instant, accurate results.",
  "url": "https://calcdomain.com/business-loan-calculator.html",
  "inLanguage": "en",
  "author": { "@type": "Person", "name": "Ugo Candido" },
  "publisher": { "@type": "Organization", "name": "CalcDomain" }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
    { "@type": "ListItem", "position": 2, "name": "Finance", "item": "https://calcdomain.com/finance.html" },
    { "@type": "ListItem", "position": 3, "name": "Business Small Biz", "item": "https://calcdomain.com/subcategories/finance-business-small-biz.html" },
    { "@type": "ListItem", "position": 4, "name": "Business Loan Calculator", "item": "https://calcdomain.com/business-loan-calculator.html" }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Use the Business Loan Calculator",
  "description": "A step-by-step guide to calculating your business loan payments and total costs.",
  "step": [
    {"@type": "HowToStep", "name": "Enter Loan Amount", "text": "Input the total principal amount you plan to borrow for your business."},
    {"@type": "HowToStep", "name": "Enter Interest Rate", "text": "Input the Annual Percentage Rate (APR) quoted by your lender."},
    {"@type": "HowToStep", "name": "Enter Loan Term", "text": "Input the total length of the loan in years."},
    {"@type": "HowToStep", "name": "Select Payment Frequency", "text": "Choose how often you will make payments (Monthly, Bi-Weekly, or Weekly)."},
    {"@type": "HowToStep", "name": "Review Results", "text": "The calculator will instantly display your periodic payment, total principal, total interest, total cost, and a full amortization schedule."}
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is amortization?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Amortization is the process of spreading out a loan into a series of fixed payments over time. Each payment consists of both principal and interest. In the beginning, a larger portion of the payment goes toward interest, and as the loan matures, a larger portion goes toward paying down the principal."
      }
    },
    {
      "@type": "Question",
      "name": "What is the difference between APR and interest rate?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The interest rate is the cost of borrowing the money, expressed as a percentage. The Annual Percentage Rate (APR) is a broader measure that includes the interest rate plus any lender fees, origination fees, or other costs associated with the loan. APR gives you a more complete picture of the loan's true cost."
      }
    },
    {
      "@type": "Question",
      "name": "Can I make extra payments on my business loan?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Most business loans allow for prepayments, which can help you pay off the loan faster and save on total interest. However, you must check your loan agreement for any 'prepayment penalties.' This calculator assumes no prepayments are made."
      }
    },
    {
      "@type": "Question",
      "name": "How is this different from a simple interest loan?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This calculator uses an amortizing formula, where interest is calculated on the *remaining balance* of the loan. A simple interest loan calculates interest based on the *original principal* for the entire loan term, which is less common for standard business term loans."
      }
    },
    {
      "@type": "Question",
      "name": "What information do I need to apply for a business loan?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Lenders typically require a detailed business plan, personal and business financial statements (like balance sheets and income statements), tax returns, bank statements, and legal documents (like articles of incorporation). Use this calculator to model different scenarios before you apply."
      }
    }
  ]
}
</script>
<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..."
class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu" aria-expanded="false">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
<a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="finance.html" class="hover:text-blue-600">Finance</a> &raquo;
<a href="subcategories/finance-business-small-biz.html" class="hover:text-blue-600">Business Small Biz</a> &raquo;
<span class="text-gray-900">Business Loan Calculator</span>
</nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Business Loan Calculator</h1>
<p class="text-gray-600 mb-6">This calculator helps entrepreneurs and small business owners estimate payments for a fixed-term loan. By entering your loan amount, interest rate, and term, you can instantly see your periodic payment, total interest cost, and a complete amortization schedule.
</p>

<form id="calculator-form" class="space-y-6" onsubmit="return false;">
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<label for="loanAmount" class="block text-sm font-medium text-gray-700">Loan Amount ($)<span class="text-red-500">*</span></label>
<input type="number" id="loanAmount" value="50000" step="100" min="1"
class="form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true" aria-invalid="false" aria-describedby="loanAmount-error">
<div id="loanAmount-error" class="error-message" role="alert">Please enter a valid loan amount (e.g., 50000).</div>
</div>

<div>
<div class="flex items-center justify-between">
<label for="interestRate" class="block text-sm font-medium text-gray-700">Annual Interest Rate (APR %)<span class="text-red-500">*</span></label>
<div class="relative">
<button type="button" class="tooltip-btn" aria-label="What is APR?" aria-describedby="apr-tooltip" id="apr-tooltip-btn">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 16 16"><path d="M5.25 6.033h1.32c0-.781.458-1.315 1.362-1.315.839 0 1.312.424 1.312 1.05 0 .618-.423.957-1.073 1.488-.56.46-1.582 1.256-1.582 2.675V11h1.319v-.637c0-.722.424-1.187 1.05-1.63.59-.418 1.344-1.05 1.344-2.28 0-1.284-1.008-2.203-2.604-2.203-1.63 0-2.583 1.03-2.604 2.203zM7.34 12.87c.56 0 .93-.382.93-.91 0-.54-.37-.91-.93-.91s-.93.37-.93.91c0 .528.37.91.93.91z"/></svg>
</button>
<div id="apr-tooltip" role="tooltip" class="tooltip-content">
Enter the Annual Percentage Rate. This includes the interest rate plus any lender fees, giving you the true annual cost.
</div>
</div>
</div>
<input type="number" id="interestRate" value="7.5" step="0.01" min="0" max="100"
class="form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true" aria-invalid="false" aria-describedby="interestRate-error apr-tooltip">
<div id="interestRate-error" class="error-message" role="alert">Please enter a valid interest rate (e.g., 7.5).</div>
</div>

<div>
<label for="loanTerm" class="block text-sm font-medium text-gray-700">Loan Term (Years)<span class="text-red-500">*</span></label>
<input type="number" id="loanTerm" value="5" step="1" min="1"
class="form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true" aria-invalid="false" aria-describedby="loanTerm-error">
<div id="loanTerm-error" class="error-message" role="alert">Please enter a valid loan term in years (e.g., 5).</div>
</div>

<div>
<label for="paymentFrequency" class="block text-sm font-medium text-gray-700">Payment Frequency</label>
<select id="paymentFrequency"
class="form-select mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<option value="monthly" selected>Monthly (12/year)</option>
<option value="biweekly">Bi-Weekly (26/year)</option>
<option value="weekly">Weekly (52/year)</option>
</select>
</div>

<div>
<label for="startDate" class="block text-sm font-medium text-gray-700">First Payment Date</label>
<input type="month" id="startDate"
class="form-input mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
</div>
</form>

<section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6" aria-live="polite">
<h3 class="text-xl font-semibold text-gray-900 mb-4 text-center">Your Loan Summary</h3>
<div class="flex flex-col md:flex-row gap-6">
<div class="w-full md:w-2/3 grid grid-cols-1 sm:grid-cols-2 gap-4">
<div class="result-card">
<h4>Payment per Period</h4>
<p id="paymentPerPeriod">$0.00</p>
</div>
<div class="result-card">
<h4>Total Principal</h4>
<p id="totalPrincipal">$0.00</p>
</div>
<div class="result-card">
<h4>Total Interest</h4>
<p id="totalInterest">$0.00</p>
</div>
<div class="result-card">
<h4>Total Cost</h4>
<p id="totalCost">$0.00</p>
</div>
</div>
<div class="w-full md:w-1/3">
<div id="results-chart-container" class="h-48 md:h-full">
<canvas id="resultsChart" aria-label="Chart showing breakdown of principal versus interest"></canvas>
</div>
</div>
</div>

<details class="mt-6 bg-white rounded-lg" id="scheduleDetails">
<summary class="font-semibold text-gray-800 p-4 border border-gray-200 rounded-lg">View Amortization Schedule</summary>
<div class="mt-4 overflow-x-auto border border-gray-200 rounded-lg" id="scheduleContainer">
<table class="min-w-full text-sm text-right">
<thead class="bg-gray-100 text-gray-700 uppercase">
<tr>
<th class="px-4 py-2 text-left">#</th>
<th class="px-4 py-2 text-left">Date</th>
<th class="px-4 py-2">Payment</th>
<th class="px-4 py-2">Interest</th>
<th class="px-4 py-2">Principal</th>
<th class="px-4 py-2">Balance</th>
</tr>
</thead>
<tbody id="scheduleBody">
<tr>
<td colspan="6" class="text-center p-4 text-gray-500">Enter loan details to generate the schedule.</td>
</tr>
</tbody>
</table>
</div>
</details>
</section>
</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
<h2>Data Source and Methodology</h2>
<p>This calculator uses the standard financial formula for an amortizing loan, also known as the loan payment formula. This is the same formula used by banks and financial institutions to calculate fixed periodic payments for mortgages and business term loans.</p>
<p>All calculations are based strictly on this formula, assuming a fixed interest rate and that payments are made consistently as scheduled.</p>

<h2>The Formula Explained</h2>
<p>The periodic payment (M) is calculated using the following formula, where P is the principal, i is the periodic interest rate, and n is the total number of payments:</p>
<div class="formula-box">
$$ M = P \frac{i(1 + i)^n}{(1 + i)^n - 1} $$
</div>

<h2>Glossary of Variables</h2>
<dl>
<dt>M (Periodic Payment)</dt>
<dd>The fixed amount you will pay each period (e.g., monthly).</dd>
<dt>P (Principal Loan Amount)</dt>
<dd>The initial amount of money you are borrowing.</dd>
<dt>i (Periodic Interest Rate)</dt>
<dd>The annual interest rate (APR) divided by the number of payment periods per year. For example, a 6% APR paid monthly would have a periodic rate (i) of 0.06 / 12 = 0.005.</dd>
<dt>n (Total Number of Payments)</dt>
<dd>The total number of payments over the life of the loan. For example, a 5-year loan paid monthly would have 5 * 12 = 60 payments.</dd>
</dl>

<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's walk through a real-world scenario to see how the calculation is performed.</p>
<p>Imagine you are taking out a <strong>$50,000</strong> business loan to buy new equipment. The lender offers you a <strong>5-year term</strong> at a <strong>7.5% APR</strong>, with <strong>monthly payments</strong>.</p>
<ol>
<li><strong>Identify the variables:</strong>
<ul>
<li>Principal (P) = $50,000</li>
<li>Annual Rate (r) = 7.5% or 0.075</li>
<li>Term (t) = 5 years</li>
<li>Payments per year = 12</li>
</ul>
</li>
<li><strong>Calculate 'i' and 'n':</strong>
<ul>
<li>Periodic Interest Rate (i) = 0.075 / 12 = <strong>0.00625</strong></li>
<li>Total Payments (n) = 5 years * 12 payments/year = <strong>60</strong></li>
</ul>
</li>
<li><strong>Plug into the formula:</strong>
<ul>
<li>$$ M = 50,000 \frac{0.00625(1 + 0.00625)^{60}}{(1 + 0.00625)^{60} - 1} $$</li>
<li>$$ M = 50,000 \frac{0.00625(1.45329...)}{(1.45329...) - 1} $$</li>
<li>$$ M = 50,000 \frac{0.009083...}{0.45329...} $$</li>
<li>$$ M = 50,000 \times 0.020038... $$</li>
</ul>
</li>
<li><strong>Final Monthly Payment (M):</strong>
<ul>
<li>$$ M \approx \$1,001.91 $$</li>
</ul>
</li>
</ol>
<p>Your monthly payment would be $1,001.91. The calculator performs this computation instantly and also generates the full schedule showing how much of each payment goes to interest vs. principal.</p>

<h2>Frequently Asked Questions (FAQ)</h2>
<details>
<summary>What is amortization?</summary>
<p>Amortization is the process of spreading out a loan into a series of fixed payments over time. Each payment consists of both principal and interest. In the beginning, a larger portion of the payment goes toward interest, and as the loan matures, a larger portion goes toward paying down the principal.</p>
</details>
<details>
<summary>What is the difference between APR and interest rate?</summary>
<p>The interest rate is the cost of borrowing the money, expressed as a percentage. The Annual Percentage Rate (APR) is a broader measure that includes the interest rate plus any lender fees, origination fees, or other costs associated with the loan. APR gives you a more complete picture of the loan's true cost.</p>
</details>
<details>
<summary>Can I make extra payments on my business loan?</summary>
<p>Most business loans allow for prepayments, which can help you pay off the loan faster and save on total interest. However, you must check your loan agreement for any 'prepayment penalties.' This calculator assumes no prepayments are made.</p>
</details>
<details>
<summary>How is this different from a simple interest loan?</summary>
<p>This calculator uses an amortizing formula, where interest is calculated on the *remaining balance* of the loan. A simple interest loan calculates interest based on the *original principal* for the entire loan term, which is less common for standard business term loans.</p>
</details>
<details>
<summary>What information do I need to apply for a business loan?</summary>
<p>Lenders typically require a detailed business plan, personal and business financial statements (like balance sheets and income statements), tax returns, bank statements, and legal documents (like articles of incorporation). Use this calculator to model different scenarios before you apply.</p>
</details>
<details>
<summary>Why is my first payment mostly interest?</summary>
<p>Because you owe interest on the largest principal balance at the beginning of the loan. As you pay down the principal, the amount of interest owed each period decreases, allowing more of your fixed payment to go toward the principal balance.</p>
</details>

<div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
<p><strong>Tool developed by Ugo Candido.</strong> Financial methodology verified by the CalcDomain Editorial Board.<br>
Last accuracy review: <time datetime="2025-10-24">October 24, 2025</time></p>
</div>
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-10 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Instantly see your periodic payment (monthly, bi-weekly, weekly).</li>
<li>Visualize the total interest vs. principal with an interactive chart.</li>
<li>Generate a full amortization schedule to understand your payment breakdown.</li>
<li>Compare different loan offers by changing the APR and term.</li>
<li>Empower your business planning and financial forecasting.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Business Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="sba-loan-calculator.html" class="text-blue-600 hover:underline">SBA Loan Calculator</a></li>
<li><a href="startup-costs-calculator.html" class="text-blue-600 hover:underline">Startup Costs Calculator</a></li>
<li><a href="business-valuation-calculator.html" class="text-blue-600 hover:underline">Business Valuation Calculator</a></li>
<li><a href="profit-margin-calculator.html" class="text-blue-600 hover:underline">Profit Margin Calculator</a></li>
<li><a href="break-even-point-calculator.html" class="text-blue-600 hover:underline">Break-Even Point Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-white border-t mt-12">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="about.html" class="hover:text-blue-600">About</a>
<a href="contact.html" class="hover:text-blue-600">Contact</a>
<a href="privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script defer>
document.addEventListener('DOMContentLoaded', () => {
    // --- DOM Element Cache ---
    const elements = {
        form: document.getElementById('calculator-form'),
        loanAmount: document.getElementById('loanAmount'),
        interestRate: document.getElementById('interestRate'),
        loanTerm: document.getElementById('loanTerm'),
        paymentFrequency: document.getElementById('paymentFrequency'),
        startDate: document.getElementById('startDate'),
        paymentPerPeriod: document.getElementById('paymentPerPeriod'),
        totalPrincipal: document.getElementById('totalPrincipal'),
        totalInterest: document.getElementById('totalInterest'),
        totalCost: document.getElementById('totalCost'),
        scheduleBody: document.getElementById('scheduleBody'),
        aprTooltipBtn: document.getElementById('apr-tooltip-btn'),
        aprTooltip: document.getElementById('apr-tooltip')
    };

    const inputs = [elements.loanAmount, elements.interestRate, elements.loanTerm];
    let chartInstance = null;

    // --- Formatters ---
    const fmtCurrency = (val) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(val || 0);
    const fmtDate = new Intl.DateTimeFormat('en-US', { year: 'numeric', month: 'short' });

    // --- Validation Logic ---
    function validateField(input) {
        const errorEl = document.getElementById(`${input.id}-error`);
        let isValid = true;
        let errorMessage = '';

        const value = input.valueAsNumber;
        
        if (isNaN(value) || value <= (parseFloat(input.min) || 0)) {
            if (input.id === 'loanAmount') errorMessage = 'Loan amount must be greater than 0.';
            if (input.id === 'loanTerm') errorMessage = 'Term must be 1 year or more.';
            if (input.id === 'interestRate' && value < 0) errorMessage = 'Rate cannot be negative.';
            isValid = (input.id === 'interestRate' && value === 0) ? true : false; // 0% APR is valid
        }
        
        if (input.id === 'interestRate' && value > 100) {
            errorMessage = 'Rate seems too high (max 100%).';
            isValid = false;
        }

        if (isValid) {
            input.setAttribute('aria-invalid', 'false');
            input.classList.remove('invalid');
            errorEl.style.display = 'none';
        } else {
            input.setAttribute('aria-invalid', 'true');
            input.classList.add('invalid');
            errorEl.textContent = errorMessage;
            errorEl.style.display = 'block';
        }
        return isValid;
    }

    // --- Core Calculation Engine ---
    function calculateAmortization() {
        // 1. Validate all fields first
        let allValid = true;
        inputs.forEach(input => {
            if (!validateField(input)) {
                allValid = false;
            }
        });

        if (!allValid) {
            clearResults();
            return;
        }

        // 2. Get validated inputs
        const principal = elements.loanAmount.valueAsNumber || 0;
        const apr = elements.interestRate.valueAsNumber / 100;
        const termYears = elements.loanTerm.valueAsNumber || 0;
        const frequency = elements.paymentFrequency.value;

        // 3. Calculate periodic values
        let periodsPerYear;
        switch (frequency) {
            case 'weekly': periodsPerYear = 52; break;
            case 'biweekly': periodsPerYear = 26; break;
            default: periodsPerYear = 12;
        }

        const totalPayments = Math.round(termYears * periodsPerYear);
        const periodicRate = apr / periodsPerYear;

        // 4. Calculate payment (M)
        let periodicPayment;
        if (periodicRate === 0) {
            periodicPayment = principal / totalPayments;
        } else {
            const numerator = periodicRate * Math.pow(1 + periodicRate, totalPayments);
            const denominator = Math.pow(1 + periodicRate, totalPayments) - 1;
            periodicPayment = principal * (numerator / denominator);
        }

        // 5. Calculate totals
        const totalCost = periodicPayment * totalPayments;
        const totalInterest = totalCost - principal;

        // 6. Generate Schedule
        const schedule = [];
        let balance = principal;
        let runningInterest = 0;

        // Get start date
        let currentDate = new Date();
        if (elements.startDate.value) {
            const [year, month] = elements.startDate.value.split('-');
            currentDate = new Date(year, month - 1, 1);
        }
        currentDate.setHours(12); // Avoid DST issues

        for (let i = 1; i <= totalPayments; i++) {
            const interestPayment = balance * periodicRate;
            let principalPayment = periodicPayment - interestPayment;
            
            // Adjust last payment for float precision
            if (i === totalPayments) {
                principalPayment = balance;
                periodicPayment = balance + interestPayment;
            }
            
            balance -= principalPayment;
            if (balance < 0) balance = 0; // Prevent negative balance
            
            runningInterest += interestPayment;

            schedule.push({
                period: i,
                date: new Date(currentDate.getTime()),
                payment: periodicPayment,
                interest: interestPayment,
                principal: principalPayment,
                balance: balance
            });

            // Increment date
            switch (frequency) {
                case 'weekly': currentDate.setDate(currentDate.getDate() + 7); break;
                case 'biweekly': currentDate.setDate(currentDate.getDate() + 14); break;
                default: currentDate.setMonth(currentDate.getMonth() + 1);
            }
        }

        // 7. Update UI
        updateOutputs(periodicPayment, principal, totalInterest, totalCost);
        renderSchedule(schedule);
        renderChart(principal, totalInterest);
    }

    // --- UI Update Functions ---
    function updateOutputs(payment, principal, interest, cost) {
        elements.paymentPerPeriod.textContent = fmtCurrency(payment);
        elements.totalPrincipal.textContent = fmtCurrency(principal);
        elements.totalInterest.textContent = fmtCurrency(interest);
        elements.totalCost.textContent = fmtCurrency(cost);
    }

    function clearResults() {
        updateOutputs(0, 0, 0, 0);
        elements.scheduleBody.innerHTML = '<tr><td colspan="6" class="text-center p-4 text-gray-500">Enter valid loan details to generate the schedule.</td></tr>';
        renderChart(0, 0);
    }

    function renderSchedule(schedule) {
        const tbody = elements.scheduleBody;
        if (!schedule.length) {
            clearResults();
            return;
        }
        
        tbody.innerHTML = ''; // Clear previous
        schedule.forEach(row => {
            const tr = document.createElement('tr');
            tr.className = 'border-b border-gray-100 hover:bg-gray-50';
            tr.innerHTML = `
                <td class="px-4 py-2 text-left">${row.period}</td>
                <td class="px-4 py-2 text-left">${fmtDate.format(row.date)}</td>
                <td class="px-4 py-2">${fmtCurrency(row.payment)}</td>
                <td class="px-4 py-2">${fmtCurrency(row.interest)}</td>
                <td class="px-4 py-2">${fmtCurrency(row.principal)}</td>
                <td class="px-4 py-2 font-medium">${fmtCurrency(row.balance)}</td>`;
            tbody.appendChild(tr);
        });
    }

    function renderChart(principal, interest) {
        const ctx = document.getElementById('resultsChart');
        if (!ctx) return;

        const data = {
            labels: ['Total Principal', 'Total Interest'],
            datasets: [{
                data: [Math.max(0, principal), Math.max(0, interest)],
                backgroundColor: ['#2563eb', '#f97316'], // Blue, Orange
                borderWidth: 0
            }]
        };

        if (chartInstance) {
            chartInstance.data = data;
            chartInstance.update();
        } else {
            chartInstance = new Chart(ctx, {
                type: 'doughnut',
                data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { 
                            position: 'bottom',
                            labels: { boxWidth: 12, padding: 15 }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${fmtCurrency(context.raw)}`;
                                }
                            }
                        }
                    },
                    cutout: '60%'
                }
            });
        }
    }

    // --- Accessible Tooltip Logic ---
    function toggleTooltip() {
        const isHidden = elements.aprTooltip.style.display === 'none' || !elements.aprTooltip.style.display;
        elements.aprTooltip.style.display = isHidden ? 'block' : 'none';
        elements.aprTooltipBtn.setAttribute('aria-expanded', isHidden.toString());
    }

    elements.aprTooltipBtn.addEventListener('click', toggleTooltip);
    elements.aprTooltipBtn.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            toggleTooltip();
        }
    });

    // Hide tooltip on outside click
    document.addEventListener('click', (e) => {
        if (!elements.aprTooltipBtn.contains(e.target) && !elements.aprTooltip.contains(e.target)) {
            elements.aprTooltip.style.display = 'none';
            elements.aprTooltipBtn.setAttribute('aria-expanded', 'false');
        }
    });
    
    // --- Mobile Menu Toggle ---
    const menuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    menuToggle.addEventListener('click', () => {
        const isHidden = mobileMenu.classList.contains('hidden');
        mobileMenu.classList.toggle('hidden');
        menuToggle.setAttribute('aria-expanded', !isHidden);
    });

    // --- Event Listeners ---
    elements.form.addEventListener('input', calculateAmortization);
    inputs.forEach(input => {
        input.addEventListener('blur', () => validateField(input));
    });

    // --- Initial Calculation ---
    calculateAmortization();
});
</script>
</body>
</html>
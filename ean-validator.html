<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EAN Validator - Check &amp; Calculate EAN-13/EAN-8 Check Digits</title>
<meta name="description" content="Instantly validate any EAN-13 or EAN-8 barcode. Our tool checks the format, length, and check digit based on the official GS1 algorithm.">
<link rel="canonical" href="https://calcdomain.com/ean-validator.html"/>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
/* Custom formula box for LaTeX/Math */
.formula-box {
background: #f3f4f6;
border: 1px solid #d1d5db;
border-radius: 8px;
padding: 1.5rem;
overflow-x: auto;
font-family: 'Inter', sans-serif;
font-size: 1.1rem;
line-height: 1.7;
}
/* Custom focus state for WCAG compliance */
:focus-visible {
outline: 3px solid #2563eb;
outline-offset: 2px;
box-shadow: none;
}
/* Ensure no outline is removed without a replacement */
input:focus, button:focus, select:focus, a:focus {
outline: none; /* Removed only to be replaced by focus-visible */
}
/* Result card styling (from template) */
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
/* Result container */
#results-container {
min-height: 150px; /* Prevents CLS */
transition: all 0.3s ease-in-out;
}
/* Accessibility: Visually hidden but accessible to screen readers */
.sr-only {
position: absolute;
width: 1px;
height: 1px;
padding: 0;
margin: -1px;
overflow: hidden;
clip: rect(0, 0, 0, 0);
white-space: nowrap;
border-width: 0;
}
/* FAQ Details/Summary styling */
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
/* Print styles (from template) */
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
}
</style>

<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "WebPage",
"name": "EAN Validator - Check & Calculate EAN-13/EAN-8 Check Digits",
"description": "Instantly validate any EAN-13 or EAN-8 barcode. Our tool checks the format, length, and check digit based on the official GS1 algorithm.",
"url": "https://calcdomain.com/ean-validator.html",
"inLanguage": "en",
"author": { "@type": "Person", "name": "Ugo Candido" },
"publisher": { "@type": "Organization", "name": "CalcDomain" }
}
</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "BreadcrumbList",
"itemListElement": [
{ "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
{ "@type": "ListItem", "position": 2, "name": "Lifestyle Everyday", "item": "https://calcdomain.com/lifestyle-everyday.html" },
{ "@type": "ListItem", "position": 3, "name": "Miscellaneous", "item": "https://calcdomain.com/subcategories/miscellaneous.html" },
{ "@type": "ListItem", "position": 4, "name": "EAN Validator", "item": "https://calcdomain.com/ean-validator.html" }
]
}
</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "WebApplication",
"name": "EAN Validator Tool",
"description": "A free online tool to validate EAN-13 and EAN-8 barcodes and calculate their check digits based on the official GS1 algorithm.",
"applicationCategory": "Utilities",
"operatingSystem": "Any (Web)",
"browserRequirements": "Requires a modern web browser.",
"url": "https://calcdomain.com/ean-validator.html",
"mainEntity": {
"@type": "HowTo",
"name": "How to Validate an EAN Check Digit",
"description": "A step-by-step guide to calculating the check digit for an EAN-13 barcode.",
"step": [
{"@type": "HowToStep", "name": "Get Payload", "text": "Take the first 12 digits of the EAN-13 code (ignoring the last digit)."},
{"@type": "HowToStep", "name": "Apply Weights", "text": "Starting from the left, multiply the digits by an alternating pattern of 1 and 3."},
{"@type": "HowToStep", "name": "Sum Products", "text": "Add all the resulting products together to get a total sum (S)."},
{"@type": "HowToStep", "name": "Find Remainder", "text": "Find the remainder of the sum when divided by 10 (S mod 10)."},
{"@type": "HowToStep", "name": "Calculate Digit", "text": "If the remainder is 0, the check digit is 0. Otherwise, subtract the remainder from 10. The result is the check digit (C)."},
{"@type": "HowToStep", "name": "Compare", "text": "Compare the calculated check digit (C) to the 13th digit of the original EAN code. If they match, the code is valid."}
]
}
}
</script>
<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..."
class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus-visible:ring-blue-500"
autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
<a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="lifestyle-everyday.html" class="hover:text-blue-600">Lifestyle Everyday</a> &raquo;
<a href="subcategories/miscellaneous.html" class="hover:text-blue-600">Miscellaneous</a> &raquo;
<span class="text-gray-900">EAN Validator</span>
</nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">

<h1 class="text-3xl font-extrabold text-gray-900 mb-2">EAN Validator</h1>

<p class="text-gray-600 mb-6">
Quickly verify if your EAN-13 or EAN-8 barcode is valid. This tool instantly checks the format, length, and check digit based on the official GS1 standard. Ideal for retailers, developers, and supply chain managers who need to ensure data integrity before printing or processing.
</p>

<section id="calculator-ui" aria-labelledby="calculator-heading">
<h2 id="calculator-heading" class="sr-only">EAN Validation Tool</h2>
<form id="eanForm" class="space-y-6">
<div>
<label for="eanInput" class="block text-sm font-medium text-gray-700">
EAN Code <span class="text-red-600">*</span>
</label>
<input type="text" id="eanInput" name="eanInput"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus-visible:ring-blue-500 focus-visible:border-blue-500"
placeholder="Enter 7, 8, 12, or 13 digits"
inputmode="numeric"
pattern="[0-9]*"
maxlength="13"
aria-required="true"
aria-describedby="ean-hint ean-error">
<p id="ean-hint" class="mt-2 text-sm text-gray-500">
Enter the full 8 or 13-digit code to validate, or 7 or 12 digits to calculate the check digit.
</p>
<p id="ean-error" class="mt-2 text-sm text-red-600" role="alert" aria-live="polite" hidden></p>
</div>

<div class="flex gap-4">
<button type="submit" id="validateBtn"
class="inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500">
Validate
</button>
<button type="reset" id="resetBtn"
class="inline-flex justify-center py-2 px-6 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500">
Clear
</button>
</div>
</form>
</section>

<section id="results-container" class="mt-8" aria-live="polite">
</section>

</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">

<section>
<h2>Authoritative Source &amp; Methodology</h2>
<p>
This tool validates European Article Numbers (EAN) based on the global standards defined by <strong>GS1</strong>, the organization responsible for developing and maintaining global standards for business communication, including barcodes.
</p>
<ul class="list-none p-0">
<li><strong>Source:</strong> GS1 General Specifications</li>
<li><strong>Reference:</strong> Check Digit Calculation (Module 7.9)</li>
<li><strong>Official Link:</strong> <a href="https://www.gs1.org/services/check-digit-calculator" target="_blank" rel="nofollow noopener">GS1 Check Digit Calculator</a></li>
</ul>
<p>
All calculations are strictly based on the standard Modulo 10 (MOD10) check digit calculation algorithm published by GS1.
</p>
</section>

<section>
<h2>The EAN Check Digit Formula Explained</h2>
<p>
The final digit of any EAN barcode is a calculated "check digit." This digit ensures the code's integrity by verifying that the other digits were read or entered correctly. The calculation uses a Modulo 10 algorithm with alternating weights.
</p>

<h3>EAN-13 (GTIN-13)</h3>
<p>For an EAN-13 code, the first 12 digits (the payload) are used to calculate the 13th digit (the check digit).</p>
<ol>
<li>Assign alternating weights of <strong>1</strong> and <strong>3</strong> to the 12 payload digits, starting with 1 from the left.</li>
<li>Multiply each digit by its corresponding weight.</li>
<li>Sum all the resulting products to get a total sum, $S$.</li>
<li>Find the remainder when $S$ is divided by 10 (this is $S \pmod{10}$).</li>
<li>If the remainder is 0, the check digit $C$ is 0. Otherwise, subtract the remainder from 10.</li>
</ol>
<div class="formula-box" aria-label="EAN-13 Check Digit Formula">
Let the 12 digits be $d_1, d_2, \dots, d_{12}$.<br>
Weights: $w_1=1, w_2=3, w_3=1, \dots, w_{12}=3$.<br>
Sum $S = \sum_{i=1}^{12} (d_i \times w_i)$<br>
Check Digit $C = (10 - (S \pmod{10})) \pmod{10}$
</div>

<h3>EAN-8 (GTIN-8)</h3>
<p>For an EAN-8 code, the first 7 digits are used to calculate the 8th digit. The weighting pattern is reversed.</p>
<ol>
<li>Assign alternating weights of <strong>3</strong> and <strong>1</strong> to the 7 payload digits, starting with 3 from the left.</li>
<li>Multiply each digit by its weight.</li>
<li>Sum all the products to get a total sum, $S$.</li>
<li>Calculate the check digit $C$ using the same Modulo 10 formula as above.</li>
</ol>
<div class="formula-box" aria-label="EAN-8 Check Digit Formula">
Let the 7 digits be $d_1, d_2, \dots, d_7$.<br>
Weights: $w_1=3, w_2=1, w_3=3, \dots, w_7=3$.<br>
Sum $S = \sum_{i=1}^{7} (d_i \times w_i)$<br>
Check Digit $C = (10 - (S \pmod{10})) \pmod{10}$
</div>
</section>

<section>
<h2>Glossary of Terms</h2>
<dl class="space-y-4">
<div>
<dt class="font-semibold">EAN (European Article Number)</dt>
<dd class="pl-4">A standard barcode, a superset of the North American Universal Product Code (UPC), used in global trade to identify a specific retail product.</dd>
</div>
<div>
<dt class="font-semibold">GTIN (Global Trade Item Number)</dt>
<dd class="pl-4">The official name for the data structures (like EAN-13 or EAN-8) that uniquely identify trade items. EAN-13 is synonymous with GTIN-13.</dd>
</div>
<div>
<dt class="font-semibold">Check Digit</dt>
<dd class="pl-4">The final digit of a barcode, calculated from all the other digits. It acts as a built-in error checker.</dd>
</div>
<div>
<dt class="font-semibold">Payload</dt>
<dd class="pl-4">The sequence of digits in a barcode *excluding* the check digit (e.g., the first 12 digits of an EAN-13).</dd>
</div>
<div>
<dt class="font-semibold">Modulo 10 (MOD10)</dt>
<dd class="pl-4">A mathematical operation that finds the remainder after division by 10. It's the core of the check digit algorithm.</dd>
</div>
</dl>
</section>

<section>
<h2>How It Works: A Step-by-Step Example (EAN-13)</h2>
<p>Let's validate the EAN code: <strong>4006381333931</strong>.</p>
<ol>
<li><strong>Payload:</strong> The first 12 digits are <code>400638133393</code>.</li>
<li><strong>Provided Check Digit:</strong> The 13th digit is <code>1</code>.</li>
<li><strong>Apply Weights (1, 3, 1, 3...):</strong>
<ul class="list-none pl-4">
<li>$4 \times 1 = 4$</li>
<li>$0 \times 3 = 0$</li>
<li>$0 \times 1 = 0$</li>
<li>$6 \times 3 = 18$</li>
<li>$3 \times 1 = 3$</li>
<li>$8 \times 3 = 24$</li>
<li>$1 \times 1 = 1$</li>
<li>$3 \times 3 = 9$</li>
<li>$3 \times 1 = 3$</li>
<li>$3 \times 3 = 9$</li>
<li>$9 \times 1 = 9$</li>
<li>$3 \times 3 = 9$</li>
</ul>
</li>
<li><strong>Sum Products (S):</strong>
$S = 4 + 0 + 0 + 18 + 3 + 24 + 1 + 9 + 3 + 9 + 9 + 9 = 89$</li>
<li><strong>Find Remainder:</strong>
$S \pmod{10} = 89 \pmod{10} = 9$</li>
<li><strong>Calculate Check Digit (C):</strong>
$C = 10 - 9 = 1$</li>
<li><strong>Compare:</strong> The calculated check digit (<code>1</code>) matches the provided check digit (<code>1</code>). Therefore, the EAN code is <strong>valid</strong>.</li>
</ol>
</section>

<section>
<h2>Frequently Asked Questions</h2>
<details>
<summary>What's the difference between EAN, UPC, and GTIN?</summary>
<p><strong>GTIN</strong> (Global Trade Item Number) is the overall term for the data structure. <strong>EAN-13</strong> is a 13-digit GTIN. <strong>UPC-A</strong> (Universal Product Code) is a 12-digit barcode standard, primarily used in North America. A 12-digit UPC-A can be converted to an EAN-13 by adding a leading '0'. This tool will treat a 12-digit number as a payload for an EAN-13, effectively treating it as a UPC-A.</p>
</details>
<details>
<summary>Can I make up my own EAN code?</summary>
<p>No. While you can *calculate* a valid check digit for any string of numbers, a real EAN code must be licensed from your local GS1 organization. The first digits (the GS1 Company Prefix) are assigned to a specific company, allowing their products to be uniquely identified worldwide.</p>
</details>
<details>
<summary>Does a "valid" code mean the product exists?</summary>
<p>No. This tool is a <strong>mathematical validator</strong>. It only confirms that the code's format, length, and check digit are correct according to the GS1 algorithm. It does <em>not</em> check a database to see if this EAN has been assigned to a real product. For that, you would need a service like GS1's "Verified by GS1".</p>
</details>
<details>
<summary>Why did my 12-digit code get a check digit?</summary>
<p>If you enter 12 digits, the tool assumes you have a UPC-A or an EAN-13 payload and calculates the 13th digit (the check digit) for you. The resulting 13-digit number is the complete, valid EAN-13 code.</p>
</details>
<details>
<summary>What if my code is 9, 10, or 14 digits?</summary>
<p>This tool only validates EAN-8 and EAN-13 (and by extension, UPC-A). Other barcode formats like GTIN-14, ISBN-13 (which is a type of EAN-13), or code-128 have different structures or check digit rules. This validator will report any number that isn't 7, 8, 12, or 13 digits as an invalid length.</p>
</details>
</section>

<div class="mt-8 pt-6 border-t border-gray-200 text-sm text-gray-600">
<p>
<strong>Tool developed by Ugo Candido.</strong><br>
Content reviewed by the CalcDomain Editorial Board.
</p>
<p>
Last accuracy review: <time datetime="2025-10-26">October 26, 2025</time>
</p>
</div>
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Validator?</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li><strong>Instant Feedback:</strong> Get immediate validation results.</li>
<li><strong>Error Correction:</strong> Automatically calculates the *correct* check digit for invalid codes.</li>
<li><strong>Developer Friendly:</strong> Perfect for testing data before integrating into a POS or WMS system.</li>
<li><strong>GS1 Compliant:</strong> Uses the official, authoritative algorithm.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="isbn-validator.html" class="text-blue-600 hover:underline">ISBN-13 Validator</a></li>
<li><a href="luhn-algorithm.html" class="text-blue-600 hover:underline">Luhn Algorithm (Credit Card) Validator</a></li>
<li><a href="random-number-generator.html" class="text-blue-600 hover:underline">Random Number Generator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-white border-t mt-12">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="about.html" class="hover:text-blue-600">About</a>
<a href="contact.html" class="hover:text-blue-600">Contact</a>
<a href="privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
const eanForm = document.getElementById('eanForm');
const eanInput = document.getElementById('eanInput');
const errorEl = document.getElementById('ean-error');
const resultsContainer = document.getElementById('results-container');
const resetBtn = document.getElementById('resetBtn');

/**
* Sanitizes input, removing all non-numeric characters.
* @param {string} input - The raw input value.
* @returns {string} - A string containing only digits.
*/
const sanitizeInput = (input) => {
return input.replace(/[^0-9]/g, '');
};

/**
* Calculates the EAN check digit using the GS1 MOD10 algorithm.
* @param {string} payload - The 7 (EAN-8) or 12 (EAN-13) digit payload.
* @returns {string} The calculated check digit as a string.
*/
const calculateCheckDigit = (payload) => {
let weights;
if (payload.length === 12) {
// EAN-13 weights: 1, 3, 1, 3...
weights = [1, 3, 1, 3, 1, 3, 1, 3, 1, 3, 1, 3];
} else if (payload.length === 7) {
// EAN-8 weights: 3, 1, 3, 1...
weights = [3, 1, 3, 1, 3, 1, 3];
} else {
return null; // Invalid payload length
}

const sum = payload.split('')
.map((digit, index) => parseInt(digit, 10) * weights[index])
.reduce((acc, current) => acc + current, 0);

const remainder = sum % 10;
const checkDigit = (remainder === 0) ? 0 : 10 - remainder;

return checkDigit.toString();
};

/**
* Displays an error message for the input field.
* @param {string} message - The error message to display.
*/
const showInputError = (message) => {
errorEl.textContent = message;
errorEl.hidden = false;
eanInput.setAttribute('aria-invalid', 'true');
eanInput.setAttribute('aria-describedby', 'ean-hint ean-error');
};

/**
* Clears the input error message.
*/
const clearInputError = () => {
errorEl.textContent = '';
errorEl.hidden = true;
eanInput.setAttribute('aria-invalid', 'false');
eanInput.setAttribute('aria-describedby', 'ean-hint');
};

/**
* Renders the validation result in the results container.
* @param {object} result - The result object.
* @param {string} result.status - 'success', 'error', or 'info'.
* @param {string} result.title - The main result message (e.g., "Valid EAN-13").
* @param {string} result.eanType - "EAN-13" or "EAN-8".
* @param {string} result.message - A descriptive message.
* @param {string} [result.fullEan] - The complete EAN (for calculation results).
*/
const renderResult = (result) => {
let bgColor, borderColor, titleColor, iconSvg;

switch (result.status) {
case 'success':
bgColor = 'bg-green-50';
borderColor = 'border-green-200';
titleColor = 'text-green-800';
iconSvg = `<svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
break;
case 'error':
bgColor = 'bg-red-50';
borderColor = 'border-red-200';
titleColor = 'text-red-800';
iconSvg = `<svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
break;
default: // 'info' for calculations
bgColor = 'bg-blue-50';
borderColor = 'border-blue-200';
titleColor = 'text-blue-800';
iconSvg = `<svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
}

let fullEanHtml = '';
if (result.fullEan) {
fullEanHtml = `
<div class="mt-4">
<p class="text-sm font-medium text-gray-700">Full Valid Code:</p>
<p class="text-2xl font-bold text-gray-900 break-words">${result.fullEan}</p>
</div>
`;
}

resultsContainer.innerHTML = `
<div class="${bgColor} border ${borderColor} rounded-lg p-6 shadow-sm" role="alert">
<div class="flex items-start gap-4">
<div class="flex-shrink-0">${iconSvg}</div>
<div class="flex-grow">
<h3 class="text-lg font-semibold ${titleColor}">${result.title}</h3>
<p class="mt-1 text-sm text-gray-700">${result.message}</p>
${fullEanHtml}
</div>
</div>
</div>
`;
};

/**
* Clears the results container and the form.
*/
const clearAll = () => {
clearInputError();
resultsContainer.innerHTML = '';
// eanInput.value = ''; // Do not clear input on reset, just errors/results
};

// Main form submission handler
eanForm.addEventListener('submit', (e) => {
e.preventDefault();
clearInputError();
resultsContainer.innerHTML = '';

const rawValue = eanInput.value;
const cleanValue = sanitizeInput(rawValue);
const len = cleanValue.length;

if (rawValue !== cleanValue) {
showInputError('Input was sanitized. Please review and resubmit if needed.');
eanInput.value = cleanValue;
return;
}

let payload, providedCheckDigit, calculatedCheckDigit, eanType, result;

switch (len) {
case 8: // Validate EAN-8
eanType = 'EAN-8';
payload = cleanValue.substring(0, 7);
providedCheckDigit = cleanValue.substring(7, 8);
calculatedCheckDigit = calculateCheckDigit(payload);

if (providedCheckDigit === calculatedCheckDigit) {
result = {
status: 'success',
title: 'Valid EAN-8',
eanType: eanType,
message: `The code is a mathematically valid ${eanType}. The check digit '${providedCheckDigit}' is correct.`
};
} else {
result = {
status: 'error',
title: 'Invalid EAN-8',
eanType: eanType,
message: `The provided check digit '${providedCheckDigit}' is incorrect. The correct check digit for this payload is '${calculatedCheckDigit}'.`,
fullEan: payload + calculatedCheckDigit
};
}
renderResult(result);
break;

case 13: // Validate EAN-13
eanType = 'EAN-13';
payload = cleanValue.substring(0, 12);
providedCheckDigit = cleanValue.substring(12, 13);
calculatedCheckDigit = calculateCheckDigit(payload);

if (providedCheckDigit === calculatedCheckDigit) {
result = {
status: 'success',
title: 'Valid EAN-13',
eanType: eanType,
message: `The code is a mathematically valid ${eanType}. The check digit '${providedCheckDigit}' is correct.`
};
} else {
result = {
status: 'error',
title: 'Invalid EAN-13',
eanType: eanType,
message: `The provided check digit '${providedCheckDigit}' is incorrect. The correct check digit for this payload is '${calculatedCheckDigit}'.`,
fullEan: payload + calculatedCheckDigit
};
}
renderResult(result);
break;

case 7: // Calculate EAN-8
eanType = 'EAN-8';
payload = cleanValue;
calculatedCheckDigit = calculateCheckDigit(payload);
result = {
status: 'info',
title: 'EAN-8 Check Digit Calculated',
eanType: eanType,
message: `A 7-digit payload was entered. The calculated check digit is '${calculatedCheckDigit}'.`,
fullEan: payload + calculatedCheckDigit
};
renderResult(result);
break;

case 12: // Calculate EAN-13 (or UPC-A)
eanType = 'EAN-13 / UPC-A';
payload = cleanValue;
calculatedCheckDigit = calculateCheckDigit(payload);
result = {
status: 'info',
title: 'EAN-13 Check Digit Calculated',
eanType: eanType,
message: `A 12-digit payload was entered. The calculated check digit is '${calculatedCheckDigit}'. This is also a valid UPC-A code.`,
fullEan: payload + calculatedCheckDigit
};
renderResult(result);
break;

default: // Invalid length
showInputError('Invalid length. Please enter 7, 8, 12, or 13 digits.');
}
});

// Real-time input sanitization
eanInput.addEventListener('input', () => {
const sanitized = sanitizeInput(eanInput.value);
if (eanInput.value !== sanitized) {
// This is subtle. Updating the value during 'input' can reset the cursor.
// A simpler approach is to validate on blur or just let the submit handle it.
// For this spec, we'll just clear errors and wait for submit.
clearInputError();
}
// If the input is empty, clear results
if (eanInput.value.length === 0) {
resultsContainer.innerHTML = '';
}
});

// Clear button logic
resetBtn.addEventListener('click', () => {
clearAll();
eanForm.reset(); // This clears the input field
resultsContainer.innerHTML = '';
eanInput.focus();
});

// Mobile menu toggle (from template)
const menuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
if (menuToggle && mobileMenu) {
menuToggle.addEventListener('click', () => {
mobileMenu.classList.toggle('hidden');
const isExpanded = !mobileMenu.classList.contains('hidden');
menuToggle.setAttribute('aria-expanded', isExpanded.toString());
});
}
});
</script>
</body>
</html>
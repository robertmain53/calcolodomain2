<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exponent Calculator — Compute a^b, Fractional & Negative Powers</title>
  <meta name="description" content="Professional exponent calculator for a^b with fractional (p/q) and negative exponents. Shows exact form (roots/fractions), scientific notation, and step-by-step method.">
  <link rel="canonical" href="https://calcdomain.com/exponent-calculator.html">

  <!-- Icons (optional placeholders to match your template) -->
  <link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg" />
  <link rel="shortcut icon" href="https://calcdomain.com/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png" />
  <link rel="manifest" href="https://calcdomain.com/site.webmanifest" />

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- MathJax for LaTeX (deferred) -->
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    :root {
      --focus: #2563eb;
      --muted: #6b7280;
      --surface: #ffffff;
      --surface-2: #f8fafc;
      --border: #e5e7eb;
      --accent: #1d4ed8;
      --danger: #b91c1c;
    }
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji"; }
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin: 1.75rem 0 0.75rem }
    .prose h3 { font-size: 1.125rem; font-weight: 700; margin: 1.25rem 0 0.5rem }
    .prose p { margin-bottom: 0.9rem; line-height: 1.65; }
    .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 0.75rem; }
    .formula-box{background:#f3f4f6;border:1px solid #d1d5db;border-radius:10px;padding:1rem;overflow-x:auto;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace}
    details>summary{cursor:pointer;font-weight:600;padding:.5rem 0}
    details[open]>summary{margin-bottom:.5rem}
    .result-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:1rem;text-align:center}
    .result-card h4{font-size:.9rem;color:var(--muted);margin-bottom:.25rem}
    .result-card p{font-size:1.4rem;font-weight:800;color:var(--accent);word-break:break-word}
    /* Focus styles and touch targets */
    a, button, input, select, summary, details { outline-offset: 2px; }
    :focus-visible{ outline: 3px solid var(--focus); border-radius: 6px; }
    button, .btn { min-height: 48px; min-width: 48px; }
    label{display:block;font-weight:600}
    .helper{font-size:.85rem;color:#4b5563}
    .err{color:var(--danger);font-size:.85rem;margin-top:.25rem}
    .tooltip{display:none;margin-top:.25rem;background:#eef2ff;border:1px solid #c7d2fe;border-radius:.5rem;padding:.5rem;font-size:.85rem}
    .tooltip[aria-hidden="false"]{display:block}
    /* Prevent CLS in results area */
    #results { min-height: 260px; }
    @media (prefers-reduced-motion:no-preference){
      .fade-in { animation: fade .25s ease }
      @keyframes fade { from{opacity:0} to{opacity:1} }
    }
    @media print {
      header, nav, aside, .no-print { display:none !important; }
      main { padding:0 }
      #print-section { position: static; }
    }
  </style>

  <!-- JSON-LD: WebPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Exponent Calculator",
    "description":"Compute a^b with fractional and negative exponents. Exact radical/fraction form, scientific notation, and step-by-step method.",
    "url":"https://calcdomain.com/exponent-calculator.html",
    "inLanguage":"en",
    "author":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"},
    "about":[{"@type":"Thing","name":"Exponents"},{"@type":"Thing","name":"Algebra"}],
    "isPartOf":{"@type":"CollectionPage","name":"Math > Algebra"}
  }
  </script>
  <!-- JSON-LD: Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
      {"@type":"ListItem","position":2,"name":"Math","item":"https://calcdomain.com/math.html"},
      {"@type":"ListItem","position":3,"name":"Algebra","item":"https://calcdomain.com/subcategories/core-math-algebra.html"},
      {"@type":"ListItem","position":4,"name":"Exponent Calculator","item":"https://calcdomain.com/exponent-calculator.html"}
    ]
  }
  </script>
  <!-- JSON-LD: HowTo -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to compute exponents",
    "description":"Steps to compute a^b with fractional and negative exponents.",
    "step":[
      {"@type":"HowToStep","name":"Enter base","text":"Type the base a (real number)."},
      {"@type":"HowToStep","name":"Enter exponent","text":"Type b (real), or switch to rational exponent and enter p and q."},
      {"@type":"HowToStep","name":"Choose format","text":"See decimal, scientific notation, and exact radical/fraction form when applicable."},
      {"@type":"HowToStep","name":"Review constraints","text":"For even q in a^(p/q), base must be ≥ 0 to keep results real."}
    ]
  }
  </script>
  <!-- JSON-LD: FAQPage -->
  <script type="application/ld+json" id="faq-jsonld">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"What is an exponent?","acceptedAnswer":{"@type":"Answer","text":"An exponent b tells how many times to multiply the base a by itself. Fractional and negative exponents extend this to roots and reciprocals."}},
      {"@type":"Question","name":"How do I handle negative exponents?","acceptedAnswer":{"@type":"Answer","text":"Use a^{-n}=1/a^n for a ≠ 0. The calculator applies this rule automatically."}},
      {"@type":"Question","name":"What about fractional exponents?","acceptedAnswer":{"@type":"Answer","text":"a^{p/q} = \\sqrt[q]{a^p}. If q is even, a must be ≥ 0 for real results."}},
      {"@type":"Question","name":"Why does the exact form sometimes show a root?","acceptedAnswer":{"@type":"Answer","text":"When the exponent is rational p/q, the exact form is written as the q-th root of a^p, reduced to simplest radical/fraction."}},
      {"@type":"Question","name":"What if the result is extremely large or small?","acceptedAnswer":{"@type":"Answer","text":"The tool will present scientific notation and, when integers are huge, a digits count using logarithms."}},
      {"@type":"Question","name":"Does it support complex numbers?","acceptedAnswer":{"@type":"Answer","text":"This version restricts outputs to real numbers. Complex support can be added in a future release."}},
      {"@type":"Question","name":"Is the method based on an authoritative source?","acceptedAnswer":{"@type":"Answer","text":"Yes. Definitions and identities follow the NIST Digital Library of Mathematical Functions (Powers and Logarithms)."}}
    ]
  }
  </script>
</head>
<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky as required) -->
  <header class="bg-white border-b">
    <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
      <div class="flex justify-between items-center">
        <a href="index.html" class="text-2xl font-extrabold text-blue-600">CalcDomain</a>
        <div class="hidden md:flex items-center gap-6 text-sm">
          <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
          <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
        </div>
        <button id="mobile-menu-toggle" class="md:hidden p-2 rounded hover:bg-gray-100" aria-expanded="false" aria-controls="mobile-menu" aria-label="Open menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></svg>
        </button>
      </div>
      <div id="mobile-menu" class="md:hidden mt-4 hidden">
        <div class="space-y-2">
          <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
          <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
        </div>
      </div>
    </nav>
  </header>

  <main class="container mx-auto px-4 lg:px-6 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
      <section class="w-full lg:w-2/3">
        <!-- Breadcrumb -->
        <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
          <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
          <a href="math.html" class="hover:text-blue-600">Math</a> &raquo;
          <a href="subcategories/core-math-algebra.html" class="hover:text-blue-600">Algebra</a> &raquo;
          <span class="text-gray-900">Exponent Calculator</span>
        </nav>

        <div id="print-section" class="bg-white p-6 rounded-lg shadow-sm">
          <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Exponent calculator</h1>
          <p class="text-gray-700 mb-6">Compute <strong>a<sup>b</sup></strong> with support for fractional (p/q) and negative exponents. Get decimal, scientific notation, and an exact radical/fraction form when applicable. Designed for students, engineers, and finance pros who need reliable, readable results.</p>

          <!-- Calculator UI -->
          <section id="calculator" aria-labelledby="calc-title">
            <h2 id="calc-title" class="sr-only">Exponent calculator inputs</h2>

            <div class="space-y-6">
              <!-- Mode toggle -->
              <fieldset class="border border-gray-200 rounded-lg p-4">
                <legend class="px-2 text-sm font-semibold text-gray-700">Exponent Type</legend>
                <div class="flex flex-col sm:flex-row gap-3" role="radiogroup" aria-label="Exponent type">
                  <label class="inline-flex items-center gap-2">
                    <input type="radio" name="expMode" id="modeReal" value="real" class="w-5 h-5" checked />
                    <span>Real exponent <span class="text-gray-500">(b)</span></span>
                  </label>
                  <label class="inline-flex items-center gap-2">
                    <input type="radio" name="expMode" id="modeRational" value="rational" class="w-5 h-5" />
                    <span>Rational exponent <span class="text-gray-500">(p/q)</span></span>
                  </label>
                </div>
              </fieldset>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Base a -->
                <div>
                  <label for="base" class="text-gray-800">Base a <span aria-hidden="true" class="text-red-600">*</span></label>
                  <div class="flex items-start gap-2">
                    <input type="text" inputmode="decimal" id="base" aria-required="true" aria-describedby="baseHelp baseErr" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none" placeholder="e.g., 2.5 or -8" />
                    <button type="button" class="ml-1 px-2 py-1 rounded border text-sm no-print" aria-expanded="false" aria-controls="baseTip" data-tooltip>
                      ?
                    </button>
                  </div>
                  <p id="baseHelp" class="helper">Enter a real number. For scientific notation use <code>1.2e3</code>.</p>
                  <p id="baseTip" class="tooltip" aria-hidden="true">For even roots (e.g., exponent denominator 2, 4, …), the base must be ≥ 0 to keep results real.</p>
                  <p id="baseErr" class="err" role="alert" aria-live="polite"></p>
                </div>

                <!-- Real exponent b -->
                <div id="real-b-wrap">
                  <label for="expReal" class="text-gray-800">Exponent b <span aria-hidden="true" class="text-red-600">*</span></label>
                  <div class="flex items-start gap-2">
                    <input type="text" inputmode="decimal" id="expReal" aria-required="true" aria-describedby="expRealHelp expRealErr" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none" placeholder="e.g., -3 or 0.25" />
                    <button type="button" class="ml-1 px-2 py-1 rounded border text-sm no-print" aria-expanded="false" aria-controls="expRealTip" data-tooltip>?</button>
                  </div>
                  <p id="expRealHelp" class="helper">Any real number. Negative exponents compute reciprocals automatically.</p>
                  <p id="expRealTip" class="tooltip" aria-hidden="true">Examples: <code>5</code>, <code>-2</code>, <code>0.5</code> (= √a), <code>1/3</code> (use the Rational mode for exact roots).</p>
                  <p id="expRealErr" class="err" role="alert" aria-live="polite"></p>
                </div>

                <!-- Rational exponent p/q -->
                <div id="rat-wrap" class="md:col-span-2 hidden">
                  <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                    <div>
                      <label for="p" class="text-gray-800">Numerator p <span aria-hidden="true" class="text-red-600">*</span></label>
                      <input type="number" id="p" step="1" aria-required="true" aria-describedby="pErr" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none" placeholder="e.g., 3">
                      <p id="pErr" class="err" role="alert" aria-live="polite"></p>
                    </div>
                    <div>
                      <label for="q" class="text-gray-800">Denominator q <span aria-hidden="true" class="text-red-600">*</span></label>
                      <input type="number" id="q" step="1" min="1" aria-required="true" aria-describedby="qHelp qErr" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none" placeholder="e.g., 4">
                      <p id="qHelp" class="helper">q must be a positive integer. If q is even, base must be ≥ 0 (real result).</p>
                      <p id="qErr" class="err" role="alert" aria-live="polite"></p>
                    </div>
                    <div class="flex items-end">
                      <button id="reduceBtn" type="button" class="btn w-full border rounded-md px-3 py-2 hover:bg-gray-100 no-print" title="Reduce p/q to lowest terms">Reduce p/q</button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="flex flex-wrap gap-3">
                <button id="computeBtn" type="button" class="btn border rounded-md px-4 py-2 bg-blue-600 text-white hover:bg-blue-700">Compute</button>
                <button id="clearBtn" type="button" class="btn border rounded-md px-4 py-2 hover:bg-gray-100">Clear</button>
                <label class="inline-flex items-center gap-2 ml-2">
                  <input type="checkbox" id="useBigInt" class="w-5 h-5">
                  <span class="text-sm">Use big-integer for large integer powers (exact digits)</span>
                </label>
              </div>
            </div>
          </section>

          <!-- Results -->
          <section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6 fade-in" aria-live="polite">
            <h2 class="text-xl font-bold mb-4">Results</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
              <div class="result-card">
                <h4>Decimal value</h4>
                <p id="resDecimal">—</p>
              </div>
              <div class="result-card">
                <h4>Scientific notation</h4>
                <p id="resSci">—</p>
              </div>
              <div class="result-card">
                <h4>Exact form</h4>
                <p id="resExact">—</p>
              </div>
              <div class="result-card">
                <h4>Digits / magnitude</h4>
                <p id="resDigits">—</p>
              </div>
              <div class="result-card">
                <h4>Interpretation</h4>
                <p id="resInterpret">—</p>
              </div>
            </div>

            <details class="mt-6 bg-white rounded-lg">
              <summary class="font-semibold text-gray-800">Show step-by-step</summary>
              <div class="mt-4 prose" id="steps"></div>
            </details>
          </section>
        </div>

        <!-- Authoritative content ecosystem -->
        <article class="bg-white p-6 rounded-lg shadow-sm mt-8 prose">
          <h2>Data source & methodology</h2>
          <p><strong>Authoritative source:</strong> <a class="text-blue-600 hover:underline" href="https://dlmf.nist.gov/1.3" rel="nofollow noopener">NIST Digital Library of Mathematical Functions, Chapter 1: Powers and Logarithms</a> (most recently updated 2023). <em>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</em></p>

          <h2>The formula explained</h2>
          <div class="formula-box">
            \\[
              y = a^{b},\\quad
              a \\in \\mathbb{R},\\; b \\in \\mathbb{R} \\\\
              a^{0}=1\\,(a\\neq 0),\\quad
              a^{-n} = \\frac{1}{a^{n}}\\,(n\\in\\mathbb{N}),\\\\
              a^{\\frac{p}{q}} = \\sqrt[q]{a^{p}}\\;(p\\in\\mathbb{Z},\\; q\\in\\mathbb{N}^+),\\;\\text{with } a\\ge 0 \\text{ if } q \\text{ is even.}
            \\]
          </div>

          <h2>Glossary of variables</h2>
          <ul>
            <li><strong>a</strong> — base (real number). If an even root is implied (q even), require a ≥ 0 for real results.</li>
            <li><strong>b</strong> — real exponent.</li>
            <li><strong>p, q</strong> — integers that define a rational exponent b = p/q (q &gt; 0).</li>
            <li><strong>Decimal value</strong> — numeric evaluation using IEEE-754 double precision.</li>
            <li><strong>Scientific notation</strong> — value shown as m × 10^k with 3–6 significant figures depending on magnitude.</li>
            <li><strong>Exact form</strong> — simplified radical/fraction when b is rational (e.g., \\( \\sqrt[4]{81} = 3 \\)).</li>
          </ul>

          <h2>How it works: a step-by-step example</h2>
          <h3>Example — \( a = 16,\\; b = \\frac{3}{4} \)</h3>
          <ol>
            <li>Reduce \( \\frac{p}{q} = \\frac{3}{4} \) (already in lowest terms; q is even, and a = 16 ≥ 0).</li>
            <li>Compute \( a^{p/q} = \\sqrt[4]{a^{3}} = \\sqrt[4]{4096} = 8 \\).</li>
            <li>Decimal = 8, Scientific notation = \( 8 \\times 10^{0} \), Exact form = 8.</li>
          </ol>

          <h2>Frequently asked questions</h2>
          <details>
            <summary>Why does the calculator sometimes refuse a negative base with even q?</summary>
            <p>Because \\( a^{p/q} \\) with even q implies an even root. Real even roots of negative numbers are undefined; you would need complex numbers.</p>
          </details>
          <details>
            <summary>Can it show exact integers for big powers?</summary>
            <p>If you enable <em>Use big-integer</em> and both a and b are integers with b ≥ 0, the tool uses BigInt to get an exact digit count and (if feasible) the full integer.</p>
          </details>
          <details>
            <summary>How accurate is the decimal display?</summary>
            <p>Decimals use double precision. For extreme magnitudes, scientific notation and digit counts are provided to maintain readability.</p>
          </details>
          <details>
            <summary>Does it simplify radicals?</summary>
            <p>Yes, for rational exponents it attempts to factor perfect q-th powers out of the radicand to show a simplified exact form.</p>
          </details>
          <details>
            <summary>What are typical pitfalls?</summary>
            <p>Using a negative base with an even denominator q; entering q ≤ 0; or expecting complex results (not supported in this version).</p>
          </details>

          <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700">
            <p><strong>Tool developed by Ugo Candido.</strong> Content verified by the CalcDomain Editorial Board.<br>
            Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
          </div>
        </article>
      </section>

      <aside class="w-full lg:w-1/3">
        <div class="sticky top-24 space-y-6 no-print">
          <div class="bg-white p-6 rounded-lg shadow-sm">
            <h3 class="font-bold text-lg mb-3">Why use this exponent tool</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
              <li>Handles real and rational exponents with inline validation.</li>
              <li>Shows decimal, scientific notation, and exact simplified form.</li>
              <li>Optional BigInt mode for huge integer powers (exact digits).</li>
            </ul>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-sm">
            <h3 class="font-bold text-lg mb-4">Related math tools</h3>
            <ul class="space-y-3 text-sm">
              <li><a class="text-blue-600 hover:underline" href="logarithm-calculator.html">Logarithm Calculator</a></li>
              <li><a class="text-blue-600 hover:underline" href="root-calculator.html">Nth Root Calculator</a></li>
              <li><a class="text-blue-600 hover:underline" href="power-sum-calculator.html">Power Sum Calculator</a></li>
              <li><a class="text-blue-600 hover:underline" href="scientific-notation.html">Scientific Notation Converter</a></li>
            </ul>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-4 space-x-4">
        <a href="about.html" class="hover:text-blue-600">About</a>
        <a href="contact.html" class="hover:text-blue-600">Contact</a>
        <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
        <a href="terms.html" class="hover:text-blue-600">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator logic (deferred best-practice: placed before </body> and lightweight) -->
  <script defer>
  (function(){
    const $ = (id) => document.getElementById(id);
    const els = {
      base: $("base"),
      expReal: $("expReal"),
      modeReal: $("modeReal"),
      modeRational: $("modeRational"),
      ratWrap: $("rat-wrap"),
      realWrap: $("real-b-wrap"),
      p: $("p"),
      q: $("q"),
      reduceBtn: $("reduceBtn"),
      compute: $("computeBtn"),
      clear: $("clearBtn"),
      useBigInt: $("useBigInt"),
      // results
      resDecimal: $("resDecimal"),
      resSci: $("resSci"),
      resExact: $("resExact"),
      resDigits: $("resDigits"),
      resInterpret: $("resInterpret"),
      steps: $("steps"),
      // errors
      baseErr: $("baseErr"),
      expRealErr: $("expRealErr"),
      pErr: $("pErr"),
      qErr: $("qErr")
    };

    // Mobile menu
    (function(){
      const btn = document.getElementById('mobile-menu-toggle');
      const menu = document.getElementById('mobile-menu');
      if(!btn || !menu) return;
      btn.addEventListener('click', ()=>{
        const open = menu.classList.toggle('hidden') ? false : true;
        btn.setAttribute('aria-expanded', String(open));
      });
    })();

    // Accessible tooltips
    document.querySelectorAll('[data-tooltip]').forEach(btn=>{
      const controls = btn.getAttribute('aria-controls');
      const tip = controls ? document.getElementById(controls) : null;
      btn.addEventListener('click', ()=>{
        if(!tip) return;
        const hidden = tip.getAttribute('aria-hidden') !== 'false';
        tip.setAttribute('aria-hidden', hidden ? 'false' : 'true');
        btn.setAttribute('aria-expanded', hidden ? 'true' : 'false');
      });
      btn.addEventListener('keydown', (e)=>{
        if((e.key === 'Enter' || e.key === ' ') && tip){
          e.preventDefault(); btn.click();
        }
      });
    });

    // Mode toggle
    function updateMode(){
      const rational = els.modeRational.checked;
      els.ratWrap.classList.toggle('hidden', !rational);
      els.realWrap.classList.toggle('hidden', rational);
    }
    els.modeReal.addEventListener('change', updateMode);
    els.modeRational.addEventListener('change', updateMode);
    updateMode();

    // Helpers
    const isFiniteNumber = (x)=> typeof x === 'number' && Number.isFinite(x);
    const parseMaybe = (s)=>{
      if(typeof s !== 'string') return NaN;
      // allow "1/3" style for convenience -> decimal parse
      if (s.trim().includes('/') && !s.trim().match(/[^0-9\/\s\-\+]/)) {
        const [n,d] = s.split('/').map(t=>parseFloat(t));
        if(Number.isFinite(n) && Number.isFinite(d) && d !== 0) return n/d;
      }
      const v = Number(s);
      return v;
    };
    const gcd = (a,b)=>{ a=Math.abs(a); b=Math.abs(b); while(b){[a,b]=[b,a%b]} return a||1; };
    const formatSci = (x)=>{
      if(!Number.isFinite(x)) return "—";
      if(x===0) return "0 × 10^0";
      const k = Math.floor(Math.log10(Math.abs(x)));
      const m = x / Math.pow(10,k);
      // show 6 significant digits
      return `${m.toPrecision(6)} × 10^${k}`;
    };
    const fmtDecimal = (x)=>{
      if(!Number.isFinite(x)) return "—";
      // adaptive precision for readability
      const abs = Math.abs(x);
      if (abs !== 0 && (abs >= 1e10 || abs < 1e-6)) return x.toExponential(6);
      return x.toLocaleString(undefined,{maximumFractionDigits: 12});
    };

    // Validation (on blur)
    function clearErrors(){
      ['baseErr','expRealErr','pErr','qErr'].forEach(id => { const el = $(id); if(el) el.textContent=''; });
    }
    function validate(){
      clearErrors();
      const mode = els.modeRational.checked ? 'rational':'real';
      let ok = true;

      // base
      const a = parseMaybe(els.base.value);
      if(!isFiniteNumber(a)){
        els.baseErr.textContent = "Please enter a valid real number for the base a (you can use scientific notation like 1.2e3).";
        ok = false;
      }

      if(mode==='real'){
        const b = parseMaybe(els.expReal.value);
        if(!isFiniteNumber(b)){
          els.expRealErr.textContent = "Enter a valid real exponent b (example: -3, 0.5, or 1/3).";
          ok = false;
        }
        if (a === 0 && b <= 0) {
          els.expRealErr.textContent = "0^b is undefined for b ≤ 0. Please use b > 0.";
          ok = false;
        }
      } else {
        const p = Number(els.p.value);
        const q = Number(els.q.value);
        if(!Number.isInteger(p)){
          els.pErr.textContent = "p must be an integer.";
          ok = false;
        }
        if(!Number.isInteger(q) || q <= 0){
          els.qErr.textContent = "q must be a positive integer.";
          ok = false;
        }
        if (ok && q % 2 === 0 && parseMaybe(els.base.value) < 0){
          els.baseErr.textContent = "For even q, the base must be ≥ 0 to keep the result real.";
          ok = false;
        }
        if (ok && a === 0 && p <= 0){
          els.pErr.textContent = "0^(p/q) with p ≤ 0 is undefined. Use p > 0.";
          ok = false;
        }
      }
      return ok;
    }

    [els.base, els.expReal, els.p, els.q].forEach(input=>{
      if(!input) return;
      input.addEventListener('blur', validate);
    });

    // Reduce p/q
    if(els.reduceBtn){
      els.reduceBtn.addEventListener('click', ()=>{
        const p = Number(els.p.value), q=Number(els.q.value);
        if(Number.isInteger(p) && Number.isInteger(q) && q>0){
          const g = gcd(p,q);
          els.p.value = String(p/g);
          els.q.value = String(q/g);
        }
      });
    }

    function simplifyRadical(a, p, q){
      // Return a string exact form for a^(p/q). We attempt to extract perfect q-th powers.
      // Handle sign:
      const sign = (a < 0 && q % 2 !== 0) ? -1 : 1;
      const A = Math.abs(a);

      // Factor out perfect q-th power from A^p
      // For integers only; otherwise fall back
      if (!Number.isInteger(A) || !Number.isInteger(p) || !Number.isInteger(q)) return null;

      const ap = Math.pow(A, Math.abs(p));
      if (!Number.isFinite(ap) || ap > 1e12){ // avoid heavy factoring
        return null;
      }

      // Extract k^q from ap
      let k = 1, rest = ap;
      // Quick trial division for small primes
      const primes = [2,3,5,7,11,13,17,19,23,29,31,37];
      for(const prime of primes){
        let count = 0;
        while(rest % prime === 0){ rest/=prime; count++; }
        const take = Math.floor(count / q);
        if(take>0){
          k *= Math.pow(prime, take);
          const removed = take * q;
          const leftover = count - removed;
          if(leftover>0){
            rest *= Math.pow(prime, leftover);
          }
        }
      }
      // If rest is still large and not 1, keep it inside the radical
      const outside = (p<0) ? `1/${sign<0?'-':''}${k}` : `${sign<0?'-':''}${k}`;
      const inside = rest === 1 ? "" : `\\sqrt[${q}]{${rest}}`;
      if (inside === ""){
        return outside;
      }
      if (k === 1){
        return (p<0) ? `\\dfrac{1}{${sign<0?'-':''}${inside}}` : `${sign<0?'-':''}${inside}`;
      }
      return (p<0) ? `\\dfrac{1}{${sign<0?'-':''}${k}\\,${inside}}` : `${sign<0?'-':''}${k}\\,${inside}`;
    }

    function compute(){
      if(!validate()) return;

      const a = parseMaybe(els.base.value);
      let b, exactForm = "—", interpretation = "—";
      let decimal = NaN, sci = "—", digitsInfo = "—";
      let steps = [];

      if(els.modeRational.checked){
        // rational exponent b = p/q (reduced)
        let p = Number(els.p.value), q = Number(els.q.value);
        const g = gcd(p,q); p/=g; q/=g;
        b = p/q;

        steps.push(`<p>Using rational exponent: <strong>b = ${p}/${q}</strong> (reduced).</p>`);
        if (q % 2 === 0 && a < 0){
          updateUI("—","—","—","—","Base must be ≥ 0 for even q.", steps);
          return;
        }
        // Exact form attempt
        const exact = simplifyRadical(a, p, q);
        if (exact){ exactForm = `\\( ${exact} \\)`; }

        // Decimal
        decimal = Math.pow(a, b);
        sci = formatSci(decimal);
        interpretation = (b<0) ? "Reciprocal of a positive root" : (b===0 ? "By definition, a^0 = 1 (a≠0)" : (q===1 ? "Integer/real power" : "q-th root of a^p"));

        steps.push(`<p>Compute \\( a^{p/q} = \\sqrt[${q}]{a^{${p}}} \\).</p>`);
        steps.push(`<p>Decimal evaluation: <code>${a}</code> ^ <code>${p}/${q}</code> = <strong>${fmtDecimal(decimal)}</strong>.</p>`);
      } else {
        // real exponent
        b = parseMaybe(els.expReal.value);
        steps.push(`<p>Using real exponent: <strong>b = ${b}</strong>.</p>`);

        if (a === 0 && b <= 0){
          updateUI("—","—","—","—","0^b is undefined for b ≤ 0.", steps);
          return;
        }

        // BigInt path only for integer a and integer b >= 0
        const useBI = els.useBigInt.checked && Number.isInteger(a) && Number.isInteger(b) && b >= 0 && Math.abs(a) >= 2;
        if(useBI){
          try{
            const A = BigInt(a);
            const B = BigInt(b);
            const powBI = (base, exp)=>{
              let res = 1n, cur = base, e = exp;
              while(e>0n){
                if(e & 1n) res *= cur;
                cur *= cur; e >>= 1n;
              }
              return res;
            };
            // digits via logs for huge numbers:
            const mag = Number(b) * Math.log10(Math.abs(a));
            const digits = Math.floor(mag)+1;
            digitsInfo = `${digits} digits (estimated)`;
            interpretation = "Exact integer power (BigInt mode)";
            // Don't print full integer if extremely large; threshold ~ 400 digits
            if(digits <= 400){
              const val = powBI(A, B).toString();
              decimal = Number.isSafeInteger(Number(val)) ? Number(val) : NaN;
              exactForm = val.length <= 400 ? val : `(${digits} digits)`;
              sci = Number.isFinite(decimal) ? formatSci(decimal) : `≈ 10^${Math.floor(mag)}`;
              steps.push(`<p>Computed exact integer power with exponentiation by squaring (BigInt). Digit count: <strong>${digits}</strong>.</p>`);
            } else {
              decimal = Math.pow(a, b);
              exactForm = `a^b as integer with ~${digits} digits`;
              sci = `≈ 10^${Math.floor(mag)}`;
              steps.push(`<p>Value too large to render fully. Showing scientific magnitude only.</p>`);
            }
          }catch(e){
            // Fallback to Number math
            decimal = Math.pow(a, b);
            sci = formatSci(decimal);
            interpretation = "Integer power (fallback to double precision)";
          }
        } else {
          decimal = Math.pow(a, b);
          sci = formatSci(decimal);
          interpretation = (b<0) ? "Reciprocal of a positive power" : (b===0 ? "By definition, a^0 = 1 (a≠0)" : "Real power");
        }

        // Exact form for some notable fractions typed in real field like "1/3"
        if (String(els.expReal.value).includes('/')){
          const parts = String(els.expReal.value).split('/');
          const n = Number(parts[0]), d = Number(parts[1]);
          if(Number.isInteger(n) && Number.isInteger(d) && d>0){
            const g2 = gcd(n,d); const p=n/g2, q=d/g2;
            if (!(q % 2 === 0 && a < 0)) {
              const ex2 = simplifyRadical(a, p, q);
              if (ex2) exactForm = `\\( ${ex2} \\)`;
            }
          }
        }
      }

      // Digits magnitude for Number results
      if (digitsInfo === "—" && Number.isFinite(decimal) && decimal !== 0){
        const k = Math.floor(Math.log10(Math.abs(decimal)));
        digitsInfo = `~${Math.max(1,k+1)} digits (magnitude 10^${k})`;
      }

      updateUI(fmtDecimal(decimal), sci, exactForm, digitsInfo, interpretation, steps);
    }

    function updateUI(decimal, sci, exact, digits, interp, steps){
      els.resDecimal.textContent = decimal ?? "—";
      els.resSci.textContent = sci ?? "—";
      els.resExact.innerHTML = exact ?? "—";
      els.resDigits.textContent = digits ?? "—";
      els.resInterpret.textContent = interp ?? "—";
      els.steps.innerHTML = steps.join("\n");
      if (window.MathJax && MathJax.typesetPromise) { MathJax.typesetPromise(); }
    }

    // Clear
    function clearAll(){
      els.base.value = "";
      els.expReal.value = "";
      if (els.p) els.p.value = "";
      if (els.q) els.q.value = "";
      els.useBigInt.checked = false;
      updateUI("—","—","—","—","—",[]);
      clearErrors();
    }

    // Wire buttons
    els.compute.addEventListener('click', compute);
    els.clear.addEventListener('click', clearAll);

    // Enter key triggers compute (on focused input)
    [els.base, els.expReal, els.p, els.q].forEach(i=>{
      if(!i) return;
      i.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); compute(); }});
    });

    // Initial state
    updateUI("—","—","—","—","—",[]);
  })();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Self Employment Tax Calculator (2025) – Social Security & Medicare</title>
<meta name="description" content="Accurately compute 2025 self-employment tax (Schedule SE): Social Security (12.4%), Medicare (2.9%), and Additional Medicare (0.9%) with wage-base limits and filing-status thresholds. Includes formulas, glossary, worked example, and FAQs." />
<link rel="canonical" href="https://calcdomain.com/self-employment-tax-calculator.html" />
<meta name="author" content="Ugo Candido" />

<!-- Icons -->
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />

<!-- Tailwind (CDN, JIT) -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- MathJax for LaTeX -->
<script defer id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Chart.js (tiny doughnut breakdown) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>

<!-- Performance-minded styles -->
<style>
  :root {
    --blue-600:#2563eb; --blue-700:#1d4ed8; --slate-50:#f8fafc; --slate-100:#f1f5f9; --slate-200:#e2e8f0; --slate-700:#334155; --ok:#166534; --err:#b91c1c;
  }
  body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; }
  .prose { max-width: 68ch; }
  .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: .75rem; }
  .prose h3 { font-size: 1.125rem; font-weight: 700; margin-top: 1.25rem; margin-bottom: .5rem; }
  .formula-box { background: var(--slate-50); border:1px solid var(--slate-200); border-radius: .75rem; padding: 1rem; overflow-x:auto; font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; }
  .result-card { background:#fff; border:1px solid var(--slate-200); border-radius:.75rem; padding:1rem; text-align:center; }
  .result-card h4 { font-size:.9rem; color:#475569; margin-bottom:.25rem; }
  .result-card p { font-size:1.5rem; font-weight:800; color:var(--blue-700); }
  .focus-ring:focus-visible { outline: 3px solid #22c55e; outline-offset: 2px; border-radius: .5rem; }
  .help-btn { width: 2rem; height: 2rem; min-width: 48px; min-height:48px; display:inline-flex; align-items:center; justify-content:center; border-radius:9999px; border:1px solid var(--slate-200); }
  .help-panel { display:none; margin-top:.5rem; font-size:.875rem; color:#334155; }
  .help-panel[aria-hidden="false"] { display:block; }
  .err { color: var(--err); font-size:.875rem; margin-top:.25rem; }
  /* CLS guard for results */
  #results { min-height: 18rem; }
  @media (min-width: 768px) { #results { min-height: 14rem; } }
  @media print {
    body * { visibility: hidden; }
    #print-section, #print-section * { visibility: visible; }
    #print-section { position: absolute; left:0; top:0; width:100%; }
    #chart-wrap { display: none !important; }
  }
</style>

<!-- JSON-LD: WebPage + Calculator via SoftwareApplication -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"WebPage",
  "name":"Self Employment Tax Calculator (2025)",
  "description":"Compute 2025 self-employment tax: Social Security, Medicare, and Additional Medicare with wage-base and thresholds. Includes formulas, glossary, example, FAQs.",
  "url":"https://calcdomain.com/self-employment-tax-calculator.html",
  "inLanguage":"en",
  "author":{"@type":"Person","name":"Ugo Candido"},
  "publisher":{"@type":"Organization","name":"CalcDomain"},
  "mainEntity":{
    "@type":"SoftwareApplication",
    "name":"Self Employment Tax Calculator",
    "applicationCategory":"BusinessApplication",
    "operatingSystem":"Any",
    "softwareVersion":"1.0.0",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}
  }
}
</script>

<!-- JSON-LD: Breadcrumbs -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"BreadcrumbList",
  "itemListElement":[
    {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
    {"@type":"ListItem","position":2,"name":"Finance","item":"https://calcdomain.com/finance.html"},
    {"@type":"ListItem","position":3,"name":"Taxes","item":"https://calcdomain.com/subcategories/taxes.html"},
    {"@type":"ListItem","position":4,"name":"Self Employment Tax Calculator","item":"https://calcdomain.com/self-employment-tax-calculator.html"}
  ]
}
</script>

<!-- JSON-LD: HowTo (calculation steps) -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"HowTo",
  "name":"How to compute self-employment tax",
  "description":"Step-by-step to compute Schedule SE for 2025.",
  "step":[
    {"@type":"HowToStep","name":"Enter income","text":"Provide your net profit from self-employment (Schedule C line 31)."},
    {"@type":"HowToStep","name":"Add wages","text":"Enter W-2 Social Security wages and Medicare wages (if any) to coordinate the wage base and thresholds."},
    {"@type":"HowToStep","name":"Choose filing status","text":"Select your tax filing status to set the Additional Medicare threshold."},
    {"@type":"HowToStep","name":"Review results","text":"The tool computes Social Security (12.4%), Medicare (2.9%), Additional Medicare (0.9%), and the half SE tax deduction."}
  ]
}
</script>

<!-- JSON-LD: FAQPage -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"FAQPage",
  "mainEntity":[
    {"@type":"Question","name":"What is the self-employment tax rate?","acceptedAnswer":{"@type":"Answer","text":"15.3% total: 12.4% Social Security (to the wage base) + 2.9% Medicare with no wage base."}},
    {"@type":"Question","name":"What is the 2025 Social Security wage base?","acceptedAnswer":{"@type":"Answer","text":"$176,100 for 2025, per SSA contribution and benefit base."}},
    {"@type":"Question","name":"What portion of profit is taxed for SE tax?","acceptedAnswer":{"@type":"Answer","text":"Generally 92.35% of net self-employment profit is subject to SE tax."}},
    {"@type":"Question","name":"When does the Additional Medicare 0.9% apply?","acceptedAnswer":{"@type":"Answer","text":"When combined Medicare wages and self-employment net earnings exceed filing-status thresholds ($250,000 MFJ, $125,000 MFS, $200,000 all others)."}},
    {"@type":"Question","name":"Do I get a deduction for SE tax?","acceptedAnswer":{"@type":"Answer","text":"Yes. You can deduct one-half of your self-employment tax when computing income tax."}}
  ]
}
</script>
</head>

<body class="bg-slate-50 text-slate-900">
  <!-- Header (non-sticky as requested) -->
  <header class="bg-white border-b">
    <nav class="container mx-auto px-4 lg:px-6 py-4 flex items-center justify-between">
      <a href="index.html" class="text-2xl font-extrabold text-blue-600 focus-ring">CalcDomain</a>
      <div class="hidden md:flex items-center gap-6 text-sm">
        <a href="search.html" class="hover:text-blue-600 focus-ring">Advanced Search</a>
        <a href="index.html#categories" class="hover:text-blue-600 focus-ring">Categories</a>
      </div>
    </nav>
  </header>

  <main class="container mx-auto px-4 lg:px-6 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
      <section class="w-full lg:w-2/3">
        <!-- Breadcrumb -->
        <nav class="text-sm text-slate-600 mb-4" aria-label="Breadcrumb">
          <a href="index.html" class="hover:text-blue-600 focus-ring">Home</a> &raquo;
          <a href="finance.html" class="hover:text-blue-600 focus-ring">Finance</a> &raquo;
          <a href="subcategories/taxes.html" class="hover:text-blue-600 focus-ring">Taxes</a> &raquo;
          <span class="text-slate-900">Self Employment Tax Calculator</span>
        </nav>

        <div id="print-section" class="bg-white p-6 rounded-lg shadow-sm">
          <h1 class="text-3xl font-extrabold mb-2">self employment tax calculator</h1>
          <p class="text-slate-700 mb-6">
            Estimate your 2025 Schedule SE with precision. This calculator models Social Security (12.4% up to the wage base),
            Medicare (2.9% on all net earnings), and the Additional Medicare tax (0.9%) using your filing status and W-2 wages to
            coordinate limits. Built for freelancers, contractors, and small business owners who need audit-friendly transparency.
          </p>

          <!-- Calculator -->
          <section id="calculator" aria-labelledby="calc-heading" class="space-y-6">
            <h2 id="calc-heading" class="sr-only">Calculator inputs</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Year selector (preloaded wage base) -->
              <div>
                <label for="taxYear" class="block text-sm font-medium">Tax year *</label>
                <select id="taxYear" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md focus-ring" aria-required="true" aria-describedby="taxYearHelp">
                  <option value="2025" selected>2025 (SS wage base $176,100)</option>
                  <option value="2024">2024 (SS wage base $168,600)</option>
                </select>
                <p id="taxYearHelp" class="text-xs text-slate-600 mt-1">Sets Social Security wage base for SE tax.</p>
              </div>

              <!-- Filing status -->
              <div>
                <label for="filingStatus" class="block text-sm font-medium">Filing status *</label>
                <select id="filingStatus" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md focus-ring" aria-required="true" aria-describedby="filingStatusHelp">
                  <option value="single" selected>Single / Head of Household / Qualifying Widow(er)</option>
                  <option value="mfj">Married filing jointly</option>
                  <option value="mfs">Married filing separately</option>
                </select>
                <p id="filingStatusHelp" class="text-xs text-slate-600 mt-1">Affects the Additional Medicare 0.9% threshold.</p>
              </div>

              <!-- Net profit -->
              <div>
                <div class="flex items-center justify-between">
                  <label for="netProfit" class="block text-sm font-medium">Net profit from self-employment (USD) *</label>
                  <button class="help-btn focus-ring" type="button" aria-controls="tip-netProfit" aria-expanded="false" aria-label="Explain net profit">
                    ?
                  </button>
                </div>
                <input type="number" id="netProfit" inputmode="decimal" step="0.01" min="0" value="120000"
                  class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md focus-ring"
                  aria-required="true" aria-describedby="err-netProfit tip-netProfit" />
                <p id="err-netProfit" class="err" aria-live="polite"></p>
                <div id="tip-netProfit" class="help-panel" aria-hidden="true">
                  Usually Schedule C line 31 (net profit). The amount before the 7.65% adjustment used on Schedule SE.
                </div>
              </div>

              <!-- W-2 Social Security wages -->
              <div>
                <div class="flex items-center justify-between">
                  <label for="w2SS" class="block text-sm font-medium">W-2 Social Security wages (USD)</label>
                  <button class="help-btn focus-ring" type="button" aria-controls="tip-w2SS" aria-expanded="false" aria-label="Explain SS wages">
                    ?
                  </button>
                </div>
                <input type="number" id="w2SS" inputmode="decimal" step="0.01" min="0" value="0"
                       class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md focus-ring"
                       aria-describedby="err-w2SS tip-w2SS" />
                <p id="err-w2SS" class="err" aria-live="polite"></p>
                <div id="tip-w2SS" class="help-panel" aria-hidden="true">
                  Box 3 of your W-2. Reduces the Social Security wage base available for self-employment income.
                </div>
              </div>

              <!-- W-2 Medicare wages -->
              <div>
                <div class="flex items-center justify-between">
                  <label for="w2Med" class="block text-sm font-medium">W-2 Medicare wages (USD)</label>
                  <button class="help-btn focus-ring" type="button" aria-controls="tip-w2Med" aria-expanded="false" aria-label="Explain Medicare wages">
                    ?
                  </button>
                </div>
                <input type="number" id="w2Med" inputmode="decimal" step="0.01" min="0" value="0"
                       class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md focus-ring"
                       aria-describedby="err-w2Med tip-w2Med" />
                <p id="err-w2Med" class="err" aria-live="polite"></p>
                <div id="tip-w2Med" class="help-panel" aria-hidden="true">
                  Box 5 of your W-2. Used for the Additional Medicare 0.9% threshold coordination.
                </div>
              </div>

              <!-- Toggle include Additional Medicare -->
              <div class="flex items-center gap-3 mt-2">
                <input id="includeAddlMed" type="checkbox" class="w-5 h-5 focus-ring" aria-describedby="addlHelp" checked />
                <label for="includeAddlMed" class="text-sm font-medium">Include Additional Medicare (0.9%)</label>
              </div>
              <p id="addlHelp" class="text-xs text-slate-600 -mt-4 md:mt-0">Applies above filing-status threshold based on combined wages and SE net earnings.</p>
            </div>

            <!-- Results -->
            <section id="results" class="mt-4 bg-blue-50 border border-blue-100 rounded-lg p-5">
              <h2 class="sr-only">Results</h2>
              <div class="flex flex-col md:flex-row gap-6">
                <div class="w-full md:w-2/3 grid grid-cols-1 sm:grid-cols-2 gap-4">
                  <div class="result-card">
                    <h4>Total SE tax</h4>
                    <p id="totalSETax">$0.00</p>
                  </div>
                  <div class="result-card">
                    <h4>Social Security (12.4%)</h4>
                    <p id="ssTax">$0.00</p>
                  </div>
                  <div class="result-card">
                    <h4>Medicare (2.9%)</h4>
                    <p id="medTax">$0.00</p>
                  </div>
                  <div class="result-card">
                    <h4>Additional Medicare (0.9%)</h4>
                    <p id="addlMedTax">$0.00</p>
                  </div>
                  <div class="result-card">
                    <h4>1/2 SE tax deduction</h4>
                    <p id="halfDeduction">$0.00</p>
                  </div>
                </div>
                <div id="chart-wrap" class="w-full md:w-1/3">
                  <canvas id="breakdownChart" aria-label="Tax components breakdown"></canvas>
                </div>
              </div>

              <details class="mt-5 bg-white rounded-lg p-4">
                <summary class="font-semibold text-slate-800">Details (tax base and thresholds)</summary>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm mt-3">
                  <div class="p-3 rounded border border-slate-200 bg-slate-50">
                    <div class="font-semibold text-slate-700">Net earnings (SE base)</div>
                    <div id="netEarningsVal" class="mt-1">—</div>
                  </div>
                  <div class="p-3 rounded border border-slate-200 bg-slate-50">
                    <div class="font-semibold text-slate-700">SS wage base remaining</div>
                    <div id="ssBaseRemain" class="mt-1">—</div>
                  </div>
                  <div class="p-3 rounded border border-slate-200 bg-slate-50">
                    <div class="font-semibold text-slate-700">Addl. Medicare threshold (status-adjusted)</div>
                    <div id="amThreshold" class="mt-1">—</div>
                  </div>
                  <div class="p-3 rounded border border-slate-200 bg-slate-50">
                    <div class="font-semibold text-slate-700">Combined Medicare wages + SE net</div>
                    <div id="combinedMedBase" class="mt-1">—</div>
                  </div>
                </div>
              </details>
            </section>
          </section>

          <!-- Authoritative content / ecosystem -->
          <section class="prose mt-8">
            <h2>Data source and methodology</h2>
            <ul>
              <li><strong>SSA Contribution &amp; Benefit Base (2024–2026)</strong> — Social Security wage base (2025: $176,100). <a href="https://www.ssa.gov/oact/cola/cbb.html" target="_blank" rel="noopener">SSA official table</a>. All computations respect this cap. “All calculations strictly follow the formulas and data provided by this source.”</li>
              <li><strong>IRS Topic No. 554 &amp; Schedule SE Instructions</strong> — 92.35% net earnings factor; 15.3% rate (12.4% + 2.9%). <a href="https://www.irs.gov/taxtopics/tc554" target="_blank" rel="noopener">Topic 554</a>, <a href="https://www.irs.gov/forms-pubs/about-schedule-se-form-1040" target="_blank" rel="noopener">About Schedule SE</a>, and current <a href="https://www.irs.gov/instructions/i1040sse" target="_blank" rel="noopener">Instructions</a>.</li>
              <li><strong>IRS Topic No. 560 &amp; Q&amp;A</strong> — Additional Medicare tax 0.9% thresholds ($250k MFJ, $125k MFS, $200k others) and coordination with spouse wages. <a href="https://www.irs.gov/taxtopics/tc560" target="_blank" rel="noopener">Topic 560</a> and <a href="https://www.irs.gov/businesses/small-businesses-self-employed/questions-and-answers-for-the-additional-medicare-tax" target="_blank" rel="noopener">Q&amp;A</a>.</li>
            </ul>

            <h2>The formula explained</h2>
            <div class="formula-box">
              <p>Net earnings (Schedule SE base): \\( NE = 0.9235 \\times P \\) where \\(P\\) is net profit from self-employment.</p>
              <p>Social Security tax (12.4% to wage base): \\[
                SS = 0.124 \\times \\min\\big( NE, \\max(0, WB - W2_{SS}) \\big)
              \\]</p>
              <p>Medicare tax (2.9% on all net earnings): \\[
                MED = 0.029 \\times NE
              \\]</p>
              <p>Additional Medicare (0.9% over threshold): \\[
                AM = 0.009 \\times \\max\\big( 0, (W2_{Med} + NE) - T_{fs} \\big)
              \\] where \\(T_{fs}\\) is the filing-status threshold.</p>
              <p>Total SE tax: \\( SET = SS + MED + AM \\). Half SE tax deduction: \\( D = \\tfrac{1}{2} (SS + MED) \\) (excludes \\(AM\\), which is not deductible).</p>
            </div>

            <h2>Glossary of variables</h2>
            <ul>
              <li><strong>P</strong>: Net profit from self-employment (Schedule C line 31).</li>
              <li><strong>NE</strong>: Net earnings for SE tax (= 92.35% of net profit).</li>
              <li><strong>WB</strong>: Social Security wage base (2025: $176,100; 2024: $168,600).</li>
              <li><strong>W2<sub>SS</sub></strong>: W-2 Social Security wages (Box 3) — reduces SS cap available for SE income.</li>
              <li><strong>W2<sub>Med</sub></strong>: W-2 Medicare wages (Box 5) — used for Additional Medicare threshold coordination.</li>
              <li><strong>T<sub>fs</sub></strong>: Filing-status threshold for Additional Medicare (MFJ $250k; MFS $125k; others $200k).</li>
            </ul>

            <h2>How it works: A step-by-step example</h2>
            <h3>Example inputs</h3>
            <ul>
              <li>Tax year: 2025 (WB = $176,100)</li>
              <li>Filing status: Single</li>
              <li>Net profit P: $120,000</li>
              <li>W-2 Social Security wages: $0; W-2 Medicare wages: $0</li>
            </ul>
            <h3>Computation</h3>
            <ol>
              <li>\\( NE = 0.9235 \\times 120{,}000 = 110{,}820 \\).</li>
              <li>Social Security base remaining = \\(176{,}100 - 0 = 176{,}100\\). SS taxable = \\(\\min(110{,}820, 176{,}100)=110{,}820\\). \\( SS=0.124\\times110{,}820=13{,}742.\\overline{\\ } \\)</li>
              <li>Medicare = \\(0.029\\times110{,}820=3{,}213.78\\).</li>
              <li>Additional Medicare threshold (Single) = $200,000; combined base = \\(0 + 110{,}820=110{,}820 < 200{,}000\\Rightarrow AM=0\\).</li>
              <li>Total SE tax \\(SET = 13{,}742.\\overline{\\ } + 3{,}213.78 = 16{,}956.\\overline{\\ }\\).</li>
              <li>Half SE tax deduction \\(D = (SS+MED)/2 \\approx 8{,}478.\\overline{\\ }\\).</li>
            </ol>

            <h2>Frequently asked questions</h2>
            <details>
              <summary>Who must pay self-employment tax?</summary>
              <p>Generally, anyone with net earnings from self-employment of $400 or more must file Schedule SE and pay SE tax.</p>
            </details>
            <details>
              <summary>Does the 92.35% factor always apply?</summary>
              <p>Yes, it’s the standard adjustment on Schedule SE to approximate the “employee-equivalent” share of FICA.</p>
            </details>
            <details>
              <summary>How do W-2 wages affect my SE Social Security tax?</summary>
              <p>Your W-2 Social Security wages reduce the remaining wage base available for SE income. Only the combined amount up to the wage base is subject to the 12.4% portion.</p>
            </details>
            <details>
              <summary>Is the Additional Medicare 0.9% part of Schedule SE?</summary>
              <p>No. It’s computed on Form 8959 but depends on your combined Medicare wages and SE net earnings. This tool estimates it for planning.</p>
            </details>
            <details>
              <summary>Is Additional Medicare deductible?</summary>
              <p>No. Only one-half of the regular SE tax (Social Security + Medicare) is deductible for income-tax purposes.</p>
            </details>
            <details>
              <summary>Can health insurance premiums reduce SE tax?</summary>
              <p>They can reduce income tax (as an above-the-line deduction), but they don’t reduce the SE tax base unless they lower your net profit.</p>
            </details>
          </section>

          <div class="mt-6 p-4 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700">
            <p><strong>Tool developed by Ugo Candido.</strong> Content verified by CalcDomain Editorial Board.<br>
            Last accuracy review: <time datetime="2025-10-28">October 28, 2025</time></p>
          </div>
        </div>
      </section>

      <!-- Aside -->
      <aside class="w-full lg:w-1/3">
        <div class="sticky top-6 space-y-6">
          <div class="bg-slate-200 h-72 rounded-lg flex items-center justify-center text-slate-500">
            Ad Placement (300×600)
          </div>
          <div class="bg-white p-6 rounded-lg border border-slate-200">
            <h3 class="font-bold text-lg mb-3">Why this calculator</h3>
            <ul class="list-disc list-inside text-sm text-slate-700 space-y-2">
              <li>Accurate SSA wage base and IRS thresholds built-in.</li>
              <li>Clear separation of SS, Medicare, and Additional Medicare.</li>
              <li>Keyboard-first UX, inline validation, and printable summary.</li>
            </ul>
          </div>
          <div class="bg-white p-6 rounded-lg border border-slate-200">
            <h3 class="font-bold text-lg mb-4">Related tax tools</h3>
            <ul class="space-y-3 text-sm">
              <li><a class="text-blue-600 hover:underline focus-ring" href="self-employment-net-to-gross.html">SE Net-to-Gross Estimator</a></li>
              <li><a class="text-blue-600 hover:underline focus-ring" href="quarterly-estimated-tax.html">Quarterly Estimated Tax Planner</a></li>
              <li><a class="text-blue-600 hover:underline focus-ring" href="fica-vs-se-tax.html">FICA vs Self-Employment Tax Compare</a></li>
              <li><a class="text-blue-600 hover:underline focus-ring" href="marginal-tax-rate.html">Marginal Tax Rate &amp; Brackets</a></li>
            </ul>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-slate-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-4 space-x-4">
        <a href="about.html" class="hover:text-blue-600 focus-ring">About</a>
        <a href="contact.html" class="hover:text-blue-600 focus-ring">Contact</a>
        <a href="privacy.html" class="hover:text-blue-600 focus-ring">Privacy</a>
        <a href="terms.html" class="hover:text-blue-600 focus-ring">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator Logic (defer placed before </body>) -->
  <script defer>
    document.addEventListener('DOMContentLoaded', () => {
      // Elements
      const el = {
        taxYear: document.getElementById('taxYear'),
        filingStatus: document.getElementById('filingStatus'),
        netProfit: document.getElementById('netProfit'),
        w2SS: document.getElementById('w2SS'),
        w2Med: document.getElementById('w2Med'),
        includeAddlMed: document.getElementById('includeAddlMed'),
        totalSETax: document.getElementById('totalSETax'),
        ssTax: document.getElementById('ssTax'),
        medTax: document.getElementById('medTax'),
        addlMedTax: document.getElementById('addlMedTax'),
        halfDeduction: document.getElementById('halfDeduction'),
        netEarningsVal: document.getElementById('netEarningsVal'),
        ssBaseRemain: document.getElementById('ssBaseRemain'),
        amThreshold: document.getElementById('amThreshold'),
        combinedMedBase: document.getElementById('combinedMedBase'),
        errNetProfit: document.getElementById('err-netProfit'),
        errW2SS: document.getElementById('err-w2SS'),
        errW2Med: document.getElementById('err-w2Med'),
      };

      // Constants (verified 2025 via SSA/IRS)
      // SSA base: 2024 = 168,600 ; 2025 = 176,100  (SSA table)
      const WAGE_BASE = { "2024": 168600, "2025": 176100 };

      // Additional Medicare thresholds (Topic 560)
      const AM_THRESHOLDS = {
        "single": 200000,
        "mfj": 250000,
        "mfs": 125000
      };

      const fmtCurrency = (v) => new Intl.NumberFormat(undefined, { style:'currency', currency:'USD', maximumFractionDigits:2 }).format(Number.isFinite(v)? v : 0);
      const fmtNumber = (v) => new Intl.NumberFormat().format(Number.isFinite(v)? v : 0);

      // Accessible tooltips
      document.querySelectorAll('.help-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = btn.getAttribute('aria-controls');
          const panel = document.getElementById(id);
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!expanded));
          panel.setAttribute('aria-hidden', String(expanded));
        });
      });

      // Inline validation (on blur)
      const validators = {
        netProfit: (v) => v === '' || isNaN(v) || Number(v) < 0 ? 'Enter a valid non-negative amount.' : '',
        w2SS:     (v) => v === '' || isNaN(v) || Number(v) < 0 ? 'Enter 0 if you had no W-2 Social Security wages.' : '',
        w2Med:    (v) => v === '' || isNaN(v) || Number(v) < 0 ? 'Enter 0 if you had no W-2 Medicare wages.' : ''
      };
      const showError = (inputId, message) => {
        const map = { netProfit:'err-netProfit', w2SS:'err-w2SS', w2Med:'err-w2Med' };
        const errEl = document.getElementById(map[inputId]);
        errEl.textContent = message || '';
      };
      ['netProfit','w2SS','w2Med'].forEach(id => {
        const input = el[id];
        input.addEventListener('blur', () => showError(id, validators[id](input.value)));
      });

      // Chart
      let chartInstance = null;
      function renderChart(ss, med, am) {
        const ctx = document.getElementById('breakdownChart');
        if (!ctx) return;
        const data = {
          labels: ['Social Security', 'Medicare', 'Addl Medicare'],
          datasets: [{ data: [ss, med, am] }]
        };
        const options = { plugins:{ legend:{ position:'bottom' } }, responsive:true, maintainAspectRatio:false };
        if (chartInstance) { chartInstance.data = data; chartInstance.update(); }
        else { chartInstance = new Chart(ctx, { type:'doughnut', data, options }); }
      }

      function thresholdForStatus(status) {
        return AM_THRESHOLDS[status] ?? 200000;
      }

      function calculate() {
        // Basic parse
        const year = el.taxYear.value;
        const filing = el.filingStatus.value;
        const profit = Number(el.netProfit.value || 0);
        const w2ss = Number(el.w2SS.value || 0);
        const w2med = Number(el.w2Med.value || 0);
        const includeAddl = el.includeAddlMed.checked;

        // Validate basic inputs
        const v1 = validators.netProfit(el.netProfit.value);
        const v2 = validators.w2SS(el.w2SS.value);
        const v3 = validators.w2Med(el.w2Med.value);
        showError('netProfit', v1);
        showError('w2SS', v2);
        showError('w2Med', v3);
        if (v1 || v2 || v3) return; // stop until fixed

        // Schedule SE net earnings
        const NE = profit * 0.9235;

        // Social Security portion
        const wb = WAGE_BASE[year] || 176100;
        const ssBaseRemaining = Math.max(0, wb - w2ss);
        const ssTaxable = Math.max(0, Math.min(NE, ssBaseRemaining));
        const ssTax = ssTaxable * 0.124;

        // Medicare portion
        const medTax = NE * 0.029;

        // Additional Medicare (Form 8959) estimate
        const threshold = thresholdForStatus(filing);
        const combinedMed = w2med + NE;
        const amTaxable = Math.max(0, combinedMed - threshold);
        const addlMed = includeAddl ? amTaxable * 0.009 : 0;

        // Totals
        const total = ssTax + medTax + addlMed;

        // Half SE deduction (only SS + Medicare, not Additional)
        const half = (ssTax + medTax) / 2;

        // Outputs
        el.totalSETax.textContent = fmtCurrency(total);
        el.ssTax.textContent = fmtCurrency(ssTax);
        el.medTax.textContent = fmtCurrency(medTax);
        el.addlMedTax.textContent = fmtCurrency(addlMed);
        el.halfDeduction.textContent = fmtCurrency(half);

        el.netEarningsVal.textContent = fmtCurrency(NE);
        el.ssBaseRemain.textContent = fmtCurrency(ssBaseRemaining);
        el.amThreshold.textContent = fmtCurrency(threshold);
        el.combinedMedBase.textContent = fmtCurrency(combinedMed);

        renderChart(ssTax, medTax, addlMed);
      }

      // Recalculate on input
      ['taxYear','filingStatus','netProfit','w2SS','w2Med','includeAddlMed'].forEach(id => {
        document.getElementById(id).addEventListener('input', calculate);
      });

      // Init
      calculate();
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fiber Calculator: Recommended Daily Intake</title>
<meta name="description" content="Calculate your recommended daily fiber intake (Adequate Intake) based on official guidelines from the National Academies of Sciences. Uses age, sex, and life stage.">
<link rel="canonical" href="https://calcdomain.com/fiber-calculator.html"/>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
text-align: center;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; font-weight: 500; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
}

/* WCAG 2.1 AA & UX Enhancements */
#results {
/* Prevents Content Layout Shift (CLS) */
min-height: 120px;
}
.error-message {
color: #dc2626; /* AA contrast compliant red */
font-size: 0.875rem;
margin-top: 0.25rem;
font-weight: 500;
}
/* WCAG 2.1 AA: Visible Focus */
input:focus-visible, select:focus-visible, button:focus-visible, [tabindex]:focus-visible {
outline: 3px solid #3b82f6; /* Blue 600 */
outline-offset: 2px;
box-shadow: 0 0 0 2px white;
}
/* WCAG 2.1 AA: Touch Target Size (48x48px) */
input[type="number"], select, button {
min-height: 48px;
}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Fiber Calculator: Recommended Daily Intake",
  "description": "Calculate your recommended daily fiber intake (Adequate Intake) based on official guidelines from the National Academies of Sciences. Uses age, sex, and life stage.",
  "url": "https://calcdomain.com/fiber-calculator.html",
  "inLanguage": "en",
  "author": { "@type": "Person", "name": "Ugo Candido" },
  "publisher": { "@type": "Organization", "name": "CalcDomain" }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
    { "@type": "ListItem", "position": 2, "name": "Health & Fitness", "item": "https://calcdomain.com/health-fitness.html" },
    { "@type": "ListItem", "position": 3, "name": "Diet & Nutrition", "item": "https://calcdomain.com/subcategories/diet-nutrition.html" },
    { "@type": "ListItem", "position": 4, "name": "Fiber Calculator", "item": "https://calcdomain.com/fiber-calculator.html" }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Calculate Your Daily Fiber Recommendation",
  "description": "A step-by-step guide to determining your Adequate Intake (AI) for dietary fiber.",
  "step": [
    {"@type": "HowToStep", "name": "Choose Method", "text": "Select whether to calculate based on your age and sex (most common) or based on your daily calorie intake."},
    {"@type": "HowToStep", "name": "Enter Details", "text": "If using the age-based method, enter your age and biological sex. If female, specify if you are pregnant or lactating."},
    {"@type": "HowToStep", "name": "Enter Calories (if applicable)", "text": "If using the calorie-based method, enter your total daily calorie target (e.g., 2000 kcal)."},
    {"@type": "HowToStep", "name": "Review Results", "text": "The calculator instantly displays your recommended daily fiber intake (Adequate Intake) in grams per day, based on official NASEM guidelines."}
  ]
}
</script>
<script src="https://calcdomain.com/search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="https://calcdomain.com/index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..."
class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="https://calcdomain.com/search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="https://calcdomain.com/index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="https://calcdomain.com/search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="https://calcdomain.com/index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
<a href="https://calcdomain.com/index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="https://calcdomain.com/health-fitness.html" class="hover:text-blue-600">Health &amp; Fitness</a> &raquo;
<a href="https://calcdomain.com/subcategories/diet-nutrition.html" class="hover:text-blue-600">Diet &amp; Nutrition</a> &raquo;
<span class="text-gray-900">Fiber Calculator</span>
</nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Fiber Calculator</h1>
<p class="text-gray-600 mb-6">This tool helps you determine your recommended daily fiber intake (Adequate Intake or AI) based on the U.S. National Academies of Sciences, Engineering, and Medicine guidelines. It's designed for adults, children, and individuals who are pregnant or lactating.</p>

<section id="calculator-ui" class="space-y-6" aria-labelledby="calculator-heading">
<h2 id="calculator-heading" class="sr-only">Fiber Intake Calculator Form</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<label for="calcMethod" class="block text-sm font-medium text-gray-700">Calculation Method</label>
<select id="calcMethod"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<option value="age" selected>Based on Age/Sex (DRI Guidelines)</option>
<option value="calories">Based on Calorie Intake (14g per 1000 kcal)</option>
</select>
</div>
</div>

<div id="ageSexGroup" class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div id="ageContainer">
<label for="age" class="block text-sm font-medium text-gray-700">Age (years) <span class="text-red-600">*</span></label>
<input type="number" id="age" value="30" min="1" max="120" step="1"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true" aria-describedby="age-error">
<div id="age-error" class="error-message" role="alert" aria-live="assertive"></div>
</div>
<div id="sexContainer">
<label for="sex" class="block text-sm font-medium text-gray-700">Biological Sex <span class="text-red-600">*</span></label>
<select id="sex"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true">
<option value="male">Male</option>
<option value="female" selected>Female</option>
</select>
</div>
<div id="lifeStageContainer" class="hidden md:col-span-2">
<label for="lifeStage" class="block text-sm font-medium text-gray-700">Life Stage</label>
<select id="lifeStage"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<option value="default" selected>Default (Not Pregnant or Lactating)</option>
<option value="pregnant">Pregnant</option>
<option value="lactating">Lactating</option>
</select>
</div>
</div>

<div id="calorieContainer" class="hidden">
<div>
<label for="calories" class="block text-sm font-medium text-gray-700">Daily Calorie Intake (kcal) <span class="text-red-600">*</span></label>
<input type="number" id="calories" value="2000" min="800" max="8000" step="100"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
aria-required="true" aria-describedby="calories-error">
<div id="calories-error" class="error-message" role="alert" aria-live="assertive"></div>
</div>
</div>
</section>

<section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6" aria-live="polite">
<h2 class="sr-only">Calculator Results</h2>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
<div class="result-card">
<h4>Recommended Daily Intake (AI)</h4>
<p id="resultFiber" class="text-2xl font-bold text-blue-600">25 g/day</p>
</div>
<div class="result-card bg-gray-50 border border-gray-200">
<h4>Based On</h4>
<p id="resultBasis" class="text-lg font-normal text-gray-700">Age 30, Female</p>
</div>
</div>
<p class="text-sm text-gray-600 mt-4">This value represents the "Adequate Intake" (AI), which is the recommended average daily intake level based on scientific evidence for a healthy population.</p>
</section>
</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
<h2>Data Source and Methodology</h2>
<p>This calculator provides an estimate of your Adequate Intake (AI) for total fiber, a recommendation set by the <strong>Health and Medicine Division of the National Academies of Sciences, Engineering, and Medicine (NASEM)</strong>.</p>
<p><strong>Authoritative Source:</strong> National Academies of Sciences, Engineering, and Medicine. 2005. <em>Dietary Reference Intakes for Energy, Carbohydrate, Fiber, Fat, Protein, and Amino Acids (Macronutrients)</em>. Washington, DC: The National Academies Press.<br>
<strong>Reference:</strong> Chapter 7, "Dietary, Functional, and Total Fiber".<br>
<a href="https://www.nap.edu/read/10490/chapter/9" class="text-blue-600 hover:underline" target="_blank" rel="noopener noreferrer">Access the source material here</a></p>
<p>All calculations are based strictly on the formulas and data provided by this source. These values represent the intake level assumed to ensure nutritional adequacy.</p>

<h2>The Formulas Explained</h2>
<p>The calculator uses two distinct methods to determine your recommendation, both derived from the NASEM guidelines.</p>
<h3>1. Age and Sex-Based (Adequate Intake)</h3>
<p>This is the primary method, which uses a lookup table based on the NASEM guidelines. The values are not a simple formula but a set of established recommendations (in grams per day):</p>
<ul class="list-disc list-inside">
<li><strong>Children 1-3:</strong> 19 g/day</li>
<li><strong>Children 4-8:</strong> 25 g/day</li>
<li><strong>Boys 9-13:</strong> 31 g/day</li>
<li><strong>Girls 9-13:</strong> 26 g/day</li>
<li><strong>Males 14-50:</strong> 38 g/day</li>
<li><strong>Females 14-50:</strong> 25 g/day</li>
<li><strong>Males 51+:</strong> 30 g/day</li>
<li><strong>Females 51+:</strong> 21 g/day</li>
<li><strong>Pregnancy:</strong> 28 g/day</li>
<li><strong>Lactation:</strong> 29 g/day</li>
</ul>
<h3>2. Calorie-Based (General Recommendation)</h3>
<p>The second method provides a general recommendation based on energy intake. The NASEM report also sets an AI for fiber based on 14 grams per 1,000 calories ($14 \text{ g} / 1000 \text{ kcal}$).</p>
<p>The formula for this method is:</p>
<div class="formula-box" aria-label="Formula for fiber intake based on calories">
$$ \text{Recommended Fiber (g)} = \frac{\text{Total Daily Calories (kcal)}}{1000} \times 14 $$
</div>

<h2>Glossary of Variables</h2>
<dl>
<dt class="font-semibold">Age</dt>
<dd class="mb-2">Your chronological age in years. This is a primary determinant for the DRI values.</dd>
<dt class="font-semibold">Biological Sex</dt>
<dd class="mb-2">Used to determine different intake requirements between males and females after puberty.</dd>
<dt class="font-semibold">Life Stage</dt>
<dd class="mb-2">Accounts for the increased nutritional demands during pregnancy and lactation.</dd>
<dt class="font-semibold">Calorie Intake (kcal)</dt>
<dd class="mb-2">Your total estimated daily energy expenditure. Used for the calorie-based calculation method.</dd>
<dt class="font-semibold">Recommended Daily Intake (AI)</dt>
<dd class="mb-2">The "Adequate Intake" level, which is the recommended average daily intake level based on scientific evidence.</dd>
</dl>

<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's calculate the recommendation for a <strong>32-year-old female who is lactating</strong>.</p>
<ol class="list-decimal list-inside">
<li><strong>Select Method:</strong> The user chooses "Based on Age/Sex".</li>
<li><strong>Input Age:</strong> User enters "32".</li>
<li><strong>Input Sex:</strong> User selects "Female".</li>
<li><strong>Input Life Stage:</strong> The calculator shows the "Life Stage" option. The user selects "Lactating".</li>
<li><strong>Calculation:</strong> The calculator looks up the NASEM table.
<ul class="list-disc list-inside ml-4">
<li>Age "32" falls into the "14-50" bracket.</li>
<li>Sex is "Female".</li>
<li>Life Stage is "Lactating".</li>
</ul>
</li>
<li><strong>Result:</strong> The AI for lactating females is <strong>29 g/day</strong>.</li>
</ol>
<p>If the same user chose the "Based on Calorie Intake" method and entered "2200 kcal":</p>
<ul class="list-disc list-inside">
<li><strong>Formula:</strong> $ \text{Fiber (g)} = (2200 / 1000) \times 14 $</li>
<li><strong>Calculation:</strong> $ 2.2 \times 14 = 30.8 $</li>
<li><strong>Result:</strong> The calculator would show <strong>31 g/day</strong> (rounded).</li>
</ul>

<h2>Frequently Asked Questions (FAQ)</h2>
<details>
<summary>Why is fiber important?</summary>
<p>Fiber is crucial for digestive health, helping to prevent constipation. It also plays a role in regulating blood sugar, lowering cholesterol levels, and promoting a feeling of fullness (satiety), which can aid in weight management.</p>
</details>
<details>
<summary>What's the difference between soluble and insoluble fiber?</summary>
<p><strong>Soluble fiber</strong> dissolves in water to form a gel-like material. It's found in oats, peas, beans, apples, and citrus fruits. It helps lower blood cholesterol and glucose levels. <strong>Insoluble fiber</strong> does not dissolve in water. It's found in whole-wheat flour, wheat bran, nuts, beans, and vegetables (like cauliflower and green beans). It promotes the movement of material through your digestive system.</p>
</details>
<details>
<summary>Is it possible to eat too much fiber?</summary>
<p>Yes. While most people don't get enough fiber, consuming too much (e.g., over 70 grams per day) can cause bloating, gas, and constipation. A sudden increase can also lead to digestive discomfort. It's best to increase your fiber intake gradually and drink plenty of water.</p>
</details>
<details>
<summary>Does this calculator work for children?</summary>
<p>Yes, the "Based on Age/Sex" method uses the official Adequate Intake (AI) levels set for children as young as 1 year old.</p>
</details>
<details>
<summary>Why is my recommendation different from other calculators?</summary>
<p>Our calculator strictly adheres to the NASEM (formerly Institute of Medicine) Adequate Intake (AI) guidelines. Other calculators may use different sources, older data, or simplified formulas (like a single value for all adults).</p>
</details>
<details>
<summary>What are good sources of fiber?</summary>
<p>Great sources include legumes (beans, lentils, peas), whole grains (oats, quinoa, barley), fruits (berries, pears, apples), vegetables (broccoli, Brussels sprouts, carrots), and nuts and seeds (almonds, chia seeds, flaxseeds).</p>
</details>

<div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
<p><strong>Tool developed by Ugo Candido.</strong> Health and nutrition content verified by the CalcDomain Editorial Board.<br>
Last accuracy review: <time datetime="2025-10-29">October 29, 2025</time></p>
</div>
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why This Recommendation Matters</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li><strong>Digestive Health:</strong> Adequate fiber prevents constipation and supports a healthy gut microbiome.</li>
<li><strong>Heart Health:</strong> Soluble fiber can help lower "bad" (LDL) cholesterol levels.</li>
<li><strong>Blood Sugar Control:</strong> Fiber slows the absorption of sugar, helping to maintain stable blood glucose levels.</li>
<li><strong>Weight Management:</strong> High-fiber foods are more filling, which can help you feel full longer.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Health Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="https://calcdomain.com/bmi-calculator.html" class="text-blue-600 hover:underline">BMI Calculator</a></li>
<li><a href="https://calcdomain.com/calorie.html" class="text-blue-600 hover:underline">Daily Calorie Calculator (TDEE)</a></li>
<li><a href="https://calcdomain.com/macro.html" class="text-blue-600 hover:underline">Macronutrient Calculator</a></li>
<li><a href="https://calcdomain.com/water-intake-calculator.html" class="text-blue-600 hover:underline">Water Intake Calculator</a></li>
</ul>
</div>
<div class="bg-gray-200 h-60 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×250)
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-white border-t">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="https://calcdomain.com/about.html" class="hover:text-blue-600">About</a>
<a href="https://calcdomain.com/contact.html" class="hover:text-blue-600">Contact</a>
<a href="https://calcdomain.com/privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="https://calcdomain.com/terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
const elements = {
calcMethod: document.getElementById('calcMethod'),
ageContainer: document.getElementById('ageContainer'),
sexContainer: document.getElementById('sexContainer'),
lifeStageContainer: document.getElementById('lifeStageContainer'),
calorieContainer: document.getElementById('calorieContainer'),
ageSexGroup: document.getElementById('ageSexGroup'),
age: document.getElementById('age'),
sex: document.getElementById('sex'),
lifeStage: document.getElementById('lifeStage'),
calories: document.getElementById('calories'),
ageError: document.getElementById('age-error'),
caloriesError: document.getElementById('calories-error'),
resultFiber: document.getElementById('resultFiber'),
resultBasis: document.getElementById('resultBasis'),
};

function validateField(input, errorEl, min, max, message) {
const value = parseFloat(input.value);
if (input.value === '' || isNaN(value) || value < min || value > max) {
errorEl.textContent = message;
input.setAttribute('aria-invalid', 'true');
return false;
}
errorEl.textContent = '';
input.setAttribute('aria-invalid', 'false');
return true;
}

function calculateFiber() {
const method = elements.calcMethod.value;
const age = parseFloat(elements.age.value);
const sex = elements.sex.value;
const lifeStage = elements.lifeStage.value;
const calories = parseFloat(elements.calories.value);

let isAgeValid = true;
let isCalorieValid = true;

// 1. Validate inputs based on selected method
if (method === 'age') {
isAgeValid = validateField(elements.age, elements.ageError, 1, 120, 'Please enter an age between 1 and 120.');
// Clear other method's errors
elements.caloriesError.textContent = '';
elements.calories.setAttribute('aria-invalid', 'false');
} else { // 'calories' method
isCalorieValid = validateField(elements.calories, elements.caloriesError, 800, 8000, 'Please enter calories between 800 and 8000.');
// Clear other method's errors
elements.ageError.textContent = '';
elements.age.setAttribute('aria-invalid', 'false');
}

// 2. Stop calculation if invalid
if ((method === 'age' && !isAgeValid) || (method === 'calories' && !isCalorieValid)) {
elements.resultFiber.textContent = '—';
elements.resultBasis.textContent = 'Invalid input';
return;
}

let fiber = 0;
let basis = '';
let basisParts = [];

// 3. Perform calculation
if (method === 'calories') {
fiber = (calories / 1000) * 14;
basis = `${calories.toLocaleString()} kcal/day`;
} else {
// Age/Sex method
basisParts.push(`Age ${age}`);
basisParts.push(sex.charAt(0).toUpperCase() + sex.slice(1)); // Capitalize

if (sex === 'female' && age >= 14 && age <= 50 && (lifeStage === 'pregnant' || lifeStage === 'lactating')) {
if (lifeStage === 'pregnant') {
fiber = 28;
basisParts.push('Pregnant');
} else { // lactating
fiber = 29;
basisParts.push('Lactating');
}
} else {
// Standard DRI lookup
if (age >= 1 && age <= 3) {
fiber = 19;
} else if (age >= 4 && age <= 8) {
fiber = 25;
} else if (age >= 9 && age <= 13) {
fiber = (sex === 'male') ? 31 : 26;
} else if (age >= 14 && age <= 50) {
fiber = (sex === 'male') ? 38 : 25;
} else if (age > 50) {
fiber = (sex === 'male') ? 30 : 21;
} else {
fiber = 25; // Default fallback
}
}
basis = basisParts.join(', ');
}

// 4. Update UI
elements.resultFiber.textContent = `${Math.round(fiber)} g/day`;
elements.resultBasis.textContent = basis;
}

function updateUI() {
const method = elements.calcMethod.value;
const sex = elements.sex.value;
const age = parseFloat(elements.age.value);

if (method === 'age') {
elements.ageSexGroup.classList.remove('hidden');
elements.calorieContainer.classList.add('hidden');

// Show life stage only for females of child-bearing age
if (sex === 'female' && age >= 14 && age <= 50) {
elements.lifeStageContainer.classList.remove('hidden');
} else {
elements.lifeStageContainer.classList.add('hidden');
elements.lifeStage.value = 'default'; // Reset if hidden
}
} else { // 'calories' method
elements.ageSexGroup.classList.add('hidden');
elements.lifeStageContainer.classList.add('hidden');
elements.calorieContainer.classList.remove('hidden');
elements.lifeStage.value = 'default'; // Reset if hidden
}
}

// Attach event listeners
const allInputs = [elements.calcMethod, elements.age, elements.sex, elements.lifeStage, elements.calories];
allInputs.forEach(input => {
input.addEventListener('input', () => {
updateUI(); // Update conditional fields first
calculateFiber(); // Then calculate
});
});

// Initial setup on load
updateUI();
calculateFiber();
});
</script>
</body>
</html>
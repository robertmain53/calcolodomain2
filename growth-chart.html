<!DOCTYPE html>
<html lang="en">
<head> 
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatric Growth Chart Calculator | CalcDomain</title>
    <meta name="description" content="Calculate head circumference-for-age and weight-for-length/stature percentiles using official CDC data, styled for uniformity with the rest of the site.">
    <link rel="canonical" href="https://calcdomain.com/growth-chart-calculator.html"/>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .prose { max-width: 65ch; }
        .prose h1 { @apply text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl; }
        .hidden { display: none; }
    </style>
</head>
<body class="antialiased text-gray-800">
    <header class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="/" class="text-2xl font-bold text-gray-900">CalcDomain</a>
                </div>
        </div>
    </header>

<main class="py-12 bg-gray-50">
    <div class="max-w-4xl mx-auto px-4">

        <div class="text-center mb-10">
            <h1 class="text-4xl font-bold tracking-tight text-gray-900">Pediatric Growth Chart Calculator</h1>
            <p class="mt-3 text-lg text-gray-600">Calculate head circumference-for-age and weight-for-length/stature percentiles using official CDC data.</p>
        </div>

        <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                <div>
                    <label for="sex" class="block text-sm font-semibold text-gray-700">Sex</label>
                    <select id="sex" class="mt-1 block w-full py-3 px-4 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="male">Boy</option>
                        <option value="female">Girl</option>
                    </select>
                </div>

                <div>
                    <label for="measureType" class="block text-sm font-semibold text-gray-700">Measurement Type</label>
                    <select id="measureType" class="mt-1 block w-full py-3 px-4 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="hcageinf">Head Circumference for Age (0-36 mos)</option>
                        <option value="wtleninf">Weight for Length (Infants)</option>
                        <option value="wtstat">Weight for Stature (Children)</option>
                    </select>
                </div>
                
                <div id="ageInputGroup">
                    <label for="age" class="block text-sm font-semibold text-gray-700">Age (months)</label>
                    <input type="number" id="age" step="0.5" placeholder="e.g., 6.5" class="mt-1 block w-full py-3 px-4 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>

                <div id="lengthInputGroup" class="hidden">
                    <label for="length" class="block text-sm font-semibold text-gray-700">Length/Stature (cm)</label>
                    <input type="number" id="length" step="0.5" placeholder="e.g., 70.5" class="mt-1 block w-full py-3 px-4 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>

                <div>
                    <label for="measurement" class="block text-sm font-semibold text-gray-700">Measurement Value (cm or kg)</label>
                    <input type="number" id="measurement" step="0.1" placeholder="e.g., 44.5" class="mt-1 block w-full py-3 px-4 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>
            </div>
            <button id="calculateBtn" class="w-full mt-8 bg-blue-600 text-white font-bold py-4 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300">
                Calculate Percentile
            </button>
        </div>

        <div id="results" class="hidden mt-10 text-center">
             <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Result</h2>
                <p class="text-7xl font-bold text-blue-600" id="percentileResult"></p>
                <p class="text-base text-gray-600 mt-2" id="interpretation">Enter details above to see the result.</p>
                <div class="mt-4 text-sm text-gray-500">
                    <p>Z-Score: <span id="zscoreResult">-</span></p>
                </div>
             </div>
        </div>
    </div>
</main>

<script>
    // IMPORTANT: The full CDC data from your CSV files would be loaded here.
    // This is a small sample for demonstration.
    // To generate the full data object, run the Python script provided in our previous message.
    const cdcData = {
      "hcageinf": {
        "male": {
          "0.5": {"L": 4.310927464,"M": 37.19361054,"S": 0.047259148},
          "1.5": {"L": 3.869576802,"M": 39.20742929,"S": 0.040947903}
        },
        "female": {
          "0.5": {"L": 3.791552014,"M": 36.32469449,"S": 0.047610931},
          "1.5": {"L": 3.398539217,"M": 38.3072033,"S": 0.041698642}
        }
      },
      "wtleninf": {
        "male": {
          "45.0": {"L": 1.44903689,"M": 2.289757735,"S": 0.149236691},
          "45.5": {"L": 1.31794165,"M": 2.38617219,"S": 0.144790131}
        },
        "female": {
          "45.0": {"L": 1.233933064,"M": 2.302447192,"S": 0.14481543},
          "45.5": {"L": 1.13418507,"M": 2.404193855,"S": 0.140297531}
        }
      },
       "wtstat": {
        "male": {
          "77.0": {"L": -0.999294215,"M": 10.27440527,"S": 0.077115837},
          "77.5": {"L": -0.979897716,"M": 10.38901871,"S": 0.076995353}
        },
        "female": {
          "77.0": {"L": -1.133857599,"M": 10.0528448,"S": 0.078496101},
          "77.5": {"L": -1.10924089,"M": 10.16911019,"S": 0.078311546}
        }
      }
    };

    const elements = {
        measureType: document.getElementById('measureType'),
        ageInputGroup: document.getElementById('ageInputGroup'),
        lengthInputGroup: document.getElementById('lengthInputGroup'),
        calculateBtn: document.getElementById('calculateBtn'),
        sex: document.getElementById('sex'),
        age: document.getElementById('age'),
        length: document.getElementById('length'),
        measurement: document.getElementById('measurement'),
        results: document.getElementById('results'),
        percentileResult: document.getElementById('percentileResult'),
        interpretation: document.getElementById('interpretation'),
        zscoreResult: document.getElementById('zscoreResult'),
    };

    elements.measureType.addEventListener('change', toggleInputs);
    elements.calculateBtn.addEventListener('click', calculate);

    function toggleInputs() {
        const type = elements.measureType.value;
        document.getElementById('measurement').placeholder = (type === 'hcageinf') ? 'e.g., 44.5 (cm)' : 'e.g., 9.5 (kg)';
        if (type === 'hcageinf') {
            elements.ageInputGroup.classList.remove('hidden');
            elements.lengthInputGroup.classList.add('hidden');
        } else {
            elements.ageInputGroup.classList.add('hidden');
            elements.lengthInputGroup.classList.remove('hidden');
        }
    }
    
    function calculate() {
        const type = elements.measureType.value;
        const sex = elements.sex.value;
        const value = parseFloat(elements.measurement.value);
        let key;

        if (type === 'hcageinf') {
             key = parseFloat(elements.age.value);
        } else {
             key = parseFloat(elements.length.value);
        }
        
        if (isNaN(value) || isNaN(key)) {
            alert("Please fill in all required fields with valid numbers.");
            return;
        }

        const dataTable = cdcData[type]?.[sex];
        if (!dataTable) {
            alert("Data for the selected measurement type and sex is not available.");
            return;
        }

        const closestKey = (Math.round(key * 2) / 2).toString();
        const params = dataTable[closestKey] || dataTable[closestKey + '.0'];

        if (!params) {
            alert(`No data available for the specified age/length: ${key}cm/mos. Please check the valid range for this measurement.`);
            elements.results.classList.add('hidden');
            return;
        }
        
        const { L, M, S } = params;
        let z;
        if (L === 0) { 
             z = Math.log(value / M) / S;
        } else {
            z = (((value / M) ** L) - 1) / (L * S);
        }
        const percentile = zScoreToPercentile(z);
        
        displayResults(percentile, z.toFixed(2));
    }

    function displayResults(percentile, z_score) {
        elements.percentileResult.textContent = `${percentile.toFixed(1)}th`;
        elements.interpretation.textContent = getInterpretation(percentile);
        elements.zscoreResult.textContent = z_score;
        elements.results.classList.remove('hidden');
    }

    function getInterpretation(p) {
        if (p < 3) return "This value is below the 3rd percentile, which is considered significantly below the typical range.";
        if (p <= 5) return "This value is at or below the 5th percentile, which may warrant further attention.";
        if (p < 95) return "This value is within the typical range for a child of this sex and age/length.";
        if (p >= 97) return "This value is above the 97th percentile, which is considered significantly above the typical range.";
        if (p >= 95) return "This value is at or above the 95th percentile, which may warrant further attention.";
        return "This value falls within the typical range.";
    }

    function zScoreToPercentile(z) {
        const p = 0.3275911, a1 = 0.254829592, a2 = -0.284496736, a3 = 1.421413741, a4 = -1.453152027, a5 = 1.061405429;
        const sign = (z < 0) ? -1 : 1;
        const x = Math.abs(z) / Math.sqrt(2.0);
        const t = 1.0 / (1.0 + p * x);
        const erf = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);
        return 0.5 * (1.0 + sign * erf) * 100;
    }
    
    toggleInputs();
</script>

    <footer class="bg-white mt-12 border-t border-gray-200">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-gray-500">
            <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
        </div>
    </footer>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gear Ratio Calculator - Calculate Speed, RPM &amp; Ratios</title>
<meta name="description" content="Calculate simple gear ratios from teeth counts, or find your vehicle's speed (MPH/KPH) based on engine RPM, tire diameter, axle, and transmission ratios.">
<link rel="canonical" href="https://calcdomain.com/gear-ratio-calculator.html"/>

<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* Stili di base e prose dal template */
body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.prose strong { font-weight: 600; }
.formula-box {
  background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.25rem;
  overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
  font-size: 1.1rem;
  text-align: center;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }

/* Stili del calcolatore e dei risultati */
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; font-weight: 500; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
/* Prevenzione CLS: Assicura che l'area risultati abbia un'altezza minima */
#results { min-height: 120px; }

/* Accessibilità (A11y): Stili di Focus Visibili Personalizzati (WCAG 2.4.7)
  Questo sovrascrive il default di Tailwind per essere più evidente.
*/
:focus-visible {
  outline: 3px solid #3b82f6 !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.4) !important;
  border-radius: 4px;
}
/* Stile per input invalidi (WCAG 3.3.1) */
input[aria-invalid="true"] {
  border-color: #dc2626;
  box-shadow: 0 0 0 1px #dc2626;
}
.error-message {
  color: #dc2626;
  font-size: 0.875rem;
  margin-top: 0.25rem;
}
/* Stili per Tooltip Accessibili */
.tooltip-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1.25rem;
  height: 1.25rem;
  border-radius: 9999px;
  border: 1px solid #9ca3af;
  background: #f3f4f6;
  color: #4b5563;
  font-weight: 700;
  font-size: 0.8rem;
  margin-left: 0.25rem;
  cursor: pointer;
}
.tooltip-text {
  background: #111827;
  color: #f9fafb;
  font-size: 0.875rem;
  padding: 0.5rem 0.75rem;
  border-radius: 6px;
  margin-top: 0.5rem;
  position: relative;
  z-index: 10;
}
/* Stampa (come da template) */
@media print {
  body * { visibility: hidden; }
  #print-section, #print-section * { visibility: visible; }
  #print-section { position: absolute; left: 0; top: 0; width: 100%; }
}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Gear Ratio Calculator",
  "description": "Calculate simple gear ratios from teeth, or determine vehicle speed (MPH/KPH) from engine RPM, tire diameter, axle ratio, and transmission ratio.",
  "url": "https://calcdomain.com/gear-ratio-calculator.html",
  "inLanguage": "en",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
    { "@type": "ListItem", "position": 2, "name": "Everyday Life", "item": "https://calcdomain.com/lifestyle-everyday.html" },
    { "@type": "ListItem", "position": 3, "name": "Automotive", "item": "https://calcdomain.com/subcategories/automotive.html" },
    { "@type": "ListItem", "position": 4, "name": "Gear Ratio Calculator", "item": "https://calcdomain.com/gear-ratio-calculator.html" }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Calculate Gear Ratio and Vehicle Speed",
  "description": "A step-by-step guide to calculating mechanical gear ratios and vehicle speed based on powertrain components.",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Calculate Simple Ratio (Method 1)",
      "text": "For a simple two-gear system, enter the number of teeth on the driving (input) gear and the driven (output) gear. The calculator provides the exact gear ratio."
    },
    {
      "@type": "HowToStep",
      "name": "Calculate Vehicle Speed (Method 2)",
      "text": "Enter your engine speed in RPM, your total tire diameter in inches, your final axle (differential) ratio, and your current transmission gear ratio."
    },
    {
      "@type": "HowToStep",
      "name": "Select Speed Unit",
      "text": "Choose whether you want the final speed calculated in Miles Per Hour (MPH) or Kilometers Per Hour (KPH)."
    },
    {
      "@type": "HowToStep",
      "name": "Review Results",
      "text": "The calculator instantly shows your total Final Drive Ratio (FDR) and the resulting vehicle speed for the given parameters."
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is a gear ratio?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A gear ratio is a mechanical ratio that defines the relationship between the rotational speeds of two or more gears. A 4:1 ratio means the driving (input) gear must turn 4 times to make the driven (output) gear turn once, resulting in higher torque but lower speed."
      }
    },
    {
      "@type": "Question",
      "name": "What does a 'high' vs. 'low' gear ratio mean?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This can be confusing. A 'low gear' (like 1st gear) has a numerically high ratio (e.g., 4.10:1) and provides high torque for acceleration. A 'high gear' (like 6th gear) has a numerically low ratio (e.g., 0.67:1) and provides high speed at lower RPM for fuel efficiency."
      }
    },
    {
      "@type": "Question",
      "name": "How do I find my tire diameter?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "You can measure it directly or calculate it from the tire's sidewall code (e.g., 265/70R17). We recommend using a dedicated 'Tire Size Calculator' for the most accurate diameter in inches."
      }
    },
    {
      "@type": "Question",
      "name": "What is the difference between axle ratio and transmission ratio?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The transmission ratio is the gear you are currently in (1st, 2nd, etc.). The axle ratio (or differential ratio) is a fixed ratio in the differential that provides a final stage of torque multiplication before the wheels. Your total 'Final Drive Ratio' is the transmission ratio multiplied by the axle ratio."
      }
    },
    {
      "@type": "Question",
      "name": "Why does gear ratio affect fuel economy?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Gearing determines how hard the engine must work (RPM) to maintain a certain speed. A numerically low 'highway gear' (overdrive) allows the engine to spin at a lower, more efficient RPM while cruising, thus saving fuel. A high numerical ratio (low gear) forces the engine to spin faster, using more fuel but providing more power."
      }
    }
  ]
}
</script>

<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
  <nav class="container mx-auto px-4 lg:px-6 py-4">
    <div class="flex justify-between items-center">
      <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

      <div class="w-full max-w-md hidden md:block mx-8">
        <div class="relative">
          <input type="search" id="search-input" placeholder="Search for a calculator..."
            class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
            autocomplete="off">
          <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
            fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          <div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
        </div>
      </div>

      <div class="hidden md:flex items-center space-x-6 text-sm">
        <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
        <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
      </div>

      <button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-menu">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <div id="mobile-menu" class="md:hidden mt-4 hidden">
      <div class="space-y-2">
        <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
        <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
      </div>
    </div>
  </nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
  <div class="flex flex-col lg:flex-row gap-8">

    <section class="w-full lg:w-2/3">
      <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
        <a href="https://calcdomain.com/index.html" class="hover:text-blue-600">Home</a> &raquo;
        <a href="https://calcdomain.com/lifestyle-everyday.html" class="hover:text-blue-600">Lifestyle Everyday</a> &raquo;
        <a href="https://calcdomain.com/subcategories/automotive.html" class="hover:text-blue-600">Automotive</a> &raquo;
        <span class="text-gray-900">Gear Ratio Calculator</span>
      </nav>

      <div id="print-section" class="bg-white p-6 md:p-8 rounded-lg shadow-md">
        
        <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Gear Ratio Calculator</h1>
        <p class="text-gray-600 mb-6">Quickly determine your vehicle's gear ratios, final drive ratio, and resulting speed at any RPM. Ideal for mechanics, tuners, and automotive enthusiasts looking to optimize performance or fuel economy.</p>

        <div id="calculator-ui" class="space-y-8">
          
          <fieldset>
            <legend class="text-xl font-semibold text-gray-800 mb-4 border-b pb-2 w-full">Calculator 1: Simple Gear Ratio (from Teeth)</legend>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="drivingTeeth" class="block text-sm font-medium text-gray-700">
                  Driving Gear Teeth (T<sub>driving</sub>)
                  <span class="text-red-500" aria-hidden="true">*</span>
                </label>
                <input type="number" id="drivingTeeth" value="15" step="1" min="1" aria-required="true"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                  aria-describedby="drivingTeeth-error">
                <div id="drivingTeeth-error" class="error-message" role="alert"></div>
              </div>
              <div>
                <label for="drivenTeeth" class="block text-sm font-medium text-gray-700">
                  Driven Gear Teeth (T<sub>driven</sub>)
                  <span class="text-red-500" aria-hidden="true">*</span>
                </label>
                <input type="number" id="drivenTeeth" value="45" step="1" min="1" aria-required="true"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                  aria-describedby="drivenTeeth-error">
                <div id="drivenTeeth-error" class="error-message" role="alert"></div>
              </div>
            </div>
          </fieldset>

          <fieldset>
            <legend class="text-xl font-semibold text-gray-800 mb-4 border-b pb-2 w-full">Calculator 2: Vehicle Speed (from Ratios &amp; RPM)</legend>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="rpm" class="block text-sm font-medium text-gray-700">
                  Engine RPM
                  <span class="text-red-500" aria-hidden="true">*</span>
                </label>
                <input type="number" id="rpm" value="3000" step="100" min="0" aria-required="true"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                  aria-describedby="rpm-error">
                <div id="rpm-error" class="error-message" role="alert"></div>
              </div>
              <div>
                <label for="tireDiameter" class="block text-sm font-medium text-gray-700">
                  Tire Diameter (inches)
                  <span class="text-red-500" aria-hidden="true">*</span>
                  <button type="button" class="tooltip-btn" aria-label="Info about tire diameter" aria-describedby="tireDiameter-tip" aria-expanded="false" data-tooltip-id="tireDiameter-tip">(?)</button>
                </label>
                <input type="number" id="tireDiameter" value="26" step="0.1" min="10" aria-required="true"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                  aria-describedby="tireDiameter-error tireDiameter-tip">
                <div id="tireDiameter-error" class="error-message" role="alert"></div>
                <div id="tireDiameter-tip" role="tooltip" class="tooltip-text hidden">
                  Enter the total outer diameter of your tire in inches. You can measure this or use a tire size calculator.
                </div>
              </div>
              <div>
                <label for="axleRatio" class="block text-sm font-medium text-gray-700">
                  Axle (Differential) Ratio
                  <span class="text-red-500" aria-hidden="true">*</span>
                </label>
                <input type="number" id="axleRatio" value="3.73" step="0.01" min="0.1" aria-required="true"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                  aria-describedby="axleRatio-error">
                <div id="axleRatio-error" class="error-message" role="alert"></div>
              </div>
              <div>
                <label for="transRatio" class="block text-sm font-medium text-gray-700">
                  Transmission Gear Ratio
                  <span class="text-red-500" aria-hidden="true">*</span>
                </label>
                <input type="number" id="transRatio" value="1.00" step="0.01" min="0.1" aria-required="true"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                  aria-describedby="transRatio-error">
                <div id="transRatio-error" class="error-message" role="alert"></div>
              </div>
              <div class="md:col-span-2">
                <label for="speedUnit" class="block text-sm font-medium text-gray-700">Desired Speed Unit</Slabel>
                <select id="speedUnit"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                  <option value="mph" selected>MPH (Miles Per Hour)</option>
                  <option value="kph">KPH (Kilometers Per Hour)</option>
                </select>
              </div>
            </div>
          </fieldset>
        </div>

        <div id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4 text-center">Calculated Results</h3>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            
            <div class="result-card">
              <h4>Simple Gear Ratio</h4>
              <p id="simpleRatioResult">—</p>
            </div>

            <div class="result-card">
              <h4>Final Drive Ratio (FDR)</h4>
              <p id="fdrResult">—</p>
            </div>

            <div class="result-card">
              <h4>Vehicle Speed</h4>
              <p id="speedResult">—</p>
            </div>

          </div>
          </div>
      </div>

      <article class="bg-white p-6 md:p-8 rounded-lg shadow-md mt-8 prose prose-blue">
        
        <h2>Authoritative Source &amp; Methodology</h2>
        <p>This calculator uses fundamental principles of mechanical engineering and vehicle dynamics. The formulas are standardized and rigorously cross-referenced against authoritative texts.</p>
        <ul class="text-sm">
          <li><strong>Authoritative Data Source:</strong> "Bosch Automotive Handbook", 10th Edition.</li>
          <li><strong>Reference:</strong> Chapter on "Vehicle Dynamics" and "Powertrain".</li>
          <li><strong>Publisher:</strong> Robert Bosch GmbH.</li>
        </ul>
        <p>All calculations are strictly based on the fundamental engineering formulas and definitions provided by this source.</p>

        <h2>The Formulas Explained</h2>
        <p>The calculator uses three core formulas to determine the results.</p>

        <h3>1. Simple Gear Ratio</h3>
        <p>The ratio between two gears is found by dividing the number of teeth on the driven gear by the number of teeth on the driving gear.</p>
        <div class="formula-box" role="math" aria-label="Gear Ratio Formula">
          $$ \text{Gear Ratio} = \frac{T_{\text{driven}}}{T_{\text{driving}}} $$
        </div>
        
        <h3>2. Final Drive Ratio (FDR)</h3>
        <p>The FDR is the total gear reduction from the engine to the wheels. It's calculated by multiplying the transmission's current gear ratio by the axle's (differential) ratio.</p>
        <div class="formula-box" role="math" aria-label="Final Drive Ratio Formula">
          $$ \text{FDR} = R_{\text{transmission}} \times R_{\text{axle}} $$
        </div>

        <h3>3. Vehicle Speed (MPH)</h3>
        <p>Vehicle speed is calculated by determining the wheel's rotational speed (based on engine RPM and FDR) and multiplying it by the tire's circumference. The constant 336.13 simplifies the conversion of inches-per-minute to miles-per-hour.</p>
        <div class="formula-box" role="math" aria-label="Vehicle Speed Formula">
          $$ \text{Speed (MPH)} = \frac{\text{RPM} \times D_{\text{tire}}}{\text{FDR} \times 336.13} $$
        </div>
        <p>For KPH, the result is multiplied by 1.60934.</p>

        <h2>Glossary of Variables</h2>
        <ul class="list-disc">
          <li><strong>T<sub>driving</sub> (Driving Gear Teeth):</strong> The number of teeth on the input gear (e.g., connected to the motor).</li>
          <li><strong>T<sub>driven</sub> (Driven Gear Teeth):</strong> The number of teeth on the output gear.</li>
          <li><strong>RPM (Engine RPM):</strong> Engine revolutions per minute, as shown on your tachometer.</li>
          <li><strong>D<sub>tire</sub> (Tire Diameter):</strong> The total height of the tire in inches.</li>
          <li><strong>R<sub>axle</sub> (Axle Ratio):</strong> The fixed gear ratio inside the differential (e.g., 3.73:1 is entered as 3.73).</li>
          <li><strong>R<sub>transmission</sub> (Transmission Ratio):</strong> The ratio of the currently selected gear (e.g., 1.0 for a 1:1 gear, or 0.67 for an overdrive gear).</li>
          <li><strong>FDR (Final Drive Ratio):</strong> The total gear reduction applied to the engine's RPM.</li>
        </ul>

        <h2>How It Works: A Step-by-Step Example</h2>
        <p>Let's calculate the speed of a car with the following parameters:</p>
        <ul>
          <li><strong>Engine RPM:</strong> 3500 RPM</li>
          <li><strong>Tire Diameter:</strong> 27 inches</li>
          <li><strong>Axle Ratio:</strong> 4.10:1 (Use 4.10)</li>
          <li><strong>Transmission Ratio:</strong> 0.70:1 (An overdrive gear. Use 0.70)</li>
        </ul>

        <p><strong>Step 1: Calculate the Final Drive Ratio (FDR)</strong></p>
        <p>Using the FDR formula, we multiply the transmission and axle ratios.</p>
        <p><code>FDR = 0.70 × 4.10 = 2.87</code></p>
        
        <p><strong>Step 2: Calculate the Vehicle Speed in MPH</strong></p>
        <p>Using the speed formula, we plug in our numbers.</p>
        <p><code>Speed (MPH) = (3500 × 27) / (2.87 × 336.13)</code></p>
        <p><code>Speed (MPH) = 94500 / 964.6931</code></p>
        <p><code>Speed (MPH) ≈ 97.96</code></p>
        <p>At 3500 RPM in this gear, the vehicle would be traveling at approximately <strong>98 MPH</strong>.</p>
        
        <h2>Frequently Asked Questions</h2>
        <details>
          <summary>What is a gear ratio?</summary>
          <p>A gear ratio is a mechanical ratio that defines the relationship between the rotational speeds of two or more gears. A 4:1 ratio means the driving (input) gear must turn 4 times to make the driven (output) gear turn once, resulting in higher torque but lower speed.</p>
        </details>
        <details>
          <summary>What does a "high" vs. "low" gear ratio mean?</summary>
          <p>This can be confusing. A 'low gear' (like 1st gear) has a numerically high ratio (e.g., 4.10:1) and provides high torque for acceleration. A 'high gear' (like 6th gear) has a numerically low ratio (e.g., 0.67:1) and provides high speed at lower RPM for fuel efficiency.</p>
        </details>
        <details>
          <summary>How do I find my tire diameter?</summary>
          <p>You can measure it directly or calculate it from the tire's sidewall code (e.g., 265/70R17). We recommend using a dedicated 'Tire Size Calculator' for the most accurate diameter in inches.</p>
        </details>
        <details>
          <summary>What is the difference between axle ratio and transmission ratio?</summary>
          <p>The transmission ratio is the gear you are currently in (1st, 2nd, etc.). The axle ratio (or differential ratio) is a fixed ratio in the differential that provides a final stage of torque multiplication before the wheels. Your total 'Final Drive Ratio' is the transmission ratio multiplied by the axle ratio.</p>
        </details>
        <details>
          <summary>Why does gear ratio affect fuel economy?</summary>
          <p>Gearing determines how hard the engine must work (RPM) to maintain a certain speed. A numerically low 'highway gear' (overdrive) allows the engine to spin at a lower, more efficient RPM while cruising, thus saving fuel. A high numerical ratio (low gear) forces the engine to spin faster, using more fuel but providing more power.</p>
        </details>
        <details>
          <summary>Can I calculate RPM from speed?</summary>
          <p>Yes, you can rearrange the speed formula to solve for RPM: <code>RPM = (Speed × FDR × 336.13) / Tire Diameter</code>. This tool is designed to calculate speed from RPM, but you can use this formula manually to find the reverse.</p>
        </details>

        <div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
          <p><strong>Tool developed by Ugo Candido.</strong><br>
          Automotive engineering content verified by the CalcDomain Editorial Board.</p>
          <p>Last accuracy review: <time datetime="2025-03-15">March 15, 2025</time></p>
        </div>
      </article>
    </section>

    <aside class="w-full lg:w-1/3">
      <div class="sticky top-24 space-y-6">
        <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
          Ad Placement (300×600)
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
          <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
            <li>Instantly find mechanical ratios from teeth counts.</li>
            <li>Predict your vehicle's top speed in any gear.</li>
            <li>Understand how changing tires or axle ratios impacts performance.</li>
            <li>Optimize your setup for track use or highway fuel economy.</li>
          </ul>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="font-bold text-lg mb-4">Related Automotive Tools</h3>
          <ul class="space-y-3 text-sm">
            <li><a href="tire-size-calculator.html" class="text-blue-600 hover:underline">Tire Size Calculator</a></li>
            <li><a href="fuel-economy-calculator.html" class="text-blue-600 hover:underline">Fuel Economy (MPG) Calculator</a></li>
            <li><a href="engine-displacement-calculator.html" class="text-blue-600 hover:underline">Engine Displacement Calculator</a></li>
            <li><a href="horsepower-calculator.html" class="text-blue-600 hover:underline">Horsepower Calculator</a></li>
          </ul>
        </div>
      </div>
    </aside>
  </div>
</main>

<footer class="bg-white border-t mt-12">
  <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
    <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
    <div class="mt-4 space-x-4">
      <a href="about.html" class="hover:text-blue-600">About</a>
      <a href="contact.html" class="hover:text-blue-600">Contact</a>
      <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
      <a href="terms.html" class="hover:text-blue-600">Terms</a>
    </div>
  </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

  // === Riferimenti agli Elementi ===
  const elements = {
    // Calcolatore 1
    drivingTeeth: document.getElementById('drivingTeeth'),
    drivenTeeth: document.getElementById('drivenTeeth'),
    simpleRatioResult: document.getElementById('simpleRatioResult'),
    drivingTeethError: document.getElementById('drivingTeeth-error'),
    drivenTeethError: document.getElementById('drivenTeeth-error'),

    // Calcolatore 2
    rpm: document.getElementById('rpm'),
    tireDiameter: document.getElementById('tireDiameter'),
    axleRatio: document.getElementById('axleRatio'),
    transRatio: document.getElementById('transRatio'),
    speedUnit: document.getElementById('speedUnit'),
    fdrResult: document.getElementById('fdrResult'),
    speedResult: document.getElementById('speedResult'),
    rpmError: document.getElementById('rpm-error'),
    tireDiameterError: document.getElementById('tireDiameter-error'),
    axleRatioError: document.getElementById('axleRatio-error'),
    transRatioError: document.getElementById('transRatio-error'),
    
    // Tooltip
    tooltipBtns: document.querySelectorAll('[data-tooltip-id]'),
  };

  // Costanti di conversione
  const MPH_CONSTANT = 336.13; // (60 min/hr * 63360 in/mile) / (PI) = 120793.6... NO, è (63360 in/mile) / (60 min/hr * PI) = 336.13...
  const KPH_CONVERSION = 1.609344;
  
  // === Funzione di Calcolo Principale ===
  function calculate() {
    let isValid = true;
    clearErrors();

    // --- Calcolo 1: Simple Gear Ratio ---
    const drivingT = parseFloat(elements.drivingTeeth.value);
    const drivenT = parseFloat(elements.drivenTeeth.value);

    // Validazione Calcolo 1
    if (drivingT <= 0 || !drivingT) {
      showError('drivingTeeth', 'Must be 1 or more.');
      isValid = false;
    }
    if (drivenT <= 0 || !drivenT) {
      showError('drivenTeeth', 'Must be 1 or more.');
      isValid = false;
    }
    
    if (drivingT > 0 && drivenT > 0) {
      const simpleRatio = drivenT / drivingT;
      elements.simpleRatioResult.textContent = `${simpleRatio.toFixed(2)}:1`;
    } else {
      elements.simpleRatioResult.textContent = '—';
    }

    // --- Calcolo 2: Vehicle Speed ---
    const rpmVal = parseFloat(elements.rpm.value);
    const tireD = parseFloat(elements.tireDiameter.value);
    const axleR = parseFloat(elements.axleRatio.value);
    const transR = parseFloat(elements.transRatio.value);
    const unit = elements.speedUnit.value;

    // Validazione Calcolo 2
    if (rpmVal < 0 || isNaN(rpmVal)) { // 0 è un valore valido
      showError('rpm', 'Must be 0 or more.');
      isValid = false;
    }
    if (tireD < 10 || !tireD) {
      showError('tireDiameter', 'Must be 10 or more.');
      isValid = false;
    }
    if (axleR <= 0 || !axleR) {
      showError('axleRatio', 'Must be greater than 0.');
      isValid = false;
    }
    if (transR <= 0 || !transR) {
      showError('transRatio', 'Must be greater than 0.');
      isValid = false;
    }
    
    // Esegui calcolo solo se tutti i campi del Calcolo 2 sono validi
    if (rpmVal >= 0 && tireD >= 10 && axleR > 0 && transR > 0) {
      const fdr = axleR * transR;
      elements.fdrResult.textContent = `${fdr.toFixed(2)}:1`;

      if (fdr === 0) {
        elements.speedResult.textContent = 'N/A';
        return;
      }
      
      const speedMPH = (rpmVal * tireD) / (fdr * MPH_CONSTANT);
      
      if (unit === 'kph') {
        const speedKPH = speedMPH * KPH_CONVERSION;
        elements.speedResult.textContent = `${speedKPH.toFixed(1)} KPH`;
      } else {
        elements.speedResult.textContent = `${speedMPH.toFixed(1)} MPH`;
      }
      
    } else {
      elements.fdrResult.textContent = '—';
      elements.speedResult.textContent = '—';
    }
  }

  // === Funzioni di Supporto per Validazione A11y ===
  function showError(inputId, message) {
    const inputEl = elements[inputId];
    const errorEl = elements[inputId + 'Error'];
    if (inputEl) inputEl.setAttribute('aria-invalid', 'true');
    if (errorEl) errorEl.textContent = message;
  }

  function clearErrors() {
    Object.keys(elements).forEach(key => {
      if (key.endsWith('Error') && elements[key]) {
        elements[key].textContent = '';
      }
    });
    // Rimuovi tutti gli stati di 'aria-invalid'
    elements.drivingTeeth.setAttribute('aria-invalid', 'false');
    elements.drivenTeeth.setAttribute('aria-invalid', 'false');
    elements.rpm.setAttribute('aria-invalid', 'false');
    elements.tireDiameter.setAttribute('aria-invalid', 'false');
    elements.axleRatio.setAttribute('aria-invalid', 'false');
    elements.transRatio.setAttribute('aria-invalid', 'false');
  }

  // === Gestione Tooltip Accessibili ===
  elements.tooltipBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const tooltipId = btn.getAttribute('data-tooltip-id');
      const tooltip = document.getElementById(tooltipId);
      if (tooltip) {
        const isExpanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', !isExpanded);
        tooltip.classList.toggle('hidden');
      }
    });
  });

  // === Gestione Menu Mobile (come da template) ===
  const menuToggle = document.getElementById('mobile-menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  if (menuToggle && mobileMenu) {
    menuToggle.addEventListener('click', () => {
      const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
      menuToggle.setAttribute('aria-expanded', !isExpanded);
      mobileMenu.classList.toggle('hidden');
    });
  }
  
  // === Event Listeners ===
  // Lista di tutti gli ID degli input che triggerano il ricalcolo
  const inputIds = [
    'drivingTeeth', 'drivenTeeth', 'rpm', 'tireDiameter', 
    'axleRatio', 'transRatio', 'speedUnit'
  ];
  
  inputIds.forEach(id => {
    const el = document.getElementById(id);
    if (el) {
      el.addEventListener('input', calculate);
    }
  });

  // Calcolo iniziale al caricamento della pagina
  calculate();

});
</script>

</body>
</html>
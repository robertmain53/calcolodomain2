<!DOCTYPE html>
<html lang="en">
<head> 
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strike Water Temperature Calculator for Homebrewing | CalcDomain</title>
    <meta name="description" content="Professional strike water temperature calculator for homebrewing. Calculate precise strike water temp using proven heat-balance formulas with optional mash tun thermal mass adjustment.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .prose { max-width: 65ch; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .prose .formula-box { background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem; overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; }
        details > summary { cursor: pointer; font-weight: 600; }
        details[open] > summary { margin-bottom: 0.5rem; }
        .unit-switch { display: inline-flex; gap: 0.25rem; border: 1px solid #d1d5db; border-radius: 0.5rem; padding: 0.25rem; background: #fff; }
        .unit-switch input { position: absolute; opacity: 0; width: 0; height: 0; }
        .unit-switch label { min-width: 80px; min-height: 2.5rem; display: flex; align-items: center; justify-content: center; padding: 0.25rem 0.75rem; border-radius: 6px; cursor: pointer; user-select: none; font-weight: 700; }
        .unit-switch input:checked + label { background: #3b82f6; color: #fff; }
        .tooltip-btn { width: 28px; height: 28px; border: 1px solid #d1d5db; background: #f3f4f6; color: #111; border-radius: 50%; font-weight: 800; line-height: 1; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; }
        .tooltip { display: none; margin-top: 0.35rem; background: #f1f3f5; border: 1px dashed #d1d5db; color: #262626; padding: 0.6rem 0.75rem; border-radius: 8px; }
        .tooltip[data-open="true"] { display: block; }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Calculate Strike Water Temperature for Homebrewing",
      "description": "A step-by-step guide to calculating the precise strike water temperature for single-infusion mashes in homebrewing.",
      "step": [
        {"@type": "HowToStep", "name": "Choose Units", "text": "Select US (°F, lb, qt) or Metric (°C, kg, L) units based on your equipment."},
        {"@type": "HowToStep", "name": "Enter Grain Details", "text": "Input total grain weight and current grain temperature."},
        {"@type": "HowToStep", "name": "Set Mash Parameters", "text": "Enter target mash temperature and water-to-grain ratio."},
        {"@type": "HowToStep", "name": "Account for Mash Tun", "text": "Optionally enter mash tun temperature and thermal mass if not preheated."},
        {"@type": "HowToStep", "name": "Calculate and Heat", "text": "Heat strike water to the calculated temperature and use the indicated volume."}
      ]
    }
    </script>
<script src="search.js" defer></script>
<!-- MathJax for LaTeX formulas -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['\(','\)'], ['$', '$']],
      displayMath: [['$','$'], ['\[','\]']]
    },
    svg: { fontCache: 'global' }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link rel="preload" href="/assets/js/mobile-menu.js" as="script">
<link rel="preload" href="/assets/js/page-enhancements.js" as="script">

</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 lg:px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>
            <div class="w-full max-w-md hidden md:block">
                <div class="relative">
                    <input type="search" placeholder="Search for a calculator..." class="w-full py-2 px-4 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500">
                     <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
            </div>
             <div class="hidden md:block"></div>
        </nav>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">

            <!-- Left Column: Calculator & Content -->
            <main class="w-full lg:w-2/3">
                <!-- Breadcrumbs -->
                <nav class="text-sm mb-4 text-gray-600">
                    <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
                    <a href="#" class="hover:text-blue-600">Lifestyle & Everyday</a> &raquo;
                    <span>Strike Water Temperature Calculator</span>
                </nav>

                <div class="bg-white p-6 rounded-lg shadow-md">
                    <!-- Calculator Title and Intro -->
                    <h1 class="text-3xl font-bold mb-2">Strike Water Temperature Calculator</h1>
                    <p class="text-gray-600 mb-6">Calculate the precise strike water temperature for single-infusion mashes using proven heat-balance formulas. Ideal for homebrewers and small craft brewers seeking consistent mash temperatures.</p>

                    <!-- Calculator Form -->
                    <div id="calculator-ui" class="space-y-6">
                        
                        <!-- Unit Selection -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Unit System</label>
                            <div class="unit-switch">
                                <input type="radio" id="units-us" name="units" value="us" checked>
                                <label for="units-us">US (°F)</label>
                                <input type="radio" id="units-metric" name="units" value="metric">
                                <label for="units-metric">Metric (°C)</label>
                            </div>
                            <p class="text-sm text-gray-500 mt-1">Switch units to match your equipment.</p>
                        </div>

                        <!-- Grain Weight -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <label for="grainWeight" class="text-sm font-medium text-gray-700">Grain Weight *</label>
                                <button type="button" class="tooltip-btn" id="grainWeightHelp" aria-expanded="false" aria-controls="grainWeightTooltip">?</button>
                            </div>
                            <div class="relative">
                                <input type="number" id="grainWeight" value="10.0" step="any" min="0" class="block w-full px-3 py-2 pr-12 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="10.0">
                                <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500" id="grainWeightUnit">lb</span>
                            </div>
                            <div id="grainWeightTooltip" class="tooltip" data-open="false">Total grain bill for the mash. Include all malts and adjuncts added to the mash.</div>
                            <div id="grainWeightError" class="text-red-600 text-sm mt-1"></div>
                        </div>

                        <!-- Water-to-Grain Ratio -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <label for="ratio" class="text-sm font-medium text-gray-700">Water-to-Grain Ratio *</label>
                                <button type="button" class="tooltip-btn" id="ratioHelp" aria-expanded="false" aria-controls="ratioTooltip">?</button>
                            </div>
                            <div class="relative">
                                <input type="number" id="ratio" value="1.50" step="any" min="0" class="block w-full px-3 py-2 pr-16 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="1.50">
                                <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500" id="ratioUnit">qt/lb</span>
                            </div>
                            <div id="ratioTooltip" class="tooltip" data-open="false">Mash thickness. Typical range is 1.25–1.75 qt/lb (2.6–3.7 L/kg). Thicker mashes (lower numbers) run warmer; thinner mashes (higher numbers) require cooler strike water.</div>
                            <div id="ratioError" class="text-red-600 text-sm mt-1"></div>
                        </div>

                        <!-- Target Mash Temperature -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <label for="targetTemp" class="text-sm font-medium text-gray-700">Target Mash Temperature *</label>
                                <button type="button" class="tooltip-btn" id="targetTempHelp" aria-expanded="false" aria-controls="targetTempTooltip">?</button>
                            </div>
                            <div class="relative">
                                <input type="number" id="targetTemp" value="152" step="any" class="block w-full px-3 py-2 pr-12 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="152">
                                <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500" id="targetTempUnit">°F</span>
                            </div>
                            <div id="targetTempTooltip" class="tooltip" data-open="false">Desired equilibrium temperature of the mash after dough-in (e.g., 148–156°F for most ales).</div>
                            <div id="targetTempError" class="text-red-600 text-sm mt-1"></div>
                        </div>

                        <!-- Current Grain Temperature -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <label for="grainTemp" class="text-sm font-medium text-gray-700">Current Grain Temperature *</label>
                                <button type="button" class="tooltip-btn" id="grainTempHelp" aria-expanded="false" aria-controls="grainTempTooltip">?</button>
                            </div>
                            <div class="relative">
                                <input type="number" id="grainTemp" value="68" step="any" class="block w-full px-3 py-2 pr-12 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="68">
                                <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500" id="grainTempUnit">°F</span>
                            </div>
                            <div id="grainTempTooltip" class="tooltip" data-open="false">Temperature of the dry grain before mixing. Usually close to room temperature unless stored in a garage/cellar.</div>
                            <div id="grainTempError" class="text-red-600 text-sm mt-1"></div>
                        </div>

                        <!-- Mash Tun Heat Absorption (Optional) -->
                        <fieldset class="border border-gray-300 rounded-lg p-4">
                            <legend class="text-sm font-medium text-gray-700 px-2">Mash Tun Heat Absorption (Optional)</legend>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <div class="flex items-center gap-2 mb-2">
                                        <label for="tunTemp" class="text-sm font-medium text-gray-700">Mash Tun Temperature</label>
                                        <button type="button" class="tooltip-btn" id="tunTempHelp" aria-expanded="false" aria-controls="tunTempTooltip">?</button>
                                    </div>
                                    <div class="relative">
                                        <input type="number" id="tunTemp" value="68" step="any" class="block w-full px-3 py-2 pr-12 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="68">
                                        <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500" id="tunTempUnit">°F</span>
                                    </div>
                                    <div id="tunTempTooltip" class="tooltip" data-open="false">Actual temperature of the mash tun at dough-in. If you preheat the tun, set this close to the target mash temperature or leave the thermal mass below at zero.</div>
                                </div>
                                
                                <div>
                                    <div class="flex items-center gap-2 mb-2">
                                        <label for="tunMass" class="text-sm font-medium text-gray-700">Tun Thermal Mass</label>
                                        <button type="button" class="tooltip-btn" id="tunMassHelp" aria-expanded="false" aria-controls="tunMassTooltip">?</button>
                                    </div>
                                    <div class="relative">
                                        <input type="number" id="tunMass" value="0.0" step="any" min="0" class="block w-full px-3 py-2 pr-12 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="0.0">
                                        <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500" id="tunMassUnit">qt</span>
                                    </div>
                                    <div id="tunMassTooltip" class="tooltip" data-open="false">The tun's heat capacity expressed as water-equivalent volume. 0.0 if preheated or negligible. For a typical cooler, 0.5–2.0 qt (0.5–2.0 L) is common; stainless steel kettles are often lower.</div>
                                </div>
                            </div>
                        </fieldset>
                    </div>

                    <!-- Results Section -->
                    <div id="results" class="mt-8 bg-blue-50 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Strike Water Calculation:</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div class="text-center bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600">Strike Water Temperature</p>
                                <p class="text-3xl font-bold text-blue-600"><span id="strikeTempOut">—</span> <span id="strikeTempUnit">°F</span></p>
                            </div>
                            <div class="text-center bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600">Strike Water Volume</p>
                                <p class="text-2xl font-bold text-green-600"><span id="waterVolOut">—</span> <span id="waterVolUnit">qt</span></p>
                            </div>
                        </div>
                        
                        <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div class="bg-white p-3 rounded-lg border">
                                <p class="text-sm text-gray-600 mb-1">Assumptions</p>
                                <p class="text-sm font-medium text-gray-800" id="assumptionOut">c_g/c_w = 0.41</p>
                            </div>
                            <div class="bg-white p-3 rounded-lg border">
                                <p class="text-sm text-gray-600 mb-1">Notes</p>
                                <p class="text-sm font-medium text-gray-800" id="notesOut">Use immediately after heating for best accuracy.</p>
                            </div>
                        </div>

                        <div class="mt-4 text-center">
                            <button id="resetBtn" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md mr-2">Reset Calculator</button>
                        </div>
                    </div>
                </div>

                <!-- SEO Content Area -->
                <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
                    <h2>Data Source and Methodology</h2>
                    <p class="text-blue-700 font-semibold">✓ Authoritative Source</p>
                    <p>This calculator provides professional-grade estimates based on established heat-balance principles documented in authoritative brewing science literature.</p>
                    
                    <ul>
                        <li><strong>John J. Palmer</strong>, "How to Brew," 4th Edition, Chapter 16 and online resources. The definitive guide to homebrewing science and techniques.</li>
                        <li><strong>Brewer's Friend</strong> mash resources at <a href="https://www.brewersfriend.com/mash/" target="_blank" rel="noopener">brewersfriend.com/mash</a>, providing additional validation of heat-balance formulas.</li>
                        <li><strong>Industry-standard heat capacity ratios</strong> derived from brewing science research and practical brewing applications.</li>
                    </ul>
                    <p><strong>All calculations are strictly based on the formulas and data provided by these authoritative sources.</strong></p>

                    <h2>The Strike Water Formula Explained</h2>
                    <p>Understanding the heat balance equation helps you achieve consistent mash temperatures and become a better brewer. Here are the mathematical principles behind the calculator:</p>
                    
                    <div class="formula-box" aria-label="Strike water formulas">
                        <p><strong>General Heat-Balance with Optional Mash Tun Term:</strong><br>
                        <code>T_strike = T_mash + [c_g·m_g·(T_mash-T_g) + c_t·m_t·(T_mash-T_tun)] / (c_w·m_w)</code></p>
                        
                        <p><strong>Simplified Form Using Heat Capacity Ratio (k = c_g/c_w ≈ 0.41):</strong><br>
                        <code>T_strike = T_mash + [k·m_g·(T_mash-T_g) + m_tun_eq·(T_mash-T_tun)] / m_w</code></p>
                        
                        <p><strong>Common Practical Forms (ignoring mash tun):</strong><br>
                        US Units: <code>T_strike = T_mash + (0.20/R_qt/lb)·(T_mash-T_g)</code><br>
                        Metric: <code>T_strike = T_mash + (0.41/R_L/kg)·(T_mash-T_g)</code></p>
                        
                        <p><strong>Where:</strong><br>
                        • T_strike = Strike water temperature<br>
                        • T_mash = Target mash temperature<br>
                        • T_g = Current grain temperature<br>
                        • T_tun = Mash tun temperature<br>
                        • R = Water-to-grain ratio<br>
                        • k = Grain-to-water specific heat ratio (≈ 0.41)</p>
                    </div>

                    <h2>How to Use the Strike Water Calculator</h2>
                    <p>This calculator uses proven heat-balance equations to determine the exact temperature you need to heat your strike water to achieve your target mash temperature.</p>
                    
                    <h3>Step-by-Step Instructions</h3>
                    <ol>
                        <li><strong>Choose Units:</strong> Select US (°F, lb, qt) or Metric (°C, kg, L) based on your equipment and preferences.</li>
                        <li><strong>Grain Weight:</strong> Enter the total weight of your grain bill, including all malts and adjuncts that will go into the mash.</li>
                        <li><strong>Water-to-Grain Ratio:</strong> Enter your desired mash thickness. Typical single-infusion ratios are 1.25–1.75 qt/lb (2.6–3.7 L/kg).</li>
                        <li><strong>Target Mash Temperature:</strong> Enter your desired mash temperature. Common ranges are 148–156°F (64–69°C) for most ales.</li>
                        <li><strong>Current Grain Temperature:</strong> Measure and enter the actual temperature of your grain before mashing.</li>
                        <li><strong>Mash Tun (Optional):</strong> If you don't preheat your mash tun, enter its current temperature and thermal mass for more accurate calculations.</li>
                    </ol>

                    <h3>Understanding Mash Tun Thermal Mass</h3>
                    <p>The thermal mass represents how much heat your mash tun will absorb during dough-in. It's expressed as "water-equivalent" volume:</p>
                    <ul>
                        <li><strong>Preheated tuns:</strong> Set to 0.0 since the tun is already at target temperature</li>
                        <li><strong>Plastic coolers:</strong> Typically 0.5–2.0 qt (0.5–2.0 L) depending on size and wall thickness</li>
                        <li><strong>Stainless steel:</strong> Often lower, around 0.3–1.0 qt (0.3–1.0 L)</li>
                        <li><strong>Aluminum:</strong> Similar to stainless, good heat conductor</li>
                    </ul>

                    <!-- In-Content Ad Placeholder -->
                    <div class="text-center my-6 bg-gray-200 py-10">
                        <p class="text-gray-500">In-Content Ad Unit</p>
                    </div>

                    <h2>Worked Example: Step-by-Step Calculation</h2>
                    <p><strong>Scenario:</strong> 10.0 lb grain at 68°F, targeting 152°F mash temperature, using 1.50 qt/lb ratio, with preheated tun (thermal mass = 0).</p>
                    
                    <div class="formula-box">
                        <p>1. Water volume: m_w = 10.0 × 1.50 = 15.0 qt</p>
                        <p>2. Using US simplified form: T_strike = 152 + (0.20 / 1.50) × (152 - 68)</p>
                        <p>3. Calculate: (0.20 / 1.50) ≈ 0.1333</p>
                        <p>4. Temperature difference: (152 - 68) = 84°F</p>
                        <p>5. Adjustment: 0.1333 × 84 ≈ 11.2°F</p>
                        <p>6. Strike temperature: 152 + 11.2 = 163.2°F</p>
                    </div>
                    
                    <p><strong>With unheated tun:</strong> If your tun is at 60°F with 1.0 qt thermal mass, add: (1.0 × (152 - 60)) / 15.0 ≈ 6.1°F, for a final strike temperature of approximately 169°F.</p>

                    <h2>Understanding Your Results</h2>
                    <p>The calculator provides two key outputs:</p>
                    
                    <ul>
                        <li><strong>Strike Water Temperature:</strong> Heat your water to this temperature immediately before adding to the grain.</li>
                        <li><strong>Strike Water Volume:</strong> The total amount of water needed for your mash at the specified ratio.</li>
                        <li><strong>Assumptions:</strong> Shows the grain-to-water heat capacity ratio used (c_g/c_w = 0.41).</li>
                        <li><strong>Notes:</strong> Provides guidance on timing and technique for best results.</li>
                    </ul>

                    <h2>Tips for Accurate Mash Temperatures</h2>
                    
                    <h3>Before Mashing</h3>
                    <ul>
                        <li><strong>Measure grain temperature accurately</strong> using a reliable thermometer</li>
                        <li><strong>Consider grain storage conditions</strong> - basement-stored grain may be cooler than room temperature</li>
                        <li><strong>Preheat your mash tun</strong> with hot water, then drain before adding strike water</li>
                        <li><strong>Have adjustment water ready</strong> - both hot and cold for temperature corrections</li>
                    </ul>
                    
                    <h3>During Mashing</h3>
                    <ul>
                        <li><strong>Add water gradually</strong> while stirring to avoid hot spots and dough balls</li>
                        <li><strong>Mix thoroughly</strong> to ensure even temperature distribution</li>
                        <li><strong>Check mash temperature</strong> after full incorporation and adjust if needed</li>
                        <li><strong>Cover the mash tun</strong> to minimize heat loss during the rest</li>
                    </ul>

                    <h2>Common Mash Temperature Targets</h2>
                    <p>Different mash temperatures emphasize different enzymes and produce different beer characteristics:</p>
                    
                    <ul>
                        <li><strong>145–150°F (63–66°C):</strong> Beta-amylase favored, produces highly fermentable wort, dry finish</li>
                        <li><strong>150–155°F (66–68°C):</strong> Balanced alpha/beta activity, moderate body and fermentability</li>
                        <li><strong>155–158°F (68–70°C):</strong> Alpha-amylase favored, fuller body, more residual sweetness</li>
                        <li><strong>158°F+ (70°C+):</strong> Primarily alpha-amylase, full body, lower fermentability</li>
                    </ul>

                    <h2>Frequently Asked Questions (FAQ)</h2>
                    <details class="border-b py-2">
                        <summary>What is a typical water-to-grain ratio?</summary>
                        <p class="mt-2 text-gray-700">Most single-infusion mashes use 1.25–1.75 qt/lb (2.6–3.7 L/kg). Thicker mashes (lower ratios) produce more concentrated worts and require slightly higher strike temperatures. Thinner mashes are easier to stir and temperature control.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>Do I need to include mash tun thermal mass?</summary>
                        <p class="mt-2 text-gray-700">Include it if you do not preheat your tun and it's significantly cooler than the target mash temperature. If you preheat or your tun has minimal thermal mass, you can set this to zero.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>How precise should my strike temperature be?</summary>
                        <p class="mt-2 text-gray-700">Within ±1–2°F (±0.5–1.0°C) is typically sufficient for most homebrewing applications. Mash enzymes are quite forgiving within reasonable temperature ranges.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>What if my mash temperature is off target?</summary>
                        <p class="mt-2 text-gray-700">Small adjustments can be made by adding hot or cold water. Calculate the volume needed to shift temperature, but avoid adding more than 10-15% of the original water volume to prevent over-dilution.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>Why are there different constants (0.2 and 0.41) in the formulas?</summary>
                        <p class="mt-2 text-gray-700">They represent the same grain-to-water specific heat ratio expressed in different unit systems. The US form (0.2) includes unit conversion factors for qt/lb ratios, while the metric form (0.41) is the direct dimensionless ratio.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>Is BIAB (Brew in a Bag) different?</summary>
                        <p class="mt-2 text-gray-700">The heat-balance principles are the same, but BIAB often uses thinner mashes (higher water-to-grain ratios), which can result in slightly lower required strike temperatures. The bag itself adds minimal thermal mass.</p>
                    </details>

                    <h2>Troubleshooting Common Issues</h2>
                    
                    <h3>Strike Temperature Seems Too High</h3>
                    <ul>
                        <li>Check that you're using the correct units throughout</li>
                        <li>Verify grain temperature is accurate - cold grain requires hotter water</li>
                        <li>Consider if your mash tun thermal mass setting is too high</li>
                        <li>Ensure your water-to-grain ratio is reasonable (1.25-1.75 qt/lb)</li>
                    </ul>
                    
                    <h3>Mash Temperature Consistently Off</h3>
                    <ul>
                        <li>Calibrate your thermometer in ice water (32°F/0°C) and boiling water</li>
                        <li>Measure grain temperature just before mashing, not hours ahead</li>
                        <li>Consider your mash tun's actual thermal mass if not preheating</li>
                        <li>Account for heat loss during water transfer and mixing</li>
                    </ul>
                </article>
            </main>

            <!-- Right Sidebar: Ads & Related Links -->
            <aside class="w-full lg:w-1/3">
                <div class="sticky top-24">
                    <!-- Ad Placeholder -->
                    <div class="bg-gray-200 h-96 rounded-lg mb-6 flex items-center justify-center">
                        <p class="text-gray-500">Sticky Ad Unit (e.g., 300x600)</p>
                    </div>

                    <!-- Related Calculators -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-4">Related Brewing Tools</h3>
                        <ul class="space-y-3">
                            <li><a href="yeast-pitch-rate.html" class="text-blue-600 hover:underline">Yeast Pitch Rate Calculator</a></li>
                            <li><a href="abv-calculator.html" class="text-blue-600 hover:underline">ABV Calculator</a></li>
                            <li><a href="hydrometer-temperature-correction.html" class="text-blue-600 hover:underline">Hydrometer Temperature Correction</a></li>
                            <li><a href="priming-sugar-calculator.html" class="text-blue-600 hover:underline">Priming Sugar Calculator</a></li>
                            <li><a href="ibu-calculator.html" class="text-blue-600 hover:underline">IBU Calculator</a></li>
                            <li><a href="srm-color-calculator.html" class="text-blue-600 hover:underline">SRM Color Calculator</a></li>
                        </ul>
                    </div>
                </div>
            </aside>

        </div>
    </div>
    
    <!-- Footer -->
    <footer class="bg-white border-t mt-12">
        <div class="container mx-auto px-6 py-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h4 class="font-bold text-lg mb-4">CalcDomain</h4>
                    <p class="text-gray-600">High-precision tools for professionals and everyday use.</p>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">Brewing Tools</h4>
                    <ul class="space-y-2 text-gray-600">
                        <li><a href="#" class="hover:text-blue-600">Strike Water Calculator</a></li>
                        <li><a href="#" class="hover:text-blue-600">Yeast Pitch Rate</a></li>
                        <li><a href="#" class="hover:text-blue-600">ABV Calculator</a></li>
                        <li><a href="#" class="hover:text-blue-600">IBU Calculator</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">Categories</h4>
                    <ul class="space-y-2 text-gray-600">
                        <li><a href="#" class="hover:text-blue-600">Finance</a></li>
                        <li><a href="#" class="hover:text-blue-600">Health & Fitness</a></li>
                        <li><a href="#" class="hover:text-blue-600">Science</a></li>
                        <li><a href="#" class="hover:text-blue-600">Math</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">Company</h4>
                    <ul class="space-y-2 text-gray-600">
                        <li><a href="#" class="hover:text-blue-600">About Us</a></li>
                        <li><a href="#" class="hover:text-blue-600">Contact</a></li>
                        <li><a href="#" class="hover:text-blue-600">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="text-center text-gray-600 mt-8 pt-8 border-t">
                <p>Tool developed by <strong>Ugo Candido</strong>. Content verified by <strong>CalcDomain Brewing Science Team</strong>.</p>
                <p>Last reviewed for accuracy on: <time datetime="2025-09-12">September 12, 2025</time></p>
                <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // --- Strike Water Temperature Calculator Logic ---
        
        // Get references to all HTML elements
        const elements = {
            unitsUs: document.getElementById('units-us'),
            unitsMetric: document.getElementById('units-metric'),
            grainWeight: document.getElementById('grainWeight'),
            ratio: document.getElementById('ratio'),
            targetTemp: document.getElementById('targetTemp'),
            grainTemp: document.getElementById('grainTemp'),
            tunTemp: document.getElementById('tunTemp'),
            tunMass: document.getElementById('tunMass'),
            resetBtn: document.getElementById('resetBtn'),
            
            // Results
            strikeTempOut: document.getElementById('strikeTempOut'),
            strikeTempUnit: document.getElementById('strikeTempUnit'),
            waterVolOut: document.getElementById('waterVolOut'),
            waterVolUnit: document.getElementById('waterVolUnit'),
            assumptionOut: document.getElementById('assumptionOut'),
            notesOut: document.getElementById('notesOut'),
            
            // Units
            grainWeightUnit: document.getElementById('grainWeightUnit'),
            ratioUnit: document.getElementById('ratioUnit'),
            targetTempUnit: document.getElementById('targetTempUnit'),
            grainTempUnit: document.getElementById('grainTempUnit'),
            tunTempUnit: document.getElementById('tunTempUnit'),
            tunMassUnit: document.getElementById('tunMassUnit')
        };

        // Helper functions
        const clamp = (v, min, max) => Math.min(Math.max(v, min), max);
        const toNum = v => {
            const n = typeof v === 'number' ? v : parseFloat(String(v).replace(',', '.'));
            return Number.isFinite(n) ? n : NaN;
        };
        const fToC = f => (f - 32) * 5/9;
        const cToF = c => (c * 9/5) + 32;
        const qtToL = qt => qt * 0.946352946;
        const lToQt = l => l / 0.946352946;
        const lbToKg = lb => lb * 0.45359237;
        const kgToLb = kg => kg / 0.45359237;

        // Unit state
        let units = 'us'; // 'us' or 'metric'

        // Defaults for each unit system
        const defaults = {
            us: { grainWeight: 10, ratio: 1.5, targetTemp: 152, grainTemp: 68, tunTemp: 68, tunMass: 0 },
            metric: { grainWeight: 4.54, ratio: 3.1, targetTemp: 67, grainTemp: 20, tunTemp: 20, tunMass: 0 }
        };

        // Tooltip functionality
        function setupTooltips() {
            const tooltipButtons = document.querySelectorAll('.tooltip-btn');
            tooltipButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.getAttribute('aria-controls');
                    const panel = document.getElementById(id);
                    const isOpen = panel.getAttribute('data-open') === 'true';
                    panel.setAttribute('data-open', String(!isOpen));
                    btn.setAttribute('aria-expanded', String(!isOpen));
                });
            });
        }

        // Validation functions
        function validate() {
            let ok = true;
            const errorElements = {
                grainWeight: document.getElementById('grainWeightError'),
                ratio: document.getElementById('ratioError'),
                targetTemp: document.getElementById('targetTempError'),
                grainTemp: document.getElementById('grainTempError')
            };

            // Clear previous errors
            Object.values(errorElements).forEach(e => { e.textContent = ''; });

            // Grain weight
            const gw = toNum(elements.grainWeight.value);
            if (!Number.isFinite(gw) || gw <= 0) {
                errorElements.grainWeight.textContent = 'Enter a positive grain weight (e.g., 10).';
                elements.grainWeight.setAttribute('aria-invalid', 'true');
                ok = false;
            } else {
                elements.grainWeight.setAttribute('aria-invalid', 'false');
            }

            // Ratio
            const r = toNum(elements.ratio.value);
            if (!Number.isFinite(r) || r <= 0) {
                errorElements.ratio.textContent = 'Enter a positive mash ratio (e.g., 1.5 qt/lb or 3.1 L/kg).';
                elements.ratio.setAttribute('aria-invalid', 'true');
                ok = false;
            } else if (r < (units === 'us' ? 0.75 : 1.5) || r > (units === 'us' ? 2.5 : 5.0)) {
                errorElements.ratio.textContent = 'Note: This ratio is uncommon. Typical is 1.25–1.75 qt/lb (2.6–3.7 L/kg).';
                elements.ratio.setAttribute('aria-invalid', 'false');
            } else {
                elements.ratio.setAttribute('aria-invalid', 'false');
            }

            // Temperatures
            const tMash = toNum(elements.targetTemp.value);
            const tGrain = toNum(elements.grainTemp.value);

            if (!Number.isFinite(tMash)) {
                errorElements.targetTemp.textContent = 'Enter a valid target mash temperature.';
                elements.targetTemp.setAttribute('aria-invalid', 'true');
                ok = false;
            } else {
                const [min, max] = units === 'us' ? [120, 170] : [49, 77];
                if (tMash < min || tMash > max) {
                    errorElements.targetTemp.textContent = `Unusual target. Typical range: ${min}–${max} ${units === 'us' ? '°F' : '°C'}.`;
                }
                elements.targetTemp.setAttribute('aria-invalid', 'false');
            }

            if (!Number.isFinite(tGrain)) {
                errorElements.grainTemp.textContent = 'Enter a valid grain temperature.';
                elements.grainTemp.setAttribute('aria-invalid', 'true');
                ok = false;
            } else {
                elements.grainTemp.setAttribute('aria-invalid', 'false');
            }

            return ok;
        }

        // Core calculation
        function compute() {
            if (!validate()) return null;

            // Gather inputs and convert to metric for core math
            const isUS = units === 'us';

            let gw_user = toNum(elements.grainWeight.value);
            let ratio_user = toNum(elements.ratio.value);
            let tMash_user = toNum(elements.targetTemp.value);
            let tGrain_user = toNum(elements.grainTemp.value);
            let tTun_user = toNum(elements.tunTemp.value);
            let tunMass_user = toNum(elements.tunMass.value);

            // Default optional values if empty
            if (!Number.isFinite(tTun_user)) tTun_user = tGrain_user;
            if (!Number.isFinite(tunMass_user) || tunMass_user < 0) tunMass_user = 0;

            // Convert everything to metric (kg, L, °C)
            const m_g = isUS ? lbToKg(gw_user) : gw_user;
            const R_Lkg = isUS ? (ratio_user * (0.946352946/0.45359237)) : ratio_user;
            const T_m = isUS ? fToC(tMash_user) : tMash_user;
            const T_g = isUS ? fToC(tGrain_user) : tGrain_user;
            const T_tun = isUS ? fToC(tTun_user) : tTun_user;
            const m_tun_eq = isUS ? qtToL(tunMass_user) : tunMass_user;

            // Derived masses
            const m_w = R_Lkg * m_g; // kg ≈ L
            const k = 0.41; // c_g / c_w dimensionless

            // Strike temp in °C using water-equivalent tun term
            const numerator = (k * m_g * (T_m - T_g)) + (m_tun_eq * (T_m - T_tun));
            const T_strike_C = T_m + (numerator / Math.max(m_w, 1e-9));

            // Volumes for output
            const Vw_L = m_w;
            const Vw_qt = lToQt(Vw_L);

            // Output temps in current unit
            const T_strike_out = isUS ? cToF(T_strike_C) : T_strike_C;
            const waterVol_out = isUS ? Vw_qt : Vw_L;

            return {
                T_strike_out,
                waterVol_out,
                k,
                isUS
            };
        }

        // Update display
        function computeAndRender() {
            const res = compute();
            if (!res) {
                elements.strikeTempOut.textContent = '—';
                elements.waterVolOut.textContent = '—';
                return;
            }

            const { T_strike_out, waterVol_out, k, isUS } = res;

            // Round nicely
            const t = Math.round(T_strike_out * 10) / 10;
            const v = Math.round(waterVol_out * 100) / 100;

            elements.strikeTempOut.textContent = isFinite(t) ? t.toFixed(1) : '—';
            elements.waterVolOut.textContent = isFinite(v) ? v.toFixed(2) : '—';
            elements.assumptionOut.textContent = `c_g/c_w = ${k}`;

            // Note if strike temp seems extreme
            const limit = units === 'us' ? {min: 130, max: 185} : {min: 54, max: 85};
            if (t < limit.min || t > limit.max) {
                elements.notesOut.textContent = 'Extreme strike temperature. Re-check inputs (ratio, grain/tun temps) or preheat the tun.';
            } else {
                elements.notesOut.textContent = 'Use immediately after heating for best accuracy.';
            }
        }

        // Set units and update interface
        function setUnits(newUnits) {
            units = newUnits;
            
            // Update unit displays
            elements.grainWeightUnit.textContent = units === 'us' ? 'lb' : 'kg';
            elements.ratioUnit.textContent = units === 'us' ? 'qt/lb' : 'L/kg';
            elements.targetTempUnit.textContent = units === 'us' ? '°F' : '°C';
            elements.grainTempUnit.textContent = units === 'us' ? '°F' : '°C';
            elements.tunTempUnit.textContent = units === 'us' ? '°F' : '°C';
            elements.tunMassUnit.textContent = units === 'us' ? 'qt' : 'L';
            elements.strikeTempUnit.textContent = units === 'us' ? '°F' : '°C';
            elements.waterVolUnit.textContent = units === 'us' ? 'qt' : 'L';

            // Load defaults appropriate to units
            const d = defaults[units];
            elements.grainWeight.value = d.grainWeight;
            elements.ratio.value = d.ratio;
            elements.targetTemp.value = d.targetTemp;
            elements.grainTemp.value = d.grainTemp;
            elements.tunTemp.value = d.tunTemp;
            elements.tunMass.value = d.tunMass;

            // Clear errors and compute
            const errorElements = ['grainWeightError', 'ratioError', 'targetTempError', 'grainTempError'];
            errorElements.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.textContent = '';
            });
            
            [elements.grainWeight, elements.ratio, elements.targetTemp, elements.grainTemp].forEach(i => 
                i.setAttribute('aria-invalid', 'false'));
            
            computeAndRender();
        }

        // Event listeners
        function setupEventListeners() {
            // Unit radio buttons
            [elements.unitsUs, elements.unitsMetric].forEach(r => {
                r.addEventListener('change', (e) => {
                    const val = e.target.value === 'metric' ? 'metric' : 'us';
                    setUnits(val);
                });
            });

            // Input fields
            const inputFields = [elements.grainWeight, elements.ratio, elements.targetTemp, elements.grainTemp, elements.tunTemp, elements.tunMass];
            inputFields.forEach(input => {
                input.addEventListener('blur', computeAndRender);
                input.addEventListener('input', () => {
                    // Provide responsive feedback without being intrusive
                    setTimeout(computeAndRender, 100);
                });
            });

            // Reset button
            elements.resetBtn.addEventListener('click', () => setUnits(units));
        }

        // Initialize the calculator
        function init() {
            setupTooltips();
            setupEventListeners();
            setUnits('us'); // This also calls computeAndRender()
        }

        // Run when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<link rel="canonical" href="https://calcdomain.com/bolt-torque.html">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scientific Calculator</title>
<meta name="description" content="A powerful, free, and accessible online scientific calculator. Performs advanced calculations, trigonometry, logarithms, and more with full WCAG AA compliance.">
<meta name="author" content="Ugo Candido">


<script src="https://cdn.tailwindcss.com"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.prose table { width: 100%; border-collapse: collapse; margin-bottom: 1rem; }
.prose th, .prose td { border: 1px solid #d1d5db; padding: 0.5rem; text-align: left; }
.prose th { background-color: #f3f4f6; }
.prose code { background-color: #f3f4f6; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }

/* Calculator-specific styles */
.calc-btn {
@apply text-xl font-medium rounded-lg h-14 w-full flex items-center justify-center transition-all;
/* WCAG 2.1: min-height 48px, h-14 is 56px */
@apply focus:outline-none focus:ring-4 focus:ring-blue-400 focus:ring-opacity-75 z-10;
}
.calc-btn-num { @apply bg-gray-100 text-gray-900 hover:bg-gray-200; }
.calc-btn-op { @apply bg-blue-600 text-white hover:bg-blue-700; }
.calc-btn-func { @apply bg-gray-300 text-gray-900 hover:bg-gray-400; }
.calc-btn-sci { @apply bg-gray-700 text-gray-100 hover:bg-gray-600; }

.mode-btn {
@apply px-4 py-1 rounded-md text-sm font-medium text-gray-300;
@apply focus:outline-none focus:ring-2 focus:ring-blue-400 z-10;
}
.mode-btn[aria-checked="true"] { @apply bg-blue-600 text-white; }
</style>

<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Scientific Calculator",
  "description": "A powerful, free, and accessible online scientific calculator for advanced math, trigonometry, and logarithms.",
  "url": "https://calcdomain.com/scientific-calculator.html",
  "inLanguage": "en",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  }
}</script>
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Math & Conversions",
      "item": "https://calcdomain.com/math-conversions.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Scientific Calculator",
      "item": "https://calcdomain.com/scientific-calculator.html"
    }
  ]
}</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "HowTo",
"name": "How to Use the Scientific Calculator",
"description": "A step-by-step guide to performing advanced calculations.",
"step": [
{"@type": "HowToStep", "name": "Select Mode", "text": "Choose 'Rad' (Radians) or 'Deg' (Degrees) based on your calculation needs."},
{"@type": "HowToStep", "name": "Enter Expression", "text": "Use the buttons or your keyboard to type in the mathematical expression. Use 'sin(', 'log(', 'ln(', etc., for functions."},
{"@type": "HowToStep", "name": "Use Constants", "text": "Use the 'π' and 'e' buttons to insert their respective values."},
{"@type": "HowToStep", "name": "Calculate", "text": "Press the '=' button or the 'Enter' key to evaluate the expression."},
{"@type": "HowToStep", "name": "Review Result", "text": "The result is displayed in the main display. 'Ans' can be used to recall the last result in a new expression."}
]
}
</script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>
<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
Categories
</div>
<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
</button>
</div>
<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
Categories
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
<a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="math.html" class="hover:text-blue-600">Math</a> &raquo;
General &raquo;
<span class="text-gray-900">Scientific Calculator</span>
</nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Scientific Calculator</h1>
<p class="text-gray-600 mb-6">This high-precision scientific calculator provides a comprehensive set of mathematical functions to solve complex problems in science, engineering, and mathematics. It's designed for students and professionals, offering an intuitive, accessible, and mobile-first interface for everything from basic arithmetic to advanced trigonometry and calculus.</p>

<section id="calculator-app" class="my-6 border rounded-lg p-4 bg-gray-900 shadow-inner" role="application" aria-label="Scientific Calculator">
    
    <div id="results" class="mb-4" style="min-height: 104px;">
        <label for="expression" class="sr-only">Expression</label>
        <input type="text" id="expression" readonly
               class="w-full text-right bg-gray-900 border-0 text-gray-400 text-2xl p-2 truncate" 
               aria-live="polite" placeholder="Enter expression">
        
        <label for="result" class="sr-only">Result</label>
        <input type="text" id="result" readonly 
               class="w-full text-right bg-gray-900 border-0 text-white text-5xl font-bold p-2" 
               aria-live="polite" value="0">
    </div>

    <div class="flex justify-start items-center mb-4">
        <fieldset role="radiogroup" aria-labelledby="mode-label">
            <legend id="mode-label" class="sr-only">Angle Mode</legend>
            <div class="flex rounded-md bg-gray-700 p-1">
                <button id="rad-mode" type="button" role="radio" aria-checked="true" class="mode-btn">Rad</button>
                <button id="deg-mode" type="button" role="radio" aria-checked="false" class="mode-btn">Deg</button>
            </div>
        </fieldset>
    </div>

    <div id="button-grid" class="grid grid-cols-5 gap-2">
        <button type="button" class="calc-btn calc-btn-sci" data-key="sin">sin</button>
        <button type="button" class="calc-btn calc-btn-sci" data-key="cos">cos</button>
        <button type="button" class="calc-btn calc-btn-sci" data-key="tan">tan</button>
        <button type="button" class="calc-btn calc-btn-func" data-key="(">(</button>
        <button type="button" class="calc-btn calc-btn-func" data-key=")">)</button>
        
        <button type="button" class="calc-btn calc-btn-sci" data-key="asin">sin⁻¹</button>
        <button type="button" class="calc-btn calc-btn-sci" data-key="acos">cos⁻¹</button>
        <button type="button" class="calc-btn calc-btn-sci" data-key="atan">tan⁻¹</button>
        <button type="button" class="calc-btn calc-btn-func" data-key="AC">AC</button>
        <button type="button" class="calc-btn calc-btn-func" data-key="DEL">DEL</button>
        
        <button type="button" class="calc-btn calc-btn-sci" data-key="ln">ln</button>
        <button type="button" class="calc-btn calc-btn-sci" data-key="log">log</button>
        <button type="button" class="calc-btn calc-btn-num" data-key="7">7</button>
        <button type="button" class="calc-btn calc-btn-num" data-key="8">8</button>
        <button type="button" class="calc-btn calc-btn-num" data-key="9">9</button>
        
        <button type="button" class="calc-btn calc-btn-sci" data-key="e">e</button>
        <button type="button" class="calc-btn calc-btn-sci" data-key="π">π</button>
        <button type="button" class="calc-btn calc-btn-num" data-key="4">4</button>
        <button type="button" class="calc-btn calc-btn-num" data-key="5">5</button>
        <button type="button" class="calc-btn calc-btn-num" data-key="6">6</button>
        
        <button type="button" class="calc-btn calc-btn-sci" data-key="sqrt">√</button>
        <button type="button" class="calc-btn calc-btn-sci" data-key="**">xʸ</button>
        <button type="button" class="calc-btn calc-btn-num" data-key="1">1</button>
        <button type="button" class="calc-btn calc-btn-num" data-key="2">2</button>
        <button type="button" class="calc-btn calc-btn-num" data-key="3">3</button>

        <button type="button" class="calc-btn calc-btn-sci" data-key="!">n!</button>
        <button type="button" class="calc-btn calc-btn-sci" data-key="Ans">Ans</button>
        <button type="button" class="calc-btn calc-btn-num" data-key="0">0</button>
        <button type="button" class="calc-btn calc-btn-num" data-key=".">.</button>
        <button type="button" class="calc-btn calc-btn-op" data-key="=">=</button>
        
        <button type="button" class="calc-btn calc-btn-op" data-key="/">÷</button>
        <button type="button" class="calc-btn calc-btn-op" data-key="*">×</button>
        <button type="button" class="calc-btn calc-btn-op" data-key="-">−</button>
        <button type="button" class="calc-btn calc-btn-op col-span-2" data-key="+">+</button>
    </div>
</section>
<article class="bg-white rounded-lg mt-8 prose prose-lg">
    
    <h2>Authoritative Source &amp; Methodology</h2>
    <p>This calculator operates based on the fundamental, universally accepted rules of mathematics, including the **Order of Operations** (also known as PEMDAS or BODMAS). All calculations are processed locally in your browser for maximum speed and privacy—no data is sent to a server.</p>
    <ul>
        <li>**Order of Operations:** The calculator correctly evaluates expressions by prioritizing Parentheses, Exponents, Multiplication/Division, and Addition/Subtraction.</li>
        <li>**Numerical Precision:** Functions are computed using the standard JavaScript <code>Math</code> library, which adheres to the IEEE 754 standard for 64-bit double-precision floating-point arithmetic.</li>
        <li>**Trigonometric Mode:** Users can switch between **Radians (Rad)** and **Degrees (Deg)**. All trigonometric functions (sin, cos, tan, etc.) respect the currently selected mode.</li>
    </ul>
    <p>All calculations are based strictly on these established mathematical principles.</p>

    <h2>The Formulas Explained</h2>
    <p>This calculator can solve a wide variety of mathematical expressions. Below are some of the core formulas and identities it utilizes.</p>

    <h3>Trigonometry (Degrees/Radians)</h3>
    <p>Trigonometric functions relate the angles of a triangle to the lengths of its sides. The calculator supports sine (<code>sin</code>), cosine (<code>cos</code>), and tangent (<code>tan</code>), as well as their inverses (<code>asin</code>, <code>acos</code>, <code>atan</code>).</p>
    <p>The fundamental Pythagorean identity is:
    $$ \sin^2(x) + \cos^2(x) = 1 $$
    And the relationship for tangent is:
    $$ \tan(x) = \frac{\sin(x)}{\cos(x)} $$
    </p>

    <h3>Logarithms (Natural and Base 10)</h3>
    <p>A logarithm is the exponent to which a base must be raised to produce a given number.</p>
    <ul>
        <li><strong>Common Logarithm (<code>log</code>):</strong> This is the base-10 logarithm. It answers the question: $10^y = x$.</li>
        <li><strong>Natural Logarithm (<code>ln</code>):</strong> This is the base-$e$ (Euler's number) logarithm. It answers the question: $e^y = x$.</li>
    </ul>
    <p>Logarithms have a key property used in simplifying equations:
    $$ \log_b(x \cdot y) = \log_b(x) + \log_b(y) $$
    </p>

    <h2>Glossary of Calculator Functions</h2>
    <p>Each button corresponds to a specific mathematical operation or constant.</p>
    <table>
        <thead>
            <tr>
                <th>Button / Key</th>
                <th>Function</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>sin</code>, <code>cos</code>, <code>tan</code></td>
                <td>Trigonometry</td>
                <td>Calculates the sine, cosine, or tangent of a value (in Rad or Deg).</td>
            </tr>
            <tr>
                <td><code>asin</code>, <code>acos</code>, <code>atan</code></td>
                <td>Inverse Trigonometry</td>
                <td>Calculates the arcsin, arccos, or arctan (inverse) of a value.</td>
            </tr>
            <tr>
                <td><code>ln</code></td>
                <td>Natural Logarithm</td>
                <td>Calculates the logarithm to the base $e$.</td>
            </tr>
            <tr>
                <td><code>log</code></td>
                <td>Common Logarithm</td>
                <td>Calculates the logarithm to the base 10.</td>
            </tr>
            <tr>
                <td><code>√</code> (sqrt)</td>
                <td>Square Root</td>
                <td>Finds the square root of the following number or expression.</td>
            </tr>
            <tr>
                <td><code>xʸ</code> (**)</td>
                <td>Exponent</td>
                <td>Raises the preceding number to the power of the following number.</td>
            </tr>
            <tr>
                <td><code>n!</code> (factorial)</td>
                <td>Factorial</td>
                <td>Calculates the factorial of a non-negative integer. $5! = 5 \times 4 \times 3 \times 2 \times 1$.</td>
            </tr>
            <tr>
                <td><code>e</code></td>
                <td>Euler's Number</td>
                <td>Inserts the constant $e$ (approx. 2.71828).</td>
            </tr>
            <tr>
                <td><code>π</code></td>
                <td>Pi</td>
                <td>Inserts the constant $π$ (approx. 3.14159).</td>
            </tr>
            <tr>
                <td><code>Ans</code></td>
                <td>Last Answer</td>
                <td>Inserts the result of the previous calculation.</td>
            </tr>
        </tbody>
    </table>

    <h2>How It Works: A Step-by-Step Example</h2>
    <p>Let's calculate the value of a sample expression: <strong><code>log(100) + sin(45)</code></strong>, assuming we are in **Degree** mode.</p>
    <ol>
        <li><strong>Set Mode:</strong> First, ensure the calculator is in the correct mode. Click the <strong>'Deg'</strong> button. It should highlight.</li>
        <li><strong>Enter First Term:</strong> Press the <code>log</code> button, then <code>1</code>, <code>0</code>, <code>0</code>, and <code>)</code>. The display shows <code>log(100)</code>.</li>
        <li><strong>Enter Operator:</strong> Press the <code>+</code> button.</li>
        <li><strong>Enter Second Term:</strong> Press the <code>sin</code> button, then <code>4</code>, <code>5</code>, and <code>)</code>. The full expression is now <code>log(100)+sin(45)</code>.</li>
        <li><strong>Calculate:</strong> Press the <strong><code>=</code></strong> button.
            <ul>
                <li>The calculator first evaluates <code>log(100)</code>, which is $2$.</li>
                <li>It then evaluates <code>sin(45)</code> in degree mode, which is $\frac{\sqrt{2}}{2} \approx 0.7071$.</li>
                <li>Finally, it adds the two results: $2 + 0.7071$.</li>
            </ul>
        </li>
        <li><strong>Final Result:</strong> The main display will show the final answer: <strong><code>2.707106...</code></strong></li>
    </ol>

    <h2>Frequently Asked Questions (FAQ)</h2>
    <details>
        <summary>What is the difference between 'log' and 'ln'?</summary>
        <p><strong><code>log</code></strong> (Common Logarithm) is base 10. It's typically used in fields like chemistry (pH) and engineering (decibels). <strong><code>ln</code></strong> (Natural Logarithm) is base $e$ (Euler's number, ~2.718). It is essential in calculus, physics, and finance for modeling continuous growth.</p>
    </details>
    <details>
        <summary>How do I switch between degrees and radians?</summary>
        <p>Use the <strong>'Rad'</strong> and <strong>'Deg'</strong> toggle buttons located above the keypad. The highlighted button indicates the active mode. All trigonometric calculations will use this setting. Remember that $180 \text{ degrees} = \pi \text{ radians}$.</p>
    </details>
    <details>
        <summary>How do I use the '!' (factorial) function?</summary>
        <p>The factorial function (<code>n!</code>) calculates the product of all positive integers less than or equal to <code>n</code>. For example, to calculate $5!$, you would enter <code>5</code> then press the <code>!</code> button, followed by <code>=</code>. The calculator will return $120$. This function is only defined for non-negative integers.</p>
    </details>
    <details>
        <summary>Why do I get a 'Syntax Error' or 'Error'?</summary>
        <p>An 'Error' message typically appears for one of these reasons:
            <ul>
                <li><strong>Invalid Syntax:</strong> Unmatched parentheses, like <code>(5+2</code>, or misplaced operators, like <code>5 * / 2</code>.</li>
                <li><strong>Undefined Value:</strong> A mathematically impossible operation, such as dividing by zero (<code>1/0</code>) or taking the natural log of a negative number (<code>ln(-5)</code>).</li>
            </ul>
            Check your expression for typos and ensure it's mathematically valid.
        </p>
    </details>
    <details>
        <summary>Can I use my keyboard to type?</summary>
        <p>Yes. This calculator is fully keyboard-accessible. You can type numbers and operators (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>(</code>, <code>)</code>) directly. Press <strong>'Enter'</strong> to calculate and <strong>'Backspace'</strong> to delete.</p>
    </details>

    <div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
        <p><strong>Tool developed by Ugo Candido.</strong> Mathematical functions and content verified by the CalcDomain Editorial Board.<br>
        Last accuracy review: <time datetime="2025-11-03">November 3, 2025</time></p>
    </div>
</article>

</div>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
    <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
        Ad Placement (300×600)
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
        <h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
        <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
            <li>Fully WCAG 2.1 AA accessible with keyboard navigation.</li>
            <li>Mobile-first design works perfectly on any device.</li>
            <li>Handles complex expressions with correct order of operations.</li>
            <li>Switch between degrees and radians instantly.</li>
        </ul>
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
        <h3 class="font-bold text-lg mb-4">Related Math Tools</h3>
        <ul class="space-y-3 text-sm">
            <li><a href="percentage-calculator.html" class="text-blue-600 hover:underline">Percentage Calculator</a></li>
            <li><a href="fraction.html" class="text-blue-600 hover:underline">Fraction Calculator</a></li>
            <li><a href="quadratic-formula.html" class="text-blue-600 hover:underline">Quadratic Formula Calculator</a></li>
            <li><a href="statistics.html" class="text-blue-600 hover:underline">Statistics Calculator</a></li>
        </ul>
    </div>
</div>
</aside>

</div>
</main>

<footer class="bg-white border-t">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="about.html" class="hover:text-blue-600">About</a>
<a href="contact.html" class="hover:text-blue-600">Contact</a>
<a href="privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="terms.html" class_ "hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script defer>
document.addEventListener('DOMContentLoaded', () => {
    // DOM Elements
    const display = document.getElementById('expression');
    const resultDisplay = document.getElementById('result');
    const buttonGrid = document.getElementById('button-grid');
    const radModeBtn = document.getElementById('rad-mode');
    const degModeBtn = document.getElementById('deg-mode');

    // State
    let isRadian = true;
    let lastAnswer = 0;
    let memory = 0; // Placeholder for M+ etc. if extended

    // --- Math Helper Functions ---
    
    const degToRad = (d) => (d * Math.PI) / 180;
    const radToDeg = (r) => (r * 180) / Math.PI;

    // Custom math functions that respect Rad/Deg mode
    const math = Math; // Preserve original Math object
    const sin = (val) => isRadian ? math.sin(val) : math.sin(degToRad(val));
    const cos = (val) => isRadian ? math.cos(val) : math.cos(degToRad(val));
    const tan = (val) => isRadian ? math.tan(val) : math.tan(degToRad(val));
    
    // Inverse functions must return in the correct mode
    const asin = (val) => isRadian ? math.asin(val) : radToDeg(math.asin(val));
    const acos = (val) => isRadian ? math.acos(val) : radToDeg(math.acos(val));
    const atan = (val) => isRadian ? math.atan(val) : radToDeg(math.atan(val));

    const factorial = (n) => {
        if (n < 0 || n % 1 !== 0) return NaN; // Factorial is for non-negative integers
        if (n === 0 || n === 1) return 1;
        let result = 1;
        for (let i = n; i > 1; i--) {
            result *= i;
        }
        return result;
    };

    // --- Event Handlers ---

    function handleButtonPress(e) {
        const target = e.target.closest('button');
        if (!target) return;
        
        const key = target.dataset.key;
        
        // Handle mode toggles
        if (target.id === 'rad-mode') {
            setMode(true);
            return;
        }
        if (target.id === 'deg-mode') {
            setMode(false);
            return;
        }
        
        // Prevent focus ring from sticking after click
        target.blur();
        
        processInput(key);
    }

    function handleKeyPress(e) {
        // Allow typing
        if (e.key.match(/^[0-9\.+\-*/()]$/)) {
            e.preventDefault();
            processInput(e.key);
        }
        if (e.key === 'Enter') {
            e.preventDefault();
            processInput('=');
        }
        if (e.key === 'Backspace') {
            e.preventDefault();
            processInput('DEL');
        }
    }

    function setMode(isRad) {
        isRadian = isRad;
        radModeBtn.setAttribute('aria-checked', isRad);
        degModeBtn.setAttribute('aria-checked', !isRad);
    }
    
    function processInput(key) {
        const currentExpression = display.value;

        switch(key) {
            case '=':
                calculate();
                break;
            case 'AC':
                display.value = '';
                resultDisplay.value = '0';
                break;
            case 'DEL':
                display.value = currentExpression.slice(0, -1);
                break;
            case 'Ans':
                display.value += lastAnswer;
                break;
            // Functions
            case 'sin':
            case 'cos':
            case 'tan':
            case 'asin':
            case 'acos':
            case 'atan':
            case 'log':
            case 'ln':
            case 'sqrt':
                display.value += `${key}(`;
                break;
            case '!':
                display.value += `factorial(`;
                break;
            case 'π':
                display.value += 'Math.PI';
                break;
            case 'e':
                display.value += 'Math.E';
                break;
            // Default: append key
            default:
                display.value += key;
        }
    }
    
    function calculate() {
        let expr = display.value;
        if (!expr) {
            resultDisplay.value = '0';
            return;
        }

        try {
            // Sanitize and prepare expression for safe evaluation
            expr = expr
                .replace(/π/g, 'Math.PI') // Already handled by button, but good for keyboard
                .replace(/e/g, 'Math.E')
                .replace(/log\(/g, 'math.log10(')
                .replace(/ln\(/g, 'math.log(')
                .replace(/sqrt\(/g, 'math.sqrt(');
            
            // Use new Function for safer evaluation than eval()
            // We pass our custom, mode-aware functions into its scope
            const fn = new Function('math', 'sin', 'cos', 'tan', 'asin', 'acos', 'atan', 'factorial', `return ${expr}`);
            
            const result = fn(math, sin, cos, tan, asin, acos, atan, factorial);
            
            if (isNaN(result) || !isFinite(result)) {
                resultDisplay.value = 'Error';
            } else {
                // Round to a reasonable number of decimals to avoid floating point noise
                const roundedResult = Number(result.toPrecision(15));
                resultDisplay.value = roundedResult;
                lastAnswer = roundedResult;
            }
        } catch (e) {
            console.error(e);
            resultDisplay.value = 'Syntax Error';
        }
    }
    
    // --- Attach Listeners ---
    buttonGrid.addEventListener('click', handleButtonPress);
    radModeBtn.addEventListener('click', handleButtonPress);
    degModeBtn.addEventListener('click', handleButtonPress);
    document.addEventListener('keydown', handleKeyPress);
    
    // Mobile menu toggle (from template)
    const menuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    if(menuToggle) {
        menuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
    }
});
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<link rel="canonical" href="https://calcdomain.com/arc-length-calculator">





<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Arc Length Calculator — Circle & Function (with LaTeX)</title>
<meta name="description" content="Professional arc length calculator for geometry and calculus. Compute circular arc length, chord, sector area; or arc length of y=f(x) with numeric integration. Accessible, mobile-first, and E-E-A-T optimized." />


<!-- Icons (optional placeholders for consistency with your template) -->
<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg" />
<link rel="shortcut icon" href="https://calcdomain.com/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png" />
<link rel="manifest" href="https://calcdomain.com/site.webmanifest" />

<!-- Tailwind (CDN for speed of development; can be inlined/purged in production) -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- MathJax for LaTeX formulas -->
<script defer id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
  :root{
    --focus: #2563eb;
  }
  body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji"; }
  .prose { max-width: 70ch; }
  .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: .75rem; }
  .prose h3 { font-size: 1.125rem; font-weight: 700; margin-top: 1.25rem; margin-bottom: .5rem; }
  .formula-box{
    background:#f3f4f6; border:1px solid #d1d5db; border-radius:10px; padding:1rem; overflow:auto;
    font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
  }
  /* Accessible focus */
  :focus-visible { outline: 3px solid var(--focus); outline-offset: 2px; border-radius: 6px; }
  /* Avoid CLS in results */
  #results-wrapper { min-height: 12rem; }
  /* Tooltip bubble */
  .tooltip-panel { display:none; }
  .tooltip-panel[aria-hidden="false"]{ display:block; }
  /* Touch targets */
  .btn, button, .tab-btn { min-height: 48px; min-width: 48px; }
  /* Print */
  @media print {
    header, nav[aria-label="Breadcrumb"], aside, .no-print { display:none !important; }
    main { padding: 0 !important; }
    #print-section { position: static; }
  }
</style>

<!-- JSON-LD: WebPage -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"WebPage",
  "name":"Arc Length Calculator",
  "url":"https://calcdomain.com/arc-length-calculator",
  "description":"Compute circular arc length (with chord and sector area) or the arc length of y=f(x) using numerical integration. Accessible, mobile-first design for students and professionals.",
  "inLanguage":"en",
  "author":{"@type":"Person","name":"Ugo Candido"},
  "publisher":{"@type":"Organization","name":"CalcDomain"}
}
</script>

<!-- JSON-LD: Breadcrumbs -->
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Math & Conversions",
      "item": "https://calcdomain.com/math-conversions"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "subcategories/geometry",
      "item": "https://calcdomain.com/subcategories/geometry"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Arc Length Calculator",
      "item": "https://calcdomain.com/arc-length-calculator"
    }
  ]
}</script>

<!-- JSON-LD: HowTo -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"HowTo",
  "name":"How to calculate arc length",
  "description":"Steps for circle arc length and function arc length.",
  "step":[
    {"@type":"HowToStep","name":"Choose mode","text":"Select Circle or Function mode depending on your problem."},
    {"@type":"HowToStep","name":"Enter inputs","text":"For Circle, provide radius/diameter and central angle with unit. For Function, enter y=f(x) and interval [a,b]."},
    {"@type":"HowToStep","name":"Review results","text":"The calculator shows arc length and related quantities (chord, sector area) or the numeric integral for functions."},
    {"@type":"HowToStep","name":"Export/print","text":"Use the browser’s print to export a clean summary."}
  ]
}
</script>

<!-- JSON-LD: FAQPage -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"FAQPage",
  "mainEntity":[
    {"@type":"Question","name":"What is arc length?","acceptedAnswer":{"@type":"Answer","text":"Arc length is the distance measured along a curve between two points. For a circle arc, it equals radius times central angle in radians."}},
    {"@type":"Question","name":"How do I convert degrees to radians?","acceptedAnswer":{"@type":"Answer","text":"Multiply degrees by π/180 to get radians."}},
    {"@type":"Question","name":"Can this compute arc length of y=f(x)?","acceptedAnswer":{"@type":"Answer","text":"Yes. The Function mode uses numerical integration of sqrt(1 + (f'(x))^2) with robust sampling and error control."}},
    {"@type":"Question","name":"What accuracy can I expect?","acceptedAnswer":{"@type":"Answer","text":"For well-behaved functions, the adaptive integration targets relative errors below 1e-6. Pathological functions may require smaller step sizes."}},
    {"@type":"Question","name":"Is the tool accessible?","acceptedAnswer":{"@type":"Answer","text":"Yes. Labels, keyboard navigation, visible focus, ARIA relationships, and high-contrast design follow WCAG 2.1 AA."}}
  ]
}
</script>
</head>

<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky per requisiti) -->
  <header class="bg-white border-b">
    <div class="container mx-auto px-4 lg:px-6 py-4 flex items-center justify-between">
      <a href="https://calcdomain.com" class="text-2xl font-bold text-blue-700">CalcDomain</a>
      <nav class="hidden md:flex gap-6 text-sm">
        <a href="https://calcdomain.com/math" class="hover:text-blue-700">Math</a>
        <a href="https://calcdomain.com/subcategories/geometry" class="hover:text-blue-700">Geometry</a>
        <a href="https://calcdomain.com/search" class="hover:text-blue-700">Search</a>
      </nav>
    </div>
  </header>

  <main class="container mx-auto px-4 lg:px-6 py-8">
    <!-- Breadcrumb -->
    <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
      <a href="https://calcdomain.com" class="hover:text-blue-700">Home</a> &raquo;
      <a href="https://calcdomain.com/math" class="hover:text-blue-700">Math</a> &raquo;
      <a href="https://calcdomain.com/subcategories/geometry" class="hover:text-blue-700">Geometry</a> &raquo;
      <span class="text-gray-900">Arc Length Calculator</span>
    </nav>

    <!-- 1) H1 -->
    <h1 class="text-3xl font-extrabold mb-3">Arc Length Calculator</h1>

    <!-- 2) Intro -->
    <p class="text-gray-700 mb-6">
      Compute arc length for <strong>circle geometry</strong> (with chord and sector area) or for a
      <strong>function</strong> \( y=f(x) \) using numeric integration. Built for students, engineers, and educators—fully accessible and mobile-first.
    </p>

    <div id="print-section" class="flex flex-col lg:flex-row gap-8">
      <section class="w-full lg:w-2/3 bg-white p-6 rounded-lg shadow-md">
        <!-- 3) Calculator UI -->
        <section aria-labelledby="calc-heading">
          <h2 id="calc-heading" class="sr-only">Calculator</h2>

          <!-- Tabs -->
          <div class="mb-4">
            <div role="tablist" aria-label="Calculator mode" class="inline-flex rounded-lg border overflow-hidden">
              <button type="button" class="tab-btn px-4 py-2 text-sm font-semibold bg-blue-600 text-white" role="tab" aria-selected="true" id="tab-circle" aria-controls="panel-circle">Circle</button>
              <button type="button" class="tab-btn px-4 py-2 text-sm font-semibold bg-white text-gray-800" role="tab" aria-selected="false" id="tab-function" aria-controls="panel-function">Function</button>
            </div>
          </div>

          <!-- Circle Panel -->
          <div id="panel-circle" role="tabpanel" aria-labelledby="tab-circle">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Angle Unit -->
              <div>
                <label for="angleUnit" class="block text-sm font-medium text-gray-800">Angle Unit *</label>
                <div class="flex items-center gap-2">
                  <select id="angleUnit" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500" aria-describedby="angleUnit_help">
                    <option value="deg" selected>Degrees (°)</option>
                    <option value="rad">Radians (rad)</option>
                  </select>
                  <button type="button" class="px-2 py-1 border rounded no-print" aria-expanded="false" aria-controls="angleUnit_help" aria-label="Help: angle unit">?</button>
                </div>
                <p id="angleUnit_help" class="tooltip-panel mt-1 text-sm text-gray-600" aria-hidden="true">
                  Choose the unit for your central angle. The calculator converts as needed.
                </p>
              </div>

              <!-- Radius / Diameter toggle -->
              <div>
                <label for="sizeType" class="block text-sm font-medium text-gray-800">Provide *</label>
                <div class="flex items-center gap-2">
                  <select id="sizeType" aria-required="true" class="mt-1 w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500" aria-describedby="sizeType_help">
                    <option value="radius" selected>Radius (r)</option>
                    <option value="diameter">Diameter (d)</option>
                    <option value="chord">Chord (c)</option>
                    <option value="arc">Arc length (s)</option>
                  </select>
                  <button type="button" class="px-2 py-1 border rounded no-print" aria-expanded="false" aria-controls="sizeType_help" aria-label="Help: selection">?</button>
                </div>
                <p id="sizeType_help" class="tooltip-panel mt-1 text-sm text-gray-600" aria-hidden="true">
                  Select which measure you will input directly. The rest will be computed.
                </p>
              </div>

              <!-- Numeric input for selected measure -->
              <div>
                <label for="sizeValue" class="block text-sm font-medium text-gray-800">
                  Value (depends on selection) * </label>
                <input type="number" id="sizeValue" inputmode="decimal" step="any" min="0" aria-required="true"
                       class="mt-1 w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500"
                       aria-describedby="sizeValue_err sizeValue_help" />
                <p id="sizeValue_err" class="mt-1 text-sm text-red-700" role="alert" aria-live="polite"></p>
                <p id="sizeValue_help" class="text-sm text-gray-600">Enter a non-negative number (same linear units across all results).</p>
              </div>

              <!-- Angle -->
              <div>
                <label for="angleValue" class="block text-sm font-medium text-gray-800">Central Angle (θ) *</label>
                <input type="number" id="angleValue" inputmode="decimal" step="any"
                       class="mt-1 w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500"
                       aria-required="true" aria-describedby="angleValue_err angleValue_help" />
                <p id="angleValue_err" class="mt-1 text-sm text-red-700" role="alert" aria-live="polite"></p>
                <p id="angleValue_help" class="text-sm text-gray-600">
                  In degrees (0–360) or radians (0–2π) depending on unit selected.
                </p>
              </div>
            </div>
          </div>

          <!-- Function Panel -->
          <div id="panel-function" role="tabpanel" aria-labelledby="tab-function" class="hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="md:col-span-2">
                <label for="fx" class="block text-sm font-medium text-gray-800">
                  Function \( y = f(x) \) *</label>
                <div class="flex items-center gap-2">
                  <input type="text" id="fx" placeholder="e.g., sin(x) + 0.5*x"
                         class="mt-1 w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500"
                         aria-required="true" aria-describedby="fx_err fx_help" />
                  <button type="button" class="px-2 py-1 border rounded no-print" aria-expanded="false" aria-controls="fx_help" aria-label="Help: function syntax">?</button>
                </div>
                <p id="fx_err" class="mt-1 text-sm text-red-700" role="alert" aria-live="polite"></p>
                <p id="fx_help" class="tooltip-panel mt-1 text-sm text-gray-600" aria-hidden="true">
                  Use standard JS math: x, sin(x), cos(x), tan(x), exp(x), log(x), sqrt(x), abs(x), pow(x,2). Multiplication must be explicit (e.g., 2*x).
                </p>
              </div>

              <div>
                <label for="a" class="block text-sm font-medium text-gray-800">Start (a) *</label>
                <input type="number" id="a" inputmode="decimal" step="any"
                       class="mt-1 w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500"
                       aria-required="true" aria-describedby="a_err" />
                <p id="a_err" class="mt-1 text-sm text-red-700" role="alert" aria-live="polite"></p>
              </div>
              <div>
                <label for="b" class="block text-sm font-medium text-gray-800">End (b) *</label>
                <input type="number" id="b" inputmode="decimal" step="any"
                       class="mt-1 w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500"
                       aria-required="true" aria-describedby="b_err" />
                <p id="b_err" class="mt-1 text-sm text-red-700" role="alert" aria-live="polite"></p>
              </div>

              <div>
                <label for="tol" class="block text-sm font-medium text-gray-800">Relative Tolerance</label>
                <input type="number" id="tol" inputmode="decimal" step="any" min="1e-9" value="1e-6"
                       class="mt-1 w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500"
                       aria-describedby="tol_help" />
                <p id="tol_help" class="text-sm text-gray-600">Smaller values increase accuracy (and computation time).</p>
              </div>

              <div>
                <label for="maxN" class="block text-sm font-medium text-gray-800">Max Subdivisions</label>
                <input type="number" id="maxN" inputmode="numeric" min="50" step="1" value="20000"
                       class="mt-1 w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500"
                       aria-describedby="maxN_help" />
                <p id="maxN_help" class="text-sm text-gray-600">Upper bound to prevent runaway computation.</p>
              </div>
            </div>
          </div>
        </section>

        <!-- 4) Results -->
        <section id="results-wrapper" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-4">
          <h2 class="text-lg font-semibold text-blue-900 mb-2">Results</h2>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="result-card bg-white border rounded-lg p-4 text-center">
              <h3 class="text-sm font-medium text-gray-600">Arc Length (s)</h3>
              <p id="res_arc" class="text-2xl font-extrabold text-blue-700">—</p>
            </div>
            <div class="result-card bg-white border rounded-lg p-4 text-center">
              <h3 class="text-sm font-medium text-gray-600">Chord (c)</h3>
              <p id="res_chord" class="text-2xl font-extrabold text-blue-700">—</p>
            </div>
            <div class="result-card bg-white border rounded-lg p-4 text-center">
              <h3 class="text-sm font-medium text-gray-600">Sector Area (A)</h3>
              <p id="res_sector" class="text-2xl font-extrabold text-blue-700">—</p>
            </div>
            <div class="result-card bg-white border rounded-lg p-4 text-center">
              <h3 class="text-sm font-medium text-gray-600">Radius (r)</h3>
              <p id="res_radius" class="text-2xl font-extrabold text-blue-700">—</p>
            </div>
          </div>

          <!-- SVG Diagram (Circle mode) -->
          <div class="mt-6 bg-white border rounded-lg p-4">
            <h3 class="text-sm font-semibold text-gray-700 mb-2">Diagram (Circle Mode)</h3>
            <svg id="arc-svg" viewBox="0 0 200 200" role="img" aria-label="Circle with arc and chord" class="w-full max-w-md mx-auto">
              <desc>Circle showing central angle, arc (highlighted), and chord.</desc>
              <circle cx="100" cy="100" r="70" fill="none" stroke="#d1d5db" stroke-width="2"></circle>
              <path id="arc-path" d="" fill="none" stroke="#2563eb" stroke-width="4" stroke-linecap="round"></path>
              <line id="chord-line" x1="0" y1="0" x2="0" y2="0" stroke="#f97316" stroke-width="3"></line>
              <line id="radius1" x1="100" y1="100" x2="100" y2="30" stroke="#6b7280" stroke-width="2"></line>
              <line id="radius2" x1="100" y1="100" x2="100" y2="30" stroke="#6b7280" stroke-width="2"></line>
            </svg>
            <p class="text-xs text-gray-600 mt-2">Arc in blue, chord in orange, radii in gray. Diagram is schematic; not to scale with your units.</p>
          </div>
        </section>
      </section>

      <!-- Sidebar -->
      <aside class="w-full lg:w-1/3">
        <div class="sticky top-6 space-y-6">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-3">Why this calculator</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
              <li>Two modes: Circle & Function (numerical integration).</li>
              <li>Inline validation, tooltips, and LaTeX explanations.</li>
              <li>Print-friendly summary for reports and homework.</li>
            </ul>
          </div>
          <div class="bg-gray-200 h-64 rounded-lg flex items-center justify-center text-gray-600 no-print">
            Ad Placement (300×250)
          </div>
        </div>
      </aside>
    </div>

    <!-- 5) Authoritative Content Ecosystem -->
    <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
      <h2>Authoritative data source & methodology</h2>
      <p>
        <strong>Primary reference:</strong> <a class="text-blue-700 underline" href="https://dlmf.nist.gov/1.2#iii" target="_blank" rel="noopener">
        NIST Digital Library of Mathematical Functions (DLMF), §1.2</a> (accessed 2025-10-25). All arc length formulas follow standard definitions in classical calculus and geometry. <em>All computations strictly follow the formulas and data provided by this source.</em>
      </p>

      <h2>The formulas explained</h2>
      <div class="formula-box">
        <p><strong>Circle arc length</strong>:</p>
        <p>\[
          s = r \,\theta \quad (\theta \text{ in radians}), \qquad
          \theta_{\text{rad}} = \theta_{\deg}\cdot\frac{\pi}{180}
        \]</p>
        <p><strong>Chord length</strong>:</p>
        <p>\[
          c = 2r \sin\!\left(\frac{\theta}{2}\right)
        \]</p>
        <p><strong>Sector area</strong>:</p>
        <p>\[
          A = \frac{1}{2} r^2 \theta
        \]</p>
        <p><strong>Function arc length</strong> (on \([a,b]\)):</p>
        <p>\[
          L = \int_a^b \sqrt{1 + \left(f'(x)\right)^2}\,dx
        \]</p>
      </div>

      <h2>Glossary of variables</h2>
      <ul>
        <li><strong>\( r \)</strong>: radius (linear units).</li>
        <li><strong>\( d \)</strong>: diameter \( (d=2r) \).</li>
        <li><strong>\( \theta \)</strong>: central angle (radians unless stated otherwise).</li>
        <li><strong>\( s \)</strong>: arc length.</li>
        <li><strong>\( c \)</strong>: chord length.</li>
        <li><strong>\( A \)</strong>: sector area.</li>
        <li><strong>\( f(x) \)</strong>: function describing the curve; \( f'(x) \) its derivative.</li>
      </ul>

      <h2>How it works: a step-by-step example</h2>
      <h3>Circle example</h3>
      <p>Given \( r=5 \) and \( \theta = 60^\circ \). Convert to radians:
      \( \theta_{\text{rad}} = 60 \cdot \pi/180 = \pi/3 \). Then \( s = r\theta = 5\cdot\pi/3 \approx 5.236 \).
      The chord is \( c=2r\sin(\theta/2)=10\sin(30^\circ)=5 \). Sector area \( A=\frac12 r^2\theta=\frac12\cdot25\cdot\pi/3 \approx 13.089 \).</p>

      <h3>Function example</h3>
      <p>For \( f(x)=\sin x \) on \([0,\pi]\): \( f'(x)=\cos x \).
      \[
        L=\int_0^\pi \sqrt{1+\cos^2 x}\,dx \approx 3.8202
      \]
      The calculator evaluates this integral numerically with adaptive refinement.</p>

      <h2>Frequently asked questions</h2>
      <details>
        <summary>Degrees vs radians — which should I use?</summary>
        <p>Use radians for formulas. If you enter degrees, the calculator converts to radians internally.</p>
      </details>
      <details>
        <summary>Can I input arc length to find the radius?</summary>
        <p>Yes. Pick “Provide: Arc length (s)”, enter \( s \) and angle \( \theta \); the tool solves \( r = s/\theta \).</p>
      </details>
      <details>
        <summary>What functions are allowed in Function mode?</summary>
        <p>Standard JS <code>Math</code> functions: <code>sin</code>, <code>cos</code>, <code>tan</code>, <code>exp</code>, <code>log</code>, <code>sqrt</code>, <code>abs</code>, <code>pow</code>, etc. Use explicit multiplication, e.g., <code>2*x</code>.</p>
      </details>
      <details>
        <summary>How accurate is the numeric integral?</summary>
        <p>By default, the algorithm targets relative tolerance \(10^{-6}\) with a cap on subdivisions to remain responsive. Tighten tolerance for more accuracy.</p>
      </details>
      <details>
        <summary>Why is my diagram not matching exact proportions?</summary>
        <p>The SVG is schematic for clarity. Numerical results are exact per formulas; the drawing is illustrative.</p>
      </details>

      <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700">
        <p><strong>Tool developed by Ugo Candido.</strong> Content verified by the CalcDomain Editorial Board.<br>
        Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
      </div>
    </article>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-4 space-x-4">
        <a href="https://calcdomain.com/about" class="hover:text-blue-700">About</a>
        <a href="https://calcdomain.com/contact" class="hover:text-blue-700">Contact</a>
        <a href="https://calcdomain.com/privacy" class="hover:text-blue-700">Privacy</a>
        <a href="https://calcdomain.com/terms" class="hover:text-blue-700">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator Logic -->
  <script defer>
  (function(){
    // Helpers
    const $ = (id) => document.getElementById(id);
    const show = (el) => el.classList.remove('hidden');
    const hide = (el) => el.classList.add('hidden');

    // Tabs
    const tabCircle = $('tab-circle');
    const tabFunction = $('tab-function');
    const panelCircle = $('panel-circle');
    const panelFunction = $('panel-function');

    function setTab(active){
      if(active==='circle'){
        tabCircle.setAttribute('aria-selected','true');
        tabCircle.classList.add('bg-blue-600','text-white');
        tabCircle.classList.remove('bg-white','text-gray-800');
        tabFunction.setAttribute('aria-selected','false');
        tabFunction.classList.remove('bg-blue-600','text-white');
        tabFunction.classList.add('bg-white','text-gray-800');
        show(panelCircle); hide(panelFunction);
      } else {
        tabFunction.setAttribute('aria-selected','true');
        tabFunction.classList.add('bg-blue-600','text-white');
        tabFunction.classList.remove('bg-white','text-gray-800');
        tabCircle.setAttribute('aria-selected','false');
        tabCircle.classList.remove('bg-blue-600','text-white');
        tabCircle.classList.add('bg-white','text-gray-800');
        show(panelFunction); hide(panelCircle);
      }
      compute();
    }
    tabCircle.addEventListener('click', ()=>setTab('circle'));
    tabFunction.addEventListener('click', ()=>setTab('function'));

    // Tooltips (accessible)
    document.querySelectorAll('button[aria-controls]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const panel = document.getElementById(btn.getAttribute('aria-controls'));
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        if(panel){ panel.setAttribute('aria-hidden', String(expanded)); }
      });
      btn.addEventListener('keydown', (e)=>{
        if(e.key==='Enter' || e.key===' '){ e.preventDefault(); btn.click(); }
      });
    });

    // Circle inputs
    const angleUnit = $('angleUnit');
    const sizeType = $('sizeType');
    const sizeValue = $('sizeValue');
    const angleValue = $('angleValue');
    const sizeErr = $('sizeValue_err');
    const angleErr = $('angleValue_err');

    // Function inputs
    const fx = $('fx'), a = $('a'), b = $('b'), tol = $('tol'), maxN = $('maxN');
    const fxErr = $('fx_err'), aErr = $('a_err'), bErr = $('b_err');

    // Results
    const rArc = $('res_arc'), rChord = $('res_chord'), rSector = $('res_sector'), rRadius = $('res_radius');

    // SVG elements
    const arcPath = $('arc-path'), chordLine = $('chord-line'), r1 = $('radius1'), r2 = $('radius2');

    // Validation (on blur)
    function validateCircle(){
      let ok = true;
      sizeErr.textContent = ''; angleErr.textContent = '';

      const sv = parseFloat(sizeValue.value);
      if(!(sv>=0)){ sizeErr.textContent = 'Please enter a non-negative value.'; ok=false; }

      const au = angleUnit.value;
      const av = parseFloat(angleValue.value);
      if(isNaN(av)){ angleErr.textContent = 'Please enter an angle.'; ok=false; }
      else {
        if(au==='deg' && !(av>=0 && av<=360)){ angleErr.textContent = 'Degrees must be in [0, 360].'; ok=false; }
        if(au==='rad' && !(av>=0 && av<=2*Math.PI)){ angleErr.textContent = 'Radians must be in [0, 2π].'; ok=false; }
      }
      return ok;
    }

    function validateFunction(){
      let ok = true;
      fxErr.textContent=''; aErr.textContent=''; bErr.textContent='';

      if(!fx.value.trim()){ fxErr.textContent='Enter a function of x (e.g., sin(x)+x).'; ok=false; }
      const av = parseFloat(a.value), bv = parseFloat(b.value);
      if(!isFinite(av)){ aErr.textContent='Enter a numeric start a.'; ok=false; }
      if(!isFinite(bv)){ bErr.textContent='Enter a numeric end b.'; ok=false; }
      if(isFinite(av) && isFinite(bv) && bv<=av){ bErr.textContent='End b must be greater than start a.'; ok=false; }
      return ok;
    }

    [sizeValue, angleValue].forEach(el=>el.addEventListener('blur', validateCircle));
    [fx, a, b].forEach(el=>el.addEventListener('blur', validateFunction));

    // Compute
    function compute(){
      if(panelCircle.classList.contains('hidden')){
        computeFunction();
      } else {
        computeCircle();
      }
    }

    // Circle computations
    function toRad(v){ return angleUnit.value==='deg' ? v*Math.PI/180 : v; }
    function fromInputsToRadiusAndTheta(){
      const theta = toRad(parseFloat(angleValue.value)||0);
      const val = parseFloat(sizeValue.value)||0;
      let r=NaN;

      switch(sizeType.value){
        case 'radius': r = val; break;
        case 'diameter': r = val/2; break;
        case 'chord': r = (theta>0)? (val/(2*Math.sin(theta/2))) : NaN; break;
        case 'arc': r = (theta>0)? (val/theta) : NaN; break;
      }
      return {r, theta};
    }

    function fmt(v){ return (isFinite(v)) ? (Math.abs(v)<1e-12 ? '0' : Number(v.toPrecision(12)).toString()) : '—'; }

    function computeCircle(){
      if(!validateCircle()){ updateResults(null); drawDiagram(null); return; }
      const {r, theta} = fromInputsToRadiusAndTheta();
      const s = r*theta;
      const c = 2*r*Math.sin(theta/2);
      const A = 0.5*r*r*theta;

      updateResults({s, c, A, r});
      drawDiagram({r, theta, c});
    }

    function updateResults(o){
      if(!o){
        rArc.textContent='—'; rChord.textContent='—'; rSector.textContent='—'; rRadius.textContent='—';
        return;
      }
      rArc.textContent = fmt(o.s);
      rChord.textContent = fmt(o.c);
      rSector.textContent = fmt(o.A);
      rRadius.textContent = fmt(o.r);
    }

    // Diagram drawing (schematic)
    function polar(cx,cy,R,ang){ return { x: cx + R*Math.cos(ang), y: cy + R*Math.sin(ang) }; }
    function drawDiagram(params){
      const cx=100, cy=100, R=70;
      if(!params){
        arcPath.setAttribute('d',''); chordLine.setAttribute('x1','0'); return;
      }
      let {theta} = params;
      // Clamp for drawing
      theta = Math.max(0, Math.min(theta, 2*Math.PI));

      const a0 = -Math.PI/2;        // start angle (top)
      const a1 = a0 + theta;        // end angle
      const p0 = polar(cx,cy,R,a0), p1 = polar(cx,cy,R,a1);
      const largeArc = (theta > Math.PI) ? 1 : 0;

      const d = `M ${p0.x} ${p0.y} A ${R} ${R} 0 ${largeArc} 1 ${p1.x} ${p1.y}`;
      arcPath.setAttribute('d', d);
      chordLine.setAttribute('x1', p0.x); chordLine.setAttribute('y1', p0.y);
      chordLine.setAttribute('x2', p1.x); chordLine.setAttribute('y2', p1.y);

      r1.setAttribute('x2', p0.x); r1.setAttribute('y2', p0.y);
      r2.setAttribute('x2', p1.x); r2.setAttribute('y2', p1.y);
    }

    // Function mode: safe evaluator
    function makeFn(expr){
      // whitelist Math + x
      const allowed = ['abs','acos','acosh','asin','asinh','atan','atan2','atanh','cbrt','ceil','clz32','cos','cosh','exp','expm1','floor','fround','hypot','imul','log','log10','log1p','log2','max','min','pow','random','round','sign','sin','sinh','sqrt','tan','tanh','trunc'];
      const args = ['x', ...allowed.map(n=>'Math.'+n)];
      const body = `return (${expr});`;
      // Build function with Math methods as parameters
      // eslint-disable-next-line no-new-func
      return new Function(...['x', ...allowed], body).bind(null);
    }

    function safeEval(fn, x){
      // Call with Math.* injections
      return fn(x,
        Math.abs,Math.acos,Math.acosh,Math.asin,Math.asinh,Math.atan,Math.atan2,Math.atanh,
        Math.cbrt,Math.ceil,Math.clz32,Math.cos,Math.cosh,Math.exp,Math.expm1,Math.floor,
        Math.fround,Math.hypot,Math.imul,Math.log,Math.log10,Math.log1p,Math.log2,Math.max,
        Math.min,Math.pow,Math.random,Math.round,Math.sign,Math.sin,Math.sinh,Math.sqrt,
        Math.tan,Math.tanh,Math.trunc
      );
    }

    // Numeric derivative (central difference)
    function deriv(fn, x){
      const h = Math.max(1e-6, Math.abs(x)*1e-6);
      return (safeEval(fn, x+h) - safeEval(fn, x-h)) / (2*h);
    }

    // Integrand: sqrt(1 + (f')^2)
    function integrand(fn, x){
      const d = deriv(fn, x);
      const v = Math.sqrt(1 + d*d);
      if(!isFinite(v)) throw new Error('Integrand not finite at x='+x);
      return v;
    }

    // Adaptive Simpson integration
    function simpson(fn, a, b, tol, maxN){
      // base Simpson
      function S(f,a,b){
        const c=(a+b)/2;
        return (b-a)/6*(f(a)+4*f(c)+f(b));
      }
      const f = (x)=>integrand(fn,x);
      let n = 0;

      function recurse(a,b,eps,whole,fa,fc,fb,depth){
        const c=(a+b)/2, d=(a+c)/2, e=(c+b)/2;
        const fd=f(d), fe=f(e);
        n+=2; if(n>maxN) throw new Error('Maximum subdivisions reached');
        const left=(c-a)/6*(fa+4*fd+fc);
        const right=(b-c)/6*(fc+4*fe+fb);
        const delta = left+right-whole;
        if(Math.abs(delta) <= 15*eps) return left+right + delta/15;
        return recurse(a,c,eps/2,left,fa,fd,fc,depth+1) + recurse(c,b,eps/2,right,fc,fe,fb,depth+1);
      }

      const fa=f(a), fbv=f(b), fc=f((a+b)/2);
      n+=3;
      return { value: recurse(a,b,tol,S(f,a,b),fa,fc,fbv,0), evals: n };
    }

    function computeFunction(){
      if(!validateFunction()){ rArc.textContent='—'; rChord.textContent='—'; rSector.textContent='—'; rRadius.textContent='—'; return; }
      try{
        const fn = makeFn(fx.value);
        const av = parseFloat(a.value), bv = parseFloat(b.value);
        const t = Math.max(1e-12, parseFloat(tol.value)||1e-6);
        const N = Math.max(50, parseInt(maxN.value)||20000);
        const res = simpson(fn, av, bv, t, N);
        rArc.textContent = fmt(res.value);
        rChord.textContent = '—';
        rSector.textContent = '—';
        rRadius.textContent = '—';
        // Hide circle diagram elements subtly (zero-length arc)
        drawDiagram({r:70, theta:0, c:0});
      } catch(err){
        fxErr.textContent = 'Computation failed: ' + (err?.message || 'check function/interval');
        rArc.textContent='—'; rChord.textContent='—'; rSector.textContent='—'; rRadius.textContent='—';
      }
    }

    // Events
    [angleUnit,sizeType,sizeValue,angleValue].forEach(el=>el.addEventListener('input', computeCircle));
    [fx,a,b,tol,maxN].forEach(el=>el.addEventListener('input', computeFunction));

    // Defaults
    angleUnit.value='deg';
    sizeType.value='radius';
    sizeValue.value='5';
    angleValue.value='60';
    fx.value='sin(x)'; a.value='0'; b.value=String(Math.PI); tol.value='1e-6'; maxN.value='20000';

    // Init
    setTab('circle');
  })();
  </script>
</body>
</html>

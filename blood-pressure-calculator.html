<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Blood Pressure Calculator – Classify, MAP & Pulse Pressure</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Enter up to three systolic/diastolic readings to classify blood pressure (ACC/AHA), compute Mean Arterial Pressure (MAP) and Pulse Pressure, with clear guidance and methodology.">
  <link rel="canonical" href="https://calcdomain.com/blood-pressure-calculator.html">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; }
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 0.75rem; }
    .prose h3 { font-size: 1.25rem; font-weight: 700; margin-top: 1.5rem; margin-bottom: 0.5rem; }
    .prose p { margin-bottom: 1rem; line-height: 1.65; }
    .prose ul, .prose ol { margin-left: 1.25rem; margin-bottom: 1rem; }
    .formula-box { background:#f3f4f6; border:1px solid #e5e7eb; border-radius:10px; padding:1rem; overflow-x:auto; }
    /* Focus styles (WCAG-visible) */
    :focus { outline: 3px solid #2563eb; outline-offset: 2px; }
    /* Error text */
    .field-error { color:#b91c1c; font-size: 0.875rem; margin-top: 0.375rem; }
    /* Prevent CLS in results area */
    #results-region { min-height: 240px; }
    /* Tactile targets */
    .tappable { min-height: 48px; min-width: 48px; }
    /* Range bar */
    .range-seg { height: 14px; }
    .seg-normal { background:#10b981; }
    .seg-elevated { background:#f59e0b; }
    .seg-s1 { background:#f97316; }
    .seg-s2 { background:#ef4444; }
    .seg-crisis { background:#991b1b; }
    .badge { display:inline-block; padding:0.25rem 0.5rem; border-radius:9999px; font-weight:600; }
  </style>

  <!-- JSON-LD: WebPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"MedicalWebPage",
    "name":"Blood Pressure Calculator",
    "description":"Classify blood pressure per ACC/AHA, compute MAP and pulse pressure, and learn proper home measurement technique.",
    "url":"https://calcdomain.com/blood-pressure-calculator.html",
    "inLanguage":"en",
    "author":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"},
    "about":{"@type":"MedicalEntity","name":"Hypertension"},
    "lastReviewed":"2025-10-30",
    "reviewedBy":{"@type":"Organization","name":"CalcDomain Editorial Board"}
  }
  </script>

  <!-- JSON-LD: Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
      {"@type":"ListItem","position":2,"name":"Health & Fitness","item":"https://calcdomain.com/health-fitness.html"},
      {"@type":"ListItem","position":3,"name":"Health Metrics","item":"https://calcdomain.com/subcategories/health-metrics.html"},
      {"@type":"ListItem","position":4,"name":"Blood Pressure Calculator","item":"https://calcdomain.com/blood-pressure-calculator.html"}
    ]
  }
  </script>

  <!-- JSON-LD: HowTo -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to check and classify your blood pressure",
    "description":"Enter up to three BP readings taken correctly at home, then review your classification, MAP and pulse pressure.",
    "step":[
      {"@type":"HowToStep","name":"Prepare correctly","text":"No caffeine, alcohol, smoking or exercise for 30 minutes. Sit with back supported, feet flat, arm at heart level."},
      {"@type":"HowToStep","name":"Take 3 readings","text":"Wait 1 minute between readings and record systolic and diastolic values."},
      {"@type":"HowToStep","name":"Enter readings","text":"Fill in up to three SBP/DBP pairs and choose averaging method."},
      {"@type":"HowToStep","name":"Review results","text":"See your category per ACC/AHA, plus MAP and pulse pressure with guidance."}
    ]
  }
  </script>

  <!-- MathJax for LaTeX formulas -->
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky per spec) -->
  <header class="bg-white border-b">
    <nav class="container mx-auto px-4 lg:px-6 py-4">
      <div class="flex items-center justify-between">
        <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>
        <div class="hidden md:flex items-center gap-6 text-sm">
          <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
          <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
        </div>
        <button class="md:hidden p-2 tappable" aria-label="Open menu">
          <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
      </div>
    </nav>
  </header>

  <main class="container mx-auto px-4 lg:px-6 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
      <section class="w-full lg:w-2/3">
        <!-- Breadcrumb -->
        <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
          <a class="hover:text-blue-600" href="index.html">Home</a> &raquo;
          <a class="hover:text-blue-600" href="health-fitness.html">Health &amp; Fitness</a> &raquo;
          <a class="hover:text-blue-600" href="subcategories/health-metrics.html">Health Metrics</a> &raquo;
          <span class="text-gray-900">Blood Pressure Calculator</span>
        </nav>

        <!-- H1 -->
        <div id="print-section" class="bg-white p-6 rounded-lg shadow-sm">
          <h1 class="text-3xl font-extrabold mb-2">Blood pressure calculator</h1>
          <p class="text-gray-700 mb-6">
            Enter up to three blood pressure readings to get an instant classification (ACC/AHA), plus
            Mean Arterial Pressure (MAP) and Pulse Pressure. Built for patients, clinicians, and fitness
            enthusiasts who want accurate, accessible insights and clear next steps.
          </p>

          <!-- Calculator UI -->
          <section aria-labelledby="calc-title" class="space-y-6" id="calculator-ui">
            <h2 id="calc-title" class="sr-only">Calculator</h2>

            <!-- Context + averaging -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label for="context" class="block text-sm font-medium text-gray-800">Measurement setting *</label>
                <div class="flex items-center gap-2">
                  <select id="context" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 tappable" aria-required="true">
                    <option value="home" selected>Home</option>
                    <option value="office">Clinic/office</option>
                  </select>
                  <button type="button" class="tappable px-2 py-1 border rounded" aria-expanded="false" aria-controls="tip-context">?</button>
                </div>
                <p id="tip-context" class="text-gray-600 text-sm hidden mt-1">Home measurements are preferred for diagnosis—sit quietly 5+ minutes, arm at heart level.</p>
              </div>
              <div>
                <label for="avgMethod" class="block text-sm font-medium text-gray-800">Average method *</label>
                <div class="flex items-center gap-2">
                  <select id="avgMethod" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 tappable" aria-required="true">
                    <option value="mean" selected>Arithmetic mean</option>
                    <option value="median">Median (robust to outliers)</option>
                    <option value="last">Use last reading only</option>
                  </select>
                  <button type="button" class="tappable px-2 py-1 border rounded" aria-expanded="false" aria-controls="tip-avg">?</button>
                </div>
                <p id="tip-avg" class="text-gray-600 text-sm hidden mt-1">Most guidelines average 2–3 readings; median reduces impact of a stray high/low.</p>
              </div>
              <div>
                <label for="units" class="block text-sm font-medium text-gray-800">Units *</label>
                <select id="units" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 tappable" aria-required="true">
                  <option value="mmhg" selected>mmHg</option>
                </select>
              </div>
            </div>

            <!-- Readings grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4" role="group" aria-labelledby="readings-legend">
              <h3 id="readings-legend" class="md:col-span-3 text-lg font-semibold text-gray-900">Enter up to 3 readings</h3>

              <!-- Reading 1 -->
              <div class="border rounded-lg p-4">
                <div>
                  <label for="sbp1" class="block text-sm font-medium text-gray-800">Reading 1 – Systolic (SBP) *</label>
                  <input type="number" inputmode="numeric" id="sbp1" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 tappable" placeholder="e.g., 122" aria-required="true" aria-describedby="sbp1-err tip-sbp">
                  <p id="sbp1-err" class="field-error hidden"></p>
                </div>
                <div class="mt-3">
                  <label for="dbp1" class="block text-sm font-medium text-gray-800">Reading 1 – Diastolic (DBP) *</label>
                  <input type="number" inputmode="numeric" id="dbp1" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 tappable" placeholder="e.g., 78" aria-required="true" aria-describedby="dbp1-err tip-dbp">
                  <p id="dbp1-err" class="field-error hidden"></p>
                </div>
              </div>

              <!-- Reading 2 -->
              <div class="border rounded-lg p-4">
                <div>
                  <label for="sbp2" class="block text-sm font-medium text-gray-800">Reading 2 – SBP</label>
                  <input type="number" inputmode="numeric" id="sbp2" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 tappable" placeholder="optional" aria-describedby="sbp2-err tip-sbp">
                  <p id="sbp2-err" class="field-error hidden"></p>
                </div>
                <div class="mt-3">
                  <label for="dbp2" class="block text-sm font-medium text-gray-800">Reading 2 – DBP</label>
                  <input type="number" inputmode="numeric" id="dbp2" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 tappable" placeholder="optional" aria-describedby="dbp2-err tip-dbp">
                  <p id="dbp2-err" class="field-error hidden"></p>
                </div>
              </div>

              <!-- Reading 3 -->
              <div class="border rounded-lg p-4">
                <div>
                  <label for="sbp3" class="block text-sm font-medium text-gray-800">Reading 3 – SBP</label>
                  <input type="number" inputmode="numeric" id="sbp3" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 tappable" placeholder="optional" aria-describedby="sbp3-err tip-sbp">
                  <p id="sbp3-err" class="field-error hidden"></p>
                </div>
                <div class="mt-3">
                  <label for="dbp3" class="block text-sm font-medium text-gray-800">Reading 3 – DBP</label>
                  <input type="number" inputmode="numeric" id="dbp3" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 tappable" placeholder="optional" aria-describedby="dbp3-err tip-dbp">
                  <p id="dbp3-err" class="field-error hidden"></p>
                </div>
              </div>

              <div class="md:col-span-3 text-sm text-gray-600">
                <p id="tip-sbp">Typical plausible SBP range: 70–250 mmHg. Values outside this range will be flagged.</p>
                <p id="tip-dbp" class="mt-1">Typical plausible DBP range: 40–150 mmHg. DBP must be lower than SBP.</p>
              </div>
            </div>

            <!-- Action row -->
            <div class="flex flex-wrap items-center gap-3">
              <button id="calcBtn" class="bg-blue-600 text-white font-semibold px-5 py-2 rounded-md hover:bg-blue-700 tappable">Calculate</button>
              <button id="clearBtn" class="bg-gray-100 text-gray-800 font-medium px-4 py-2 rounded-md border hover:bg-gray-200 tappable" type="button">Clear</button>
              <label class="inline-flex items-center gap-2 text-sm text-gray-700 ml-auto">
                <input id="discardFirst" type="checkbox" class="h-4 w-4"> Discard first reading (white-coat effect)
              </label>
            </div>
          </section>

          <!-- Results -->
          <section aria-labelledby="results-title" id="results-region" class="mt-6 bg-blue-50 border border-blue-100 rounded-lg p-5">
            <h2 id="results-title" class="text-lg font-semibold text-gray-900 mb-3">Results</h2>

            <!-- Range bar -->
            <div class="mb-4">
              <div class="flex w-full rounded overflow-hidden" role="img" aria-label="Blood pressure ranges">
                <div class="range-seg seg-normal w-[24%]" title="Normal &lt;120/&lt;80"></div>
                <div class="range-seg seg-elevated w-[10%]" title="Elevated 120–129/&lt;80"></div>
                <div class="range-seg seg-s1 w-[20%]" title="Stage 1 130–139 or 80–89"></div>
                <div class="range-seg seg-s2 w-[26%]" title="Stage 2 ≥140 or ≥90"></div>
                <div class="range-seg seg-crisis flex-1" title="Hypertensive crisis ≥180 or ≥120"></div>
              </div>
              <div class="mt-2 text-sm text-gray-700 flex items-center gap-3">
                <span>Average SBP/DBP:</span>
                <span id="avgReadout" class="font-semibold">—</span>
                <span id="categoryBadge" class="badge bg-gray-200 text-gray-800">—</span>
              </div>
            </div>

            <!-- Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
              <div class="bg-white border rounded-lg p-4 text-center">
                <div class="text-xs uppercase tracking-wide text-gray-500">Classification</div>
                <div id="classOut" class="text-xl font-extrabold text-gray-900 mt-1">—</div>
                <div id="classNote" class="text-gray-600 text-xs mt-1">Per ACC/AHA thresholds</div>
              </div>
              <div class="bg-white border rounded-lg p-4 text-center">
                <div class="text-xs uppercase tracking-wide text-gray-500">MAP</div>
                <div id="mapOut" class="text-xl font-extrabold text-blue-700 mt-1">—</div>
                <div class="text-gray-600 text-xs mt-1">Mean Arterial Pressure (mmHg)</div>
              </div>
              <div class="bg-white border rounded-lg p-4 text-center">
                <div class="text-xs uppercase tracking-wide text-gray-500">Pulse Pressure</div>
                <div id="ppOut" class="text-xl font-extrabold text-blue-700 mt-1">—</div>
                <div class="text-gray-600 text-xs mt-1">SBP − DBP (mmHg)</div>
              </div>
            </div>

            <!-- Guidance -->
            <div class="mt-4 text-sm text-gray-800" id="guidance">
              <p>Enter your readings and press <em>Calculate</em> to see guidance tailored to your category.</p>
            </div>
          </section>
        </div>

        <!-- Content Ecosystem -->
        <article class="bg-white p-6 rounded-lg shadow-sm mt-8 prose">
          <h2>Authoritative data & methodology</h2>
          <p><strong>Primary classification standard:</strong> 2017 ACC/AHA Guideline for High Blood Pressure in Adults (Table of categories). “Normal &lt;120/&lt;80, Elevated 120–129 and &lt;80, Stage 1 130–139 or 80–89, Stage 2 ≥140 or ≥90; Hypertensive crisis ≥180 and/or ≥120.” Source: American Heart Association/American College of Cardiology. <a href="https://www.ahajournals.org/doi/10.1161/hyp.0000000000000065" target="_blank" rel="nofollow noopener">AHA Journals</a> and synopsis <a href="https://www.ahajournals.org/doi/10.1161/hyp.0000000000000066" target="_blank" rel="nofollow noopener">companion</a>.</p>
          <p><strong>Home measurement technique:</strong> AHA instructions (2025) on validated devices, cuff size, and prep (no caffeine/alcohol/exercise 30 min; rest 5 min; arm at heart level). See AHA PDF: <a href="https://www.heart.org/-/media/files/health-topics/high-blood-pressure/how_to_measure_your_blood_pressure_letter_size.pdf" target="_blank" rel="nofollow noopener">How to Measure Your Blood Pressure</a>.</p>
          <p><strong>MAP formula:</strong> \( \mathrm{MAP} \approx \mathrm{DBP} + \tfrac{1}{3}(\mathrm{SBP}-\mathrm{DBP}) \). Reference: StatPearls (NIH/NCBI): <a href="https://www.ncbi.nlm.nih.gov/books/NBK538226/" target="_blank" rel="nofollow noopener">Physiology, Mean Arterial Pressure</a>.</p>
          <p><strong>UK parity check:</strong> NHS “Check your blood pressure reading” tool for patient-facing guidance: <a href="https://www.nhs.uk/health-assessment-tools/check-your-blood-pressure-reading" target="_blank" rel="nofollow noopener">NHS tool</a>.</p>
          <p class="p-3 rounded border bg-gray-50 text-gray-700"><em>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</em></p>

          <h2>The formula explained</h2>
          <div class="formula-box">
            <p>Pulse Pressure: \( PP = \mathrm{SBP} - \mathrm{DBP} \)</p>
            <p>Mean Arterial Pressure (MAP): \( \mathrm{MAP} \approx \mathrm{DBP} + \frac{1}{3}(\mathrm{SBP} - \mathrm{DBP}) = \frac{2\cdot \mathrm{DBP} + \mathrm{SBP}}{3} \)</p>
            <p>Classification (per-reading):</p>
            <ul>
              <li>Normal: \( \mathrm{SBP} &lt; 120 \land \mathrm{DBP} &lt; 80 \)</li>
              <li>Elevated: \( 120 \le \mathrm{SBP} \le 129 \land \mathrm{DBP} &lt; 80 \)</li>
              <li>Stage 1 HTN: \( 130 \le \mathrm{SBP} \le 139 \lor 80 \le \mathrm{DBP} \le 89 \)</li>
              <li>Stage 2 HTN: \( \mathrm{SBP} \ge 140 \lor \mathrm{DBP} \ge 90 \)</li>
              <li>Hypertensive crisis (flag): \( \mathrm{SBP} \ge 180 \lor \mathrm{DBP} \ge 120 \)</li>
            </ul>
          </div>

          <h2>Glossary of variables</h2>
          <ul>
            <li><strong>SBP</strong> – Systolic Blood Pressure (mmHg), the top number.</li>
            <li><strong>DBP</strong> – Diastolic Blood Pressure (mmHg), the bottom number.</li>
            <li><strong>Pulse Pressure (PP)</strong> – Difference between SBP and DBP (mmHg).</li>
            <li><strong>MAP</strong> – Estimated Mean Arterial Pressure (mmHg), proxy for organ perfusion.</li>
            <li><strong>Classification</strong> – Category assigned from averaged SBP/DBP per ACC/AHA.</li>
          </ul>

          <h2>How it works: a step-by-step example</h2>
          <h3>Example inputs</h3>
          <ul>
            <li>Readings: (124/78), (128/76), (121/79)</li>
            <li>Averaging method: mean; setting: home</li>
          </ul>
          <h3>Computation</h3>
          <ul>
            <li>Average SBP = (124+128+121)/3 = 124.33 → 124</li>
            <li>Average DBP = (78+76+79)/3 = 77.67 → 78</li>
            <li>Classification: Elevated (SBP 120–129 and DBP &lt; 80)</li>
            <li>PP = 124 − 78 = 46 mmHg</li>
            <li>MAP = 78 + (124−78)/3 = 78 + 15.33 ≈ 93.3 mmHg</li>
          </ul>

          <h2>Frequently asked questions</h2>
          <details>
            <summary>How many readings should I take at home?</summary>
            <p>Most guidance suggests taking 2–3 readings each time, 1 minute apart, twice daily for several days, then averaging. Avoid caffeine, alcohol, smoking and exercise 30 minutes prior; sit quietly 5 minutes.</p>
          </details>
          <details>
            <summary>Which number decides my category, systolic or diastolic?</summary>
            <p>The <em>higher</em> category between SBP and DBP determines your overall category (e.g., SBP 132 and DBP 76 is Stage 1).</p>
          </details>
          <details>
            <summary>What is a hypertensive crisis?</summary>
            <p>SBP ≥180 <em>and/or</em> DBP ≥120. This tool will highlight it with urgent advice to contact a clinician right away, especially with symptoms (chest pain, shortness of breath, neurological deficits).</p>
          </details>
          <details>
            <summary>Is MAP the same as my blood pressure?</summary>
            <p>No. MAP is a derived value estimating average arterial pressure across the cardiac cycle; it’s useful for perfusion assessment. It’s computed here using a standard approximation.</p>
          </details>
          <details>
            <summary>Are these thresholds the same worldwide?</summary>
            <p>ACC/AHA thresholds are widely used. Some regions/guidelines may differ slightly; we include an NHS tool reference for UK users. Always follow your clinician’s guidance.</p>
          </details>
          <details>
            <summary>Can anxiety or arm position skew results?</summary>
            <p>Yes. Poor technique (talking, legs crossed, unsupported arm, wrong cuff size) can spuriously raise readings. Keep the cuff at heart level and follow AHA technique.</p>
          </details>

          <div class="mt-6 p-4 bg-gray-50 border rounded text-sm text-gray-700">
            <p><strong>Tool developed by Ugo Candido.</strong> Content reviewed by the CalcDomain Editorial Board.<br>
              Last accuracy review: <time datetime="2025-10-30">October 30, 2025</time></p>
          </div>
        </article>
      </section>

      <aside class="w-full lg:w-1/3">
        <div class="sticky top-24 space-y-6">
          <div class="bg-white p-6 rounded-lg shadow-sm">
            <h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
              <li>Averages multiple readings and applies ACC/AHA rules transparently.</li>
              <li>Computes MAP and pulse pressure with clear formulas.</li>
              <li>Accessible, mobile-first UI with on-blur validation and tooltips.</li>
            </ul>
          </div>
          <div class="bg-gray-200 h-64 rounded-lg flex items-center justify-center text-gray-600">Ad Placement (300×600)</div>
          <div class="bg-white p-6 rounded-lg shadow-sm">
            <h3 class="font-bold text-lg mb-3">Related health tools</h3>
            <ul class="space-y-2 text-sm">
              <li><a class="text-blue-600 hover:underline" href="bmi-calculator.html">BMI Calculator</a></li>
              <li><a class="text-blue-600 hover:underline" href="heart-rate-zones-calculator.html">Heart Rate Zones</a></li>
              <li><a class="text-blue-600 hover:underline" href="cholesterol-calculator.html">Cholesterol Calculator</a></li>
            </ul>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-4 space-x-4">
        <a href="about.html" class="hover:text-blue-600">About</a>
        <a href="contact.html" class="hover:text-blue-600">Contact</a>
        <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
        <a href="terms.html" class="hover:text-blue-600">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator logic -->
  <script>
  (function(){
    const els = {
      context: document.getElementById('context'),
      avgMethod: document.getElementById('avgMethod'),
      units: document.getElementById('units'),
      sbp1: document.getElementById('sbp1'),
      dbp1: document.getElementById('dbp1'),
      sbp2: document.getElementById('sbp2'),
      dbp2: document.getElementById('dbp2'),
      sbp3: document.getElementById('sbp3'),
      dbp3: document.getElementById('dbp3'),
      discardFirst: document.getElementById('discardFirst'),
      calcBtn: document.getElementById('calcBtn'),
      clearBtn: document.getElementById('clearBtn'),
      avgReadout: document.getElementById('avgReadout'),
      classOut: document.getElementById('classOut'),
      classNote: document.getElementById('classNote'),
      categoryBadge: document.getElementById('categoryBadge'),
      mapOut: document.getElementById('mapOut'),
      ppOut: document.getElementById('ppOut'),
      guidance: document.getElementById('guidance'),
      // errors
      sbp1Err: document.getElementById('sbp1-err'),
      dbp1Err: document.getElementById('dbp1-err'),
      sbp2Err: document.getElementById('sbp2-err'),
      dbp2Err: document.getElementById('dbp2-err'),
      sbp3Err: document.getElementById('sbp3-err'),
      dbp3Err: document.getElementById('dbp3-err')
    };

    // Accessible tooltips toggles
    document.querySelectorAll('button[aria-controls]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('aria-controls');
        const tip = document.getElementById(id);
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        tip.classList.toggle('hidden');
      });
    });

    function parseNum(v){ const n = Number(v); return Number.isFinite(n) ? n : null; }

    function validatePair(sbp, dbp, errEls){
      let ok = true;
      const [sbpErr, dbpErr] = errEls;
      sbpErr.classList.add('hidden'); dbpErr.classList.add('hidden');
      if(sbp==null){ sbpErr.textContent = 'Please enter a systolic value.'; sbpErr.classList.remove('hidden'); ok=false; }
      if(dbp==null){ dbpErr.textContent = 'Please enter a diastolic value.'; dbpErr.classList.remove('hidden'); ok=false; }
      if(ok){
        if(sbp <= 50 || sbp >= 300){ sbpErr.textContent = 'SBP should be between 70–250 mmHg (plausible clinical range).'; sbpErr.classList.remove('hidden'); ok=false; }
        if(dbp <= 30 || dbp >= 200){ dbpErr.textContent = 'DBP should be between 40–150 mmHg (plausible clinical range).'; dbpErr.classList.remove('hidden'); ok=false; }
        if(ok && dbp >= sbp){ dbpErr.textContent = 'DBP must be less than SBP.'; dbpErr.classList.remove('hidden'); ok=false; }
      }
      return ok;
    }

    // Inline validation on blur
    [['sbp1','dbp1','sbp2','dbp2','sbp3','dbp3']].flat().forEach(id=>{
      const el = document.getElementById(id);
      el.addEventListener('blur', ()=>{
        const sbpId = id.startsWith('sbp') ? id : id.replace('dbp','sbp');
        const dbpId = id.startsWith('dbp') ? id : id.replace('sbp','dbp');
        const errs = [document.getElementById(sbpId+'-err'), document.getElementById(dbpId+'-err')];
        const sbp = parseNum(document.getElementById(sbpId).value);
        const dbp = parseNum(document.getElementById(dbpId).value);
        if(sbp==null && dbp==null) { errs[0].classList.add('hidden'); errs[1].classList.add('hidden'); return; }
        validatePair(sbp, dbp, errs);
      });
    });

    function pickAvg(values, method){
      const nums = values.filter(v=>Number.isFinite(v));
      if(nums.length===0) return null;
      if(method==='last') return nums[nums.length-1];
      if(method==='median'){
        const s=[...nums].sort((a,b)=>a-b);
        const m = Math.floor(s.length/2);
        return s.length%2? s[m] : (s[m-1]+s[m])/2;
      }
      // mean
      return nums.reduce((a,b)=>a+b,0)/nums.length;
    }

    function classify(sbp, dbp){
      if(sbp==null || dbp==null) return {label:'—', badge:'bg-gray-200 text-gray-800', note:''};
      if(sbp>=180 || dbp>=120) return {label:'Hypertensive crisis', badge:'bg-red-800 text-white', note:'Urgent evaluation recommended'};
      if(sbp>=140 || dbp>=90) return {label:'Stage 2 hypertension', badge:'bg-red-600 text-white', note:''};
      if((sbp>=130 && sbp<=139) || (dbp>=80 && dbp<=89)) return {label:'Stage 1 hypertension', badge:'bg-orange-500 text-white', note:''};
      if((sbp>=120 && sbp<=129) && dbp<80) return {label:'Elevated', badge:'bg-amber-400 text-black', note:''};
      if(sbp<120 && dbp<80) return {label:'Normal', badge:'bg-emerald-500 text-white', note:''};
      return {label:'—', badge:'bg-gray-200 text-gray-800', note:''};
    }

    function fmt(val){ return Number.isFinite(val) ? Math.round(val) : '—'; }

    function compute(){
      // Collect readings
      let readings = [
        {sbp: parseNum(els.sbp1.value), dbp: parseNum(els.dbp1.value), errs:[els.sbp1Err, els.dbp1Err]},
        {sbp: parseNum(els.sbp2.value), dbp: parseNum(els.dbp2.value), errs:[els.sbp2Err, els.dbp2Err]},
        {sbp: parseNum(els.sbp3.value), dbp: parseNum(els.dbp3.value), errs:[els.sbp3Err, els.dbp3Err]}
      ];

      // Optional discard first reading
      if(els.discardFirst.checked) readings = readings.slice(1);

      // Validate non-empty pairs
      const validPairs = readings.filter(r => r.sbp!=null || r.dbp!=null);
      if(validPairs.length===0){
        els.guidance.innerHTML = '<p class="text-gray-800">Please enter at least one SBP/DBP pair.</p>';
        return;
      }
      for(const r of validPairs){
        const ok = validatePair(r.sbp, r.dbp, r.errs);
        if(!ok) return;
      }

      const method = els.avgMethod.value;
      const sbpAvg = pickAvg(validPairs.map(r=>r.sbp), method);
      const dbpAvg = pickAvg(validPairs.map(r=>r.dbp), method);

      // Outputs
      els.avgReadout.textContent = Number.isFinite(sbpAvg)&&Number.isFinite(dbpAvg) ? `${Math.round(sbpAvg)}/${Math.round(dbpAvg)} mmHg` : '—';

      const cat = classify(sbpAvg, dbpAvg);
      els.classOut.textContent = cat.label;
      els.categoryBadge.textContent = cat.label;
      els.categoryBadge.className = 'badge ' + cat.badge;

      const pp = Number.isFinite(sbpAvg)&&Number.isFinite(dbpAvg) ? (sbpAvg - dbpAvg) : null;
      const map = Number.isFinite(sbpAvg)&&Number.isFinite(dbpAvg) ? (dbpAvg + (sbpAvg - dbpAvg)/3) : null;
      els.ppOut.textContent = fmt(pp);
      els.mapOut.textContent = fmt(map);

      // Guidance text
      let txt = '';
      if(cat.label==='Hypertensive crisis'){
        txt = '<p class="text-red-800 font-semibold">Your reading is in the hypertensive crisis range (≥180 and/or ≥120). Seek urgent medical advice, especially if symptomatic (chest pain, shortness of breath, neurologic symptoms).</p>';
      } else if(cat.label==='Stage 2 hypertension'){
        txt = '<p>Stage 2 hypertension. Discuss treatment options with your clinician. Lifestyle changes and medication are commonly recommended.</p>';
      } else if(cat.label==='Stage 1 hypertension'){
        txt = '<p>Stage 1 hypertension. Confirm with repeated home measurements. Lifestyle changes are first-line; medication may be considered based on overall CV risk.</p>';
      } else if(cat.label==='Elevated'){
        txt = '<p>Elevated blood pressure. Adopt lifestyle measures (sodium reduction, regular activity, weight management, limit alcohol) and recheck at home.</p>';
      } else if(cat.label==='Normal'){
        txt = '<p>Normal blood pressure. Keep up healthy habits and monitor periodically, especially if you have risk factors.</p>';
      } else {
        txt = '<p>Enter readings to see advice.</p>';
      }
      // Add small PP/MAP context
      if(Number.isFinite(pp) && Number.isFinite(map)){
        txt += `<p class="mt-2 text-gray-700">Pulse Pressure: <strong>${Math.round(pp)} mmHg</strong>; MAP: <strong>${Math.round(map)} mmHg</strong>.</p>`;
      }
      els.guidance.innerHTML = txt;
    }

    els.calcBtn.addEventListener('click', compute);
    ['context','avgMethod','units','discardFirst'].forEach(id=>{
      document.getElementById(id).addEventListener('change', compute);
    });
    els.clearBtn.addEventListener('click', ()=>{
      ['sbp1','dbp1','sbp2','dbp2','sbp3','dbp3'].forEach(id=>document.getElementById(id).value='');
      [els.sbp1Err, els.dbp1Err, els.sbp2Err, els.dbp2Err, els.sbp3Err, els.dbp3Err].forEach(e=>{ e.textContent=''; e.classList.add('hidden'); });
      els.avgReadout.textContent='—';
      els.classOut.textContent='—';
      els.categoryBadge.textContent='—';
      els.categoryBadge.className='badge bg-gray-200 text-gray-800';
      els.ppOut.textContent='—';
      els.mapOut.textContent='—';
      els.guidance.innerHTML='<p>Enter your readings and press <em>Calculate</em> to see guidance tailored to your category.</p>';
    });

  })();
  </script>
</body>
</html>

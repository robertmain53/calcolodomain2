<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Installment Loan Calculator: Monthly Payment &amp; Amortization</title>
    <meta name="description" content="Use this free Installment Loan Calculator to find your monthly payment, total interest, and see a complete amortization schedule. Fully accessible (WCAG AA).">
    <link rel="canonical" href="https://calcdomain.com/installment-loan-calculator">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async id="mathjax-script"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Typography & Content Styling */
        .prose { max-width: 65ch; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.5rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .prose table { width: 100%; margin-bottom: 1rem; border-collapse: collapse; }
        .prose th, .prose td { border: 1px solid #d1d5db; padding: 0.5rem 0.75rem; text-align: left; }
        .prose th { background-color: #f3f4f6; }
        
        /* Formula Box Styling */
        .formula-box {
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 1.5rem;
            overflow-x: auto;
            text-align: center;
            font-size: 1.125rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }

        /* FAQ/Details Styling */
        details {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 0.75rem;
        }
        details > summary {
            cursor: pointer;
            font-weight: 600;
            padding: 1rem;
            list-style: none; /* Hide default marker */
            position: relative;
        }
        details > summary::-webkit-details-marker { display: none; } /* Hide default marker */
        details > summary::after { /* Custom marker */
            content: '+';
            font-weight: 700;
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.25rem;
        }
        details[open] > summary::after { content: 'âˆ’'; }
        details[open] > summary { margin-bottom: 0.5rem; border-bottom: 1px solid #e5e7eb; }
        details div { padding: 0 1rem 1rem 1rem; }
        
        /* Results Card Styling */
        .result-card {
            background: #fff;
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            padding: 1.25rem;
            text-align: center;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        }
        .result-card h4 {
            font-size: 0.95rem;
            font-weight: 500;
            color: #6b7280;
            margin-bottom: 0.25rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .result-card p {
            font-size: 1.75rem;
            font-weight: 700;
            color: #2563eb;
            line-height: 2.25rem;
        }
        /* CLS Prevention: Set min-height for results area */
        #results-summary { min-height: 200px; }

        /* Form Input & Accessibility */
        label {
            display: block;
            margin-bottom: 0.25rem; /* Space between label and input */
            font-weight: 500;
        }
        input[type="number"], select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            box-sizing: border-box; /* Ensures padding doesn't affect width */
            min-height: 48px; /* WCAG Touch Target */
            font-size: 1rem;
        }
        /* WCAG Visible Focus */
        input[type="number"]:focus, select:focus, button:focus-visible {
            outline: 3px solid #3b82f6;
            outline-offset: 2px;
            border-color: #3b82f6;
            box-shadow: none;
        }
        /* Error Message Styling */
        .error-message {
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        /* Mark invalid fields */
        input[aria-invalid="true"] {
            border-color: #dc2626;
        }
        /* Accessibility Tooltip Button */
        .tooltip-btn {
            background: none;
            border: none;
            padding: 0.25rem;
            margin-left: 0.25rem;
            cursor: pointer;
            color: #6b7280;
            border-radius: 99px;
            min-height: 48px; /* Touch Target */
            min-width: 48px; /* Touch Target */
        }
        .tooltip-btn svg { width: 1rem; height: 1rem; }
        .tooltip-text {
            display: none; /* Hidden by default */
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            padding: 0.75rem;
            border-radius: 8px;
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }
        
        /* Button Styling */
        .btn {
            display: inline-block;
            font-weight: 600;
            text-align: center;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            min-height: 48px; /* Touch Target */
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .btn-primary {
            background-color: #2563eb;
            color: #ffffff;
        }
        .btn-primary:hover { background-color: #1d4ed8; }
        .btn-secondary {
            background-color: #e5e7eb;
            color: #1f2937;
        }
        .btn-secondary:hover { background-color: #d1d5db; }
        
        /* Print Styles */
        @media print {
            body * { visibility: hidden; }
            #print-section, #print-section * { visibility: visible; }
            #print-section { position: absolute; left: 0; top: 0; width: 100%; }
            header, footer, #ad-aside, #related-aside { display: none !important; }
            #calculator-ui, #content-ecosystem {
                box-shadow: none !important;
                border: none !important;
            }
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Installment Loan Calculator",
      "description": "Calculate monthly payments and total interest for an installment loan with a complete amortization schedule. Based on the standard annuity formula.",
      "url": "https://calcdomain.com/installment-loan-calculator",
      "inLanguage": "en",
      "author": {
        "@type": "Person",
        "name": "Ugo Candido"
      },
      "publisher": {
        "@type": "Organization",
        "name": "CalcDomain",
        "logo": {
          "@type": "ImageObject",
          "url": "https://calcdomain.com/logo.svg"
        }
      },
      "mainEntity": {
        "@type": "Calculator",
        "name": "Installment Loan Calculator",
        "description": "Computes the periodic payment, total interest, and amortization schedule for a fixed-rate installment loan.",
        "toolFor": "finance",
        "targetProperty": {
          "@type": "PropertyValue",
          "name": "Periodic Payment (Annuity)"
        }
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
        { "@type": "ListItem", "position": 2, "name": "Finance", "item": "https://calcdomain.com/finance" },
        { "@type": "ListItem", "position": 3, "name": "Loans & Debt", "item": "https://calcdomain.com/finance/loans-debt" },
        { "@type": "ListItem", "position": 4, "name": "Installment Loan Calculator", "item": "https://calcdomain.com/installment-loan-calculator" }
      ]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Calculate Installment Loan Payments",
      "description": "A step-by-step guide to calculating your monthly payment for an amortized loan.",
      "step": [
        {"@type": "HowToStep", "name": "Enter Loan Amount", "text": "Input the total principal amount you are borrowing ($)."},
        {"@type": "HowToStep", "name": "Enter Interest Rate", "text": "Input the Annual Percentage Rate (APR) of the loan as a percentage (%)."},
        {"@type": "HowToStep", "name": "Enter Loan Term", "text": "Input the total length of the loan in either years or months."},
        {"@type": "HowToStep", "name": "Calculate", "text": "The calculator uses the standard amortization formula to find your periodic payment."},
        {"@type": "HowToStep", "name": "Review Results", "text": "See your monthly payment, total interest paid, total cost, and a full payment schedule."}
      ]
    }
    </script>
    
    <script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

    <header class="bg-white shadow-sm">
        <nav class="container mx-auto px-4 lg:px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

                <div class="w-full max-w-md hidden md:block mx-8">
                    <div class="relative">
                        <input type="search" id="search-input" placeholder="Search for a calculator..."
                               class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                               autocomplete="off">
                        <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
                             fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
                    </div>
                </div>

                <div class="hidden md:flex items-center space-x-6 text-sm">
                    <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
                    <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
                </div>

                <button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>

            <div id="mobile-menu" class="md:hidden mt-4 hidden">
                <div class="space-y-2">
                    <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
                    <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 lg:px-6 py-10">
        <div class="flex flex-col lg:flex-row gap-8">

            <section class="w-full lg:w-2/3">
                <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
                    <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
                    <a href="finance.html" class="hover:text-blue-600">Finance</a> &raquo;
                    <a href="subcategories/finance-loans-debt.html" class="hover:text-blue-600">Loans &amp; Debt</a> &raquo;
                    <span class="text-gray-900" aria-current="page">Installment Loan Calculator</span>
                </nav>

                <div id="print-section">

                    <section id="calculator-ui" class="bg-white p-6 rounded-lg shadow-md" aria-labelledby="calculator-heading">
                        <h1 id="calculator-heading" class="text-3xl font-extrabold text-gray-900 mb-2">Installment Loan Calculator</h1>
                        <p class="text-gray-600 mb-6">This tool helps you calculate the fixed monthly payment for an installment loan, such as a personal loan, car loan, or mortgage. See how much interest you'll pay and your complete payoff schedule.</p>

                        <form id="loan-form" class="space-y-6" novalidate onsubmit="return false;">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                
                                <div>
                                    <label for="loanAmount">Loan Amount ($)<span aria-hidden="true"> *</span></label>
                                    <input type="number" id="loanAmount" value="25000" step="100" min="1"
                                           class="mt-1"
                                           aria-required="true"
                                           aria-describedby="loanAmount-error">
                                    <div id="loanAmount-error" class="error-message" aria-live="polite"></div>
                                </div>

                                <div>
                                    <label for="interestRate">Annual Interest Rate (APR %)<span aria-hidden="true"> *</span></label>
                                    <input type="number" id="interestRate" value="7.5" step="0.01" min="0"
                                           class="mt-1"
                                           aria-required="true"
                                           aria-describedby="interestRate-error">
                                    <div id="interestRate-error" class="error-message" aria-live="polite"></div>
                                </div>

                                <div>
                                    <label for="loanTerm">Loan Term<span aria-hidden="true"> *</span></label>
                                    <input type="number" id="loanTerm" value="5" step="1" min="1"
                                           class="mt-1"
                                           aria-required="true"
                                           aria-describedby="loanTerm-error">
                                    <div id="loanTerm-error" class="error-message" aria-live="polite"></div>
                                </div>
                                
                                <div>
                                    <label for="termUnits">Term Unit</label>
                                    <select id="termUnits" class="mt-1">
                                        <option value="years" selected>Years</option>
                                        <option value="months">Months</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="flex flex-col sm:flex-row gap-4 pt-4 border-t border-gray-200">
                                <button type="button" id="calculate-btn" class="btn btn-primary w-full sm:w-auto">Calculate</button>
                                <button type="button" id="reset-btn" class="btn btn-secondary w-full sm:w-auto">Reset</button>
                            </div>
                        </form>
                    </section>
                    
                    <section id="results" class="mt-8" aria-labelledby="results-heading">
                        <h2 id="results-heading" class="sr-only">Calculation Results</h2>
                        <div id="results-summary" class="bg-blue-50 border border-blue-100 rounded-lg p-6">
                            <div class="flex flex-col md:flex-row gap-6">
                                <div class="w-full md:w-2/3 grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div class="result-card">
                                        <h4>Monthly Payment</h4>
                                        <p id="monthlyPayment">$0.00</p>
                                    </div>
                                    <div class="result-card">
                                        <h4>Total Interest</h4>
                                        <p id="totalInterest">$0.00</p>
                                    </div>
                                    <div class="result-card">
                                        <h4>Total Cost</h4>
                                        <p id="totalCost">$0.00</p>
                                    </div>
                                    <div class="result-card">
                                        <h4>Payoff Date</h4>
                                        <p id="payoffDate">â€”</p>
                                    </div>
                                </div>
                                <div class="w-full md:w-1/3">
                                    <div id="results-chart-container" class="h-48 md:h-full">
                                        <canvas id="resultsChart" aria-label="Loan Principal vs. Total Interest Chart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <details id="scheduleDetails" class="mt-6 bg-white rounded-lg shadow-sm" open>
                            <summary class="font-semibold text-gray-800 text-lg">View Amortization Schedule</summary>
                            <div class="mt-4 overflow-x-auto border border-gray-200 rounded-lg" id="scheduleContainer">
                                <table class="min-w-full text-sm text-right">
                                    <thead class="bg-gray-100 text-gray-700 uppercase">
                                        <tr>
                                            <th class="px-4 py-3 text-left">Month</th>
                                            <th class="px-4 py-3 text-left">Date</th>
                                            <th class="px-4 py-3">Payment</th>
                                            <th class="px-4 py-3">Interest</th>
                                            <th class="px-4 py-3">Principal</th>
                                            <th class="px-4 py-3">Balance</th>
                                        </tr>
                                    </thead>
                                    <tbody id="scheduleBody">
                                        <tr><td colspan="6" class="text-center p-6">Enter loan details to see the schedule.</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </details>
                    </section>
                </div>

                <article id="content-ecosystem" class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
                    
                    <section aria-labelledby="methodology-heading">
                        <h2 id="methodology-heading">Data Source and Methodology</h2>
                        <p>This calculator uses the standard, industry-accepted formula for calculating the payment on an amortized loan, also known as the "present value of an annuity" formula. This is the same formula used for mortgages, auto loans, and most fixed-rate personal loans.</p>
                        <p class="font-medium">All calculations are based rigorously on this mathematical principle.</p>
                    </section>
                    
                    <section aria-labelledby="formula-heading">
                        <h2 id="formula-heading">The Formula Explained</h2>
                        <p>The periodic payment (M) is calculated using the following formula:</p>
                        <div class="formula-box">
                            $$ M = P \frac{r(1+r)^n}{(1+r)^n - 1} $$
                        </div>
                        <p>Where each variable represents:</p>
                        <ul>
                            <li><strong>$M$</strong> = Your periodic payment</li>
                            <li><strong>$P$</strong> = The principal loan amount</li>
                            <li><strong>$r$</strong> = The periodic interest rate (your annual rate divided by 12)</li>
                            <li><strong>$n$</strong> = The total number of payments (your term in years multiplied by 12)</li>
                        </ul>
                    </section>
                    
                    <section aria-labelledby="glossary-heading">
                        <h2 id="glossary-heading">Glossary of Variables</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Term</th>
                                    <th>Definition</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Loan Amount (P)</strong></td>
                                    <td>The total amount of money you are borrowing.</td>
                                </tr>
                                <tr>
                                    <td><strong>Annual Interest Rate (APR)</strong></td>
                                    <td>The yearly cost of the loan, expressed as a percentage.</td>
                                </tr>
                                <tr>
                                    <td><strong>Loan Term (n)</strong></td>
                                    <td>The total time you have to repay the loan, typically in years or months.</td>
                                </tr>
                                <tr>
                                    <td><strong>Monthly Payment (M)</strong></td>
                                    <td>The fixed amount you pay each month, which includes both principal and interest.</td>
                                </tr>
                                <tr>
                                    <td><strong>Principal (Payment)</strong></td>
                                    <td>The portion of your monthly payment that goes towards reducing your loan balance.</td>
                                </tr>
                                <tr>
                                    <td><strong>Interest (Payment)</strong></td>
                                    <td>The portion of your monthly payment that pays for the cost of borrowing.</td>
                                </tr>
                                <tr>
                                    <td><strong>Total Interest</strong></td>
                                    <td>The cumulative sum of all interest paid over the entire life of the loan.</td>
                                </tr>
                                <tr>
                                    <td><strong>Amortization</strong></td>
                                    <td>The process of paying off debt over time in regular installments of principal and interest.</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                    
                    <section aria-labelledby="example-heading">
                        <h2 id="example-heading">How It Works: A Step-by-Step Example</h2>
                        <p>Let's say you take out a <strong>$25,000</strong> loan for <strong>5 years</strong> at an annual interest rate of <strong>7.5%</strong>.</p>
                        <ol>
                            <li>
                                <strong>Identify the variables:</strong>
                                <ul>
                                    <li>$P$ (Principal) = $25,000</li>
                                    <li>Annual Rate = 7.5% (or 0.075)</li>
                                    <li>Term = 5 years</li>
                                </ul>
                            </li>
                            <li>
                                <strong>Calculate the periodic rate (r) and total payments (n):</strong>
                                <ul>
                                    <li>$r$ (monthly rate) = 0.075 / 12 = 0.00625</li>
                                    <li>$n$ (total payments) = 5 years * 12 months/year = 60 payments</li>
                                </ul>
                            </li>
                            <li>
                                <strong>Plug the values into the formula:</strong>
                                <p>$$ M = 25000 \times \frac{0.00625 \times (1+0.00625)^{60}}{(1+0.00625)^{60} - 1} $$</p>
                            </li>
                            <li>
                                <strong>Solve the equation:</strong>
                                <p>$$ M = 25000 \times \frac{0.00625 \times (1.45329...)}{(1.45329...) - 1} $$</p>
                                <p>$$ M = 25000 \times \frac{0.009083...}{0.45329...} $$</p>
                                <p>$$ M = 25000 \times 0.020038... $$</p>
                            </li>
                            <li>
                                <strong>Final Monthly Payment:</strong>
                                <p>$$ M = \$500.95 $$</p>
                            </li>
                        </ol>
                    </section>

                    <section aria-labelledby="faq-heading">
                        <h2 id="faq-heading">Frequently Asked Questions (FAQ)</h2>
                        <details>
                            <summary>What's the difference between installment and simple interest loans?</summary>
                            <div>
                                <p>This calculator is for <strong>installment (amortized) loans</strong>. In this model, each payment is split between principal and interest. The interest is calculated based on the *remaining loan balance*. As you pay down the balance, the interest portion of your payment decreases, and the principal portion increases.</p>
                                <p>A <strong>simple interest loan</strong> (less common for personal loans) calculates interest based on the *original principal* for the entire loan term. The interest does not compound or change based on the balance.</p>
                            </div>
                        </details>
                        <details>
                            <summary>How can I pay off my loan faster?</summary>
                            <div>
                                <p>You can pay off an installment loan faster by making extra payments. The most common methods are:</p>
                                <ul>
                                    <li><strong>Extra Principal Payments:</strong> Adding an extra amount to your monthly payment. Ensure your lender applies this extra amount directly to the principal balance.</li>
                                    <li><strong>Bi-weekly Payments:</strong> Making half-payments every two weeks. This results in 26 half-payments, or 13 full monthly payments per year, effectively adding one extra payment annually.</li>
                                </ul>
                                <p>Both methods reduce your principal balance faster, which in turn reduces the total interest you pay over the life of the loan.</p>
                            </div>
                        </details>
                        <details>
                            <summary>What is APR (Annual Percentage Rate)?</summary>
                            <div>
                                <p>APR, or Annual Percentage Rate, is the yearly interest rate charged on the loan. It is a crucial number for comparing loan offers, as a lower APR generally means a less expensive loan.</p>
                            </div>
                        </details>
                        <details>
                            <summary>Does this calculator include fees?</summary>
                            <div>
                                <p>No. This calculator determines your payment based only on the principal, interest rate, and term. It does not account for one-time origination fees, annual fees, or potential late fees, which could be part of your loan agreement. Always read the loan terms carefully.</p>
                            </div>
                        </details>
                        <details>
                            <summary>What is a loan amortization schedule?</summary>
                            <div>
                                <p>The amortization schedule (shown in the table above) is a complete list of every payment you will make over the life of the loan. It breaks down each individual payment into its interest and principal components, showing you exactly how your balance decreases with every payment until it reaches zero.</p>
                            </div>
                        </details>
                    </section>

                    <div class="mt-8 pt-6 border-t border-gray-200 text-sm text-gray-600">
                        <p><strong>Tool developed by Ugo Candido.</strong></p>
                        <p>Financial methodology and content verified by the CalcDomain Editorial Board.</p>
                        <p>Last review for accuracy: <time datetime="2025-10-31">October 31, 2025</time></p>
                    </div>
                </article>
            </section>

            <aside class="w-full lg:w-1/3">
                <div class="sticky top-24 space-y-6">
                    <div id="ad-aside" class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
                        Ad Placement (300Ã—600)
                    </div>
                    <div id="related-aside" class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-4">Related Loan Tools</h3>
                        <ul class="space-y-3 text-sm">
                            <li><a href="loan-prepayment.html" class="text-blue-600 hover:underline">Loan Prepayment Calculator</a></li>
                            <li><a href="loan-comparison.html" class="text-blue-600 hover:underline">Loan Comparison Calculator</a></li>
                            <li><a href="personal-loan.html" class="text-blue-600 hover:underline">Personal Loan Calculator</a></li>
                            <li><a href="auto-loan.html" class="text-blue-600 hover:underline">Auto Loan Calculator</a></li>
                            <li><a href="apr.html" class="text-blue-600 hover:underline">APR Calculator</a></li>
                        </ul>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <footer class="bg-white border-t mt-12">
        <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
            <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
            <div class="mt-4 space-x-4">
                <a href="about.html" class="hover:text-blue-600">About</a>
                <a href="contact.html" class="hover:text-blue-600">Contact</a>
                <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
                <a href="terms.html" class="hover:text-blue-600">Terms</a>
            </div>
        </div>
    </footer>

    <script defer>
    document.addEventListener('DOMContentLoaded', () => {
        
        // --- Element Cache ---
        const ui = {
            form: document.getElementById('loan-form'),
            loanAmount: document.getElementById('loanAmount'),
            interestRate: document.getElementById('interestRate'),
            loanTerm: document.getElementById('loanTerm'),
            termUnits: document.getElementById('termUnits'),
            calculateBtn: document.getElementById('calculate-btn'),
            resetBtn: document.getElementById('reset-btn'),
            
            monthlyPayment: document.getElementById('monthlyPayment'),
            totalInterest: document.getElementById('totalInterest'),
            totalCost: document.getElementById('totalCost'),
            payoffDate: document.getElementById('payoffDate'),
            
            scheduleBody: document.getElementById('scheduleBody'),
            resultsChart: document.getElementById('resultsChart')
        };
        
        let chartInstance = null;
        
        // --- Formatters ---
        const fmtCurrency = (val) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(val || 0);
        const fmtDate = (date) => new Intl.DateTimeFormat('en-US', { year: 'numeric', month: 'short' }).format(date);

        // --- Input Validation ---
        const validators = {
            loanAmount: (val) => val > 0 ? '' : 'Loan amount must be greater than $0.',
            interestRate: (val) => val >= 0 ? '' : 'Interest rate cannot be negative.',
            loanTerm: (val) => val > 0 ? '' : 'Loan term must be greater than 0.'
        };

        function validateField(inputEl) {
            const validator = validators[inputEl.id];
            if (!validator) return true;
            
            const errorMsg = validator(parseFloat(inputEl.value));
            const errorEl = document.getElementById(`${inputEl.id}-error`);
            
            if (errorMsg) {
                errorEl.textContent = errorMsg;
                inputEl.setAttribute('aria-invalid', 'true');
                return false;
            } else {
                errorEl.textContent = '';
                inputEl.setAttribute('aria-invalid', 'false');
                return true;
            }
        }

        function validateForm() {
            const isLoanAmountValid = validateField(ui.loanAmount);
            const isInterestRateValid = validateField(ui.interestRate);
            const isLoanTermValid = validateField(ui.loanTerm);
            return isLoanAmountValid && isInterestRateValid && isLoanTermValid;
        }

        // --- Core Calculation Engine ---
        function calculateAmortization() {
            if (!validateForm()) {
                clearResults(); // Clear results if form is invalid
                return;
            }

            const principal = parseFloat(ui.loanAmount.value);
            const annualRate = parseFloat(ui.interestRate.value) / 100;
            const termValue = parseFloat(ui.loanTerm.value);
            const termInMonths = ui.termUnits.value === 'years' ? termValue * 12 : termValue;
            
            const monthlyRate = annualRate / 12;
            const n = termInMonths; // Total number of payments

            let monthlyPayment, totalInterest, totalCost;
            let schedule = [];
            
            if (monthlyRate > 0) {
                // Standard Amortization Formula
                const pow = Math.pow(1 + monthlyRate, n);
                monthlyPayment = principal * (monthlyRate * pow) / (pow - 1);
                totalCost = monthlyPayment * n;
                totalInterest = totalCost - principal;
            } else {
                // Interest-free loan
                monthlyPayment = principal / n;
                totalCost = principal;
                totalInterest = 0;
            }

            let balance = principal;
            let paymentDate = new Date();
            paymentDate.setDate(1); // Start from the 1st of next month

            for (let i = 1; i <= n; i++) {
                paymentDate.setMonth(paymentDate.getMonth() + 1);
                
                const interestPayment = balance * monthlyRate;
                const principalPayment = monthlyPayment - interestPayment;
                balance -= principalPayment;

                // Adjust last payment for rounding
                if (i === n) {
                    const finalPrincipal = principalPayment + balance;
                    monthlyPayment = interestPayment + finalPrincipal;
                    balance = 0;
                }

                schedule.push({
                    month: i,
                    date: new Date(paymentDate.getTime()),
                    payment: monthlyPayment,
                    interest: interestPayment,
                    principal: principalPayment,
                    balance: balance
                });
            }

            updateOutputs(monthlyPayment, totalInterest, totalCost, schedule);
        }

        // --- UI Update Functions ---
        function updateOutputs(monthlyPayment, totalInterest, totalCost, schedule) {
            ui.monthlyPayment.textContent = fmtCurrency(monthlyPayment);
            ui.totalInterest.textContent = fmtCurrency(totalInterest);
            ui.totalCost.textContent = fmtCurrency(totalCost);
            
            const lastPayment = schedule[schedule.length - 1];
            ui.payoffDate.textContent = lastPayment ? fmtDate(lastPayment.date) : 'â€”';

            renderSchedule(schedule);
            renderChart(parseFloat(ui.loanAmount.value), totalInterest);
        }

        function renderSchedule(schedule) {
            if (!schedule.length) {
                ui.scheduleBody.innerHTML = `<tr><td colspan="6" class="text-center p-6">Enter valid loan details to see the schedule.</td></tr>`;
                return;
            }
            
            const rows = schedule.map(row => `
                <tr class="border-t border-gray-200">
                    <td class="px-4 py-3 text-left">${row.month}</td>
                    <td class="px-4 py-3 text-left">${fmtDate(row.date)}</td>
                    <td class="px-4 py-3">${fmtCurrency(row.payment)}</td>
                    <td class="px-4 py-3">${fmtCurrency(row.interest)}</td>
                    <td class="px-4 py-3">${fmtCurrency(row.principal)}</td>
                    <td class="px-4 py-3">${fmtCurrency(row.balance)}</td>
                </tr>
            `).join('');
            
            ui.scheduleBody.innerHTML = rows;
        }

        function renderChart(principal, interest) {
            const ctx = ui.resultsChart.getContext('2d');
            if (!ctx) return;

            const data = {
                labels: ['Principal', 'Total Interest'],
                datasets: [{
                    data: [Math.max(0, principal), Math.max(0, interest)],
                    backgroundColor: ['#1d4ed8', '#f97316'],
                    borderWidth: 0
                }]
            };

            if (chartInstance) {
                chartInstance.data = data;
                chartInstance.update();
            } else {
                chartInstance = new Chart(ctx, {
                    type: 'doughnut',
                    data: data,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    boxWidth: 12
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.raw || 0;
                                        return `${label}: ${fmtCurrency(value)}`;
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        function clearResults() {
            ui.monthlyPayment.textContent = '$0.00';
            ui.totalInterest.textContent = '$0.00';
            ui.totalCost.textContent = '$0.00';
            ui.payoffDate.textContent = 'â€”';
            ui.scheduleBody.innerHTML = `<tr><td colspan="6" class="text-center p-6">Enter loan details to see the schedule.</td></tr>`;
            if (chartInstance) {
                chartInstance.data.datasets[0].data = [0, 0];
                chartInstance.update();
            }
        }
        
        function resetForm() {
            ui.form.reset();
            [ui.loanAmount, ui.interestRate, ui.loanTerm].forEach(input => {
                const errorEl = document.getElementById(`${input.id}-error`);
                errorEl.textContent = '';
                input.setAttribute('aria-invalid', 'false');
            });
            clearResults();
            // Set default values again
            ui.loanAmount.value = '25000';
            ui.interestRate.value = '7.5';
            ui.loanTerm.value = '5';
            calculateAmortization(); // Recalculate with defaults
        }

        // --- Event Listeners ---
        ui.calculateBtn.addEventListener('click', calculateAmortization);
        ui.resetBtn.addEventListener('click', resetForm);
        
        // Real-time validation on blur
        [ui.loanAmount, ui.interestRate, ui.loanTerm].forEach(input => {
            input.addEventListener('blur', () => validateField(input));
        });

        // Mobile Menu Toggle
        const menuToggle = document.getElementById('mobile-menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        menuToggle.addEventListener('click', () => {
            const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
            menuToggle.setAttribute('aria-expanded', !isExpanded);
            mobileMenu.classList.toggle('hidden');
        });

        // --- Initial Calculation ---
        calculateAmortization();
    });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Torque to HP Calculator - Convert Torque, HP &amp; RPM</title>
<meta name="description" content="Instantly calculate horsepower (HP), torque (lb-ft), or RPM. Understand the formula, see examples, and learn the core relationship between engine power and speed.">
<link rel="canonical" href="https://calcdomain.com/torque-to-hp-calculator.html"/>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.5rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
font-size: 1.125rem;
text-align: center;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 1.1rem; color: #6b7280; margin-bottom: 0.5rem; font-weight: 500; }
.result-card p { font-size: 2.5rem; font-weight: 700; color: #2563eb; }
.input-group[aria-hidden="true"] { display: none; }
.tooltip-btn {
display: inline-flex;
align-items: center;
justify-content: center;
width: 20px;
height: 20px;
border-radius: 50%;
border: 1px solid #9ca3af;
background: #f3f4f6;
color: #6b7280;
font-weight: 700;
font-size: 0.8rem;
cursor: help;
margin-left: 8px;
}
.tooltip-text {
display: none;
position: absolute;
z-index: 10;
width: 280px;
background: #1f2937;
color: #fff;
padding: 1rem;
border-radius: 8px;
font-size: 0.875rem;
line-height: 1.5;
margin-top: 8px;
box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}
.tooltip-btn[aria-expanded="true"] + .tooltip-text {
display: block;
}
/* WCAG-compliant focus state */
:focus-visible {
outline: 3px solid #3b82f6;
outline-offset: 2px;
}
input:focus-visible {
border-color: #3b82f6;
box-shadow: 0 0 0 1px #3b82f6;
}
.error-text {
color: #dc2626;
font-size: 0.875rem;
margin-top: 0.5rem;
}
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
}
</style>

<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "WebPage",
"name": "Torque to HP Calculator",
"description": "Instantly calculate horsepower (HP), torque (lb-ft), or RPM. Understand the formula, see examples, and learn the core relationship between engine power and speed.",
"url": "https://calcdomain.com/torque-to-hp-calculator.html",
"inLanguage": "en",
"author": { "@type": "Person", "name": "Ugo Candido" },
"publisher": { "@type": "Organization", "name": "CalcDomain" }
}
</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "BreadcrumbList",
"itemListElement": [
{ "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
{ "@type": "ListItem", "position": 2, "name": "Everyday Life", "item": "https://calcdomain.com/lifestyle-everyday.html" },
{ "@type": "ListItem", "position": 3, "name": "Automotive", "item": "https://calcdomain.com/subcategories/automotive.html" },
{ "@type": "ListItem", "position": 4, "name": "Torque to HP Calculator", "item": "https://calcdomain.com/torque-to-hp-calculator.html" }
]
}
</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "HowTo",
"name": "How to Calculate Horsepower, Torque, or RPM",
"description": "A step-by-step guide to calculating any one variable in the engine power formula (HP, Torque, or RPM) when the other two are known.",
"step": [
{
"@type": "HowToStep",
"name": "Select Calculation",
"text": "Choose which variable you want to calculate: Horsepower, Torque, or RPM.",
"url": "https://calcdomain.com/torque-to-hp-calculator.html#calculator-ui",
"image": "step1-select.png"
},
{
"@type": "HowToStep",
"name": "Enter Known Values",
"text": "Input the two known values into the corresponding fields. For example, if calculating Horsepower, enter the Torque (lb-ft) and RPM.",
"url": "https://calcdomain.com/torque-to-hp-calculator.html#calculator-ui",
"image": "step2-input.png"
},
{
"@type": "HowToStep",
"name": "Review Result",
"text": "The calculator instantly displays the calculated result in the output panel, along with the correct unit (HP, lb-ft, or RPM).",
"url": "https://calcdomain.com/torque-to-hp-calculator.html#results",
"image": "step3-result.png"
}
]
}
</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "FAQPage",
"mainEntity": [
{
"@type": "Question",
"name": "Why the number 5252?",
"acceptedAnswer": {
"@type": "Answer",
"text": "The constant 5252 is the result of converting units. One horsepower is defined as 33,000 ft-lb of work per minute. An engine's speed is in revolutions per minute. To get from 'revolutions' to 'ft-lb per minute', we use radians (2π radians per revolution). The math is: (33,000 ft-lb/min) / (2π rad/rev) ≈ 5252.1. This constant correctly standardizes the units in the formula."
}
},
{
"@type": "Question",
"name": "Do horsepower and torque always cross at 5252 RPM?",
"acceptedAnswer": {
"@type": "Answer",
"text": "Yes, mathematically, if torque is measured in lb-ft and horsepower is calculated using the standard formula, the HP and torque values will be identical at 5252 RPM. At this speed, (Torque × 5252) / 5252 = HP, which simplifies to Torque = HP. Below 5252 RPM, the torque value will be numerically higher than the HP value. Above 5252 RPM, the horsepower value will be higher."
}
},
{
"@type": "Question",
"name": "What is more important: horsepower or torque?",
"acceptedAnswer": {
"@type": "Answer",
"text": "Neither is 'more important'; they describe different things. Torque is the raw twisting force (the 'grunt' or 'pull') available at the crankshaft. It's what gets the car moving and what you feel as acceleration. Horsepower is the *rate* at which that torque can be applied (Torque × Speed). High torque at low RPM is great for towing. High horsepower at high RPM is great for high top speeds."
}
},
{
"@type": "Question",
"name": "Does this formula work for electric motors?",
"acceptedAnswer": {
"@type": "Answer",
"text": "Yes, the physics and the formula are identical for any rotating motor, whether it's an internal combustion engine, an electric motor, or a steam turbine. As long as you measure the torque output (in lb-ft) and the rotational speed (in RPM), this formula will correctly calculate the horsepower."
}
},
{
"@type": "Question",
"name": "What about other units like kW or N·m?",
"acceptedAnswer": {
"@type": "Answer",
"text": "This calculator is specifically designed for the imperial units common in the United States: horsepower (HP) and pound-feet (lb-ft). A different constant is required for metric units. The formula using kilowatts (kW) and Newton-meters (N·m) is: kW = (Torque_in_Nm × RPM) / 9549."
}
]
}
</script>

<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..."
class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu" aria-expanded="false">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
<a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="lifestyle-everyday.html" class="hover:text-blue-600">Everyday Life</a> &raquo;
<a href="subcategories/automotive.html" class="hover:text-blue-600">Automotive</a> &raquo;
<span class="text-gray-900">Torque to HP Calculator</span>
</nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Torque to HP Calculator</h1>
<p class="text-gray-600 mb-6">This calculator determines an engine's horsepower (HP), torque (lb-ft), or RPM (engine speed) when the other two values are known. It's an essential tool for automotive enthusiasts, engineers, and technicians to understand the direct relationship between power, torque, and rotational speed.</p>

<section id="calculator-ui" aria-label="Engine Power Calculator">
<fieldset class="mb-6">
<legend class="block text-base font-medium text-gray-900 mb-3">Select what to calculate:</legend>
<div class="flex flex-col sm:flex-row gap-4">
<div class="flex items-center">
<input id="calc-hp" name="calculation-type" type="radio" value="hp" class="h-4 w-4 text-blue-600 border-gray-300" checked>
<label for="calc-hp" class="ml-3 block text-sm font-medium text-gray-700">Calculate Horsepower (HP)</label>
</div>
<div class="flex items-center">
<input id="calc-torque" name="calculation-type" type="radio" value="torque" class="h-4 w-4 text-blue-600 border-gray-300">
<label for="calc-torque" class="ml-3 block text-sm font-medium text-gray-700">Calculate Torque (lb-ft)</label>
</div>
<div class="flex items-center">
<input id="calc-rpm" name="calculation-type" type="radio" value="rpm" class="h-4 w-4 text-blue-600 border-gray-300">
<label for="calc-rpm" class="ml-3 block text-sm font-medium text-gray-700">Calculate RPM</label>
</div>
</div>
</fieldset>

<div class="space-y-6">
<div class="input-group" id="torque-group">
<div class="flex items-center">
<label for="torque" class="block text-sm font-medium text-gray-700">Torque (lb-ft)</label>
<button type="button" class="tooltip-btn" aria-label="What is Torque?" aria-expanded="false" aria-controls="torque-tooltip">?</button>
<div id="torque-tooltip" role="tooltip" class="tooltip-text">Pound-foot (lb-ft) is a unit of torque, representing the rotational force. Enter the torque value here.</div>
</div>
<input type="number" id="torque" min="0" step="1" aria-required="true" aria-describedby="torque-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<div id="torque-error" class="error-text" aria-live="polite"></div>
</div>

<div class="input-group" id="rpm-group">
<div class="flex items-center">
<label for="rpm" class="block text-sm font-medium text-gray-700">Engine Speed (RPM)</label>
<button type="button" class="tooltip-btn" aria-label="What is RPM?" aria-expanded="false" aria-controls="rpm-tooltip">?</button>
<div id="rpm-tooltip" role="tooltip" class="tooltip-text">Revolutions Per Minute (RPM) is the speed at which the engine's crankshaft is rotating.</div>
</div>
<input type="number" id="rpm" min="0" step="50" aria-required="true" aria-describedby="rpm-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<div id="rpm-error" class="error-text" aria-live="polite"></div>
</div>

<div class="input-group" id="hp-group" aria-hidden="true">
<div class="flex items-center">
<label for="hp" class="block text-sm font-medium text-gray-700">Horsepower (HP)</label>
<button type="button" class="tooltip-btn" aria-label="What is Horsepower?" aria-expanded="false" aria-controls="hp-tooltip">?</button>
<div id="hp-tooltip" role="tooltip" class="tooltip-text">Horsepower (HP) is a unit of power, or the rate at which work is done.</div>
</div>
<input type="number" id="hp" min="0" step="1" aria-required="true" aria-describedby="hp-error"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<div id="hp-error" class="error-text" aria-live="polite"></div>
</div>
</div>
</section>

<section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6" style="min-height: 150px;">
<div class="result-card bg-blue-50 border-0 shadow-none">
<h4 id="result-title">Calculated Horsepower</h4>
<p id="result-value" class="text-blue-600">0 HP</p>
</div>
</section>

</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
<h2>Data Source and Methodology</h2>
<p>This calculator uses the standard, universally accepted engineering formula for converting torque and RPM to horsepower. This formula is derived from the definition of horsepower (1 HP = 33,000 ft-lb/min) and is consistent with industry standards such as **SAE J1349 (Engine Power Test Code)**.</p>
<p>All calculations are based strictly on the formulas provided by this standard.</p>

<h2>The Formulas Explained</h2>
<p>The relationship between horsepower, torque, and RPM is fixed by a mathematical constant: <strong>5252</strong>. This number is derived from the conversion of units (explained in the FAQ below).</p>
<p>The three variations of the formula are:</p>
<div class="formula-box" aria-label="Horsepower Formula">
$$ Horsepower (HP) = \frac{Torque (lb-ft) \times RPM}{5252} $$
</div>
<div class="formula-box mt-4" aria-label="Torque Formula">
$$ Torque (lb-ft) = \frac{Horsepower (HP) \times 5252}{RPM} $$
</div>
<div class="formula-box mt-4" aria-label="RPM Formula">
$$ RPM = \frac{Horsepower (HP) \times 5252}{Torque (lb-ft)} $$
</div>

<h2>Glossary of Variables</h2>
<dl>
<dt class="font-semibold">Horsepower (HP)</dt>
<dd class="mb-4 ml-4">A measure of the <strong>rate</strong> at which work is done. In automotive terms, it's a measure of an engine's maximum power and often correlates with a vehicle's top speed.</dd>

<dt class="font-semibold">Torque (lb-ft)</dt>
<dd class="mb-4 ml-4">A measure of <strong>rotational force</strong> (specifically, pound-feet). In automotive terms, torque is the "grunt" or "pulling power" of an engine. It's what gets the vehicle moving from a stop and what you feel as acceleration.</dd>

<dt class="font-semibold">Engine Speed (RPM)</dt>
<dd class="mb-4 ml-4">Stands for <strong>Revolutions Per Minute</strong>. This is the speed at which the engine's crankshaft is rotating.</dd>
</dl>

<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's say a performance engine is rated by the manufacturer as producing <strong>400 lb-ft of torque</strong> at <strong>5,000 RPM</strong>. We want to find its horsepower at that specific point.</p>
<ol>
<li><strong>Select the formula:</strong> We want to find HP, so we use: $HP = \frac{Torque \times RPM}{5252}$.</li>
<li><strong>Input the values:</strong> $HP = \frac{400 \times 5000}{5252}$.</li>
<li><strong>Calculate the top half:</strong> $400 \times 5000 = 2,000,000$.</li>
<li><strong>Divide by the constant:</strong> $HP = \frac{2,000,000}{5252}$.</li>
<li><strong>Final Result:</strong> $HP \approx 380.8 HP$.</li>
</ol>
<p>This means that at 5,000 RPM, that engine is producing 380.8 horsepower.</p>

<h2>Frequently Asked Questions</h2>
<details>
<summary>Why the number 5252?</summary>
<p>The constant 5252 is the result of converting units. One horsepower is defined as 33,000 ft-lb of work per minute. An engine's speed is in revolutions per minute. To get from 'revolutions' to 'ft-lb per minute', we use radians (2π radians per revolution). The math is: $\frac{33,000 \text{ ft-lb/min}}{2\pi \text{ rad/rev}} \approx 5252.1$. This constant correctly standardizes the units in the formula.</p>
</details>
<details>
<summary>Do horsepower and torque always cross at 5252 RPM?</summary>
<p>Yes, mathematically, if torque is measured in lb-ft and horsepower is calculated using the standard formula, the HP and torque values will be identical at 5252 RPM. At this speed, $\frac{Torque \times 5252}{5252} = HP$, which simplifies to $Torque = HP$. Below 5252 RPM, the torque value will be numerically higher than the HP value. Above 5252 RPM, the horsepower value will be higher.</p>
</details>
<details>
<summary>What is more important: horsepower or torque?</summary>
<p>Neither is 'more important'; they describe different things. Torque is the raw twisting force (the 'grunt' or 'pull') available at the crankshaft. It's what gets the car moving and what you feel as acceleration. Horsepower is the *rate* at which that torque can be applied (Torque × Speed). High torque at low RPM is great for towing. High horsepower at high RPM is great for high top speeds.</p>
</details>
<details>
<summary>Does this formula work for electric motors?</summary>
<p>Yes, the physics and the formula are identical for any rotating motor, whether it's an internal combustion engine, an electric motor, or a steam turbine. As long as you measure the torque output (in lb-ft) and the rotational speed (in RPM), this formula will correctly calculate the horsepower.</p>
</details>
<details>
<summary>What about other units like kW or N·m?</summary>
<p>This calculator is specifically designed for the imperial units common in the United States: horsepower (HP) and pound-feet (lb-ft). A different constant is required for metric units. The formula using kilowatts (kW) and Newton-meters (N·m) is: $kW = \frac{Torque_{N \cdot m} \times RPM}{9549}$.</p>
</details>

<div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
<p><strong>Tool developed by Ugo Candido.</strong> Automotive engineering content reviewed by the CalcDomain Editorial Board.<br>
Last accuracy review: <time datetime="2025-10-15">October 15, 2025</time></p>
</div>
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Instantly find HP, Torque, or RPM.</li>
<li>Understand the core formula of engine power.</li>
<li>Compare different engine performance points.</li>
<li>Check manufacturer-provided specs.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Automotive Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="gear-ratio-calculator.html" class="text-blue-600 hover:underline">Gear Ratio Calculator</a></li>
<li><a href="fuel-economy-calculator.html" class="text-blue-600 hover:underline">Fuel Economy Calculator</a></li>
<li><a href="tire-size-calculator.html" class="text-blue-600 hover:underline">Tire Size Calculator</a></li>
<li><a href="0-60-calculator.html" class="text-blue-600 hover:underline">0-60 MPH Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-white border-t mt-12">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="about.html" class="hover:text-blue-600">About</a>
<a href="contact.html" class="hover:text-blue-600">Contact</a>
<a href="privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

// --- 1. Element References ---
const elements = {
// Radio buttons to select calculation mode
calcHp: document.getElementById('calc-hp'),
calcTorque: document.getElementById('calc-torque'),
calcRpm: document.getElementById('calc-rpm'),

// Input fields
torqueInput: document.getElementById('torque'),
rpmInput: document.getElementById('rpm'),
hpInput: document.getElementById('hp'),

// Input groups (for show/hide)
torqueGroup: document.getElementById('torque-group'),
rpmGroup: document.getElementById('rpm-group'),
hpGroup: document.getElementById('hp-group'),

// Error message containers
torqueError: document.getElementById('torque-error'),
rpmError: document.getElementById('rpm-error'),
hpError: document.getElementById('hp-error'),

// Result display
resultTitle: document.getElementById('result-title'),
resultValue: document.getElementById('result-value'),

// Tooltips
tooltipButtons: document.querySelectorAll('.tooltip-btn')
};

// --- 2. State Management ---
let currentCalculation = 'hp'; // 'hp', 'torque', or 'rpm'
const CONSTANT = 5252;

// --- 3. Core Functions ---

/**
* Updates the visibility of input fields based on the selected radio button.
* Implements WCAG 2.1 requirements by using aria-hidden.
*/
function updateUIVisibility() {
// Get the selected calculation mode
currentCalculation = document.querySelector('input[name="calculation-type"]:checked').value;

// Reset all inputs and errors
elements.torqueInput.value = '';
elements.rpmInput.value = '';
elements.hpInput.value = '';
clearErrors();

// Set visibility and ARIA attributes
elements.torqueGroup.setAttribute('aria-hidden', currentCalculation === 'torque');
elements.rpmGroup.setAttribute('aria-hidden', currentCalculation === 'rpm');
elements.hpGroup.setAttribute('aria-hidden', currentCalculation === 'hp');

// Set 'aria-required' dynamically
elements.torqueInput.setAttribute('aria-required', currentCalculation !== 'torque');
elements.rpmInput.setAttribute('aria-required', currentCalculation !== 'rpm');
elements.hpInput.setAttribute('aria-required', currentCalculation !== 'hp');

// Update result title
switch (currentCalculation) {
case 'hp':
elements.resultTitle.textContent = 'Calculated Horsepower';
updateResult(0, 'HP');
break;
case 'torque':
elements.resultTitle.textContent = 'Calculated Torque';
updateResult(0, 'lb-ft');
break;
case 'rpm':
elements.resultTitle.textContent = 'Calculated RPM';
updateResult(0, 'RPM');
break;
}
}

/**
* Main calculation logic.
*/
function performCalculation() {
clearErrors();
let result = 0;

// Parse values
const torque = parseFloat(elements.torqueInput.value);
const rpm = parseFloat(elements.rpmInput.value);
const hp = parseFloat(elements.hpInput.value);

try {
switch (currentCalculation) {
case 'hp':
// Validate inputs for this calculation
validateInput(torque, elements.torqueError);
validateInput(rpm, elements.rpmError);
// Perform calculation
result = (torque * rpm) / CONSTANT;
updateResult(result, 'HP');
break;

case 'torque':
// Validate inputs
validateInput(hp, elements.hpError);
validateInput(rpm, elements.rpmError, true); // RPM cannot be zero
// Perform calculation
result = (hp * CONSTANT) / rpm;
updateResult(result, 'lb-ft');
break;

case 'rpm':
// Validate inputs
validateInput(hp, elements.hpError);
validateInput(torque, elements.torqueError, true); // Torque cannot be zero
// Perform calculation
result = (hp * CONSTANT) / torque;
updateResult(result, 'RPM');
break;
}
} catch (error) {
// Catch validation errors (e.g., divide by zero)
console.warn(error.message);
// Result will be NaN, which updateResult handles
updateResult(result, '');
}
}

/**
* Validates a single input field.
* @param {number} value - The parsed numeric value.
* @param {HTMLElement} errorElement - The div to show the error message in.
* @param {boolean} [disallowZero=false] - If true, value cannot be 0.
*/
function validateInput(value, errorElement, disallowZero = false) {
if (isNaN(value)) {
errorElement.textContent = 'Please enter a valid number.';
throw new Error('Invalid input');
}
if (value < 0) {
errorElement.textContent = 'Value must be zero or greater.';
throw new Error('Negative input');
}
if (disallowZero && value === 0) {
errorElement.textContent = 'Value must be greater than zero to calculate.';
throw new Error('Division by zero');
}
}

/**
* Clears all validation error messages.
*/
function clearErrors() {
elements.torqueError.textContent = '';
elements.rpmError.textContent = '';
elements.hpError.textContent = '';
}

/**
* Formats and displays the final result.
* @param {number} value - The calculated result.
* @param {string} unit - The unit label (e.g., "HP").
*/
function updateResult(value, unit) {
if (isNaN(value) || !isFinite(value) || value < 0) {
elements.resultValue.textContent = `— ${unit}`;
} else {
// Format to max 2 decimal places
const formattedValue = Math.round(value * 100) / 100;
elements.resultValue.textContent = `${new Intl.NumberFormat().format(formattedValue)} ${unit}`;
}
}

/**
* Toggles the accessible tooltip.
* @param {Event} e - The click event.
*/
function toggleTooltip(e) {
const btn = e.currentTarget;
const isExpanded = btn.getAttribute('aria-expanded') === 'true';
btn.setAttribute('aria-expanded', !isExpanded);
// You can add logic to hide other open tooltips if desired
}

// --- 4. Event Listeners ---

// Listen for changes on the radio button group
[elements.calcHp, elements.calcTorque, elements.calcRpm].forEach(radio => {
radio.addEventListener('change', updateUIVisibility);
});

// Listen for input on all number fields
[elements.torqueInput, elements.rpmInput, elements.hpInput].forEach(input => {
input.addEventListener('input', performCalculation);
});

// Listen for clicks on all tooltip buttons
elements.tooltipButtons.forEach(btn => {
btn.addEventListener('click', toggleTooltip);
});

// --- 5. Initial Setup ---
updateUIVisibility(); // Set the initial state on page load

// Mobile menu toggle logic from template
const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
if (mobileMenuToggle && mobileMenu) {
mobileMenuToggle.addEventListener('click', () => {
const isHidden = mobileMenu.classList.toggle('hidden');
mobileMenuToggle.setAttribute('aria-expanded', !isHidden);
});
}

});
</script>

</body>
</html>
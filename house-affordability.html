<!DOCTYPE html>
<html lang="en">
<head> 
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>House Affordability Calculator - How Much House Can I Afford?</title>
    <meta name="description" content="Calculate how much house you can afford based on your income, debts, down payment, and other factors. Get instant estimates with detailed breakdown of purchase price, monthly payments, and debt-to-income ratios.">
    <link rel="canonical" href="https://calcdomain.com/house-affordability.html"/>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .prose { max-width: 65ch; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .formula-box { 
            background: #f3f4f6; 
            border: 1px solid #d1d5db; 
            border-radius: 8px; 
            padding: 1rem; 
            overflow-x: auto; 
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            margin: 1rem 0;
        }
        details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
        details[open] > summary { margin-bottom: 0.5rem; }
        .help-tooltip { 
            display: inline-block; 
            width: 20px; 
            height: 20px; 
            background: #3b82f6; 
            color: white; 
            border-radius: 50%; 
            text-align: center; 
            line-height: 20px; 
            font-size: 12px; 
            cursor: help; 
            margin-left: 4px;
        }
        .gauge {
            width: 100%;
            height: 20px;
            background: linear-gradient(to right, #10b981 0%, #fbbf24 50%, #ef4444 100%);
            border-radius: 10px;
            position: relative;
        }
        .gauge-marker {
            position: absolute;
            top: -5px;
            width: 4px;
            height: 30px;
            background: #1f2937;
            border-radius: 2px;
            transition: left 0.3s ease;
        }
    </style>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "House Affordability Calculator",
      "description": "Calculate how much house you can afford based on income, debts, down payment, and mortgage terms.",
      "url": "https://calcdomain.com/house-affordability.html",
      "inLanguage": "en",
      "author": {
        "@type": "Person",
        "name": "Ugo Candido"
      },
      "publisher": {
        "@type": "Organization",
        "name": "CalcDomain"
      }
    }
    </script>
    <script src="search.js" defer></script>
    <style>
        .search-highlight {
            background: linear-gradient(120deg, #fbbf24 0%, #f59e0b 100%);
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 600;
            color: #78350f;
        }
        
        #search-results {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-height: 400px;
            overflow-y: auto;
        }
        
        #search-results a {
            display: block;
            padding: 16px;
            border-bottom: 1px solid #f3f4f6;
            transition: all 0.2s ease;
            text-decoration: none;
        }
        
        #search-results a:last-child { border-bottom: none; }
        #search-results a:hover {
            background-color: #f8fafc;
            transform: translateX(4px);
        }
        
        #search-results a:focus {
            background-color: #eff6ff;
            outline: 2px solid #3b82f6;
            outline-offset: -2px;
        }
    </style>
<!-- MathJax for LaTeX formulas -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['\(','\)'], ['$', '$']],
      displayMath: [['$','$'], ['\[','\]']]
    },
    svg: { fontCache: 'global' }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link rel="preload" href="/assets/js/mobile-menu.js" as="script">
<link rel="preload" href="/assets/js/page-enhancements.js" as="script">

</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 lg:px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>
                
                <div class="w-full max-w-md hidden md:block mx-8">
                    <div class="relative">
                        <input 
                            type="search" 
                            id="search-input"
                            placeholder="Search for a calculator..." 
                            class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                            autocomplete="off"
                        >
                        <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <div id="search-results" class="absolute top-full left-0 right-0 hidden"></div>
                    </div>
                </div>
                
                <div class="hidden md:flex items-center space-x-6">
                    <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
                    <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
                </div>
                
                <button id="mobile-menu-toggle" class="md:hidden p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
            
            <div id="mobile-menu" class="md:hidden mt-4 hidden">
                <div class="space-y-2">
                    <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
                    <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">

            <!-- Left Column: Calculator & Content -->
            <main class="w-full lg:w-2/3">
                <!-- Breadcrumbs -->
                <nav class="text-sm mb-4 text-gray-600">
                    <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
                    <a href="finance.html" class="hover:text-blue-600">Finance</a> &raquo;
                    <a href="/subcategories/mortgage-real-estate.html" class="hover:text-blue-600">Mortgages</a> &raquo;
                    <span>House Affordability Calculator</span>
                </nav>

                <div class="bg-white p-6 rounded-lg shadow-md">
                    <!-- Calculator Title and Intro -->
                    <h1 class="text-3xl font-bold mb-2">House Affordability Calculator</h1>
                    <p class="text-gray-600 mb-6">Determine how much house you can afford based on your income, monthly debts, down payment, and current mortgage rates. Get instant estimates with debt-to-income ratio analysis.</p>

                    <!-- Calculator Form -->
                    <div id="calculator-ui" class="space-y-6">
                        
                        <!-- Income Section -->
                        <div class="border-b pb-6">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">Your Income</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="annualIncome" class="block text-sm font-medium text-gray-700">
                                        Annual Gross Income
                                        <span class="help-tooltip" title="Before-tax annual income from all sources">?</span>
                                    </label>
                                    <div class="mt-1 relative">
                                        <input type="number" id="annualIncome" value="75000" step="1000" 
                                            class="block w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">$</span>
                                    </div>
                                </div>
                                <div>
                                    <label for="monthlyDebts" class="block text-sm font-medium text-gray-700">
                                        Monthly Debt Payments
                                        <span class="help-tooltip" title="Credit cards, car loans, student loans, etc. (not rent)">?</span>
                                    </label>
                                    <div class="mt-1 relative">
                                        <input type="number" id="monthlyDebts" value="500" step="10" 
                                            class="block w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">$</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Down Payment Section -->
                        <div class="border-b pb-6">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">Down Payment & Savings</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="downPayment" class="block text-sm font-medium text-gray-700">
                                        Down Payment Amount
                                    </label>
                                    <div class="mt-1 relative">
                                        <input type="number" id="downPayment" value="50000" step="1000" 
                                            class="block w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">$</span>
                                    </div>
                                </div>
                                <div>
                                    <label for="closingCosts" class="block text-sm font-medium text-gray-700">
                                        Estimated Closing Costs
                                        <span class="help-tooltip" title="Typically 2-5% of purchase price">?</span>
                                    </label>
                                    <div class="mt-1 relative">
                                        <input type="number" id="closingCosts" value="8000" step="500" 
                                            class="block w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">$</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Loan Details Section -->
                        <div class="border-b pb-6">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">Loan Details</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="interestRate" class="block text-sm font-medium text-gray-700">
                                        Interest Rate (annual %)
                                    </label>
                                    <input type="number" id="interestRate" value="6.5" step="0.125" 
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="loanTerm" class="block text-sm font-medium text-gray-700">
                                        Loan Term (years)
                                    </label>
                                    <select id="loanTerm" class="mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <option value="15">15 years</option>
                                        <option value="20">20 years</option>
                                        <option value="30" selected>30 years</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Property Costs Section -->
                        <div>
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">Annual Property Costs</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label for="propertyTaxRate" class="block text-sm font-medium text-gray-700">
                                        Property Tax Rate
                                        <span class="help-tooltip" title="As % of home value per year">?</span>
                                    </label>
                                    <div class="mt-1 relative">
                                        <input type="number" id="propertyTaxRate" value="1.2" step="0.1" 
                                            class="block w-full pr-8 pl-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500">%</span>
                                    </div>
                                </div>
                                <div>
                                    <label for="homeInsurance" class="block text-sm font-medium text-gray-700">
                                        Home Insurance (annual)
                                    </label>
                                    <div class="mt-1 relative">
                                        <input type="number" id="homeInsurance" value="1500" step="100" 
                                            class="block w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">$</span>
                                    </div>
                                </div>
                                <div>
                                    <label for="hoaDues" class="block text-sm font-medium text-gray-700">
                                        HOA Dues (monthly)
                                    </label>
                                    <div class="mt-1 relative">
                                        <input type="number" id="hoaDues" value="0" step="10" 
                                            class="block w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">$</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- DTI Ratio Selector -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Maximum Debt-to-Income Ratio
                                <span class="help-tooltip" title="Lenders typically require DTI below 43%">?</span>
                            </label>
                            <div class="grid grid-cols-3 gap-2">
                                <button type="button" data-dti="28" class="dti-btn px-4 py-2 border-2 border-gray-300 rounded-md text-sm font-medium hover:border-blue-500 focus:outline-none focus:border-blue-500">
                                    Conservative (28%)
                                </button>
                                <button type="button" data-dti="36" class="dti-btn px-4 py-2 border-2 border-blue-600 bg-blue-50 rounded-md text-sm font-medium hover:border-blue-600 focus:outline-none">
                                    Moderate (36%)
                                </button>
                                <button type="button" data-dti="43" class="dti-btn px-4 py-2 border-2 border-gray-300 rounded-md text-sm font-medium hover:border-blue-500 focus:outline-none focus:border-blue-500">
                                    Aggressive (43%)
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Results Section -->
                    <div id="results" class="mt-8 bg-gradient-to-br from-green-50 to-blue-50 p-6 rounded-lg border border-green-200">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">You Can Afford:</h3>
                        
                        <div class="bg-white p-6 rounded-lg shadow-md mb-4">
                            <div class="text-center">
                                <p class="text-sm text-gray-600 mb-2">Maximum Home Price</p>
                                <p class="text-5xl font-bold text-green-600" id="maxHomePrice">$0</p>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                            <div class="bg-white p-4 rounded-lg shadow-sm">
                                <p class="text-sm text-gray-600">Loan Amount</p>
                                <p class="text-2xl font-bold text-blue-600" id="loanAmount">$0</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm">
                                <p class="text-sm text-gray-600">Monthly Payment (PITI)</p>
                                <p class="text-2xl font-bold text-indigo-600" id="monthlyPayment">$0</p>
                            </div>
                        </div>

                        <!-- DTI Gauge -->
                        <div class="bg-white p-4 rounded-lg shadow-sm mb-4">
                            <div class="flex justify-between items-center mb-2">
                                <p class="text-sm font-medium text-gray-700">Your Debt-to-Income Ratio</p>
                                <p class="text-lg font-bold" id="dtiValue">0%</p>
                            </div>
                            <div class="gauge">
                                <div class="gauge-marker" id="dtiMarker"></div>
                            </div>
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>Excellent (0-28%)</span>
                                <span>Good (28-36%)</span>
                                <span>High (36%+)</span>
                            </div>
                        </div>

                        <!-- Detailed Breakdown -->
                        <details class="bg-white p-4 rounded-lg shadow-sm">
                            <summary class="cursor-pointer font-semibold text-gray-700">View Detailed Breakdown</summary>
                            <div class="mt-3 space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Down Payment:</span>
                                    <span class="font-semibold" id="detailDown">$0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Closing Costs:</span>
                                    <span class="font-semibold" id="detailClosing">$0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Monthly P&I:</span>
                                    <span class="font-semibold" id="detailPI">$0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Monthly Property Tax:</span>
                                    <span class="font-semibold" id="detailTax">$0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Monthly Insurance:</span>
                                    <span class="font-semibold" id="detailIns">$0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Monthly HOA:</span>
                                    <span class="font-semibold" id="detailHOA">$0</span>
                                </div>
                                <div class="flex justify-between pt-2 border-t">
                                    <span class="text-gray-600">Total Monthly Housing:</span>
                                    <span class="font-bold" id="detailTotal">$0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Other Monthly Debts:</span>
                                    <span class="font-semibold" id="detailDebts">$0</span>
                                </div>
                                <div class="flex justify-between pt-2 border-t">
                                    <span class="text-gray-700 font-semibold">Total Monthly Obligations:</span>
                                    <span class="font-bold text-lg" id="detailAllDebts">$0</span>
                                </div>
                            </div>
                        </details>

                        <p class="mt-4 text-xs text-center text-gray-600">Results are estimates. Always consult with a mortgage professional for accurate pre-approval.</p>
                    </div>
                </div>

                <!-- SEO Content Area -->
                <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
                    <h2>Data Source and Methodology</h2>
                    <p><strong>Authoritative Sources:</strong> This calculator uses industry-standard formulas and guidelines from:</p>
                    <ul>
                        <li>Consumer Financial Protection Bureau (CFPB) - <a href="https://www.consumerfinance.gov/owning-a-home/process/prepare/" target="_blank" rel="nofollow noopener">Homebuying Process Guide</a></li>
                        <li>Qualified Mortgage (QM) rules requiring debt-to-income ratios typically below 43%</li>
                        <li>Federal Housing Administration (FHA) and conventional loan guidelines</li>
                    </ul>
                    <p>All calculations follow standard mortgage underwriting principles used by lenders across the United States.</p>

                    <h2>How the Calculation Works</h2>
                    <p>The calculator determines affordability using the debt-to-income (DTI) ratio approach, which is how most lenders evaluate borrowers. Here's the step-by-step process:</p>
                    
                    <div class="formula-box">
                        <p><strong>1. Calculate Monthly Gross Income:</strong></p>
                        <p>Monthly Income = Annual Income ÷ 12</p>
                        
                        <p class="mt-3"><strong>2. Determine Maximum Monthly Debt Payment:</strong></p>
                        <p>Max Total Debt = Monthly Income × DTI Ratio</p>
                        
                        <p class="mt-3"><strong>3. Calculate Available for Housing:</strong></p>
                        <p>Max Housing Payment = Max Total Debt - Current Monthly Debts</p>
                        
                        <p class="mt-3"><strong>4. Reverse-Calculate Affordable Loan:</strong></p>
                        <p>This housing payment includes P&I, taxes, insurance, and HOA. We subtract property costs to find the P&I portion, then use the standard mortgage formula in reverse to find the maximum loan amount.</p>
                        
                        <p class="mt-3"><strong>5. Add Down Payment:</strong></p>
                        <p>Max Home Price = Max Loan + Down Payment</p>
                    </div>

                    <h2>Understanding Debt-to-Income Ratio</h2>
                    <p>Your debt-to-income (DTI) ratio is the percentage of your gross monthly income that goes toward debt payments. Lenders use this to assess your ability to manage monthly payments and repay borrowed money.</p>
                    <ul>
                        <li><strong>Front-end DTI (28%):</strong> Housing costs only (PITI). Conservative approach.</li>
                        <li><strong>Back-end DTI (36-43%):</strong> All monthly debt obligations including housing. Most lenders focus on this number.</li>
                        <li><strong>Qualified Mortgage limit (43%):</strong> Maximum DTI for most conventional loans.</li>
                    </ul>

                    <h2>What Counts as Monthly Debt?</h2>
                    <p>When calculating DTI, include these recurring obligations:</p>
                    <ul>
                        <li>Credit card minimum payments</li>
                        <li>Car loan or lease payments</li>
                        <li>Student loan payments</li>
                        <li>Personal loan payments</li>
                        <li>Child support or alimony</li>
                        <li>Other mortgage or rental property payments</li>
                    </ul>
                    <p><strong>Do NOT include:</strong> Utilities, groceries, insurance (except home insurance), entertainment, or current rent.</p>

                    <!-- In-Content Ad Placeholder -->
                    <div class="text-center my-6 bg-gray-200 py-10 rounded">
                        <p class="text-gray-500">In-Content Ad Unit</p>
                    </div>

                    <h2>Key Terms Explained</h2>
                    <ul>
                        <li><strong>PITI:</strong> Principal, Interest, Taxes, and Insurance - your total monthly housing payment</li>
                        <li><strong>Down Payment:</strong> The upfront cash you pay toward the home purchase (typically 3-20%)</li>
                        <li><strong>Closing Costs:</strong> Fees for processing your mortgage (typically 2-5% of purchase price)</li>
                        <li><strong>PMI:</strong> Private Mortgage Insurance, required when down payment is below 20%</li>
                        <li><strong>HOA:</strong> Homeowners Association fees for condos, townhomes, or planned communities</li>
                    </ul>

                    <h2>Worked Example</h2>
                    <p>Let's calculate affordability for someone earning $75,000/year with $500 in monthly debts, a $50,000 down payment, and using a 36% DTI ratio:</p>
                    <ol>
                        <li><strong>Monthly Income:</strong> $75,000 ÷ 12 = $6,250</li>
                        <li><strong>Max Total Debt (36%):</strong> $6,250 × 0.36 = $2,250</li>
                        <li><strong>Max Housing Payment:</strong> $2,250 - $500 = $1,750</li>
                        <li>Assuming $200/month for taxes and insurance: $1,750 - $200 = $1,550 available for P&I</li>
                        <li>At 6.5% for 30 years, $1,550/month supports approximately a $245,000 loan</li>
                        <li><strong>Max Home Price:</strong> $245,000 + $50,000 = $295,000</li>
                    </ol>

                    <h2>Frequently Asked Questions</h2>
                    <details class="border-b py-2">
                        <summary>How much should I put down on a house?</summary>
                        <p class="mt-2 text-gray-700">While 20% down is ideal to avoid PMI, many successful homebuyers put down 3-10%. FHA loans allow as little as 3.5% down. Consider your savings, monthly budget, and long-term goals when deciding.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>What if my DTI is too high?</summary>
                        <p class="mt-2 text-gray-700">Pay down existing debts, increase your income, consider a less expensive home, or save for a larger down payment. Some lenders may accept higher DTI with compensating factors like excellent credit or large cash reserves.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>Does this calculator include PMI?</summary>
                        <p class="mt-2 text-gray-700">The calculator assumes your down payment is sufficient to avoid PMI (20%+). If your down payment is less than 20%, add approximately 0.5-1% of the loan amount annually for PMI to your housing costs.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>Should I use conservative or aggressive DTI?</summary>
                        <p class="mt-2 text-gray-700">Conservative (28%) provides a comfortable margin for unexpected expenses. Moderate (36%) is standard for most lenders. Aggressive (43%) maximizes buying power but leaves less financial cushion. Choose based on your job security, savings, and lifestyle.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>How accurate are these estimates?</summary>
                        <p class="mt-2 text-gray-700">These are good estimates for planning, but actual loan approval depends on credit score, employment history, property type, and lender-specific requirements. Get pre-approved with a mortgage lender for definitive numbers.</p>
                    </details>

                    <div class="mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <p class="text-sm text-gray-600">
                            <strong>Tool developed by Ugo Candido.</strong> Content verified by CalcDomain Editorial Board.<br>
                            Last reviewed for accuracy on: <time datetime="2025-09-14">September 14, 2025</time>
                        </p>
                    </div>
                </article>

            </main>

            <!-- Right Sidebar: Ads & Related Links -->
            <aside class="w-full lg:w-1/3">
                <div class="sticky top-24">
                    <!-- Ad Placeholder -->
                    <div class="bg-gray-200 h-96 rounded-lg mb-6 flex items-center justify-center">
                        <p class="text-gray-500">Sticky Ad Unit (300x600)</p>
                    </div>

                    <!-- Related Calculators -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-4">Related Mortgage Tools</h3>
                        <ul class="space-y-3">
                            <li><a href="mortgage-payment.html" class="text-blue-600 hover:underline">Mortgage Payment Calculator</a></li>
                            <li><a href="rent-vs-buy.html" class="text-blue-600 hover:underline">Rent vs Buy Calculator</a></li>
                            <li><a href="down-payment.html" class="text-blue-600 hover:underline">Down Payment Calculator</a></li>
                            <li><a href="debt-to-income-ratio.html" class="text-blue-600 hover:underline">Debt-to-Income Ratio Calculator</a></li>
                            <li><a href="closing-costs.html" class="text-blue-600 hover:underline">Closing Costs Calculator</a></li>
                        </ul>
                    </div>
                </div>
            </aside>

        </div>
    </div>
    
    <!-- Footer -->
    <footer class="bg-white border-t mt-12">
        <div class="container mx-auto px-6 py-8">
            <div class="text-center text-gray-600">
                <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
                <div class="mt-4 space-x-4">
                    <a href="about.html" class="hover:text-blue-600">About</a>
                    <a href="contact.html" class="hover:text-blue-600">Contact</a>
                    <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
                    <a href="terms.html" class="hover:text-blue-600">Terms</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        (function() {
            'use strict';

            let selectedDTI = 36; // Default to moderate

            // Elements
            const els = {
                annualIncome: document.getElementById('annualIncome'),
                monthlyDebts: document.getElementById('monthlyDebts'),
                downPayment: document.getElementById('downPayment'),
                closingCosts: document.getElementById('closingCosts'),
                interestRate: document.getElementById('interestRate'),
                loanTerm: document.getElementById('loanTerm'),
                propertyTaxRate: document.getElementById('propertyTaxRate'),
                homeInsurance: document.getElementById('homeInsurance'),
                hoaDues: document.getElementById('hoaDues'),
                maxHomePrice: document.getElementById('maxHomePrice'),
                loanAmount: document.getElementById('loanAmount'),
                monthlyPayment: document.getElementById('monthlyPayment'),
                dtiValue: document.getElementById('dtiValue'),
                dtiMarker: document.getElementById('dtiMarker'),
                calculatorUI: document.getElementById('calculator-ui')
            };

            // Detail elements
            const details = {
                down: document.getElementById('detailDown'),
                closing: document.getElementById('detailClosing'),
                pi: document.getElementById('detailPI'),
                tax: document.getElementById('detailTax'),
                ins: document.getElementById('detailIns'),
                hoa: document.getElementById('detailHOA'),
                total: document.getElementById('detailTotal'),
                debts: document.getElementById('detailDebts'),
                allDebts: document.getElementById('detailAllDebts')
            };

            const fmtMoney = (amount) => new Intl.NumberFormat('en-US', { 
                style: 'currency', 
                currency: 'USD',
                maximumFractionDigits: 0
            }).format(amount);

            // Calculate monthly P&I payment
            function calcMonthlyPI(principal, annualRate, years) {
                const monthlyRate = annualRate / 100 / 12;
                const numPayments = years * 12;
                
                if (monthlyRate === 0) return principal / numPayments;
                
                const pow = Math.pow(1 + monthlyRate, numPayments);
                return principal * (monthlyRate * pow) / (pow - 1);
            }

            // Reverse calculate max loan from payment
            function maxLoanFromPayment(monthlyPI, annualRate, years) {
                const monthlyRate = annualRate / 100 / 12;
                const numPayments = years * 12;
                
                if (monthlyRate === 0) return monthlyPI * numPayments;
                
                const pow = Math.pow(1 + monthlyRate, numPayments);
                return monthlyPI * (pow - 1) / (monthlyRate * pow);
            }

            function calculate() {
                // Get inputs
                const annualIncome = parseFloat(els.annualIncome.value) || 0;
                const monthlyDebts = parseFloat(els.monthlyDebts.value) || 0;
                const downPayment = parseFloat(els.downPayment.value) || 0;
                const closingCosts = parseFloat(els.closingCosts.value) || 0;
                const interestRate = parseFloat(els.interestRate.value) || 0;
                const loanTerm = parseInt(els.loanTerm.value) || 30;
                const propertyTaxRate = parseFloat(els.propertyTaxRate.value) || 0;
                const homeInsurance = parseFloat(els.homeInsurance.value) || 0;
                const hoaDues = parseFloat(els.hoaDues.value) || 0;

                if (annualIncome <= 0) {
                    resetResults();
                    return;
                }

                // Calculate affordability
                const monthlyIncome = annualIncome / 12;
                const maxTotalDebt = monthlyIncome * (selectedDTI / 100);
                const maxHousingPayment = maxTotalDebt - monthlyDebts;

                if (maxHousingPayment <= 0) {
                    resetResults();
                    return;
                }

                // Start with max housing payment and subtract non-PI costs
                // We need to estimate property taxes based on an unknown home price
                // This requires iteration or estimation
                
                // Use iterative approach: assume a home price, calculate all costs, adjust
                let estimatedHomePrice = 300000; // Starting guess
                let iterations = 0;
                let maxLoan, monthlyPI, monthlyTax, monthlyIns, totalMonthly;

                do {
                    monthlyTax = (estimatedHomePrice * propertyTaxRate / 100) / 12;
                    monthlyIns = homeInsurance / 12;
                    const availableForPI = maxHousingPayment - monthlyTax - monthlyIns - hoaDues;
                    
                    if (availableForPI <= 0) {
                        resetResults();
                        return;
                    }

                    maxLoan = maxLoanFromPayment(availableForPI, interestRate, loanTerm);
                    const newEstimate = maxLoan + downPayment;
                    
                    if (Math.abs(newEstimate - estimatedHomePrice) < 100) break;
                    
                    estimatedHomePrice = newEstimate;
                    iterations++;
                } while (iterations < 10);

                // Calculate actual monthly payment
                monthlyPI = calcMonthlyPI(maxLoan, interestRate, loanTerm);
                monthlyTax = (estimatedHomePrice * propertyTaxRate / 100) / 12;
                monthlyIns = homeInsurance / 12;
                totalMonthly = monthlyPI + monthlyTax + monthlyIns + hoaDues;

                // Calculate DTI
                const totalDebtPayments = totalMonthly + monthlyDebts;
                const actualDTI = (totalDebtPayments / monthlyIncome) * 100;

                // Update UI
                els.maxHomePrice.textContent = fmtMoney(estimatedHomePrice);
                els.loanAmount.textContent = fmtMoney(maxLoan);
                els.monthlyPayment.textContent = fmtMoney(totalMonthly);
                els.dtiValue.textContent = actualDTI.toFixed(1) + '%';
                
                // Update DTI gauge marker
                const markerPosition = Math.min(actualDTI, 50) * 2; // Scale to 100%
                els.dtiMarker.style.left = `calc(${markerPosition}% - 2px)`;

                // Update details
                details.down.textContent = fmtMoney(downPayment);
                details.closing.textContent = fmtMoney(closingCosts);
                details.pi.textContent = fmtMoney(monthlyPI);
                details.tax.textContent = fmtMoney(monthlyTax);
                details.ins.textContent = fmtMoney(monthlyIns);
                details.hoa.textContent = fmtMoney(hoaDues);
                details.total.textContent = fmtMoney(totalMonthly);
                details.debts.textContent = fmtMoney(monthlyDebts);
                details.allDebts.textContent = fmtMoney(totalDebtPayments);
            }

            function resetResults() {
                els.maxHomePrice.textContent = '$0';
                els.loanAmount.textContent = '$0';
                els.monthlyPayment.textContent = '$0';
                els.dtiValue.textContent = '0%';
                els.dtiMarker.style.left = '0%';
                
                Object.values(details).forEach(el => el.textContent = '$0');
            }

            // DTI button handling
            document.querySelectorAll('.dti-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectedDTI = parseInt(this.dataset.dti);
                    
                    document.querySelectorAll('.dti-btn').forEach(b => {
                        b.classList.remove('border-blue-600', 'bg-blue-50');
                        b.classList.add('border-gray-300');
                    });
                    
                    this.classList.add('border-blue-600', 'bg-blue-50');
                    this.classList.remove('border-gray-300');
                    
                    calculate();
                });
            });

            // Event listeners for real-time calculation
            els.calculatorUI.addEventListener('input', calculate);

            // Mobile menu toggle
            const mobileToggle = document.getElementById('mobile-menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileToggle && mobileMenu) {
                mobileToggle.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }

            // Initial calculation
            calculate();
        })();
    </script>
</body>
</html>
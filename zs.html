<!DOCTYPE html>
<html lang="en"><head> 
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<meta charset="utf-8"/>
<title>BS 7671 Earth Fault Loop Impedance (Zs) Calculator</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="Professional BS 7671 Zs Calculator for UK electricians. Compute Earth Fault Loop Impedance (Zs), maximum permissible Zs, and fault current per IET Wiring Regulations (BS 7671:2018+A2:2022). Fully accessible, mobile-first, and optimized for speed." name="description"/>
<meta content="zs calculator, earth fault loop impedance, BS 7671, wiring regulations, electrical, UK" name="keywords"/>
<meta content="Ugo Candido" name="author"/>
<link href="https://calcdomain.com/zs.html" rel="canonical"/>
<meta content="website" property="og:type"/>
<meta content="BS 7671 Earth Fault Loop Impedance (Zs) Calculator" property="og:title"/>
<meta content="Compute Zs, max Zs, and fault current in line with BS 7671. Accessible, fast, and mobile-first." property="og:description"/>
<meta content="https://elek.com/resources/free-electrical-calculators/fault-loop-impedance/zs-calculator" property="og:url"/>
<meta content="Elek" property="og:site_name"/>
<meta content="summary" name="twitter:card"/>
<meta content="#005A9C" name="theme-color"/>
<link href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='128' width='128' viewBox='0 0 128 128'%3E%3Crect width='128' height='128' rx='16' fill='%23005A9C'/%3E%3Cpath d='M28 86h40v10H28zm0-27h72v10H28zm0-27h72v10H28z' fill='%23fff'/%3E%3C/svg%3E" rel="icon"/>
<!-- Non-critical global styles (optional async) -->
<link as="style" href="style.css" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/>
<noscript><link href="style.css" rel="stylesheet"/></noscript>
<style>
    :root{
      --primary-color:#005A9C; --secondary-color:#003F6E; --accent-color:#00A4E4;
      --background-color:#F8F9FA; --surface-color:#FFFFFF;
      --text-color:#212529; --muted-text-color:#5A646E; --border-color:#DEE2E6;
      --success-color:#198754; --error-color:#DC3545; --warning-color:#B8860B;

      --touch-target:48px;
      --radius-6:6px; --radius-8:8px; --radius-12:12px;
      --container-max:1160px;
      --shadow-1:0 2px 6px rgba(0,0,0,.06);
    }
    @media (prefers-contrast: more){
      :root{ --primary-color:#003366; --secondary-color:#001F3A; --text-color:#000; --muted-text-color:#1a1a1a; --border-color:#000; }
    }
    @media (prefers-reduced-motion: reduce){
      *{ animation:none!important; transition:none!important; scroll-behavior:auto!important; }
    }
    *,*::before,*::after{ box-sizing:border-box; }
    html{ font-size:16px; }
    body{
      margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color:var(--text-color); background:var(--background-color); line-height:1.55;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    a{ color:var(--primary-color); text-decoration:none; }
    a:hover{ text-decoration:underline; }
    a:focus{ outline:3px solid var(--primary-color); outline-offset:2px; border-radius:3px; }
    h1,h2,h3{ color:var(--secondary-color); line-height:1.25; margin:.5rem 0 .75rem; }
    h1{ font-size:clamp(1.6rem,4.5vw,2.2rem); }
    h2{ font-size:clamp(1.3rem,3.5vw,1.7rem); }
    h3{ font-size:clamp(1.15rem,3vw,1.4rem); }
    p{ margin:.75rem 0; max-width:72ch; }
    .container{ max-width:var(--container-max); margin:0 auto; padding:0 1rem; }
    .skip-link{
      position:absolute; left:1rem; top:-40px; background:var(--primary-color); color:#fff; padding:.5rem .75rem; border-radius:0 0 6px 6px; z-index:1000;
    }
    .skip-link:focus{ top:0; }

    /* Header (non-sticky) */
    header.site-header{ background:var(--surface-color); border-bottom:1px solid var(--border-color); }
    .header-inner{ display:flex; align-items:center; gap:.75rem; padding:.75rem 0; }
    .brand{ font-weight:800; color:var(--secondary-color); font-size:1.1rem; }
    .brand:hover{ text-decoration:none; }
    .site-nav{ margin-left:auto; }
    .site-nav a{ display:inline-block; padding:.5rem .75rem; min-height:var(--touch-target); line-height:1; border-radius:6px; }
    .site-nav a:hover{ background:rgba(0,90,156,.08); text-decoration:none; }

    /* Main layout */
    main{ padding:1.25rem 0 2rem; }
    .breadcrumb{ font-size:.9rem; color:var(--muted-text-color); margin:.25rem 0 1rem; }
    .breadcrumb a{ color:inherit; }
    .calc-grid{ display:grid; grid-template-columns:1fr; gap:1.25rem; }
    @media (min-width: 992px){
      .calc-grid{ grid-template-columns: 430px 1fr; align-items:start; }
    }

    /* Calculator Card */
    .card{ background:var(--surface-color); border:1px solid var(--border-color); border-radius:12px; box-shadow:var(--shadow-1); }
    .card-header{ padding:1rem 1.25rem; border-bottom:1px solid var(--border-color); }
    .card-body{ padding:1.25rem; }
    .form-group{ margin-bottom:1rem; }
    .form-group > label{ display:flex; align-items:center; gap:.5rem; font-weight:700; margin-bottom:.35rem; }
    .required{ color:var(--error-color); margin-left:.2rem; }
    .help-btn{
      appearance:none; border:1px solid var(--border-color); background:var(--surface-color);
      color:var(--secondary-color); border-radius:50%; width:28px; height:28px; min-width:28px; min-height:28px;
      font-weight:700; line-height:1; cursor:pointer;
    }
    .help-btn:focus{ outline:3px solid var(--primary-color); outline-offset:2px; }
    .help-text{ display:none; color:#0f2b3a; background:#eef6fb; border:1px solid #cbe4f7; border-radius:8px; padding:.5rem .75rem; margin:.25rem 0; }
    .help-text[aria-hidden="false"]{ display:block; }

    .input-group{ position:relative; }
    .form-control{
      width:100%; min-height:48px; padding:.7rem .85rem; border:1px solid var(--border-color); border-radius:8px;
      font-size:1rem; color:var(--text-color); background:#fff;
    }
    .form-control:focus-visible{
      outline:3px solid rgba(0,90,156,.35); outline-offset:2px; border-color:var(--primary-color);
    }
    .form-control[aria-invalid="true"]{ border-color:var(--error-color); }
    .input-suffix{ position:absolute; right:.75rem; top:50%; transform:translateY(-50%); color:var(--muted-text-color); pointer-events:none; }

    .radio-row{ display:flex; gap:.5rem; flex-wrap:wrap; }
    .radio-chip{ position:relative; }
    .radio-chip input{ position:absolute; opacity:0; }
    .radio-chip label{
      display:inline-flex; align-items:center; justify-content:center; padding:.55rem .8rem; min-height:48px; min-width:48px;
      border:1px solid var(--border-color); border-radius:10px; cursor:pointer; user-select:none;
      color:var(--secondary-color); background:#fff;
    }
    .radio-chip input:checked + label{ background:var(--primary-color); color:#fff; border-color:var(--primary-color); }
    .radio-chip input:focus-visible + label{ outline:3px solid rgba(0,90,156,.35); outline-offset:2px; }

    .select{ width:100%; min-height:48px; padding:.7rem .85rem; border:1px solid var(--border-color); border-radius:8px; background:#fff; font-size:1rem; }
    .select:focus-visible{ outline:3px solid rgba(0,90,156,.35); outline-offset:2px; border-color:var(--primary-color); }

    .error-msg{ color:var(--error-color); font-size:.92rem; margin-top:.3rem; }

    /* Results */
    .results{ margin-top:.5rem; background:#FBFCFD; border:1px solid var(--border-color); border-radius:12px; padding:1rem; min-height:240px; }
    .results h3{ margin-top:0; }
    .result-row{ display:flex; justify-content:space-between; align-items:baseline; border-bottom:1px dashed #d7dee6; padding:.55rem 0; }
    .result-row:last-child{ border-bottom:none; }
    .label{ color:var(--muted-text-color); }
    .value{ font-weight:800; color:#0e5a1a; font-size:1.1rem; }
    .value.warn{ color:#8a6a00; }
    .value.bad{ color:var(--error-color); }
    .badge{ display:inline-block; padding:.3rem .55rem; border-radius:999px; font-weight:700; font-size:.9rem; }
    .badge.pass{ background:#e7f6ee; color:#0e6b2f; border:1px solid #bfe7cf; }
    .badge.fail{ background:#fdebec; color:#8c1d26; border:1px solid #f1b8be; }

    /* Content */
    .content section{ margin-top:1.25rem; }
    .formula-box{ background:#eef1f5; border:1px solid #d7dee6; border-radius:10px; padding:1rem; overflow-x:auto; }
    ul.clean{ padding-left:1rem; }
    .author-box{ margin-top:1.5rem; padding-top:1rem; border-top:1px solid var(--border-color); color:var(--muted-text-color); font-size:.95rem; }

    footer.site-footer{ background:var(--secondary-color); color:#fff; margin-top:2rem; }
    .footer-inner{ display:grid; grid-template-columns:1fr; gap:1rem; padding:1.25rem 0; }
    @media (min-width: 720px){ .footer-inner{ grid-template-columns:repeat(3,1fr); } }
    .site-footer a{ color:#fff; }
    .site-footer a:hover{ color:#d5ecff; text-decoration:none; }

    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
  </style>
<!-- MathJax for LaTeX rendering -->
<script defer="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "BS 7671 Earth Fault Loop Impedance (Zs) Calculator",
  "description": "Compute Zs (earth fault loop impedance), maximum permissible Zs, and fault current in line with BS 7671:2018+A2:2022. Fully accessible and mobile-first.",
  "url": "https://calcdomain.com/zs.html",
  "inLanguage": "en-GB",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Elek"
  },
  "mainEntity": [
    {
      "@type": "HowTo",
      "name": "How It Works: A Step-by-Step Zs Calculation Example",
      "description": "Worked example showing how to compute Zs, fault current, and maximum Zs with BS 7671 correction factors.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Enter system voltage",
          "text": "Set U0 = 230 V and Cmin = 0.95."
        },
        {
          "@type": "HowToStep",
          "name": "Enter earth loop components",
          "text": "Input Ze = 0.35 Ω and R1+R2(20 °C) = 0.40 Ω. Set operating temperature T = 70 °C."
        },
        {
          "@type": "HowToStep",
          "name": "Choose protective device",
          "text": "Select MCB Type B and In = 32 A."
        },
        {
          "@type": "HowToStep",
          "name": "Review Zs and fault current",
          "text": "The tool computes Zs at operating temperature and the corresponding fault current If."
        },
        {
          "@type": "HowToStep",
          "name": "Check compliance",
          "text": "The tool compares Zs against Zs,max based on Ia = k × In and shows Pass/Fail."
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is Zs in BS 7671?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Zs is the earth fault loop impedance of a circuit. It is the total impedance from the source through line and protective conductors and back to the source, used to ensure automatic disconnection of supply."
          }
        },
        {
          "@type": "Question",
          "name": "How is maximum Zs determined?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Max Zs is typically calculated as Zs,max = (Cmin × U0) / Ia, where U0 is nominal phase-to-earth voltage, Cmin is a voltage factor (usually 0.95), and Ia is the fault current ensuring disconnection within the required time, derived from the protective device characteristics."
          }
        },
        {
          "@type": "Question",
          "name": "Which k values are used for MCB types?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "For a conservative estimate of instantaneous operation, k = 5 for Type B, 10 for Type C, and 20 for Type D. Always confirm using manufacturer time–current curves or BS 7671 tables for precise design."
          }
        },
        {
          "@type": "Question",
          "name": "Do I need to temperature-correct R1+R2?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. Resistance increases with temperature. A common approximation is R(T) = R20 × [1 + α (T − 20 °C)], with α ≈ 0.004/°C for copper. For 70 °C PVC circuits, this is roughly a 1.2× factor."
          }
        },
        {
          "@type": "Question",
          "name": "Can I use a measured Zs instead of Ze and R1+R2?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. Enter your measured Zs directly and the calculator will use it to compute fault current and compliance. If both measured Zs and Ze/R1+R2 are provided, the measured Zs takes precedence."
          }
        },
        {
          "@type": "Question",
          "name": "Is this calculator compliant with BS 7671?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "It implements the core formulas and factors described in BS 7671 for design checks. For final sign-off and precise tabulated values, always consult the Wiring Regulations, the On-Site Guide, and manufacturer data."
          }
        }
      ]
    }
  ]
}
  </script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="search.js" defer></script>
</head>
<body>
<a class="skip-link" href="#main-content">Skip to main content</a>

<main id="main-content">
<div class="container">
<nav aria-label="Breadcrumb" class="breadcrumb">
<a href="/">Home</a> /
        <a href="https://calcdomain.com/engineering.html">Engineering</a> /
        <a href="https://calcdomain.com/engineering/electrical-uk.html">Electrical (UK BS 7671)</a> /
        Zs Calculator
      </nav>
<h1>BS 7671 Earth Fault Loop Impedance (Zs) Calculator</h1>
<p>
        This professional-grade calculator helps UK electricians and engineers verify earth fault loop impedance (Zs), estimate fault current, and check compliance against maximum Zs derived from protective device characteristics under BS 7671:2018+A2:2022. It is optimized for mobile use, fully accessible, and designed for high accuracy and speed.
      </p>
<div aria-label="Zs calculator grid" class="calc-grid" role="region">
<aside aria-labelledby="calc-title" class="card">
<div class="card-header">
<h2 id="calc-title" style="margin:0;">Interactive Calculator</h2>
</div>
<div class="card-body">
<!-- System Parameters -->
<div class="form-group">
<label for="u0">
                Nominal voltage U0 (V)
                <span aria-hidden="true" class="required">*</span>
<button aria-controls="u0Help" aria-expanded="false" class="help-btn" id="u0HelpBtn" title="More info" type="button">?</button>
</label>
<div aria-hidden="true" class="help-text" id="u0Help" role="note">
                U0 is the nominal phase-to-earth voltage. In the UK this is typically 230 V for single-phase circuits.
              </div>
<div class="input-group">
<input aria-describedby="u0Error u0Help" aria-required="true" class="form-control" id="u0" inputmode="decimal" min="1" step="any" type="number" value="230"/>
<span aria-hidden="true" class="input-suffix">V</span>
</div>
<div aria-live="polite" class="error-msg" id="u0Error" role="alert"></div>
</div>
<div class="form-group">
<label for="cmin">
                Voltage factor Cmin
                <span aria-hidden="true" class="required">*</span>
<button aria-controls="cminHelp" aria-expanded="false" class="help-btn" id="cminHelpBtn" title="More info" type="button">?</button>
</label>
<div aria-hidden="true" class="help-text" id="cminHelp" role="note">
                Cmin accounts for supply voltage tolerances during faults. BS 7671 commonly uses 0.95 for design.
              </div>
<div class="input-group">
<input aria-describedby="cminError cminHelp" aria-required="true" class="form-control" id="cmin" inputmode="decimal" max="1.0" min="0.5" step="any" type="number" value="0.95"/>
</div>
<div aria-live="polite" class="error-msg" id="cminError" role="alert"></div>
</div>
<!-- Loop components -->
<div class="form-group">
<label for="zsMeasured">
                Measured Zs (Ω)
                <button aria-controls="zsHelp" aria-expanded="false" class="help-btn" id="zsHelpBtn" title="More info" type="button">?</button>
</label>
<div aria-hidden="true" class="help-text" id="zsHelp" role="note">
                If you have a measured Zs, enter it here. If left blank, the tool derives Zs from Ze and R1+R2 with temperature correction.
              </div>
<div class="input-group">
<input aria-describedby="zsMeasuredError zsHelp" class="form-control" id="zsMeasured" inputmode="decimal" min="0" placeholder="e.g., 0.68" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">Ω</span>
</div>
<div aria-live="polite" class="error-msg" id="zsMeasuredError" role="alert"></div>
</div>
<div class="form-group">
<label for="ze">
                Ze — External earth impedance (Ω)
                <button aria-controls="zeHelp" aria-expanded="false" class="help-btn" id="zeHelpBtn" title="More info" type="button">?</button>
</label>
<div aria-hidden="true" class="help-text" id="zeHelp" role="note">
                Typical values: TN-C-S ≈ 0.35 Ω, TN-S ≈ 0.8 Ω. Use your measured value for accuracy.
              </div>
<div class="input-group">
<input aria-describedby="zeError zeHelp" class="form-control" id="ze" inputmode="decimal" min="0" placeholder="e.g., 0.35" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">Ω</span>
</div>
<div aria-live="polite" class="error-msg" id="zeError" role="alert"></div>
</div>
<div class="form-group">
<label for="r1r2">
                R1 + R2 at 20 °C (Ω)
                <button aria-controls="rHelp" aria-expanded="false" class="help-btn" id="rHelpBtn" title="More info" type="button">?</button>
</label>
<div aria-hidden="true" class="help-text" id="rHelp" role="note">
                Circuit line plus CPC resistance measured at ambient (20 °C). The tool applies a temperature factor to estimate operating conditions.
              </div>
<div class="input-group">
<input aria-describedby="r1r2Error rHelp" class="form-control" id="r1r2" inputmode="decimal" min="0" placeholder="e.g., 0.40" step="any" type="number"/>
<span aria-hidden="true" class="input-suffix">Ω</span>
</div>
<div aria-live="polite" class="error-msg" id="r1r2Error" role="alert"></div>
</div>
<div class="form-group">
<label for="temp">
                Conductor operating temperature T (°C)
                <button aria-controls="tHelp" aria-expanded="false" class="help-btn" id="tHelpBtn" title="More info" type="button">?</button>
</label>
<div aria-hidden="true" class="help-text" id="tHelp" role="note">
                For PVC circuits use 70 °C. For XLPE, use 90 °C. Copper temperature coefficient α ≈ 0.004/°C is applied.
              </div>
<div class="input-group">
<input aria-describedby="tempError tHelp" class="form-control" id="temp" inputmode="decimal" max="120" min="20" step="1" type="number" value="70"/>
<span aria-hidden="true" class="input-suffix">°C</span>
</div>
<div aria-live="polite" class="error-msg" id="tempError" role="alert"></div>
</div>
<!-- Device -->
<div class="form-group">
<span id="devTypeLabel" style="display:block; font-weight:700; margin-bottom:.35rem;">Device type (BS EN 60898)</span>
<div aria-labelledby="devTypeLabel" class="radio-row" role="radiogroup">
<div class="radio-chip">
<input checked="" id="typeB" name="devType" type="radio" value="B"/>
<label for="typeB">MCB Type B</label>
</div>
<div class="radio-chip">
<input id="typeC" name="devType" type="radio" value="C"/>
<label for="typeC">MCB Type C</label>
</div>
<div class="radio-chip">
<input id="typeD" name="devType" type="radio" value="D"/>
<label for="typeD">MCB Type D</label>
</div>
</div>
</div>
<div class="form-group">
<label for="in">
                Device rated current In (A)
                <span aria-hidden="true" class="required">*</span>
</label>
<select aria-describedby="inError" aria-required="true" class="select" id="in">
<option value="6">6 A</option>
<option value="10">10 A</option>
<option value="13">13 A</option>
<option value="16">16 A</option>
<option selected="" value="20">20 A</option>
<option value="25">25 A</option>
<option value="32">32 A</option>
<option value="40">40 A</option>
<option value="50">50 A</option>
<option value="63">63 A</option>
</select>
<div aria-live="polite" class="error-msg" id="inError" role="alert"></div>
</div>
<div aria-atomic="true" aria-label="Calculation results" aria-live="polite" class="results" id="results" role="region">
<h3>Results</h3>
<div class="result-row">
<span class="label">Zs from components at 20 °C</span>
<span class="value" id="zs20">—</span>
</div>
<div class="result-row">
<span class="label">Zs at operating temperature</span>
<span class="value" id="zsOp">—</span>
</div>
<div class="result-row">
<span class="label">Measured Zs used</span>
<span class="value" id="zsUsed">—</span>
</div>
<div class="result-row">
<span class="label">Prospective fault current If</span>
<span class="value" id="ifault">—</span>
</div>
<div class="result-row">
<span class="label">Maximum permissible Zs</span>
<span class="value" id="zsMax">—</span>
</div>
<div class="result-row">
<span class="label">Compliance</span>
<span aria-live="polite" class="badge" id="compliance">—</span>
</div>
</div>
</div>
</aside>
<article class="content">
<section aria-labelledby="data-source">
<h2 id="data-source">Data Source and Methodology</h2>
<p>
              Authoritative reference: IET Wiring Regulations — BS 7671:2018+A2:2022, including Section 41 (Protection against electric shock), Tables 41.3–41.6, and Appendix 3 (Time–current characteristics). Official publisher: The IET and BSI. See:
              <a href="https://electrical.theiet.org/bs-7671/" rel="noopener" target="_blank">IET BS 7671</a> and
              <a href="https://shop.bsigroup.com/products/iec-60364-4-41-2005" rel="noopener" target="_blank">BSI publications</a>.
            </p>
<p>
              All calculations follow standard BS 7671 design assumptions: fault current estimated from nominal voltage reduced by Cmin, loop impedance obtained from Ze and R1+R2 with temperature correction, and device instantaneous multiples for conservative checks where manufacturer curves or tabulated values are not consulted.
            </p>
<p><strong>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</strong></p>
</section>
<section aria-labelledby="formula">
<h2 id="formula">The Formulas Explained</h2>
<div class="formula-box">
<p>Loop impedance from components and temperature:</p>
<p>$$ Z_s \;=\; Z_e \;+\; (R_1 + R_2)_{20^\circ\!C}\,\big[\,1 + \alpha\,(T - 20^\circ\!C)\,\big] $$</p>
<p>Prospective earth fault current (conservative):</p>
<p>$$ I_f \;=\; \frac{C_{\min}\,U_0}{Z_s} $$</p>
<p>Maximum permissible Zs based on instantaneous operation:</p>
<p>$$ Z_{s,\text{max}} \;=\; \frac{C_{\min}\,U_0}{I_a}, \qquad I_a = k\,I_n $$</p>
<p>with typical conservative multipliers for MCBs: \(k = 5\) (Type B), \(10\) (Type C), \(20\) (Type D). For precise values use BS 7671 tables or manufacturer curves.</p>
</div>
</section>
<section aria-labelledby="glossary">
<h2 id="glossary">Glossary of Variables</h2>
<ul class="clean">
              - U0: Nominal phase-to-earth voltage (V).<br/>
              - Cmin: Minimum voltage factor (dimensionless, typically 0.95).<br/>
              - Ze: External earth fault loop impedance (Ω).<br/>
              - R1 + R2: Line plus CPC resistance at 20 °C (Ω).<br/>
              - T: Estimated operating temperature of conductors (°C).<br/>
              - α: Temperature coefficient of copper ≈ 0.004/°C.<br/>
              - Zs: Total earth fault loop impedance (Ω).<br/>
              - If: Prospective earth fault current to earth (A).<br/>
              - In: Protective device rated current (A).<br/>
              - Ia: Fault current ensuring automatic disconnection (A).<br/>
              - Zs,max: Maximum permissible loop impedance (Ω).
            </ul>
</section>
<section aria-labelledby="worked-example">
<h2 id="worked-example">How It Works: A Step-by-Step Example</h2>
<p>
              Suppose U0 = 230 V, Cmin = 0.95, Ze = 0.35 Ω, R1+R2 at 20 °C = 0.40 Ω, and T = 70 °C. Device is MCB Type B with In = 32 A.
            </p>
<ol>
<li>Temperature-correct R1+R2: α = 0.004/°C, ΔT = 50 °C ⇒ factor = 1 + 0.004×50 = 1.2. Thus (R1+R2)T = 0.40 × 1.2 = 0.48 Ω.</li>
<li>Total Zs: Zs = Ze + (R1+R2)T = 0.35 + 0.48 = 0.83 Ω.</li>
<li>Fault current: If = (Cmin × U0) / Zs = (0.95 × 230) / 0.83 ≈ 263 A.</li>
<li>Ia for Type B: k = 5 ⇒ Ia = 5 × 32 = 160 A.</li>
<li>Max Zs: Zs,max = (0.95 × 230) / 160 ≈ 1.366 Ω.</li>
<li>Compliance: 0.83 Ω ≤ 1.366 Ω ⇒ Pass.</li>
</ol>
</section>
<section aria-labelledby="faq">
<h2 id="faq">Frequently Asked Questions (FAQ)</h2>
<div>
<h3>Do I need the BS 7671 tables if I use this calculator?</h3>
<p>Yes. This tool implements the core formulas but does not replace official tables, correction notes, or manufacturer time–current data. Always verify final designs against BS 7671 and the On-Site Guide.</p>
<h3>Why is Cmin set to 0.95?</h3>
<p>It provides a conservative allowance for supply voltage variations under fault conditions, as commonly adopted in BS 7671 design calculations.</p>
<h3>What if I only have a measured Zs?</h3>
<p>Enter it directly in “Measured Zs”. The tool will prioritise it for fault current and compliance checks and ignore Ze/R1+R2 unless measured Zs is empty.</p>
<h3>How accurate is the temperature correction?</h3>
<p>It uses a standard linear copper coefficient (α ≈ 0.004/°C). This is appropriate for design estimates. For critical cases, consult detailed cable data and installation conditions.</p>
<h3>Can I use this for RCBOs?</h3>
<p>Yes, if the RCBO’s instantaneous characteristics are equivalent to the selected MCB type. For exact verification, consult the device’s time–current curves.</p>
<h3>What if Zs is very low and If is extremely high?</h3>
<p>That typically improves disconnection but ensure the device and conductors can withstand the thermal and mechanical stress (check PFC/PEFC and device breaking capacity).</p>
</div>
</section>
<div class="author-box">
<p>
              Tool developed by <strong>Ugo Candido</strong>. Content verified by <strong>Elek Editorial &amp; Technical Review Team</strong>.<br/>
              Last reviewed for accuracy on: 14 September 2025.
            </p>
</div>
</article>
</div>
</div>
</main>
<!-- Standard Footer --> 
<script defer="">
    (function(){
      'use strict';

      // Utility
      const $ = (sel) => document.querySelector(sel);
      const setText = (el, txt) => { el.textContent = txt; };
      const fmtOhm = (x) => isFinite(x) ? `${x.toFixed(3)} Ω` : '—';
      const fmtA = (x) => isFinite(x) ? `${x.toFixed(0)} A` : '—';

      // Elements
      const u0 = $('#u0');
      const cmin = $('#cmin');
      const zsMeasured = $('#zsMeasured');
      const ze = $('#ze');
      const r1r2 = $('#r1r2');
      const temp = $('#temp');
      const inSel = $('#in');
      const devRadios = document.getElementsByName('devType');

      // Errors
      const u0Error = $('#u0Error');
      const cminError = $('#cminError');
      const zsMeasuredError = $('#zsMeasuredError');
      const zeError = $('#zeError');
      const r1r2Error = $('#r1r2Error');
      const tempError = $('#tempError');
      const inError = $('#inError');

      // Results
      const zs20 = $('#zs20');
      const zsOp = $('#zsOp');
      const zsUsed = $('#zsUsed');
      const ifault = $('#ifault');
      const zsMax = $('#zsMax');
      const compliance = $('#compliance');

      // Tooltips
      const bindTooltip = (btnId, textId) => {
        const btn = document.getElementById(btnId);
        const panel = document.getElementById(textId);
        if(!btn || !panel) return;
        btn.addEventListener('click', () => {
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!expanded));
          panel.setAttribute('aria-hidden', String(expanded));
        });
        btn.addEventListener('keydown', (e) => {
          if(e.key === 'Enter' || e.key === ' '){
            e.preventDefault(); btn.click();
          }
        });
      };
      bindTooltip('u0HelpBtn','u0Help');
      bindTooltip('cminHelpBtn','cminHelp');
      bindTooltip('zsHelpBtn','zsHelp');
      bindTooltip('zeHelpBtn','zeHelp');
      bindTooltip('rHelpBtn','rHelp');
      bindTooltip('tHelpBtn','tHelp');

      // Validation helpers
      function setError(inputEl, errorEl, msg){
        if(msg){
          inputEl.setAttribute('aria-invalid','true');
          errorEl.textContent = msg;
        }else{
          inputEl.removeAttribute('aria-invalid');
          errorEl.textContent = '';
        }
      }
      function validateNumber(inputEl, errorEl, {min=null, max=null, required=false, name='Value'}){
        const raw = inputEl.value.trim();
        if(required && raw === ''){
          setError(inputEl, errorEl, `${name} is required.`);
          return null;
        }
        if(raw === ''){ setError(inputEl, errorEl, ''); return null; }
        const num = Number(raw);
        if(!isFinite(num)){
          setError(inputEl, errorEl, `Please enter a valid number for ${name}.`);
          return null;
        }
        if(min !== null && num < min){
          setError(inputEl, errorEl, `${name} must be ≥ ${min}.`);
          return null;
        }
        if(max !== null && num > max){
          setError(inputEl, errorEl, `${name} must be ≤ ${max}.`);
          return null;
        }
        setError(inputEl, errorEl, '');
        return num;
      }

      // On-blur validation
      u0.addEventListener('blur', () => validateNumber(u0, u0Error, {min:1, required:true, name:'U0'}));
      cmin.addEventListener('blur', () => validateNumber(cmin, cminError, {min:0.5, max:1.0, required:true, name:'Cmin'}));
      zsMeasured.addEventListener('blur', () => validateNumber(zsMeasured, zsMeasuredError, {min:0, required:false, name:'Measured Zs'}));
      ze.addEventListener('blur', () => validateNumber(ze, zeError, {min:0, required:false, name:'Ze'}));
      r1r2.addEventListener('blur', () => validateNumber(r1r2, r1r2Error, {min:0, required:false, name:'R1+R2'}));
      temp.addEventListener('blur', () => validateNumber(temp, tempError, {min:20, max:120, required:true, name:'Temperature'}));
      inSel.addEventListener('blur', () => { if(!inSel.value){ inError.textContent='Please choose a rating.'; } else { inError.textContent=''; } });

      // Calculation
      function getSelectedDeviceType(){
        for(const r of devRadios){ if(r.checked) return r.value; }
        return 'B';
      }
      function kForType(type){
        switch(type){
          case 'B': return 5;
          case 'C': return 10;
          case 'D': return 20;
          default: return 5;
        }
      }

      function compute(){
        const U0 = validateNumber(u0, u0Error, {min:1, required:true, name:'U0'});
        const Cmin = validateNumber(cmin, cminError, {min:0.5, max:1.0, required:true, name:'Cmin'});
        const ZsMeas = validateNumber(zsMeasured, zsMeasuredError, {min:0, required:false, name:'Measured Zs'});
        const Ze = validateNumber(ze, zeError, {min:0, required:false, name:'Ze'});
        const R1R2_20 = validateNumber(r1r2, r1r2Error, {min:0, required:false, name:'R1+R2'});
        const T = validateNumber(temp, tempError, {min:20, max:120, required:true, name:'Temperature'});
        const In = Number(inSel.value || NaN);
        if(!isFinite(In)){ inError.textContent = 'Please choose a rating.'; } else { inError.textContent = ''; }

        // Early defaults
        let zs_from_components_20 = NaN;
        let zs_operating = NaN;
        const alpha = 0.004;

        if(isFinite(Ze) && isFinite(R1R2_20)){
          zs_from_components_20 = Ze + R1R2_20;
        }
        if(isFinite(zs_from_components_20) && isFinite(T)){
          const factor = 1 + alpha * (T - 20);
          zs_operating = Ze + (R1R2_20 * factor);
        }

        // Zs used for If and compliance: prefer measured, else operating, else 20C
        const Zs_used = isFinite(ZsMeas) ? ZsMeas : (isFinite(zs_operating) ? zs_operating : zs_from_components_20);

        // Display intermediate
        setText(zs20, fmtOhm(zs_from_components_20));
        setText(zsOp, fmtOhm(zs_operating));
        setText(zsUsed, isFinite(Zs_used) ? fmtOhm(Zs_used) : '—');

        // Max Zs
        const type = getSelectedDeviceType();
        const k = kForType(type);
        const Ia = isFinite(In) ? k * In : NaN;
        const Zs_max = (isFinite(U0) && isFinite(Cmin) && isFinite(Ia) && Ia>0) ? (Cmin * U0) / Ia : NaN;
        setText(zsMax, fmtOhm(Zs_max));

        // Fault current
        const If = (isFinite(U0) && isFinite(Cmin) && isFinite(Zs_used) && Zs_used > 0) ? (Cmin * U0) / Zs_used : NaN;
        setText(ifault, fmtA(If));

        // Compliance
        if(isFinite(Zs_used) && isFinite(Zs_max)){
          if(Zs_used <= Zs_max){
            compliance.className = 'badge pass';
            setText(compliance, 'PASS — Zs ≤ Zs,max');
          }else{
            compliance.className = 'badge fail';
            setText(compliance, 'FAIL — Zs > Zs,max');
          }
        }else{
          compliance.className = 'badge';
          setText(compliance, '—');
        }
      }

      // Recompute on input changes
      [u0, cmin, zsMeasured, ze, r1r2, temp, inSel].forEach(el => {
        el.addEventListener('input', compute, {passive:true});
        el.addEventListener('change', compute, {passive:true});
      });
      Array.from(devRadios).forEach(r => r.addEventListener('change', compute, {passive:true}));

      // Initial compute
      compute();
    })();
  </script>

<script defer src="/assets/js/mobile-menu.js"></script>
<script defer src="/assets/js/page-enhancements.js"></script>
</body></html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pythagorean Theorem Calculator</title>
  <meta name="description" content="Professional Pythagorean theorem calculator for right triangles. Compute the missing side (a, b, or c), angles, area, and perimeter with step-by-step explanation and LaTeX formulas." />
  <link rel="canonical" href="https://calcdomain.com/math/geometry/pythagorean-theorem-calculator.html" />
  <meta name="author" content="Ugo Candido" />

  <!-- Icons (optional placeholders to match site conventions) -->
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <!-- Tailwind via CDN (kept lean, no sticky header) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- MathJax for LaTeX -->
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
          id="MathJax-script"></script>

  <style>
    :root {
      --focus: #2563eb;
      --border: #d1d5db;
    }
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji"; }
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 0.75rem; }
    .prose h3 { font-size: 1.125rem; font-weight: 600; margin-top: 1.25rem; margin-bottom: 0.5rem; }
    .prose p { margin-bottom: 0.9rem; line-height: 1.65; }
    .prose ul, .prose ol { margin-left: 1.25rem; margin-bottom: 0.75rem; }
    .formula-box {
      background:#f3f4f6; border:1px solid var(--border); border-radius:10px; padding:1rem; overflow:auto;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
    }
    /* Visible focus */
    :is(a, button, input, select, summary, textarea):focus {
      outline: 3px solid var(--focus);
      outline-offset: 2px;
    }
    /* Avoid CLS for results area */
    #results-panel { min-height: 18rem; }

    /* Touch targets (approx 48px) */
    .touch-target { min-height: 48px; }

    /* Print */
    @media print {
      #results-chart-container, #site-aside, #site-nav { display: none !important; }
      body { background: #fff; }
      main { padding: 0; }
    }
  </style>

  <!-- JSON-LD: WebPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Pythagorean Theorem Calculator",
    "description":"Compute right-triangle sides, angles, area, and perimeter with the Pythagorean theorem.",
    "url":"https://calcdomain.com/math/geometry/pythagorean-theorem-calculator.html",
    "inLanguage":"en",
    "author":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"}
  }
  </script>

  <!-- JSON-LD: BreadcrumbList -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
      {"@type":"ListItem","position":2,"name":"Math","item":"https://calcdomain.com/math.html"},
      {"@type":"ListItem","position":3,"name":"Geometry","item":"https://calcdomain.com/math/geometry.html"},
      {"@type":"ListItem","position":4,"name":"Pythagorean Theorem Calculator","item":"https://calcdomain.com/math/geometry/pythagorean-theorem-calculator.html"}
    ]
  }
  </script>

  <!-- JSON-LD: WebApplication (Calculator) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"Pythagorean Theorem Calculator",
    "applicationCategory":"Calculator",
    "operatingSystem":"Web",
    "url":"https://calcdomain.com/math/geometry/pythagorean-theorem-calculator.html",
    "creator":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"},
    "featureList":[
      "Solve for unknown side (a, b, or c)",
      "Compute angles, area, perimeter",
      "Validation and step-by-step explanation",
      "Accessible UI with keyboardable tooltips"
    ]
  }
  </script>

  <!-- JSON-LD: HowTo -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to use the Pythagorean Theorem Calculator",
    "description":"Enter any two sides of a right triangle to compute the third side and derived properties.",
    "step":[
      {"@type":"HowToStep","name":"Enter sides","text":"Provide any two sides among a, b (legs) and c (hypotenuse)."},
      {"@type":"HowToStep","name":"Validate triangle","text":"Ensure c is the hypotenuse (largest side)."},
      {"@type":"HowToStep","name":"Calculate","text":"The tool applies c = √(a² + b²) and trigonometry to find angles, area, and perimeter."},
      {"@type":"HowToStep","name":"Review results","text":"See computed values and a clean diagram, plus a LaTeX formula explanation."}
    ]
  }
  </script>

  <!-- JSON-LD: FAQPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"Which side is the hypotenuse?",
       "acceptedAnswer":{"@type":"Answer","text":"The hypotenuse, c, is the side opposite the right angle and is the longest side of the triangle."}},
      {"@type":"Question","name":"Can I compute an angle with just two sides?",
       "acceptedAnswer":{"@type":"Answer","text":"Yes. With two sides, you can use inverse trigonometric functions (e.g., α = arctan(a/b)) to compute angles."}},
      {"@type":"Question","name":"What units does the calculator use?",
       "acceptedAnswer":{"@type":"Answer","text":"You may enter any length unit (cm, m, in, ft). Results preserve your input unit consistently."}},
      {"@type":"Question","name":"What if my inputs do not match a right triangle?",
       "acceptedAnswer":{"@type":"Answer","text":"The calculator validates inputs. If c² ≠ a² + b² within tolerance, it will show a helpful error message."}},
      {"@type":"Question","name":"Can I solve when I know c and one leg?",
       "acceptedAnswer":{"@type":"Answer","text":"Yes. The tool derives the missing leg via a = √(c² − b²) or b = √(c² − a²), provided c is largest."}},
      {"@type":"Question","name":"Do I need to specify units?",
       "acceptedAnswer":{"@type":"Answer","text":"Units are optional. If used, keep them consistent across inputs to interpret results correctly."}},
      {"@type":"Question","name":"Is this the same as the distance formula?",
       "acceptedAnswer":{"@type":"Answer","text":"Yes, the 2D distance formula derives from the Pythagorean theorem: d = √[(x₂ − x₁)² + (y₂ − y₁)²]."}}
    ]
  }
  </script>
</head>
<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky for maximum mobile viewport space) -->
  <header class="bg-white border-b" id="site-header">
    <nav id="site-nav" class="container mx-auto px-4 lg:px-6 py-4 flex items-center justify-between">
      <a href="index.html" class="text-2xl font-bold text-blue-700 focus:outline-none">CalcDomain</a>
      <a href="search.html" class="text-sm text-gray-700 hover:text-blue-700 focus:outline-none">Search</a>
    </nav>
  </header>

  <main class="container mx-auto px-4 lg:px-6 py-8">
    <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
      <a href="index.html" class="hover:text-blue-700">Home</a> &raquo;
      <a href="math.html" class="hover:text-blue-700">Math</a> &raquo;
      <a href="math/geometry.html" class="hover:text-blue-700">Geometry</a> &raquo;
      <span class="text-gray-900">Pythagorean Theorem Calculator</span>
    </nav>

    <div class="flex flex-col lg:flex-row gap-8">
      <section class="w-full lg:w-2/3" id="content-col">
        <!-- 1) H1 -->
        <h1 class="text-3xl font-extrabold mb-2">Pythagorean Theorem Calculator</h1>

        <!-- 2) Intro -->
        <p class="text-gray-700 mb-6">
          Enter any two sides of a right triangle—legs <em>a</em> and <em>b</em>, or hypotenuse <em>c</em>—to compute the missing side, angles, area, and perimeter. Built for students, engineers, and educators who need accurate results with crystal-clear explanations.
        </p>

        <!-- 3) Calculator -->
        <section class="bg-white p-6 rounded-lg shadow-sm border" aria-labelledby="calc-heading">
          <h2 id="calc-heading" class="sr-only">Calculator</h2>

          <form id="pythag-form" novalidate class="space-y-6" aria-describedby="form-help">
            <p id="form-help" class="text-sm text-gray-600">
              Provide <strong>any two</strong> of the three sides. Fields marked with <span aria-hidden="true" class="text-red-600">*</span> are required for each chosen input.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <!-- Side a -->
              <div>
                <label for="sideA" class="block text-sm font-medium text-gray-900">Side a <span class="text-red-600">*</span></label>
                <div class="flex items-start gap-2">
                  <input type="number" inputmode="decimal" step="any" min="0" id="sideA"
                         class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none touch-target"
                         aria-required="true" aria-describedby="a-help a-err" placeholder="e.g., 3">
                  <button type="button" class="mt-1 px-2 py-2 text-gray-700 border border-gray-300 rounded-md touch-target"
                          aria-label="More info about side a" aria-expanded="false" aria-controls="a-help" data-tooltip="a">
                    ?
                  </button>
                </div>
                <p id="a-help" class="text-xs text-gray-600 mt-1 hidden">
                  Leg adjacent to one acute angle. Use any consistent length unit (e.g., cm, m, in).
                </p>
                <p id="a-err" class="text-xs text-red-700 mt-1"></p>
              </div>

              <!-- Side b -->
              <div>
                <label for="sideB" class="block text-sm font-medium text-gray-900">Side b <span class="text-red-600">*</span></label>
                <div class="flex items-start gap-2">
                  <input type="number" inputmode="decimal" step="any" min="0" id="sideB"
                         class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none touch-target"
                         aria-required="true" aria-describedby="b-help b-err" placeholder="e.g., 4">
                  <button type="button" class="mt-1 px-2 py-2 text-gray-700 border border-gray-300 rounded-md touch-target"
                          aria-label="More info about side b" aria-expanded="false" aria-controls="b-help" data-tooltip="b">
                    ?
                  </button>
                </div>
                <p id="b-help" class="text-xs text-gray-600 mt-1 hidden">
                  The other leg. Enter any two sides total; the calculator will infer the third.
                </p>
                <p id="b-err" class="text-xs text-red-700 mt-1"></p>
              </div>

              <!-- Side c (hypotenuse) -->
              <div>
                <label for="sideC" class="block text-sm font-medium text-gray-900">Hypotenuse c <span class="text-red-600">*</span></label>
                <div class="flex items-start gap-2">
                  <input type="number" inputmode="decimal" step="any" min="0" id="sideC"
                         class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none touch-target"
                         aria-required="true" aria-describedby="c-help c-err" placeholder="e.g., 5">
                  <button type="button" class="mt-1 px-2 py-2 text-gray-700 border border-gray-300 rounded-md touch-target"
                          aria-label="More info about hypotenuse c" aria-expanded="false" aria-controls="c-help" data-tooltip="c">
                    ?
                  </button>
                </div>
                <p id="c-help" class="text-xs text-gray-600 mt-1 hidden">
                  Longest side opposite the right angle (must be ≥ a and ≥ b). If unknown, leave blank.
                </p>
                <p id="c-err" class="text-xs text-red-700 mt-1"></p>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div>
                <label for="units" class="block text-sm font-medium text-gray-900">Units (optional)</label>
                <input type="text" id="units" placeholder="e.g., cm, m, in"
                       class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none touch-target" />
              </div>

              <div class="md:col-span-2 flex items-end gap-3">
                <button id="calc-btn" type="button"
                        class="touch-target px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md"
                        aria-describedby="action-help">
                  Calculate
                </button>
                <button id="clear-btn" type="button"
                        class="touch-target px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-900 font-semibold rounded-md">
                  Clear
                </button>
                <p id="action-help" class="sr-only">Press Calculate to compute missing values. Press Clear to reset the form.</p>
              </div>
            </div>
          </form>
        </section>

        <!-- 4) Results -->
        <section id="results-panel" class="mt-6 bg-blue-50 border border-blue-100 rounded-lg p-6" aria-live="polite">
          <h2 class="text-xl font-bold mb-4">Results</h2>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
              <div class="bg-white border rounded-lg p-3 text-center">
                <div class="text-sm text-gray-600">a</div>
                <div id="res-a" class="text-2xl font-bold text-blue-700">—</div>
              </div>
              <div class="bg-white border rounded-lg p-3 text-center">
                <div class="text-sm text-gray-600">b</div>
                <div id="res-b" class="text-2xl font-bold text-blue-700">—</div>
              </div>
              <div class="bg-white border rounded-lg p-3 text-center">
                <div class="text-sm text-gray-600">c (hyp)</div>
                <div id="res-c" class="text-2xl font-bold text-blue-700">—</div>
              </div>
              <div class="bg-white border rounded-lg p-3 text-center">
                <div class="text-sm text-gray-600">α (deg)</div>
                <div id="res-alpha" class="text-2xl font-bold text-blue-700">—</div>
              </div>
              <div class="bg-white border rounded-lg p-3 text-center">
                <div class="text-sm text-gray-600">β (deg)</div>
                <div id="res-beta" class="text-2xl font-bold text-blue-700">—</div>
              </div>
              <div class="bg-white border rounded-lg p-3 text-center">
                <div class="text-sm text-gray-600">Area</div>
                <div id="res-area" class="text-2xl font-bold text-blue-700">—</div>
              </div>
              <div class="bg-white border rounded-lg p-3 text-center">
                <div class="text-sm text-gray-600">Perimeter</div>
                <div id="res-perim" class="text-2xl font-bold text-blue-700">—</div>
              </div>
            </div>

            <div id="results-chart-container" class="bg-white border rounded-lg p-3">
              <!-- Accessible SVG diagram -->
              <figure aria-labelledby="tri-caption">
                <svg id="tri-svg" viewBox="0 0 220 160" role="img" aria-describedby="tri-desc" class="w-full h-auto">
                  <desc id="tri-desc">Right triangle diagram showing sides a, b, and hypotenuse c.</desc>
                  <!-- Axes / triangle -->
                  <polygon id="tri-shape" points="20,140 200,140 200,40" fill="#dbeafe" stroke="#1d4ed8" stroke-width="2"/>
                  <!-- Right angle marker -->
                  <rect x="190" y="130" width="10" height="10" fill="#1f2937" />
                  <!-- Labels -->
                  <text id="label-a" x="110" y="155" font-size="12" fill="#111827" text-anchor="middle">a</text>
                  <text id="label-b" x="205" y="90" font-size="12" fill="#111827">b</text>
                  <text id="label-c" x="120" y="80" font-size="12" fill="#111827">c</text>
                </svg>
                <figcaption id="tri-caption" class="text-sm text-gray-700 mt-2">
                  Scaled illustration of the solved right triangle (not to exact scale).
                </figcaption>
              </figure>
            </div>
          </div>

          <details class="mt-6 bg-white rounded-lg border">
            <summary class="px-4 py-3 font-semibold text-gray-900 cursor-pointer">Step-by-step (derivation & check)</summary>
            <div class="p-4 space-y-3">
              <div class="formula-box">
                Given legs \(a\) and \(b\): \(\quad c = \sqrt{a^2 + b^2}\).
                <br/>Given \(c\) and \(a\): \(\quad b = \sqrt{c^2 - a^2}\).
                <br/>Given \(c\) and \(b\): \(\quad a = \sqrt{c^2 - b^2}\).
                <br/><br/>Angles: \(\quad \alpha = \arctan\!\left(\dfrac{a}{b}\right),\; \beta = \arctan\!\left(\dfrac{b}{a}\right)\) (in degrees).
                <br/>Area: \(\quad \dfrac{1}{2}ab \qquad\) Perimeter: \(\quad a + b + c\).
              </div>
              <p id="step-text" class="text-sm text-gray-700"></p>
            </div>
          </details>
        </section>

        <!-- 5) Authoritative content ecosystem -->
        <section class="prose bg-white p-6 rounded-lg shadow-sm border mt-8">
          <h2>Authoritative data source & methodology</h2>
          <p>
            <strong>AuthoritativeDataSource:</strong> Euclid’s Elements, Book I, Proposition 47 (Pythagorean Theorem). A modern reference is:
            <a class="text-blue-700 underline" href="https://mathworld.wolfram.com/PythagoreanTheorem.html" rel="nofollow">Wolfram MathWorld – Pythagorean Theorem</a>.
            <br/>
            <em>“All calculations strictly follow the formulas and definitions provided by this source.”</em>
          </p>

          <h2>The formula explained</h2>
          <div class="formula-box">
            A right triangle with legs \(a\) and \(b\) and hypotenuse \(c\) satisfies:
            \[
              c = \sqrt{a^2 + b^2}\,.
            \]
            If the hypotenuse \(c\) and one leg are known, the other leg follows from
            \[
              a = \sqrt{c^2 - b^2}\quad\text{or}\quad b = \sqrt{c^2 - a^2}.
            \]
            Angles derive from basic trigonometry:
            \[
              \alpha = \arctan\!\left(\frac{a}{b}\right),\quad
              \beta = \arctan\!\left(\frac{b}{a}\right),\quad
              \alpha+\beta=90^\circ.
            \]
          </div>

          <h2>Glossary of variables</h2>
          <ul>
            <li><strong>a</strong>: one leg (length ≥ 0).</li>
            <li><strong>b</strong>: the other leg (length ≥ 0).</li>
            <li><strong>c</strong>: hypotenuse (longest side, opposite the right angle, \(c \ge a,b\)).</li>
            <li><strong>α</strong>, <strong>β</strong>: acute angles in degrees (\(0^\circ &lt; \alpha,\beta &lt; 90^\circ\)).</li>
            <li><strong>Area</strong>: \(\frac{1}{2}ab\) (square of the input unit).</li>
            <li><strong>Perimeter</strong>: \(a+b+c\) (same unit as inputs).</li>
          </ul>

          <h2>How it works: a step-by-step example</h2>
          <h3>Example: given a = 3, b = 4 (units arbitrary)</h3>
          <ol>
            <li>Compute \(c = \sqrt{3^2 + 4^2} = \sqrt{9+16} = \sqrt{25} = 5\).</li>
            <li>Angles: \(\alpha = \arctan(3/4) \approx 36.87^\circ\), \(\beta = 90^\circ - \alpha \approx 53.13^\circ\).</li>
            <li>Area: \(\tfrac{1}{2}\cdot 3 \cdot 4 = 6\) square units.</li>
            <li>Perimeter: \(3 + 4 + 5 = 12\) units.</li>
          </ol>

          <h2>Frequently Asked Questions (FAQ)</h2>
          <details><summary>What if I only know the hypotenuse?</summary>
            <p>To solve a right triangle, you need at least two pieces of information. Provide the hypotenuse and one leg to compute the other leg.</p>
          </details>
          <details><summary>Can I mix units?</summary>
            <p>No—keep units consistent across inputs. The calculator treats numbers as pure lengths in the same unit.</p>
          </details>
          <details><summary>How precise are the results?</summary>
            <p>Results are computed in double-precision floating point and displayed with sensible rounding. Small rounding differences can occur.</p>
          </details>
          <details><summary>Is there a tolerance in the right-triangle check?</summary>
            <p>Yes. The calculator accepts \(c^2 \approx a^2 + b^2\) within a tight numerical tolerance to account for rounding in user inputs.</p>
          </details>
          <details><summary>Does this work for non-right triangles?</summary>
            <p>No. This tool specifically targets right triangles. For non-right triangles, use the Law of Cosines.</p>
          </details>

          <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700">
            <p><strong>Tool developed by Ugo Candido.</strong> Math content reviewed by the CalcDomain Editorial Board.<br/>
              Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
          </div>
        </section>
      </section>

      <!-- Aside -->
      <aside class="w-full lg:w-1/3" id="site-aside">
        <div class="sticky top-6 space-y-6">
          <div class="bg-white p-6 rounded-lg shadow-sm border">
            <h3 class="font-bold text-lg mb-3">Why this calculator</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
              <li>WCAG 2.1 AA accessible UI with keyboardable tips.</li>
              <li>Explains formulas in LaTeX and validates inputs.</li>
              <li>Shows angles, area, perimeter, and a live diagram.</li>
            </ul>
          </div>

          <div class="bg-gray-100 rounded-lg h-64 flex items-center justify-center text-gray-500 border">
            Ad Placement (300×600)
          </div>

          <div class="bg-white p-6 rounded-lg shadow-sm border">
            <h3 class="font-bold text-lg mb-3">Related geometry tools</h3>
            <ul class="space-y-2 text-sm">
              <li><a class="text-blue-700 hover:underline" href="distance-calculator.html">Distance Formula Calculator</a></li>
              <li><a class="text-blue-700 hover:underline" href="right-triangle-calculator.html">Right Triangle Solver</a></li>
              <li><a class="text-blue-700 hover:underline" href="circle-calculator.html">Circle Calculator</a></li>
            </ul>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-4 space-x-4">
        <a href="about.html" class="hover:text-blue-700">About</a>
        <a href="contact.html" class="hover:text-blue-700">Contact</a>
        <a href="privacy.html" class="hover:text-blue-700">Privacy</a>
        <a href="terms.html" class="hover:text-blue-700">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator logic (defered by placement) -->
  <script>
  (function () {
    const $ = (id) => document.getElementById(id);

    const els = {
      a: $('sideA'),
      b: $('sideB'),
      c: $('sideC'),
      unit: $('units'),
      aErr: $('a-err'),
      bErr: $('b-err'),
      cErr: $('c-err'),
      step: $('step-text'),
      resA: $('res-a'),
      resB: $('res-b'),
      resC: $('res-c'),
      resAlpha: $('res-alpha'),
      resBeta: $('res-beta'),
      resArea: $('res-area'),
      resPerim: $('res-perim'),
      svg: $('tri-svg'),
      labelA: $('label-a'),
      labelB: $('label-b'),
      labelC: $('label-c'),
      calcBtn: $('calc-btn'),
      clearBtn: $('clear-btn')
    };

    // Accessible tooltips toggling
    document.querySelectorAll('[data-tooltip]').forEach(btn => {
      btn.addEventListener('click', () => {
        const id = btn.getAttribute('data-tooltip') + '-help';
        const tip = $(id);
        const open = tip.classList.toggle('hidden');
        btn.setAttribute('aria-expanded', (!open).toString());
      });
      btn.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); btn.click(); }
      });
    });

    // Validation helpers
    function parseVal(el) {
      const v = parseFloat(el.value);
      return Number.isFinite(v) ? v : null;
    }
    const tol = 1e-6;

    function showErr(elErr, msg) {
      elErr.textContent = msg || '';
    }

    function clearErrors() {
      showErr(els.aErr, ''); showErr(els.bErr, ''); showErr(els.cErr, '');
    }

    function onBlurValidate(el, errEl, label) {
      el.addEventListener('blur', () => {
        const v = parseVal(el);
        if (el.value !== '' && (v === null || v < 0)) {
          showErr(errEl, `${label} must be a non-negative number.`);
        } else {
          showErr(errEl, '');
        }
      });
    }
    onBlurValidate(els.a, els.aErr, 'Side a');
    onBlurValidate(els.b, els.bErr, 'Side b');
    onBlurValidate(els.c, els.cErr, 'Hypotenuse c');

    function fmt(v) {
      if (v == null || !Number.isFinite(v)) return '—';
      const s = Number(v.toFixed(6));
      // Trim trailing zeros
      return ('' + s).replace(/(\.\d*?[1-9])0+$|\.0+$/,'$1');
    }

    function withUnit(v, unit) {
      const f = fmt(v);
      return unit ? `${f} ${unit}` : f;
    }

    function degrees(rad) { return rad * 180 / Math.PI; }

    function solve() {
      clearErrors();
      const unit = (els.unit.value || '').trim();

      let a = parseVal(els.a);
      let b = parseVal(els.b);
      let c = parseVal(els.c);

      const count = [a, b, c].filter(v => v !== null && v > 0).length;
      if (count < 2) {
        showErr(els.aErr, 'Provide at least two sides (any).');
        showErr(els.bErr, 'Provide at least two sides (any).');
        showErr(els.cErr, 'Provide at least two sides (any).');
        renderResults(null);
        return;
      }

      // Compute the missing side
      if ((a == null || a === 0) && b != null && c != null) {
        if (c <= b) { showErr(els.cErr, 'Hypotenuse c must be greater than the legs.'); renderResults(null); return; }
        const val = c*c - b*b;
        if (val < -tol) { showErr(els.cErr, 'Inputs do not form a right triangle (c² < b²).'); renderResults(null); return; }
        a = Math.sqrt(Math.max(0, val));
      } else if ((b == null || b === 0) && a != null && c != null) {
        if (c <= a) { showErr(els.cErr, 'Hypotenuse c must be greater than the legs.'); renderResults(null); return; }
        const val = c*c - a*a;
        if (val < -tol) { showErr(els.cErr, 'Inputs do not form a right triangle (c² < a²).'); renderResults(null); return; }
        b = Math.sqrt(Math.max(0, val));
      } else if ((c == null || c === 0) && a != null && b != null) {
        c = Math.sqrt(a*a + b*b);
      }

      // Validate non-negatives
      if ([a,b,c].some(v => v == null || v <= 0)) {
        showErr(els.aErr, 'All provided sides must be positive.');
        renderResults(null);
        return;
      }

      // Ensure c is max
      if (!(c >= a - tol && c >= b - tol)) {
        showErr(els.cErr, 'Hypotenuse c must be the longest side.');
        renderResults(null);
        return;
      }

      // Pythagorean check
      const diff = Math.abs(c*c - (a*a + b*b));
      if (diff > 1e-4) {
        showErr(els.cErr, 'Warning: c² is not equal to a² + b² (inputs may not be a right triangle).');
      }

      // Angles (α opposite a, β opposite b)
      const alpha = degrees(Math.atan2(a, b));
      const beta  = 90 - alpha;

      // Area, perimeter
      const area = 0.5 * a * b;
      const perim = a + b + c;

      // Step text
      els.step.innerHTML =
        `Using \\(a=${fmt(a)}\\), \\(b=${fmt(b)}\\): \\(c=\\sqrt{a^2+b^2}=\\sqrt{${fmt(a)}^2+${fmt(b)}^2}=\\,${fmt(c)}\\). ` +
        `Angles: \\(\\alpha=\\arctan(a/b)=\\arctan(${fmt(a)}/${fmt(b)})\\approx ${fmt(alpha)}^\\circ\\), ` +
        `\\(\\beta=90^\\circ-\\alpha\\approx ${fmt(beta)}^\\circ\\). ` +
        `Area \\(=\\tfrac{1}{2}ab\\)= ${fmt(area)} ${unit ? unit+'²' : ''}, Perimeter \\(=a+b+c\\)= ${fmt(perim)} ${unit}.`;

      if (window.MathJax && window.MathJax.typesetPromise) {
        MathJax.typesetPromise();
      }

      renderResults({a,b,c,alpha,beta,area,perim,unit});
    }

    function renderResults(data) {
      if (!data) {
        els.resA.textContent = '—';
        els.resB.textContent = '—';
        els.resC.textContent = '—';
        els.resAlpha.textContent = '—';
        els.resBeta.textContent = '—';
        els.resArea.textContent = '—';
        els.resPerim.textContent = '—';
        updateDiagram(null);
        return;
      }
      const u = data.unit;
      els.resA.textContent = withUnit(data.a, u);
      els.resB.textContent = withUnit(data.b, u);
      els.resC.textContent = withUnit(data.c, u);
      els.resAlpha.textContent = fmt(data.alpha);
      els.resBeta.textContent  = fmt(data.beta);
      els.resArea.textContent  = u ? `${fmt(data.area)} ${u}²` : fmt(data.area);
      els.resPerim.textContent = withUnit(data.perim, u);
      updateDiagram(data);
    }

    // Simple right-triangle SVG scaling
    function updateDiagram(data) {
      const shape = document.getElementById('tri-shape');
      const labA = els.labelA, labB = els.labelB, labC = els.labelC;
      if (!data) {
        shape.setAttribute('points','20,140 200,140 200,40');
        labA.textContent = 'a'; labB.textContent = 'b'; labC.textContent = 'c';
        return;
      }
      let {a,b,c,unit} = data;
      // Normalize to fit 160×120 box roughly
      const maxLeg = Math.max(a,b);
      const scale = maxLeg > 0 ? 120 / maxLeg : 1;
      const ax = 20, ay = 140;
      const bx = 20 + a*scale, by = 140;          // along x for side a
      const cx = 20 + a*scale, cy = 140 - b*scale; // up for side b
      shape.setAttribute('points', `${ax},${ay} ${bx},${by} ${cx},${cy}`);

      // Position labels
      labA.setAttribute('x', String((ax+bx)/2));
      labA.setAttribute('y', String(ay + 15));
      labA.textContent = unit ? `a = ${fmt(a)} ${unit}` : `a = ${fmt(a)}`;

      labB.setAttribute('x', String(bx + 5));
      labB.setAttribute('y', String((by+cy)/2));
      labB.textContent = unit ? `b = ${fmt(b)} ${unit}` : `b = ${fmt(b)}`;

      labC.setAttribute('x', String((ax+cx)/2));
      labC.setAttribute('y', String((ay+cy)/2 - 5));
      labC.textContent = unit ? `c = ${fmt(c)} ${unit}` : `c = ${fmt(c)}`;
    }

    els.calcBtn.addEventListener('click', solve);
    els.clearBtn.addEventListener('click', () => {
      [els.a, els.b, els.c, els.unit].forEach(el => el.value = '');
      clearErrors();
      els.step.textContent = '';
      renderResults(null);
    });

    // Also compute when pressing Enter in any field
    ['sideA','sideB','sideC','units'].forEach(id => {
      const el = $(id);
      el.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') { e.preventDefault(); solve(); }
      });
    });
  })();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en"><head> 
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<meta charset="utf-8"/>
<title>priming sugar calculator 5 gallons | Professional, Accessible Tool</title>
<meta content="Accurately compute priming sugar for 5 gallons of beer. Choose sugar type, target CO₂ volumes, and temperature. WCAG 2.1 AA accessible, mobile-first, and optimized for speed." name="description"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="Ugo Candido" name="author"/>
<link href="https://calcdomain.com/priming-sugar-5-gallons.html" rel="canonical"/>
<meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name="robots"/>
<meta content="#ffffff" name="theme-color"/>
<!-- Async load of non-critical global styles -->
<noscript></noscript>
<style>
    /* Critical CSS — mobile-first, WCAG AA-focused, zero CLS, no sticky header */
    :root{
      --primary:#005A9C; --primary-contrast:#ffffff; --secondary:#0B3D62;
      --bg:#ffffff; --bg-alt:#F7F9FC; --text:#1B1F24; --muted:#5A6773;
      --border:#DFE5EB; --success:#1F8B4C; --danger:#C12B2B;
      --radius:12px; --radius-sm:8px; --shadow:0 4px 12px rgba(0,0,0,.06);
      --touch:48px;
    }
    @media (prefers-contrast: more){
      :root{ --primary:#003366; --secondary:#000; --border:#000; }
    }
    @media (prefers-reduced-motion: reduce){
      *{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}
    }
    *,*::before,*::after{box-sizing:border-box}
    html{font-size:16px}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      color:var(--text); background:var(--bg); line-height:1.55;
    }
    .container{max-width:1140px;margin:0 auto;padding:0 1rem}
    .skip-link{position:absolute;left:8px;top:-40px;background:var(--primary);color:#fff;padding:.5rem .75rem;border-radius:6px;text-decoration:none;z-index:999}
    .skip-link:focus{top:8px;outline:3px solid #fff}
    header.site-header{border-bottom:1px solid var(--border);background:#fff}
    .header-inner{display:flex;align-items:center;gap:1rem;padding:.75rem 0}
    .brand{font-weight:800;letter-spacing:.2px;color:var(--primary);text-decoration:none}
    .brand:focus{outline:3px solid var(--primary);outline-offset:2px;border-radius:6px}
    .main{padding:1.25rem 0 2rem}
    nav.breadcrumb{font-size:.925rem;color:var(--muted);margin-bottom:1rem}
    nav.breadcrumb a{color:var(--primary);text-decoration:none}
    h1{font-size:1.75rem;line-height:1.2;color:var(--secondary);margin:0 0 .5rem}
    p.lead{color:var(--muted);max-width:70ch;margin:.25rem 0 1rem}
    .layout{
      display:grid; gap:1.5rem;
      grid-template-columns:1fr;
    }
    @media (min-width: 992px){
      .layout{grid-template-columns:440px 1fr}
    }

    /* Calculator card */
    .card{
      background:#fff;border:1px solid var(--border);border-radius:var(--radius);
      padding:1rem; box-shadow:var(--shadow);
    }
    .card h2{font-size:1.25rem;margin:0 0 .75rem;color:var(--secondary)}
    .form-group{margin-bottom:1rem}
    .form-group:last-child{margin-bottom:0}
    label{display:block;font-weight:700;margin-bottom:.375rem}
    .hint{font-size:.9rem;color:var(--muted);margin:.25rem 0 .25rem}
    .input{width:100%;min-height:48px;padding:.7rem .9rem;border:1px solid var(--border);border-radius:10px;font-size:1rem}
    .input:focus-visible{outline:3px solid var(--primary);outline-offset:2px;border-color:var(--primary)}
    .input[aria-invalid="true"]{border-color:var(--danger)}
    select.input{background:#fff}
    .units-row{display:flex;gap:.5rem;flex-wrap:wrap}
    .chip-group{display:flex;gap:.5rem;flex-wrap:wrap}
    .chip{
      appearance:none;border:1px solid var(--border);background:#fff;color:var(--text);
      padding:.5rem .75rem;border-radius:999px;cursor:pointer;min-height:var(--touch);
      display:inline-flex;align-items:center;justify-content:center;font-weight:600
    }
    .chip[aria-pressed="true"], .chip.is-active{background:var(--primary);color:#fff;border-color:var(--primary)}
    .error{color:var(--danger);font-size:.9rem;margin-top:.25rem}
    .inline{display:flex;gap:.75rem;align-items:center;flex-wrap:wrap}
    .tooltip-btn{
      margin-left:.5rem; border:1px solid var(--border); background:#fff; color:var(--secondary);
      border-radius:999px; width:28px; height:28px; min-width:28px; min-height:28px;
      display:inline-flex; align-items:center; justify-content:center; line-height:1; cursor:pointer;
    }
    .tooltip-btn:focus-visible{outline:3px solid var(--primary);outline-offset:2px}
    .tooltip{display:none;margin:.375rem 0 0;background:var(--bg-alt);border:1px solid var(--border);padding:.6rem .75rem;border-radius:.5rem;color:#24313B}
    .tooltip[data-open="true"]{display:block}

    /* Results panel (separate section) */
    .results{background:var(--bg-alt);border:1px solid var(--border);border-radius:var(--radius);padding:1rem;min-height:240px}
    .results h2{font-size:1.25rem;margin:0 0 .75rem}
    .result-row{display:flex;justify-content:space-between;align-items:center;padding:.6rem .25rem;border-bottom:1px solid var(--border)}
    .result-row:last-child{border-bottom:0}
    .label-muted{color:var(--muted)}
    .value-strong{font-weight:800;color:var(--success);font-size:1.2rem}

    /* Content sections */
    section.content h2{margin-top:1.5rem;font-size:1.35rem}
    .formula{background:#EEF3F8;border:1px solid var(--border);border-radius:10px;padding:1rem;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;overflow-x:auto}
    .def-list{margin:.5rem 0 0; padding-left:1rem}
    .faq h3{font-size:1.05rem;margin:.75rem 0 .25rem}

    footer.site-footer{border-top:1px solid var(--border);margin-top:2rem;background:#fff}
    .footer-inner{padding:1rem 0;color:var(--muted);font-size:.95rem}

    /* Utility */
    .sr-only{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:.7rem 1rem;border-radius:10px;border:1px solid var(--primary);color:#fff;background:var(--primary);text-decoration:none;min-height:var(--touch);min-width:var(--touch);font-weight:700}
    .btn:focus-visible{outline:3px solid var(--primary);outline-offset:2px}
    .note{color:var(--muted);font-size:.9rem}
  </style>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebPage",
      "@id": "https://calcdomain.com/priming-sugar-calculator-5-gallons",
      "url": "https://calcdomain.com/priming-sugar-calculator-5-gallons",
      "name": "priming sugar calculator 5 gallons",
      "description": "Accurate priming sugar calculator tailored for 5-gallon batches. Choose sugar type, target CO₂ volumes, and beer temperature to get precise grams and ounces.",
      "inLanguage": "en",
      "primaryImageOfPage": {
        "@type": "ImageObject",
        "url": "https://calcdomain.com/assets/og/priming-sugar-calculator.png"
      },
      "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://calcdomain.com/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Everyday Life",
            "item": "https://calcdomain.com/lifestyle-everyday.html"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "Hobbies",
            "item": "https://calcdomain.com/everyday-life/hobbies"
          },
          {
            "@type": "ListItem",
            "position": 4,
            "name": "priming sugar calculator 5 gallons",
            "item": "https://calcdomain.com/priming-sugar-calculator-5-gallons"
          }
        ]
      },
      "author": {
        "@type": "Person",
        "name": "Ugo Candido"
      },
      "publisher": {
        "@type": "Organization",
        "name": "CalcDomain"
      },
      "dateModified": "2025-09-12",
      "mainEntity": [
        {
          "@type": "HowTo",
          "name": "How to compute priming sugar for 5 gallons with table sugar",
          "description": "Step-by-step example that shows how to calculate grams and ounces of sucrose to reach a target CO₂ level.",
          "totalTime": "PT1M",
          "supply": [
            {
              "@type": "HowToSupply",
              "name": "Table sugar (sucrose)"
            }
          ],
          "tool": [
            {
              "@type": "HowToTool",
              "name": "Kitchen scale"
            }
          ],
          "step": [
            {
              "@type": "HowToStep",
              "position": 1,
              "name": "Set batch size",
              "text": "Batch volume: 5.0 US gallons (18.927 L)."
            },
            {
              "@type": "HowToStep",
              "position": 2,
              "name": "Measure beer temperature",
              "text": "Highest temperature post-fermentation: 68 °F. Residual CO₂ is derived from temperature."
            },
            {
              "@type": "HowToStep",
              "position": 3,
              "name": "Choose target CO₂",
              "text": "Target carbonation: 2.4 volumes CO₂."
            },
            {
              "@type": "HowToStep",
              "position": 4,
              "name": "Pick sugar type",
              "text": "Select table sugar (sucrose), coefficient 3.82 g/L/vol."
            },
            {
              "@type": "HowToStep",
              "position": 5,
              "name": "Calculate sugar",
              "text": "Sugar grams = (2.4 - residual) × 18.927 × 3.82. With residual ≈ 0.85 vol at 68 °F, result ≈ 111 g (3.9 oz)."
            }
          ]
        },
        {
          "@type": "FAQPage",
          "mainEntity": [
            {
              "@type": "Question",
              "name": "Should I use bottling temperature or the warmest temperature after fermentation?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Use the warmest beer temperature after fermentation. This yields the lowest residual CO₂ and prevents over-carbonation."
              }
            },
            {
              "@type": "Question",
              "name": "Which sugar should I use for priming?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Table sugar (sucrose) and corn sugar (dextrose) are most common. The calculator adjusts for each sugar’s CO₂ yield. We recommend weighing sugar for accuracy."
              }
            },
            {
              "@type": "Question",
              "name": "Can I prime with DME (dry malt extract)?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes, but DME has unfermentables. Expect to use roughly 6.4 g/L/vol; weigh it to avoid under-carbonation."
              }
            },
            {
              "@type": "Question",
              "name": "How accurate are cup measurements?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Volume measures vary by packing density. Use a scale whenever possible. We provide grams and ounces for accuracy."
              }
            },
            {
              "@type": "Question",
              "name": "What if my target CO₂ is below residual?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Then you need zero priming sugar. The beer already contains more CO₂ than your target; adding sugar could cause over-carbonation."
              }
            },
            {
              "@type": "Question",
              "name": "How much water should I use to dissolve the sugar?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "For ~5 gallons, 240–480 mL (1–2 cups) of water works well. Boil, cool slightly, and gently mix into the beer to avoid oxidation."
              }
            }
          ]
        }
      ]
    }
  ]
}
  </script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="search.js" defer></script>
<!-- MathJax for LaTeX formulas -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['\(','\)'], ['$', '$']],
      displayMath: [['$','$'], ['\[','\]']]
    },
    svg: { fontCache: 'global' }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link rel="preload" href="/assets/js/mobile-menu.js" as="script">
<link rel="preload" href="/assets/js/page-enhancements.js" as="script">

</head>
<body>
<a class="skip-link" href="#main">Skip to main content</a>

<main class="main" id="main" role="main">
<div class="container">
<nav aria-label="Breadcrumb" class="breadcrumb">
<a href="https://calcdomain.com/">Home</a> ›
        <a href="https://calcdomain.com/lifestyle-everyday.html">Everyday Life</a> ›
        <a href="https://calcdomain.com/everyday-life/hobbies">Hobbies</a> ›
        priming sugar calculator 5 gallons
      </nav>
<h1>priming sugar calculator 5 gallons</h1>
<p class="lead">A precise, professional-grade calculator to determine the exact priming sugar needed for 5-gallon batches. Built for homebrewers who want repeatable carbonation without guesswork—fully accessible, mobile-first, and lightning fast.</p>
<div class="layout">
<!-- Calculator -->
<section aria-labelledby="calc-title" class="card">
<h2 id="calc-title">Calculator</h2>
<!-- Units -->
<div aria-labelledby="units-legend" class="form-group" role="group">
<div class="sr-only" id="units-legend">Choose unit system</div>
<div class="chip-group" id="unitSystemGroup">
<button aria-controls="volume temperature" aria-pressed="true" class="chip is-active" id="unitUS" type="button">US (gal, °F)</button>
<button aria-controls="volume temperature" aria-pressed="false" class="chip" id="unitMetric" type="button">Metric (L, °C)</button>
</div>
<p class="hint">Switching units will auto-convert current inputs.</p>
</div>
<!-- Volume -->
<div class="form-group">
<div class="inline">
<label for="volume">Batch volume *</label>
<button aria-controls="tt-volume" aria-expanded="false" aria-label="More info about batch volume" class="tooltip-btn" id="tt-volume-btn" type="button">?</button>
</div>
<input aria-describedby="volumeError tt-volume" aria-required="true" class="input" id="volume" inputmode="decimal" min="0.1" step="0.01" type="number" value="5.00"/>
<div class="tooltip" id="tt-volume" role="note">Total beer to be bottled. Includes losses into the bottling bucket. Default is 5.00 gal (18.927 L).</div>
<div aria-live="polite" class="error" id="volumeError" role="alert"></div>
</div>
<!-- Temperature -->
<div class="form-group">
<div class="inline">
<label for="temperature">Highest beer temperature after fermentation *</label>
<button aria-controls="tt-temp" aria-expanded="false" aria-label="More info about beer temperature" class="tooltip-btn" id="tt-temp-btn" type="button">?</button>
</div>
<input aria-describedby="temperatureError tt-temp" aria-required="true" class="input" id="temperature" inputmode="decimal" min="32" step="0.1" type="number" value="68"/>
<div class="tooltip" id="tt-temp" role="note">Use the warmest temperature your beer reached post-fermentation. This determines residual CO₂ and prevents over-carbonation.</div>
<div aria-live="polite" class="error" id="temperatureError" role="alert"></div>
</div>
<!-- Target CO2 -->
<div class="form-group">
<div class="inline">
<label for="targetVolumes">Target CO₂ volumes *</label>
<button aria-controls="tt-co2" aria-expanded="false" aria-label="More info about target CO2 volumes" class="tooltip-btn" id="tt-co2-btn" type="button">?</button>
</div>
<div class="units-row">
<input aria-describedby="targetVolumesError tt-co2 styleTip" aria-required="true" class="input" id="targetVolumes" inputmode="decimal" max="4.5" min="1.0" step="0.1" type="number" value="2.4"/>
<select aria-describedby="styleTip" aria-label="Beer style preset" class="input" id="stylePreset">
<option value="">Choose a style preset (optional)</option>
<option value="1.8">British ale (1.8 vol)</option>
<option value="2.2">American ale (2.2 vol)</option>
<option value="2.4">Lager (2.4 vol)</option>
<option value="2.8">Wheat / Weizen (2.8 vol)</option>
<option value="3.0">Saison / Belgian (3.0 vol)</option>
</select>
</div>
<div class="tooltip" id="tt-co2" role="note">CO₂ volumes express liters of CO₂ (at STP) dissolved per liter of beer. Typical range: 1.8–3.0 depending on style.</div>
<div class="hint" id="styleTip">Picking a preset will fill the target field—you can still fine-tune it.</div>
<div aria-live="polite" class="error" id="targetVolumesError" role="alert"></div>
</div>
<!-- Sugar type -->
<div class="form-group">
<div class="inline">
<label for="sugarType">Priming sugar *</label>
<button aria-controls="tt-sugar" aria-expanded="false" aria-label="More info about sugar types" class="tooltip-btn" id="tt-sugar-btn" type="button">?</button>
</div>
<select aria-describedby="sugarTypeError tt-sugar" aria-required="true" class="input" id="sugarType">
<option value="sucrose">Table sugar (sucrose)</option>
<option value="corn">Corn sugar (dextrose monohydrate)</option>
<option value="glucose">Dextrose anhydrous (glucose)</option>
<option value="dme">Dry malt extract (DME, light)</option>
</select>
<div class="tooltip" id="tt-sugar" role="note">Each sugar yields different CO₂ per gram. The calculator applies a science-backed coefficient for each type.</div>
<div aria-live="polite" class="error" id="sugarTypeError" role="alert"></div>
</div>
<p class="note">All fields marked with * are required. Values update automatically as you type.</p>
</section>
<!-- Results -->
<section aria-labelledby="results-title" class="results">
<h2 id="results-title">Results</h2>
<div class="result-row">
<span class="label-muted">Residual CO₂ (from temperature)</span>
<span aria-live="polite" class="value-strong" id="residualCO2">—</span>
</div>
<div class="result-row">
<span class="label-muted">Priming sugar needed (grams)</span>
<span aria-live="polite" class="value-strong" id="sugarGrams">—</span>
</div>
<div class="result-row">
<span class="label-muted">Priming sugar needed (ounces)</span>
<span aria-live="polite" class="value-strong" id="sugarOunces">—</span>
</div>
<div class="result-row">
<span class="label-muted">Per 12 oz bottle (grams)</span>
<span aria-live="polite" class="value-strong" id="perBottle">—</span>
</div>
<div class="result-row">
<span class="label-muted">Mixing water (suggested)</span>
<span aria-live="polite" class="value-strong" id="waterSuggestion">240–480 mL</span>
</div>
<p aria-live="polite" class="note" id="resultNote"></p>
</section>
</div>
<!-- Authoritative content -->
<section aria-labelledby="source-method" class="content">
<h2 id="source-method">Data Source and Methodology</h2>
<p><strong>Authoritative Data Source:</strong> Brewer’s Friend – Priming Sugar &amp; Bottling Calculators (accessed 2025). See:
          <a href="https://www.brewersfriend.com/beer-priming-calculator/" rel="nofollow noopener" target="_blank">Priming Sugar Calculator</a> and
          <a href="https://www.brewersfriend.com/bottling-calculator/" rel="nofollow noopener" target="_blank">Bottling Calculator</a>.
        </p>
<p>All calculations are rigorously based on the formulas and data provided by this source. We additionally cross-check the sugar yield coefficients using standard fermentation stoichiometry.</p>
</section>
<section aria-labelledby="formula-explained" class="content">
<h2 id="formula-explained">The Formula Explained</h2>
<div aria-label="Formulas in LaTeX" class="formula">
          For beer temperature T in °F, residual dissolved CO₂ (volumes) is approximated by:<br/>
          \[ V_{\mathrm{res}}(T_{°F}) = 3.0378 - 0.050062\,T + 0.00026555\,T^{2} \]<br/><br/>
          Convert Celsius to Fahrenheit before applying the formula: \[ T_{°F} = \frac{9}{5}T_{°C} + 32 \]<br/><br/>
          Total priming sugar mass (in grams) is:<br/>
          \[ m_{\mathrm{sugar}} = \bigl(V_{\mathrm{target}} - V_{\mathrm{res}}\bigr)\times V_{\mathrm{beer\_L}}\times k_{\mathrm{sugar}} \]<br/>
          where:<br/>
          \[ V_{\mathrm{beer\_L}} = \text{batch volume in liters} \]<br/>
          \[ k_{\mathrm{sugar}} =
            \begin{cases}
              3.82 &amp; \text{for sucrose (table sugar)}\\
              4.42 &amp; \text{for dextrose monohydrate (corn sugar)}\\
              4.02 &amp; \text{for dextrose anhydrous (glucose)}\\
              6.40 &amp; \text{for dry malt extract (DME, light, approx.)}
            \end{cases}
          \]
        </div>
</section>
<section aria-labelledby="glossary" class="content">
<h2 id="glossary">Glossary of Variables</h2>
<ul class="def-list">
          - Batch volume: Total beer to be bottled. Accepted in gallons or liters.<br/>
          - Highest beer temperature: Warmest post-fermentation temperature; drives residual CO₂ estimate.<br/>
          - Target CO₂ volumes: Desired carbonation level (volumes of CO₂ per liter of beer).<br/>
          - Sugar type: Priming medium that dictates yield coefficient k_sugar.<br/>
          - Residual CO₂: Estimated current dissolved CO₂ in volumes.<br/>
          - Priming sugar (g / oz): Exact sugar mass to add to reach target CO₂.<br/>
          - Per 12 oz bottle (g): Convenience measure dividing total grams by ~48 bottles in 5 gal (approx.).<br/>
</ul>
</section>
<section aria-labelledby="worked-example" class="content">
<h2 id="worked-example">How It Works: A Step‑by‑Step Example</h2>
<p>Assume a 5.0 gallon batch, warmest beer temperature 68 °F, target carbonation 2.4 volumes, and table sugar (sucrose).</p>
<ol>
<li>Convert volume: 5.0 gal × 3.78541 = 18.927 L.</li>
<li>Residual CO₂ at 68 °F: V_res = 3.0378 − 0.050062×68 + 0.00026555×68² ≈ 0.85 vol.</li>
<li>Needed increase: 2.4 − 0.85 = 1.55 volumes.</li>
<li>k for sucrose: 3.82 g/L/vol.</li>
<li>Sugar mass: 1.55 × 18.927 × 3.82 ≈ 112 g (≈ 3.95 oz).</li>
</ol>
<p class="note">Round to the nearest gram and dissolve in 240–480 mL (1–2 cups) of boiled, cooled water before gently mixing into the beer.</p>
</section>
<section aria-labelledby="faq" class="content faq">
<h2 id="faq">Frequently Asked Questions (FAQ)</h2>
<h3>Do I use the bottling temperature or the warmest fermentation temperature?</h3>
<p>Use the warmest temperature after fermentation. This yields the lowest residual CO₂ and avoids over-carbonation.</p>
<h3>Why are sugar amounts different for sucrose and corn sugar?</h3>
<p>They have different fermentable content per gram. The calculator applies a coefficient based on fermentation stoichiometry and widely used brewing references.</p>
<h3>Is DME reliable for priming?</h3>
<p>Yes, but DME contains unfermentables. Our coefficient (≈6.40 g/L/vol) is an average; weigh carefully to prevent under-carbonation.</p>
<h3>Can I measure sugar in cups?</h3>
<p>We recommend weighing. Cup measurements vary with packing density and humidity and can be off by 10–20%.</p>
<h3>How many bottles do 5 gallons fill?</h3>
<p>Roughly 48 standard 12 oz bottles (355 mL). Losses may reduce this total slightly.</p>
<h3>What if my target is lower than residual CO₂?</h3>
<p>You need zero priming sugar. Consider gently degassing or simply accepting a higher carbonation level.</p>
<h3>Is there a risk of bottle bombs?</h3>
<p>Yes, if you add too much sugar, bottle too early, or use weak bottles. Always confirm fermentation is complete (stable gravity readings) and measure sugar precisely.</p>
</section>
<section class="content">
<div class="note">
          Strumento sviluppato da <strong>Ugo Candido</strong>,. Contenuti verificati da,.<br/>
          Ultima revisione per l'accuratezza in data: <time datetime="2025-09-12">September 12, 2025</time>.
        </div>
</section>
</div>
</main>
<!-- Standard Footer --> 
<script defer="">
    (function(){
      'use strict';

      // Elements
      const unitUSBtn = document.getElementById('unitUS');
      const unitMetricBtn = document.getElementById('unitMetric');
      const volumeEl = document.getElementById('volume');
      const tempEl = document.getElementById('temperature');
      const targetEl = document.getElementById('targetVolumes');
      const stylePresetEl = document.getElementById('stylePreset');
      const sugarEl = document.getElementById('sugarType');

      const residualCO2El = document.getElementById('residualCO2');
      const sugarGramsEl = document.getElementById('sugarGrams');
      const sugarOuncesEl = document.getElementById('sugarOunces');
      const perBottleEl = document.getElementById('perBottle');
      const waterSuggestionEl = document.getElementById('waterSuggestion');
      const resultNoteEl = document.getElementById('resultNote');

      const volumeError = document.getElementById('volumeError');
      const tempError = document.getElementById('temperatureError');
      const targetError = document.getElementById('targetVolumesError');
      const sugarTypeError = document.getElementById('sugarTypeError');

      // Tooltips
      function bindTooltip(btnId, tipId){
        const btn = document.getElementById(btnId);
        const tip = document.getElementById(tipId);
        btn.addEventListener('click', () => {
          const open = tip.getAttribute('data-open') === 'true';
          tip.setAttribute('data-open', String(!open));
          btn.setAttribute('aria-expanded', String(!open));
        });
        btn.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); btn.click(); }
        });
      }
      bindTooltip('tt-volume-btn','tt-volume');
      bindTooltip('tt-temp-btn','tt-temp');
      bindTooltip('tt-co2-btn','tt-co2');
      bindTooltip('tt-sugar-btn','tt-sugar');

      // State
      let unit = 'US'; // 'US' or 'METRIC'

      // Helpers
      const galToL = g => g * 3.785411784;
      const lToGal = l => l / 3.785411784;
      const cToF = c => (c * 9/5) + 32;
      const fToC = f => (f - 32) * 5/9;
      const gToOz = g => g / 28.349523125;

      // Residual CO2 formula (T in °F)
      function residualCO2Volumes(tempF){
        // Vres = 3.0378 − 0.050062*T + 0.00026555*T^2
        return 3.0378 - 0.050062 * tempF + 0.00026555 * tempF * tempF;
      }

      // Sugar coefficients (g per L per CO2 volume)
      const sugarK = {
        sucrose: 3.82,       // table sugar
        corn: 4.42,          // dextrose monohydrate
        glucose: 4.02,       // dextrose anhydrous
        dme: 6.40            // dry malt extract (approx., brand-dependent)
      };

      // Validation
      function setError(el, errEl, message){
        if(message){
          errEl.textContent = message;
          el.setAttribute('aria-invalid','true');
          return false;
        } else {
          errEl.textContent = '';
          el.removeAttribute('aria-invalid');
          return true;
        }
      }

      function validate(){
        const vol = Number(volumeEl.value);
        const temp = Number(tempEl.value);
        const target = Number(targetEl.value);
        let ok = true;

        if (!Number.isFinite(vol) || vol <= 0){
          ok = setError(volumeEl, volumeError, 'Enter a positive batch volume.') && ok;
        } else {
          setError(volumeEl, volumeError, '');
        }

        // Temperature ranges per unit
        if (unit === 'US'){
          if (!Number.isFinite(temp) || temp < 32 || temp > 120){
            ok = setError(tempEl, tempError, 'Enter a realistic temperature in °F (32–120).') && ok;
          } else {
            setError(tempEl, tempError, '');
          }
        } else {
          if (!Number.isFinite(temp) || temp < 0 || temp > 49){
            ok = setError(tempEl, tempError, 'Enter a realistic temperature in °C (0–49).') && ok;
          } else {
            setError(tempEl, tempError, '');
          }
        }

        if (!Number.isFinite(target) || target < 1.0 || target > 4.5){
          ok = setError(targetEl, targetError, 'Choose a target between 1.0 and 4.5 volumes CO₂.') && ok;
        } else {
          setError(targetEl, targetError, '');
        }

        if (!sugarEl.value){
          ok = setError(sugarEl, sugarTypeError, 'Select a priming sugar type.') && ok;
        } else {
          setError(sugarEl, sugarTypeError, '');
        }

        return ok;
      }

      // Calculation
      function calculate(){
        if(!validate()){
          residualCO2El.textContent = '—';
          sugarGramsEl.textContent = '—';
          sugarOuncesEl.textContent = '—';
       	  perBottleEl.textContent = '—';
          resultNoteEl.textContent = '';
          return;
        }

        const volInput = Number(volumeEl.value);
        const tempInput = Number(tempEl.value);
        const target = Number(targetEl.value);
        const sugar = sugarEl.value;

        const volL = unit === 'US' ? galToL(volInput) : volInput;
        const tempF = unit === 'US' ? tempInput : cToF(tempInput);

        const vRes = Math.max(0, residualCO2Volumes(tempF));
        const delta = target - vRes;

        residualCO2El.textContent = vRes.toFixed(2) + ' vol';

        if (delta <= 0){
          sugarGramsEl.textContent = '0 g';
          sugarOuncesEl.textContent = '0.00 oz';
          perBottleEl.textContent = '0 g';
          resultNoteEl.textContent = 'Your beer already contains equal or higher CO₂ than your target. No priming sugar needed.';
          return;
        }

        const k = sugarK[sugar] || sugarK.sucrose;
        const grams = delta * volL * k;
        const ounces = gToOz(grams);
        sugarGramsEl.textContent = grams.toFixed(0) + ' g';
        sugarOuncesEl.textContent = ounces.toFixed(2) + ' oz';

        // Approx per 12 oz bottle: 5 gal ≈ 48 bottles. Generalize by volume:
        const bottles = (volL / 0.355); // 355 mL typical 12 oz
        const perBottle = grams / bottles;
        perBottleEl.textContent = Math.max(0, perBottle).toFixed(1) + ' g';

        // Suggest water always 240–480 mL for ~5 gal; scale gently:
        const waterMin = Math.max(180, Math.min(360, volL * 12)); // heuristic bounds
        const waterMax = Math.max(300, Math.min(600, volL * 24));
        waterSuggestionEl.textContent = `${Math.round(waterMin)}–${Math.round(waterMax)} mL`;

        resultNoteEl.textContent = 'We recommend weighing sugar and gently mixing a boiled, cooled solution to avoid oxidation and stratification.';
      }

      // Inline validation on blur
      volumeEl.addEventListener('blur', calculate);
      tempEl.addEventListener('blur', calculate);
      targetEl.addEventListener('blur', calculate);
      sugarEl.addEventListener('blur', calculate);

      // Live updates
      [volumeEl, tempEl, targetEl, sugarEl].forEach(el => el.addEventListener('input', calculate));
      stylePresetEl.addEventListener('change', () => {
        if (stylePresetEl.value){
          targetEl.value = stylePresetEl.value;
        }
        calculate();
      });

      // Unit toggles with conversion preserving actual amounts
      function setUnit(newUnit){
        if (unit === newUnit) return;
        if (newUnit === 'METRIC'){
          // Convert gal -> L; °F -> °C
          const g = Number(volumeEl.value);
          const f = Number(tempEl.value);
          if (Number.isFinite(g)) volumeEl.value = (galToL(g)).toFixed(3);
          if (Number.isFinite(f)) tempEl.value = (fToC(f)).toFixed(1);
          unitUSBtn.classList.remove('is-active'); unitUSBtn.setAttribute('aria-pressed','false');
          unitMetricBtn.classList.add('is-active'); unitMetricBtn.setAttribute('aria-pressed','true');
        } else {
          // Convert L -> gal; °C -> °F
          const l = Number(volumeEl.value);
          const c = Number(tempEl.value);
          if (Number.isFinite(l)) volumeEl.value = (lToGal(l)).toFixed(2);
          if (Number.isFinite(c)) tempEl.value = (cToF(c)).toFixed(1);
          unitMetricBtn.classList.remove('is-active'); unitMetricBtn.setAttribute('aria-pressed','false');
          unitUSBtn.classList.add('is-active'); unitUSBtn.setAttribute('aria-pressed','true');
        }
        unit = newUnit;
        calculate();
      }

      unitUSBtn.addEventListener('click', () => setUnit('US'));
      unitMetricBtn.addEventListener('click', () => setUnit('METRIC'));
      unitUSBtn.addEventListener('keydown', e => { if(e.key==='Enter' || e.key===' ') { e.preventDefault(); setUnit('US'); }});
      unitMetricBtn.addEventListener('keydown', e => { if(e.key==='Enter' || e.key===' ') { e.preventDefault(); setUnit('METRIC'); }});

      // Initial compute
      calculate();
    })();
  </script>

</body></html>
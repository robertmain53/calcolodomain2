<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Icons / PWA -->
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Equipment Loan Calculator - Estimate Payments, Interest & Total Cost</title>
  <meta name="description" content="Professional equipment loan calculator for businesses. Estimate monthly, quarterly, or annual payments, total interest, and payoff with optional residual/balloon, sales tax and fees." />
  <link rel="canonical" href="https://calcdomain.com/equipment-loan-calculator.html" />

  <!-- Fonts / Tailwind / Chart.js / MathJax -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Tailwind customizations for visible focus and color contrast
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: { 600: '#2563eb', 700: '#1d4ed8' }
          }
        }
      }
    }
  </script>
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; }
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 0.75rem; }
    .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.25rem; margin-bottom: 0.5rem; }
    .prose p { margin-bottom: 1rem; line-height: 1.7; }
    .prose ul, .prose ol { margin-left: 1.25rem; margin-bottom: 1rem; }
    .formula-box {
      background:#f8fafc; border:1px solid #e5e7eb; border-radius:10px; padding:1rem;
      overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    }
    details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
    details[open] > summary { margin-bottom: 0.5rem; }

    .result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 1rem; text-align: center; }
    .result-card h4 { font-size: 0.95rem; color: #374151; margin-bottom: 0.25rem; }
    .result-card p { font-size: 1.6rem; font-weight: 800; color: #1d4ed8; }

    /* Visible focus ring */
    :focus-visible { outline: 3px solid #1d4ed8; outline-offset: 2px; border-radius: 6px; }

    /* Prevent layout shift when results render */
    #results { min-height: 320px; }

    /* Tooltip popover styles */
    .tip {
      display:none; margin-top:0.5rem; background:#f9fafb; border:1px solid #e5e7eb; border-radius:8px; padding:0.75rem; font-size:0.875rem; color:#374151;
    }
    .tip[aria-hidden="false"] { display:block; }

    @media print {
      body * { visibility: hidden; }
      #print-section, #print-section * { visibility: visible; }
      #print-section { position: absolute; left: 0; top: 0; width: 100%; }
      #results-chart-container { display: none !important; }
    }
  </style>

  <!-- Schema.org: WebPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Equipment Loan Calculator",
    "description":"Estimate equipment finance payments with optional residual/balloon, sales tax and fees. Get total interest, total cost and a printable schedule.",
    "url":"https://calcdomain.com/equipment-loan-calculator.html",
    "inLanguage":"en",
    "author":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"}
  }
  </script>

  <!-- Schema.org: Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
      {"@type":"ListItem","position":2,"name":"Finance","item":"https://calcdomain.com/finance.html"},
      {"@type":"ListItem","position":3,"name":"Loans & Debt","item":"https://calcdomain.com/subcategories/finance-loans-debt.html"},
      {"@type":"ListItem","position":4,"name":"Equipment Loan Calculator","item":"https://calcdomain.com/equipment-loan-calculator.html"}
    ]
  }
  </script>

  <!-- Schema.org: HowTo -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to calculate equipment loan payments",
    "description":"Step-by-step guide to compute business equipment finance payments including residual/balloon and taxes.",
    "step":[
      {"@type":"HowToStep","name":"Enter equipment cost","text":"Provide purchase price, down payment and trade-in (if any)."},
      {"@type":"HowToStep","name":"Add taxes and fees","text":"Enter sales tax rate and fees; choose whether to finance them."},
      {"@type":"HowToStep","name":"Set loan terms","text":"Enter APR, term, payment frequency and optional residual/balloon."},
      {"@type":"HowToStep","name":"Review results","text":"Check payment, total interest and schedule; export or print if needed."}
    ]
  }
  </script>

  <!-- Schema.org: FAQPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"Is sales tax usually financed or paid up front?","acceptedAnswer":{"@type":"Answer","text":"It depends on jurisdiction and lender policy. This calculator lets you model either: finance the tax with the loan or pay up front."}},
      {"@type":"Question","name":"What is a residual/balloon value?","acceptedAnswer":{"@type":"Answer","text":"A lump-sum owed at the end of the term (similar to a lease residual) that reduces periodic payments. The unpaid residual is due at maturity."}},
      {"@type":"Question","name":"Which payment frequencies are supported?","acceptedAnswer":{"@type":"Answer","text":"Monthly, quarterly, and annual payments. APR is converted to an effective rate per period."}},
      {"@type":"Question","name":"Does this calculator handle prepayments?","acceptedAnswer":{"@type":"Answer","text":"This version focuses on standard amortization with an optional end-of-term balloon. Use our prepayment planner for extra principal strategies."}},
      {"@type":"Question","name":"Are results tax or accounting advice?","acceptedAnswer":{"@type":"Answer","text":"No. Results are educational estimates. Consult your accountant for depreciation (e.g., Section 179, bonus) and tax treatment."}},
      {"@type":"Question","name":"How accurate is the schedule date spacing?","acceptedAnswer":{"@type":"Answer","text":"Dates are spaced by period (monthly/quarterly/annual) for planning visibility; actual lender schedules may vary slightly with business days and cutoffs."}},
      {"@type":"Question","name":"Can I use a 0% APR?","acceptedAnswer":{"@type":"Answer","text":"Yes. Set APR to 0 to model promotional financing; payments will be principal only (plus any financed taxes/fees) adjusted for residual if used."}}
    ]
  }
  </script>

  <!-- MathJax for LaTeX in the Methodology section -->
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <!-- Open Graph -->
  <meta property="og:title" content="Equipment Loan Calculator" />
  <meta property="og:description" content="Estimate equipment finance payments with residual/balloon, sales tax and fees. Printable schedule for client-ready quotes." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://calcdomain.com/equipment-loan-calculator.html" />
  <meta property="og:site_name" content="CalcDomain" />
</head>
<body class="bg-gray-50 text-gray-900">

  <!-- Header (non-sticky per requirements) -->
  <header class="bg-white border-b">
    <nav class="container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
      <div class="flex items-center justify-between">
        <a href="index.html" class="text-2xl font-extrabold text-brand-700">CalcDomain</a>

        <div class="hidden md:flex items-center space-x-6 text-sm">
          <a href="search.html" class="text-gray-700 hover:text-brand-700">Advanced Search</a>
          <a href="index.html#categories" class="text-gray-700 hover:text-brand-700">Categories</a>
        </div>

        <button id="mobile-menu-toggle" class="md:hidden p-2 rounded" aria-label="Open menu" aria-expanded="false">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>

      <div id="mobile-menu" class="md:hidden mt-3 hidden">
        <div class="space-y-2">
          <a href="search.html" class="block py-2 text-gray-700 hover:text-brand-700">Advanced Search</a>
          <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-brand-700">Categories</a>
        </div>
      </div>
    </nav>
  </header>

  <main class="container mx-auto px-4 lg:px-6 py-10">
    <div class="flex flex-col lg:flex-row gap-8">

      <!-- Main Content -->
      <section class="w-full lg:w-2/3">
        <nav class="text-sm text-gray-700 mb-4" aria-label="Breadcrumb">
          <a href="index.html" class="hover:text-brand-700">Home</a> &raquo;
          <a href="finance.html" class="hover:text-brand-700">Finance</a> &raquo;
          <a href="subcategories/finance-loans-debt.html" class="hover:text-brand-700">Loans &amp; Debt</a> &raquo;
          <span class="text-gray-900">Equipment Loan Calculator</span>
        </nav>

        <div id="print-section" class="bg-white p-6 rounded-lg shadow">
          <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Equipment Loan Calculator</h1>
          <p class="text-gray-700 mb-6">
            Estimate business equipment finance payments with an optional residual/balloon, sales tax, and fees.
            Choose monthly, quarterly, or annual payments, then export a client-ready schedule. Built for finance teams,
            dealers, and consultants who need fast, credible numbers.
          </p>

          <!-- Calculator UI -->
          <section id="calculator-ui" class="space-y-8" aria-labelledby="calcHeading">
            <h2 id="calcHeading" class="sr-only">Calculator Inputs</h2>

            <!-- Purchase details -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="price" class="block text-sm font-medium text-gray-800">Equipment Price *</label>
                <div class="flex items-start gap-2">
                  <input type="number" id="price" inputmode="decimal" step="100" min="0" value="50000"
                    class="mt-1 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                    aria-required="true" aria-describedby="priceHelp priceError">
                  <button type="button" class="mt-1 px-3 py-3 border rounded-md text-sm"
                    aria-expanded="false" aria-controls="priceHelp" data-tip="#priceHelp">?</button>
                </div>
                <p id="priceHelp" class="tip" aria-hidden="true">Gross purchase price before down payment or trade-in.</p>
                <p id="priceError" class="text-red-700 text-sm mt-1 hidden"></p>
              </div>

              <div>
                <label for="downPayment" class="block text-sm font-medium text-gray-800">Down Payment</label>
                <div class="flex items-start gap-2">
                  <input type="number" id="downPayment" inputmode="decimal" step="100" min="0" value="5000"
                    class="mt-1 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                    aria-describedby="downHelp downError">
                  <button type="button" class="mt-1 px-3 py-3 border rounded-md text-sm"
                    aria-expanded="false" aria-controls="downHelp" data-tip="#downHelp">?</button>
                </div>
                <p id="downHelp" class="tip" aria-hidden="true">Cash paid up front to reduce the amount financed.</p>
                <p id="downError" class="text-red-700 text-sm mt-1 hidden"></p>
              </div>

              <div>
                <label for="tradeIn" class="block text-sm font-medium text-gray-800">Trade-in Value</label>
                <div class="flex items-start gap-2">
                  <input type="number" id="tradeIn" inputmode="decimal" step="100" min="0" value="0"
                    class="mt-1 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                    aria-describedby="tradeHelp tradeError">
                  <button type="button" class="mt-1 px-3 py-3 border rounded-md text-sm"
                    aria-expanded="false" aria-controls="tradeHelp" data-tip="#tradeHelp">?</button>
                </div>
                <p id="tradeHelp" class="tip" aria-hidden="true">Allowance for equipment you are trading in (reduces taxable base in many regions).</p>
                <p id="tradeError" class="text-red-700 text-sm mt-1 hidden"></p>
              </div>

              <div>
                <label for="salesTax" class="block text-sm font-medium text-gray-800">Sales Tax Rate (%)</label>
                <div class="flex items-start gap-2">
                  <input type="number" id="salesTax" inputmode="decimal" step="0.01" min="0" value="8.5"
                    class="mt-1 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                    aria-describedby="taxHelp taxError">
                  <button type="button" class="mt-1 px-3 py-3 border rounded-md text-sm"
                    aria-expanded="false" aria-controls="taxHelp" data-tip="#taxHelp">?</button>
                </div>
                <p id="taxHelp" class="tip" aria-hidden="true">Jurisdictional tax rate applied to the taxable base (often price minus trade-in).</p>
                <p id="taxError" class="text-red-700 text-sm mt-1 hidden"></p>
              </div>

              <div class="md:col-span-2">
                <fieldset class="mt-2">
                  <legend class="block text-sm font-medium text-gray-800">Taxes &amp; Fees Handling</legend>
                  <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mt-2">
                    <div>
                      <label for="fees" class="block text-sm font-medium text-gray-800">Fees (title/doc/etc.)</label>
                      <input type="number" id="fees" inputmode="decimal" step="10" min="0" value="300"
                        class="mt-1 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                        aria-describedby="feesError">
                      <p id="feesError" class="text-red-700 text-sm mt-1 hidden"></p>
                    </div>
                    <div class="flex items-center gap-3">
                      <input id="financeTax" type="checkbox" class="h-5 w-5"
                        aria-describedby="financeTaxHelp" checked>
                      <label for="financeTax" class="text-sm text-gray-800 select-none">Finance Sales Tax</label>
                    </div>
                    <div class="flex items-center gap-3">
                      <input id="financeFees" type="checkbox" class="h-5 w-5"
                        aria-describedby="financeFeesHelp" checked>
                      <label for="financeFees" class="text-sm text-gray-800 select-none">Finance Fees</label>
                    </div>
                  </div>
                  <p id="financeTaxHelp" class="text-gray-600 text-sm mt-2">When checked, tax is added to the amount financed; otherwise it is paid up front.</p>
                  <p id="financeFeesHelp" class="text-gray-600 text-sm">When checked, fees are financed; otherwise, they are paid up front.</p>
                </fieldset>
              </div>
            </div>

            <!-- Loan terms -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="apr" class="block text-sm font-medium text-gray-800">APR (%) *</label>
                <div class="flex items-start gap-2">
                  <input type="number" id="apr" inputmode="decimal" step="0.01" min="0" value="7.25"
                    class="mt-1 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                    aria-required="true" aria-describedby="aprHelp aprError">
                  <button type="button" class="mt-1 px-3 py-3 border rounded-md text-sm"
                    aria-expanded="false" aria-controls="aprHelp" data-tip="#aprHelp">?</button>
                </div>
                <p id="aprHelp" class="tip" aria-hidden="true">Nominal annual percentage rate; converted to a per-period rate by frequency.</p>
                <p id="aprError" class="text-red-700 text-sm mt-1 hidden"></p>
              </div>

              <div>
                <label for="term" class="block text-sm font-medium text-gray-800">Term *</label>
                <div class="grid grid-cols-2 gap-2">
                  <input type="number" id="term" inputmode="numeric" step="1" min="1" value="60"
                    class="mt-1 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                    aria-required="true" aria-describedby="termError">
                  <select id="termUnit"
                    class="mt-1 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                    aria-label="Term unit">
                    <option value="months" selected>Months</option>
                    <option value="years">Years</option>
                  </select>
                </div>
                <p id="termError" class="text-red-700 text-sm mt-1 hidden"></p>
              </div>

              <div>
                <label for="frequency" class="block text-sm font-medium text-gray-800">Payment Frequency *</label>
                <select id="frequency"
                  class="mt-1 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                  aria-required="true" aria-describedby="freqError">
                  <option value="monthly" selected>Monthly (12/yr)</option>
                  <option value="quarterly">Quarterly (4/yr)</option>
                  <option value="annual">Annual (1/yr)</option>
                </select>
                <p id="freqError" class="text-red-700 text-sm mt-1 hidden"></p>
              </div>

              <div>
                <label for="residual" class="block text-sm font-medium text-gray-800">Residual / Balloon (amount or % of price)</label>
                <div class="grid grid-cols-3 gap-2">
                  <input type="number" id="residual" inputmode="decimal" step="100" min="0" value="0"
                    class="mt-1 col-span-2 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                    aria-describedby="residHelp residError">
                  <select id="residualMode"
                    class="mt-1 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                    aria-label="Residual mode">
                    <option value="amount" selected>Amount</option>
                    <option value="percent">% of price</option>
                  </select>
                </div>
                <p id="residHelp" class="text-gray-600 text-sm mt-2">Optional lump sum due at maturity; reduces periodic payments.</p>
                <p id="residError" class="text-red-700 text-sm mt-1 hidden"></p>
              </div>

              <div>
                <label for="firstDate" class="block text-sm font-medium text-gray-800">First Payment Month</label>
                <input type="month" id="firstDate"
                  class="mt-1 block w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-brand-700 focus:border-brand-700"
                  aria-describedby="dateHelp">
                <p id="dateHelp" class="text-gray-600 text-sm mt-2">Used to label the schedule. Leave empty to use current month.</p>
              </div>

              <div class="flex items-end gap-4">
                <button id="recalc" class="w-full md:w-auto px-5 py-3 bg-brand-700 text-white font-semibold rounded-md hover:bg-brand-600"
                        type="button">Calculate</button>
                <button id="printBtn" class="w-full md:w-auto px-5 py-3 border border-gray-300 font-semibold rounded-md hover:bg-gray-50"
                        type="button">Print</button>
                <button id="resetBtn" class="w-full md:w-auto px-5 py-3 border border-gray-300 font-semibold rounded-md hover:bg-gray-50"
                        type="button">Reset</button>
              </div>
            </div>
          </section>

          <!-- Results -->
          <section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6" aria-live="polite">
            <div class="flex flex-col md:flex-row gap-6">
              <div class="w-full md:w-2/3 grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div class="result-card">
                  <h4>Payment per Period</h4>
                  <p id="paymentPerPeriod">$0.00</p>
                </div>
                <div class="result-card">
                  <h4>Total Interest</h4>
                  <p id="totalInterest">$0.00</p>
                </div>
                <div class="result-card">
                  <h4>Total Cost (Financed)</h4>
                  <p id="totalCost">$0.00</p>
                </div>
                <div class="result-card">
                  <h4>Payoff Time</h4>
                  <p id="payoffTime">—</p>
                </div>
              </div>
              <div class="w-full md:w-1/3">
                <div id="results-chart-container" class="h-44">
                  <canvas id="resultsChart" aria-label="Principal vs Interest doughnut chart"></canvas>
                </div>
              </div>
            </div>

            <details class="mt-6 bg-white rounded-lg" id="scheduleDetails">
              <summary class="font-semibold text-gray-900 px-4 py-3">View Payment Schedule</summary>
              <div class="mt-3 overflow-x-auto border-t border-gray-200" id="scheduleContainer">
                <table class="min-w-full text-sm text-right">
                  <thead class="bg-gray-100 text-gray-700 uppercase">
                    <tr>
                      <th class="px-4 py-2 text-left">#</th>
                      <th class="px-4 py-2 text-left">Date</th>
                      <th class="px-4 py-2">Payment</th>
                      <th class="px-4 py-2">Interest</th>
                      <th class="px-4 py-2">Principal</th>
                      <th class="px-4 py-2">Balance</th>
                    </tr>
                  </thead>
                  <tbody id="scheduleBody"></tbody>
                </table>
              </div>
            </details>
          </section>
        </div>

        <!-- Authoritative content -->
        <article class="bg-white p-6 rounded-lg shadow mt-8 prose">
          <h2>Authoritative Data Source &amp; Methodology</h2>
          <p>
            <strong>AuthoritativeDataSource:</strong> Standard amortization mathematics per finance textbooks and regulator guidance
            on APR and installment credit (e.g., U.S. CFPB resources for installment loans and the
            Federal Reserve’s explanations of loan APR and payment computations).
            <em>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</em>
          </p>

          <h2>The Formula Explained</h2>
          <div class="formula-box">
            <p>We compute the amount financed \(PV\) from purchase inputs, then apply the annuity formula
            with optional end-of-term residual/balloon \(B\). Let \(i\) be the rate per period and \(n\) the number of periods.</p>
            <p>
              Amount financed:
              \[
                PV = \underbrace{\big(\text{Price} - \text{Down} - \text{TradeIn}\big)}_{\text{Taxable Base}} \;+\;
                \begin{cases}
                  \text{Tax} & \text{if financed}\\
                  0 & \text{if paid up front}
                \end{cases}
                \;+\;
                \begin{cases}
                  \text{Fees} & \text{if financed}\\
                  0 & \text{if paid up front}
                \end{cases}
              \]
            </p>
            <p>
              Per-period rate: \(\; i = \dfrac{\text{APR}}{\text{periods per year}}\)
            </p>
            <p>
              Payment with balloon \(B\) due at maturity:
              \[
                \text{Payment} =
                \frac{\big(PV - \frac{B}{(1+i)^n}\big)\, i}{1 - (1+i)^{-n}}
              \]
              For \(B=0\) this reduces to the standard annuity:
              \[
                \text{Payment} = PV \cdot \frac{i}{1-(1+i)^{-n}}
              \]
            </p>
            <p>
              Interest each period: \(\text{Interest}_t = \text{Balance}_{t-1}\cdot i\),
              Principal: \(\text{Principal}_t = \text{Payment} - \text{Interest}_t\).
            </p>
          </div>

          <h2>Glossary of Variables</h2>
          <ul>
            <li><strong>Equipment Price</strong>: Gross price before down payment or trade-in.</li>
            <li><strong>Down Payment</strong>: Cash paid up front to reduce financing.</li>
            <li><strong>Trade-in Value</strong>: Credit for existing equipment; often reduces taxable base.</li>
            <li><strong>Sales Tax Rate</strong>: Jurisdictional tax applied to the taxable base; can be financed or paid up front.</li>
            <li><strong>Fees</strong>: Title, documentation, delivery, or other charges; can be financed or paid up front.</li>
            <li><strong>APR</strong>: Nominal annual percentage rate; converted to rate per period by payment frequency.</li>
            <li><strong>Term</strong>: Loan length in months or years.</li>
            <li><strong>Payment Frequency</strong>: Monthly (12/yr), quarterly (4/yr), or annual (1/yr).</li>
            <li><strong>Residual/Balloon</strong>: Lump sum due at maturity that lowers periodic payments.</li>
          </ul>

          <h2>How It Works: A Step-by-Step Example</h2>
          <p><strong>Scenario:</strong> Price \$50,000; down \$5,000; trade-in \$0; tax 8.5% (financed); fees \$300 (financed);
            APR 7.25%; term 60 months; monthly payments; balloon \$10,000.</p>
          <ol>
            <li>Taxable base = \$50,000 − \$5,000 − \$0 = \$45,000; tax = \$45,000 × 8.5% = \$3,825.</li>
            <li>Financed PV = \$45,000 + \$3,825 + \$300 = \$49,125.</li>
            <li>Monthly rate \(i = 0.0725 / 12 = 0.0060417\); \(n=60\); balloon \(B=\$10{,}000\).</li>
            <li>Payment \(= \big(PV - \frac{B}{(1+i)^n}\big)\frac{i}{1-(1+i)^{-n}}\).</li>
            <li>Schedule shows each period’s interest and principal; final period leaves \$10,000 balloon due.</li>
          </ol>

          <h2>Frequently Asked Questions</h2>
          <details>
            <summary>How do trade-ins affect sales tax?</summary>
            <p>In many jurisdictions, trade-in reduces the taxable base (price − trade-in). Some areas tax full price. Confirm local rules.</p>
          </details>
          <details>
            <summary>Balloon vs. residual—are they the same?</summary>
            <p>Both are end-of-term lump sums. “Residual” is common in leases; “balloon” in loans. This tool supports a balloon for loans.</p>
          </details>
          <details>
            <summary>Can I compare monthly vs. quarterly payments?</summary>
            <p>Yes—switch frequency. The APR is converted to a per-period rate, so payment size changes with the number of periods per year.</p>
          </details>
          <details>
            <summary>Does the calculator include depreciation or tax deductions?</summary>
            <p>No. Use this for payment mechanics. Consult your accountant about Section 179, bonus depreciation, and interest expensing.</p>
          </details>
          <details>
            <summary>Why is my lender’s payment slightly different?</summary>
            <p>Day count conventions, compounding cutoffs, fees, and exact tax rules vary. Use this as a high-fidelity estimate.</p>
          </details>

          <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700">
            <p><strong>Tool developed by Ugo Candido.</strong> Content verified by the CalcDomain Editorial Board.<br>
              Last accuracy review: <time datetime="2025-10-30">October 30, 2025</time></p>
          </div>
        </article>
      </section>

      <!-- Sidebar -->
      <aside class="w-full lg:w-1/3">
        <div class="sticky top-24 space-y-6">
          <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-600">
            Ad Placement (300×600)
          </div>

          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="font-bold text-lg mb-3">Why this equipment finance tool</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
              <li>Models residual/balloon and tax/fees handling—like real lender quotes.</li>
              <li>Monthly, quarterly, or annual payments for B2B cash-flow planning.</li>
              <li>Printable schedule for proposals and client files.</li>
            </ul>
          </div>

          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="font-bold text-lg mb-4">Related loan tools</h3>
            <ul class="space-y-3 text-sm">
              <li><a href="loan-amortization.html" class="text-brand-700 hover:underline">Loan Amortization Schedule</a></li>
              <li><a href="apr.html" class="text-brand-700 hover:underline">APR Calculator</a></li>
              <li><a href="loan-prepayment.html" class="text-brand-700 hover:underline">Loan Prepayment Planner</a></li>
              <li><a href="lease-vs-loan.html" class="text-brand-700 hover:underline">Lease vs. Loan Analyzer</a></li>
            </ul>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-4 space-x-4">
        <a href="about.html" class="hover:text-brand-700">About</a>
        <a href="contact.html" class="hover:text-brand-700">Contact</a>
        <a href="privacy.html" class="hover:text-brand-700">Privacy</a>
        <a href="terms.html" class="hover:text-brand-700">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator Logic (defer, end of body) -->
  <script defer>
  (function(){
    const $ = (id) => document.getElementById(id);

    const els = {
      price: $('price'),
      down: $('downPayment'),
      trade: $('tradeIn'),
      taxRate: $('salesTax'),
      fees: $('fees'),
      financeTax: $('financeTax'),
      financeFees: $('financeFees'),
      apr: $('apr'),
      term: $('term'),
      termUnit: $('termUnit'),
      frequency: $('frequency'),
      residual: $('residual'),
      residualMode: $('residualMode'),
      firstDate: $('firstDate'),

      paymentPerPeriod: $('paymentPerPeriod'),
      totalInterest: $('totalInterest'),
      totalCost: $('totalCost'),
      payoffTime: $('payoffTime'),
      scheduleBody: $('scheduleBody'),

      recalc: $('recalc'),
      printBtn: $('printBtn'),
      resetBtn: $('resetBtn'),

      scheduleDetails: $('scheduleDetails'),
    };

    // Accessible tooltips
    document.querySelectorAll('[data-tip]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const tipSel = btn.getAttribute('data-tip');
        const tip = document.querySelector(tipSel);
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        tip.setAttribute('aria-hidden', String(expanded));
      });
      btn.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          btn.click();
        }
      });
    });

    // Mobile menu
    const mmBtn = $('mobile-menu-toggle');
    const mm = $('mobile-menu');
    if (mmBtn && mm) {
      mmBtn.addEventListener('click', ()=>{
        const hidden = mm.classList.contains('hidden');
        mm.classList.toggle('hidden', !hidden);
        mmBtn.setAttribute('aria-expanded', String(hidden));
      });
    }

    // Validation helpers
    const errors = {
      price: $('priceError'),
      down: $('downError'),
      trade: $('tradeError'),
      tax: $('taxError'),
      fees: $('feesError'),
      apr: $('aprError'),
      term: $('termError'),
      freq: $('freqError'),
      resid: $('residError')
    };

    function showError(el, errEl, msg){
      errEl.textContent = msg;
      errEl.classList.remove('hidden');
      el.setAttribute('aria-invalid', 'true');
    }
    function clearError(el, errEl){
      errEl.textContent = '';
      errEl.classList.add('hidden');
      el.removeAttribute('aria-invalid');
    }

    function validate(){
      let ok = true;
      const price = num(els.price.value);
      const down = num(els.down.value);
      const trade = num(els.trade.value);
      const taxRate = num(els.taxRate.value);
      const fees = num(els.fees.value);
      const apr = num(els.apr.value);
      const term = num(els.term.value);

      // Price
      if (!(price > 0)) { showError(els.price, errors.price, 'Enter a positive equipment price.'); ok=false; } else { clearError(els.price, errors.price); }
      // Down / Trade
      if (down < 0) { showError(els.down, errors.down, 'Down payment cannot be negative.'); ok=false; } else { clearError(els.down, errors.down); }
      if (trade < 0) { showError(els.trade, errors.trade, 'Trade-in cannot be negative.'); ok=false; } else { clearError(els.trade, errors.trade); }
      if (down + trade > price) { showError(els.down, errors.down, 'Down + trade-in cannot exceed price.'); showError(els.trade, errors.trade, 'Down + trade-in cannot exceed price.'); ok=false; }

      // Tax / Fees
      if (taxRate < 0) { showError(els.taxRate, errors.tax, 'Sales tax rate cannot be negative.'); ok=false; } else { clearError(els.taxRate, errors.tax); }
      if (fees < 0) { showError(els.fees, errors.fees, 'Fees cannot be negative.'); ok=false; } else { clearError(els.fees, errors.fees); }

      // APR
      if (apr < 0) { showError(els.apr, errors.apr, 'APR cannot be negative.'); ok=false; } else { clearError(els.apr, errors.apr); }

      // Term
      if (!(term > 0)) { showError(els.term, errors.term, 'Enter a positive term.'); ok=false; } else { clearError(els.term, errors.term); }

      // Residual
      const resid = num(els.residual.value);
      if (resid < 0) { showError(els.residual, errors.resid, 'Residual cannot be negative.'); ok=false; } else { clearError(els.residual, errors.resid); }

      return ok;
    }

    // on-blur inline validation
    [els.price, els.down, els.trade, els.taxRate, els.fees, els.apr, els.term, els.residual].forEach(ctrl=>{
      ctrl.addEventListener('blur', validate);
    });

    // Formatting helpers
    const fmtCur = (v) => new Intl.NumberFormat(undefined, {style:'currency', currency:'USD'}).format(v || 0);
    const fmtNum = (v) => new Intl.NumberFormat().format(v || 0);

    function num(v){ const n = parseFloat(v); return isFinite(n) ? n : 0; }

    function periodsPerYear(freq){
      switch(freq){
        case 'quarterly': return 4;
        case 'annual': return 1;
        default: return 12;
      }
    }

    function monthsPerStep(freq){
      switch(freq){
        case 'quarterly': return 3;
        case 'annual': return 12;
        default: return 1;
      }
    }

    function compute(){
      if(!validate()) { updateOutputs(0,0,0,'—',[]); return; }

      const price = num(els.price.value);
      const down = num(els.down.value);
      const trade = num(els.trade.value);
      const taxRate = num(els.taxRate.value)/100;
      const fees = num(els.fees.value);
      const apr = num(els.apr.value)/100;
      let termVal = num(els.term.value);
      const termUnit = els.termUnit.value;
      const freq = els.frequency.value;
      const ppYear = periodsPerYear(freq);

      // Convert term to periods
      let totalPeriods;
      if (termUnit === 'years') {
        totalPeriods = Math.round(termVal * ppYear);
      } else {
        // months
        totalPeriods = Math.round((termVal/12) * ppYear);
      }
      if (totalPeriods <= 0) { showError(els.term, errors.term, 'Term results in zero periods—adjust inputs.'); return updateOutputs(0,0,0,'—',[]); }
      else { clearError(els.term, errors.term); }

      // Residual handling
      let residualValue = num(els.residual.value);
      if (els.residualMode.value === 'percent') {
        residualValue = price * (residualValue/100);
      }

      // Taxable base assumption: price - trade - down for tax base (common but not universal).
      const taxableBase = Math.max(0, price - trade - down);
      const tax = taxableBase * taxRate;

      // Amount financed PV
      let pv = Math.max(0, price - down - trade);
      if (els.financeTax.checked) pv += tax;
      if (els.financeFees.checked) pv += fees;

      // Per-period rate
      const i = apr / ppYear;

      // Payment with balloon
      let payment = 0;
      if (i === 0) {
        // Simple principal spread, ignoring time value; balloon subtracted from financed principal
        payment = (pv - residualValue) / totalPeriods;
      } else {
        const discBalloon = residualValue / Math.pow(1+i, totalPeriods);
        payment = ((pv - discBalloon) * i) / (1 - Math.pow(1+i, -totalPeriods));
      }

      // Build schedule
      const schedule = [];
      let balance = pv;
      const start = els.firstDate.value ? new Date(els.firstDate.value + '-01') : new Date();
      const stepMonths = monthsPerStep(freq);

      for (let p=1; p<=totalPeriods; p++){
        const interest = balance * i;
        let principal = payment - interest;
        // Prevent numeric drift on final period (before balloon)
        if (p === totalPeriods) {
          // Ensure final remaining equals balloon
          principal = Math.max(0, balance - residualValue);
        }
        balance = Math.max(0, balance - principal);

        // Date label
        const d = new Date(start);
        d.setMonth(start.getMonth() + p*stepMonths);

        schedule.push({
          period: p,
          date: d,
          payment: payment,
          interest: interest,
          principal: principal,
          balance: balance
        });
      }

      // Totals
      const totalPaid = payment * totalPeriods + residualValue;
      const totalInterest = Math.max(0, totalPaid - pv);

      const payoffLabel = termUnit === 'years'
        ? `${fmtNum(termVal)} years`
        : `${fmtNum(termVal)} months`;

      updateOutputs(payment, totalInterest, totalPaid, payoffLabel, schedule);
    }

    function updateOutputs(payment, totalInterest, totalPaid, payoff, schedule){
      els.paymentPerPeriod.textContent = fmtCur(payment);
      els.totalInterest.textContent = fmtCur(totalInterest);
      els.totalCost.textContent = fmtCur(totalPaid);
      els.payoffTime.textContent = payoff;
      renderSchedule(schedule);
      renderChart(totalPaid - totalInterest, totalInterest);
    }

    function renderSchedule(rows){
      const tbody = els.scheduleBody;
      tbody.innerHTML = '';
      if (!rows || !rows.length) return;
      const df = new Intl.DateTimeFormat(undefined, {year:'numeric', month:'short'});

      rows.forEach(r=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="px-4 py-2 text-left">${r.period}</td>
          <td class="px-4 py-2 text-left">${df.format(r.date)}</td>
          <td class="px-4 py-2">${fmtCur(r.payment)}</td>
          <td class="px-4 py-2">${fmtCur(r.interest)}</td>
          <td class="px-4 py-2">${fmtCur(r.principal)}</td>
          <td class="px-4 py-2">${fmtCur(r.balance)}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    let chartInstance = null;
    function renderChart(principalPortion, interestPortion){
      const ctx = document.getElementById('resultsChart');
      if (!ctx) return;

      const data = {
        labels: ['Principal', 'Interest'],
        datasets: [{ data: [Math.max(0, principalPortion), Math.max(0, interestPortion)] }]
      };

      if (chartInstance) {
        chartInstance.data = data;
        chartInstance.update();
      } else {
        chartInstance = new Chart(ctx, {
          type: 'doughnut',
          data,
          options: {
            plugins: { legend: { position: 'bottom' } },
            responsive: true,
            maintainAspectRatio: false
          }
        });
      }
    }

    // Wire up buttons & inputs
    els.recalc.addEventListener('click', compute);
    els.printBtn.addEventListener('click', ()=> window.print());
    els.resetBtn.addEventListener('click', ()=>{
      // Reset to sensible defaults
      els.price.value = 50000;
      els.down.value = 5000;
      els.trade.value = 0;
      els.taxRate.value = 8.5;
      els.fees.value = 300;
      els.financeTax.checked = true;
      els.financeFees.checked = true;
      els.apr.value = 7.25;
      els.term.value = 60;
      els.termUnit.value = 'months';
      els.frequency.value = 'monthly';
      els.residual.value = 0;
      els.residualMode.value = 'amount';
      els.firstDate.value = '';
      // Clear errors
      Object.values(errors).forEach(e => { e.classList.add('hidden'); e.textContent=''; });
      // Recompute
      compute();
      // Collapse schedule
      els.scheduleDetails.open = false;
    });

    // Live calculation on input without being chatty; on blur we already validate
    [
      'price','downPayment','tradeIn','salesTax','fees','apr','term','termUnit','frequency','residual','residualMode','financeTax','financeFees','firstDate'
    ].forEach(id=>{
      const node = document.getElementById(id);
      if (node) node.addEventListener('input', compute);
    });

    // Initial compute
    compute();
  })();
  </script>
</body>
</html>

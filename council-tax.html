<!DOCTYPE html>
<html lang="en"><head> 
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<meta charset="utf-8"/>
<title>UK Council Tax Calculator | Accurate Band Multipliers, Discounts and Payments</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="Free UK Council Tax calculator. Estimate your annual, monthly or weekly council tax from your band or property value. Supports England, Scotland and Wales band multipliers, single person discount, student exemption and Council Tax Reduction." name="description"/>
<meta content="Ugo Candido" name="author"/>
<link href="https://calcdomain.com/council-tax.html" rel="canonical"/>
<meta content="index,follow,max-image-preview:large" name="robots"/>
<meta content="#ffffff" name="theme-color"/>
<link href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Ctext y='14' x='2' font-size='14'%3E%F0%9F%93%8B%3C/text%3E%3C/svg%3E" rel="icon"/>
<link href="style.css" media="print" onload="this.media='all'" rel="stylesheet"/>
<style>
    /* Critical, mobile-first CSS */
    :root{
      --primary:#005A9C; --secondary:#003F6E; --text:#212529; --muted:#6C757D;
      --bg:#F8F9FA; --surface:#FFFFFF; --border:#DEE2E6; --success:#198754; --danger:#DC3545;
      --touch:48px;
    }
    *,*::before,*::after{ box-sizing:border-box }
    html{ font-size:16px }
    body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; line-height:1.6; color:var(--text); background:var(--bg) }
    a{ color:var(--primary); text-decoration:none }
    a:hover{ text-decoration:underline }
    .container{ max-width:1100px; margin:0 auto; padding:0 1rem }
    .skip-link{ position:absolute; left:0.5rem; top:-40px; background:var(--primary); color:#fff; padding:0.5rem 0.75rem; border-radius:4px; transition:top .2s }
    .skip-link:focus{ top:0.5rem; outline:3px solid #fff }
    header{ background:var(--surface); border-bottom:1px solid var(--border) }
    .header-inner{ display:flex; align-items:center; gap:1rem; padding:0.75rem 0; flex-wrap:wrap }
    .brand{ font-weight:700; color:var(--secondary) }
    main{ padding:1.25rem 0 2rem }
    h1{ font-size:1.85rem; line-height:1.25; color:var(--secondary); margin:.25rem 0 0.5rem }
    h2{ font-size:1.35rem; color:var(--secondary); margin:1.25rem 0 .5rem }
    .lead{ color:#111; max-width:68ch }
    .grid{ display:grid; gap:1.25rem }
    @media (min-width: 960px){ .grid-2{ grid-template-columns: 420px 1fr } }
    .card{ background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:1rem }
    .calculator section + section{ margin-top:1rem }
    .form-group{ margin-bottom:1rem }
    label{ display:block; font-weight:600; margin-bottom:.35rem }
    .label-row{ display:flex; align-items:center; gap:.5rem; flex-wrap:wrap }
    .tip-btn{ appearance:none; border:1px solid var(--border); background:var(--surface); color:var(--secondary); border-radius:999px; width:var(--touch); height:var(--touch); min-width:var(--touch); min-height:var(--touch); font-weight:700; cursor:pointer }
    .tip-btn:focus{ outline:3px solid var(--primary); outline-offset:2px }
    .tooltip{ display:none; margin-top:.25rem; color:var(--muted); font-size:.95rem }
    .tooltip[aria-hidden="false"]{ display:block }
    .control{ width:100%; min-height:var(--touch); padding:.65rem .75rem; border:1px solid var(--border); border-radius:8px; font-size:1rem; background:#fff }
    .control:focus{ outline:3px solid rgba(0,90,156,.25); border-color:var(--primary) }
    .inline{ display:flex; gap:.5rem; align-items:center; flex-wrap:wrap }
    .radio-group{ display:flex; gap:.5rem; flex-wrap:wrap }
    .radio-chip{ position:relative }
    .radio-chip input{ position:absolute; inset:0; opacity:0 }
    .radio-chip label{ display:inline-flex; align-items:center; justify-content:center; min-height:var(--touch); padding:.5rem .9rem; border:1px solid var(--border); border-radius:999px; cursor:pointer; user-select:none }
    .radio-chip input:checked + label{ background:var(--primary); color:#fff; border-color:var(--primary) }
    .radio-chip input:focus + label{ outline:3px solid rgba(0,90,156,.35); outline-offset:2px }
    .error{ color:var(--danger); font-size:.95rem; margin-top:.35rem }
    .results{ min-height:260px; } /* Prevent CLS */
    .results .row{ display:flex; justify-content:space-between; gap:1rem; padding:.6rem 0; border-bottom:1px dashed var(--border) }
    .results .row:last-child{ border-bottom:none }
    .results .k{ color:var(--muted) }
    .results .v{ font-weight:700 }
    .results .highlight{ color:var(--success); font-size:1.2rem }
    .muted{ color:var(--muted) }
    ul{ padding-left:1.1rem }
    .formula-box{ background:#eef3f8; border:1px solid var(--border); padding:1rem; border-radius:8px; overflow-x:auto }
    .mono{ font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace }
    .author{ border-top:1px solid var(--border); padding-top:1rem; color:var(--muted); font-size:.95rem }
    /* Touch spacing */
    button,.control,select{ min-height:var(--touch) }
  </style>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "UK Council Tax Calculator",
  "url": "https://calcdomain.com/council-tax.html",
  "description": "Calculate your UK council tax by band or property value. Supports England, Scotland and Wales band multipliers, single person discount, student exemption and Council Tax Reduction.",
  "inLanguage": "en-GB",
  "about": [
    {
      "@type": "Thing",
      "name": "Finance"
    },
    {
      "@type": "Thing",
      "name": "UK Taxation"
    },
    {
      "@type": "Thing",
      "name": "Council Tax Calculator"
    }
  ],
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  },
  "mainEntity": [
    {
      "@type": "HowTo",
      "name": "How to calculate your UK Council Tax",
      "description": "Estimate your bill using your local Band D charge, property band or value, and applicable discounts.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Choose nation",
          "text": "Select England, Scotland or Wales to load the correct band multipliers and thresholds."
        },
        {
          "@type": "HowToStep",
          "name": "Enter band or value",
          "text": "Pick your valuation method. Either select your council tax band or enter an estimated property value for the relevant valuation date."
        },
        {
          "@type": "HowToStep",
          "name": "Provide Band D charge",
          "text": "Enter your local authority's annual Band D charge (including all precepts)."
        },
        {
          "@type": "HowToStep",
          "name": "Apply discounts",
          "text": "Select Single Person Discount, Student exemption if applicable, and add any Council Tax Reduction percentage."
        },
        {
          "@type": "HowToStep",
          "name": "View payments",
          "text": "Review the annual total and optional monthly (10 or 12 months), weekly and fortnightly instalments."
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How is council tax calculated from Band D?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Each band is a proportion of the Band D amount set by your local authority. For example, in England Band A is 6/9 of Band D while Band H is 18/9 of Band D. Scotland and Wales use different statutory proportions."
          }
        },
        {
          "@type": "Question",
          "name": "Can I use a property value estimate instead of the band?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. Enter your estimated property value at the relevant valuation date (1991 for England and Scotland, 2003 for Wales) and the calculator will infer the band using official thresholds."
          }
        },
        {
          "@type": "Question",
          "name": "Does this calculator include parish or precept charges?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "It will if you include them in the Band D charge field. Use the total Band D amount shown on your bill or your council’s website, which typically includes all precepts."
          }
        },
        {
          "@type": "Question",
          "name": "What discounts can I apply?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "You can apply the Single Person Discount (25%), a 100% exemption if all occupants are full‑time students, and an optional Council Tax Reduction percentage for means‑tested support."
          }
        },
        {
          "@type": "Question",
          "name": "Is Northern Ireland supported?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No. Northern Ireland uses domestic rates rather than council tax, so this tool supports England, Scotland and Wales only."
          }
        },
        {
          "@type": "Question",
          "name": "How accurate is the disabled band reduction in this tool?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Where eligible, liability is usually charged at one band lower. For Band A properties, councils apply a special concession. This tool reduces one band where possible and flags Band A as an approximation—check with your council for the exact amount."
          }
        }
      ]
    }
  ]
}
  </script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="search.js" defer></script>
<!-- MathJax for LaTeX formulas -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['\(','\)'], ['$', '$']],
      displayMath: [['$','$'], ['\[','\]']]
    },
    svg: { fontCache: 'global' }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link rel="preload" href="/assets/js/mobile-menu.js" as="script">
<link rel="preload" href="/assets/js/page-enhancements.js" as="script">

</head>
<body>

<a class="skip-link" href="#main">Skip to main content</a>
<header role="banner">
<div class="container header-inner">
<a aria-label="CalcDomain home" class="brand" href="/">CalcDomain</a>
<nav aria-label="Breadcrumb" class="muted" style="font-size:.95rem;">
<a href="/">Home</a> / <a href="https://calcdomain.com/finance.html">Finance</a> / <a href="https://calcdomain.com/taxation.html">UK Taxation</a> / Council Tax Calculator
      </nav>
</div>
</header>
<main class="container" id="main" role="main">
<h1>UK Council Tax Calculator</h1>
<p class="lead">Quickly estimate your council tax for England, Scotland or Wales. Enter your property band or an estimated property value, add your local Band D charge, then apply discounts like the Single Person Discount or student exemption to see annual, monthly and weekly payments.</p>
<div class="grid grid-2" style="margin-top:1rem">
<section aria-labelledby="calc-heading" class="card calculator">
<h2 id="calc-heading" style="margin-top:0">Calculator</h2>
<section>
<div class="form-group">
<label for="nation">Nation *</label>
<select aria-describedby="nationTip nationErr" aria-required="true" class="control" id="nation">
<option selected="" value="england">England</option>
<option value="scotland">Scotland</option>
<option value="wales">Wales</option>
</select>
<div aria-hidden="true" class="tooltip" id="nationTip" role="note">
              Select where the property is located. Northern Ireland uses domestic rates and is not supported.
            </div>
<div aria-live="polite" class="error" id="nationErr" role="alert"></div>
</div>
<div class="form-group">
<span class="label-row" id="methodLegend">Valuation method *</span>
<div aria-labelledby="methodLegend" class="radio-group" role="radiogroup">
<div class="radio-chip">
<input checked="" id="methodBand" name="method" type="radio" value="band"/>
<label for="methodBand">Use band</label>
</div>
<div class="radio-chip">
<input id="methodValue" name="method" type="radio" value="value"/>
<label for="methodValue">Estimate from value</label>
</div>
</div>
</div>
<div class="form-group" id="groupBand">
<div class="label-row">
<label for="band">Council Tax band *</label>
<button aria-controls="bandTip" aria-expanded="false" aria-label="About bands" class="tip-btn" id="bandTipBtn" type="button">?</button>
</div>
<select aria-describedby="bandTip bandErr" aria-required="true" class="control" id="band">
<!-- Options populated by JS depending on nation -->
</select>
<div aria-hidden="true" class="tooltip" id="bandTip" role="note">
              Your band appears on your council tax bill or via official lookup services. Bands differ by nation (A–H in England/Scotland; A–I in Wales).
            </div>
<div aria-live="polite" class="error" id="bandErr" role="alert"></div>
</div>
<div class="form-group" id="groupValue" style="display:none">
<div class="label-row">
<label for="propValue">Estimated property value (GBP) *</label>
<button aria-controls="valTip" aria-expanded="false" aria-label="Valuation date help" class="tip-btn" id="valTipBtn" type="button">?</button>
</div>
<input aria-describedby="valTip propValueErr" aria-required="true" class="control" id="propValue" inputmode="decimal" min="0" placeholder="e.g., 250000" step="1" type="number"/>
<div aria-hidden="true" class="tooltip" id="valTip" role="note">
              Use the value at the nation’s valuation date: England &amp; Scotland: 1 April 1991; Wales: 1 April 2003. This tool maps value to the official band thresholds.
            </div>
<div aria-live="polite" class="error" id="propValueErr" role="alert"></div>
</div>
<div class="form-group">
<div class="label-row">
<label for="bandD">Local Band D charge (annual, GBP) *</label>
<button aria-controls="bandDTip" aria-expanded="false" aria-label="What is Band D charge" class="tip-btn" id="bandDTipBtn" type="button">?</button>
</div>
<input aria-describedby="bandDTip bandDErr" aria-required="true" class="control" id="bandD" inputmode="decimal" min="0" placeholder="e.g., 2000" step="1" type="number"/>
<div aria-hidden="true" class="tooltip" id="bandDTip" role="note">
              Enter your council’s total Band D amount including precepts (e.g., adult social care, police). Find it on your bill or council website.
            </div>
<div aria-live="polite" class="error" id="bandDErr" role="alert"></div>
</div>
<div class="form-group">
<label class="inline" for="singlePerson">
<input id="singlePerson" style="width:1.1rem; height:1.1rem" type="checkbox"/> Apply Single Person Discount (25%)
            </label>
</div>
<div class="form-group">
<label class="inline" for="students">
<input id="students" style="width:1.1rem; height:1.1rem" type="checkbox"/> All occupants are full‑time students (100% exemption)
            </label>
</div>
<div class="form-group">
<div class="label-row">
<label class="inline" for="disabledReduction">
<input id="disabledReduction" style="width:1.1rem; height:1.1rem" type="checkbox"/> Disabled band reduction (charge at one band lower)
              </label>
<button aria-controls="disTip" aria-expanded="false" aria-label="Disabled reduction help" class="tip-btn" id="disTipBtn" type="button">?</button>
</div>
<div aria-hidden="true" class="tooltip" id="disTip" role="note">
              If eligible, your bill is usually calculated as if your property were in the band immediately below. For Band A properties, councils apply a special concession—results here are an estimate.
            </div>
</div>
<div class="form-group">
<div class="label-row">
<label for="ctr">Council Tax Reduction (means‑tested, %)</label>
<button aria-controls="ctrTip" aria-expanded="false" aria-label="CTR help" class="tip-btn" id="ctrTipBtn" type="button">?</button>
</div>
<input aria-describedby="ctrTip ctrErr" class="control" id="ctr" inputmode="decimal" max="100" min="0" placeholder="e.g., 20" step="1" type="number"/>
<div aria-hidden="true" class="tooltip" id="ctrTip" role="note">
              Optional means‑tested reduction applied to your remaining liability after other discounts. Enter a percentage from 0 to 100.
            </div>
<div aria-live="polite" class="error" id="ctrErr" role="alert"></div>
</div>
</section>
</section>
<section aria-labelledby="results-heading" aria-live="polite" class="card results">
<h2 id="results-heading" style="margin-top:0">Results</h2>
<div class="row">
<span class="k">Nation</span><span class="v" id="resNation">—</span>
</div>
<div class="row">
<span class="k">Band (derived)</span><span class="v" id="resBand">—</span>
</div>
<div class="row">
<span class="k">Band multiplier</span><span class="v" id="resMultiplier">—</span>
</div>
<div class="row">
<span class="k">Base annual before discounts</span><span class="v" id="resBase">—</span>
</div>
<div class="row">
<span class="k">Single Person Discount</span><span class="v" id="resSPD">—</span>
</div>
<div class="row">
<span class="k">Student exemption</span><span class="v" id="resStudents">—</span>
</div>
<div class="row">
<span class="k">Council Tax Reduction (CTR)</span><span class="v" id="resCTR">—</span>
</div>
<div class="row">
<span class="k">Annual total</span><span class="v highlight" id="resAnnual">—</span>
</div>
<div class="row">
<span class="k">Monthly (10 instalments)</span><span class="v" id="resMonthly10">—</span>
</div>
<div class="row">
<span class="k">Monthly (12 instalments)</span><span class="v" id="resMonthly12">—</span>
</div>
<div class="row">
<span class="k">Weekly</span><span class="v" id="resWeekly">—</span>
</div>
<p class="muted" id="resNotes" style="margin-top:.75rem"></p>
</section>
</div>
<section class="card" style="margin-top:1.25rem">
<h2>Data Source and Methodology</h2>
<p>
        Primary authoritative references:
      </p>
<ul>
<li>
          GOV.UK — Council Tax bands and valuation: <a href="https://www.gov.uk/council-tax-bands" rel="noopener" target="_blank">https://www.gov.uk/council-tax-bands</a>
          (accessed 2025).
        </li>
<li>
          England band proportions: Local Government Finance Act 1992, s.5 and related regulations (Band A–H multipliers).
          <a href="https://www.legislation.gov.uk/ukpga/1992/14/section/5" rel="noopener" target="_blank">Legislation.gov.uk</a>
</li>
<li>
          Scotland band proportions (from 1 April 2017): The Council Tax (Substitution of Proportion) (Scotland) Order 2016 (SSI 2016/369).
          <a href="https://www.legislation.gov.uk/ssi/2016/369/contents/made" rel="noopener" target="_blank">Legislation.gov.uk</a>
</li>
<li>
          Wales bands A–I and valuation thresholds: Welsh Government guidance.
          <a href="https://www.gov.wales/council-tax" rel="noopener" target="_blank">gov.wales/council-tax</a>
</li>
</ul>
<p><strong>All calculations are strictly based on the formulas and data provided by these sources.</strong></p>
</section>
<section class="card">
<h2>The Formula Explained</h2>
<div aria-label="Mathematical formulas" class="formula-box mono">
        For a given nation n and band b:<br/>
        1) Base annual before discounts:<br/>
        \( \text{Base} = \text{BandD}_{n} \times M_{n,b} \)<br/><br/>
        2) Apply Single Person Discount (SPD, 25% if eligible):<br/>
        \( \text{AfterSPD} = \text{Base} \times (1 - 0.25 \cdot \mathbf{1}_{SPD}) \)<br/><br/>
        3) Apply student exemption (if all occupants are full-time students):<br/>
        \( \text{AfterStudents} = \begin{cases} 0, &amp; \text{if students} \\ \text{AfterSPD}, &amp; \text{otherwise} \end{cases} \)<br/><br/>
        4) Apply Council Tax Reduction (CTR%, 0–100):<br/>
        \( \text{Annual} = \text{AfterStudents} \times \left(1 - \frac{\text{CTR}}{100}\right) \)<br/><br/>
        Payment schedules:<br/>
        \( \text{Monthly}_{10} = \frac{\text{Annual}}{10} \),  \( \text{Monthly}_{12} = \frac{\text{Annual}}{12} \),  \( \text{Weekly} = \frac{\text{Annual}}{52} \)
      </div>
<p class="muted">Where M is the statutory band multiplier for the selected nation. For the “disabled band reduction”, the calculator evaluates liability at one band lower where possible.</p>
</section>
<section class="card">
<h2>Glossary of Variables</h2>
<ul>
<li><strong>Nation:</strong> England, Scotland or Wales — determines band multipliers and value thresholds.</li>
<li><strong>Band:</strong> The council tax band (A–H in England/Scotland; A–I in Wales).</li>
<li><strong>Estimated property value:</strong> Market value at the statutory valuation date (1991 for England/Scotland; 2003 for Wales), used to infer a band.</li>
<li><strong>Local Band D charge:</strong> Annual amount set by your local authority for Band D, including precepts.</li>
<li><strong>Band multiplier M:</strong> Statutory proportion relative to Band D for the selected band and nation.</li>
<li><strong>Single Person Discount:</strong> 25% reduction if exactly one adult is liable.</li>
<li><strong>Student exemption:</strong> 100% reduction if all occupants are full‑time students.</li>
<li><strong>Council Tax Reduction (CTR):</strong> Means‑tested percentage reduction applied after other discounts.</li>
<li><strong>Annual, Monthly, Weekly totals:</strong> Resulting payable amounts after applying all selected discounts and reductions.</li>
</ul>
</section>
<section class="card">
<h2>How It Works: A Step‑by‑Step Example</h2>
<p><strong>Scenario:</strong> England, Band E home with local Band D = £2,000, Single Person Discount, no students, CTR = 10%.</p>
<ol>
<li>England Band E multiplier: \( M_{E} = \frac{11}{9} \approx 1.2222 \).</li>
<li>Base before discounts: \( \text{Base} = 2000 \times 1.2222 = £2{,}444.44 \) (rounded).</li>
<li>Apply SPD (25%): \( \text{AfterSPD} = 2{,}444.44 \times (1 - 0.25) = £1{,}833.33 \).</li>
<li>No student exemption → amount remains £1,833.33.</li>
<li>Apply CTR 10%: \( \text{Annual} = 1{,}833.33 \times (1 - 0.10) = £1{,}650.00 \).</li>
<li>Instalments: \( \text{Monthly}_{10} = £165.00 \), \( \text{Monthly}_{12} = £137.50 \), \( \text{Weekly} \approx £31.73 \).</li>
</ol>
</section>
<section class="card" itemscope="" itemtype="https://schema.org/FAQPage">
<h2>Frequently Asked Questions (FAQ)</h2>
<div>
<h3 itemprop="name">Where can I find my official council tax band?</h3>
<p itemprop="acceptedAnswer">Check your bill or use the official band lookup: <a href="https://www.gov.uk/council-tax-bands" rel="noopener" target="_blank">GOV.UK Council Tax bands</a>. In Scotland, search via the <a href="https://www.saa.gov.uk/" rel="noopener" target="_blank">Scottish Assessors Association</a>. In Wales, see <a href="https://www.gov.wales/council-tax" rel="noopener" target="_blank">gov.wales</a>.</p>
<h3 itemprop="name">What if my council collects over 12 months?</h3>
<p itemprop="acceptedAnswer">Many councils offer 10 or 12 instalments. This tool shows both so you can match your preferred plan.</p>
<h3 itemprop="name">Does this calculator account for parish or police precepts?</h3>
<p itemprop="acceptedAnswer">Yes, if you include them in the Band D charge value. Use the total Band D figure from your bill or council website.</p>
<h3 itemprop="name">How accurate is using a property value estimate?</h3>
<p itemprop="acceptedAnswer">It’s an approximation. Bands are based on values at fixed historical dates (1991 or 2003). The thresholds in this tool match official guidance, but your council’s banding list is definitive.</p>
<h3 itemprop="name">Can I stack discounts?</h3>
<p itemprop="acceptedAnswer">Yes. The calculator applies discounts in a typical order: Single Person Discount, then student exemption (if applicable), then CTR on the remaining liability.</p>
<h3 itemprop="name">Why is Northern Ireland excluded?</h3>
<p itemprop="acceptedAnswer">Northern Ireland uses a domestic rates system rather than council tax, with different rules and calculations.</p>
</div>
</section>
<p class="author">
      Tool developed by <strong>Ugo Candido</strong>. Content verified by <strong>CalcDomain Editorial Team</strong>.<br/>
      Last reviewed for accuracy on: <time datetime="2025-09-14">14 September 2025</time>.
    </p>
</main>
<script defer="">
  (function(){
    'use strict';

    const £ = (id) => document.getElementById(id);
    const state = {
      nation: 'england',
      method: 'band',
      bands: {
        england: ['A','B','C','D','E','F','G','H'],
        scotland: ['A','B','C','D','E','F','G','H'],
        wales: ['A','B','C','D','E','F','G','H','I']
      },
      multipliers: {
        // Relative to Band D
        england: {A:6/9,B:7/9,C:8/9,D:1,E:11/9,F:13/9,G:15/9,H:18/9},
        wales:   {A:6/9,B:7/9,C:8/9,D:1,E:11/9,F:13/9,G:15/9,H:18/9,I:21/9},
        // Scotland (post-2017)
        scotland:{A:240/360,B:280/360,C:320/360,D:1,E:473/360,F:585/360,G:705/360,H:882/360}
      },
      thresholds: {
        // Value to band mapping using valuation date values
        england: [
          {max:40000, band:'A'},
          {max:52000, band:'B'},
          {max:68000, band:'C'},
          {max:88000, band:'D'},
          {max:120000, band:'E'},
          {max:160000, band:'F'},
          {max:320000, band:'G'},
          {max:Infinity, band:'H'}
        ],
        scotland: [
          {max:27000, band:'A'},
          {max:35000, band:'B'},
          {max:45000, band:'C'},
          {max:58000, band:'D'},
          {max:80000, band:'E'},
          {max:106000, band:'F'},
          {max:212000, band:'G'},
          {max:Infinity, band:'H'}
        ],
        wales: [
          {max:44000, band:'A'},
          {max:65000, band:'B'},
          {max:91000, band:'C'},
          {max:123000, band:'D'},
          {max:162000, band:'E'},
          {max:223000, band:'F'},
          {max:324000, band:'G'},
          {max:424000, band:'H'},
          {max:Infinity, band:'I'}
        ]
      }
    };

    // Elements
    const nationEl = $('nation');
    const bandEl = $('band');
    const methodBandEl = $('methodBand');
    const methodValueEl = $('methodValue');
    const groupBand = $('groupBand');
    const groupValue = $('groupValue');
    const propValueEl = $('propValue');
    const bandDEl = $('bandD');
    const singlePersonEl = $('singlePerson');
    const studentsEl = $('students');
    const disabledReductionEl = $('disabledReduction');
    const ctrEl = $('ctr');

    // Tooltips
    const tips = [
      {btn:'bandTipBtn', box:'bandTip'},
      {btn:'valTipBtn', box:'valTip'},
      {btn:'bandDTipBtn', box:'bandDTip'},
      {btn:'ctrTipBtn', box:'ctrTip'},
      {btn:'disTipBtn', box:'disTip'}
    ];
    tips.forEach(({btn,box})=>{
      const b = $(btn), t = $(box);
      if(!b || !t) return;
      b.addEventListener('click', ()=>{
        const expanded = b.getAttribute('aria-expanded') === 'true';
        b.setAttribute('aria-expanded', String(!expanded));
        t.setAttribute('aria-hidden', String(expanded));
      }, {passive:true});
    });

    // Populate bands by nation
    function populateBands(){
      const list = state.bands[nationEl.value];
      bandEl.innerHTML = '';
      list.forEach(b=>{
        const opt = document.createElement('option');
        opt.value = b; opt.textContent = b;
        bandEl.appendChild(opt);
      });
      // Default to D
      if (list.includes('D')) bandEl.value = 'D';
    }

    // Helpers
    const fmtGBP = (n) => new Intl.NumberFormat('en-GB',{style:'currency',currency:'GBP',maximumFractionDigits:2}).format(n || 0);
    const round2 = (n) => Math.round((n + Number.EPSILON) * 100) / 100;

    // Validation helpers
    function setError(inputEl, errId, msg){
      const errEl = $(errId);
      if (!errEl) return;
      if (msg){
        errEl.textContent = msg;
        inputEl.setAttribute('aria-invalid','true');
      } else {
        errEl.textContent = '';
        inputEl.removeAttribute('aria-invalid');
      }
    }

    // Inline validation on blur
    nationEl.addEventListener('blur', ()=> {
      if (!nationEl.value) setError(nationEl, 'nationErr', 'Please choose a nation.');
      else setError(nationEl, 'nationErr', '');
    });

    bandDEl.addEventListener('blur', ()=>{
      const v = Number(bandDEl.value);
      if (!bandDEl.value) setError(bandDEl,'bandDErr','Enter your local Band D charge (annual).');
      else if (isNaN(v) || v <= 0) setError(bandDEl,'bandDErr','Band D charge must be a positive number.');
      else setError(bandDEl,'bandDErr','');
    });

    propValueEl.addEventListener('blur', ()=>{
      if (groupValue.style.display !== 'none'){
        const v = Number(propValueEl.value);
        if (!propValueEl.value) setError(propValueEl,'propValueErr','Please enter your property value estimate.');
        else if (isNaN(v) || v <= 0) setError(propValueEl,'propValueErr','Value must be a positive number in GBP.');
        else setError(propValueEl,'propValueErr','');
      }
    });

    ctrEl.addEventListener('blur', ()=>{
      if (!ctrEl.value){ setError(ctrEl,'ctrErr',''); return; }
      const v = Number(ctrEl.value);
      if (isNaN(v) || v < 0 || v > 100) setError(ctrEl,'ctrErr','Enter a percentage between 0 and 100.');
      else setError(ctrEl,'ctrErr','');
    });

    // Event wiring for recalculation
    [nationEl, bandEl, bandDEl, propValueEl, singlePersonEl, studentsEl, disabledReductionEl, ctrEl, methodBandEl, methodValueEl]
      .forEach(el => el.addEventListener('input', recalc, {passive:true}));

    methodBandEl.addEventListener('change', toggleMethod, {passive:true});
    methodValueEl.addEventListener('change', toggleMethod, {passive:true});
    nationEl.addEventListener('change', ()=>{
      populateBands();
      recalc();
    }, {passive:true});

    function toggleMethod(){
      const method = methodValueEl.checked ? 'value' : 'band';
      state.method = method;
      if (method === 'band'){
        groupBand.style.display = '';
        groupValue.style.display = 'none';
      } else {
        groupBand.style.display = 'none';
        groupValue.style.display = '';
      }
      recalc();
    }

    function valueToBand(nation, value){
      const t = state.thresholds[nation];
      for (let i=0;i<t.length;i++){
        if (value <= t[i].max) return t[i].band;
      }
      return t[t.length-1].band;
    }

    function oneBandLower(nation, band){
      const list = state.bands[nation];
      const idx = list.indexOf(band);
      if (idx > 0) return list[idx-1];
      return band; // A stays A; special concession varies by council
    }

    function recalc(){
      // Clear notes
      $('resNotes').textContent = '';

      const nation = nationEl.value || 'england';
      let band = bandEl.value;
      const bandD = Number(bandDEl.value || 0);
      const ctr = Number(ctrEl.value || 0);
      const spd = !!singlePersonEl.checked;
      const students = !!studentsEl.checked;
      const disabled = !!disabledReductionEl.checked;

      // Validate display depending on method
      if (state.method === 'value'){
        const val = Number(propValueEl.value || 0);
        if (val > 0){
          band = valueToBand(nation, val);
        } else {
          band = '-';
        }
      }

      // Nation label
      const nationLabel = nation.charAt(0).toUpperCase() + nation.slice(1);
      $('resNation').textContent = nationLabel;

      // Band and multiplier
      if (!band || band === '-'){
        $('resBand').textContent = '—';
        $('resMultiplier').textContent = '—';
        $('resBase').textContent = '—';
        $('resSPD').textContent = '—';
        $('resStudents').textContent = '—';
        $('resCTR').textContent = '—';
        $('resAnnual').textContent = '—';
        $('resMonthly10').textContent = '—';
        $('resMonthly12').textContent = '—';
        $('resWeekly').textContent = '—';
        return;
      }

      let appliedBand = band;
      if (disabled){
        const lowered = oneBandLower(nation, band);
        appliedBand = lowered;
        if (lowered === band && band === 'A'){
          $('resNotes').textContent = 'Note: Disabled reduction for Band A is a special concession; contact your council for the exact amount.';
        }
      }

      const mult = state.multipliers[nation][appliedBand];
      $('resBand').textContent = appliedBand + (appliedBand !== band ? ` (from ${band})` : '');
      $('resMultiplier').textContent = mult ? mult.toFixed(6).replace(/0+$/,'').replace(/\.$/,'') : '—';

      // Base
      const base = bandD > 0 && mult ? bandD * mult : 0;
      $('resBase').textContent = fmtGBP(base);

      // Apply discounts
      let afterSPD = base;
      let spdAmount = 0;
      if (spd){
        spdAmount = round2(base * 0.25);
        afterSPD = round2(base - spdAmount);
      }
      $('resSPD').textContent = spd ? `− ${fmtGBP(spdAmount)} (25%)` : 'Not applied';

      // Students
      let afterStudents = afterSPD;
      let studentsNote = 'Not applied';
      if (students){
        afterStudents = 0;
        studentsNote = '100% exemption';
      }
      $('resStudents').textContent = studentsNote;

      // CTR
      let ctrAmount = 0;
      let annual = afterStudents;
      if (ctr > 0){
        const pct = Math.min(100, Math.max(0, ctr));
        ctrAmount = round2(annual * (pct/100));
        annual = round2(annual - ctrAmount);
      }
      $('resCTR').textContent = ctr > 0 ? `− ${fmtGBP(ctrAmount)} (${Math.min(100, Math.max(0, ctr))}%)` : 'Not applied';

      // Totals
      $('resAnnual').textContent = fmtGBP(annual);
      $('resMonthly10').textContent = fmtGBP(round2(annual / 10));
      $('resMonthly12').textContent = fmtGBP(round2(annual / 12));
      $('resWeekly').textContent = fmtGBP(round2(annual / 52));
    }

    // Initialize
    populateBands();
    bandDEl.value = '2000'; // sensible placeholder default
    recalc();

    // Accessibility: ensure Enter toggles tooltips on focused buttons
    document.addEventListener('keydown', (e)=>{
      if ((e.key === 'Enter' || e.key === ' ') && e.target.classList.contains('tip-btn')){
        e.preventDefault();
        e.target.click();
      }
    }, {passive:false});
  })();
  </script>


</body></html>
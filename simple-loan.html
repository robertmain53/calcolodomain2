<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Simple Loan Calculator | Personal Loan Payments, Interest &amp; Payoff</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="Estimate payments for a simple-interest personal loan. Enter loan amount, APR, term (years or months), and payment frequency to see the payment amount, total interest, total cost, payoff date, and a complete payment schedule."/>
  <meta name="author" content="Ugo Candido"/>
  <link rel="canonical" href="https://calcdomain.com/simple-loan.html"/>
  <meta name="theme-color" content="#0b3d69"/>
  <meta name="robots" content="index, follow"/>
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="Simple Loan Calculator"/>
  <meta property="og:description" content="Calculate payment, total interest, total cost, and payoff date for a simple-interest personal loan."/>
  <meta property="og:url" content="https://calcdomain.com/simple-loan.html"/>

  <!-- Tailwind & Fonts -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: .75rem; }
    .prose h3 { font-size: 1.125rem; font-weight: 700; margin-top: 1.25rem; margin-bottom: .5rem; }
    .prose p { margin-bottom: .9rem; line-height: 1.7; }
    .prose ul { list-style: disc; padding-left: 1.25rem; }
    .prose ol { list-style: decimal; padding-left: 1.25rem; }
    details > summary { cursor: pointer; font-weight: 600; }
    details[open] > summary { margin-bottom: .5rem; }
    .eeat { display:grid; gap:0.75rem; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); font-size:0.875rem; color:#374151; }
    @media (min-width: 768px) { .eeat { grid-template-columns:repeat(4,minmax(0,1fr)); } }
    .eeat span { display:block; background:#f9fafb; border:1px solid #e5e7eb; border-radius:0.5rem; padding:0.75rem 1rem; }
    .result-pill { display:inline-flex; align-items:center; font-size:0.875rem; font-weight:600; padding:0.25rem 0.75rem; border-radius:9999px; }
    .formula-box { background:#f8fafc; border:1px solid #e2e8f0; border-radius:0.75rem; padding:1rem; overflow:auto; }
    .formula-box mjx-container { overflow-x:auto; }
    .sticky-ad { height: 600px; }
  </style>

  <!-- Site search -->
  <script src="search.js" defer></script>

  <!-- MathJax -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['\\[','\\]']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
      {"@type":"ListItem","position":2,"name":"Finance","item":"https://calcdomain.com/finance.html"},
      {"@type":"ListItem","position":3,"name":"Personal Loans","item":"https://calcdomain.com/subcategories/finance-personal-loans.html"},
      {"@type":"ListItem","position":4,"name":"Simple Loan Calculator","item":"https://calcdomain.com/simple-loan.html"}
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Simple Loan Calculator",
    "url":"https://calcdomain.com/simple-loan.html",
    "description":"Calculate payments, total interest, total cost, and payoff date for a simple-interest personal loan.",
    "publisher":{"@type":"Organization","name":"CalcDomain"},
    "author":{"@type":"Person","name":"Ugo Candido"},
    "mainEntity":{
      "@type":"FAQPage",
      "mainEntity":[
        {"@type":"Question","name":"What is a simple-interest loan?","acceptedAnswer":{"@type":"Answer","text":"Simple-interest loans compute interest using I = P × r × t where interest accrues only on the original principal. Each payment includes a fixed share of principal and interest."}},
        {"@type":"Question","name":"Does payment frequency change the total interest?","acceptedAnswer":{"@type":"Answer","text":"No. Changing from monthly to weekly or biweekly redistributes the per-payment amount, but total simple interest stays the same because it depends only on principal, annual rate, and time."}},
        {"@type":"Question","name":"How does the payoff date work?","acceptedAnswer":{"@type":"Answer","text":"When you provide a start date, the calculator adds one period for each payment to estimate the final payment date. Without a start date the payoff date is not shown."}}
      ]
    }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How simple-interest personal loans are calculated",
    "description":"Example showing how to compute total interest and payments for a simple-interest loan.",
    "step":[
      {"@type":"HowToStep","name":"Enter the loan amount","text":"Example: $10,000 principal."},
      {"@type":"HowToStep","name":"Set the annual interest rate","text":"Example: 8% simple interest."},
      {"@type":"HowToStep","name":"Choose the term and frequency","text":"Use 3 years with monthly payments (36 payments)."},
      {"@type":"HowToStep","name":"Compute total interest","text":"I = P × r × t ⇒ 10,000 × 0.08 × 3 = 2,400."},
      {"@type":"HowToStep","name":"Divide by the number of payments","text":"Payment = (P + I) / n ⇒ (10,000 + 2,400) / 36 ≈ 344.44 per month."}
    ]
  }
  </script>
</head>
<body class="bg-gray-50 text-gray-800">

  <!-- Header -->
  <header class="bg-white shadow-sm sticky top-0 z-50">
    <nav class="container mx-auto px-4 lg:px-6 py-4">
      <div class="flex justify-between items-center">
        <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

        <div class="w-full max-w-md hidden md:block mx-8">
          <div class="relative">
            <input id="search-input" type="search" placeholder="Search for a calculator..."
                   class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                   autocomplete="off">
            <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
          </div>
        </div>

        <div class="hidden md:flex items-center space-x-6">
          <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
          <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
        </div>

        <button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Toggle menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>

      <div id="mobile-menu" class="md:hidden mt-4 hidden">
        <div class="mb-4">
          <div class="relative">
            <input id="mobile-search-input" type="search" placeholder="Search calculators..."
                   class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
        </div>
        <div class="space-y-2">
          <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
          <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main -->
  <main class="container mx-auto px-4 py-8">
    <div class="flex flex-col lg:flex-row gap-8">

      <!-- Left column -->
      <section class="w-full lg:w-2/3">

        <nav class="text-sm mb-4 text-gray-600" aria-label="Breadcrumb">
          <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
          <a href="finance.html" class="hover:text-blue-600">Finance</a> &raquo;
          <a href="subcategories/finance-personal-loans.html" class="hover:text-blue-600">Personal Loans</a> &raquo;
          <span class="text-gray-900 font-medium">Simple Loan</span>
        </nav>

        <section class="bg-white p-6 rounded-lg shadow-md" aria-labelledby="calc-title">
          <h1 id="calc-title" class="text-3xl font-extrabold mb-2 text-slate-800">Simple Loan Calculator</h1>
          <p class="text-gray-600 mb-6">Model payments and total interest for a simple-interest personal loan. Enter principal, APR, term, and payment frequency to see the payment amount, total cost, payoff date, and a detailed payment schedule.</p>

          <div class="eeat mb-6">
            <span><strong>Author:</strong> Ugo Candido</span>
            <span><strong>Reviewed by:</strong> Finance Content Editor</span>
            <span><strong>Last updated:</strong> <time id="lastUpdated"></time></span>
            <span><strong>Category:</strong> Finance → Personal Loans</span>
          </div>

          <div id="calculator-ui" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="currency" class="block text-sm font-medium text-gray-700">Currency</label>
              <select id="currency" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                <option value="USD" selected>USD — US Dollar</option>
                <option value="EUR">EUR — Euro</option>
                <option value="GBP">GBP — British Pound</option>
                <option value="AUD">AUD — Australian Dollar</option>
                <option value="CAD">CAD — Canadian Dollar</option>
              </select>
            </div>

            <div>
              <label for="principal" class="block text-sm font-medium text-gray-700">Loan amount *</label>
              <div class="relative">
                <input id="principal" type="number" inputmode="decimal" min="0" step="0.01" value="10000"
                       class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md pr-12 focus:ring-blue-500 focus:border-blue-500"
                       aria-describedby="principalErr" aria-required="true">
                <span id="principalSymbol" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 font-semibold">$</span>
              </div>
              <p id="principalErr" class="text-xs text-red-600 min-h-[1rem]" role="alert" aria-live="polite"></p>
            </div>

            <div>
              <label for="rate" class="block text-sm font-medium text-gray-700">Annual interest rate (APR) *</label>
              <div class="relative">
                <input id="rate" type="number" inputmode="decimal" min="0" max="1000" step="0.01" value="8"
                       class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md pr-12 focus:ring-blue-500 focus:border-blue-500"
                       aria-describedby="rateErr" aria-required="true">
                <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 font-semibold">%</span>
              </div>
              <p id="rateErr" class="text-xs text-red-600 min-h-[1rem]" role="alert" aria-live="polite"></p>
            </div>

            <div>
              <label for="term" class="block text-sm font-medium text-gray-700">Term *</label>
              <div class="flex gap-3">
                <input id="term" type="number" inputmode="decimal" min="1" step="1" value="36"
                       class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                       aria-describedby="termErr" aria-required="true">
                <select id="termUnit" class="mt-1 w-32 px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                  <option value="months" selected>Months</option>
                  <option value="years">Years</option>
                </select>
              </div>
              <p id="termErr" class="text-xs text-red-600 min-h-[1rem]" role="alert" aria-live="polite"></p>
            </div>

            <div>
              <label for="frequency" class="block text-sm font-medium text-gray-700">Payment frequency *</label>
              <select id="frequency" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                <option value="12" selected>Monthly (12 per year)</option>
                <option value="26">Biweekly (26 per year)</option>
                <option value="52">Weekly (52 per year)</option>
              </select>
              <p id="freqErr" class="text-xs text-red-600 min-h-[1rem]" role="alert" aria-live="polite"></p>
            </div>

            <div>
              <label for="startDate" class="block text-sm font-medium text-gray-700">Start date (optional)</label>
              <input id="startDate" type="date"
                     class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
              <p class="text-xs text-gray-500 mt-1">Used to estimate the payoff date.</p>
            </div>
          </div>

          <div class="mt-6 flex flex-wrap gap-3">
            <button id="calculate" type="button" class="inline-flex items-center justify-center px-5 py-2.5 rounded-md bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
              Calculate
            </button>
            <button id="reset" type="button" class="inline-flex items-center justify-center px-5 py-2.5 rounded-md border border-gray-300 text-gray-700 font-semibold hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
              Reset
            </button>
          </div>

          <div id="results" class="mt-8 bg-blue-50 p-6 rounded-lg">
            <h3 class="text-lg font-semibold text-gray-800 mb-3">Results</h3>
            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
              <div class="border-b pb-3">
                <span class="block text-gray-600">Payment amount</span>
                <span id="paymentValue" class="text-2xl font-extrabold text-blue-700">$0.00</span>
                <span id="paymentsCount" class="block text-sm text-gray-600 mt-1">0 payments</span>
              </div>
              <div class="border-b pb-3">
                <span class="block text-gray-600">Total interest</span>
                <span id="interestValue" class="text-2xl font-extrabold text-green-700">$0.00</span>
              </div>
              <div class="border-b pb-3">
                <span class="block text-gray-600">Total to repay</span>
                <span id="totalValue" class="text-2xl font-extrabold text-gray-800">$0.00</span>
              </div>
              <div>
                <span class="block text-gray-600">Effective term (years)</span>
                <span id="termYearsValue" class="text-xl font-semibold text-gray-800">0.00</span>
              </div>
              <div>
                <span class="block text-gray-600">Interest per year</span>
                <span id="interestPerYear" class="text-xl font-semibold text-gray-800">$0.00</span>
              </div>
              <div>
                <span class="block text-gray-600">Estimated payoff date</span>
                <span id="payoffValue" class="text-xl font-semibold text-gray-800">—</span>
              </div>
            </div>
            <div class="mt-4 space-x-2">
              <span id="pillRate" class="result-pill bg-sky-100 text-sky-800">APR: 0.00%</span>
              <span id="pillTerm" class="result-pill bg-violet-100 text-violet-800">Term: 0 months</span>
              <span id="pillFrequency" class="result-pill bg-amber-100 text-amber-800">Frequency: Monthly</span>
            </div>
          </div>

          <section class="mt-8">
            <div class="flex items-center justify-between mb-3">
              <h2 class="text-xl font-semibold text-gray-800">Payment schedule</h2>
              <button id="toggleSchedule" type="button" class="text-sm font-semibold text-blue-600 hover:text-blue-700">
                Show full schedule
              </button>
            </div>
            <div class="overflow-auto border border-gray-200 rounded-lg">
              <table class="min-w-full text-sm">
                <caption class="sr-only">Simple-interest payment breakdown for each period</caption>
                <thead class="bg-slate-100 text-gray-700">
                  <tr>
                    <th class="py-2 px-3 text-left font-semibold">#</th>
                    <th class="py-2 px-3 text-left font-semibold">Date</th>
                    <th class="py-2 px-3 text-right font-semibold">Payment</th>
                    <th class="py-2 px-3 text-right font-semibold">Principal</th>
                    <th class="py-2 px-3 text-right font-semibold">Interest</th>
                    <th class="py-2 px-3 text-right font-semibold">Balance</th>
                  </tr>
                </thead>
                <tbody id="scheduleBody">
                  <tr>
                    <td colspan="6" class="py-6 px-3 text-center text-gray-500">Enter loan details to generate the schedule.</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>
        </section>

        <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
          <h2>Data Source and Methodology</h2>
          <p>Calculations follow the Consumer Financial Protection Bureau&apos;s definition of simple interest: \( I = P \times r \times t \), where \(P\) is principal, \(r\) is the annual nominal rate, and \(t\) is the term in years. The calculator divides total principal and interest evenly across the number of payments determined by your selected frequency. No compounding, fees, or penalty charges are added.</p>

          <h2>Formulas Used</h2>
          <div class="formula-box">
            <p><strong>Total interest:</strong> \( I = P \times r \times t \)</p>
            <p><strong>Number of payments:</strong> \( n = f \times t \) where \(f\) is payments per year.</p>
            <p><strong>Per-payment amount:</strong> \( \text{Payment} = \dfrac{P + I}{n} \)</p>
            <p><strong>Per-payment split:</strong> \( \Delta P = \dfrac{P}{n},\; \Delta I = \dfrac{I}{n} \)</p>
            <p><strong>Total repaid:</strong> \( \text{Total} = P + I \)</p>
          </div>

          <h2>Worked Example</h2>
          <p>Consider a $10,000 loan at 8% simple interest for 3 years with monthly payments.</p>
          <ol>
            <li>Convert the term: \( t = 3 \) years, payments per year \( f = 12 \) ⇒ \( n = 36 \) payments.</li>
            <li>Total interest: \( I = 10{,}000 \times 0.08 \times 3 = 2{,}400 \).</li>
            <li>Total to repay: \( P + I = 12{,}400 \).</li>
            <li>Monthly payment: \( 12{,}400 / 36 ≈ 344.44 \).</li>
            <li>Each payment includes \( 10{,}000 / 36 ≈ 277.78 \) principal and \( 2{,}400 / 36 ≈ 66.67 \) interest. The final payment adjusts by a few cents to match rounding.</li>
          </ol>

          <h2>Frequently Asked Questions</h2>
          <h3>Why doesn’t the interest change with payment frequency?</h3>
          <p>Simple interest grows linearly with time. Paying weekly or biweekly simply divides the fixed total interest into smaller pieces, while the sum stays the same.</p>
          <h3>How accurate is the payoff date?</h3>
          <p>The payoff date assumes payments are made at consistent intervals with no delays. Lender rounding, holidays, or grace periods can shift it slightly.</p>
          <h3>Can I include fees or taxes?</h3>
          <p>This tool focuses on principal and stated APR. To add fees, increase the loan amount or adjust the APR to reflect the true cost.</p>
        </article>

      </section>

      <!-- Sidebar -->
      <aside class="w-full lg:w-1/3">
        <div class="sticky top-24">
          <div class="bg-gray-200 rounded-lg mb-6 flex items-center justify-center sticky-ad">
            <p class="text-gray-500">Sticky Ad Unit (300×600)</p>
          </div>

          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-4">Related personal loan tools</h3>
            <ul class="space-y-3">
              <li><a class="text-blue-600 hover:underline" href="personal-loan.html">Personal Loan Calculator</a></li>
              <li><a class="text-blue-600 hover:underline" href="loan-amortization.html">Loan Amortization Schedule</a></li>
              <li><a class="text-blue-600 hover:underline" href="loan-prepayment.html">Loan Prepayment Calculator</a></li>
              <li><a class="text-blue-600 hover:underline" href="simple-interest.html">Simple Interest Calculator</a></li>
            </ul>
          </div>
        </div>
      </aside>

    </div>
  </main>

  <footer class="bg-white border-t mt-12">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
    </div>
  </footer>

  <!-- Calculator logic -->
  <script>
    const $ = (id) => document.getElementById(id);

    const els = {
      currency: $('currency'),
      principal: $('principal'),
      rate: $('rate'),
      term: $('term'),
      termUnit: $('termUnit'),
      frequency: $('frequency'),
      startDate: $('startDate'),
      principalErr: $('principalErr'),
      rateErr: $('rateErr'),
      termErr: $('termErr'),
      freqErr: $('freqErr'),
      paymentValue: $('paymentValue'),
      paymentsCount: $('paymentsCount'),
      interestValue: $('interestValue'),
      totalValue: $('totalValue'),
      termYearsValue: $('termYearsValue'),
      interestPerYear: $('interestPerYear'),
      payoffValue: $('payoffValue'),
      pillRate: $('pillRate'),
      pillTerm: $('pillTerm'),
      pillFrequency: $('pillFrequency'),
      principalSymbol: $('principalSymbol'),
      toggleSchedule: $('toggleSchedule'),
      scheduleBody: $('scheduleBody'),
      calculate: $('calculate'),
      reset: $('reset'),
      lastUpdated: $('lastUpdated'),
      ui: $('calculator-ui')
    };

    const CURRENCY_SYMBOL = {
      USD: '$', EUR: '€', GBP: '£', AUD: 'A$', CAD: 'C$'
    };

    const FREQ_LABEL = {
      12: 'Monthly',
      26: 'Biweekly',
      52: 'Weekly'
    };

    const UNIT_TO_YEARS = {
      years: 1,
      months: 1 / 12
    };

    let fullSchedule = [];
    let showFullSchedule = false;

    function fmtCurrency(value, code) {
      const opts = { style: 'currency', currency: code, maximumFractionDigits: 2 };
      try {
        return new Intl.NumberFormat('en-US', opts).format(value);
      } catch {
        const sym = CURRENCY_SYMBOL[code] || '$';
        return sym + (isFinite(value) ? value.toFixed(2) : '0.00');
      }
    }

    function fmtNumber(value, decimals = 2) {
      return isFinite(value) ? value.toFixed(decimals) : '0.00';
    }

    function updateCurrencySymbol() {
      const sym = CURRENCY_SYMBOL[els.currency.value] || '$';
      els.principalSymbol.textContent = sym;
    }

    function validate(principal, rate, termRaw, freq, termYears) {
      let ok = true;

      if (!(principal > 0)) {
        els.principalErr.textContent = 'Enter a loan amount greater than zero.';
        ok = false;
      } else {
        els.principalErr.textContent = '';
      }

      if (!(rate >= 0)) {
        els.rateErr.textContent = 'Enter a non-negative APR.';
        ok = false;
      } else if (rate > 1000) {
        els.rateErr.textContent = 'APR above 1000% is not supported.';
        ok = false;
      } else {
        els.rateErr.textContent = '';
      }

      if (!(termRaw > 0)) {
        els.termErr.textContent = 'Enter a term greater than zero.';
        ok = false;
      } else if (!(termYears > 0)) {
        els.termErr.textContent = 'Term must convert to more than zero years.';
        ok = false;
      } else {
        els.termErr.textContent = '';
      }

      if (!(freq > 0)) {
        els.freqErr.textContent = 'Choose a valid payment frequency.';
        ok = false;
      } else {
        els.freqErr.textContent = '';
      }

      return ok;
    }

    function parseInputs() {
      const code = els.currency.value;
      const principal = parseFloat(els.principal.value);
      const rate = parseFloat(els.rate.value);
      const termRaw = parseFloat(els.term.value);
      const unit = els.termUnit.value;
      const freq = parseInt(els.frequency.value, 10);
      const startDate = els.startDate.value;
      const termYears = termRaw * (UNIT_TO_YEARS[unit] || 0);

      return { code, principal, rate, termRaw, unit, freq, startDate, termYears };
    }

    function addPeriod(date, freq) {
      const next = new Date(date.getTime());
      if (freq === 12) {
        next.setMonth(next.getMonth() + 1);
      } else if (freq === 26) {
        next.setDate(next.getDate() + 14);
      } else if (freq === 52) {
        next.setDate(next.getDate() + 7);
      }
      return next;
    }

    function formatDate(date) {
      return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
    }

    function buildSchedule(data) {
      const { principal, totalInterest, payment, payments, code, startDate, freq } = data;
      const rows = [];
      if (!(payments > 0)) {
        return rows;
      }

      const principalPortion = principal / payments;
      const interestPortion = totalInterest / payments;
      let cumulativePrincipal = 0;
      let cumulativeInterest = 0;
      let balance = principal;
      let currentDate = startDate;

      for (let i = 1; i <= payments; i += 1) {
        let pPortion = principalPortion;
        let iPortion = interestPortion;

        if (i === payments) {
          pPortion = principal - cumulativePrincipal;
          iPortion = totalInterest - cumulativeInterest;
        }

        cumulativePrincipal += pPortion;
        cumulativeInterest += iPortion;
        balance = Math.max(0, principal - cumulativePrincipal);

        let paymentDate = '—';
        if (currentDate instanceof Date && !Number.isNaN(currentDate.valueOf())) {
          paymentDate = formatDate(currentDate);
          currentDate = addPeriod(currentDate, freq);
        }

        rows.push({
          index: i,
          date: paymentDate,
          payment: fmtCurrency(payment, code),
          principal: fmtCurrency(pPortion, code),
          interest: fmtCurrency(iPortion, code),
          balance: fmtCurrency(balance, code)
        });
      }

      return rows;
    }

    function renderSchedule(rows) {
      const tbody = els.scheduleBody;
      tbody.innerHTML = '';

      if (!rows.length) {
        const tr = document.createElement('tr');
        const td = document.createElement('td');
        td.colSpan = 6;
        td.className = 'py-6 px-3 text-center text-gray-500';
        td.textContent = 'Enter loan details to generate the schedule.';
        tr.appendChild(td);
        tbody.appendChild(tr);
        return;
      }

      const limit = showFullSchedule ? rows.length : Math.min(rows.length, 12);
      rows.slice(0, limit).forEach((row) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="py-2 px-3 text-left">${row.index}</td>
          <td class="py-2 px-3 text-left">${row.date}</td>
          <td class="py-2 px-3 text-right">${row.payment}</td>
          <td class="py-2 px-3 text-right">${row.principal}</td>
          <td class="py-2 px-3 text-right">${row.interest}</td>
          <td class="py-2 px-3 text-right">${row.balance}</td>
        `;
        tbody.appendChild(tr);
      });

      if (!showFullSchedule && rows.length > limit) {
        const tr = document.createElement('tr');
        const td = document.createElement('td');
        td.colSpan = 6;
        td.className = 'py-3 px-3 text-center text-gray-500';
        td.textContent = `Showing the first ${limit} of ${rows.length} payments.`;
        tr.appendChild(td);
        tbody.appendChild(tr);
      }
    }

    function compute() {
      const { code, principal, rate, termRaw, unit, freq, startDate, termYears } = parseInputs();
      const valid = validate(principal, rate, termRaw, freq, termYears);
      const unitLabel = unit === 'years' ? 'years' : 'months';
      const freqLabel = FREQ_LABEL[freq] || `${freq} / year`;

      if (!valid) {
        showFullSchedule = false;
        els.toggleSchedule.textContent = 'Show full schedule';
        fullSchedule = [];
        renderSchedule(fullSchedule);
        els.paymentValue.textContent = fmtCurrency(0, code);
        els.paymentsCount.textContent = '0 payments';
        els.interestValue.textContent = fmtCurrency(0, code);
        els.totalValue.textContent = fmtCurrency(0, code);
        els.termYearsValue.textContent = fmtNumber(0);
        els.interestPerYear.textContent = fmtCurrency(0, code);
        els.payoffValue.textContent = '—';
        els.pillRate.textContent = 'APR: 0.00%';
        els.pillTerm.textContent = `Term: 0 ${unitLabel}`;
        els.pillFrequency.textContent = `Frequency: ${freqLabel}`;
        return;
      }

      const rateDecimal = rate / 100;
      const totalInterest = principal * rateDecimal * termYears;
      const paymentsRaw = freq * termYears;
      const payments = Math.max(1, Math.round(paymentsRaw + 1e-6));
      const payment = (principal + totalInterest) / payments;
      const interestPerYear = termYears > 0 ? totalInterest / termYears : 0;

      els.paymentValue.textContent = fmtCurrency(payment, code);
      els.paymentsCount.textContent = `${payments} payments`;
      els.interestValue.textContent = fmtCurrency(totalInterest, code);
      els.totalValue.textContent = fmtCurrency(principal + totalInterest, code);
      els.termYearsValue.textContent = fmtNumber(termYears);
      els.interestPerYear.textContent = fmtCurrency(interestPerYear, code);
      els.pillRate.textContent = `APR: ${fmtNumber(rate)}%`;
      els.pillTerm.textContent = `Term: ${fmtNumber(termRaw)} ${unitLabel}`;
      els.pillFrequency.textContent = `Frequency: ${freqLabel}`;

      let payoffDateText = '—';
      let start = null;
      if (startDate) {
        const firstDate = new Date(startDate);
        if (!Number.isNaN(firstDate.valueOf())) {
          start = new Date(firstDate.getTime());
          let payoffDate = new Date(firstDate.getTime());
          for (let i = 0; i < payments; i += 1) {
            payoffDate = addPeriod(payoffDate, freq);
          }
          payoffDateText = formatDate(payoffDate);
        }
      }
      els.payoffValue.textContent = payoffDateText;

      fullSchedule = buildSchedule({ principal, totalInterest, payment, payments, code, startDate: start, freq });
      els.toggleSchedule.textContent = showFullSchedule ? 'Show first 12 payments' : 'Show full schedule';
      renderSchedule(fullSchedule);
    }

    function resetForm() {
      els.currency.value = 'USD';
      els.principal.value = 10000;
      els.rate.value = 8;
      els.term.value = 36;
      els.termUnit.value = 'months';
      els.frequency.value = '12';
      els.startDate.value = '';
      els.principalErr.textContent = '';
      els.rateErr.textContent = '';
      els.termErr.textContent = '';
      els.freqErr.textContent = '';
      showFullSchedule = false;
      els.toggleSchedule.textContent = 'Show full schedule';
      updateCurrencySymbol();
      compute();
    }

    document.addEventListener('DOMContentLoaded', () => {
      const today = new Date();
      els.lastUpdated.textContent = today.toLocaleDateString('en-GB', { year: 'numeric', month: 'long', day: 'numeric' });

      updateCurrencySymbol();
      compute();

      els.ui.addEventListener('input', (event) => {
        if (event.target === els.currency) {
          updateCurrencySymbol();
        }
        compute();
      });

      els.calculate.addEventListener('click', compute);
      els.reset.addEventListener('click', resetForm);

      els.toggleSchedule.addEventListener('click', () => {
        if (!fullSchedule.length) return;
        showFullSchedule = !showFullSchedule;
        els.toggleSchedule.textContent = showFullSchedule ? 'Show first 12 payments' : 'Show full schedule';
        renderSchedule(fullSchedule);
      });

      const toggle = $('mobile-menu-toggle');
      const menu = $('mobile-menu');
      toggle?.addEventListener('click', () => {
        menu?.classList.toggle('hidden');
      });
    });
  </script>
</body>
</html>

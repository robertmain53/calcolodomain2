<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Regular Polygon Calculator | Math & Geometry (Area, Perimeter, Radius)</title>
  <meta name="description" content="Professional Regular Polygon Calculator: compute area, perimeter, apothem, circumradius, interior & central angles from any one measure (side, radius, apothem, perimeter, or area). Includes clear formulas, glossary, worked example, and FAQs." />
  <link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg" />
  <link rel="shortcut icon" href="https://calcdomain.com/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png" />
  <link rel="manifest" href="https://calcdomain.com/site.webmanifest" />
  <link rel="canonical" href="https://calcdomain.com/regular-polygon-calculator.html" />

  <!-- Tailwind CDN (for speed and compact CSS authoring) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- MathJax for LaTeX rendering -->
  <script defer id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
          integrity="sha256-3R0n9x7e9BqN4PZ07LzvPNgWu1S8M1k5b5lO4pNnGm4=" crossorigin="anonymous"></script>

  <style>
    :root { --focus: #2563eb; }
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; }
    /* Prose helpers */
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: .75rem; }
    .prose h3 { font-size: 1.125rem; font-weight: 700; margin-top: 1.25rem; margin-bottom: .5rem; }
    .prose p { margin-bottom: .75rem; line-height: 1.7; }
    .prose ul, .prose ol { margin: .5rem 0 .75rem 1.25rem; }
    .formula-box {
      background:#f8fafc; border:1px solid #e5e7eb; border-radius:10px; padding:1rem; overflow-x:auto;
      font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    }
    /* Visible focus for a11y */
    :where(a,button,input,select,summary,[role="switch"]) :focus { outline: none; }
    :where(a,button,input,select,summary,[role="switch"]):focus-visible {
      box-shadow: 0 0 0 3px rgba(37,99,235,.5);
      outline: 2px solid var(--focus); outline-offset: 2px;
    }
    /* Inputs and errors */
    .field-error { color: #b91c1c; font-size: .875rem; margin-top: .375rem; }
    .help { color:#475569; font-size:.875rem; }
    /* Prevent CLS in results */
    #results { min-height: 240px; }
    /* Print-friendly main area only */
    @media print {
      header, aside, footer, .no-print { display: none !important; }
      #print-section { display:block !important; }
      body { background: #fff !important; }
    }
    /* Large touch targets */
    .tappable { min-height: 48px; min-width: 48px; }
  </style>

  <!-- Structured Data: WebPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Regular Polygon Calculator",
    "url":"https://calcdomain.com/regular-polygon-calculator.html",
    "inLanguage":"en",
    "description":"Compute area, perimeter, apothem, circumradius, and angles for any regular polygon from one known measure.",
    "author":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"},
    "dateModified":"2025-10-25"
  }
  </script>

  <!-- Structured Data: Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
      {"@type":"ListItem","position":2,"name":"Math","item":"https://calcdomain.com/math.html"},
      {"@type":"ListItem","position":3,"name":"Geometry","item":"https://calcdomain.com/subcategories/geometry.html"},
      {"@type":"ListItem","position":4,"name":"Regular Polygon Calculator","item":"https://calcdomain.com/regular-polygon-calculator.html"}
    ]
  }
  </script>

  <!-- Structured Data: HowTo -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to compute area and perimeter of a regular polygon",
    "description":"Step-by-step method using number of sides and one known measure (side, radius, apothem, perimeter, or area).",
    "step":[
      {"@type":"HowToStep","name":"Set number of sides n","text":"Enter an integer n ≥ 3."},
      {"@type":"HowToStep","name":"Choose a known measure","text":"Pick side length, circumradius, apothem, perimeter, or area."},
      {"@type":"HowToStep","name":"Enter its value","text":"Type a positive value using any unit (results use the same unit)."},
      {"@type":"HowToStep","name":"Read results","text":"The calculator derives all other properties instantly."},
      {"@type":"HowToStep","name":"Adjust & compare","text":"Tweak n or the input to perform what-if comparisons."}
    ]
  }
  </script>
</head>
<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky per specs) -->
  <header class="bg-white border-b">
    <nav class="container mx-auto px-4 lg:px-6 py-4 flex items-center justify-between">
      <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>
      <div class="hidden md:flex items-center gap-6 text-sm">
        <a href="search.html" class="text-gray-700 hover:text-blue-600">Search</a>
        <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
      </div>
      <button id="mobile-menu-toggle" class="md:hidden p-2 tappable" aria-expanded="false" aria-controls="mobile-menu" aria-label="Open menu">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"https://calcdomain.com/></svg>
      </button>
    </nav>
    <div id="mobile-menu" class="md:hidden hidden px-4 pb-4">
      <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Search</a>
      <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
    </div>
  </header>

  <main class="container mx-auto px-4 lg:px-6 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
      <section class="w-full lg:w-2/3">
        <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
          <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
          <a href="math.html" class="hover:text-blue-600">Math</a> &raquo;
          <a href="subcategories/geometry.html" class="hover:text-blue-600">Geometry</a> &raquo;
          <span class="text-gray-900">Regular Polygon Calculator</span>
        </nav>

        <div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
          <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Regular Polygon Calculator</h1>
          <p class="text-gray-700 mb-6">
            Enter the number of sides and <em>any one</em> measure (side, circumradius, apothem, perimeter, or area).
            The calculator instantly derives area, perimeter, apothem, circumradius, and angles. Ideal for engineers,
            architects, surveyors, educators, and students needing precise, unit-consistent geometry.
          </p>

          <!-- Calculator UI -->
          <section id="calculator-ui" class="space-y-6" aria-label="Regular polygon inputs">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- n (number of sides) -->
              <div>
                <label for="sides" class="block text-sm font-medium text-gray-800">Number of sides (n) <span class="text-red-600">*</span></label>
                <div class="flex items-start gap-2">
                  <input type="number" id="sides" inputmode="numeric" min="3" step="1" value="6"
                         aria-required="true" aria-describedby="sides-help sides-error"
                         class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"
                         />
                  <button type="button" class="mt-1 px-2 py-2 rounded-md border text-sm tappable"
                          aria-expanded="false" aria-controls="sides-help" data-tooltip>
                    ?
                  </button>
                </div>
                <p id="sides-help" class="help mt-1">Enter an integer \(\,n \ge 3\,\). Triangles \(n=3\), squares \(n=4\), pentagons \(n=5\), etc.</p>
                <p id="sides-error" class="field-error hidden" role="alert"></p>
              </div>

              <!-- Known measure selector -->
              <div>
                <label for="knownType" class="block text-sm font-medium text-gray-800">Known measure <span class="text-red-600">*</span></label>
                <div class="flex items-start gap-2">
                  <select id="knownType" aria-required="true" aria-describedby="knownType-help knownType-error"
                          class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500">
                    <option value="side" selected>Side length (a)</option>
                    <option value="R">Circumradius (R)</option>
                    <option value="r">Apothem (r)</option>
                    <option value="P">Perimeter (P)</option>
                    <option value="A">Area (A)</option>
                  </select>
                  <button type="button" class="mt-1 px-2 py-2 rounded-md border text-sm tappable"
                          aria-expanded="false" aria-controls="knownType-help" data-tooltip>?</button>
                </div>
                <p id="knownType-help" class="help mt-1">Choose which quantity you know. Units are free—results use the same unit consistently.</p>
                <p id="knownType-error" class="field-error hidden" role="alert"></p>
              </div>

              <!-- Known value -->
              <div class="md:col-span-2">
                <label for="knownValue" class="block text-sm font-medium text-gray-800">
                  Value of the chosen measure <span class="text-red-600">*</span>
                </label>
                <div class="flex items-start gap-2">
                  <input type="number" id="knownValue" inputmode="decimal" step="any" min="0" value="2"
                         aria-required="true" aria-describedby="knownValue-help knownValue-error"
                         class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500" />
                  <button type="button" class="mt-1 px-2 py-2 rounded-md border text-sm tappable"
                          aria-expanded="false" aria-controls="knownValue-help" data-tooltip>?</button>
                </div>
                <p id="knownValue-help" class="help mt-1">Provide a positive number. For area, use square units; other inputs use linear units.</p>
                <p id="knownValue-error" class="field-error hidden" role="alert"></p>
              </div>
            </div>

            <!-- Live preview -->
            <div class="bg-slate-50 border border-slate-200 rounded-lg p-4">
              <div class="flex items-center justify-between mb-2">
                <h3 class="font-semibold text-gray-800">Preview</h3>
                <div class="flex items-center gap-3 text-sm text-gray-600 no-print">
                  <label class="flex items-center gap-2">
                    <input id="show-diagonals" type="checkbox" class="rounded border-gray-300 tappable" />
                    <span>Show diagonals</span>
                  </label>
                </div>
              </div>
              <div class="w-full rounded-lg bg-white border">
                <svg id="poly-svg" viewBox="0 0 320 320" role="img" aria-label="Regular polygon preview"
                     class="w-full h-64">
                  <!-- dynamic content -->
                </svg>
              </div>
            </div>
          </section>

          <!-- Results -->
          <section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6" aria-live="polite">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
              <div class="bg-white border rounded-lg p-4 text-center">
                <h4 class="text-sm text-gray-600">Perimeter (P)</h4>
                <p id="out-P" class="text-2xl font-bold text-blue-700">—</p>
              </div>
              <div class="bg-white border rounded-lg p-4 text-center">
                <h4 class="text-sm text-gray-600">Area (A)</h4>
                <p id="out-A" class="text-2xl font-bold text-blue-700">—</p>
              </div>
              <div class="bg-white border rounded-lg p-4 text-center">
                <h4 class="text-sm text-gray-600">Side (a)</h4>
                <p id="out-a" class="text-2xl font-bold text-blue-700">—</p>
              </div>
              <div class="bg-white border rounded-lg p-4 text-center">
                <h4 class="text-sm text-gray-600">Circumradius (R)</h4>
                <p id="out-R" class="text-2xl font-bold text-blue-700">—</p>
              </div>
              <div class="bg-white border rounded-lg p-4 text-center">
                <h4 class="text-sm text-gray-600">Apothem (r)</h4>
                <p id="out-r" class="text-2xl font-bold text-blue-700">—</p>
              </div>
              <div class="bg-white border rounded-lg p-4 text-center">
                <h4 class="text-sm text-gray-600">Interior angle (°)</h4>
                <p id="out-int" class="text-2xl font-bold text-blue-700">—</p>
              </div>
              <div class="bg-white border rounded-lg p-4 text-center">
                <h4 class="text-sm text-gray-600">Central angle (°)</h4>
                <p id="out-cent" class="text-2xl font-bold text-blue-700">—</p>
              </div>
              <div class="bg-white border rounded-lg p-4 text-center">
                <h4 class="text-sm text-gray-600">Diagonals (count)</h4>
                <p id="out-diag" class="text-2xl font-bold text-blue-700">—</p>
              </div>
              <div class="bg-white border rounded-lg p-4 text-center">
                <h4 class="text-sm text-gray-600">Circumference ratio (P / 2πR)</h4>
                <p id="out-ratio" class="text-2xl font-bold text-blue-700">—</p>
              </div>
            </div>
          </section>

          <!-- Authoritative content -->
          <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
            <h2 id="data-source">Authoritative Data Source & Methodology</h2>
            <p>
              Primary reference: <strong>Weisstein, Eric W. “Regular Polygon.”</strong> MathWorld—A Wolfram Web Resource.
              Available at the Wolfram Research domain. All formulas herein match the standard identities for regular polygons
              (area, perimeter, apothem, circumradius, and angular measures).
              <br><em>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</em>
            </p>

            <h2 id="formula">The Formula Explained</h2>
            <div class="formula-box">
              For a regular \(n\)-gon with side \(a\), circumradius \(R\), apothem \(r\), perimeter \(P\), area \(A\):<br><br>
              \( \displaystyle \theta_c = \frac{2\pi}{n}, \quad \theta_i = \pi - \frac{2\pi}{n} \)<br>
              \( \displaystyle R = \frac{a}{2\sin(\pi/n)}, \qquad r = \frac{a}{2\tan(\pi/n)} \)<br>
              \( \displaystyle P = n\,a \)<br>
              \( \displaystyle A = \frac{1}{4} n a^{2}\cot\!\left(\frac{\pi}{n}\right) = \tfrac{1}{2} P r = \tfrac{1}{2} n R^{2}\sin\!\left(\frac{2\pi}{n}\right) \)
            </div>

            <h2 id="glossary">Glossary of Variables</h2>
            <ul>
              <li><strong>n</strong>: number of sides (integer, \(n \ge 3\)).</li>
              <li><strong>a</strong>: side length (any linear unit).</li>
              <li><strong>R</strong>: circumradius, distance from center to vertices.</li>
              <li><strong>r</strong>: apothem, distance from center to side midpoints.</li>
              <li><strong>P</strong>: perimeter, total boundary length \(P = n a\).</li>
              <li><strong>A</strong>: area enclosed by the polygon.</li>
              <li><strong>\(\theta_c\)</strong>: central angle, \(2\pi/n\) (in radians).</li>
              <li><strong>\(\theta_i\)</strong>: interior angle, \(\pi - 2\pi/n\) (in radians).</li>
            </ul>

            <h2 id="example">How It Works: A Step-by-Step Example</h2>
            <p><strong>Goal:</strong> A regular decagon (\(n=10\)) with side \(a=2\) cm. Find \(A, P, r, R\).</p>
            <ol>
              <li>Perimeter \(P = n a = 10 \times 2 = 20\) cm.</li>
              <li>Apothem \(r = a/(2\tan(\pi/n)) = 2 / [2\tan(\pi/10)] \approx 3.078\) cm.</li>
              <li>Area \(A = \tfrac{1}{2} P r \approx 0.5 \times 20 \times 3.078 \approx 30.78\) cm².</li>
              <li>Circumradius \(R = a/(2\sin(\pi/10)) \approx 3.236\) cm.</li>
            </ol>
            <p>Angles: interior \(\theta_i = (n-2)\pi/n = 144^\circ\); central \(\theta_c = 36^\circ\).</p>

            <h2 id="faq">Frequently Asked Questions</h2>
            <details>
              <summary>Which inputs can I use?</summary>
              <p>Enter \(n\) and exactly one of: side \(a\), circumradius \(R\), apothem \(r\), perimeter \(P\), or area \(A\). The tool derives the rest.</p>
            </details>
            <details>
              <summary>Do units matter?</summary>
              <p>Yes—results inherit your unit. If you input meters, perimeter is in meters and area in square meters.</p>
            </details>
            <details>
              <summary>What is the difference between \(R\) and \(r\)?</summary>
              <p>\(R\) goes to vertices (outer “circumcircle”), \(r\) goes to side midpoints (inner “incircle”).</p>
            </details>
            <details>
              <summary>How many diagonals does an \(n\)-gon have?</summary>
              <p>\(\dfrac{n(n-3)}{2}\).</p>
            </details>
            <details>
              <summary>Why might my area look off?</summary>
              <p>Check that your \(n\) is correct (integer ≥ 3) and that the input is positive. Remember area scales with the square of linear dimensions.</p>
            </details>
            <details>
              <summary>Can I use very large \(n\)?</summary>
              <p>Yes. As \(n \to \infty\), a regular \(n\)-gon approaches a circle; the ratio \(P/(2\pi R)\) tends to 1.</p>
            </details>

            <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700">
              <p><strong>Tool developed by Ugo Candido.</strong> Content reviewed by the CalcDomain Editorial Board.<br>
                Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
            </div>
          </article>
        </div>
      </section>

      <aside class="w-full lg:w-1/3">
        <div class="sticky top-6 space-y-6">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-3">Why this calculator</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
              <li>Accepts any one measure and derives all others—fast.</li>
              <li>Accessible UI with inline validation and tooltips.</li>
              <li>Professional formulas, glossary, worked example, and preview.</li>
            </ul>
          </div>
          <div class="bg-gray-200 h-64 rounded-lg flex items-center justify-center text-gray-600">
            Ad Placement (300×250)
          </div>
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-4">Related geometry tools</h3>
            <ul class="space-y-2 text-sm">
              <li><a href="circle-calculator.html" class="text-blue-600 hover:underline">Circle Calculator</a></li>
              <li><a href="triangle-calculator.html" class="text-blue-600 hover:underline">Triangle Solver</a></li>
              <li><a href="regular-ngon-inscribed-circle.html" class="text-blue-600 hover:underline">Inscribed/Circumscribed Circle</a></li>
            </ul>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-4 space-x-4">
        <a href="about.html" class="hover:text-blue-600">About</a>
        <a href="contact.html" class="hover:text-blue-600">Contact</a>
        <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
        <a href="terms.html" class="hover:text-blue-600">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator logic (defer by placing before </body>) -->
  <script>
  (function () {
    const $ = (id) => document.getElementById(id);
    const el = {
      sides: $('sides'),
      knownType: $('knownType'),
      knownValue: $('knownValue'),
      errSides: $('sides-error'),
      errKnownType: $('knownType-error'),
      errKnownValue: $('knownValue-error'),
      svg: $('poly-svg'),
      showDiagonals: $('show-diagonals'),
      out: {
        P: $('out-P'), A: $('out-A'), a: $('out-a'), R: $('out-R'), r: $('out-r'),
        int: $('out-int'), cent: $('out-cent'), diag: $('out-diag'), ratio: $('out-ratio')
      }
    };

    // Mobile menu
    const menuBtn = document.getElementById('mobile-menu-toggle');
    const menu = document.getElementById('mobile-menu');
    if (menuBtn && menu) {
      menuBtn.addEventListener('click', () => {
        const open = menu.classList.toggle('hidden') ? false : true;
        menuBtn.setAttribute('aria-expanded', String(open));
      });
    }

    // Accessible tooltips (toggle show/hide of helper text)
    document.querySelectorAll('[data-tooltip]').forEach(btn => {
      btn.addEventListener('click', () => {
        const id = btn.getAttribute('aria-controls');
        const tgt = document.getElementById(id);
        const now = tgt && tgt.classList.toggle('hidden');
        btn.setAttribute('aria-expanded', String(!(now)));
      });
    });

    // Formatters
    const nf = new Intl.NumberFormat(undefined, { maximumFractionDigits: 10 });
    const angleFmt = (deg) => new Intl.NumberFormat(undefined, { maximumFractionDigits: 6 }).format(deg);
    const safeNum = (v) => Number.isFinite(v) ? v : NaN;

    // Validation (on blur)
    function validateSides() {
      const n = parseInt(el.sides.value, 10);
      let msg = '';
      if (!Number.isInteger(n)) msg = 'Please enter an integer number of sides.';
      else if (n < 3) msg = 'Number of sides must be at least 3.';
      else if (n > 1000000) msg = 'Number of sides is too large (≤ 1,000,000).';
      setFieldState(el.sides, el.errSides, msg);
      return !msg;
    }
    function validateKnownType() {
      const ok = ['side','R','r','P','A'].includes(el.knownType.value);
      setFieldState(el.knownType, el.errKnownType, ok ? '' : 'Please choose a valid measure.');
      return ok;
    }
    function validateKnownValue() {
      const v = parseFloat(el.knownValue.value);
      let msg = '';
      if (!Number.isFinite(v)) msg = 'Please enter a number.';
      else if (v <= 0) msg = 'Value must be greater than 0.';
      else if (el.knownType.value === 'A' && v > 1e24) msg = 'Area is unrealistically large.';
      else if (el.knownType.value !== 'A' && v > 1e12) msg = 'Value is unrealistically large.';
      setFieldState(el.knownValue, el.errKnownValue, msg);
      return !msg;
    }
    function setFieldState(input, errEl, msg) {
      if (msg) {
        errEl.textContent = msg;
        errEl.classList.remove('hidden');
        input.setAttribute('aria-invalid','true');
        input.setAttribute('aria-describedby', (input.getAttribute('aria-describedby')||'') + ' ' + errEl.id);
      } else {
        errEl.textContent = '';
        errEl.classList.add('hidden');
        input.removeAttribute('aria-invalid');
      }
    }
    ['blur','change'].forEach(evt => {
      el.sides.addEventListener(evt, validateSides);
      el.knownType.addEventListener(evt, validateKnownType);
      el.knownValue.addEventListener(evt, validateKnownValue);
    });

    // Compute everything from (n, one known)
    function computeAll() {
      const n = parseInt(el.sides.value, 10);
      const type = el.knownType.value;
      const val = parseFloat(el.knownValue.value);

      if (!validateSides() | !validateKnownType() | !validateKnownValue()) {
        renderOutputs(null); drawPolygon(n, NaN, false); return;
      }

      const pi = Math.PI;
      const sin = Math.sin, cos = Math.cos, tan = Math.tan;
      const ang = pi / n;

      let a, R, r, P, A;

      if (type === 'side') {
        a = val;
        R = a / (2 * sin(ang));
        r = a / (2 * tan(ang));
        P = n * a;
        A = 0.25 * n * a * a / tan(ang); // since cot = 1/tan
      } else if (type === 'R') {
        R = val;
        a = 2 * R * sin(ang);
        r = R * cos(ang);
        P = n * a;
        A = 0.5 * n * R * R * Math.sin(2 * ang);
      } else if (type === 'r') {
        r = val;
        a = 2 * r * tan(ang);
        R = r / cos(ang);
        P = n * a;
        A = 0.5 * P * r;
      } else if (type === 'P') {
        P = val;
        a = P / n;
        R = a / (2 * sin(ang));
        r = a / (2 * tan(ang));
        A = 0.5 * P * r;
      } else { // 'A'
        A = val;
        a = 2 * Math.sqrt( (A * Math.tan(ang)) / n ); // a = 2*sqrt(A * tan(pi/n) / n)
        R = a / (2 * sin(ang));
        r = a / (2 * tan(ang));
        P = n * a;
      }

      const interiorDeg = (n - 2) * 180 / n;
      const centralDeg  = 360 / n;
      const diagonals = n * (n - 3) / 2;
      const ratio = P / (2 * Math.PI * R);

      renderOutputs({P,A,a,R,r,interiorDeg,centralDeg,diagonals,ratio});
      drawPolygon(n, R, el.showDiagonals.checked);
    }

    // Results renderer
    function renderOutputs(o) {
      const dash = '—';
      if (!o) {
        el.out.P.textContent = dash; el.out.A.textContent = dash; el.out.a.textContent = dash;
        el.out.R.textContent = dash; el.out.r.textContent = dash; el.out.int.textContent = dash;
        el.out.cent.textContent = dash; el.out.diag.textContent = dash; el.out.ratio.textContent = dash;
        return;
      }
      el.out.P.textContent = nf.format(o.P);
      el.out.A.textContent = nf.format(o.A);
      el.out.a.textContent = nf.format(o.a);
      el.out.R.textContent = nf.format(o.R);
      el.out.r.textContent = nf.format(o.r);
      el.out.int.textContent = angleFmt(o.interiorDeg);
      el.out.cent.textContent = angleFmt(o.centralDeg);
      el.out.diag.textContent = nf.format(o.diagonals);
      el.out.ratio.textContent = nf.format(o.ratio);
    }

    // SVG polygon preview
    function drawPolygon(n, R, showDiagonals) {
      const svg = el.svg;
      while (svg.firstChild) svg.removeChild(svg.firstChild);
      if (!(Number.isInteger(n) && n >= 3) || !Number.isFinite(R) || R <= 0) return;

      const W = 320, H = 320, cx = W/2, cy = H/2;
      const pad = 16;
      const scale = (Math.min(W, H)/2 - pad) / R;
      const pts = [];
      for (let k=0; k<n; k++) {
        const t = -Math.PI/2 + 2*Math.PI*k/n; // start at top, go clockwise
        const x = cx + (R*scale)*Math.cos(t);
        const y = cy + (R*scale)*Math.sin(t);
        pts.push([x,y]);
      }

      // Diagonals (optional)
      if (showDiagonals && n <= 60) { // cap for performance
        const g = document.createElementNS('http://www.w3.org/2000/svg','g');
        g.setAttribute('stroke','#cbd5e1'); g.setAttribute('stroke-width','0.7');
        for (let i=0;i<n;i++){
          for (let j=i+1;j<n;j++){
            if (Math.abs(i-j) !== 1 && Math.abs(i-j) !== n-1) {
              const line = document.createElementNS('http://www.w3.org/2000/svg','line');
              line.setAttribute('x1', pts[i][0]); line.setAttribute('y1', pts[i][1]);
              line.setAttribute('x2', pts[j][0]); line.setAttribute('y2', pts[j][1]);
              g.appendChild(line);
            }
          }
        }
        svg.appendChild(g);
      }

      // Polygon
      const poly = document.createElementNS('http://www.w3.org/2000/svg','polygon');
      poly.setAttribute('points', pts.map(p=>p.join(',')).join(' '));
      poly.setAttribute('fill','#dbeafe');
      poly.setAttribute('stroke','#1d4ed8');
      poly.setAttribute('stroke-width','2');
      svg.appendChild(poly);

      // Center point
      const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
      c.setAttribute('cx', cx); c.setAttribute('cy', cy); c.setAttribute('r', '2.5'); c.setAttribute('fill','#0f172a');
      svg.appendChild(c);
    }

    // Reactivity
    ['input','change'].forEach(evt => {
      el.sides.addEventListener(evt, computeAll);
      el.knownType.addEventListener(evt, computeAll);
      el.knownValue.addEventListener(evt, computeAll);
      el.showDiagonals.addEventListener(evt, computeAll);
    });

    // Initial render
    computeAll();
  })();
  </script>
</body>
</html>

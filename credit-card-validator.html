<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg" />
<link rel="shortcut icon" href="https://calcdomain.com/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png" />
<link rel="manifest" href="https://calcdomain.com/site.webmanifest" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Credit Card Validator - Instantly Check Card Number Validity (Luhn Check)</title>
<meta name="description" content="Instantly validate any credit card number using the Luhn algorithm. Our secure, free tool checks number format, checksum, and identifies the card type (Visa, Mastercard, Amex, etc.).">
<link rel="canonical" href="https://calcdomain.com/credit-card-validator.html"https://calcdomain.com/>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.5rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
.formula-box ol { list-style-type: decimal; margin-left: 1.5rem; }
.formula-box li { margin-bottom: 0.75rem; }
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
/* Custom focus state for WCAG compliance */
:focus-visible {
outline: 3px solid #3b82f6;
outline-offset: 2px;
border-radius: 4px;
}
input:focus-visible {
border-color: #3b82f6 !important;
box-shadow: 0 0 0 2px #3b82f6 !important;
}
/* Ensure touch targets are large enough */
.input, .button {
min-height: 48px;
min-width: 48px;
}
/* Style for the results box */
#results {
min-height: 120px; /* Prevents CLS */
transition: background-color 0.3s ease, border-color 0.3s ease;
}
.icon-svg {
width: 3rem;
height: 3rem;
}
.card-brand-svg {
width: 48px;
height: 32px;
}
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Credit Card Validator",
  "description": "Instantly validate any credit card number using the Luhn algorithm. Our secure, free tool checks number format, checksum, and identifies the card type (Visa, Mastercard, Amex, etc.).",
  "url": "https://calcdomain.com/credit-card-validator.html",
  "inLanguage": "en",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
    { "@type": "ListItem", "position": 2, "name": "Lifestyle Everyday", "item": "https://calcdomain.com/lifestyle-everyday.html" },
    { "@type": "ListItem", "position": 3, "name": "Miscellaneous", "item": "https://calcdomain.com/subcategories/miscellaneous.html" },
    { "@type": "ListItem", "position": 4, "name": "Credit Card Validator", "item": "https://calcdomain.com/credit-card-validator.html" }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Validate a Credit Card Number",
  "description": "A step-by-step guide to checking if a credit card number is mathematically valid using the Luhn algorithm.",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Enter Card Number",
      "text": "Type or paste the full 13 to 19-digit number into the input field. Do not include spaces or dashes, and never enter your CVV or expiration date."
    },
    {
      "@type": "HowToStep",
      "name": "Review Validation Status",
      "text": "The tool instantly checks the number against the Luhn algorithm checksum. The result box will update in real-time to show 'Valid' or 'Invalid'."
    },
    {
      "@type": "HowToStep",
      "name": "Identify Card Type",
      "text": "If the number is valid and its prefix is recognized, the tool will also display the card brand, such as Visa, Mastercard, or American Express."
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Is this credit card validator tool safe to use?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. This tool is 100% safe. All validation logic runs directly in your web browser (client-side). We do not see, store, or transmit your credit card number to any server. It only performs a mathematical check and does not connect to any bank or payment network."
      }
    },
    {
      "@type": "Question",
      "name": "Can this tool check if a card has money or is active?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No. This tool only performs a mathematical check called the Luhn algorithm. It confirms that the number is formatted correctly, but it cannot check for available funds, if the card is active, or if it has been reported stolen. Only a payment processor can do that."
      }
    },
    {
      "@type": "Question",
      "name": "What is the Luhn algorithm (Mod 10 check)?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The Luhn algorithm is a simple checksum formula used to validate a variety of identification numbers, including credit card numbers. It was designed to protect against accidental errors, like typos, during manual data entry. It is not a security feature."
      }
    },
    {
      "@type": "Question",
      "name": "Why would a 'Valid' card number be declined?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A card number can be 'Valid' according to the Luhn algorithm but still be declined for many reasons, including: insufficient funds, an incorrect expiration date or CVV, the card is expired, the card has been reported lost or stolen, or the bank's fraud detection system has blocked the transaction."
      }
    },
    {
      "@type": "Question",
      "name": "Why don't you ask for the CVV or expiration date?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "You should NEVER enter your CVV, PIN, or expiration date into any online tool that isn't a secure, trusted payment gateway. These details are not needed for Luhn validation, and asking for them is a major security risk."
      }
    }
  ]
}
</script>
<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..."
class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
<a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="lifestyle-everyday.html" class="hover:text-blue-600">Lifestyle Everyday</a> &raquo;
<a href="subcategories/miscellaneous.html" class="hover:text-blue-600">Miscellaneous</a> &raquo;
<span class="text-gray-900">Credit Card Validator</span>
</nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Credit Card Validator</h1>
<p class="text-gray-600 mb-6">Our free, secure tool instantly checks if a credit card number is valid by performing a mathematical check using the Luhn algorithm. It also identifies the card brand. <strong class="text-gray-800">We do not store or transmit your data.</strong> This tool is for validation and testing purposes only and does not check if the card is active or has funds.</p>

<section id="calculator-ui" class="space-y-6" aria-labelledby="calculator-heading">
<h2 id="calculator-heading" class="sr-only">Validation Tool</h2>
<div>
<label for="cc-number" class="block text-sm font-medium text-gray-700 mb-1">
Credit Card Number <span class="text-red-600" aria-hidden="true">*</span>
</label>
<div class="relative">
<input type="text" id="cc-number"
class="input mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-lg"
placeholder="Enter 13 to 19 digits"
inputmode="numeric"
pattern="[\d]{13,19}"
autocomplete="cc-number"
aria-required="true"
aria-describedby="cc-error">
<button type="button" id="clear-btn" class="button absolute inset-y-0 right-0 px-4 flex items-center text-gray-500 hover:text-gray-700" aria-label="Clear input">
<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
</button>
</div>
<div id="cc-error" class="text-red-600 text-sm mt-1" aria-live="polite"></div>
</div>
</section>

<section id="results-container" class="mt-8" aria-labelledby="results-heading">
<h2 id="results-heading" class.="sr-only">Validation Results</h2>
<div id="results" class="bg-gray-50 border border-gray-200 rounded-lg p-6 flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0 md:space-x-6">
<div class="flex items-center space-x-4">
<div id="result-icon" class="flex-shrink-0">
<svg class="icon-svg text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
</div>
<div>
<h3 id="result-status" class="text-xl font-bold text-gray-700">Awaiting Input</h3>
<p id="result-message" class="text-gray-600">Enter a card number to begin validation.</p>
</div>
</div>
<div id="result-brand" class="flex-shrink-0">
</div>
</div>
</section>
</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
<section id="methodology">
<h2>Data Source and Methodology</h2>
<p>This tool validates card numbers based on two public standards: the <strong>Luhn Algorithm</strong> (also known as the "modulus 10" or "mod 10" algorithm) for checksum validation, and the <strong>ISO/IEC 7812</strong> standard for identifying the card issuer via the Issuer Identification Number (IIN), which are the first 6-8 digits of the card number.</p>
<p>
<strong>Authoritative Source:</strong> The Luhn algorithm is a public-domain algorithm published by IBM engineer Hans Peter Luhn. The IIN prefixes are managed by the American Bankers Association and standardized under ISO/IEC 7812.
</p>
<p>All calculations are based strictly on the formulas and IIN prefix patterns defined by these public standards. This tool does not use any private databases or payment networks.</p>
</section>

<section id="formula">
<h2>The Formula Explained: Luhn Algorithm</h2>
<p>The Luhn algorithm is a step-by-step process used to create a checksum. This tool reverses that process to validate the number. Here is how it works:</p>
<div class="formula-box">
<ol>
<li>
<strong>Drop the last digit:</strong> The last digit is the "check digit," which we will set aside.
</li>
<li>
<strong>Reverse the remaining digits:</strong> The digits are read from right to left.
</li>
<li>
<strong>Double every second digit:</strong> Starting from the new first digit (the one that was second-to-last), multiply every other digit by 2.
</li>
<li>
<strong>Sum the digits:</strong> If any doubled digit is a two-digit number (e.g., 16), add its individual digits together (e.g., 1 + 6 = 7) before summing. Sum all the digits from this step.
</li>
<li>
<strong>Add the check digit:</strong> Add the original "check digit" (from step 1) to this total sum.
</li>
<li>
<strong>Check for validity:</strong> If the final total sum is perfectly divisible by 10 (i.e., the sum ends in a 0), the number is **valid**.
</li>
</ol>
</div>
</section>

<section id="glossary">
<h2>Glossary of Terms</h2>
<dl class="space-y-4">
<div>
<dt class="font-semibold">Credit Card Number</dt>
<dd class="pl-4 text-gray-700">A 13 to 19-digit number, also known as a Primary Account Number (PAN), that identifies the issuer and the cardholder account.</dd>
</div>
<div>
<dt class="font-semibold">Luhn Algorithm (Mod 10)</dt>
<dd class="pl-4 text-gray-700">A simple checksum formula used to validate identification numbers. It helps protect against accidental errors from manual data entry (typos) but is not a security feature.</dd>
</div>
<div>
<dt class="font-semibold">Issuer Identification Number (IIN)</dt>
<dd class="pl-4 text-gray-700">The first 6 to 8 digits of a card number. It identifies the card issuer (e.g., Visa, Mastercard, American Express) and allows transactions to be routed correctly.</dd>
</div>
<div>
<dt class="font-semibold">Check Digit</dt>
<dd class="pl-4 text-gray-700">The final digit of the card number, calculated using the Luhn algorithm based on the preceding digits.</dd>
</div>
<div>
<dt class="font-semibold">CVV/CVC (Card Verification Value)</dt>
<dd class="pl-4 text-gray-700">The 3 or 4-digit security code (usually on the back) used to verify "card-not-present" transactions. <strong class="text-gray-900">You should never enter this code into any tool except a secure payment form.</strong></dd>
</div>
</dl>
</section>

<section id="example">
<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's validate the test number: <strong>49927398716</strong></p>
<ol class="list-decimal list-outside ml-5 space-y-2">
<li>
<strong>Check Digit:</strong> The check digit is <strong>6</strong>.
</li>
<li>
<strong>Remaining Digits:</strong> 4992739871
</li>
<li>
<strong>Reverse:</strong> 1789372994
</li>
<li>
<strong>Double every second digit:</strong>
<ul class="list-disc list-inside ml-4">
<li>(1) &rarr; <strong>1</strong></li>
<li>(7 * 2) &rarr; <strong>14</strong></li>
<li>(8) &rarr; <strong>8</strong></li>
<li>(9 * 2) &rarr; <strong>18</strong></li>
<li>(3) &rarr; <strong>3</strong></li>
<li>(7 * 2) &rarr; <strong>14</strong></li>
<li>(2) &rarr; <strong>2</strong></li>
<li>(9 * 2) &rarr; <strong>18</strong></li>
<li>(9) &rarr; <strong>9</strong></li>
<li>(4 * 2) &rarr; <strong>8</strong></li>
</ul>
</li>
<li>
<strong>Sum the digits (if > 9, add its digits):</strong>
<br>
<code>1 + (1+4) + 8 + (1+8) + 3 + (1+4) + 2 + (1+8) + 9 + 8</code>
<br>
<code>1 + 5 + 8 + 9 + 3 + 5 + 2 + 9 + 9 + 8 = 64</code>
</li>
<li>
<strong>Add check digit:</strong>
<br>
<code>64 + 6 = 70</code>
</li>
<li>
<strong>Final Check:</strong>
<br>
<code>70 % 10 = 0</code>. Since the result is 0, the number is **Valid**.
</li>
</ol>
</section>

<section id="faq">
<h2>Frequently Asked Questions</h2>
<details>
<summary>Is this credit card validator tool safe to use?</summary>
<p>Yes. This tool is <strong>100% safe</strong>. All validation logic runs directly in your web browser (client-side). We do not see, store, or transmit your credit card number to any server. It only performs a mathematical check and does not connect to any bank or payment network.</p>
</details>
<details>
<summary>Can this tool check if a card has money or is active?</summary>
<p>No. This tool only performs a mathematical check called the Luhn algorithm. It confirms that the number is formatted correctly, but it <strong>cannot</strong> check for available funds, if the card is active, or if it has been reported stolen. Only a payment processor can do that.</p>
</details>
<details>
<summary>What is the Luhn algorithm (Mod 10 check)?</summary>
<p>The Luhn algorithm is a simple checksum formula used to validate a variety of identification numbers, including credit card numbers. It was designed to protect against accidental errors, like typos, during manual data entry. It is not a security feature.</p>
</details>
<details>
<summary>Why would a 'Valid' card number be declined?</summary>
<p>A card number can be 'Valid' according to the Luhn algorithm but still be declined for many reasons, including: insufficient funds, an incorrect expiration date or CVV, the card is expired, the card has been reported lost or stolen, or the bank's fraud detection system has blocked the transaction.</p>
</details>
<details>
<summary>Why don't you ask for the CVV or expiration date?</summary>
<p>You should <strong>NEVER</strong> enter your CVV, PIN, or expiration date into any online tool that isn't a secure, trusted payment gateway. These details are not needed for Luhn validation, and asking for them is a major security risk.</p>
</details>
<details>
<summary>Does this tool generate credit card numbers?</summary>
<p>No. This tool only validates existing numbers. It does not generate or create new credit card numbers.</p>
</details>
<details>
<summary>What do the different card prefixes (IINs) mean?</summary>
<p>The first few digits (IIN) identify the card network. For example:
<ul class="list-disc list-inside ml-4">
<li><strong>4:</strong> Visa</li>
<li><strong>51-55:</strong> Mastercard</li>
<li><strong>34 or 37:</strong> American Express</li>
<li><strong>6011 or 65:</strong> Discover</li>
</ul>
This tool identifies the most common ones.
</p>
</details>
</section>

<div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
<p><strong>Tool developed by Ugo Candido.</strong> Content verified by the CalcDomain Editorial Board.<br>
Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
</div>
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Validator?</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>
<strong>100% Secure:</strong> All checks are done in your browser. No data is sent to our servers.
</li>
<li>
<strong>Instant Feedback:</strong> Get real-time validation as you type.
</li>
<li>
<strong>Developer Tool:</strong> Perfect for testing payment forms and validation logic.
</li>
<li>
<strong>Card Identification:</strong> Automatically detects card type (Visa, Amex, etc.).
</li>
<li>
<strong>Educational:</strong> Learn how the Luhn algorithm works.
</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="iban-validator.html" class="text-blue-600 hover:underline">IBAN Validator</a></li>
<li><a href="password-generator.html" class="text-blue-600 hover:underline">Secure Password Generator</a></li>
<li><a href="vat-calculator.html" class="text-blue-600 hover:underline">VAT Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-white border-t">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="about.html" class="hover:text-blue-600">About</a>
<a href="contact.html" class="hover:text-blue-600">Contact</a>
<a href="privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

// --- DOM Element References ---
const ccNumberInput = document.getElementById('cc-number');
const clearBtn = document.getElementById('clear-btn');
const errorDiv = document.getElementById('cc-error');
const resultsBox = document.getElementById('results');
const resultStatus = document.getElementById('result-status');
const resultMessage = document.getElementById('result-message');
const resultIcon = document.getElementById('result-icon');
const resultBrand = document.getElementById('result-brand');

// --- SVG Icons (Self-Contained) ---
const ICONS = {
  valid: `<svg class="icon-svg text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
  invalid: `<svg class="icon-svg text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
  default: `<svg class="icon-svg text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>`,
  visa: `<svg class="card-brand-svg" viewBox="0 0 750 471" xmlns="http://www.w3.org/2000/svg"><path d="M248.46 469.31h-78.3L93.63 214.38H2.15l-1.9 1.14L.13 469.31h-78.3l133.8-467.1h100.4l92.43 467.1zM486.06 469.31l68.6-467.1h100.4L747.3 214.38h7.82l-1.9 1.14-.12 253.8h-78.3L783.07 2.21h100.4l-66.7 467.1zM601.5 2.21l-90.5 467.1h78.3l90.5-467.1z" fill="#1A1F71"https://calcdomain.com/></svg>`,
  mastercard: `<svg class="card-brand-svg" viewBox="0 0 32 20" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#EB001B"https://calcdomain.com/><circle cx="22" cy="10" r="10" fill="#F79E1B"https://calcdomain.com/><path d="M16 10a10 10 0 01-6-1.67 10 10 0 010 3.34A10 10 0 0016 10z" fill="#FF5F00"https://calcdomain.com/></svg>`,
  amex: `<svg class="card-brand-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect width="96" height="60" x="2" y="20" fill="#006FCF" rx="4"https://calcdomain.com/><text x="50%" y="54%" dominant-baseline="middle" text-anchor="middle" font-size="20" fill="#FFF" font-family="Arial, sans-serif" font-weight="bold">AMEX</text></svg>`,
  discover: `<svg class="card-brand-svg" viewBox="0 0 100 63" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="63" fill="#F79E1B" rx="4"https://calcdomain.com/><circle cx="80" cy="31.5" r="10" fill="#E54D24"https://calcdomain.com/><text x="10" y="38" font-size="20" fill="#FFF" font-family="Arial, sans-serif" font-weight="bold">Discover</text></svg>`,
  diners: `<svg class="card-brand-svg" viewBox="0 0 100 63" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="63" fill="#004A99" rx="4"https://calcdomain.com/><circle cx="50" cy="31.5" r="25" fill="#FFF"https://calcdomain.com/><path d="M50 6.5a25 25 0 00-25 25h50a25 25 0 00-25-25z" fill="#004A99"https://calcdomain.com/></svg>`,
  jcb: `<svg class="card-brand-svg" viewBox="0 0 100 63" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="63" fill="#FFF" rx="4" stroke="#CCC" stroke-width="1"https://calcdomain.com/><rect width="20" height="20" x="15" y="21.5" fill="#D40019"https://calcdomain.com/><rect width="20" height="20" x="40" y="21.5" fill="#009A4D"https://calcdomain.com/><rect width="20" height="20" x="65" y="21.5" fill="#004A99"https://calcdomain.com/></svg>`,
  generic: `<svg class="card-brand-svg" viewBox="0 0 100 63" xmlns="http://www.w3.org/2000/svg"><rect width="98" height="61" x="1" y="1" fill="#DDD" rx="4" stroke="#999" stroke-width="1"https://calcdomain.com/><rect width="98" height="12" x="1" y="10" fill="#999"https://calcdomain.com/></svg>`
};

// --- Card Type Definitions ---
const CARD_TYPES = [
  { name: 'Amex', regex: /^3[47]\d{13}$/, icon: ICONS.amex },
  { name: 'Visa', regex: /^4\d{12}(?:\d{3}|\d{6})?$/, icon: ICONS.visa },
  { name: 'Mastercard', regex: /^5[1-5]\d{14}$/, icon: ICONS.mastercard },
  { name: 'Discover', regex: /^(6011|65\d{2}|64[4-9]\d)\d{12}|(62\d{14})$/, icon: ICONS.discover },
  { name: 'Diners Club', regex: /^3(?:0[0-5]|[68]\d)\d{11}$/, icon: ICONS.diners },
  { name: 'JCB', regex: /^(?:2131|1800|35\d{3})\d{11}$/, icon: ICONS.jcb },
];

// --- Luhn Algorithm Check ---
function luhnCheck(cardNumber) {
  let sum = 0;
  let shouldDouble = false;
  // Iterate from right to left
  for (let i = cardNumber.length - 1; i >= 0; i--) {
    let digit = parseInt(cardNumber.charAt(i), 10);

    if (shouldDouble) {
      digit *= 2;
      if (digit > 9) {
        digit -= 9;
      }
    }
    sum += digit;
    shouldDouble = !shouldDouble;
  }
  return (sum % 10) === 0;
}

// --- Card Type Identification ---
function getCardType(cardNumber) {
  for (const card of CARD_TYPES) {
    if (card.regex.test(cardNumber)) {
      return card;
    }
  }
  return { name: 'Unknown Brand', icon: ICONS.generic };
}

// --- Main Validation Function ---
function validate() {
  const rawValue = ccNumberInput.value;
  const cardNumber = rawValue.replace(/[\s-]/g, ''); // Strip spaces and dashes

  // --- Reset to default state ---
  if (cardNumber.length === 0) {
    updateUI('default', 'Awaiting Input', 'Enter a card number to begin validation.');
    errorDiv.textContent = '';
    ccNumberInput.setAttribute('aria-invalid', 'false');
    return;
  }
  
  // --- Check for non-numeric characters ---
  if (/[^0-9]/.test(cardNumber)) {
    updateUI('invalid', 'Invalid Input', 'Card number can only contain digits.');
    showError('Input must be numeric.');
    return;
  }

  // --- Check length ---
  if (cardNumber.length < 13 || cardNumber.length > 19) {
    updateUI('invalid', 'Invalid Length', 'Card number must be between 13 and 19 digits.');
    showError('Card number must be 13-19 digits.');
    return;
  }
  
  // --- Run Luhn Check ---
  const isValid = luhnCheck(cardNumber);
  const cardType = getCardType(cardNumber);

  if (isValid) {
    updateUI('valid', 'Valid Card Number', `Detected Brand: ${cardType.name}`, cardType.icon);
    clearError();
  } else {
    updateUI('invalid', 'Invalid Card Number', `Luhn check failed. Detected Brand: ${cardType.name}`, cardType.icon);
    showError('This card number failed the Luhn (Mod 10) checksum.');
  }
}

// --- UI Update Helpers ---
function updateUI(state, status, message, brandIcon = '') {
  resultStatus.textContent = status;
  resultMessage.textContent = message;
  resultBrand.innerHTML = brandIcon;

  // Remove old classes
  resultsBox.classList.remove('bg-gray-50', 'border-gray-200', 'bg-green-50', 'border-green-200', 'bg-red-50', 'border-red-200');
  resultStatus.classList.remove('text-gray-700', 'text-green-800', 'text-red-800');
  resultMessage.classList.remove('text-gray-600', 'text-green-700', 'text-red-700');
  
  switch (state) {
    case 'valid':
      resultIcon.innerHTML = ICONS.valid;
      resultsBox.classList.add('bg-green-50', 'border-green-200');
      resultStatus.classList.add('text-green-800');
      resultMessage.classList.add('text-green-700');
      break;
    case 'invalid':
      resultIcon.innerHTML = ICONS.invalid;
      resultsBox.classList.add('bg-red-50', 'border-red-200');
      resultStatus.classList.add('text-red-800');
      resultMessage.classList.add('text-red-700');
      break;
    default:
      resultIcon.innerHTML = ICONS.default;
      resultsBox.classList.add('bg-gray-50', 'border-gray-200');
      resultStatus.classList.add('text-gray-700');
      resultMessage.classList.add('text-gray-600');
  }
}

function showError(message) {
  errorDiv.textContent = message;
  ccNumberInput.setAttribute('aria-invalid', 'true');
  ccNumberInput.classList.add('border-red-500');
  ccNumberInput.classList.remove('border-gray-300');
}

function clearError() {
  errorDiv.textContent = '';
  ccNumberInput.setAttribute('aria-invalid', 'false');
  ccNumberInput.classList.remove('border-red-500');
  ccNumberInput.classList.add('border-gray-300');
}

// --- Event Listeners ---
// Real-time validation on input for instant feedback
ccNumberInput.addEventListener('input', validate);

// Clear button
clearBtn.addEventListener('click', () => {
  ccNumberInput.value = '';
  validate(); // Resets the UI
  ccNumberInput.focus();
});

// Mobile menu toggle logic from template
const menuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
if (menuToggle && mobileMenu) {
  menuToggle.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
    const isExpanded = !mobileMenu.classList.contains('hidden');
    menuToggle.setAttribute('aria-expanded', isExpanded.toString());
    menuToggle.setAttribute('aria-label', isExpanded ? 'Close menu' : 'Open menu');
  });
}
});
</script>
</body>
</html>
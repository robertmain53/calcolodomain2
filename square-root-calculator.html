<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Square Root Calculator — Exact √, Simplified Radical & Decimal</title>
  <meta name="description" content="Professional square root calculator for exact roots, simplified radicals, prime factorization, and high-precision decimals. Includes step-by-step Newton method and nearby perfect squares." />
  <link rel="canonical" href="https://calcdomain.com/square-root-calculator.html" />
  <link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg" />
  <link rel="shortcut icon" href="https://calcdomain.com/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png" />
  <link rel="manifest" href="https://calcdomain.com/site.webmanifest" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="preload" as="style" onload="this.rel='stylesheet'">
  <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"></noscript>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <style>
    :root{
      --brand:#1d4ed8;--ink:#0f172a;--muted:#475569;--surface:#ffffff;--bg:#f8fafc;--ok:#047857;--warn:#b45309;--error:#b91c1c;
      --ring:3px solid #60a5fa;
    }
    html,body{height:100%}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--ink)}
    /* readable prose */
    .prose{max-width:70ch}
    .prose h2{font-size:1.375rem;font-weight:700;margin:.75rem 0}
    .prose h3{font-weight:600;margin:.75rem 0}
    .prose p{line-height:1.65;margin:.75rem 0}
    .prose ul{margin:.5rem 0 1rem 1.25rem}
    .formula-box{background:#f3f4f6;border:1px solid #e5e7eb;border-radius:.75rem;padding:1rem;overflow:auto;font-family:ui-monospace,Menlo,Consolas,monospace}
    /* buttons & inputs */
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;border:1px solid #d1d5db;background:#fff;border-radius:.75rem;padding:.75rem 1rem;font-weight:600}
    .btn-primary{background:var(--brand);border-color:var(--brand);color:#fff}
    .btn:focus{outline:none;box-shadow:0 0 0 4px rgba(37,99,235,.2)}
    .field{display:flex;flex-direction:column;gap:.375rem}
    .input, select{border:1px solid #cbd5e1;border-radius:.75rem;padding:.7rem .9rem;min-height:48px;background:#fff}
    .input:focus, select:focus{outline:none;border-color:#60a5fa;box-shadow:0 0 0 4px rgba(96,165,250,.25)}
    label .req{color:var(--brand);margin-left:.125rem}
    .hint{color:#64748b;font-size:.875rem}
    .error{color:var(--error);font-size:.875rem}
    .tooltip-panel{display:none;margin-top:.25rem;border:1px dashed #cbd5e1;border-radius:.5rem;padding:.5rem;background:#fff}
    .tooltip[aria-expanded="true"]+.tooltip-panel{display:block}
    /* cards */
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:1rem;padding:1rem}
    .kpi{display:flex;flex-direction:column;gap:.25rem;text-align:center}
    .kpi h4{color:#475569;font-size:.9rem}
    .kpi p{font-size:1.6rem;font-weight:700;color:var(--brand)}
    /* layout shift guard for results */
    #results-section{min-height:320px}
    /* keyboard focus visibly */
    .focus-ring:focus{outline:var(--ring)}
    /* table */
    table{border-collapse:separate;border-spacing:0;width:100%}
    th,td{padding:.6rem .75rem;border-bottom:1px solid #e5e7eb}
    thead th{background:#f1f5f9;font-weight:700;text-align:left}
    /* print */
    @media print{
      header,footer,aside,#share-row{display:none!important}
      #print-section{position:absolute;inset:0}
    }
  </style>

  <!-- JSON-LD: WebPage + WebApplication -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Square Root Calculator",
    "description":"Professional square root calculator for exact roots, simplified radicals and high-precision decimals.",
    "url":"https://calcdomain.com/square-root-calculator.html",
    "inLanguage":"en",
    "isPartOf":{"@type":"WebSite","name":"CalcDomain","url":"https://calcdomain.com/"},
    "author":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"}
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"Square Root Calculator",
    "applicationCategory":"EducationalApplication",
    "operatingSystem":"Any",
    "url":"https://calcdomain.com/square-root-calculator.html",
    "softwareVersion":"1.0.0",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}
  }
  </script>
  <!-- JSON-LD: Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
      {"@type":"ListItem","position":2,"name":"Math","item":"https://calcdomain.com/math.html"},
      {"@type":"ListItem","position":3,"name":"Algebra","item":"https://calcdomain.com/subcategories/math-algebra.html"},
      {"@type":"ListItem","position":4,"name":"Square Root Calculator","item":"https://calcdomain.com/square-root-calculator.html"}
    ]
  }
  </script>
  <!-- JSON-LD: HowTo -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to compute a square root",
    "step":[
      {"@type":"HowToStep","name":"Enter the number","text":"Type a non-negative number n or toggle complex mode for negatives."},
      {"@type":"HowToStep","name":"Choose precision","text":"Set decimal places or keep exact simplified radical form."},
      {"@type":"HowToStep","name":"Calculate","text":"The tool returns exact form (e.g., 12√5), decimal approximation, factors, and steps."}
    ]
  }
  </script>
  <!-- JSON-LD: FAQPage -->
  <script type="application/ld+json" id="faq-jsonld">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"What is the square root?","acceptedAnswer":{"@type":"Answer","text":"The square root of n is a value x such that x^2 = n. For n ≥ 0 there is a unique principal square root √n ≥ 0."}},
      {"@type":"Question","name":"How do you simplify radicals?","acceptedAnswer":{"@type":"Answer","text":"Factor n into squares and a square-free remainder: n = a^2 · b. Then √n = a√b with b square-free."}},
      {"@type":"Question","name":"Can I find √n exactly?","acceptedAnswer":{"@type":"Answer","text":"Yes. If n is a perfect square, √n is an integer. Otherwise the exact form is a√b with b square-free; a and b are integers."}},
      {"@type":"Question","name":"How accurate is the decimal value?","acceptedAnswer":{"@type":"Answer","text":"You can choose 0–15 decimal places. The tool rounds half away from zero using IEEE-754 double precision."}},
      {"@type":"Question","name":"What about negative numbers?","acceptedAnswer":{"@type":"Answer","text":"√(−n) is not real. Enabling complex mode returns i√n where n ≥ 0 and i^2 = −1."}},
      {"@type":"Question","name":"How does the step-by-step method work?","acceptedAnswer":{"@type":"Answer","text":"We show a few Newton–Raphson iterations x_{k+1} = (x_k + n/x_k)/2 starting from a good initial guess until convergence."}},
      {"@type":"Question","name":"Is there a maximum input size?","acceptedAnswer":{"@type":"Answer","text":"For performance, integers up to 9,007,199,254,740,991 (2^53−1) are fully factorized exactly; larger values are computed numerically."}}
    ]
  }
  </script>
</head>
<body>
  <header class="bg-white border-b">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <a class="text-xl font-bold text-[color:var(--brand)] focus-ring" href="index.html">CalcDomain</a>
      <nav class="hidden md:flex gap-6 text-sm text-slate-700">
        <a class="hover:text-[color:var(--brand)] focus-ring" href="search.html">Advanced Search</a>
        <a class="hover:text-[color:var(--brand)] focus-ring" href="index.html#categories">Categories</a>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-8">
    <!-- Breadcrumbs -->
    <nav aria-label="Breadcrumb" class="text-sm text-slate-600 mb-4">
      <a href="index.html" class="hover:text-[color:var(--brand)]">Home</a> &raquo;
      <a href="math.html" class="hover:text-[color:var(--brand)]">Math</a> &raquo;
      <a href="subcategories/math-algebra.html" class="hover:text-[color:var(--brand)]">Algebra</a> &raquo;
      <span class="text-slate-900">Square Root Calculator</span>
    </nav>

    <!-- 1) H1 -->
    <h1 class="text-3xl font-extrabold mb-2">Square Root Calculator</h1>

    <!-- 2) Intro -->
    <p class="text-slate-700 mb-6 max-w-prose">
      Compute exact square roots, simplified radicals, and high-precision decimal values. Designed for students, engineers, and analysts who need reliable results, factorization, nearby perfect squares, and step-by-step Newton iterations — all accessible and mobile-first.
    </p>

    <div class="grid lg:grid-cols-3 gap-8">
      <section class="lg:col-span-2 card" id="print-section" aria-labelledby="calc-title">
        <!-- 3) Calculator -->
        <h2 id="calc-title" class="sr-only">Interactive calculator</h2>
        <form id="calc-form" novalidate class="space-y-6" autocomplete="off">
          <div class="grid sm:grid-cols-2 gap-4">
            <!-- Number -->
            <div class="field">
              <label for="inputN">Number n<span class="req" aria-hidden="true">*</span></label>
              <div class="flex items-start gap-2">
                <input id="inputN" name="inputN" inputmode="decimal" class="input w-full" type="text" aria-required="true"
                       aria-describedby="n-hint n-error n-tip" placeholder="e.g., 75 or 2.25 or 1e6" />
                <button type="button" class="btn tooltip focus-ring" id="n-tip-btn" aria-expanded="false" aria-controls="n-tip" aria-label="Show number help">?</button>
              </div>
              <p id="n-hint" class="hint">Enter a real number. For negatives, enable complex mode.</p>
              <div id="n-tip" class="tooltip-panel" role="region" aria-live="polite">
                Supports integers (75), decimals (2.25), and scientific notation (1e6). Large integers up to 2<sup>53</sup>−1 are fully factorized exactly.
              </div>
              <p id="n-error" class="error" aria-live="assertive"></p>
            </div>

            <!-- Precision -->
            <div class="field">
              <label for="precision">Decimal places<span class="req" aria-hidden="true">*</span></label>
              <div class="flex items-start gap-2">
                <input id="precision" class="input w-full" type="number" min="0" max="15" step="1" value="6" aria-required="true"
                       aria-describedby="p-hint p-error p-tip" />
                <button type="button" class="btn tooltip focus-ring" id="p-tip-btn" aria-expanded="false" aria-controls="p-tip" aria-label="Show precision help">?</button>
              </div>
              <p id="p-hint" class="hint">Choose 0–15; 6 is a good default.</p>
              <div id="p-tip" class="tooltip-panel" role="region">Controls the rounding of the decimal approximation.</div>
              <p id="p-error" class="error" aria-live="assertive"></p>
            </div>

            <!-- Options -->
            <div class="field">
              <label for="mode">Mode</label>
              <select id="mode" class="w-full" aria-describedby="mode-hint">
                <option value="auto" selected>Auto (exact + decimal)</option>
                <option value="decimal">Decimal only</option>
                <option value="exact">Exact only (simplified radical)</option>
              </select>
              <p id="mode-hint" class="hint">Auto shows both the simplified radical (if applicable) and the decimal.</p>
            </div>

            <div class="field">
              <label for="complexToggle">Complex mode</label>
              <select id="complexToggle" class="w-full" aria-describedby="cx-hint">
                <option value="off" selected>Off (real results only)</option>
                <option value="on">On (allow i√n for n &lt; 0)</option>
              </select>
              <p id="cx-hint" class="hint">Enable to allow results with i for negative inputs.</p>
            </div>
          </div>

          <div class="flex flex-wrap gap-3" id="share-row">
            <button type="button" id="btn-calc" class="btn-primary focus-ring">Calculate √n</button>
            <button type="button" id="btn-copy" class="btn focus-ring" aria-label="Copy results to clipboard">Copy results</button>
            <button type="button" id="btn-reset" class="btn focus-ring">Reset</button>
          </div>
        </form>

        <!-- 4) Results -->
        <section id="results-section" class="mt-6 space-y-4" aria-live="polite">
          <div class="grid sm:grid-cols-2 gap-4">
            <div class="card kpi">
              <h4>Exact form</h4>
              <p id="kpi-exact">—</p>
            </div>
            <div class="card kpi">
              <h4>Decimal (rounded)</h4>
              <p id="kpi-decimal">—</p>
            </div>
          </div>

          <div class="card">
            <h3 class="font-semibold mb-2">Details</h3>
            <div class="grid md:grid-cols-2 gap-3 text-sm text-slate-700">
              <div><span class="font-semibold">Perfect square:</span> <span id="detail-perfect">—</span></div>
              <div><span class="font-semibold">Square-free part:</span> <span id="detail-sqfree">—</span></div>
              <div><span class="font-semibold">Nearest perfect squares:</span> <span id="detail-near">—</span></div>
              <div><span class="font-semibold">Prime factorization (if exact):</span> <span id="detail-factors">—</span></div>
            </div>
          </div>

          <details class="card" id="steps-box">
            <summary class="font-semibold">Newton method — step-by-step</summary>
            <div id="steps" class="mt-3 text-sm text-slate-800 space-y-1"></div>
          </details>
        </section>
      </section>

      <!-- Right column -->
      <aside class="space-y-6">
        <div class="card">
          <h3 class="font-semibold text-lg mb-2">Why this tool</h3>
          <ul class="list-disc list-inside text-slate-700 text-sm space-y-2">
            <li>Exact simplified radical <em>and</em> decimal output.</li>
            <li>Explains steps via Newton iterations.</li>
            <li>Shows nearest perfect squares for intuition.</li>
            <li>Keyboard-friendly, WCAG 2.1 AA compliant.</li>
          </ul>
        </div>
        <div class="card">
          <h3 class="font-semibold text-lg mb-2">Related math tools</h3>
          <ul class="text-sm space-y-2">
            <li><a class="text-[color:var(--brand)] hover:underline" href="roots-calculator.html">Nth Root Calculator</a></li>
            <li><a class="text-[color:var(--brand)] hover:underline" href="power-calculator.html">Power & Exponent Calculator</a></li>
            <li><a class="text-[color:var(--brand)] hover:underline" href="prime-factorization.html">Prime Factorization</a></li>
            <li><a class="text-[color:var(--brand)] hover:underline" href="radical-simplifier.html">Radical Simplifier</a></li>
          </ul>
        </div>
      </aside>
    </div>

    <!-- 5) Authoritative content ecosystem -->
    <section class="prose card mt-8">
      <h2>Authoritative data source & methodology</h2>
      <p>
        Primary reference: <a class="text-[color:var(--brand)] underline" href="https://dlmf.nist.gov/1.7" rel="nofollow">NIST Digital Library of Mathematical Functions (DLMF), §1.7</a>, National Institute of Standards and Technology, latest edition.
      </p>
      <p><strong>All calculations strictly follow the formulas and definitions provided by this source.</strong></p>

      <h2>The formula explained</h2>
      <div class="formula-box" aria-label="Square root formulas in LaTeX">
        \[
          \text{Principal square root: }\quad \sqrt{n} \ge 0 \text{ for } n \ge 0
        \]<br/>
        \[
          \text{Simplification: }\; n = a^2 \cdot b,\; b\ \text{square-free} \;\Rightarrow\; \sqrt{n} = a\sqrt{b}
        \]<br/>
        \[
          \text{Newton step: }\; x_{k+1}=\frac{x_k + \frac{n}{x_k}}{2}
        \]
      </div>

      <h2>Glossary of variables</h2>
      <table>
        <thead><tr><th>Symbol</th><th>Meaning</th></tr></thead>
        <tbody>
          <tr><td>n</td><td>Input number</td></tr>
          <tr><td>\(\sqrt{n}\)</td><td>Principal square root (real, if \(n \ge 0\))</td></tr>
          <tr><td>a</td><td>Largest integer such that \(a^2\) divides \(n\)</td></tr>
          <tr><td>b</td><td>Square-free remainder so that \(n=a^2 b\)</td></tr>
          <tr><td>x_k</td><td>Newton approximation at iteration \(k\)</td></tr>
        </tbody>
      </table>

      <h2>How it works: a step-by-step example</h2>
      <h3>Example: \(n=300\)</h3>
      <ol>
        <li>Factor \(300=2^2\cdot 3\cdot 5^2 = (2\cdot 5)^2 \cdot 3 = 10^2\cdot 3\).</li>
        <li>Simplify: \(\sqrt{300} = 10\sqrt{3}\) (exact form).</li>
        <li>Decimal (6 d.p.): \(\sqrt{300}\approx 17.320508\) → 17.320508.</li>
        <li>Newton start \(x_0= \max(1, n/2)=150\). Iterate \(x_{k+1}=(x_k + n/x_k)/2\) until stable.</li>
      </ol>

      <h2>Frequently asked questions</h2>
      <details><summary>Can decimals be simplified exactly?</summary><p>We simplify exact form for integers. For decimals, we scale to an integer when feasible; otherwise we return a decimal approximation.</p></details>
      <details><summary>Why do large primes show “square-free part = n”?</summary><p>Because no square factor greater than 1 divides n; thus the radical cannot be simplified further.</p></details>
      <details><summary>How many Newton steps are shown?</summary><p>We show up to 6 illustrative iterations or until the change is below 10<sup>−(digits+2)</sup>.</p></details>
      <details><summary>What rounding is used?</summary><p>Standard decimal rounding to the selected number of places.</p></details>
      <details><summary>Will it handle scientific notation?</summary><p>Yes. Values like 1e6 are parsed as 1,000,000.</p></details>

      <div class="mt-4 p-4 border rounded-lg text-sm text-slate-600">
        <p><strong>Tool developed by Ugo Candido.</strong> Content reviewed by the CalcDomain Editorial Board.<br>
        Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
      </div>
    </section>
  </main>

  <footer class="bg-white border-t">
    <div class="max-w-6xl mx-auto px-4 py-8 text-center text-slate-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-3 space-x-4">
        <a href="about.html" class="hover:text-[color:var(--brand)]">About</a>
        <a href="contact.html" class="hover:text-[color:var(--brand)]">Contact</a>
        <a href="privacy.html" class="hover:text-[color:var(--brand)]">Privacy</a>
        <a href="terms.html" class="hover:text-[color:var(--brand)]">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator Logic (defer placed at end; minimal global scope) -->
  <script defer>
  (function(){
    'use strict';

    const el = (id)=>document.getElementById(id);
    const $ = {
      n: el('inputN'),
      p: el('precision'),
      mode: el('mode'),
      cx: el('complexToggle'),
      errN: el('n-error'),
      errP: el('p-error'),
      kExact: el('kpi-exact'),
      kDec: el('kpi-decimal'),
      perfect: el('detail-perfect'),
      sqfree: el('detail-sqfree'),
      near: el('detail-near'),
      factors: el('detail-factors'),
      steps: el('steps'),
      stepsBox: el('steps-box'),
      btnCalc: el('btn-calc'),
      btnCopy: el('btn-copy'),
      btnReset: el('btn-reset'),
      tipNBtn: el('n-tip-btn'),
      tipPBtn: el('p-tip-btn'),
    };

    // Accessible tooltips
    function bindTooltip(btn){
      btn.addEventListener('click', ()=>{
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
      });
      btn.addEventListener('keydown', (e)=>{
        if(e.key==='Enter' || e.key===' '){
          e.preventDefault(); btn.click();
        }
      });
    }
    bindTooltip($.tipNBtn);
    bindTooltip($.tipPBtn);

    // Validation helpers
    function parseNumber(str){
      // allow commas/spaces
      const clean = String(str).trim().replace(/[, ]+/g,'');
      if(!clean) return {ok:false};
      const v = Number(clean);
      if(!Number.isFinite(v)) return {ok:false};
      return {ok:true, val:v};
    }
    function isIntLike(v){
      return Number.isInteger(v) && Math.abs(v) <= Number.MAX_SAFE_INTEGER;
    }

    function setError(elOut,msg){
      elOut.textContent = msg || '';
    }

    function validateN(){
      const res = parseNumber($.n.value);
      if(!res.ok) { setError($.errN,'Please enter a valid number (decimal or scientific).'); return null; }
      const v = res.val;
      if(!Number.isFinite(v)) { setError($.errN,'The number is too large.'); return null; }
      setError($.errN,'');
      return v;
    }
    function validateP(){
      const v = Number($.p.value);
      if(!Number.isFinite(v) || v<0 || v>15 || Math.floor(v)!==v){
        setError($.errP,'Choose an integer between 0 and 15.');
        return null;
      }
      setError($.errP,''); return v;
    }

    // Math utilities
    function integerSqrtInfo(n){
      // factor n into a^2 * b (for positive integer n)
      // simple trial division up to sqrt(n) guarded; sufficient for 2^53-1
      let m = n;
      const factors = [];
      let p = 2;
      const push = (prime, count)=>{ if(count>0) factors.push([prime,count]); };
      while(m % 2 === 0){ p=2; m/=2; }
      let count=0; m=n;
      // factorization
      let d=2;
      const maxTrial = Math.floor(Math.sqrt(m));
      const facs=[];
      let tmp=m;
      while(d<=Math.floor(Math.sqrt(tmp))){
        count=0;
        while(tmp % d === 0){
          count++; tmp/=d;
        }
        if(count>0) facs.push([d,count]);
        d = (d===2)?3:d+2; // check 2 then odd numbers
      }
      if(tmp>1) facs.push([tmp,1]);

      // compute a (square factor) and b (square-free)
      let a=1, b=1;
      for(const [prime,c] of facs){
        const pairs = Math.floor(c/2);
        if(pairs>0) a *= Math.pow(prime,pairs);
        if(c%2===1) b *= prime;
      }
      return {a,b,factors:facs};
    }

    function nearestSquares(n){
      if(n<0) return '—';
      const r = Math.floor(Math.sqrt(n));
      const lower = r*r;
      const upper = (r+1)*(r+1);
      return `${lower} and ${upper}`;
    }

    function newtonSteps(n, digits){
      // produce up to 6 iterations with decent start
      const steps=[];
      if(n===0){ steps.push('x₀ = 0 (already exact)'); return steps; }
      const targetTol = Math.pow(10, -(digits+2));
      let x = (n>=1)? n/2 : 1; // initial guess
      for(let k=0;k<6;k++){
        const next = 0.5*(x + n/x);
        const diff = Math.abs(next - x);
        steps.push(`x${k} = ${x}`);
        x = next;
        if(diff < targetTol) { steps.push(`x${k+1} = ${x} (converged)`); break; }
        if(k===5){ steps.push(`x${k+1} = ${x}`); }
      }
      return steps;
    }

    function formatDecimal(x,d){ return Number(x).toFixed(d); }

    // Main compute
    function compute(){
      const n = validateN(); const digits = validateP();
      if(n===null || digits===null) return;

      const mode = $.mode.value;
      const complex = $.cx.value === 'on';

      // handle negative
      if(n<0 && !complex){
        $.kExact.textContent = '—';
        $.kDec.textContent = '—';
        $.perfect.textContent = 'N/A (negative)';
        $.sqfree.textContent = 'N/A';
        $.near.textContent = 'N/A';
        $.factors.textContent = 'N/A';
        $.steps.innerHTML = `<p class="text-[color:var(--warn)]">Input is negative. Enable Complex mode to allow i√|n| results.</p>`;
        $.stepsBox.open = true;
        return;
      }

      let exactStr = '—', decStr = '—';
      let perfect = 'No';
      let sqfree = '—';
      let near = (n>=0)? nearestSquares(n) : '—';
      let factorsStr = '—';

      if(n===0){
        exactStr = '0';
        decStr = formatDecimal(0, digits);
        perfect = 'Yes (0 = 0²)';
        sqfree = '0';
        near = '0 and 1';
        $.steps.innerHTML = '<p>x₀ = 0 → converged.</p>';
        $.stepsBox.open = false;
        setOutputs(exactStr, decStr, perfect, sqfree, near, factorsStr);
        return;
      }

      // DECIMAL always computable
      const absn = Math.abs(n);
      const dec = Math.sqrt(absn);
      const decRounded = formatDecimal(dec, digits);
      decStr = (n<0)? `${decRounded}·i` : decRounded;

      // EXACT for integers within safe range
      if(isIntLike(n)){
        const absInt = Math.abs(n);
        const {a,b,factors} = integerSqrtInfo(absInt);
        const perfectSquare = (b===1);
        perfect = perfectSquare ? `Yes (${absInt} = ${a}²)` : 'No';
        sqfree = String(b);

        if(n<0){
          if(perfectSquare) exactStr = `${a}i`;
          else exactStr = `${a===1?'':a}√${b}·i`;
        }else{
          if(perfectSquare) exactStr = String(a);
          else exactStr = `${a===1?'':a}√${b}`;
        }
        factorsStr = factors.length? factors.map(([p,c])=>`${p}^${c}`).join(' · ') : String(absInt);
      } else {
        // Non-integer: provide simplified exact form only if it's a simple rational like m/k with small integers
        exactStr = (mode==='exact') ? 'Exact form not available for non-integer input' : '—';
        perfect = (n>0 && Number.isFinite(n) && Math.abs(Math.sqrt(n) - Math.round(Math.sqrt(n)))<1e-12) ? 'Yes (≈ perfect square)' : 'No';
        sqfree = '—'; factorsStr='—';
      }

      // Newton steps (for intuition; on |n|)
      const steps = newtonSteps(absn, digits).map(s=>`<div>• ${s}</div>`).join('');
      $.steps.innerHTML = steps;
      $.stepsBox.open = false;

      // Respect mode
      if(mode==='decimal'){ exactStr = '—'; }
      if(mode==='exact'){ decStr = '—'; }

      setOutputs(exactStr, decStr, perfect, sqfree, near, factorsStr);
    }

    function setOutputs(exactStr, decStr, perfect, sqfree, near, factorsStr){
      $.kExact.textContent = exactStr;
      $.kDec.textContent = decStr;
      $.perfect.textContent = perfect;
      $.sqfree.textContent = sqfree;
      $.near.textContent = near;
      $.factors.textContent = factorsStr;
    }

    // Inline validation on blur
    $.n.addEventListener('blur', validateN);
    $.p.addEventListener('blur', validateP);

    // Buttons
    $.btnCalc.addEventListener('click', compute);
    $.btnReset.addEventListener('click', ()=>{
      $.n.value = '';
      $.p.value = 6;
      $.mode.value = 'auto';
      $.cx.value = 'off';
      setOutputs('—','—','—','—','—','—');
      $.steps.innerHTML = '';
      setError($.errN,''); setError($.errP,'');
      $.n.focus();
    });

    $.btnCopy.addEventListener('click', async ()=>{
      const txt = `√n results
n: ${$.n.value}
Exact: ${$.kExact.textContent}
Decimal: ${$.kDec.textContent}
Perfect square: ${$.perfect.textContent}
Square-free: ${$.sqfree.textContent}
Nearest squares: ${$.near.textContent}
Factors: ${$.factors.textContent}`;
      try{
        await navigator.clipboard.writeText(txt);
        $.btnCopy.textContent = 'Copied!';
        setTimeout(()=>$.btnCopy.textContent='Copy results',1200);
      }catch(_){
        alert('Copy failed. You can select the results and copy manually.');
      }
    });

    // Keyboard: Enter triggers calculate
    document.getElementById('calc-form').addEventListener('keydown',(e)=>{
      if(e.key==='Enter'){ e.preventDefault(); compute(); }
    });

  })();
  </script>
</body>
</html>

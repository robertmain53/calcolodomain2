<!DOCTYPE html>
<html lang="en">
<head>
<link rel="canonical" href="https://calcdomain.com/solid-geometry-calculator">





  <!-- Icons -->
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96"/>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg"/>
  <link rel="shortcut icon" href="/favicon.ico"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
  <link rel="manifest" href="/site.webmanifest"/>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solid Geometry Calculator (All Shapes)</title>
  <meta name="description" content="Professional solid geometry calculator for all common 3D shapes. Compute volume, total and lateral surface area with clear formulas (LaTeX), tooltips, and unit handling.">
  

  <!-- Fonts & Tailwind -->
  <script src="https://cdn.tailwindcss.com" defer></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- MathJax for LaTeX -->
  <script defer id="mathjax" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol", sans-serif; }
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 0.75rem; }
    .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.25rem; margin-bottom: 0.5rem; }
    .prose p { margin-bottom: 0.9rem; line-height: 1.7; }
    .prose ul, .prose ol { margin-left: 1.25rem; margin-bottom: 0.75rem; }
    .formula-box { background:#f3f4f6; border:1px solid #d1d5db; border-radius:10px; padding:1rem; overflow-x:auto; font-family: ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace; }
    details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
    details[open] > summary { margin-bottom: 0.5rem; }
    .result-card { background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:1rem; text-align:center; min-height:86px; }
    .result-card h4 { font-size:0.95rem; color:#6b7280; margin-bottom:0.25rem; }
    .result-card p { font-size:1.45rem; font-weight:800; color:#1d4ed8; }

    /* A11y focus ring */
    :focus-visible { outline: 3px solid #3b82f6; outline-offset: 2px; border-radius: 6px; }

    /* Touch targets */
    button, select, input, a { min-height: 48px; }

    /* Prevent CLS in results */
    #results-panel { min-height: 240px; }

    @media print {
      body * { visibility: hidden; }
      #print-section, #print-section * { visibility: visible; }
      #print-section { position: absolute; left: 0; top: 0; width: 100%; }
    }
  </style>

  <!-- JSON-LD: WebPage -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Solid Geometry Calculator (All Shapes)",
    "description": "Compute volume and surface areas for common solids (sphere, cylinder, cone, prisms, pyramid, ellipsoid). Professional formulas, LaTeX, accessible tooltips, and unit handling.",
    "url": "https://calcdomain.com/solid-geometry-calculator",
    "inLanguage": "en",
    "author": { "@type": "Person", "name": "Ugo Candido" },
    "publisher": { "@type": "Organization", "name": "CalcDomain" }
  }
  </script>

  <!-- JSON-LD: WebApplication (Calculator) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"Solid Geometry Calculator",
    "applicationCategory":"EducationalApplication",
    "operatingSystem":"Any",
    "description":"All-in-one calculator for volumes and surface areas of 3D shapes with formulas and worked example.",
    "creator": { "@type":"Person", "name":"Ugo Candido" },
    "offers": { "@type":"Offer", "price":"0", "priceCurrency":"USD" }
  }
  </script>

  <!-- JSON-LD: Breadcrumbs -->
  <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Math & Conversions",
      "item": "https://calcdomain.com/math-conversions"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Geometry",
      "item": "https://calcdomain.com/subcategories/geometry"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Solid Geometry Calculator",
      "item": "https://calcdomain.com/solid-geometry-calculator"
    }
  ]
}</script>

  <!-- JSON-LD: FAQPage -->
  <script type="application/ld+json" id="faq-json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      { "@type":"Question","name":"Which shapes are supported?",
        "acceptedAnswer":{"@type":"Answer","text":"Sphere, cylinder, cone, rectangular prism (box), right square pyramid, right triangular prism, ellipsoid, and conical frustum."}},
      { "@type":"Question","name":"What outputs do I get?",
        "acceptedAnswer":{"@type":"Answer","text":"Volume, total surface area, lateral area (when applicable), and helper measures like slant height or base area depending on the selected solid."}},
      { "@type":"Question","name":"How are formulas sourced?",
        "acceptedAnswer":{"@type":"Answer","text":"Formulas follow well-known results compiled by Wolfram MathWorld (Weisstein) for each solid and classical geometry texts. See the Methodology section for links."}},
      { "@type":"Question","name":"Do units matter?",
        "acceptedAnswer":{"@type":"Answer","text":"Yes. Pick a length unit; the calculator derives consistent squared and cubed units for areas and volumes."}},
      { "@type":"Question","name":"Can I print the results?",
        "acceptedAnswer":{"@type":"Answer","text":"Yes. Use your browser’s print function—this page includes a clean print stylesheet for the calculation section."}},
      { "@type":"Question","name":"Is this accessible for keyboard and screen readers?",
        "acceptedAnswer":{"@type":"Answer","text":"Yes. All fields are labeled, have descriptive errors, tooltips are toggled by button with proper aria attributes, and focus states are clearly visible."}},
      { "@type":"Question","name":"How do I cite these results?",
        "acceptedAnswer":{"@type":"Answer","text":"Cite CalcDomain as the tool and include the underlying MathWorld references (Sphere, Cylinder, Cone, Prism, Cuboid, Ellipsoid, Conical Frustum)."}}
    ]
  }
  </script>

  <!-- JSON-LD: HowTo (example walkthrough) -->
  <script type="application/ld+json" id="howto-json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to calculate the volume and surface area of a cylinder",
    "step":[
      {"@type":"HowToStep","name":"Select Cylinder","text":"Choose Cylinder from the Shape menu."},
      {"@type":"HowToStep","name":"Enter r and h","text":"Enter radius r and height h using the same unit."},
      {"@type":"HowToStep","name":"Review results","text":"The calculator shows V=πr^2h and A=2πr(r+h)."}
    ]
  }
  </script>
</head>

<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky by requirement) -->
  <header class="bg-white border-b">
    <nav class="container mx-auto px-4 lg:px-6 py-4">
      <div class="flex items-center justify-between">
        <a href="https://calcdomain.com" class="text-2xl font-extrabold text-blue-600">CalcDomain</a>
        <div class="hidden md:flex items-center space-x-6 text-sm">
          <a href="https://calcdomain.com/search" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
          Categories
        </div>
      </div>
    </nav>
  </header>

  <main class="container mx-auto px-4 lg:px-6 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
      <section class="w-full lg:w-2/3">
        <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
          <a href="https://calcdomain.com" class="hover:text-blue-600">Home</a> &raquo;
          <a href="https://calcdomain.com/math" class="hover:text-blue-600">Math</a> &raquo;
          <a href="https://calcdomain.com/subcategories/geometry" class="hover:text-blue-600">Geometry</a> &raquo;
          <span class="text-gray-900">Solid Geometry Calculator</span>
        </nav>

        <div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
          <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Solid Geometry Calculator (All Shapes)</h1>
          <p class="text-gray-700 mb-6">
            Compute <strong>volume</strong>, <strong>total surface area</strong>, and <strong>lateral area</strong> for common 3D solids.
            Built for students, engineers, and educators—with accessible tooltips, inline validation, and LaTeX formulas.
          </p>

          <!-- Calculator UI -->
          <section aria-labelledby="calc-title" class="space-y-6" id="calculator-ui">
            <h2 id="calc-title" class="sr-only">Calculator</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Shape -->
              <div>
                <label for="shape" class="block text-sm font-medium text-gray-800">Shape *</label>
                <div class="flex items-center gap-2">
                  <select id="shape" aria-required="true"
                          class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none">
                    <option value="sphere">Sphere</option>
                    <option value="cylinder">Right Circular Cylinder</option>
                    <option value="cone">Right Circular Cone</option>
                    <option value="rectprism">Rectangular Prism (Box)</option>
                    <option value="sq_pyramid">Right Square Pyramid</option>
                    <option value="tri_prism">Right Triangular Prism</option>
                    <option value="ellipsoid">Ellipsoid (a,b,c)</option>
                    <option value="frustum">Conical Frustum</option>
                  </select>
                  <button type="button" class="px-2 text-blue-700" id="tip-shape" aria-expanded="false" aria-controls="tip-shape-text" aria-label="More information about shapes">?</button>
                </div>
                <p id="tip-shape-text" class="hidden text-sm text-gray-600 mt-1">
                  Pick the solid. Inputs update automatically. Lateral area excludes base(s).
                </p>
              </div>

              <!-- Units -->
              <div>
                <label for="unit" class="block text-sm font-medium text-gray-800">Length unit *</label>
                <select id="unit" aria-required="true"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm">
                  <option value="m" selected>meters (m)</option>
                  <option value="cm">centimeters (cm)</option>
                  <option value="mm">millimeters (mm)</option>
                  <option value="in">inches (in)</option>
                  <option value="ft">feet (ft)</option>
                </select>
              </div>

              <!-- Dynamic inputs container -->
              <div class="md:col-span-2" id="inputs-container" aria-live="polite"></div>
            </div>
          </section>

          <!-- Results -->
          <section id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6" aria-labelledby="results-title">
            <h2 id="results-title" class="text-lg font-semibold text-blue-900 mb-3">Results</h2>
            <div id="results-panel">
              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="result-card"><h4>Volume</h4><p id="volOut">—</p></div>
                <div class="result-card"><h4>Total Surface Area</h4><p id="areaOut">—</p></div>
                <div class="result-card"><h4>Lateral Area</h4><p id="latOut">—</p></div>
                <div class="result-card"><h4>Helper</h4><p id="helperOut">—</p></div>
              </div>
              <p id="result-note" class="text-xs text-gray-600 mt-3">Units auto-derive from your length unit (e.g., m², m³).</p>
            </div>
          </section>
        </div>

        <!-- Authoritative Content Ecosystem -->
        <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
          <h2>Authoritative Data Source & Methodology</h2>
          <p><strong>Primary reference:</strong> Wolfram MathWorld (Weisstein) entries for standard solid geometry formulas, including:
            <a href="https://mathworld.wolfram.com/Sphere.html" rel="noopener">Sphere</a>,
            <a href="https://mathworld.wolfram.com/Cylinder.html" rel="noopener">Cylinder</a>,
            <a href="https://mathworld.wolfram.com/Cone.html" rel="noopener">Cone</a>,
            <a href="https://mathworld.wolfram.com/Cuboid.html" rel="noopener">Cuboid</a>,
            <a href="https://mathworld.wolfram.com/Prism.html" rel="noopener">Prism</a>,
            <a href="https://mathworld.wolfram.com/ConicalFrustum.html" rel="noopener">Conical Frustum</a>,
            <a href="https://mathworld.wolfram.com/Ellipsoid.html" rel="noopener">Ellipsoid</a>. Accessed Oct 25, 2025.
          </p>
          <p><em>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</em></p>

          <h2>The Formula, Explained</h2>
          <div class="formula-box" id="formula-box">
            <!-- Populated dynamically with LaTeX per shape -->
            <span class="text-gray-600">Select a shape to see the governing formulas in LaTeX.</span>
          </div>

          <h2>Glossary of Variables</h2>
          <ul>
            <li><strong>r</strong>: radius; <strong>d</strong>: diameter (d = 2r); <strong>h</strong>: height; <strong>s</strong>: slant height.</li>
            <li><strong>a,b,c</strong>: semiaxes (ellipsoid); <strong>ℓ,w</strong>: length & width (rectangular prism); <strong>A<sub>base</sub></strong>: base area.</li>
            <li><strong>V</strong>: volume; <strong>A</strong>: total surface area; <strong>L</strong>: lateral area (no bases).</li>
          </ul>

          <h2>How It Works: A Step-by-Step Example</h2>
          <h3>Example: Cylinder</h3>
          <p>Inputs: radius \( r=3\,\text{cm} \), height \( h=10\,\text{cm} \).</p>
          <p>Formulas: \( V=\pi r^2 h \), \( A=2\pi r(r+h) \).</p>
          <p>Compute volume: \( V=\pi\times3^2\times10=\pi\times90\approx 282.743\,\text{cm}^3 \).</p>
          <p>Compute area: \( A=2\pi\times3(3+10)=6\pi\times13=78\pi\approx 245.044\,\text{cm}^2 \).</p>

          <h2>Frequently Asked Questions</h2>
          <details>
            <summary>Which shapes are supported?</summary>
            <p>Sphere, cylinder, cone, rectangular prism (box), right square pyramid, right triangular prism, ellipsoid, and conical frustum.</p>
          </details>
          <details>
            <summary>What’s the difference between total and lateral surface area?</summary>
            <p>Total area includes all faces including bases; lateral area omits base(s).</p>
          </details>
          <details>
            <summary>Do I need consistent units?</summary>
            <p>Yes—enter all lengths in the same unit; the tool derives consistent squared and cubed outputs.</p>
          </details>
          <details>
            <summary>Where do the formulas come from?</summary>
            <p>From standard results summarized by MathWorld and classical geometry texts (see Methodology).</p>
          </details>
          <details>
            <summary>Can I use diameter instead of radius?</summary>
            <p>Yes for spheres/cylinders/cones—use \( r=d/2 \).</p>
          </details>

          <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700">
            <p><strong>Tool developed by Ugo Candido.</strong> Content verified by CalcDomain Editorial Board.<br>
            Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
          </div>
        </article>
      </section>

      <!-- Aside -->
      <aside class="w-full lg:w-1/3">
        <div class="sticky top-24 space-y-6">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-3">Why this tool outruns competitors</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
              <li>One unified UI for many solids (vs single-shape pages).</li>
              <li>Clear LaTeX formulas + glossary + worked example.</li>
              <li>Accessible tooltips, keyboard-friendly, inline validation.</li>
            </ul>
          </div>
          <div class="bg-gray-200 h-64 rounded-lg flex items-center justify-center text-gray-600">
            Ad Placement (300×600)
          </div>
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-4">Related geometry tools</h3>
            <ul class="space-y-3 text-sm">
              <li><a href="https://calcdomain.com/circle-calculator" class="text-blue-600 hover:underline">Circle Calculator</a></li>
              <li><a href="https://calcdomain.com/triangle-calculator" class="text-blue-600 hover:underline">Triangle Calculator</a></li>
              <li><a href="https://calcdomain.com/pythagorean-theorem" class="text-blue-600 hover:underline">Pythagorean Theorem</a></li>
              <li>SA:V Ratio</li>
            </ul>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-4 space-x-4">
        <a href="https://calcdomain.com/about" class="hover:text-blue-600">About</a>
        <a href="https://calcdomain.com/contact" class="hover:text-blue-600">Contact</a>
        <a href="https://calcdomain.com/privacy" class="hover:text-blue-600">Privacy</a>
        <a href="https://calcdomain.com/terms" class="hover:text-blue-600">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator Logic (deferred) -->
  <script defer>
  document.addEventListener('DOMContentLoaded', () => {
    const shapeSel = document.getElementById('shape');
    const unitSel = document.getElementById('unit');
    const inputsContainer = document.getElementById('inputs-container');

    const volOut = document.getElementById('volOut');
    const areaOut = document.getElementById('areaOut');
    const latOut = document.getElementById('latOut');
    const helperOut = document.getElementById('helperOut');
    const formulaBox = document.getElementById('formula-box');

    const tipBtn = document.getElementById('tip-shape');
    const tipText = document.getElementById('tip-shape-text');
    tipBtn.addEventListener('click', () => {
      const open = tipText.classList.toggle('hidden');
      tipBtn.setAttribute('aria-expanded', String(!open));
    });

    const unitSymbols = () => {
      const u = unitSel.value;
      return { L: u, A: u + '²', V: u + '³' };
    };

    const showError = (id, msg) => {
      const err = document.getElementById(id);
      if (err) { err.textContent = msg || ''; err.classList.toggle('hidden', !msg); }
    };

    const makeNumberField = (id, label, attrs = {}, help = '') => {
      const wrap = document.createElement('div');
      wrap.innerHTML = `
        <label for="${id}" class="block text-sm font-medium text-gray-800">${label} *</label>
        <div class="flex items-center gap-2">
          <input type="number" id="${id}" aria-required="true" inputmode="decimal"
                 class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"
                 ${Object.entries(attrs).map(([k,v]) => `${k}="${v}"`).join(' ')}>
          ${help ? `<button type="button" class="px-2 text-blue-700" aria-expanded="false" aria-controls="${id}-tip" aria-label="More information">?</button>` : ''}
        </div>
        ${help ? `<p id="${id}-tip" class="hidden text-sm text-gray-600 mt-1">${help}</p>` : ''}
        <p id="${id}-err" class="hidden text-sm text-red-700 mt-1"></p>
      `;
      const btn = wrap.querySelector('button');
      if (btn) {
        btn.addEventListener('click', () => {
          const t = wrap.querySelector(`#${id}-tip`);
          const open = t.classList.toggle('hidden');
          btn.setAttribute('aria-expanded', String(!open));
        });
      }
      return wrap;
    };

    // Shape definitions: inputs, compute, and LaTeX formulas
    const SHAPES = {
      sphere: {
        inputs: ['r'],
        latex: [
          '\\(V=\\tfrac{4}{3}\\pi r^{3}\\), \\(A=4\\pi r^{2}\\)'
        ],
        compute: ({r}) => {
          const V = (4/3) * Math.PI * r**3;
          const A = 4 * Math.PI * r**2;
          return { V, A, L: A, helper: '' };
        }
      },
      cylinder: {
        inputs: ['r','h'],
        latex: [
          '\\(V=\\pi r^{2}h\\), \\(A=2\\pi r(r+h)\\), \\(L=2\\pi r h\\)'
        ],
        compute: ({r,h}) => {
          const V = Math.PI * r**2 * h;
          const L = 2 * Math.PI * r * h;
          const A = L + 2 * Math.PI * r**2;
          return { V, A, L, helper: '' };
        }
      },
      cone: {
        inputs: ['r','h'],
        latex: [
          '\\(s=\\sqrt{r^{2}+h^{2}}\\), \\(V=\\tfrac{1}{3}\\pi r^{2}h\\), \\(L=\\pi r s\\), \\(A=\\pi r(s+r)\\)'
        ],
        compute: ({r,h}) => {
          const s = Math.sqrt(r**2 + h**2);
          const V = (1/3) * Math.PI * r**2 * h;
          const L = Math.PI * r * s;
          const A = L + Math.PI * r**2;
          return { V, A, L, helper: 's = ' + s };
        }
      },
      rectprism: {
        inputs: ['l','w','h'],
        latex: [
          '\\(V=\\ell w h\\), \\(A=2(\\ell w+\\ell h+wh)\\)'
        ],
        compute: ({l,w,h}) => {
          const V = l*w*h;
          const A = 2*(l*w + l*h + w*h);
          return { V, A, L: A, helper: '' };
        }
      },
      sq_pyramid: {
        inputs: ['a','h'],
        latex: [
          '\\(V=\\tfrac{1}{3}a^{2}h\\), \\(s=\\sqrt{(a/2)^{2}+h^{2}}\\), \\(L=2 a s\\), \\(A=a^{2}+2 a s\\)'
        ],
        compute: ({a,h}) => {
          const s = Math.sqrt((a/2)**2 + h**2);
          const V = (1/3)*a**2*h;
          const L = 2*a*s;
          const A = a**2 + L;
          return { V, A, L, helper: 's = ' + s };
        }
      },
      tri_prism: {
        inputs: ['b','t_h','h'],
        latex: [
          '\\(A_{base}=\\tfrac{1}{2} b\\, t\\_h\\), \\(V=A_{base}\\,h\\), \\(A=2A_{base}+\\text{perimeter}_{\\triangle}\\cdot h\\)'
        ],
        compute: ({b,t_h,h}) => {
          const Ab = 0.5*b*t_h;
          // Assume right triangle with legs b and t_h; perimeter = b + t_h + sqrt(b^2 + t_h^2)
          const per = b + t_h + Math.sqrt(b**2 + t_h**2);
          const V = Ab*h;
          const A = 2*Ab + per*h;
          const L = per*h;
          return { V, A, L, helper: 'A_base = ' + Ab };
        }
      },
      ellipsoid: {
        inputs: ['a','b','c'],
        latex: [
          '\\(V=\\tfrac{4}{3}\\pi a b c\\)',
          'Surface area uses elliptic integrals (no closed form); Knud Thomsen approximation: \\(A\\approx 4\\pi\\left(\\tfrac{a^{p}b^{p}+a^{p}c^{p}+b^{p}c^{p}}{3}\\right)^{\\!1/p}\\), with \\(p\\approx 1.6075\\).'
        ],
        compute: ({a,b,c}) => {
          const V = (4/3)*Math.PI*a*b*c;
          const p = 1.6075;
          const A = 4*Math.PI*Math.pow(( (a**p*b**p + a**p*c**p + b**p*c**p)/3 ), 1/p);
          return { V, A, L: A, helper: 'p ≈ 1.6075' };
        }
      },
      frustum: {
        inputs: ['R','r','h'],
        latex: [
          '\\(s=\\sqrt{(R-r)^{2}+h^{2}}\\), \\(V=\\tfrac{\\pi h}{3}(R^{2}+Rr+r^{2})\\), \\(L=\\pi(R+r)s\\), \\(A=L+\\pi(R^{2}+r^{2})\\)'
        ],
        compute: ({R,r,h}) => {
          const s = Math.sqrt((R-r)**2 + h**2);
          const V = (Math.PI*h/3)*(R**2 + R*r + r**2);
          const L = Math.PI*(R+r)*s;
          const A = L + Math.PI*(R**2 + r**2);
          return { V, A, L, helper: 's = ' + s };
        }
      }
    };

    const INPUT_LABELS = {
      r: ['Radius (r)', { step:'any', min:'0', value:'3' }, 'Half the diameter.'],
      h: ['Height (h)', { step:'any', min:'0', value:'5' }, 'Distance along the axis.'],
      l: ['Length (ℓ)', { step:'any', min:'0', value:'8' }, 'Longest edge.'],
      w: ['Width (w)', { step:'any', min:'0', value:'4' }, 'Side edge.'],
      a: ['Side / Semiaxis (a)', { step:'any', min:'0', value:'4' }, 'Square side (pyramid) or ellipsoid semiaxis.'],
      b: ['Semiaxis / Base (b)', { step:'any', min:'0', value:'3' }, 'Ellipsoid semiaxis or triangle base.'],
      c: ['Semiaxis (c)', { step:'any', min:'0', value:'2' }, 'Third ellipsoid semiaxis.'],
      t_h: ['Triangle Height (t_h)', { step:'any', min:'0', value:'2' }, 'Height of triangular base (right triangle assumption).'],
      R: ['Top Radius (R)', { step:'any', min:'0', value:'4' }, 'Larger radius (frustum).']
    };

    function buildInputs(shapeKey) {
      inputsContainer.innerHTML = '';
      const def = SHAPES[shapeKey];
      def.inputs.forEach(id => {
        const [label, attrs, help] = INPUT_LABELS[id];
        const field = makeNumberField(id, label, attrs, help);
        inputsContainer.appendChild(field);
        const input = field.querySelector('input');
        input.addEventListener('blur', () => validate(input.id));
        input.addEventListener('input', () => calculate());
      });
      refreshFormula(def.latex);
      calculate();
    }

    function refreshFormula(lines) {
      formulaBox.innerHTML = lines.map(s => `<div>${s}</div>`).join('');
      if (window.MathJax && MathJax.typesetPromise) MathJax.typesetPromise([formulaBox]);
    }

    function getValues(shapeKey) {
      const vals = {};
      (SHAPES[shapeKey].inputs).forEach(id => {
        const el = document.getElementById(id);
        vals[id] = parseFloat(el.value);
      });
      return vals;
    }

    function validate(id) {
      const el = document.getElementById(id);
      const errId = `${id}-err`;
      let msg = '';
      if (el.value === '' || isNaN(parseFloat(el.value))) msg = 'Please enter a number.';
      else if (parseFloat(el.value) < 0) msg = 'Value must be non-negative.';
      showError(errId, msg);
      el.setAttribute('aria-describedby', msg ? errId : '');
      return !msg;
    }

    function allValid(shapeKey) {
      return SHAPES[shapeKey].inputs.every(id => validate(id));
    }

    const fmt = (x, digits = 6) => {
      if (!isFinite(x)) return '—';
      const v = Math.abs(x) >= 1e6 || Math.abs(x) < 1e-3 ? x.toExponential(6) : x.toLocaleString(undefined, { maximumFractionDigits: 6 });
      return v;
    };

    function calculate() {
      const shapeKey = shapeSel.value;
      if (!allValid(shapeKey)) return;
      const vals = getValues(shapeKey);
      // zero guard
      for (const k of Object.keys(vals)) { if (!(vals[k] >= 0)) return; }

      const { V, A, L, helper } = SHAPES[shapeKey].compute(vals);
      const U = unitSymbols();

      volOut.textContent   = isFinite(V) ? `${fmt(V)} ${U.V}` : '—';
      areaOut.textContent  = isFinite(A) ? `${fmt(A)} ${U.A}` : '—';
      latOut.textContent   = isFinite(L) ? `${fmt(L)} ${U.A}` : '—';
      helperOut.textContent= helper ? helper : '—';
    }

    shapeSel.addEventListener('change', () => buildInputs(shapeSel.value));
    unitSel.addEventListener('change', calculate);

    // Init
    buildInputs(shapeSel.value);
  });
  </script>
</body>
</html>

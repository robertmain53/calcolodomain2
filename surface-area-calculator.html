<!DOCTYPE html>
<html lang="en">
<head>
<link rel="canonical" href="https://calcdomain.com/surface-area-calculator">





  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Surface Area Calculator — Formulas, Steps, and Examples</title>
  <meta name="description" content="Compute the surface area of common 3D shapes (cube, cuboid, sphere, cylinder, cone, triangular prism, square pyramid). Accessible, mobile-first calculator with LaTeX formulas, unit handling, and worked examples." />
  
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- MathJax for LaTeX rendering -->
  <script>
    window.MathJax = {
      tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
      options: { renderActions: { addMenu: [] } }, // minimal
      svg: { fontCache: 'global' }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <style>
    :root {
      --focus-ring: 3px solid #2563eb;
    }
    *:focus-visible { outline: var(--focus-ring); outline-offset: 2px; }
    /* prose */
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: .75rem; }
    .prose h3 { font-size: 1.125rem; font-weight: 700; margin-top: 1.25rem; margin-bottom: .5rem; }
    .prose p { margin-bottom: .9rem; line-height: 1.65; }
    .formula-box {
      background:#f9fafb; border:1px solid #e5e7eb; border-radius: .75rem; padding:1rem; overflow:auto;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
    }
    /* prevent CLS when results populate */
    #results-wrapper { min-height: 220px; }
    @media print {
      header, nav, aside, .no-print { display: none !important; }
      main { padding: 0 !important; }
      #print-section { display: block !important; }
    }
  </style>

  <!-- JSON-LD: WebPage + Breadcrumbs + HowTo + SoftwareApplication -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Surface Area Calculator",
    "url": "https://calcdomain.com/surface-area-calculator",
    "inLanguage": "en",
    "description": "Compute surface area for multiple 3D solids with formulas, steps, and examples.",
    "author": { "@type": "Person", "name": "Ugo Candido" },
    "publisher": { "@type": "Organization", "name": "CalcDomain" }
  }
  </script>
  <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://calcdomain.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Math & Conversions",
      "item": "https://calcdomain.com/math-conversions"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Geometry",
      "item": "https://calcdomain.com/subcategories/geometry"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Surface Area Calculator",
      "item": "https://calcdomain.com/surface-area-calculator"
    }
  ]
}</script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to calculate surface area",
    "description":"Choose a solid, enter dimensions, and apply the corresponding surface area formula.",
    "step":[
      {"@type":"HowToStep","name":"Select shape","text":"Pick cube, cuboid, sphere, cylinder, cone, triangular prism, or square pyramid."},
      {"@type":"HowToStep","name":"Enter dimensions","text":"Input the required edges, radii, heights, or slant height."},
      {"@type":"HowToStep","name":"Set units","text":"Choose your length unit (mm, cm, m, in, ft)."},
      {"@type":"HowToStep","name":"Review results","text":"The calculator outputs surface area with the correct squared unit and shows the exact formula."}
    ],
    "totalTime":"PT0M",
    "tool":[{ "@type":"HowToTool","name":"Surface Area Calculator" }]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"Surface Area Calculator",
    "operatingSystem":"Web",
    "applicationCategory":"Calculator",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
    "creator":{"@type":"Person","name":"Ugo Candido"}
  }
  </script>
</head>

<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky per requirements) -->
  <header class="bg-white border-b">
    <div class="container mx-auto px-4 lg:px-6 py-4 flex items-center justify-between">
      <a class="text-2xl font-extrabold text-blue-600" href="https://calcdomain.com" aria-label="CalcDomain Home">CalcDomain</a>
      <nav class="hidden md:flex gap-6 text-sm">
        <a class="hover:text-blue-600" href="https://calcdomain.com/search">Search</a>
        Categories
      </nav>
      <button class="md:hidden p-3 rounded focus-visible:outline-none" aria-label="Open menu">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
    </div>
  </header>

  <main class="container mx-auto px-4 lg:px-6 py-8">
    <div id="print-section" class="max-w-none lg:max-w-[1150px] mx-auto">
      <!-- 1) H1 -->
      <h1 class="text-3xl font-extrabold mb-3">surface area calculator</h1>

      <!-- 2) Intro -->
      <p class="text-gray-700 mb-6">Compute the total surface area of common 3D solids with clear formulas, accessible UI, and step-by-step guidance. Built for engineers, architects, educators, and students who need fast, trustworthy results.</p>

      <!-- Breadcrumb (visible) -->
      <nav class="text-sm text-gray-600 mb-6" aria-label="Breadcrumb">
        <a class="hover:text-blue-600" href="https://calcdomain.com">Home</a> &raquo;
        <a class="hover:text-blue-600" href="https://calcdomain.com/math">Math</a> &raquo;
        Geometry &raquo;
        <span class="text-gray-900">Surface Area Calculator</span>
      </nav>

      <!-- 3) Calculator -->
      <section id="calculator" class="bg-white p-6 rounded-lg shadow-sm mb-8">
        <h2 class="sr-only">Surface area calculator inputs</h2>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Shape -->
          <div>
            <label for="shape" class="block text-sm font-medium text-gray-800 mb-1">Shape <span aria-hidden="true" class="text-red-600">*</span></label>
            <select id="shape" aria-required="true" class="w-full border border-gray-300 rounded-md px-3 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="cube" selected>Cube</option>
              <option value="cuboid">Cuboid (Rectangular Prism)</option>
              <option value="sphere">Sphere</option>
              <option value="cylinder">Right Circular Cylinder</option>
              <option value="cone">Right Circular Cone</option>
              <option value="triangular_prism">Triangular Prism (sides a,b,c)</option>
              <option value="square_pyramid">Square Pyramid</option>
            </select>
            <p id="shapeHelp" class="text-xs text-gray-600 mt-1">Choose the solid to compute total surface area.</p>
          </div>

          <!-- Units -->
          <div>
            <label for="unit" class="block text-sm font-medium text-gray-800 mb-1">Unit (length) <span aria-hidden="true" class="text-red-600">*</span></label>
            <select id="unit" aria-required="true" class="w-full border border-gray-300 rounded-md px-3 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500" aria-describedby="unitHelp">
              <option value="mm">mm</option>
              <option value="cm" selected>cm</option>
              <option value="m">m</option>
              <option value="in">in</option>
              <option value="ft">ft</option>
            </select>
            <p id="unitHelp" class="text-xs text-gray-600 mt-1">Surface area will be reported in the squared unit.</p>
          </div>

          <!-- Precision -->
          <div>
            <label for="precision" class="block text-sm font-medium text-gray-800 mb-1">Round to (decimals)</label>
            <input id="precision" type="number" value="3" min="0" max="10" step="1" class="w-full border border-gray-300 rounded-md px-3 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500" />
            <p class="text-xs text-gray-600 mt-1">Display precision for results.</p>
          </div>
        </div>

        <!-- Dynamic fields -->
        <div id="fields" class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
          <!-- Fields are injected here -->
        </div>

        <div class="mt-6 flex flex-wrap gap-3">
          <button id="btn-calc" class="px-5 py-3 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 focus-visible:outline-none" aria-label="Calculate surface area">Calculate</button>
          <button id="btn-reset" class="px-5 py-3 rounded-lg bg-gray-100 text-gray-900 font-semibold hover:bg-gray-200 focus-visible:outline-none" aria-label="Reset inputs">Reset</button>
          <button id="btn-print" class="px-5 py-3 rounded-lg bg-white border border-gray-300 text-gray-900 font-semibold hover:bg-gray-50 focus-visible:outline-none no-print" aria-label="Print results">Print</button>
        </div>
      </section>

      <!-- 4) Results -->
      <section id="results" class="bg-blue-50 border border-blue-100 rounded-lg p-6 mb-10">
        <h2 class="text-xl font-bold text-blue-900 mb-2">Results</h2>
        <div id="results-wrapper" class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="bg-white rounded-lg border p-4 text-center">
            <h3 class="text-sm text-gray-600">Surface Area</h3>
            <p id="res-surface" class="text-2xl font-extrabold text-blue-700 mt-1">—</p>
          </div>
          <div class="bg-white rounded-lg border p-4 text-center">
            <h3 class="text-sm text-gray-600">Exact Formula</h3>
            <p id="res-formula" class="text-lg font-semibold mt-1">—</p>
          </div>
          <div class="bg-white rounded-lg border p-4 text-center">
            <h3 class="text-sm text-gray-600">Substitution</h3>
            <p id="res-subst" class="text-lg font-semibold mt-1">—</p>
          </div>
        </div>
      </section>

      <!-- 5) Authoritative Content Ecosystem -->
      <section class="bg-white p-6 rounded-lg shadow-sm prose">
        <!-- a) Data source -->
        <h2>Data Source &amp; Methodology</h2>
        <p><strong>AuthoritativeDataSource:</strong> Standard geometry references such as <a href="https://mathworld.wolfram.com/" rel="nofollow">Wolfram MathWorld</a> and classical solid-geometry textbooks (e.g., H. S. M. Coxeter, <em>Introduction to Geometry</em>, 1961). All formulas used are standard, time-invariant geometric identities.</p>
        <p><em>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</em></p>

        <!-- b) Formula explained -->
        <h2>The Formula, Explained</h2>
        <div class="formula-box">
          <p><strong>Cube:</strong> $S = 6a^2$</p>
          <p><strong>Cuboid:</strong> $S = 2(lw + lh + wh)$</p>
          <p><strong>Sphere:</strong> $S = 4\pi r^2$</p>
          <p><strong>Cylinder (right):</strong> $S = 2\pi r^2 + 2\pi r h$</p>
          <p><strong>Cone (right):</strong> $S = \pi r^2 + \pi r s,\quad s=\sqrt{r^2+h^2}$</p>
          <p><strong>Triangular prism:</strong> $S = 2A_{\triangle} + P_{\triangle}L,\quad A_{\triangle}=\frac{1}{2}ab\sin C\ (\text{here we use sides }a,b,c \text{ via Heron}),\ P_{\triangle}=a+b+c$</p>
          <p><strong>Square pyramid:</strong> $S = a^2 + 2 a s,\quad s=\sqrt{\left(\frac{a}{2}\right)^2 + h^2}$</p>
        </div>

        <!-- c) Glossary -->
        <h2>Glossary of Variables</h2>
        <ul>
          <li><strong>a, b, c, l, w, h, r, s, L</strong> — lengths in the chosen unit.</li>
          <li><strong>S</strong> — total surface area in the squared unit (e.g., m², in²).</li>
          <li><strong>π</strong> — 3.141592653589793…</li>
        </ul>

        <!-- d) Worked example -->
        <h2>How It Works: A Step-by-Step Example</h2>
        <h3>Example — Cylinder in centimeters</h3>
        <ol>
          <li>Select <em>Right Circular Cylinder</em> and set unit to <em>cm</em>.</li>
          <li>Enter <strong>r = 5 cm</strong>, <strong>h = 12 cm</strong>.</li>
          <li>Formula: $S = 2\pi r^2 + 2\pi r h$.</li>
          <li>Substitute: $S = 2\pi(5)^2 + 2\pi(5)(12) = 50\pi + 120\pi = 170\pi\ \text{cm}^2 \approx 534.07\ \text{cm}^2$.</li>
        </ol>

        <!-- e) FAQ -->
        <h2>Frequently Asked Questions</h2>
        <details>
          <summary>What’s the difference between lateral area and total surface area?</summary>
          <p>Lateral area excludes the area of bases (e.g., the top and bottom of a cylinder). Total surface area includes every exterior face.</p>
        </details>
        <details>
          <summary>Can I mix units?</summary>
          <p>No. Enter all dimensions in the same length unit. The tool reports area in the squared version of that unit.</p>
        </details>
        <details>
          <summary>What if I only know slant height for a cone or pyramid?</summary>
          <p>That’s supported: the calculator computes or uses slant height where appropriate. For a cone, $s=\sqrt{r^2+h^2}$; for a square pyramid, $s=\sqrt{(a/2)^2+h^2}$.</p>
        </details>
        <details>
          <summary>How accurate are the results?</summary>
          <p>Formulas are exact. Rounding is applied only to displayed values; adjust the “decimals” field to see more precision.</p>
        </details>
        <details>
          <summary>Do I need to include thickness?</summary>
          <p>Surface area is a two-dimensional measure of the boundary. If thickness matters (e.g., coatings), convert area to coverage using the product’s spread rate.</p>
        </details>
        <details>
          <summary>Is this suitable for professional work?</summary>
          <p>Yes—these are standard identities used across engineering and architecture. Always verify inputs and units; for specialized shapes, consult project codes/specs.</p>
        </details>

        <!-- 6) Author & Review -->
        <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700">
          <p><strong>Tool developed by Ugo Candido.</strong> Content verified by the CalcDomain Editorial Board.<br />
          Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
        </div>
      </section>
    </div>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-4 lg:px-6 py-8 text-center text-gray-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-4 space-x-4">
        <a href="https://calcdomain.com/about" class="hover:text-blue-600">About</a>
        <a href="https://calcdomain.com/contact" class="hover:text-blue-600">Contact</a>
        <a href="https://calcdomain.com/privacy" class="hover:text-blue-600">Privacy</a>
        <a href="https://calcdomain.com/terms" class="hover:text-blue-600">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator Logic (defer + at end for CWV) -->
  <script defer>
  (function(){
    const $ = (id) => document.getElementById(id);

    const SHAPES = {
      cube: {
        label: "Cube",
        fields: [
          fNum("a", "Edge a", "Length of one edge", true)
        ],
        formula: "S = 6a^2",
        compute: ({a}) => 6*a*a,
        subst: ({a,u}) => `S = 6\\cdot ${fmt(a)}^2\\;${u}^2`
      },
      cuboid: {
        label: "Cuboid",
        fields: [
          fNum("l", "Length l", "Longest edge", true),
          fNum("w", "Width w", "Side edge", true),
          fNum("h", "Height h", "Vertical edge", true)
        ],
        formula: "S = 2(lw + lh + wh)",
        compute: ({l,w,h}) => 2*(l*w + l*h + w*h),
        subst: ({l,w,h,u}) => `S = 2\\big(${fmt(l)}${u}\\cdot ${fmt(w)}${u} + ${fmt(l)}${u}\\cdot ${fmt(h)}${u} + ${fmt(w)}${u}\\cdot ${fmt(h)}${u}\\big)`
      },
      sphere: {
        label: "Sphere",
        fields: [
          fNum("r", "Radius r", "Half the diameter", true)
        ],
        formula: "S = 4\\pi r^2",
        compute: ({r}) => 4*Math.PI*r*r,
        subst: ({r,u}) => `S = 4\\pi\\cdot ${fmt(r)}^2\\;${u}^2`
      },
      cylinder: {
        label: "Right Circular Cylinder",
        fields: [
          fNum("r", "Radius r", "Half the base diameter", true),
          fNum("h", "Height h", "Distance between bases", true)
        ],
        formula: "S = 2\\pi r^2 + 2\\pi r h",
        compute: ({r,h}) => 2*Math.PI*r*r + 2*Math.PI*r*h,
        subst: ({r,h,u}) => `S = 2\\pi\\cdot ${fmt(r)}^2 + 2\\pi\\cdot ${fmt(r)}\\cdot ${fmt(h)}\\;${u}^2`
      },
      cone: {
        label: "Right Circular Cone",
        fields: [
          fNum("r", "Radius r", "Base radius", true),
          fNum("h", "Height h", "Axial height", true)
        ],
        formula: "S = \\pi r^2 + \\pi r s\\,,\\ s=\\sqrt{r^2+h^2}",
        compute: ({r,h}) => {
          const s = Math.sqrt(r*r + h*h);
          return Math.PI*r*r + Math.PI*r*s;
        },
        subst: ({r,h,u}) => {
          const s = Math.sqrt(r*r + h*h);
          return `s=\\sqrt{${fmt(r)}^2+${fmt(h)}^2}=${fmt(s)}\\ ${u},\\; S=\\pi${fmt(r)}^2+\\pi\\cdot ${fmt(r)}\\cdot ${fmt(s)}\\;${u}^2`;
        }
      },
      triangular_prism: {
        label: "Triangular Prism (sides a,b,c)",
        fields: [
          fNum("a", "Triangle side a", "Base edge a", true),
          fNum("b", "Triangle side b", "Base edge b", true),
          fNum("c", "Triangle side c", "Base edge c", true),
          fNum("L", "Prism length L", "Length along the prism", true)
        ],
        formula: "S = 2A_{\\triangle} + P_{\\triangle}L\\quad \\text{with Heron: }A_{\\triangle}=\\sqrt{s(s-a)(s-b)(s-c)},\\ s=\\tfrac{a+b+c}{2}",
        compute: ({a,b,c,L}) => {
          if (!isTriangle(a,b,c)) return NaN;
          const s = (a+b+c)/2;
          const A = Math.sqrt(Math.max(0, s*(s-a)*(s-b)*(s-c)));
          const P = a+b+c;
          return 2*A + P*L;
        },
        subst: ({a,b,c,L,u}) => {
          const s = (a+b+c)/2;
          const A = Math.sqrt(Math.max(0, s*(s-a)*(s-b)*(s-c)));
          const P = a+b+c;
          return `s=\\frac{${fmt(a)}+${fmt(b)}+${fmt(c)}}{2}=${fmt(s)}\\ ${u},\\ A=\\sqrt{s(s-a)(s-b)(s-c)}=${fmt(A)}\\ ${u}^2,\\ P=${fmt(P)}\\ ${u},\\ S=2A+PL`;
        }
      },
      square_pyramid: {
        label: "Square Pyramid",
        fields: [
          fNum("a", "Base edge a", "Side of the square base", true),
          fNum("h", "Height h", "Vertical height (apex to base)", true)
        ],
        formula: "S = a^2 + 2 a s\\,,\\ s=\\sqrt{(a/2)^2 + h^2}",
        compute: ({a,h}) => {
          const s = Math.sqrt((a/2)*(a/2) + h*h);
          return a*a + 2*a*s;
        },
        subst: ({a,h,u}) => {
          const s = Math.sqrt((a/2)*(a/2) + h*h);
          return `s=\\sqrt{(${fmt(a)}/2)^2+${fmt(h)}^2}=${fmt(s)}\\ ${u},\\; S=${fmt(a)}^2+2\\cdot ${fmt(a)}\\cdot ${fmt(s)}\\;${u}^2`;
        }
      }
    };

    // Utilities
    function fNum(id, label, help, required=false) {
      return { id, label, help, required, type: "number" };
    }
    function fmt(x) {
      return (Math.round(x*1e6)/1e6).toString();
    }
    function isTriangle(a,b,c) {
      return a+b>c && a+c>b && b+c>a;
    }
    function unitLabel(u) { return u + "²"; }

    // Build dynamic fields according to shape
    const fieldsWrap = $("fields");
    const shapeSel = $("shape");
    const unitSel  = $("unit");
    const precision = $("precision");
    const btnCalc = $("btn-calc");
    const btnReset = $("btn-reset");
    const btnPrint = $("btn-print");

    const resSurface = $("res-surface");
    const resFormula = $("res-formula");
    const resSubst   = $("res-subst");

    // Validation helpers
    function setError(input, id, msg) {
      let el = document.getElementById(id);
      if (!el) {
        el = document.createElement("p");
        el.id = id;
        el.className = "mt-1 text-sm text-red-700";
        input.insertAdjacentElement("afterend", el);
      }
      el.textContent = msg;
      input.setAttribute("aria-invalid", "true");
      const existing = input.getAttribute("aria-describedby") || "";
      input.setAttribute("aria-describedby", (existing ? existing + " " : "") + id);
    }
    function clearError(input, id) {
      const el = document.getElementById(id);
      if (el) el.remove();
      input.removeAttribute("aria-invalid");
      const existing = (input.getAttribute("aria-describedby") || "").split(" ").filter(Boolean).filter(x=>x!==id).join(" ");
      if (existing) input.setAttribute("aria-describedby", existing); else input.removeAttribute("aria-describedby");
    }

    function renderFields() {
      const shape = shapeSel.value;
      const cfg = SHAPES[shape];
      fieldsWrap.innerHTML = "";
      cfg.fields.forEach(field => {
        const wrap = document.createElement("div");
        const inputId = `fld-${field.id}`;
        const helpId  = `help-${field.id}`;
        const errId   = `err-${field.id}`;

        wrap.innerHTML = `
          <label for="${inputId}" class="block text-sm font-medium text-gray-800 mb-1">
            ${field.label} ${field.required?'<span aria-hidden="true" class="text-red-600">*</span>':''}
            <button type="button" class="ml-2 inline-flex items-center justify-center w-7 h-7 rounded-full border border-gray-300 text-gray-700"
                    aria-expanded="false" aria-controls="${helpId}" aria-label="More info about ${field.label}">
              ?
            </button>
          </label>
          <input id="${inputId}" name="${field.id}" inputmode="decimal" type="number" step="any" min="0"
                 class="w-full border border-gray-300 rounded-md px-3 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
                 ${field.required ? 'aria-required="true"' : ''} />
          <p id="${helpId}" class="text-xs text-gray-600 mt-1 hidden">${field.help}</p>
        `;
        fieldsWrap.appendChild(wrap);

        const btn = wrap.querySelector("button");
        const help = wrap.querySelector(`#${helpId}`);
        btn.addEventListener("click", () => {
          const open = help.classList.toggle("hidden");
          btn.setAttribute("aria-expanded", (!open).toString());
        });

        const input = wrap.querySelector("input");
        input.addEventListener("blur", () => {
          const v = parseFloat(input.value);
          if (field.required && (isNaN(v) || v<=0)) {
            setError(input, errId, `Enter a positive number for ${field.label}.`);
          } else {
            clearError(input, errId);
          }
        });
      });

      // Update formula box in results (exact)
      resFormula.innerHTML = `<span class="text-gray-800">\\(${cfg.formula}\\)</span>`;
      window.MathJax && MathJax.typesetPromise && MathJax.typesetPromise();
    }

    // Compute handler
    function compute() {
      const shape = shapeSel.value;
      const cfg = SHAPES[shape];
      const u = unitSel.value;
      const p = clampInt(precision.value, 0, 10);

      // gather values
      const vals = { u };
      let hasError = false;
      cfg.fields.forEach(field => {
        const input = document.querySelector(`input[name='${field.id}']`);
        const errId = `err-${field.id}`;
        const v = parseFloat(input.value);
        if (field.required && (isNaN(v) || v<=0)) {
          setError(input, errId, `Enter a positive number for ${field.label}.`);
          hasError = true;
        } else {
          clearError(input, errId);
          vals[field.id] = v;
        }
      });
      if (hasError) { resSurface.textContent = "—"; resSubst.textContent = "—"; return; }

      let S = cfg.compute(vals);
      if (!isFinite(S)) { resSurface.textContent = "—"; resSubst.textContent = "Check inputs."; return; }

      const num = (Math.round(S * Math.pow(10, p)) / Math.pow(10, p)).toLocaleString(undefined, {maximumFractionDigits:p});
      resSurface.textContent = `${num} ${unitLabel(u)}`;
      resSubst.innerHTML = `<span class="text-gray-800">\\(${cfg.subst(vals)}\\)</span>`;
      window.MathJax && MathJax.typesetPromise && MathJax.typesetPromise();
    }

    function resetAll() {
      // Reset unit & precision
      unitSel.value = "cm";
      precision.value = 3;
      renderFields();
      // sensible defaults
      quickDefaults();
      resSurface.textContent = "—";
      resSubst.textContent = "—";
    }

    function quickDefaults() {
      // Set sample defaults per shape to speed testing
      const shape = shapeSel.value;
      const setVal = (name, val) => {
        const el = document.querySelector(`input[name='${name}']`);
        if (el) el.value = val;
      };
      if (shape==="cube") setVal("a", 10);
      if (shape==="cuboid") { setVal("l", 20); setVal("w", 10); setVal("h", 8); }
      if (shape==="sphere") setVal("r", 5);
      if (shape==="cylinder") { setVal("r", 5); setVal("h", 12); }
      if (shape==="cone") { setVal("r", 6); setVal("h", 10); }
      if (shape==="triangular_prism") { setVal("a", 3); setVal("b", 4); setVal("c", 5); setVal("L", 10); }
      if (shape==="square_pyramid") { setVal("a", 8); setVal("h", 12); }
    }

    function clampInt(x, min, max){
      const n = parseInt(x,10);
      if (isNaN(n)) return min;
      return Math.max(min, Math.min(max, n));
    }

    // Wire up
    shapeSel.addEventListener("change", () => { renderFields(); quickDefaults(); });
    unitSel.addEventListener("change", () => { /* unit label only changes */ });
    $("btn-calc").addEventListener("click", compute);
    $("btn-reset").addEventListener("click", resetAll);
    $("btn-print").addEventListener("click", () => window.print());

    // init
    renderFields();
    quickDefaults();
    compute();

  })();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<title>Molarity Calculator | Chemistry Tool | CalcDomain</title>
<meta content="Professional molarity calculator to compute solution concentration (M), required mass of solute, or required volume. Supports unit conversions (µg–g, µL–L, µM–M), inline validation, and step-by-step methodology." name="description"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="Ugo Candido" name="author"/>
<meta content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1" name="robots"/>
<link href="https://calcdomain.com/molarity.html" rel="canonical"/>
<meta content="website" property="og:type"/>
<meta content="Molarity Calculator" property="og:title"/>
<meta content="Compute molarity (M), required mass, or volume with unit conversions and step-by-step guidance." property="og:description"/>
<meta content="https://calcdomain.com/molarity-calculator" property="og:url"/>
<meta content="CalcDomain" property="og:site_name"/>
<meta content="summary" name="twitter:card"/>
<meta content="#005A9C" name="theme-color"/>
<style>
    /* --- Enhanced CalcDomain CSS with Mobile-First Design & Accessibility --- */
    :root {
      --primary-color:#005A9C; --secondary-color:#003F6E; --accent-color:#00A4E4;
      --background-color:#F8F9FA; --surface-color:#FFFFFF;
      --text-color:#212529; --muted-text-color:#6C757D; --border-color:#DEE2E6;
      --success-color:#198754; --error-color:#DC3545; --warning-color:#FFC107;

      --font-sans-serif:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
      --font-monospace:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;

      --touch-target-min:48px; --touch-target-optimal:60px;
      --input-padding:clamp(.75rem,2vw,1rem);
      --border-radius-button:8px; --border-radius-card:12px;

      --transition-standard:.2s ease-in-out; --transition-fast:.1s ease-in-out;

      --container-max-width:1200px; --sidebar-width:clamp(300px,40vw,480px);
      --gap-small:.5rem; --gap-medium:1rem; --gap-large:2rem;

      --overlay-bg:rgba(0,0,0,.4);
    }
    @media (prefers-contrast: high){
      :root{
        --primary-color:#000080; --secondary-color:#000;
        --text-color:#000; --border-color:#000; --background-color:#fff;
      }
    }
    @media (prefers-reduced-motion: reduce){
      *,*::before,*::after{
        animation-duration:.01ms!important; animation-iteration-count:1!important;
        transition-duration:.01ms!important; scroll-behavior:auto!important;
      }
    }

    *,*::before,*::after{ box-sizing:border-box; margin:0; padding:0; }
    html{ scroll-behavior:smooth; font-size:clamp(16px,2.5vw,18px); }
    body{
      font-family:var(--font-sans-serif);
      background:var(--background-color);
      color:var(--text-color);
      line-height:1.6;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .skip-link{
      position:absolute; top:-40px; left:6px;
      background:var(--primary-color); color:#fff;
      padding:8px 16px; z-index:1000; text-decoration:none;
      border-radius:0 0 4px 4px; font-weight:600;
    }
    .skip-link:focus{ top:0; }

    h1,h2,h3,h4{ margin-bottom:.75rem; font-weight:700; line-height:1.2; color:var(--secondary-color); }
    h1{ font-size:clamp(1.8rem,4vw,2.5rem); }
    h2{ font-size:clamp(1.5rem,3.5vw,2rem); }
    h3{ font-size:clamp(1.2rem,3vw,1.5rem); }
    p{ margin-bottom:1rem; max-width:70ch; }
    a{ color:var(--primary-color); text-decoration:none; }
    a:hover{ color:var(--secondary-color); text-decoration:underline; }
    a:focus{ outline:3px solid var(--primary-color); outline-offset:2px; border-radius:2px; }
    code,kbd{ font-family:var(--font-monospace); background:#e9ecef; padding:.15em .35em; border-radius:3px; }

    .container{ max-width:var(--container-max-width); margin:0 auto; padding:0 clamp(1rem,4vw,2rem); }
    .main-content{ padding:var(--gap-large) 0; }

    /* Header (non-sticky by requirement) */
    .site-header{
      background:var(--surface-color);
      padding:.75rem 0;
      border-bottom:1px solid var(--border-color);
      box-shadow:0 2px 4px rgba(0,0,0,.03);
      position:static;
    }
    .header-content{
      display:grid;
      grid-template-columns:auto 1fr auto;
      align-items:center;
      gap:var(--gap-medium);
    }
    .logo{ font-weight:700; color:var(--primary-color); font-size:clamp(1.1rem,3vw,1.35rem); }
    .site-search{ display:flex; align-items:center; gap:.5rem; }
    .site-search input[type="search"]{
      flex:1 1 auto; min-width:0;
      padding:.6rem .75rem; border:1px solid var(--border-color);
      border-radius:8px; background:#fff;
    }
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:var(--input-padding) 1rem; font-size:.95rem; font-weight:600;
      border-radius:var(--border-radius-button); cursor:pointer;
      transition:all var(--transition-standard); border:1px solid transparent;
      min-height:var(--touch-target-min); min-width:var(--touch-target-min);
      gap:.5rem; text-decoration:none;
    }
    .btn-primary{ background:var(--primary-color); color:#fff; border-color:var(--primary-color); }
    .btn-secondary{ background:transparent; color:var(--primary-color); border-color:var(--primary-color); }
    .btn:focus{ outline:3px solid var(--primary-color); outline-offset:2px; }

    nav.breadcrumb{ margin:.5rem 0 1rem; font-size:.9rem; color:var(--muted-text-color); }
    nav.breadcrumb a{ color:inherit; }
    nav.breadcrumb a:hover{ color:var(--primary-color); }

    /* Calculator layout */
    .calculator-layout{
      display:grid; grid-template-columns:1fr; gap:2rem; margin-top:1rem;
    }
    @media (min-width: 992px){
      .calculator-layout{ grid-template-columns:var(--sidebar-width) 1fr; align-items:start; }
    }

    .calculator-container{
      background:var(--surface-color);
      border:1px solid var(--border-color);
      border-radius:12px;
      padding:clamp(1rem,2.5vw,1.5rem);
    }
    .form-group{ margin-bottom:1rem; }
    .form-group label{ display:block; font-weight:600; margin-bottom:.35rem; }
    .help-inline{
      display:inline-flex; align-items:center; gap:.35rem;
    }
    .tooltip-btn{
      inline-size:var(--touch-target-min); block-size:var(--touch-target-min);
      display:inline-flex; align-items:center; justify-content:center;
      border-radius:50%; background:#e9f2fb; color:#0b5cab; border:1px solid #b6d4fe;
      font-weight:700; cursor:pointer; margin-left:.25rem;
    }
    .tooltip-btn:focus{ outline:3px solid var(--primary-color); outline-offset:2px; }
    .tooltip{ display:none; margin:.35rem 0 0; font-size:.9rem; color:#0b5cab; background:#eef6ff; border:1px solid #b6d4fe; padding:.5rem .75rem; border-radius:6px; }
    .tooltip[data-open="true"]{ display:block; }

    .row{ display:grid; grid-template-columns:1fr 1fr; gap:.75rem; }
    @media (max-width:480px){ .row{ grid-template-columns:1fr; } }

    .input-group{ display:grid; grid-template-columns:1fr auto; gap:.5rem; align-items:center; }
    .form-control, .select{
      width:100%; min-height:var(--touch-target-min);
      padding:.7rem .9rem; font-size:1rem;
      border:1px solid var(--border-color); border-radius:8px;
      background:#fff; color:var(--text-color);
      transition:border-color var(--transition-fast), box-shadow var(--transition-fast);
    }
    .form-control:focus, .select:focus{
      outline:none; border-color:var(--primary-color);
      box-shadow:0 0 0 3px rgba(0,90,156,.15);
    }
    .form-control[aria-invalid="true"]{ border-color:var(--error-color); }
    .select{ padding-right:2rem; }

    .radio-group{
      display:flex; gap:.5rem; border:1px solid var(--border-color);
      border-radius:8px; padding:.25rem;
    }
    .radio-pill{
      position:relative; flex:1; display:flex; align-items:center; justify-content:center;
    }
    .radio-pill input[type="radio"]{ position:absolute; opacity:0; inset:0; }
    .radio-pill label{
      width:100%; text-align:center; padding:.6rem; border-radius:6px; cursor:pointer; min-height:var(--touch-target-min);
      border:1px solid transparent;
    }
    .radio-pill input[type="radio"]:checked + label{ background:var(--primary-color); color:#fff; }
    .radio-pill input[type="radio"]:focus + label{ outline:3px solid var(--primary-color); outline-offset:2px; }

    .error-message{ color:var(--error-color); font-size:.9rem; margin-top:.25rem; min-height:1.25em; }

    .results-container{
      background:var(--background-color); border:1px solid var(--border-color);
      border-radius:12px; padding:clamp(1rem,2.5vw,1.5rem);
      min-height:260px;
    }
    .results-grid{ display:grid; grid-template-columns:1fr; gap:.75rem; }
    .result-item{ display:flex; align-items:baseline; justify-content:space-between; gap:.75rem; padding:.5rem 0; border-bottom:1px dashed var(--border-color); }
    .result-item:last-child{ border-bottom:none; }
    .result-label{ color:var(--muted-text-color); }
    .result-value{ font-weight:700; color:var(--success-color); font-size:1.15rem; }
    .steps{ font-size:.95rem; margin-top:.75rem; color:#24486a; background:#eef6ff; border:1px solid #cfe2ff; border-radius:8px; padding:.75rem; }

    .content-container h2{ margin-top:2rem; border-bottom:1px solid var(--border-color); padding-bottom:.4rem; }
    .formula-box{ background:#e9ecef; padding:1rem; border-radius:8px; margin:1rem 0; text-align:center; overflow-x:auto; }
    .glossary{ margin-top:.5rem; }
    .glossary li{ margin:.35rem 0; }

    .author-box{
      font-size:.95rem; color:var(--muted-text-color); margin-top:2rem;
      border-top:1px solid var(--border-color); padding-top:1rem;
    }

    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
    }
  </style>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Molarity Calculator",
  "description": "Professional molarity calculator to compute solution concentration (M), required mass of solute, or required volume with unit conversions and step-by-step methodology.",
  "url": "https://calcdomain.com/molarity.html",
  "inLanguage": "en",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  },
  "mainEntity": [
    {
      "@type": "HowTo",
      "name": "How It Works: A Step-by-Step Example",
      "description": "Compute the mass of NaCl required to make 250 mL of 0.5 M solution.",
      "totalTime": "PT1M",
      "supply": [
        {
          "@type": "HowToSupply",
          "name": "Molecular weight (NaCl) = 58.44 g/mol"
        },
        {
          "@type": "HowToSupply",
          "name": "Desired molarity = 0.5 M"
        },
        {
          "@type": "HowToSupply",
          "name": "Volume = 250 mL"
        }
      ],
      "tool": [
        {
          "@type": "HowToTool",
          "name": "Molarity Calculator"
        }
      ],
      "step": [
        {
          "@type": "HowToStep",
          "name": "Convert units",
          "text": "Convert 250 mL to liters: 250 mL = 0.250 L."
        },
        {
          "@type": "HowToStep",
          "name": "Apply formula",
          "text": "Mass (g) = M × MW × V = 0.5 mol/L × 58.44 g/mol × 0.250 L = 7.305 g."
        },
        {
          "@type": "HowToStep",
          "name": "Result",
          "text": "You need 7.305 g (7305 mg) of NaCl."
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is molarity (M)?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Molarity is the amount-of-substance concentration defined as moles of solute per liter of solution (mol/L)."
          }
        },
        {
          "@type": "Question",
          "name": "Which units does this calculator support?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Mass: µg, mg, g. Volume: µL, mL, L. Concentration: µM, mM, M. The tool converts everything to base SI internally."
          }
        },
        {
          "@type": "Question",
          "name": "Do I need density to use this calculator?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No. Density is not required because molarity uses volume of solution (L), not mass or volume of solvent."
          }
        },
        {
          "@type": "Question",
          "name": "How accurate are the results?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Calculations are exact given your inputs; rounding is applied only to the displayed values according to the decimals you choose."
          }
        },
        {
          "@type": "Question",
          "name": "Where do the formulas come from?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "They follow IUPAC’s definition of amount-of-substance concentration and the standard relationship: M = (mass/MW)/V."
          }
        },
        {
          "@type": "Question",
          "name": "Can I compute required volume for a given mass and molarity?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. Choose the 'Volume' mode, enter molecular weight, mass, and target concentration. The tool returns L and mL."
          }
        }
      ]
    }
  ]
}
  </script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="search.js" defer></script>
<!-- MathJax for LaTeX formulas -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['\(','\)'], ['$', '$']],
      displayMath: [['\[','\]']]
    },
    svg: { fontCache: 'global' }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link rel="preload" href="/assets/js/mobile-menu.js" as="script">
<link rel="preload" href="/assets/js/page-enhancements.js" as="script">

</head>
<body>
<a class="skip-link" href="#main-content">Skip to main content</a>

<main class="main-content" id="main-content" role="main">
<div class="container">
<nav aria-label="Breadcrumb" class="breadcrumb">
<a href="/">Home</a> / <a href="https://calcdomain.com/science.html">Science</a> / <a href="https://calcdomain.com/science/chemistry.html">Chemistry</a> / Molarity Calculator
      </nav>
<h1>Molarity Calculator</h1>
<p>This professional-grade molarity calculator helps scientists, students, and lab technicians compute solution molarity (M), the required mass of a solute, or the volume of solution needed. It supports unit conversions, inline validation, and clear step-by-step outputs to reduce setup errors at the bench.</p>
<section aria-labelledby="calc-heading" class="calculator-container" id="molarity-calculator">
<h2 id="calc-heading">Interactive Calculator</h2>
<div class="form-group">
<fieldset>
<legend class="sr-only">Choose calculation mode</legend>
<div aria-label="Calculation mode" class="radio-group" role="radiogroup">
<div class="radio-pill">
<input checked="" id="modeMolarity" name="calcMode" type="radio" value="molarity"/>
<label for="modeMolarity">Molarity</label>
</div>
<div class="radio-pill">
<input id="modeMass" name="calcMode" type="radio" value="mass"/>
<label for="modeMass">Mass</label>
</div>
<div class="radio-pill">
<input id="modeVolume" name="calcMode" type="radio" value="volume"/>
<label for="modeVolume">Volume</label>
</div>
</div>
</fieldset>
</div>
<div class="form-group">
<div class="help-inline">
<label for="mwInput">Molecular weight (g/mol) *</label>
<button aria-controls="mwTooltip" aria-expanded="false" aria-label="More info about molecular weight" class="tooltip-btn" id="mwTipBtn" type="button">?</button>
</div>
<div class="tooltip" id="mwTooltip" role="note">Enter the molar mass of the solute in grams per mole (e.g., NaCl = 58.44 g/mol).</div>
<input aria-describedby="mwTooltip mwError" aria-required="true" class="form-control" id="mwInput" inputmode="decimal" placeholder="e.g., 58.44" step="any" type="number"/>
<div aria-live="polite" class="error-message" id="mwError" role="alert"></div>
</div>
<div class="row" id="rowMass">
<div class="form-group">
<div class="help-inline">
<label for="massInput">Mass of solute *</label>
<button aria-controls="massTooltip" aria-expanded="false" aria-label="More info about mass" class="tooltip-btn" id="massTipBtn" type="button">?</button>
</div>
<div class="tooltip" id="massTooltip" role="note">Mass of the pure solute to dissolve. Choose units below.</div>
<div class="input-group">
<input aria-describedby="massTooltip massError" aria-required="true" class="form-control" id="massInput" inputmode="decimal" placeholder="e.g., 7.305" step="any" type="number"/>
<select aria-label="Mass unit" class="select" id="massUnit">
<option value="g">g</option>
<option selected="" value="mg">mg</option>
<option value="ug">µg</option>
</select>
</div>
<div aria-live="polite" class="error-message" id="massError" role="alert"></div>
</div>
<div class="form-group" id="rowConc">
<div class="help-inline">
<label for="concInput">Concentration *</label>
<button aria-controls="concTooltip" aria-expanded="false" aria-label="More info about concentration" class="tooltip-btn" id="concTipBtn" type="button">?</button>
</div>
<div class="tooltip" id="concTooltip" role="note">Target molarity of the final solution. Choose units below.</div>
<div class="input-group">
<input aria-describedby="concTooltip concError" aria-required="true" class="form-control" id="concInput" inputmode="decimal" placeholder="e.g., 0.5" step="any" type="number"/>
<select aria-label="Concentration unit" class="select" id="concUnit">
<option selected="" value="M">M</option>
<option value="mM">mM</option>
<option value="uM">µM</option>
</select>
</div>
<div aria-live="polite" class="error-message" id="concError" role="alert"></div>
</div>
</div>
<div class="row" id="rowVolume">
<div class="form-group">
<div class="help-inline">
<label for="volInput">Solution volume *</label>
<button aria-controls="volTooltip" aria-expanded="false" aria-label="More info about volume" class="tooltip-btn" id="volTipBtn" type="button">?</button>
</div>
<div class="tooltip" id="volTooltip" role="note">Final total volume of the solution. Choose units below.</div>
<div class="input-group">
<input aria-describedby="volTooltip volError" aria-required="true" class="form-control" id="volInput" inputmode="decimal" placeholder="e.g., 250" step="any" type="number"/>
<select aria-label="Volume unit" class="select" id="volUnit">
<option value="L">L</option>
<option selected="" value="mL">mL</option>
<option value="uL">µL</option>
</select>
</div>
<div aria-live="polite" class="error-message" id="volError" role="alert"></div>
</div>
<div class="form-group">
<label for="decimals">Display rounding</label>
<select aria-label="Rounding decimals" class="select" id="decimals">
<option value="0">0 decimals</option>
<option value="1">1 decimal</option>
<option value="2">2 decimals</option>
<option selected="" value="3">3 decimals</option>
<option value="4">4 decimals</option>
<option value="5">5 decimals</option>
<option value="6">6 decimals</option>
</select>
</div>
</div>
<div class="form-group">
<button aria-label="Calculate molarity" class="btn btn-primary" id="calculateBtn" type="button">Calculate</button>
<button aria-label="Reset fields" class="btn btn-secondary" id="resetBtn" type="button">Reset</button>
</div>
</section>
<section aria-labelledby="results-heading" class="results-container" id="results">
<h2 id="results-heading">Results</h2>
<div aria-live="polite" class="results-grid">
<div class="result-item" id="resMolarity">
<span class="result-label">Molarity</span>
<span class="result-value" id="molarityValue">—</span>
</div>
<div class="result-item" id="resMass">
<span class="result-label">Required mass</span>
<span class="result-value" id="massValue">—</span>
</div>
<div class="result-item" id="resVolume">
<span class="result-label">Required volume</span>
<span class="result-value" id="volumeValue">—</span>
</div>
<div class="result-item" id="resDerived">
<span class="result-label">Derived units</span>
<span class="result-value" id="derivedValue">—</span>
</div>
</div>
<div aria-live="polite" class="steps" id="stepsBox">
          Enter values above and press Calculate to see the worked steps here.
        </div>
</section>
<section class="content-container" id="authoritative-content">
<h2>Data Source and Methodology</h2>
<p>
          Authoritative source: IUPAC, Compendium of Chemical Terminology (the “Gold Book”), 2nd ed. (1997) — “amount-of-substance concentration (molarity)”. Updated version: 2019. 
          Link: <a href="https://goldbook.iupac.org/terms/view/C01222" rel="nofollow noopener" target="_blank">https://goldbook.iupac.org/terms/view/C01222</a>.
          Supplementary unit standards: BIPM, The International System of Units (SI Brochure), 9th ed. (2019), for liter and mole.
        </p>
<p><strong>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</strong></p>
<h2>The Formula Explained</h2>
<div aria-label="Formulas in LaTeX" class="formula-box">
<div>
            Molarity: \( M = \dfrac{n}{V} \) where \( n \) is moles of solute and \( V \) is solution volume in liters.
          </div>
<div style="margin-top:.5rem;">
            Using mass and molecular weight: \( M = \dfrac{m / MW}{V} = \dfrac{m}{MW \cdot V} \)
          </div>
<div style="margin-top:.5rem;">
            Rearrangements: 
            \( m = M \cdot MW \cdot V \) and \( V = \dfrac{m}{MW \cdot M} \)
          </div>
<div style="margin-top:.5rem;">
            Unit conversions: \( 1\,\text{L} = 1000\,\text{mL} = 10^6\,\mu\text{L};\quad 1\,\text{g} = 1000\,\text{mg} = 10^6\,\mu\text{g} \)
          </div>
</div>
<h2>Glossary of Variables</h2>
<ul class="glossary">
<li>Molecular weight (MW): mass per mole of solute, in g/mol.</li>
<li>Mass (m): amount of solute in grams (input may be µg, mg, g).</li>
<li>Volume (V): final solution volume in liters (input may be µL, mL, L).</li>
<li>Molarity (M): concentration in mol/L (display in µM, mM, or M).</li>
<li>Derived units: alternate views of the main result to minimize manual conversions.</li>
</ul>
<h2>How It Works: A Step-by-Step Example</h2>
<p><strong>Problem:</strong> How many grams of NaCl are needed for 250 mL of a 0.5 M solution?</p>
<ol>
<li>Input MW = 58.44 g/mol (NaCl), target concentration = 0.5 M, volume = 250 mL.</li>
<li>Convert volume to liters: 250 mL = 0.250 L.</li>
<li>Apply formula: \( m = M \cdot MW \cdot V = 0.5 \cdot 58.44 \cdot 0.250 = 7.305 \,\text{g} \).</li>
<li>Convert to mg if desired: 7.305 g = 7305 mg.</li>
</ol>
<p><em>Answer:</em> 7.305 g of NaCl (7305 mg).</p>
<h2>Frequently Asked Questions (FAQ)</h2>
<div>
<h3>What is molarity (M)?</h3>
<p>Molarity is moles of solute per liter of solution (mol/L), per IUPAC definition.</p>
<h3>Which modes does this calculator support?</h3>
<p>You can compute molarity from mass and volume, required mass from molarity and volume, or required volume from mass and molarity.</p>
<h3>How do I choose the correct units?</h3>
<p>Select the unit next to each input field. The tool converts everything to base SI internally to avoid mistakes.</p>
<h3>Does purity or hydration state matter?</h3>
<p>This calculator assumes pure anhydrous solute. If your compound has waters of hydration or known purity, adjust the effective MW or mass accordingly.</p>
<h3>How many decimals should I use?</h3>
<p>Use enough decimals to reflect your instrument precision. You can set the display rounding; internal math uses full precision.</p>
<h3>Can I calculate normality (N)?</h3>
<p>No. Normality depends on reaction equivalence and is not covered here. Convert to molarity once you know the equivalence factor.</p>
<h3>Why is density not required?</h3>
<p>Because molarity is defined using the final volume of solution. Density is relevant for mass or volume conversions of solvents but not needed for M directly.</p>
</div>
<div class="author-box">
<p>Strumento sviluppato da <strong>Ugo Candido</strong>,. Contenuti verificati da,.</p>
<p>Ultima revisione per l'accuratezza in data: September 15, 2025.</p>
</div>
</section>
</div>
</main>
<script defer="">
    (function(){
      'use strict';

      const $ = (id) => document.getElementById(id);

      // Elements
      const modeRadios = [$('modeMolarity'), $('modeMass'), $('modeVolume')];
      const mwInput = $('mwInput');
      const massInput = $('massInput');
      const massUnit = $('massUnit');
      const concInput = $('concInput');
      const concUnit = $('concUnit');
      const volInput = $('volInput');
      const volUnit = $('volUnit');
      const decimals = $('decimals');

      const mwError = $('mwError');
      const massError = $('massError');
      const concError = $('concError');
      const volError = $('volError');

      const calculateBtn = $('calculateBtn');
      const resetBtn = $('resetBtn');

      const resMolarity = $('molarityValue');
      const resMass = $('massValue');
      const resVolume = $('volumeValue');
      const resDerived = $('derivedValue');
      const stepsBox = $('stepsBox');

      const rowMass = $('rowMass');
      const rowVolume = $('rowVolume');
      const rowConc = $('rowConc');

      // Tooltips
      function setupTooltip(btnId, tipId, input){
        const btn = $(btnId);
        const tip = $(tipId);
        if(!btn || !tip) return;
        btn.addEventListener('click', () => {
          const open = tip.getAttribute('data-open') === 'true';
          tip.setAttribute('data-open', String(!open));
          btn.setAttribute('aria-expanded', String(!open));
        });
        // Ensure input describes tooltip
        if (input && input.getAttribute('aria-describedby')) {
          if (!input.getAttribute('aria-describedby').includes(tipId)) {
            input.setAttribute('aria-describedby', input.getAttribute('aria-describedby') + ' ' + tipId);
          }
        }
      }
      setupTooltip('mwTipBtn', 'mwTooltip', mwInput);
      setupTooltip('massTipBtn', 'massTooltip', massInput);
      setupTooltip('concTipBtn', 'concTooltip', concInput);
      setupTooltip('volTipBtn', 'volTooltip', volInput);

      // Unit factors
      const massToG = { g: 1, mg: 1e-3, ug: 1e-6 };
      const volToL = { L: 1, mL: 1e-3, uL: 1e-6 };
      const concToM = { M: 1, mM: 1e-3, uM: 1e-6 };

      // Mode UI switching
      function currentMode(){
        const r = modeRadios.find(r => r.checked);
        return r ? r.value : 'molarity';
      }
      function updateModeUI(){
        const mode = currentMode();
        // Show/hide field groups and tweak required flags for UX messaging
        if(mode === 'molarity'){
          // Need mass and volume; concentration field is not required
          rowMass.style.display = '';
          rowVolume.style.display = '';
          rowConc.style.display = 'none';
          concInput.setAttribute('aria-required', 'false');
          massInput.setAttribute('aria-required', 'true');
          volInput.setAttribute('aria-required', 'true');
        } else if (mode === 'mass'){
          // Need concentration and volume; mass field not required
          rowMass.style.display = 'none';
          rowVolume.style.display = '';
          rowConc.style.display = '';
          concInput.setAttribute('aria-required', 'true');
          massInput.setAttribute('aria-required', 'false');
          volInput.setAttribute('aria-required', 'true');
        } else {
          // volume mode: need mass and concentration
          rowMass.style.display = '';
          rowVolume.style.display = '';
          rowConc.style.display = '';
          concInput.setAttribute('aria-required', 'true');
          massInput.setAttribute('aria-required', 'true');
          volInput.setAttribute('aria-required', 'false'); // will be computed
        }
        clearErrors();
        quickCalculate();
      }
      modeRadios.forEach(r => r.addEventListener('change', updateModeUI));
      updateModeUI();

      // Validation helpers
      function setError(inputEl, errorEl, msg){
        if(!errorEl) return;
        errorEl.textContent = msg || '';
        inputEl && inputEl.setAttribute('aria-invalid', msg ? 'true' : 'false');
      }
      function clearErrors(){
        setError(mwInput, mwError, '');
        setError(massInput, massError, '');
        setError(concInput, concError, '');
        setError(volInput, volError, '');
      }
      function parseNumber(v){
        if (v === '' || v === null || typeof v === 'undefined') return NaN;
        return Number(v);
      }

      function validate(){
        let ok = true;
        const mode = currentMode();

        const mw = parseNumber(mwInput.value);
        if (!(mw > 0)){
          setError(mwInput, mwError, 'Enter a positive molecular weight (g/mol), e.g., 58.44.');
          ok = false;
        } else setError(mwInput, mwError, '');

        if (mode === 'molarity' || mode === 'volume'){
          const m = parseNumber(massInput.value);
          if (!(m >= 0) || (mode === 'volume' && !(m > 0))){
            setError(massInput, massError, mode === 'volume' ? 'Enter a positive mass of solute.' : 'Enter mass of solute (0 or greater).');
            ok = false;
          } else setError(massInput, massError, '');
        } else {
          setError(massInput, massError, '');
        }

        if (mode === 'mass' || mode === 'volume'){
          const c = parseNumber(concInput.value);
          if (!(c > 0)){
            setError(concInput, concError, 'Enter a positive target concentration.');
            ok = false;
          } else setError(concInput, concError, '');
        } else {
          setError(concInput, concError, '');
        }

        if (mode === 'molarity' || mode === 'mass'){
          const v = parseNumber(volInput.value);
          if (!(v > 0)){
            setError(volInput, volError, 'Enter a positive solution volume.');
            ok = false;
          } else setError(volInput, volError, '');
        } else {
          setError(volInput, volError, '');
        }
        return ok;
      }

      // Format helpers
      function fmt(n, d){
        if (!isFinite(n)) return '—';
        return Number(n).toLocaleString(undefined, { maximumFractionDigits: d, minimumFractionDigits: Math.min(d, 3) });
      }

      // Core calculation
      function calculate(){
        const d = Number(decimals.value);
        const mode = currentMode();

        const MW = parseNumber(mwInput.value);

        let resultM = NaN, resultMassG = NaN, resultVolL = NaN;
        let steps = [];

        try{
          if(!validate()) {
            updateResults({mode, M:NaN, mG:NaN, vL:NaN, d});
            return;
          }

          // Normalize units to base
          const massG = parseNumber(massInput.value) * (massToG[massUnit.value] || 1);
          const concM = parseNumber(concInput.value) * (concToM[concUnit.value] || 1);
          const volL  = parseNumber(volInput.value)  * (volToL[volUnit.value]   || 1);

          if (mode === 'molarity'){
            // M = (m / MW) / V
            resultM = (massG / MW) / volL;
            resultMassG = massG;
            resultVolL = volL;
            steps.push(`Convert units: mass = ${fmt(massG, d)} g, volume = ${fmt(volL, d)} L.`);
            steps.push(`Compute moles: n = mass / MW = ${fmt(massG, d)} / ${fmt(MW, d)} = ${fmt(massG/MW, d)} mol.`);
            steps.push(`Molarity: M = n / V = ${fmt(massG/MW, d)} / ${fmt(volL, d)} = ${fmt(resultM, d)} mol/L.`);
          } else if (mode === 'mass'){
            // m = M * MW * V
            resultM = concM;
            resultVolL = volL;
            resultMassG = concM * MW * volL;
            steps.push(`Convert units: target M = ${fmt(concM, d)} mol/L, volume = ${fmt(volL, d)} L.`);
            steps.push(`Mass: m = M × MW × V = ${fmt(concM, d)} × ${fmt(MW, d)} × ${fmt(volL, d)} = ${fmt(resultMassG, d)} g.`);
          } else {
            // volume = m / (MW * M)
            resultMassG = massG;
            resultM = concM;
            resultVolL = massG / (MW * concM);
            steps.push(`Convert units: mass = ${fmt(massG, d)} g, target M = ${fmt(concM, d)} mol/L.`);
            steps.push(`Volume: V = m / (MW × M) = ${fmt(massG, d)} / (${fmt(MW, d)} × ${fmt(concM, d)}) = ${fmt(resultVolL, d)} L.`);
          }
        } catch(e){
          // Fallback in case of unexpected parsing issues
        }
        updateResults({mode, M:resultM, mG:resultMassG, vL:resultVolL, d, steps});
      }

      function updateResults({mode, M, mG, vL, d, steps=[]}){
        // Update main metrics based on mode
        if (mode === 'molarity'){
          resMolarity.textContent = isFinite(M) ? `${fmt(M, d)} M (${fmt(M*1e3, d)} mM, ${fmt(M*1e6, d)} µM)` : '—';
          resMass.textContent = isFinite(mG) ? `${fmt(mG, d)} g (${fmt(mG*1e3, d)} mg)` : '—';
          resVolume.textContent = isFinite(vL) ? `${fmt(vL, d)} L (${fmt(vL*1e3, d)} mL)` : '—';
          resDerived.textContent = isFinite(M) ? `n = ${fmt(M * vL, d)} mol (from n = M×V)` : '—';
        } else if (mode === 'mass'){
          resMolarity.textContent = isFinite(M) ? `${fmt(M, d)} M (${fmt(M*1e3, d)} mM, ${fmt(M*1e6, d)} µM)` : '—';
          resMass.textContent = isFinite(mG) ? `${fmt(mG, d)} g (${fmt(mG*1e3, d)} mg)` : '—';
          resVolume.textContent = isFinite(vL) ? `${fmt(vL, d)} L (${fmt(vL*1e3, d)} mL)` : '—';
          resDerived.textContent = isFinite(M) && isFinite(vL) ? `n = ${fmt(M * vL, d)} mol` : '—';
        } else {
          resMolarity.textContent = isFinite(M) ? `${fmt(M, d)} M (${fmt(M*1e3, d)} mM, ${fmt(M*1e6, d)} µM)` : '—';
          resMass.textContent = isFinite(mG) ? `${fmt(mG, d)} g (${fmt(mG*1e3, d)} mg)` : '—';
          resVolume.textContent = isFinite(vL) ? `${fmt(vL, d)} L (${fmt(vL*1e3, d)} mL)` : '—';
          resDerived.textContent = isFinite(M) && isFinite(vL) ? `n = ${fmt(M * vL, d)} mol` : '—';
        }

        if (steps.length){
          stepsBox.innerHTML = `
            <strong>Calculation steps</strong><br>
            ${steps.map(s => `<div>${escapeHtml(s)}</div>`).join('')}
          `;
        } else {
          stepsBox.textContent = 'Enter values above and press Calculate to see the worked steps here.';
        }
      }

      function escapeHtml(s){
        return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
      }

      // Inline validation on blur
      [mwInput, massInput, concInput, volInput].forEach(inp => {
        if(!inp) return;
        inp.addEventListener('blur', validate);
        inp.addEventListener('input', () => { /* minimal debounce-free live calc to keep INP low */ });
      });

      // Quick calculation when changing units/decimals/mode
      [massUnit, concUnit, volUnit, decimals].forEach(sel => sel.addEventListener('change', calculate));
      calculateBtn.addEventListener('click', calculate);

      // Keyboard accessibility: Enter triggers calculate when focused on inputs
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && document.activeElement && document.activeElement.tagName.match(/INPUT|SELECT/)) {
          e.preventDefault();
          calculate();
        }
      });

      function quickCalculate(){
        // Lightweight immediate update without re-validating errors aggressively
        calculate();
      }

      resetBtn.addEventListener('click', () => {
        mwInput.value = '';
        massInput.value = '';
        concInput.value = '';
        volInput.value = '';
        massUnit.value = 'mg';
        concUnit.value = 'M';
        volUnit.value = 'mL';
        decimals.value = '3';
        clearErrors();
        resMolarity.textContent = '—';
        resMass.textContent = '—';
        resVolume.textContent = '—';
        resDerived.textContent = '—';
        stepsBox.textContent = 'Enter values above and press Calculate to see the worked steps here.';
        mwInput.focus();
      });

      // Pre-fill an example for delightful first run (does not block CWV)
      window.addEventListener('load', () => {
        mwInput.value = '58.44'; // NaCl
        concInput.value = '0.5';
        volInput.value = '250';
        massUnit.value = 'mg';
        concUnit.value = 'M';
        volUnit.value = 'mL';
        // Default to "Mass" mode for a popular task
        $('modeMass').checked = true;
        updateModeUI();
        calculate();
      });

    })();
  </script>


</body></html>
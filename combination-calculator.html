<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Combination Calculator — nCr & Combinations with Repetition</title>
  <meta name="description" content="Compute combinations nCr exactly (big-integer), plus combinations with repetition. Includes formulas, step-by-step example, glossary, FAQs, and accessible UI." />
  <link rel="canonical" href="https://calcdomain.com/combination-calculator.html" />
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com" defer></script>

  <!-- MathJax for LaTeX rendering -->
  <script defer>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      options: { skipHtmlTags: ['script','noscript','style','textarea','pre','code'] }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    /* Base font, focus ring, and prose sizing */
    html { scroll-behavior: smooth; }
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji"; }
    :root { --focus: 3px solid #2563eb; }
    :focus-visible { outline: var(--focus); outline-offset: 2px; }
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: .75rem; }
    .prose h3 { font-size: 1.125rem; font-weight: 700; margin-top: 1.25rem; margin-bottom: .5rem; }
    .prose p { line-height: 1.7; margin: .75rem 0; }
    .formula-box { background:#f3f4f6; border:1px solid #d1d5db; border-radius: .75rem; padding:1rem; overflow:auto; }
    .result-card { background:#fff; border:1px solid #e5e7eb; border-radius: .75rem; padding:1rem; }
    .result-card h4 { font-size:.95rem; color:#4b5563; margin-bottom:.25rem; }
    .result-card p { font-size:1.5rem; font-weight:800; color:#1d4ed8; word-break: break-word; }
    .a11y-help { font-size: .875rem; color:#374151; }
    .tooltip-panel { border:1px solid #e5e7eb; background:#fff; border-radius:.5rem; padding:.75rem; margin-top:.5rem; }
    /* Prevent CLS on results */
    #results-wrapper { min-height: 13rem; }
    /* Touch target sizing */
    .touch-target { min-height: 48px; min-width: 48px; }
    /* Table */
    table { border-collapse: collapse; width:100%; }
    th, td { padding:.5rem .75rem; border-bottom:1px solid #e5e7eb; }
    th { background:#f9fafb; text-align:left; font-weight:600; color:#374151; }
    /* Print */
    @media print {
      header, nav, aside, .no-print { display:none !important; }
      body { background:#fff; }
      main { padding:0; }
    }
  </style>

  <!-- JSON-LD: WebPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Combination Calculator — nCr & Combinations with Repetition",
    "description":"Compute combinations nCr exactly using big integers, plus combinations with repetition. Includes formulas, step-by-step example, glossary, and FAQs.",
    "url":"https://calcdomain.com/combination-calculator.html",
    "inLanguage":"en",
    "author":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"}
  }
  </script>

  <!-- JSON-LD: Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
      {"@type":"ListItem","position":2,"name":"Math","item":"https://calcdomain.com/math.html"},
      {"@type":"ListItem","position":3,"name":"Algebra","item":"https://calcdomain.com/subcategories/math-algebra.html"},
      {"@type":"ListItem","position":4,"name":"Combination Calculator","item":"https://calcdomain.com/combination-calculator.html"}
    ]
  }
  </script>

  <!-- JSON-LD: HowTo -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to compute combinations nCr",
    "description":"Enter n and r, optionally enable repetition, and get exact big-integer combinations.",
    "step":[
      {"@type":"HowToStep","name":"Enter n","text":"Input the total number of items n (non-negative integer)."},
      {"@type":"HowToStep","name":"Enter r","text":"Input the number of selections r (0 ≤ r ≤ n; or any r for repetition mode)."},
      {"@type":"HowToStep","name":"Choose repetition","text":"Toggle 'With repetition' if combinations allow repeated items."},
      {"@type":"HowToStep","name":"Read results","text":"The calculator outputs exact nCr (or multiset C), scientific notation, and logarithm base 10."}
    ]
  }
  </script>

  <!-- JSON-LD: FAQPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"What is the formula for combinations (nCr)?","acceptedAnswer":{"@type":"Answer","text":"C(n, r) = n! / (r!(n-r)!). This counts the number of r-sized subsets from n without order and without repetition."}},
      {"@type":"Question","name":"How do I compute combinations with repetition?","acceptedAnswer":{"@type":"Answer","text":"Use C(n+r-1, r). This counts multisets of size r drawn from n categories."}},
      {"@type":"Question","name":"How large can n be?","acceptedAnswer":{"@type":"Answer","text":"This calculator uses big-integer arithmetic and an exact multiplicative algorithm that scales to very large n (thousands), limited mainly by device performance."}},
      {"@type":"Question","name":"Why does it show scientific notation and log10?","acceptedAnswer":{"@type":"Answer","text":"For extremely large results, scientific notation and log10 help understand magnitude and compare scales."}},
      {"@type":"Question","name":"What if r > n?","acceptedAnswer":{"@type":"Answer","text":"Without repetition, C(n, r) is 0 when r > n. With repetition enabled, it is valid via C(n+r-1, r)."}},
      {"@type":"Question","name":"What is the difference between combinations and permutations?","acceptedAnswer":{"@type":"Answer","text":"Combinations ignore order (nCr), permutations consider order (nPr = n!/(n-r)!)."}}
    ]
  }
  </script>

  <!-- JSON-LD: WebApplication (calculator) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"Combination Calculator",
    "applicationCategory":"EducationalApplication",
    "operatingSystem":"Any",
    "url":"https://calcdomain.com/combination-calculator.html",
    "creator":{"@type":"Person","name":"Ugo Candido"}
  }
  </script>
</head>

<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky per spec) -->
  <header class="bg-white border-b">
    <nav class="container mx-auto px-4 lg:px-6 py-4">
      <div class="flex items-center justify-between">
        <a class="text-2xl font-extrabold text-blue-600" href="index.html">CalcDomain</a>
        <div class="hidden md:flex items-center gap-6 text-sm">
          <a class="hover:text-blue-600" href="search.html">Advanced Search</a>
          <a class="hover:text-blue-600" href="index.html#categories">Categories</a>
        </div>
      </div>
    </nav>
  </header>

  <main class="container mx-auto px-4 lg:px-6 py-8">
    <section class="max-w-3xl">
      <nav class="text-sm text-gray-600 mb-3" aria-label="Breadcrumb">
        <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
        <a href="math.html" class="hover:text-blue-600">Math</a> &raquo;
        <a href="subcategories/math-algebra.html" class="hover:text-blue-600">Algebra</a> &raquo;
        <span class="text-gray-900">Combination Calculator</span>
      </nav>

      <!-- 1. H1 -->
      <h1 class="text-3xl font-extrabold mb-2">combination calculator</h1>

      <!-- 2. Intro -->
      <p class="text-gray-700 mb-6">
        Compute exact combinations <em>n</em> choose <em>r</em> (nCr) with big-integer precision and optionally
        include <strong>combinations with repetition</strong>. Designed for students, engineers, data scientists,
        and exam prep—fast, accessible, and trustworthy.
      </p>

      <!-- 3. Calculator UI -->
      <section id="calculator" class="bg-white p-6 rounded-lg shadow-sm border space-y-6" aria-labelledby="calc-heading">
        <h2 id="calc-heading" class="text-xl font-bold">Calculator</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- n -->
          <div>
            <label for="n" class="block text-sm font-semibold text-gray-800">
              Total items (n) <span aria-hidden="true" class="text-red-600">*</span>
            </label>
            <div class="flex items-start gap-2">
              <input id="n" name="n" type="number" inputmode="numeric" min="0" step="1"
                     class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus-visible:outline-blue-600"
                     aria-required="true" aria-describedby="n-help n-error" value="52" />
              <button id="n-tip-btn" class="mt-1 touch-target px-3 py-2 rounded-md border bg-gray-50 hover:bg-gray-100"
                      type="button" aria-expanded="false" aria-controls="n-help" aria-label="Toggle help for n">?</button>
            </div>
            <div id="n-help" class="tooltip-panel a11y-help hidden">
              Count of distinct items to choose from. Must be a non-negative integer.
            </div>
            <p id="n-error" class="mt-1 text-sm text-red-700"></p>
          </div>

          <!-- r -->
          <div>
            <label for="r" class="block text-sm font-semibold text-gray-800">
              Selections (r) <span aria-hidden="true" class="text-red-600">*</span>
            </label>
            <div class="flex items-start gap-2">
              <input id="r" name="r" type="number" inputmode="numeric" min="0" step="1"
                     class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus-visible:outline-blue-600"
                     aria-required="true" aria-describedby="r-help r-error" value="5" />
              <button id="r-tip-btn" class="mt-1 touch-target px-3 py-2 rounded-md border bg-gray-50 hover:bg-gray-100"
                      type="button" aria-expanded="false" aria-controls="r-help" aria-label="Toggle help for r">?</button>
            </div>
            <div id="r-help" class="tooltip-panel a11y-help hidden">
              How many items you select. Without repetition, you need 0 ≤ r ≤ n. In repetition mode, any r ≥ 0 works.
            </div>
            <p id="r-error" class="mt-1 text-sm text-red-700"></p>
          </div>

          <!-- With repetition -->
          <div class="md:col-span-2">
            <div class="flex items-center gap-3">
              <input id="withRepetition" type="checkbox" class="touch-target w-5 h-5"
                     aria-describedby="rep-help" />
              <label for="withRepetition" class="text-sm font-semibold text-gray-800">
                With repetition (multiset combinations)
              </label>
            </div>
            <p id="rep-help" class="a11y-help mt-1">
              Uses $\\displaystyle \\binom{n + r - 1}{r}$ instead of $\\binom{n}{r}$.
            </p>
          </div>
        </div>

        <div class="flex flex-wrap items-center gap-3">
          <button id="calcBtn" class="touch-target px-4 py-2 rounded-md bg-blue-600 text-white font-semibold hover:bg-blue-700"
                  type="button">Calculate</button>
          <button id="resetBtn" class="touch-target px-4 py-2 rounded-md border font-semibold hover:bg-gray-50"
                  type="button">Reset</button>
        </div>
      </section>

      <!-- 4. Results -->
      <section aria-labelledby="results-heading" class="mt-6">
        <h2 id="results-heading" class="sr-only">Results</h2>
        <div id="results-wrapper" class="bg-blue-50 border border-blue-100 rounded-lg p-6 no-print">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="result-card" role="status" aria-live="polite">
              <h4>Combinations (exact)</h4>
              <p id="resExact">—</p>
            </div>
            <div class="result-card" role="status" aria-live="polite">
              <h4>Scientific notation</h4>
              <p id="resSci">—</p>
            </div>
            <div class="result-card" role="status" aria-live="polite">
              <h4>log10(C)</h4>
              <p id="resLog10">—</p>
            </div>
            <div class="result-card" role="status" aria-live="polite">
              <h4>Mode</h4>
              <p id="resMode">nCr</p>
            </div>
          </div>
          <div class="mt-4 flex flex-wrap gap-3">
            <button id="copyBtn" class="touch-target px-4 py-2 rounded-md border font-semibold hover:bg-gray-50"
                    type="button" aria-describedby="copyHelp">Copy result</button>
            <span id="copyHelp" class="text-sm text-gray-600">Copies the exact integer to clipboard.</span>
          </div>
        </div>
      </section>

      <!-- 5. Authoritative Content Ecosystem -->
      <section class="bg-white p-6 rounded-lg shadow-sm border mt-8 prose">
        <!-- a. Data source -->
        <h2>Source of Data & Methodology</h2>
        <p>
          Authoritative reference: <strong>NIST Digital Library of Mathematical Functions (DLMF), §26.4 (Binomial Coefficients)</strong>,
          released 2024. Direct source: <a href="https://dlmf.nist.gov/26.4" target="_blank" rel="noopener">dlmf.nist.gov/26.4</a>.<br/>
          <em>Tutti i calcoli si basano rigorosamente sulle formule e sui dati forniti da questa fonte.</em>
        </p>
        <p>Implementation: exact big-integer multiplicative method with on-the-fly reduction (avoids overflow and rounding).</p>

        <!-- b. Formula explained -->
        <h2>The Formula Explained</h2>
        <div class="formula-box">
          <p><strong>Without repetition</strong>:</p>
          <p>
            $\\displaystyle \\binom{n}{r} = \\frac{n!}{r!(n - r)!}
            \\,=\\, \\prod_{i=1}^{r} \\frac{n - r + i}{i}$ with $\\;r=\\min(r,\\,n-r)$ for numerical stability.
          </p>
          <p><strong>With repetition (multisets)</strong>:</p>
          <p>$\\displaystyle \\binom{n+r-1}{r}$</p>
        </div>

        <!-- c. Glossary -->
        <h2>Glossary of Variables</h2>
        <table>
          <thead><tr><th>Symbol</th><th>Name</th><th>Meaning</th></tr></thead>
          <tbody>
            <tr><td><em>n</em></td><td>Total items</td><td>Number of distinct categories/elements available.</td></tr>
            <tr><td><em>r</em></td><td>Selections</td><td>Items chosen; order does not matter.</td></tr>
            <tr><td>$\\binom{n}{r}$</td><td>Combinations</td><td>Count of r-subsets from n without repetition.</td></tr>
            <tr><td>$\\binom{n+r-1}{r}$</td><td>Combinations with repetition</td><td>Count of r-multisets over n categories.</td></tr>
          </tbody>
        </table>

        <!-- d. Worked example -->
        <h2>How It Works: A Step-by-Step Example</h2>
        <h3>Example: choose 5 cards from a 52-card deck (no repetition)</h3>
        <p>Inputs: <em>n</em>=52, <em>r</em>=5, repetition disabled.</p>
        <p>
          $\\displaystyle \\binom{52}{5} \\,=\\, \\frac{52!}{5!\\,47!}
          \\,=\\, \\frac{52\\cdot51\\cdot50\\cdot49\\cdot48}{5\\cdot4\\cdot3\\cdot2\\cdot1} = 2{,}598{,}960.$
        </p>
        <p>The calculator returns the exact integer 2,598,960, its scientific form, and log10 magnitude.</p>

        <!-- e. FAQs -->
        <h2>Frequently Asked Questions</h2>
        <details>
          <summary>Does this calculator round or approximate?</summary>
          <p>No. It uses exact big-integer arithmetic with fraction reduction, so results are integers without rounding.</p>
        </details>
        <details>
          <summary>When should I use repetition mode?</summary>
          <p>Use it when selections can include the same item multiple times (e.g., distributing identical balls into boxes).</p>
        </details>
        <details>
          <summary>Can I input very large n and r?</summary>
          <p>Yes, within practical limits of your device. The algorithm scales well, but extremely large inputs will take longer.</p>
        </details>
        <details>
          <summary>Why adjust r to min(r, n−r)?</summary>
          <p>It minimizes the number of multiplicative steps and keeps intermediate values smaller and faster to compute.</p>
        </details>
        <details>
          <summary>Is order considered here?</summary>
          <p>No. Combinations ignore order. For ordered selections, use permutations (nPr).</p>
        </details>
        <details>
          <summary>What if I get 0 as a result?</summary>
          <p>That happens when r&gt;n in the non-repetition case; there are no valid selections without repeats.</p>
        </details>
      </section>

      <!-- 6. Author & Review -->
      <section class="mt-8 bg-white p-6 rounded-lg border shadow-sm">
        <p class="text-sm text-gray-700">
          <strong>Tool developed by Ugo Candido.</strong> Content verified by the CalcDomain Editorial Board.<br />
          Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time>
        </p>
      </section>
    </section>

    <!-- Optional aside -->
    <aside class="w-full lg:w-1/3 mt-10">
      <div class="bg-white p-6 rounded-lg shadow-sm border">
        <h3 class="font-bold text-lg mb-3">Why this calculator stands out</h3>
        <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
          <li>Exact big-integer results (no floating-point errors).</li>
          <li>Supports combinations with repetition.</li>
          <li>Inline validation, accessible tooltips, and keyboard-friendly controls.</li>
        </ul>
      </div>
    </aside>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
      <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
      <div class="mt-4 space-x-4">
        <a href="about.html" class="hover:text-blue-600">About</a>
        <a href="contact.html" class="hover:text-blue-600">Contact</a>
        <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
        <a href="terms.html" class="hover:text-blue-600">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator Logic (defer per spec) -->
  <script defer>
  (function(){
    const $ = (id) => document.getElementById(id);

    const els = {
      n: $('n'),
      r: $('r'),
      withRep: $('withRepetition'),
      calcBtn: $('calcBtn'),
      resetBtn: $('resetBtn'),
      copyBtn: $('copyBtn'),

      nErr: $('n-error'),
      rErr: $('r-error'),
      nTipBtn: $('n-tip-btn'),
      rTipBtn: $('r-tip-btn'),
      nHelp: $('n-help'),
      rHelp: $('r-help'),

      resExact: $('resExact'),
      resSci: $('resSci'),
      resLog10: $('resLog10'),
      resMode: $('resMode')
    };

    // Accessible tooltip toggles
    function togglePanel(btn, panel){
      const open = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!open));
      panel.classList.toggle('hidden', open);
    }
    els.nTipBtn.addEventListener('click', () => togglePanel(els.nTipBtn, els.nHelp));
    els.rTipBtn.addEventListener('click', () => togglePanel(els.rTipBtn, els.rHelp));

    // GCD for BigInt
    function bigGcd(a,b){
      a = a < 0n ? -a : a; b = b < 0n ? -b : b;
      while (b) { const t = b; b = a % b; a = t; }
      return a;
    }

    // Exact multiplicative nCr using reduction, returns BigInt
    function nCrBigInt(n, r) {
      if (r < 0n || n < 0n) return 0n;
      if (r > n) return 0n;
      if (r === 0n || r === n) return 1n;
      r = r > (n - r) ? (n - r) : r;

      // Build numerator/denominator lists and reduce progressively
      const nums = [];
      const dens = [];
      for (let i = 1n; i <= r; i++) {
        nums.push(n - r + i); // (n - r + 1) ... n
        dens.push(i);         // 1 ... r
      }

      // Reduce by pairwise gcd
      for (let i = 0; i < dens.length; i++) {
        let d = dens[i];
        if (d === 1n) continue;
        for (let j = 0; j < nums.length && d > 1n; j++) {
          const g = bigGcd(nums[j], d);
          if (g > 1n) {
            nums[j] /= g;
            d /= g;
          }
        }
        dens[i] = d;
      }

      // Multiply remaining numerators; denominators should all be 1
      return nums.reduce((acc, v) => acc * v, 1n);
    }

    // With repetition: C(n+r-1, r)
    function nCrWithRepetitionBigInt(n, r) {
      if (n <= 0n && r > 0n) return 0n; // no categories means zero ways unless r==0
      return nCrBigInt(n + r - 1n, r);
    }

    // Format BigInt with grouping
    function formatBigInt(x){
      const s = x.toString();
      // group by thousands
      return s.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }

    // Compute scientific notation and log10 from BigInt
    function bigIntToSciAndLog10(x){
      if (x === 0n) return { sci: '0', log10: '-∞' };
      const s = x.toString();
      const k = s.length - 1; // exponent
      const mantissa = s.length > 1 ? s[0] + '.' + s.slice(1, Math.min(6, s.length)) : s;
      return { sci: `${mantissa} × 10^${k}`, log10: (k + Math.log10(Number('1.' + s.slice(1, Math.min(16, s.length)) || '0'))).toFixed(6) };
    }

    // Validation (on blur + on calc)
    function validate(){
      let valid = true;

      const nVal = els.n.value.trim();
      const rVal = els.r.value.trim();

      const nInt = nVal === '' ? NaN : Number(nVal);
      const rInt = rVal === '' ? NaN : Number(rVal);

      // Reset errors
      els.nErr.textContent = '';
      els.rErr.textContent = '';

      if (!Number.isInteger(nInt) || nInt < 0) {
        els.nErr.textContent = 'Enter a non-negative integer for n (e.g., 0, 10, 52).';
        valid = false;
      }
      if (!Number.isInteger(rInt) || rInt < 0) {
        els.rErr.textContent = 'Enter a non-negative integer for r (e.g., 0, 5).';
        valid = false;
      }

      if (valid && !els.withRep.checked && rInt > nInt) {
        els.rErr.textContent = 'For combinations without repetition, r must be ≤ n.';
        valid = false;
      }
      return { valid, nInt, rInt };
    }

    els.n.addEventListener('blur', validate);
    els.r.addEventListener('blur', validate);

    function compute(){
      const { valid, nInt, rInt } = validate();
      if (!valid) {
        renderResult(null, null, null, null);
        return;
      }
      const n = BigInt(nInt);
      const r = BigInt(rInt);

      let result;
      let modeText;
      if (els.withRep.checked) {
        result = nCrWithRepetitionBigInt(n, r);
        modeText = 'n multiset r (with repetition)';
      } else {
        result = nCrBigInt(n, r);
        modeText = 'nCr (no repetition)';
      }

      const { sci, log10 } = bigIntToSciAndLog10(result);
      renderResult(result, sci, log10, modeText);
    }

    function renderResult(big, sci, log10, modeText){
      els.resExact.textContent = big === null ? '—' : formatBigInt(big);
      els.resSci.textContent   = sci === null ? '—' : sci;
      els.resLog10.textContent = log10 === null ? '—' : log10;
      els.resMode.textContent  = modeText || 'nCr';
      if (window.MathJax && MathJax.typesetPromise) { MathJax.typesetPromise(); }
    }

    els.calcBtn.addEventListener('click', compute);
    els.resetBtn.addEventListener('click', () => {
      els.n.value = '52';
      els.r.value = '5';
      els.withRep.checked = false;
      els.nErr.textContent = '';
      els.rErr.textContent = '';
      renderResult(null, null, null, null);
      if (window.MathJax && MathJax.typesetPromise) { MathJax.typesetPromise(); }
    });

    els.copyBtn.addEventListener('click', async () => {
      const val = els.resExact.textContent.trim();
      if (!val || val === '—') return;
      try {
        await navigator.clipboard.writeText(val.replace(/,/g, ''));
        els.copyBtn.textContent = 'Copied!';
        setTimeout(() => els.copyBtn.textContent = 'Copy result', 1200);
      } catch {
        // no-op
      }
    });

    // Initial compute on load
    window.addEventListener('load', compute);
  })();
  </script>
</body>
</html>

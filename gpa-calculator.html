<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png" />
<link rel="manifest" href="https://calcdomain.com/site.webmanifest" />

<meta charset="UTF-8">
<meta name="viewport" content="width-width, initial-scale=1.0">

<title>GPA Calculator - Calculate Your Semester &amp; Cumulative GPA</title>
<meta name="description" content="Calculate your semester and cumulative GPA with our easy-to-use tool. Add courses, grades, and credits. Supports all standard US 4.0 and 4.3 grading scales.">
<link rel="canonical" href="https://calcdomain.com/gpa-calculator.html"/>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0KOxRfFGorYiuprGTYJqC7GfFJPn5rKTJNQlb7msogayagUVmLHYB" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGjKGTBUVYAU7idHrDdVSPKAiwV3dLj8cTypZWAYsE2XXjVEMeNIzB5LqE" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURPiLdVj5dcnLKMzLCCWTuLYMYGKsINTKPoANjUWJqTvbNSSLChBFs" crossorigin="anonymous"
    onload="renderMathInElement(document.body, {
        delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false}
        ]
    });"></script>

<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1.5rem;
overflow-x:auto; text-align: center; font-size: 1.125rem;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 1rem; font-weight: 500; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 2.25rem; font-weight: 700; color: #2563eb; }
/* Custom Focus State for WCAG */
*:focus-visible {
outline: 3px solid #3b82f6 !important;
outline-offset: 2px;
box-shadow: none !important;
}
/* Ensure form elements use standard ring on focus */
.form-input:focus-visible, .form-select:focus-visible {
outline: none !important;
}
/* Print styles */
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
.no-print { display: none !important; }
}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "GPA Calculator",
  "description": "Calculate your semester and cumulative GPA with our easy-to-use tool. Add courses, grades, and credits. Supports all standard US 4.0 and 4.3 grading scales.",
  "url": "https://calcdomain.com/gpa-calculator.html",
  "inLanguage": "en",
  "author": { "@type": "Person", "name": "Ugo Candido" },
  "publisher": { "@type": "Organization", "name": "CalcDomain" }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
    { "@type": "ListItem", "position": 2, "name": "Lifestyle Everyday", "item": "https://calcdomain.com/lifestyle-everyday.html" },
    { "@type": "ListItem", "position": 3, "name": "Miscellaneous", "item": "https://calcdomain.com/subcategories/lifestyle-miscellaneous.html" },
    { "@type": "ListItem", "position": 4, "name": "GPA Calculator", "item": "https://calcdomain.com/gpa-calculator.html" }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Calculate Your GPA",
  "description": "A step-by-step guide to calculating your semester and cumulative Grade Point Average (GPA).",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Select Grading Scale",
      "text": "Choose the grading scale your school uses (e.g., Standard 4.0, 4.0 with +/-, 4.3 with A+)."
    },
    {
      "@type": "HowToStep",
      "name": "Enter Current Courses",
      "text": "For each course this semester, enter the number of credits (or hours) and the letter grade you received. Add new rows as needed."
    },
    {
      "@type": "HowToStep",
      "name": "Add Previous GPA (Optional)",
      "text": "To calculate your new cumulative GPA, expand the optional section and enter your total cumulative GPA and total credits from all previous semesters."
    },
    {
      "@type": "HowToStep",
      "name": "Review Results",
      "text": "The calculator automatically updates, showing your new Semester GPA and your new Cumulative GPA in real-time."
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is the difference between weighted and unweighted GPA?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This calculator determines your GPA weighted by *credit hours*, which is the standard for US colleges. This is different from the 'weighted vs. unweighted' GPA in high school, which refers to giving extra points for AP or Honors classes. College GPAs are almost always weighted by the number of credits for each course."
      }
    },
    {
      "@type": "Question",
      "name": "How do I calculate my cumulative GPA?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "To calculate your cumulative GPA, you need your total quality points and total credits from all previous semesters. You can use the 'Cumulative GPA (Optional)' section by entering your current cumulative GPA and the total number of credits you've earned so far. The calculator will combine these with your new semester's results."
      }
    },
    {
      "@type": "Question",
      "name": "What if my school uses a 4.3 scale or doesn't use +/- grades?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Use the 'Grading Scale' dropdown at the top of the calculator. We provide common scales, including a 4.33 scale (where A+ = 4.33) and a 4.0 scale with no plus or minus grades (where A=4, B=3, etc.)."
      }
    },
    {
      "@type": "Question",
      "name": "Do Pass/Fail courses affect my GPA?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No. Pass/Fail (P/F) or Satisfactory/Unsatisfactory (S/U) courses are typically not included in GPA calculations. They contribute to your total earned credits but do not have grade points. You can select 'P' or 'F' in the grade dropdown, and our calculator will correctly exclude them from the GPA calculation."
      }
    },
    {
      "@type": "Question",
      "name": "What is a 'good' GPA?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A 'good' GPA is subjective and depends on your field of study, your school's standards, and your personal goals. Generally, a 3.0 is considered the threshold for 'good' in many universities, a 3.5 is considered 'very good' (often for honors like *cum laude*), and a 3.7 or higher is exceptional (for *magna* or *summa cum laude*)."
      }
    }
  ]
}
</script>

<script src="https://calcdomain.com/search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="https://calcdomain.com/index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..."
class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 form-input"
autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="https://calcdomain.com/search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="https://calcdomain.com/index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2 no-print" aria-label="Open menu" aria-expanded="false">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden no-print">
<div class="space-y-2">
<a href="https://calcdomain.com/search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="https://calcdomain.com/index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
<a href="https://calcdomain.com/index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="https://calcdomain.com/lifestyle-everyday.html" class="hover:text-blue-600">Lifestyle Everyday</a> &raquo;
<a href="https://calcdomain.com/subcategories/lifestyle-miscellaneous.html" class="hover:text-blue-600">Miscellaneous</a> &raquo;
<span class="text-gray-900">GPA Calculator</span>
</nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">GPA Calculator</h1>
<p class="text-gray-600 mb-6">Quickly calculate your semester and cumulative Grade Point Average (GPA). This tool helps students track academic performance by entering course grades and credit hours.</p>

<section id="results" aria-live="polite" class="mt-6 mb-8 bg-blue-50 border border-blue-100 rounded-lg p-6 min-h-[160px]">
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
<div class="result-card">
<h4>Semester GPA</h4>
<p id="semester-gpa-result">0.00</p>
</div>
<div class="result-card">
<h4>Cumulative GPA</h4>
<p id="cumulative-gpa-result">0.00</p>
</div>
</div>
<div id="error-container" role="alert" class="text-red-600 text-sm font-medium mt-4" aria-live="assertive"></div>
</section>

<section id="calculator-ui" class="space-y-6">
<div class="space-y-2">
<label for="gradeScale" class="block text-sm font-medium text-gray-700">Grading Scale</label>
<select id="gradeScale" class="mt-1 block w-full md:w-1/2 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-select">
<option value="4.0-plus" selected>Standard 4.0 (with +/-)</option>
<option value="4.3-plus">Standard 4.3 (A+ = 4.33)</option>
<option value="4.0-no-plus">Standard 4.0 (no +/-)</option>
</select>
</div>

<fieldset>
<legend class="text-lg font-semibold text-gray-900 mb-4">Current Semester Courses</legend>
<div class="hidden md:grid grid-cols-12 gap-4 mb-2 text-sm font-medium text-gray-600">
<div class="col-span-5">Course Name (Optional)</div>
<div class="col-span-3">Credits*</div>
<div class="col-span-2">Grade*</div>
<div class="col-span-2">Action</div>
</div>
<div id="course-list" class="space-y-4">
</div>
</fieldset>

<div class="flex flex-col md:flex-row gap-4 no-print">
<button type="button" id="add-course-btn" class="w-full md:w-auto px-6 py-3 bg-blue-600 text-white font-semibold rounded-md shadow-sm hover:bg-blue-700 focus-visible:outline-blue-700">
<svg class="w-5 h-5 inline -ml-1 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
Add Course
</button>
<button type="button" id="reset-btn" class="w-full md:w-auto px-6 py-3 bg-white text-gray-700 font-semibold rounded-md shadow-sm border border-gray-300 hover:bg-gray-50 focus-visible:outline-gray-300">
Reset
</button>
</div>

<details id="cumulative-section" class="bg-gray-50 p-4 rounded-lg border">
<summary class="font-semibold text-gray-800">Cumulative GPA (Optional)</summary>
<div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<label for="prevGPA" class="block text-sm font-medium text-gray-700">Previous Cumulative GPA</label>
<input type="number" id="prevGPA" step="0.01" min="0" max="5.0" placeholder="e.g., 3.50"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-input">
</div>
<div>
<label for="prevCredits" class="block text-sm font-medium text-gray-700">Previous Total Credits</label>
<input type="number" id="prevCredits" step="0.1" min="0" placeholder="e.g., 60"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-input">
</div>
</div>
</details>

</section>
</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
<h2>Data Source and Methodology</h2>
<p>This calculator uses the standard weighted average formula, the most common system for calculating Grade Point Average (GPA) in United States colleges and universities. We provide options for the most common grading scales, including the standard 4.0 scale (with and without +/-) and the 4.33 scale.</p>
<p>All calculations are based strictly on the formulas and standard grade point values provided by this common academic framework.</p>

<h2>The Formula Explained</h2>
<p>A GPA is a weighted average. Each course's grade is weighted by the number of credits (or hours) it's worth. Courses with more credits have a larger impact on your GPA.</p>
<p>First, each letter grade is converted to a numeric value (a "Grade Point"). For example, on a standard 4.0 scale, A = 4.0, B = 3.0, etc.</p>
<p>Next, for each course, we calculate "Quality Points":</p>
<div class="formula-box">
$ \text{Quality Points} = \text{Grade Point} \times \text{Credits} $
</div>

<p>To find the semester GPA, we sum all Quality Points and divide by the sum of all Credits:</p>
<div class="formula-box">
$$ \text{Semester GPA} = \frac{\sum (\text{Quality Points}_i)}{\sum (\text{Credits}_i)} $$
</div>

<p>Where '$i$' represents each individual course.</p>
<p>To calculate your new cumulative GPA, we add your previous total quality points to your new semester's quality points and divide by the new total credits:</p>
<div class="formula-box">
$$ \text{Cumulative GPA} = \frac{(\text{Prev. GPA} \times \text{Prev. Credits}) + \text{Semester Points}}{\text{Prev. Credits} + \text{Semester Credits}} $$
</div>


<h2>Glossary of Variables</h2>
<dl class="divide-y divide-gray-200">
<div class="py-4">
<dt class="font-medium text-gray-900">Course Name (Optional)</dt>
<dd class="text-gray-600">A label for your course (e.g., "ECON 101"). This is for your reference and does not affect the calculation.</dd>
</div>
<div class="py-4">
<dt class="font-medium text-gray-900">Credits (Required)</dt>
<dd class="text-gray-600">The number of credit hours the course is worth (e.g., 3, 4.5). This is the "weight" of the course. This field is required.</dd>
</div>
<div class="py-4">
<dt class="font-medium text-gray-900">Grade (Required)</dt>
<dd class="text-gray-600">The letter grade you received (e.g., A, B+, C-). Grades like Pass (P) or Fail (F) are typically excluded from GPA calculations, and our tool does the same.</dd>
</div>
<div class="py-4">
<dt class="font-medium text-gray-900">Semester GPA</dt>
<dd class="text-gray-600">Your Grade Point Average calculated using only the courses from the current semester list.</dd>
</div>
<div class="py-4">
<dt class="font-medium text-gray-900">Cumulative GPA</dt>
<dd class="text-gray-600">Your overall Grade Point Average, combining your previous academic history (if entered) with your current semester's results.</dd>
</div>
</dl>

<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's say you're a student taking three courses this semester on a standard 4.0 (+/-) scale. You do not have a previous GPA.</p>
<ul>
<li><strong>Course 1:</strong> "Calculus I", 4 credits, Grade: B+</li>
<li><strong>Course 2:</strong> "English Comp", 3 credits, Grade: A-</li>
<li><strong>Course 3:</strong> "Intro to Psych", 3 credits, Grade: C</li>
</ul>

<ol>
<li><strong>Convert Grades to Points:</strong>
<ul>
<li>B+ = 3.33 points</li>
<li>A- = 3.67 points</li>
<li>C = 2.00 points</li>
</ul>
</li>
<li><strong>Calculate Quality Points for each course (Points × Credits):</strong>
<ul>
<li>Calculus I: $3.33 \times 4 = 13.32$</li>
<li>English Comp: $3.67 \times 3 = 11.01$</li>
<li>Intro to Psych: $2.00 \times 3 = 6.00$</li>
</ul>
</li>
<li><strong>Sum the Totals:</strong>
<ul>
<li>Total Quality Points: $13.32 + 11.01 + 6.00 = 30.33$</li>
<li>Total Credits: $4 + 3 + 3 = 10$</li>
</ul>
</li>
<li><strong>Calculate Final GPA:</strong>
<ul>
<li>Semester GPA: $\frac{30.33}{10} = 3.033$</li>
</ul>
</li>
</ol>
<p>Your Semester GPA is <strong>3.03</strong>.</p>

<h2>Frequently Asked Questions</h2>
<details>
<summary>What is the difference between weighted and unweighted GPA?</summary>
<p>This calculator determines your GPA weighted by *credit hours*, which is the standard for US colleges. This is different from the 'weighted vs. unweighted' GPA in high school, which refers to giving extra points for AP or Honors classes. College GPAs are almost always weighted by the number of credits for each course.</p>
</details>
<details>
<summary>How do I calculate my cumulative GPA?</summary>
<p>To calculate your cumulative GPA, you need your total quality points and total credits from all previous semesters. You can use the 'Cumulative GPA (Optional)' section by entering your current cumulative GPA and the total number of credits you've earned so far. The calculator will combine these with your new semester's results.</p>
</details>
<details>
<summary>What if my school uses a 4.3 scale or doesn't use +/- grades?</summary>
<p>Use the 'Grading Scale' dropdown at the top of the calculator. We provide common scales, including a 4.33 scale (where A+ = 4.33) and a 4.0 scale with no plus or minus grades (where A=4, B=3, etc.).</p>
</details>
<details>
<summary>Do Pass/Fail courses affect my GPA?</summary>
<p>No. Pass/Fail (P/F) or Satisfactory/Unsatisfactory (S/U) courses are typically not included in GPA calculations. They contribute to your total earned credits but do not have grade points. You can select 'P' or 'F' in the grade dropdown, and our calculator will correctly exclude them from the GPA calculation.</p>
</details>
<details>
<summary>What is a "good" GPA?</summary>
<p>A 'good' GPA is subjective and depends on your field of study, your school's standards, and your personal goals. Generally, a 3.0 is considered the threshold for 'good' in many universities, a 3.5 is considered 'very good' (often for honors like *cum laude*), and a 3.7 or higher is exceptional (for *magna* or *summa cum laude*).</p>
</details>

<div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
<p><strong>Tool developed by Ugo Candido.</strong> Academic standards verified by the CalcDomain Editorial Board.<br>
Last accuracy review: <time datetime="2025-10-26">October 26, 2025</time></p>
</div>
</article>
</section>

<aside class="w-full lg:w-1/3 no-print">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Get instant, real-time GPA results as you type.</li>
<li>Calculate both semester and cumulative GPA in one place.</li>
<li>Supports multiple college grading scales (4.0, 4.3, etc.).</li>
<li>Fully accessible (WCAG 2.1 AA) and mobile-first design.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Academic Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="https://calcdomain.com/final-grade-calculator.html" class="text-blue-600 hover:underline">Final Grade Calculator</a></li>
<li><a href="https://calcdomain.com/college-cost-calculator.html" class="text-blue-600 hover:underline">College Cost Calculator</a></li>
<li><a href="https://calcdomain.com/gpa-to-percentage-calculator.html" class="text-blue-600 hover:underline">GPA to Percentage Calculator</a></li>
<li><a href="https://calcdomain.com/study-time-calculator.html" class="text-blue-600 hover:underline">Study Time Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-white border-t no-print">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="https://calcdomain.com/about.html" class="hover:text-blue-600">About</a>
<a href="https://calcdomain.com/contact.html" class="hover:text-blue-600">Contact</a>
<a href="https://calcdomain.com/privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="https://calcdomain.com/terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
// ---
// 1. CONSTANTS & STATE
// ---
const GRADE_SCALES = {
'4.0-plus': {
'A+': 4.0, 'A': 4.0, 'A-': 3.67,
'B+': 3.33, 'B': 3.0, 'B-': 2.67,
'C+': 2.33, 'C': 2.0, 'C-': 1.67,
'D+': 1.33, 'D': 1.0, 'D-': 0.67,
'F': 0.0
},
'4.3-plus': {
'A+': 4.33, 'A': 4.0, 'A-': 3.67,
'B+': 3.33, 'B': 3.0, 'B-': 2.67,
'C+': 2.33, 'C': 2.0, 'C-': 1.67,
'D+': 1.33, 'D': 1.0, 'D-': 0.67,
'F': 0.0
},
'4.0-no-plus': {
'A': 4.0, 'B': 3.0, 'C': 2.0, 'D': 1.0, 'F': 0.0
}
};

const GRADE_OPTIONS_HTML = `
<option value="">- Grade -</option>
<option value="A+">A+</option>
<option value="A">A</option>
<option value="A-">A-</option>
<option value="B+">B+</option>
<option value="B">B</option>
<option value="B-">B-</option>
<option value="C+">C+</option>
<option value="C">C</option>
<option value="C-">C-</option>
<option value="D+">D+</option>
<option value="D">D</option>
<option value="D-">D-</option>
<option value="F">F</option>
<option value="P">P (Pass)</option>
<option value="F-Fail">F (Fail)</option>
`;

let courseIdCounter = 0;

// ---
// 2. DOM ELEMENT REFERENCES
// ---
const elements = {
courseList: document.getElementById('course-list'),
addCourseBtn: document.getElementById('add-course-btn'),
resetBtn: document.getElementById('reset-btn'),
gradeScaleSelect: document.getElementById('gradeScale'),
prevGpaInput: document.getElementById('prevGPA'),
prevCreditsInput: document.getElementById('prevCredits'),
semesterGpaResult: document.getElementById('semester-gpa-result'),
cumulativeGpaResult: document.getElementById('cumulative-gpa-result'),
errorContainer: document.getElementById('error-container'),
calculatorUI: document.getElementById('calculator-ui')
};

// ---
// 3. CORE FUNCTIONS
// ---

/**
* Adds a new, empty course row to the list.
*/
function addCourseRow() {
courseIdCounter++;
const row = document.createElement('div');
row.className = 'grid grid-cols-12 gap-x-4 gap-y-2 p-4 border rounded-lg bg-white course-row';
row.setAttribute('role', 'group');
row.setAttribute('aria-labelledby', `course-label-${courseIdCounter}`);

row.innerHTML = `
<div class="col-span-12 md:col-span-5">
<label for="course-name-${courseIdCounter}" class="block text-sm font-medium text-gray-700 md:hidden">Course Name</label>
<span id="course-label-${courseIdCounter}" class="sr-only">Course ${courseIdCounter}</span>
<input type="text" id="course-name-${courseIdCounter}" placeholder="e.g., Intro to Psych"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-input">
</div>

<div class="col-span-6 md:col-span-3">
<label for="course-credits-${courseIdCounter}" class="block text-sm font-medium text-gray-700 md:hidden">Credits*</label>
<input type="number" id="course-credits-${courseIdCounter}" step="0.1" min="0" placeholder="e.g., 3"
aria-required="true" aria-describedby="credits-desc-${courseIdCounter}"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-input">
<span id="credits-desc-${courseIdCounter}" class="sr-only">Enter credits, e.g., 3 or 4.5</span>
</div>

<div class="col-span-6 md:col-span-2">
<label for="course-grade-${courseIdCounter}" class="block text-sm font-medium text-gray-700 md:hidden">Grade*</label>
<select id="course-grade-${courseIdCounter}" aria-required="true"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 form-select">
${GRADE_OPTIONS_HTML}
</select>
</div>

<div class="col-span-12 md:col-span-2 flex items-end">
<button type="button" class="remove-btn w-full md:w-auto px-3 py-2 bg-red-50 text-red-600 font-semibold rounded-md hover:bg-red-100 no-print"
aria-label="Remove course ${courseIdCounter}">
<svg class="w-5 h-5 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
<span class="hidden md:inline ml-1">Remove</span>
</button>
</div>
`;
elements.courseList.appendChild(row);

// Add event listener to the new row's inputs for real-time calculation
row.querySelectorAll('input, select').forEach(input => {
input.addEventListener('input', calculateGPA);
});

// Update ARIA label for remove button when course name is typed
const nameInput = row.querySelector(`#course-name-${courseIdCounter}`);
const removeBtn = row.querySelector('.remove-btn');
nameInput.addEventListener('input', () => {
const name = nameInput.value.trim() || `course ${courseIdCounter}`;
removeBtn.setAttribute('aria-label', `Remove ${name}`);
});
}

/**
* Handles removing a course row.
* @param {Event} event - The click event from the remove button.
*/
function removeCourseRow(event) {
const btn = event.target.closest('.remove-btn');
if (btn) {
btn.closest('.course-row').remove();
calculateGPA(); // Recalculate after removing
elements.addCourseBtn.focus(); // Move focus to a logical place
}
}

/**
* Resets the entire calculator to its default state.
*/
function resetCalculator() {
elements.courseList.innerHTML = '';
elements.prevGpaInput.value = '';
elements.prevCreditsInput.value = '';
elements.gradeScaleSelect.value = '4.0-plus';
elements.errorContainer.textContent = '';
elements.semesterGpaResult.textContent = '0.00';
elements.cumulativeGpaResult.textContent = '0.00';
addCourseRow();
addCourseRow();
addCourseRow();
}

/**
* The main calculation logic. Reads all inputs and updates the results.
*/
function calculateGPA() {
elements.errorContainer.textContent = ''; // Clear old errors
const currentScale = GRADE_SCALES[elements.gradeScaleSelect.value];
let totalPoints = 0;
let totalCredits = 0;
let hasError = false;

const courseRows = elements.courseList.querySelectorAll('.course-row');

courseRows.forEach((row, index) => {
const creditsInput = row.querySelector('input[type="number"]');
const gradeSelect = row.querySelector('select');
const credits = parseFloat(creditsInput.value);
const grade = gradeSelect.value;

// Reset error styling
creditsInput.classList.remove('border-red-500', 'ring-red-500');
gradeSelect.classList.remove('border-red-500', 'ring-red-500');

// Skip empty rows or Pass/Fail grades
if (!grade || grade === 'P' || grade === 'F-Fail' || isNaN(credits) || credits <= 0) {
// If one is filled but not the other, it's an error
if ((isNaN(credits) || credits <= 0) && grade) {
creditsInput.classList.add('border-red-500', 'ring-red-500');
hasError = true;
} else if ((!isNaN(credits) && credits > 0) && !grade) {
gradeSelect.classList.add('border-red-500', 'ring-red-500');
hasError = true;
}
return; // Skip this row in calculation
}

const gradePoint = currentScale[grade];

if (gradePoint === undefined) {
// This can happen if the scale changes and the selected grade (e.g., A+) doesn't exist.
gradeSelect.classList.add('border-red-500', 'ring-red-500');
hasError = true;
return;
}

totalPoints += gradePoint * credits;
totalCredits += credits;
});

if (hasError) {
elements.errorContainer.textContent = 'Please fill in both Credits and Grade for all active rows, or select a valid grade for the chosen scale.';
}

// Calculate Semester GPA
let semesterGPA = 0;
if (totalCredits > 0) {
semesterGPA = totalPoints / totalCredits;
}
elements.semesterGpaResult.textContent = semesterGPA.toFixed(2);

// Calculate Cumulative GPA
const prevGPA = parseFloat(elements.prevGpaInput.value);
const prevCredits = parseFloat(elements.prevCreditsInput.value);

let cumulativeGPA = semesterGPA;

if (!isNaN(prevGPA) && !isNaN(prevCredits) && prevCredits > 0) {
const prevPoints = prevGPA * prevCredits;
const newTotalPoints = totalPoints + prevPoints;
const newTotalCredits = totalCredits + prevCredits;

if (newTotalCredits > 0) {
cumulativeGPA = newTotalPoints / newTotalCredits;
} else {
cumulativeGPA = 0; // Avoid division by zero if all credits are 0
}
}

elements.cumulativeGpaResult.textContent = cumulativeGPA.toFixed(2);
}

// ---
// 4. EVENT LISTENERS
// ---
elements.addCourseBtn.addEventListener('click', addCourseRow);
elements.resetBtn.addEventListener('click', resetCalculator);
elements.courseList.addEventListener('click', removeCourseRow);

// Recalculate on any global or cumulative input change
elements.gradeScaleSelect.addEventListener('change', calculateGPA);
elements.prevGpaInput.addEventListener('input', calculateGPA);
elements.prevCreditsInput.addEventListener('input', calculateGPA);

// Mobile menu toggle logic from template
const menuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
if (menuToggle) {
menuToggle.addEventListener('click', () => {
const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
menuToggle.setAttribute('aria-expanded', !isExpanded);
mobileMenu.classList.toggle('hidden');
});
}

// ---
// 5. INITIALIZATION
// ---
addCourseRow(); // Start with one row
addCourseRow();
addCourseRow();
calculateGPA(); // Run once on load to set 0.00
});
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="canonical" href="https://calcdomain.com/1031-exchange" />
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1031 Exchange Calculator — Defer Capital Gains | CalcDomain</title>
  <meta name="description" content="Estimate realized gain, taxable boot, deferred gain, and tax deferred in a like-kind 1031 exchange. Enter sale price, basis, costs, debt payoff, and tax rate to get instant results." />

  <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "1031 Exchange Calculator",
    "description": "Compute realized gain, taxable boot, deferred gain, and estimated tax deferral for a 1031 like-kind exchange.",
    "url": "https://calcdomain.com/1031-exchange",
    "inLanguage": "en"
  }</script>
  <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com"},
      {"@type": "ListItem", "position": 2, "name": "Finance", "item": "https://calcdomain.com/categories/finance"},
      {"@type": "ListItem", "position": 3, "name": "Finance Investment", "item": "https://calcdomain.com/subcategories/finance-investment"}
    ]
  }</script>
  <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "HowTo",
    "name": "How to Estimate 1031 Exchange Deferral",
    "description": "Steps to estimate realized gain, boot, and deferred tax for a 1031 exchange.",
    "step": [
      {"@type": "HowToStep", "name": "Enter sale details", "text": "Input sale price, selling costs, mortgage payoff."},
      {"@type": "HowToStep", "name": "Enter basis", "text": "Provide purchase price and capital improvements to get adjusted basis."},
      {"@type": "HowToStep", "name": "Set tax rate", "text": "Use your combined capital gains + NIIT rate."},
      {"@type": "HowToStep", "name": "Review outputs", "text": "See realized gain, taxable boot, deferred gain, and estimated tax deferred."}
    ]
  }</script>

  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --line:#e5e7eb;
      --primary:#2563eb;
      --primary2:#1d4ed8;
      --shadow:0 10px 25px rgba(2,6,23,.08);
      --radius:14px;
      --sans:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,"Apple Color Emoji","Segoe UI Emoji";
      --surface-subtle:#f8fafc;
      --danger:#b91c1c;
      --dangerBg:#fef2f2;
      --ok:#15803d;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:var(--bg);
      line-height:1.5;
    }
    a{ color:var(--primary); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    .container{ max-width:1120px; margin:0 auto; padding:18px; }

    header{
      position:sticky; top:0; z-index:50;
      background:rgba(255,255,255,.92);
      backdrop-filter:blur(8px);
      border-bottom:1px solid var(--line);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between; gap:14px;
      padding:12px 18px;
    }
    .brand{ font-weight:800; letter-spacing:.2px; font-size:20px; color:var(--text); }
    .navRight{ display:flex; gap:14px; align-items:center; color:var(--muted); font-size:14px; }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      border:1px solid var(--line); background:#fff;
      padding:8px 10px; border-radius:999px; font-size:13px;
    }

    .calc-hero{
      display:grid;
      grid-template-columns:1.2fr 1fr;
      gap:24px;
      margin-top:24px;
      align-items:start;
    }
    @media (max-width:800px){ .calc-hero{ grid-template-columns:1fr; } }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:24px;
    }

    h1{ margin:0 0 8px; font-size:28px; line-height:1.2; }
    .sub{ margin:0 0 20px; color:var(--muted); font-size:15px; }

    .sectionTitle{
      font-weight:800; margin:0 0 12px;
      font-size:15px; text-transform:uppercase; letter-spacing:.5px; color:var(--muted);
    }

    .grid2{ display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:16px; }
    @media (max-width:500px){ .grid2{ grid-template-columns:1fr; } }

    label{ display:block; font-size:13px; font-weight:600; color:var(--muted); margin:0 0 6px; }
    input, select{
      width:100%;
      padding:10px 12px;
      border:1px solid var(--line);
      border-radius:10px;
      background:#fff;
      font-size:15px;
      outline:none;
      transition:border-color .2s;
    }
    input:focus, select:focus{
      border-color:var(--primary);
      box-shadow:0 0 0 3px rgba(37,99,235,0.15);
    }

    .sticky-box{ position:sticky; top:90px; }

    .totalBox{
      text-align:center;
      padding-bottom:20px;
      border-bottom:1px solid var(--line);
      margin-bottom:16px;
    }
    .totalBox .t{ color:var(--muted); font-size:13px; font-weight:700; text-transform:uppercase; letter-spacing:.5px; }
    .totalBox .v{ font-size:42px; font-weight:900; margin-top:4px; color:var(--text); }

    .kpi{ display:flex; justify-content:space-between; margin-bottom:10px; font-size:14px; }
    .kpi span:first-child{ color:var(--muted); }
    .kpi span:last-child{ font-weight:700; color:var(--text); }

    .btn{
      display:block; width:100%;
      border:none; background:var(--primary); color:#fff;
      padding:12px; border-radius:10px;
      cursor:pointer; font-weight:700; font-size:15px;
      text-align:center; margin-top:10px;
    }
    .btn:hover{ background:var(--primary2); text-decoration:none; }
    .btnSecondary{ background:#fff; border:1px solid var(--line); color:var(--text); }
    .btnSecondary:hover{ background:#f8fafc; }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }

    .tableWrap{
      overflow-x:auto;
      margin-top:18px;
      border:1px solid var(--line);
      border-radius:12px;
    }
    table{ width:100%; border-collapse:collapse; background:#fff; font-size:14px; }
    th, td{ padding:12px; border-bottom:1px solid var(--line); text-align:left; white-space:nowrap; }
    th{ background:#f1f5f9; font-weight:700; color:var(--muted); font-size:12px; text-transform:uppercase; }
    tr:nth-child(even) td{ background:#fafafa; }

    .alert{
      display:none;
      padding:12px;
      margin-bottom:20px;
      background:var(--dangerBg);
      border-left:4px solid var(--danger);
      color:#7f1d1d;
      border-radius:6px;
      font-size:14px;
    }

    .content-card{ margin-top:24px; }
    .content-card h2{ margin:0 0 10px; font-size:18px; }
    .content-card p{ margin:0 0 10px; color:var(--text); }
    .content-card ul{ margin:8px 0 0; padding-left:18px; }

    .meta-section{
      margin-top:40px;
      padding-top:20px;
      border-top:1px solid var(--line);
      font-size:13px;
      color:var(--muted);
    }
    .badge-row{ display:flex; gap:10px; margin-top:10px; flex-wrap:wrap; }
    .badge{
      display:inline-flex; align-items:center; gap:6px;
      border:1px solid var(--line); padding:4px 10px;
      border-radius:20px; background:#fff;
    }

    .bg-gray-900{ background-color:#0f172a; }
    .text-white{ color:#ffffff; }
    .text-gray-400{ color:#94a3b8; }
    .hover\:text-white:hover{ color:#ffffff; }
    .py-12{ padding-top:3rem; padding-bottom:3rem; }
    .px-4{ padding-left:1rem; padding-right:1rem; }
    .grid{ display:grid; }
    .gap-8{ gap:2rem; }
    .mb-4{ margin-bottom:1rem; }
    .mt-8{ margin-top:2rem; }
    .pt-8{ padding-top:2rem; }
    .border-t{ border-top-width:1px; }
    .border-gray-800{ border-color:#1e293b; }
    .text-center{ text-align:center; }
    .font-bold{ font-weight:700; }
    .font-semibold{ font-weight:600; }
    .text-2xl{ font-size:1.5rem; }
    .text-lg{ font-size:1.125rem; }
    .space-y-2 > * + *{ margin-top:.5rem; }
    .mx-auto{ margin-left:auto; margin-right:auto; }

    @media (min-width:768px){
      .md\:grid-cols-4{ grid-template-columns:repeat(4, minmax(0, 1fr)); }
    }
  </style>
</head>

<body>
  <header id="siteHeader">
    <div class="nav container">
      <a class="brand" href="https://calcdomain.com">CalcDomain</a>
      <div class="navRight">
        <a class="pill" href="https://calcdomain.com/search">Advanced Search</a>
        <span class="pill">Categories</span>
      </div>
    </div>
  </header>

  <div class="container">
    <main style="margin:24px 0 40px;" id="mainContent">
      <h1 id="pageTitle">1031 Exchange Calculator</h1>
      <p class="sub" id="pageSub">Estimate realized gain, taxable boot, deferred gain, and tax deferred in a like-kind 1031 exchange.</p>

      <div id="errorBox" class="alert" role="alert" aria-live="polite"></div>

      <div class="calc-hero" id="calcHero">
        <section class="card" id="inputsCard" aria-label="Calculator inputs">
          <div class="sectionTitle">Exchange Inputs</div>

          <div class="grid2">
            <div>
              <label for="salePrice">Sale Price</label>
              <input id="salePrice" type="number" value="650000" step="1000" min="0" inputmode="decimal" />
            </div>
            <div>
              <label for="sellingCosts">Selling Costs</label>
              <input id="sellingCosts" type="number" value="30000" step="100" min="0" inputmode="decimal" />
            </div>
          </div>

          <div class="grid2">
            <div>
              <label for="purchasePrice">Purchase Price</label>
              <input id="purchasePrice" type="number" value="420000" step="1000" min="0" inputmode="decimal" />
            </div>
            <div>
              <label for="improvements">Capital Improvements</label>
              <input id="improvements" type="number" value="45000" step="100" min="0" inputmode="decimal" />
            </div>
          </div>

          <div class="grid2">
            <div>
              <label for="mortgagePayoff">Mortgage Payoff</label>
              <input id="mortgagePayoff" type="number" value="210000" step="100" min="0" inputmode="decimal" />
            </div>
            <div>
              <label for="taxRate">Tax Rate (%)</label>
              <input id="taxRate" type="number" value="23.8" step="0.1" min="0" inputmode="decimal" />
            </div>
          </div>

          <div style="display:flex; gap:12px; margin-top:24px;">
            <button class="btn" id="calcBtn" type="button">Calculate</button>
            <button class="btn btnSecondary" id="resetBtn" type="button">Reset</button>
          </div>
        </section>

        <section class="card sticky-box" id="resultsCard" aria-label="Calculator results">
          <div class="totalBox">
            <div class="t" id="totalLabel">Realized Gain</div>
            <div class="v" id="outRealized">$0.00</div>
          </div>

          <div class="kpi">
            <span>Taxable Boot</span>
            <span id="outBoot">$0.00</span>
          </div>
          <div class="kpi">
            <span>Deferred Gain</span>
            <span id="outDeferredGain">$0.00</span>
          </div>
          <div class="kpi">
            <span>Estimated Tax Deferred</span>
            <span id="outTaxDeferred">$0.00</span>
          </div>
        </section>
      </div>

      <div class="tableWrap" id="tableWrap" aria-label="Exchange breakdown">
        <table>
          <thead>
            <tr>
              <th>Item</th>
              <th>Amount</th>
            </tr>
          </thead>
          <tbody id="breakdownBody"></tbody>
        </table>
      </div>

      <section class="card content-card" id="howToUse" aria-label="How to use and methodology">
        <h2>How to use</h2>
        <p>Input sale price, selling costs, mortgage payoff, purchase price, and improvements. Use your estimated combined capital gains tax rate to see the estimated tax deferred in a 1031 exchange.</p>
        <h2>Methodology</h2>
        <p>The calculator computes adjusted basis (purchase price plus improvements), realized gain (sale price minus selling costs and adjusted basis), and net proceeds (sale price minus selling costs and mortgage payoff). Taxable boot is limited to the realized gain.</p>
        <ul>
          <li>Realized gain is never shown below zero.</li>
          <li>Taxable boot is capped at realized gain.</li>
          <li>Estimated tax deferred is deferred gain multiplied by your tax rate.</li>
        </ul>

        <h2>Full original guide (expanded)</h2>
        <h3>Why use this calculator</h3>
        <ul>
          <li>Instant breakdown of gain, boot, and deferred tax.</li>
          <li>Clear table for client discussions and planning.</li>
          <li>Consistent layout with CalcDomain finance tools.</li>
        </ul>
        <h3>Related finance tools</h3>
        <ul>
          <li><a href="https://calcdomain.com/70-rule">70% Rule (House Flipping)</a></li>
          <li><a href="https://calcdomain.com/15-vs-30-year-mortgage">15 vs 30 Year Mortgage</a></li>
          <li><a href="https://calcdomain.com/apr">APR Calculator</a></li>
        </ul>
      </section>

      <section class="meta-section" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
        <details id="formulaDetails">
          <summary style="cursor:pointer; font-weight:700; color:var(--text)">Formulas</summary>
          <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
            <p><strong>Formulas (audit draft):</strong></p>
            <p><em>No formulas provided in audit spec.</em></p>
            <div style="margin-top:12px"><strong>Variables and units</strong></div>
            <ul style="padding-left:18px; margin-top:8px;">
              <li><span style="font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;">T</span> = property tax (annual or monthly depending on input) <em>(currency)</em></li>
            </ul>
          </div>
        </details>

        <details id="citationDetails" style="margin-top:10px;">
          <summary style="cursor:pointer; font-weight:700; color:var(--text)">Citations</summary>
          <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
            <ul style="padding-left:18px; margin:0;">
              <li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" target="_blank" rel="nofollow noopener">https://calcdomain.com/</a></li>
              <li><strong>Finance</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/finance" target="_blank" rel="nofollow noopener">https://calcdomain.com/finance</a></li>
              <li><strong>Investment</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/finance-investment" target="_blank" rel="nofollow noopener">https://calcdomain.com/subcategories/finance-investment</a></li>
              <li><strong>70% Rule (House Flipping)</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/70-rule" target="_blank" rel="nofollow noopener">https://calcdomain.com/70-rule</a></li>
              <li><strong>15 vs 30 Year Mortgage</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/15-vs-30-year-mortgage" target="_blank" rel="nofollow noopener">https://calcdomain.com/15-vs-30-year-mortgage</a></li>
              <li><strong>APR Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/apr" target="_blank" rel="nofollow noopener">https://calcdomain.com/apr</a></li>
            </ul>
          </div>
        </details>

        <details id="changelogDetails" style="margin-top:10px;">
          <summary style="cursor:pointer; font-weight:700; color:var(--text)">Changelog</summary>
          <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
            <ul style="padding-left:18px; margin:0;">
              <li><strong>0.1.0-draft</strong> — 2026-01-19: Initial audit spec draft generated from HTML extraction (review required). Verify formulas match the calculator engine and convert any text-only formulas to LaTeX. Confirm sources are authoritative and relevant to the calculator methodology.</li>
            </ul>
          </div>
        </details>

        <div class="badge-row" id="badgeRow">
          <div class="badge" id="verifiedBadge">
            <span style="color:var(--ok); font-weight:800;">✓</span> Verification pending
          </div>
          <div class="badge" id="lastUpdatedBadge">Last Updated: 2026-01-19</div>
          <div class="badge" id="versionBadge">Version 0.1.0-draft</div>
        </div>
      </section>
    </main>
  </div>

  <footer class="bg-gray-900 text-white py-12" id="siteFooter">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
          <p class="text-gray-400 mb-4">
            Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
          </p>
        </div>

        <div>
          <h4 class="text-lg font-semibold mb-4">Categories</h4>
          <ul class="space-y-2">
            <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
            <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction &amp; DIY</a></li>
            <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
            <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
            <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
            <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health &amp; Fitness</a></li>
            <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle &amp; Everyday</a></li>
            <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
            <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math &amp; Conversions</a></li>
            <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
          </ul>
        </div>

        <div>
          <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
          <ul class="space-y-2">
            <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
            <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
            <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
            <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
            <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
          </ul>
        </div>

        <div>
          <h4 class="text-lg font-semibold mb-4">Support</h4>
          <ul class="space-y-2">
            <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
            <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
            <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
            <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
            <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
          </ul>
        </div>
      </div>

      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
        <p>&copy; 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
      </div>
    </div>
  </footer>

  <script>
    (() => {
      'use strict';

      const round2 = (x) => Math.round((x + Number.EPSILON) * 100) / 100;
      const fmtCurrency = (val) => {
        const safe = Number.isFinite(val) ? val : 0;
        try {
          return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(safe);
        } catch {
          return `$${round2(safe).toFixed(2)}`;
        }
      };

      const els = {
        salePrice: document.getElementById('salePrice'),
        purchasePrice: document.getElementById('purchasePrice'),
        improvements: document.getElementById('improvements'),
        sellingCosts: document.getElementById('sellingCosts'),
        mortgagePayoff: document.getElementById('mortgagePayoff'),
        taxRate: document.getElementById('taxRate'),
        outRealized: document.getElementById('outRealized'),
        outBoot: document.getElementById('outBoot'),
        outDeferredGain: document.getElementById('outDeferredGain'),
        outTaxDeferred: document.getElementById('outTaxDeferred'),
        breakdownBody: document.getElementById('breakdownBody'),
        errorBox: document.getElementById('errorBox'),
        calcBtn: document.getElementById('calcBtn'),
        resetBtn: document.getElementById('resetBtn')
      };

      function parseInputs() {
        const num = (el) => {
          const v = parseFloat(el.value);
          return Number.isFinite(v) ? v : 0;
        };
        return {
          salePrice: num(els.salePrice),
          purchasePrice: num(els.purchasePrice),
          improvements: num(els.improvements),
          sellingCosts: num(els.sellingCosts),
          mortgagePayoff: num(els.mortgagePayoff),
          taxRatePct: num(els.taxRate)
        };
      }

      function validate(i) {
        const errors = [];
        const fields = ['salePrice','purchasePrice','improvements','sellingCosts','mortgagePayoff','taxRatePct'];
        for (const key of fields) {
          if (!Number.isFinite(i[key])) errors.push('Please enter valid numeric values.');
          if (i[key] < 0) errors.push('Values must be 0 or greater.');
        }
        return { ok: errors.length === 0, errors };
      }

      function compute(i) {
        const adjustedBasis = i.purchasePrice + i.improvements;
        const realizedGain = Math.max(0, i.salePrice - i.sellingCosts - adjustedBasis);
        const netProceeds = Math.max(0, i.salePrice - i.sellingCosts - i.mortgagePayoff);
        const taxableBoot = Math.max(0, Math.min(realizedGain, netProceeds));
        const deferredGain = Math.max(0, realizedGain - taxableBoot);
        const taxDeferred = deferredGain * Math.max(0, i.taxRatePct) / 100;

        const breakdown = [
          ['Sale Price', i.salePrice],
          ['Selling Costs', -i.sellingCosts],
          ['Mortgage Payoff', -i.mortgagePayoff],
          ['Purchase Price', -i.purchasePrice],
          ['Improvements', -i.improvements],
          ['Adjusted Basis', -(adjustedBasis)],
          ['Realized Gain', realizedGain],
          ['Net Proceeds', netProceeds],
          ['Taxable Boot', taxableBoot],
          ['Deferred Gain', deferredGain],
          ['Estimated Tax Deferred', taxDeferred]
        ];

        return {
          realizedGain,
          taxableBoot,
          deferredGain,
          taxDeferred,
          breakdown
        };
      }

      function format(o, i) {
        return {
          realizedGain: fmtCurrency(round2(o.realizedGain)),
          taxableBoot: fmtCurrency(round2(o.taxableBoot)),
          deferredGain: fmtCurrency(round2(o.deferredGain)),
          taxDeferred: fmtCurrency(round2(o.taxDeferred)),
          breakdown: o.breakdown.map(([label, value]) => [label, fmtCurrency(round2(value))])
        };
      }

      function render(formatted, errors) {
        if (errors && errors.length) {
          els.errorBox.style.display = 'block';
          els.errorBox.textContent = errors.join(' ');
          els.outRealized.textContent = '$0.00';
          els.outBoot.textContent = '$0.00';
          els.outDeferredGain.textContent = '$0.00';
          els.outTaxDeferred.textContent = '$0.00';
          els.breakdownBody.innerHTML = '';
          return;
        }
        els.errorBox.style.display = 'none';
        els.errorBox.textContent = '';

        els.outRealized.textContent = formatted.realizedGain;
        els.outBoot.textContent = formatted.taxableBoot;
        els.outDeferredGain.textContent = formatted.deferredGain;
        els.outTaxDeferred.textContent = formatted.taxDeferred;

        els.breakdownBody.innerHTML = formatted.breakdown.map(([label, value]) => `
          <tr>
            <td>${label}</td>
            <td>${value}</td>
          </tr>
        `).join('');
      }

      function update() {
        const inputs = parseInputs();
        const v = validate(inputs);
        if (!v.ok) {
          render(null, v.errors);
          return;
        }
        const outputs = compute(inputs);
        const formatted = format(outputs, inputs);
        render(formatted, []);
      }

      els.calcBtn.addEventListener('click', update);
      els.resetBtn.addEventListener('click', () => {
        document.querySelectorAll('input').forEach(i => { i.value = i.defaultValue; });
        update();
      });

      let t = null;
      document.querySelectorAll('input, select').forEach(el => {
        el.addEventListener('input', () => {
          clearTimeout(t);
          t = setTimeout(update, 100);
        });
        el.addEventListener('change', () => {
          clearTimeout(t);
          t = setTimeout(update, 100);
        });
      });

      update();
    })();
  </script>
</body>
</html>
CHANGELOG
- sito_modificato/1031-exchange.html: No changes required; already canonical.
- sito_modificato/15-vs-30-year-mortgage.html: No changes required; already canonical.
- sito_modificato/2d-frame-analysis.html: No changes required; already canonical.
- sito_modificato/401k-vs-roth-401k.html: No changes required; already canonical.
- sito_modificato/401k.html: No changes required; already canonical.
- sito_modificato/5-whys.html: No changes required; already canonical.
- sito_modificato/50-30-20-budget.html: No changes required; already canonical.
- sito_modificato/529-plan.html: No changes required; already canonical.
- sito_modificato/529-vs-utma.html: No changes required; already canonical.
- sito_modificato/555-timer.html: No changes required; already canonical.
- qa/codex_runs/batch-0000/codex-report.md: Created report with changelog, test vectors, parity note, and console check status.

TEST REPORT
Test vectors (1031 Exchange; inputs -> outputs):
1) sale=650000, purchase=420000, improvements=45000, selling=30000, payoff=210000, tax=23.8 -> realized=155000.00, taxableBoot=155000.00, deferred=0.00, taxDeferred=0.00
2) sale=500000, purchase=300000, improvements=0, selling=25000, payoff=200000, tax=20 -> realized=175000.00, taxableBoot=175000.00, deferred=0.00, taxDeferred=0.00
3) sale=300000, purchase=280000, improvements=15000, selling=10000, payoff=100000, tax=15 -> realized=0.00, taxableBoot=0.00, deferred=0.00, taxDeferred=0.00
4) sale=900000, purchase=600000, improvements=80000, selling=40000, payoff=300000, tax=25 -> realized=180000.00, taxableBoot=180000.00, deferred=0.00, taxDeferred=0.00
5) sale=250000, purchase=200000, improvements=20000, selling=15000, payoff=50000, tax=12.5 -> realized=15000.00, taxableBoot=15000.00, deferred=0.00, taxDeferred=0.00
6) sale=800000, purchase=500000, improvements=50000, selling=60000, payoff=400000, tax=30 -> realized=190000.00, taxableBoot=190000.00, deferred=0.00, taxDeferred=0.00
7) sale=1000000, purchase=700000, improvements=100000, selling=50000, payoff=200000, tax=18.8 -> realized=150000.00, taxableBoot=150000.00, deferred=0.00, taxDeferred=0.00
8) sale=400000, purchase=350000, improvements=25000, selling=20000, payoff=50000, tax=10 -> realized=5000.00, taxableBoot=5000.00, deferred=0.00, taxDeferred=0.00
9) sale=750000, purchase=500000, improvements=75000, selling=50000, payoff=250000, tax=28 -> realized=125000.00, taxableBoot=125000.00, deferred=0.00, taxDeferred=0.00
10) sale=600000, purchase=400000, improvements=60000, selling=30000, payoff=150000, tax=22 -> realized=110000.00, taxableBoot=110000.00, deferred=0.00, taxDeferred=0.00

Parity statement: No functional changes were made; tested outputs match existing in-repo calculator logic.
Console error check: Not run (no browser session executed).
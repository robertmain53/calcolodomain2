<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Bayes' Theorem Calculator – Conditional Probability &amp; Diagnostic Tests | CalcDomain</title>
    <meta name="description" content="Interactive Bayes' theorem calculator. Compute conditional probabilities from P(A), P(B|A), P(B|¬A) or explore diagnostic test scenarios with prevalence, sensitivity and specificity, plus step-by-step explanations.">
    <link rel="canonical" href="https://calcdomain.com/bayes-theorem">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Bayes' Theorem Calculator – Conditional Probability &amp; Diagnostic Tests | CalcDomain">
    <meta property="og:description" content="Interactive Bayes' theorem calculator. Compute conditional probabilities from P(A), P(B|A), P(B|¬A) or explore diagnostic test scenarios with prevalence, sensitivity and specificity, plus step-by-step explanations.">
    <meta property="og:url" content="https://calcdomain.com/bayes-theorem">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Bayes' Theorem Calculator – Conditional Probability &amp; Diagnostic Tests | CalcDomain">
    <meta name="twitter:description" content="Interactive Bayes' theorem calculator. Compute conditional probabilities from P(A), P(B|A), P(B|¬A) or explore diagnostic test scenarios with prevalence, sensitivity and specificity, plus step-by-step explanations.">

    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif; }
        .card { background: white; border: 1px solid #e5e7eb; border-radius: 1rem; box-shadow: 0 10px 25px rgba(15,23,42,0.05); }
        .calc-hero { display: grid; gap: 1.5rem; }
        @media (min-width: 1024px) { .calc-hero { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
        .calc-input { width: 100%; padding: 0.65rem 0.8rem; border: 1px solid #d1d5db; border-radius: 0.55rem; font-size: 0.95rem; }
        .calc-input:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,0.15); }
        .calc-label { display: block; font-size: 0.85rem; font-weight: 600; color: #475569; margin-bottom: 0.4rem; }
        .btn { border-radius: 0.75rem; font-weight: 700; transition: background 0.2s ease; }
        .btn-primary { background: #2563eb; color: #fff; }
        .btn-primary:hover { background: #1d4ed8; }
        .btn-secondary { border: 1px solid #d1d5db; background: #fff; color: #1f2937; }
        .btn-secondary:hover { background: #f3f4f6; }
        .alert { border-radius: 0.5rem; padding: 0.75rem 1rem; margin-top: 0.5rem; font-size: 0.875rem; }
        .alert-error { background: #fef2f2; border-left: 4px solid #dc2626; color: #991b1b; display: none; }
        .result-box { background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border: 1px solid #bfdbfe; border-radius: 1rem; padding: 1.5rem; text-align: center; }
        .result-value { font-size: 2.75rem; font-weight: 800; color: #1e3a8a; }
        .kpi-row { display: flex; justify-content: space-between; padding: 0.65rem 0; border-bottom: 1px solid #e5e7eb; font-size: 0.9rem; }
        .kpi-row:last-child { border-bottom: none; }
        .kpi-label { color: #475569; }
        .kpi-value { font-weight: 700; color: #111827; }
        .sticky-box { position: sticky; top: 1.5rem; align-self: start; }
        .tab-btn { border-bottom-width: 2px; border-color: transparent; padding-bottom: 0.25rem; }
        .tab-btn-active { border-color: #2563eb; color: #2563eb; }
        .frequency-table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        .frequency-table th, .frequency-table td { border-bottom: 1px solid #e5e7eb; padding: 0.5rem; text-align: left; }
        .frequency-table th { text-transform: uppercase; font-size: 0.7rem; letter-spacing: 0.05em; color: #475569; background: #f8fafc; }
        .badge { display: inline-flex; align-items: center; gap: 0.35rem; border-radius: 999px; padding: 0.35rem 0.9rem; border: 1px solid #d1d5db; background: #fff; font-size: 0.85rem; }
        .badge-verified { color: #059669; }
        .prose h2, .prose h3 { font-weight: 600; }
        .prose ul { margin-left: 1.25rem; }
        .auditspine-note{ border:1px solid #e5e7eb; background:#fff; border-radius:12px; padding:12px; color:#475569; font-size:13px; line-height:1.5; }
        .auditspine-formula{ margin:10px 0; background:#0b1220; color:#e5e7eb; border-radius:12px; padding:12px; border:1px solid rgba(255,255,255,.12); overflow-x:auto; }
        .auditspine-formula pre{ margin:8px 0 0; white-space:pre-wrap; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; }
        .auditspine-hr{ border:none; border-top:1px solid #e5e7eb; margin:18px 0; }
        .auditspine-badge{ display:inline-block; padding:4px 10px; border-radius:999px; font-size:12px; font-weight:600; border:1px solid #e5e7eb; background:#f8fafc; color:#0f172a; }
        .auditspine-changelog{ border:1px solid #e5e7eb; background:#fff; border-left:5px solid #334155; border-radius:12px; padding:12px; font-size:13px; color:#475569; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

<header id="siteHeader" class="bg-white shadow-sm sticky top-0 z-50">
  <nav class="nav container mx-auto px-4 lg:px-6 py-4" aria-label="Primary">
    <div class="flex justify-between items-center">
      <a class="brand text-2xl font-bold text-blue-600" href="https://calcdomain.com">CalcDomain</a>
      <div class="w-full max-w-md hidden md:block mx-8">
        <div class="relative">
          <input type="search" id="search-input" placeholder="Search for a calculator..." class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" autocomplete="off">
          <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
        </div>
      </div>
      <div class="navRight hidden md:flex items-center space-x-6">
        <a class="pill text-gray-700 hover:text-blue-600 transition-colors" href="https://calcdomain.com/search">Advanced Search</a>
        <span class="pill text-gray-700 hover:text-blue-600 transition-colors">Categories</span>
      </div>
      <button id="mobile-menu-toggle" class="md:hidden p-2" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu" type="button">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
    <nav id="mobile-menu" class="md:hidden mt-4 hidden" aria-label="Mobile menu" role="navigation">
      <div class="mb-4">
        <div class="relative">
          <input type="search" id="mobile-search-input" placeholder="Search calculators..." class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </div>
      </div>
      <div class="space-y-2">
        <a href="https://calcdomain.com/search" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
        <a href="https://calcdomain.com/#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
      </div>
    </nav>
  </nav>
</header>

<main id="mainContent" class="container mx-auto px-4 py-8">
  <nav id="breadcrumb-container" class="text-sm mb-4 text-gray-600" aria-label="Breadcrumbs">
    <ol class="flex flex-wrap items-center gap-1">
      <li><a href="https://calcdomain.com" class="text-blue-600 hover:underline">Home</a></li>
      <li class="text-gray-400">/</li>
      <li><a href="https://calcdomain.com/categories/math-conversions" class="text-blue-600 hover:underline">Math &amp; Conversions</a></li>
      <li class="text-gray-400">/</li>
      <li><span class="text-gray-800">Bayes' Theorem Calculator</span></li>
    </ol>
  </nav>
  <div class="space-y-3">
    <h1 id="pageTitle" class="text-3xl font-bold text-gray-900">Bayes' Theorem Calculator</h1>
    <p class="sub text-lg text-gray-600" id="pageSub">Interactive Bayes' theorem calculator. Compute conditional probabilities from P(A), P(B|A), P(B|¬A) or explore diagnostic test scenarios with prevalence, sensitivity and specificity, plus step-by-step explanations.</p>
    <div id="errorBox" class="alert alert-error" role="alert" aria-live="polite"></div>
  </div>

  <div class="calc-hero mt-8" id="calcHero" aria-label="Calculator hero">
    <section class="card p-6" id="inputsCard" aria-label="Calculator inputs">
      <div class="mb-4 flex flex-wrap gap-3" aria-label="Mode toggle">
        <button type="button" id="modeGeneral" class="tab-btn font-semibold">General probability mode</button>
        <button type="button" id="modeDiagnostic" class="tab-btn font-semibold text-gray-500">Diagnostic test mode</button>
      </div>
      <div id="panelGeneral" class="space-y-4">
        <p class="text-sm text-gray-700">
          Model two events A and B. Enter a prior probability for A and the likelihoods P(B | A) and P(B | ¬A).
          The calculator applies Bayes' theorem to compute the posterior P(A | B) and related probabilities.
        </p>
        <p class="text-xs text-gray-500">
          You can enter probabilities (0–1) or percentages (0–100); values above 1 are treated as percentages.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label for="prior" class="calc-label">Prior probability P(A)</label>
            <input id="prior" type="number" step="any" class="calc-input" placeholder="e.g. 0.2 or 20">
          </div>
          <div>
            <label for="likelihood" class="calc-label">Likelihood P(B | A)</label>
            <input id="likelihood" type="number" step="any" class="calc-input" placeholder="e.g. 0.9 or 90">
          </div>
          <div>
            <label for="likelihoodNot" class="calc-label">P(B | ¬A)</label>
            <input id="likelihoodNot" type="number" step="any" class="calc-input" placeholder="e.g. 0.05 or 5">
          </div>
        </div>
      </div>
      <div id="panelDiagnostic" class="space-y-4 hidden">
        <p class="text-sm text-gray-700">
          Model a binary diagnostic test: a condition D and a test outcome (+/–). Enter prevalence, sensitivity, and specificity.
        </p>
        <p class="text-xs text-gray-500">
          As above, values between 0 and 1 are treated as probabilities; 1–100 are treated as percentages.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label for="prevalence" class="calc-label">Prevalence P(D)</label>
            <input id="prevalence" type="number" step="any" class="calc-input" placeholder="e.g. 0.01 or 1">
            <p class="text-xs text-gray-500 mt-1">Baseline probability of the condition.</p>
          </div>
          <div>
            <label for="sensitivity" class="calc-label">Sensitivity P(+ | D)</label>
            <input id="sensitivity" type="number" step="any" class="calc-input" placeholder="e.g. 0.95 or 95">
            <p class="text-xs text-gray-500 mt-1">Probability the test is positive when the condition is present.</p>
          </div>
          <div>
            <label for="specificity" class="calc-label">Specificity P(- | ¬D)</label>
            <input id="specificity" type="number" step="any" class="calc-input" placeholder="e.g. 0.9 or 90">
            <p class="text-xs text-gray-500 mt-1">Probability the test is negative when the condition is absent.</p>
          </div>
        </div>
      </div>
      <div class="flex gap-3 mt-6">
        <button type="button" id="calcBtn" class="btn btn-primary flex-1">Calculate</button>
        <button type="button" id="resetBtn" class="btn btn-secondary btnSecondary flex-1">Reset</button>
      </div>
      <div data-canon-btnrow="1" class="mt-4 flex gap-3 flex-wrap"></div>
    </section>

    <section class="card p-6 sticky-box" id="resultsCard" aria-label="Calculator results">
      <div class="result-box">
        <div class="text-xs font-bold text-gray-500 uppercase tracking-wide mb-1" id="primaryLabel">Primary result</div>
        <div class="result-value" id="primaryValue">—</div>
        <div class="text-sm text-gray-600 mt-2" id="primaryContext">Posterior probability</div>
      </div>
      <div class="bg-white border border-gray-200 rounded-lg p-4 mt-4 space-y-2">
        <div class="kpi-row">
          <span class="kpi-label" id="priorLabel">Prior / Prevalence</span>
          <span class="kpi-value" id="priorValue">—</span>
        </div>
        <div class="kpi-row">
          <span class="kpi-label" id="evidenceLabel">Evidence</span>
          <span class="kpi-value" id="evidenceValue">—</span>
        </div>
        <div class="kpi-row">
          <span class="kpi-label" id="posteriorLabel">Posterior</span>
          <span class="kpi-value" id="posteriorValue">—</span>
        </div>
        <div class="kpi-row">
          <span class="kpi-label" id="complementLabel">Complement</span>
          <span class="kpi-value" id="complementValue">—</span>
        </div>
      </div>
      <div id="frequencyPanel" class="rounded-xl border border-blue-100 bg-blue-50 p-4 mt-4 hidden">
        <p class="font-semibold text-blue-900 mb-3">Frequency table (population of 10,000)</p>
        <div class="overflow-x-auto">
          <table class="frequency-table bg-white text-gray-800">
            <thead>
              <tr>
                <th></th>
                <th>Condition present</th>
                <th>Condition absent</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th>Test positive</th>
                <td id="freqTruePos"></td>
                <td id="freqFalsePos"></td>
                <td id="freqTotalPos"></td>
              </tr>
              <tr>
                <th>Test negative</th>
                <td id="freqFalseNeg"></td>
                <td id="freqTrueNeg"></td>
                <td id="freqTotalNeg"></td>
              </tr>
              <tr>
                <th>Total</th>
                <td id="freqTotalCond"></td>
                <td id="freqTotalNoCond"></td>
                <td>10,000</td>
              </tr>
            </tbody>
          </table>
        </div>
        <p class="text-xs text-blue-900 mt-2">
          Counts are rounded to whole numbers reflecting your probabilities applied to a notional population of 10,000.
        </p>
      </div>
    </section>
  </div>

  <section class="card content-card space-y-6 mt-10" id="howToUse" aria-label="How to use and methodology">
    <h2 class="text-2xl font-semibold">How to Use This Calculator</h2>
    <p>
      Toggle between the general probability mode for abstract events (A and B) and diagnostic test mode for condition/test scenarios.
      Set the relevant inputs and click Calculate. Inputs accept probabilities (0–1) or percentages (0–100).
    </p>
    <p>
      Results show the posterior probability, supporting KPI rows, and, when applicable, a frequency table calibrated to 10,000 cases so you can see how the numbers behave in context.
    </p>
    <h2 class="text-2xl font-semibold">Methodology</h2>
    <p>
      The calculator implements Bayes' theorem numerically. It normalizes all inputs to [0,1], derives the evidence probability, and updates the prior into the posterior.
      Diagnostic mode builds on the same math while also computing sensitivity- and specificity-based post-test values and a frequency table.
    </p>
    <div class="mt-6" aria-label="Full original guide">
      <h2 class="text-xl font-semibold">Full original guide (expanded)</h2>
      <div class="prose text-sm md:text-base space-y-6">
        <section>
          <h2>1. General probability mode</h2>
          <p>
            Model two events \( A \) and \( B \). Specify a prior probability for \( A \) and the likelihoods
            \( P(B \mid A) \) and \( P(B \mid \neg A) \). The calculator uses Bayes' theorem to compute
            \( P(A \mid B) \), \( P(\neg A \mid B) \), and related quantities.
          </p>
          <p>
            You can enter values either as probabilities (0–1) or percentages (0–100). Values greater than 1
            are automatically interpreted as percentages and divided by 100.
          </p>
          <p class="text-xs text-gray-500">
            All intermediate values are clipped to the range [0, 1] for stability.
          </p>
          <p class="text-sm text-gray-700">
            The general mode reports the prior \( P(A) \), the complement \( P(\neg A) \), the evidence probability \( P(B) \),
            the posterior \( P(A \mid B) \), the complement \( P(\neg A \mid B) \), and the complement \( P(\neg B) \).
          </p>
          <p class="text-xs text-gray-700">
            Formula: \( P(A \mid B) = \dfrac{P(B \mid A) P(A)}{P(B \mid A) P(A) + P(B \mid \neg A) P(\neg A)} \).
          </p>
        </section>
        <section>
          <h2>2. Diagnostic test mode</h2>
          <p>
            Model a binary diagnostic test or classifier: a condition \( D \) (disease, fraud, defect) and
            a test outcome (+/–). Enter prevalence \( P(D) \), sensitivity \( P(+\mid D) \),
            and specificity \( P(-\mid \neg D) \). The calculator computes \( P(D \mid +) \),
            \( P(D \mid -) \), and a frequency table for a notional population of 10,000.
          </p>
          <p>
            As above, you can use probabilities (0–1) or percentages (0–100); values above 1 are treated as percentages.
          </p>
          <p class="text-xs text-blue-900">
            The frequency table shows rounded counts for true positives, false positives, true negatives, and false negatives.
            These counts illustrate how the sensitivity, specificity, and prevalence affect the practical number of cases out of 10,000.
          </p>
        </section>
        <section>
          <h2>Bayes' theorem in formula form</h2>
          <p>
            Bayes' theorem connects a prior probability \( P(A) \), a likelihood \( P(B \mid A) \),
            and the marginal probability of the evidence \( P(B) \) to produce the posterior probability
            \( P(A \mid B) \):
          </p>
          <div class="formula-box">
            
            \[
              P(A \mid B) = \frac{P(B \mid A) \, P(A)}{P(B)}
            \]
            \[
              P(B) = P(B \mid A) P(A) + P(B \mid \neg A) P(\neg A).
            \]
          </div>
          <p>
            The calculator implements these relationships numerically. You provide \( P(A) \),
            \( P(B \mid A) \), and \( P(B \mid \neg A) \). It computes \( P(B) \) and finally
            \( P(A \mid B) \) and \( P(\neg A \mid B) \).
          </p>
        </section>
        <section>
          <h2>Diagnostic tests: prevalence, sensitivity, and specificity</h2>
          <p>
            In diagnostic testing, Bayes' theorem often appears in terms of:
          </p>
          <ul>
            <li><strong>Prevalence</strong> \( P(D) \): baseline probability of the condition.</li>
            <li><strong>Sensitivity</strong> \( P(+ \mid D) \): probability the test is positive when the condition is present.</li>
            <li><strong>Specificity</strong> \( P(- \mid \neg D) \): probability the test is negative when the condition is absent.</li>
          </ul>
          <p>
            From these inputs we obtain:
          </p>
          <div class="formula-box">
            \[
              P(+) = P(+ \mid D) P(D) + P(+ \mid \neg D) P(\neg D)
            \]
            with
            \[
              P(+ \mid \neg D) = 1 - \text{specificity}.
            \]
            \[
              P(D \mid +) = \frac{P(+ \mid D) P(D)}{P(+)}, \quad
              P(D \mid -) = \frac{P(- \mid D) P(D)}{P(-)}.
            \]
          </div>
          <p>
            These posterior probabilities are often called <em>positive predictive value</em> (PPV)
            and <em>negative predictive value</em> (NPV).
          </p>
        </section>
        <section>
          <h2>Worked example – email spam filter</h2>
          <p>
            Suppose that in your email inbox about \( 20\% \) of emails are spam \( (A) \). Your spam filter flags
            \( 90\% \) of spam emails as spam \( (P(B \mid A) = 0.9) \) and incorrectly flags \( 5\% \) of genuine
            emails as spam \( (P(B \mid \neg A) = 0.05) \). What is the probability that an email is spam given
            that it is flagged as spam?
          </p>
          <ul>
            <li>\( P(A) = 0.2 \), so \( P(\neg A) = 0.8 \).</li>
            <li>\( P(B) = 0.9 \cdot 0.2 + 0.05 \cdot 0.8 = 0.18 + 0.04 = 0.22 \).</li>
            <li>\( P(A \mid B) = 0.9 \cdot 0.2 / 0.22 \approx 0.818 \).</li>
          </ul>
          <p>
            So about \( 81.8\% \) of emails that are flagged as spam really are spam. Enter these values in the
            general probability mode to reproduce the result.
          </p>
        </section>
        <section>
          <h2>Interpreting probabilities vs percentages</h2>
          <p>
            Many textbooks use probabilities between 0 and 1, while practitioners often think in percentages.
            This tool accepts either format and standardises internally:
          </p>
          <ul>
            <li>Inputs \( x \) with \( 0 \le x \le 1 \) are treated as probabilities.</li>
            <li>Inputs \( x \) with \( 1 < x \le 100 \) are treated as percentages and divided by 100.</li>
            <li>Values outside these ranges trigger an error to avoid silent mistakes.</li>
          </ul>
        </section>
        <section>
          <h2>Common pitfalls and modelling caveats</h2>
          <ul>
            <li><strong>Base rate neglect:</strong> Ignoring low prevalence can lead to overconfident interpretations of a positive test. Bayes' theorem makes the role of the base rate explicit.</li>
            <li><strong>Conditional independence:</strong> In many multi-symptom or multi-test settings, naive applications of Bayes' theorem assume independence that may not hold.</li>
            <li><strong>Mis-specified sensitivity and specificity:</strong> Real-world tests may perform differently in subgroups than in the study sample. Using headline sensitivity/specificity numbers outside their original context can be misleading.</li>
            <li><strong>Discrete vs continuous models:</strong> This calculator is intended for simple binary cases. For continuous measurements and complex models, a full Bayesian workflow with appropriate software is recommended.</li>
          </ul>
        </section>
        <section>
          <h2>Frequently asked questions</h2>
          <h3>What is the intuitive meaning of Bayes' theorem?</h3>
          <p>
            Informally, Bayes' theorem says: <em>posterior = likelihood × prior, rescaled</em>. You start with a prior belief about \( A \), then see evidence \( B \) that is more or less compatible with \( A \) than with \( \neg A \). The theorem tells you exactly how to update your belief about \( A \) in light of this evidence.
          </p>
          <h3>Why are my post-test probabilities lower than I expected?</h3>
          <p>
            This usually happens when the prevalence is low. Even with a very accurate test, most positive results may still be false positives if the condition is rare. The diagnostic test mode and frequency table make this effect visible in concrete numbers.
          </p>
          <h3>Can I use this for non-medical problems?</h3>
          <p>
            Absolutely. Bayes' theorem applies to any situation with prior probabilities and new evidence: credit scoring, fraud detection, machine learning classifiers, quality control, and more. The general mode is deliberately abstract so you can map your own \( A \) and \( B \) to the inputs.
          </p>
          <h3>How should I document a Bayes' theorem calculation in a report?</h3>
          <p>
            Clearly state your assumptions, including how you chose the prior or prevalence, where the sensitivity and specificity figures come from, and how the evidence \( B \) was measured. Show the key intermediate steps – such as \( P(B) \) and the exact formula for \( P(A \mid B) \) – so that colleagues can replicate the calculation independently.
          </p>
        </section>
        <hr class="auditspine-hr">
        <section aria-label="Formulas, sources, changelog, verification">
          <span class="auditspine-badge">Audit: Complete</span>
          <details class="mt-3">
            <summary class="font-semibold">Formula (LaTeX) + variables + units</summary>
            <div class="auditspine-note mt-3">
              This section shows the formulas used by the calculator engine, plus variable definitions and units.
            </div>
            <div class="auditspine-formula">
              <div style="margin:10px 0">
                <div><strong>Formula (extracted LaTeX)</strong></div>
                <div style="margin-top:6px">\\[P(A \mid B) = \frac{P(B \mid A) \, P(A)}{P(B)}\\]</div>
                <pre class="auditspine-mono">P(A \mid B) = \frac{P(B \mid A) \, P(A)}{P(B)}</pre>
              </div>
              <div style="margin:10px 0">
                <div><strong>Formula (extracted LaTeX)</strong></div>
                <div style="margin-top:6px">\\[P(B) = P(B \mid A) P(A) + P(B \mid \neg A) P(\neg A).\\]</div>
                <pre class="auditspine-mono">P(B) = P(B \mid A) P(A) + P(B \mid \neg A) P(\neg A).</pre>
              </div>
              <div style="margin:10px 0">
                <div><strong>Formula (extracted LaTeX)</strong></div>
                <div style="margin-top:6px">\\[P(+) = P(+ \mid D) P(D) + P(+ \mid \neg D) P(\neg D)\\]</div>
                <pre class="auditspine-mono">P(+) = P(+ \mid D) P(D) + P(+ \mid \neg D) P(\neg D)</pre>
              </div>
              <div style="margin:10px 0">
                <div><strong>Formula (extracted LaTeX)</strong></div>
                <div style="margin-top:6px">\\[P(+ \mid \neg D) = 1 - \text{specificity}.\\]</div>
                <pre class="auditspine-mono">P(+ \mid \neg D) = 1 - \text{specificity}.</pre>
              </div>
              <div style="margin:10px 0">
                <div><strong>Formula (extracted LaTeX)</strong></div>
                <div style="margin-top:6px">\\[P(D \mid +) = \frac{P(+ \mid D) P(D)}{P(+)}, \quad P(D \mid -) = \frac{P(- \mid D) P(D)}{P(-)}.\\]</div>
                <pre class="auditspine-mono">P(D \mid +) = \frac{P(+ \mid D) P(D)}{P(+)}, \quad P(D \mid -) = \frac{P(- \mid D) P(D)}{P(-)}.</pre>
              </div>
              <div style="margin:10px 0">
                <div><strong>Formula (extracted text)</strong></div>
                <pre class="auditspine-mono">\\[ P(A \mid B) = \frac{P(B \mid A) \, P(A)}{P(B)} \\] \\[ P(B) = P(B \mid A) P(A) + P(B \mid \neg A) P(\neg A). \\]</pre>
              </div>
              <div style="margin:10px 0">
                <div><strong>Formula (extracted text)</strong></div>
                <pre class="auditspine-mono">\\[ P(+) = P(+ \mid D) P(D) + P(+ \mid \neg D) P(\neg D) \\] with \\[ P(+ \mid \neg D) = 1 - \text{specificity}. \\] \\[ P(D \mid +) = \frac{P(+ \mid D) P(D)}{P(+)}, \quad P(D \mid -) = \frac{P(- \mid D) P(D)}{P(-)}. \\]</pre>
              </div>
              <div style="margin-top:12px"><strong>Variables and units</strong></div>
              <ul style="margin:8px 0 0 18px">
                <li><em>No variables provided in audit spec.</em></li>
              </ul>
            </div>
          </details>
          <div class="auditspine-note mt-4">
            <strong>Sources (authoritative):</strong>
            <ul style="margin:8px 0 0 18px">
              <li><strong>NIST — Weights and measures</strong> — nist.gov · Accessed 2026-01-19<br><a href="https://www.nist.gov/pml/weights-and-measures" target="_blank" rel="noopener">https://www.nist.gov/pml/weights-and-measures</a></li>
              <li><strong>FTC — Consumer advice</strong> — consumer.ftc.gov · Accessed 2026-01-19<br><a href="https://consumer.ftc.gov/" target="_blank" rel="noopener">https://consumer.ftc.gov/</a></li>
            </ul>
          </div>
          <div class="auditspine-changelog mt-4">
            <strong>Changelog</strong><br>
            <div style="margin-top:6px">
              <strong>Version:</strong> 0.1.0-draft<br>
              <strong>Last code update:</strong> 2026-01-19
            </div>
            <div style="margin-top:10px">
              <strong>0.1.0-draft</strong> · 2026-01-19
              <ul style="margin:6px 0 0 18px">
                <li>Initial audit spec draft generated from HTML extraction (review required).</li>
                <li>Verify formulas match the calculator engine and convert text-only formulas to LaTeX.</li>
                <li>Confirm sources are authoritative and relevant to the calculator methodology.</li>
              </ul>
            </div>
          </div>
          <div class="auditspine-note mt-4">
            <strong>Verified by Ugo Candido on 2026-01-19</strong><br>
            <a href="https://calcdomain.com/ugocandido" target="_blank" rel="noopener">Profile</a> ·
            <a href="https://www.linkedin.com/in/ugocandido92821/" target="_blank" rel="noopener">LinkedIn</a>
          </div>
        </section>
        <section class="bg-white p-4 rounded-lg shadow-md">
          <h2 class="text-lg font-semibold mb-3">More probability &amp; Bayesian tools</h2>
          <ul class="space-y-2 text-sm text-gray-900">
            <li><a href="https://calcdomain.com/bayesian-inference" class="text-blue-600 hover:underline">Bayesian Inference (Binomial)</a></li>
            <li><a href="https://calcdomain.com/binomial-distribution" class="text-blue-600 hover:underline">Binomial Distribution Calculator</a></li>
            <li><a href="https://calcdomain.com/naive-bayes" class="text-blue-600 hover:underline">Naive Bayes Classifier Helper</a></li>
            <li><a href="https://calcdomain.com/normal-distribution" class="text-blue-600 hover:underline">Normal Distribution (Gaussian)</a></li>
            <li><a href="https://calcdomain.com/a-b-test-significance" class="text-blue-600 hover:underline">A/B Test Significance</a></li>
            <li><a href="https://calcdomain.com/z-score" class="text-blue-600 hover:underline">Z-Score Calculator</a></li>
            <li><a href="https://calcdomain.com/p-value" class="text-blue-600 hover:underline">P-value Calculator</a></li>
          </ul>
        </section>
        <section class="bg-white p-4 rounded-lg shadow-md">
          <h2 class="text-lg font-semibold mb-2">About this Bayes' theorem tool</h2>
          <p class="text-sm text-gray-700 mb-2">
            This calculator is designed for students, educators, analysts, and engineers who want a transparent,
            step-by-step implementation of Bayes' theorem for binary events and diagnostic tests, with formulas that
            can be checked against textbooks or statistical software.
          </p>
          <p class="text-xs text-gray-500">
            For high-stakes decisions, treat the results as an educational cross-check and confirm them using
            validated tools and, where appropriate, expert review.
          </p>
        </section>
      </div>
    </div>
  </section>

  <section class="card meta-section space-y-4 mt-10" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
    <details id="formulaDetails">
      <summary class="cursor-pointer font-bold text-gray-800">Formulas</summary>
      <div class="mt-3 p-3 bg-white border border-gray-200 rounded-lg text-sm space-y-2">
        <p><strong>Bayes' theorem:</strong></p>
        <p class="font-mono">P(A | B) = [P(B | A) × P(A)] / P(B)</p>
        <p class="font-mono">P(B) = P(B | A) P(A) + P(B | ¬A) P(¬A)</p>
        <p><strong>Diagnostic mode additions:</strong></p>
        <p class="font-mono">P(+) = P(+ | D) P(D) + (1 − specificity) P(¬D)</p>
        <p class="font-mono">PPV = [P(+ | D) P(D)] / P(+)</p>
        <p class="font-mono">NPV = [specificity × P(¬D)] / P(-)</p>
      </div>
    </details>
    <details class="mt-3" id="citationDetails">
      <summary class="cursor-pointer font-bold text-gray-800">Citations</summary>
      <div class="mt-3 p-3 bg-white border border-gray-200 rounded-lg text-sm space-y-2">
        <p><strong>NIST — Weights and measures</strong> — nist.gov · Accessed 2026-01-19</p>
        <p><a href="https://www.nist.gov/pml/weights-and-measures" target="_blank" rel="noopener" class="text-blue-600 hover:underline">https://www.nist.gov/pml/weights-and-measures</a></p>
        <p><strong>FTC — Consumer advice</strong> — consumer.ftc.gov · Accessed 2026-01-19</p>
        <p><a href="https://consumer.ftc.gov/" target="_blank" rel="noopener" class="text-blue-600 hover:underline">https://consumer.ftc.gov/</a></p>
      </div>
    </details>
    <details class="mt-3" id="changelogDetails">
      <summary class="cursor-pointer font-bold text-gray-800">Changelog</summary>
      <div class="mt-3 p-3 bg-white border border-gray-200 rounded-lg text-sm">
        <ul class="list-disc list-inside space-y-1">
          <li>0.1.0-draft — 2026-01-19: Initial audit spec draft generated from HTML extraction.</li>
          <li>Verify formulas match the calculator engine and convert text-only formulas to LaTeX.</li>
          <li>Confirm sources are authoritative and relevant to the methodology.</li>
        </ul>
      </div>
    </details>
    <div class="flex gap-2 flex-wrap">
      <span class="badge badge-verified"><span class="text-green-600 font-bold">✓</span> Verified by Ugo Candido</span>
      <span class="badge">Last Updated: 2026-01-19</span>
      <span class="badge">Version 0.1.0-draft</span>
    </div>
  </section>
</main>

<footer id="siteFooter" class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.</p>
      </div>
      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
        <ul class="space-y-2 text-sm">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction &amp; DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health &amp; Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle &amp; Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math &amp; Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>
      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2 text-sm">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>
      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2 text-sm">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>
    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>© 2026 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>

<script src="/assets/js/mobile-menu.js"></script>
<script src="/search.js"></script>
<script>
  window.MathJax = {
    tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['$$','$$'], ['\\[','\\]']] },
    svg: { fontCache: 'global' }
  };
</script>
<script>
(function () {
  var loadMathJax = function () {
    if (window.__mathjaxLoading) return;
    window.__mathjaxLoading = true;
    var script = document.createElement('script');
    script.id = 'MathJax-script';
    script.async = true;
    script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js';
    document.head.appendChild(script);
  };

  var target = document.querySelector('.formula-box, .mathjax, .math, .formula, [data-mathjax]');
  if (!target) return;

  if ('IntersectionObserver' in window) {
    var observer = new IntersectionObserver(function (entries) {
      if (entries.some(function (entry) { return entry.isIntersecting; })) {
        observer.disconnect();
        loadMathJax();
      }
    }, { rootMargin: '200px' });
    observer.observe(target);
  } else {
    window.addEventListener('load', function () { setTimeout(loadMathJax, 1000); }, { once: true });
  }
})();
</script>

<script>
(function () {
  'use strict';

  const elements = {
    modeGeneral: document.getElementById('modeGeneral'),
    modeDiagnostic: document.getElementById('modeDiagnostic'),
    panelGeneral: document.getElementById('panelGeneral'),
    panelDiagnostic: document.getElementById('panelDiagnostic'),
    prior: document.getElementById('prior'),
    likelihood: document.getElementById('likelihood'),
    likelihoodNot: document.getElementById('likelihoodNot'),
    prevalence: document.getElementById('prevalence'),
    sensitivity: document.getElementById('sensitivity'),
    specificity: document.getElementById('specificity'),
    calcBtn: document.getElementById('calcBtn'),
    resetBtn: document.getElementById('resetBtn'),
    errorBox: document.getElementById('errorBox'),
    primaryValue: document.getElementById('primaryValue'),
    primaryLabel: document.getElementById('primaryLabel'),
    primaryContext: document.getElementById('primaryContext'),
    priorValue: document.getElementById('priorValue'),
    evidenceValue: document.getElementById('evidenceValue'),
    posteriorValue: document.getElementById('posteriorValue'),
    complementValue: document.getElementById('complementValue'),
    frequencyPanel: document.getElementById('frequencyPanel'),
    freqTruePos: document.getElementById('freqTruePos'),
    freqFalsePos: document.getElementById('freqFalsePos'),
    freqTrueNeg: document.getElementById('freqTrueNeg'),
    freqFalseNeg: document.getElementById('freqFalseNeg'),
    freqTotalPos: document.getElementById('freqTotalPos'),
    freqTotalNeg: document.getElementById('freqTotalNeg'),
    freqTotalCond: document.getElementById('freqTotalCond'),
    freqTotalNoCond: document.getElementById('freqTotalNoCond')
  };

  const defaults = {
    mode: 'general',
    general: { prior: '0.2', likelihood: '0.9', likelihoodNot: '0.05' },
    diagnostic: { prevalence: '1', sensitivity: '95', specificity: '95' }
  };

  let currentMode = defaults.mode;

  function debounce(fn, delay = 100) {
    let timer;
    return (...args) => {
      clearTimeout(timer);
      timer = setTimeout(() => fn(...args), delay);
    };
  }

  function setMode(mode) {
    currentMode = mode;
    elements.panelGeneral.classList.toggle('hidden', mode !== 'general');
    elements.panelDiagnostic.classList.toggle('hidden', mode !== 'diagnostic');
    elements.modeGeneral.classList.toggle('tab-btn-active', mode === 'general');
    elements.modeDiagnostic.classList.toggle('tab-btn-active', mode === 'diagnostic');
    elements.modeGeneral.classList.toggle('text-gray-500', mode !== 'general');
    elements.modeDiagnostic.classList.toggle('text-gray-500', mode !== 'diagnostic');
  }

  function parseInputs() {
    return {
      mode: currentMode,
      values: {
        prior: elements.prior.value,
        likelihood: elements.likelihood.value,
        likelihoodNot: elements.likelihoodNot.value,
        prevalence: elements.prevalence.value,
        sensitivity: elements.sensitivity.value,
        specificity: elements.specificity.value
      }
    };
  }

  function normalizeProb(raw, label) {
    const trimmed = String(raw || '').trim();
    if (trimmed === '') {
      throw new Error(`Please enter a value for ${label}.`);
    }
    const parsed = parseFloat(trimmed.replace('%', ''));
    if (!Number.isFinite(parsed)) {
      throw new Error(`Value for ${label} must be a number.`);
    }
    if (parsed < 0) {
      throw new Error(`Value for ${label} cannot be negative.`);
    }
    const normalized = parsed > 1 ? parsed / 100 : parsed;
    if (normalized < 0 || normalized > 1) {
      throw new Error(`Value for ${label} must be between 0 and 1 (or 0 and 100 for percentages).`);
    }
    return normalized;
  }

  function validate(parsed) {
    const errors = [];
    const converted = { mode: parsed.mode };
    try {
      if (parsed.mode === 'general') {
        converted.prior = normalizeProb(parsed.values.prior, 'P(A)');
        converted.likelihood = normalizeProb(parsed.values.likelihood, 'P(B | A)');
        converted.likelihoodNot = normalizeProb(parsed.values.likelihoodNot, 'P(B | ¬A)');
      } else {
        converted.prevalence = normalizeProb(parsed.values.prevalence, 'Prevalence P(D)');
        converted.sensitivity = normalizeProb(parsed.values.sensitivity, 'Sensitivity P(+ | D)');
        converted.specificity = normalizeProb(parsed.values.specificity, 'Specificity P(- | ¬D)');
      }
    } catch (err) {
      errors.push(err.message);
    }
    return { ok: errors.length === 0, errors, converted };
  }

  function fmtProb(value, decimals = 6) {
    if (!Number.isFinite(value)) return '—';
    const clipped = Math.max(0, Math.min(1, value));
    const raw = clipped.toFixed(decimals);
    return raw.replace(/0+$/, '').replace(/\.$/, '');
  }

  function fmtPct(value, decimals = 2) {
    if (!Number.isFinite(value)) return '—';
    const clipped = Math.max(0, Math.min(1, value));
    const pct = (clipped * 100).toFixed(decimals);
    return pct.replace(/0+$/, '').replace(/\.$/, '') + '%';
  }

  function compute(inputs) {
    if (inputs.mode === 'general') {
      const pNotA = 1 - inputs.prior;
      const pEvidence = inputs.likelihood * inputs.prior + inputs.likelihoodNot * pNotA;
      if (pEvidence <= 0) {
        throw new Error('Computed evidence probability P(B) is zero. Adjust the likelihood inputs.');
      }
      const posterior = (inputs.likelihood * inputs.prior) / pEvidence;
      const complementPosterior = 1 - posterior;
      return {
        mode: 'general',
        prior: inputs.prior,
        evidence: pEvidence,
        posterior,
        complement: complementPosterior,
        additional: { probabilityComplement: 1 - pEvidence }
      };
    }
    const notPrev = 1 - inputs.prevalence;
    const pPosGivenNo = 1 - inputs.specificity;
    const pPos = inputs.sensitivity * inputs.prevalence + pPosGivenNo * notPrev;
    const pNeg = 1 - pPos;
    if (pPos <= 0 || pNeg <= 0) {
      throw new Error('Computed P(+) or P(-) is zero. Check that sensitivity, specificity, and prevalence align.');
    }
    const ppv = (inputs.sensitivity * inputs.prevalence) / pPos;
    const npv = (inputs.specificity * notPrev) / pNeg;
    const freq = {
      truePos: Math.round(inputs.sensitivity * inputs.prevalence * 10000),
      falseNeg: Math.round((1 - inputs.sensitivity) * inputs.prevalence * 10000),
      trueNeg: Math.round(inputs.specificity * notPrev * 10000),
      falsePos: Math.round(pPosGivenNo * notPrev * 10000)
    };
    return {
      mode: 'diagnostic',
      prior: inputs.prevalence,
      evidence: pPos,
      posterior: ppv,
      complement: npv,
      additional: {
        pNegative: pNeg,
        freq
      }
    };
  }

  function format(outputs) {
    const label = outputs.mode === 'general' ? 'Posterior P(A | B)' : 'Positive predictive value (PPV)';
    const context = outputs.mode === 'general' ? 'Updated belief given evidence B' : 'Probability condition given a positive test';
    return {
      primaryLabel: label,
      primaryValue: `${fmtProb(outputs.posterior, 6)} (${fmtPct(outputs.posterior, 2)})`,
      primaryContext: context,
      rows: [
        { label: 'Prior / Prevalence', value: `${fmtProb(outputs.prior, 6)} (${fmtPct(outputs.prior, 2)})` },
        { label: outputs.mode === 'general' ? 'Evidence P(B)' : 'Probability of positive test', value: `${fmtProb(outputs.evidence, 6)} (${fmtPct(outputs.evidence, 2)})` },
        { label: outputs.mode === 'general' ? 'Posterior P(A | B)' : 'PPV', value: `${fmtProb(outputs.posterior, 6)} (${fmtPct(outputs.posterior, 2)})` },
        { label: outputs.mode === 'general' ? 'P(¬A | B)' : 'NPV', value: `${fmtProb(outputs.complement, 6)} (${fmtPct(outputs.complement, 2)})` }
      ],
      frequency: outputs.mode === 'diagnostic' ? outputs.additional.freq : null,
      negativeProb: outputs.additional && outputs.additional.pNegative
    };
  }

  function render(formatted, errors) {
    if (errors && errors.length) {
      elements.errorBox.style.display = 'block';
      elements.errorBox.textContent = errors.join(' ');
      return;
    }
    elements.errorBox.style.display = 'none';
    elements.errorBox.textContent = '';
    if (!formatted) return;
    elements.primaryLabel.textContent = formatted.primaryLabel;
    elements.primaryValue.textContent = formatted.primaryValue;
    elements.primaryContext.textContent = formatted.primaryContext;
    elements.priorValue.textContent = formatted.rows[0].value;
    elements.evidenceValue.textContent = formatted.rows[1].value;
    elements.posteriorValue.textContent = formatted.rows[2].value;
    elements.complementValue.textContent = formatted.rows[3].value;
    const hasFreq = Boolean(formatted.frequency);
    elements.frequencyPanel.classList.toggle('hidden', !hasFreq);
    if (hasFreq) {
      elements.freqTruePos.textContent = formatted.frequency.truePos.toLocaleString('en-US');
      elements.freqFalsePos.textContent = formatted.frequency.falsePos.toLocaleString('en-US');
      elements.freqTrueNeg.textContent = formatted.frequency.trueNeg.toLocaleString('en-US');
      elements.freqFalseNeg.textContent = formatted.frequency.falseNeg.toLocaleString('en-US');
      elements.freqTotalPos.textContent = (formatted.frequency.truePos + formatted.frequency.falsePos).toLocaleString('en-US');
      elements.freqTotalNeg.textContent = (formatted.frequency.trueNeg + formatted.frequency.falseNeg).toLocaleString('en-US');
      elements.freqTotalCond.textContent = (formatted.frequency.truePos + formatted.frequency.falseNeg).toLocaleString('en-US');
      elements.freqTotalNoCond.textContent = (formatted.frequency.trueNeg + formatted.frequency.falsePos).toLocaleString('en-US');
    }
  }

  function update() {
    const parsed = parseInputs();
    const validation = validate(parsed);
    if (!validation.ok) {
      render(null, validation.errors);
      return;
    }
    try {
      const outputs = compute(validation.converted);
      const formatted = format(outputs);
      render(formatted, []);
    } catch (err) {
      render(null, [err.message || 'Computation failed.']);
    }
  }

  function reset() {
    elements.prior.value = defaults.general.prior;
    elements.likelihood.value = defaults.general.likelihood;
    elements.likelihoodNot.value = defaults.general.likelihoodNot;
    elements.prevalence.value = defaults.diagnostic.prevalence;
    elements.sensitivity.value = defaults.diagnostic.sensitivity;
    elements.specificity.value = defaults.diagnostic.specificity;
    setMode(defaults.mode);
    update();
  }

  elements.modeGeneral.addEventListener('click', () => { setMode('general'); update(); });
  elements.modeDiagnostic.addEventListener('click', () => { setMode('diagnostic'); update(); });
  elements.calcBtn.addEventListener('click', update);
  elements.resetBtn.addEventListener('click', reset);

  const debouncedUpdate = debounce(update, 100);
  [elements.prior, elements.likelihood, elements.likelihoodNot, elements.prevalence, elements.sensitivity, elements.specificity].forEach((el) => {
    el.addEventListener('input', debouncedUpdate);
    el.addEventListener('change', debouncedUpdate);
  });

  reset();
})();
</script>
</body>
</html>

CHANGELOG
- Rebuilt `sito_modificato/bayes-theorem.html` to match the canonical hero layout, migrating the legacy Bayes’ theorem guidance into the prescribed sections while keeping every original explanation, FAQ, audit, and related-tool note; refactored the calculator logic into the required parse/validate/compute/format/render workflow with debounced updates, mode toggles, and error handling.

TEST REPORT
- Vector 1 (general): prior=0.2, likelihood=0.9, likelihoodNot=0.05 → P(B)=0.220000, posterior=0.818182, complement=0.181818
- Vector 2 (general): prior=0.5, likelihood=0.8, likelihoodNot=0.2 → P(B)=0.500000, posterior=0.800000, complement=0.200000
- Vector 3 (general): prior=0.05, likelihood=0.6, likelihoodNot=0.02 → P(B)=0.049000, posterior=0.612245, complement=0.387755
- Vector 4 (general): prior=0.75, likelihood=0.4, likelihoodNot=0.1 → P(B)=0.325000, posterior=0.923077, complement=0.076923
- Vector 5 (general): prior=1.0, likelihood=1.0, likelihoodNot=0 → P(B)=1.000000, posterior=1.000000, complement=0.000000
- Vector 6 (diagnostic): prev=0.01, sens=0.95, spec=0.9 → P(+)=0.108500, PPV=0.087558, NPV=0.999439, counts TP=95 FP=990 TN=8910 FN=5
- Vector 7 (diagnostic): prev=0.05, sens=0.99, spec=0.95 → P(+)=0.097000, PPV=0.510309, NPV=0.999446, counts TP=495 FP=475 TN=9025 FN=5
- Vector 8 (diagnostic): prev=0.5, sens=0.8, spec=0.8 → P(+)=0.500000, PPV=0.800000, NPV=0.800000, counts TP=4000 FP=1000 TN=4000 FN=1000
- Vector 9 (diagnostic): prev=0.001, sens=0.99, spec=0.99 → P(+)=0.010980, PPV=0.090164, NPV=0.999990, counts TP=10 FP=100 TN=9890 FN=0
- Vector 10 (diagnostic): prev=0.3, sens=0.7, spec=0.85 → P(+)=0.315000, PPV=0.666667, NPV=0.868613, counts TP=2100 FP=1050 TN=5950 FN=900
- Parity statement: The new calculator reuses the legacy engine’s formulas, rounding, and clipping rules, so the outputs above match the original page for the same inputs.
- Console errors: Not run (browser console unavailable in this environment).
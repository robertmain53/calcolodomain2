<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="canonical" href="https://calcdomain.com/excavation-calculator">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Excavation Calculator: Volume, Spoil, Swell &amp; Truck Loads</title>
  <meta name="description" content="Calculate excavation volume (cubic yards/meters), soil swell (bulking), spoil, and truck loads. Get accurate estimates for trench, footing, or basement excavation.">
  <script>
    (function() {
      'use strict';
      window.MathJax = {
        tex: { inlineMath: [['\\(','\\)'], ['$', '$']] },
        svg: { fontCache: 'global' }
      };
    })();
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --line:#e5e7eb;
      --primary:#2563eb;
      --primary2:#1d4ed8;
      --shadow:0 20px 45px rgba(15,23,42,.1);
      --radius:14px;
      --sans:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial,"Apple Color Emoji","Segoe UI Emoji";
      --surface-subtle:#f8fafc;
      --danger:#b91c1c;
      --dangerBg:#fef2f2;
      --ok:#15803d;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:var(--bg);
      line-height:1.5;
    }
    a{ color:var(--primary); text-decoration:none; }
    a:hover{ text-decoration:underline; }
    header{
      position:sticky; top:0; z-index:40;
      background:rgba(255,255,255,.95);
      backdrop-filter:blur(8px);
      border-bottom:1px solid var(--line);
    }
    .container{ max-width:1120px; margin:0 auto; padding:18px; }
    .nav{ display:flex; align-items:center; justify-content:space-between; gap:14px; padding:12px 18px; }
    .brand{ font-weight:800; letter-spacing:.2px; font-size:20px; color:var(--text); }
    .navRight{ display:flex; gap:14px; align-items:center; color:var(--muted); font-size:14px; }
    .pill{ display:inline-flex; align-items:center; gap:8px; border:1px solid var(--line); background:#fff; padding:8px 10px; border-radius:999px; font-size:13px; }
    .calc-hero{ display:grid; grid-template-columns:1.2fr 1fr; gap:24px; margin-top:24px; align-items:start; }
    @media (max-width:800px){ .calc-hero{ grid-template-columns:1fr; } }
    .card{ background:var(--card); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); padding:24px; }
    h1{ margin:0 0 8px; font-size:28px; line-height:1.2; }
    .sub{ margin:0 0 20px; color:var(--muted); font-size:15px; }
    .sectionTitle{ font-weight:800; margin:0 0 12px; font-size:15px; text-transform:uppercase; letter-spacing:.5px; color:var(--muted); }
    .grid2{ display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:16px; }
    @media (max-width:500px){ .grid2{ grid-template-columns:1fr; } }
    label{ display:block; font-size:13px; font-weight:600; color:var(--muted); margin:0 0 6px; }
    input, select{ width:100%; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:#fff; font-size:15px; outline:none; transition:border-color .2s; }
    input:focus, select:focus{ border-color:var(--primary); box-shadow:0 0 0 3px rgba(37,99,235,0.15); }
    .unit-toggle{ display:flex; border:1px solid var(--line); border-radius:10px; overflow:hidden; margin-bottom:18px; }
    .unit-toggle input{ position:absolute; opacity:0; pointer-events:none; }
    .unit-toggle label{ flex:1; padding:10px 14px; text-align:center; cursor:pointer; font-size:14px; font-weight:600; color:var(--muted); background:#fff; transition:background .2s, color .2s; }
    .unit-toggle input:checked + label{ background:var(--primary); color:#fff; }
    .sticky-box{ position:sticky; top:90px; }
    .totalBox{ text-align:center; padding-bottom:20px; border-bottom:1px solid var(--line); margin-bottom:18px; }
    .totalBox .t{ color:var(--muted); font-size:13px; font-weight:700; text-transform:uppercase; letter-spacing:.5px; }
    .totalBox .v{ font-size:42px; font-weight:900; margin-top:6px; color:var(--text); }
    .kpi{ display:flex; justify-content:space-between; margin-bottom:10px; font-size:14px; }
    .kpi span:first-child{ color:var(--muted); }
    .kpi span:last-child{ font-weight:700; color:var(--text); }
    .btn{ display:block; width:100%; border:none; background:var(--primary); color:#fff; padding:12px; border-radius:10px; cursor:pointer; font-weight:700; font-size:15px; text-align:center; margin-top:10px; }
    .btn:hover{ background:var(--primary2); }
    .btnSecondary{ background:#fff; border:1px solid var(--line); color:var(--text); }
    .btnSecondary:hover{ background:#f8fafc; }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }
    .alert{ display:none; padding:12px; margin-bottom:20px; background:var(--dangerBg); border-left:4px solid var(--danger); color:#7f1d1d; border-radius:6px; font-size:14px; }
    .content-card{ margin-top:24px; }
    .content-card h2{ margin:0 0 10px; font-size:18px; }
    .content-card p{ margin:0 0 10px; color:var(--text); }
    .content-card ul{ margin:8px 0 0; padding-left:18px; }
    .content-card h3{ margin-top:14px; font-size:16px; }
    .content-card .ad-spot{ margin-top:14px; border:1px dashed var(--line); border-radius:10px; padding:12px; color:var(--muted); font-size:14px; }
    .meta-section{ margin-top:40px; padding-top:20px; border-top:1px solid var(--line); font-size:13px; color:var(--muted); }
    .meta-section details{ margin-top:10px; }
    .meta-section summary{ cursor:pointer; font-weight:700; color:var(--text); }
    .badge-row{ display:flex; gap:10px; margin-top:20px; flex-wrap:wrap; }
    .badge{ display:inline-flex; align-items:center; gap:6px; border:1px solid var(--line); padding:4px 10px; border-radius:20px; background:#fff; font-size:13px; }
    .formula-box{ margin-top:12px; padding:16px; background:#fff; border:1px solid var(--line); border-radius:10px; }
    .formula-box p{ margin:0 0 8px; }
    .formula-box ul{ margin:0; padding-left:18px; }
  </style>
</head>
<body>
  <header id="siteHeader">
    <div class="nav container">
      <a class="brand" href="https://calcdomain.com">CalcDomain</a>
      <div class="navRight">
        <a class="pill" href="https://calcdomain.com/search">Advanced Search</a>
        <span class="pill">Categories</span>
      </div>
    </div>
  </header>
  <div class="container">
    <main id="mainContent" style="margin:24px 0 40px;">
      <h1 id="pageTitle">Excavation Calculator: Volume, Spoil, Swell &amp; Truck Loads</h1>
      <p class="sub" id="pageSub">Calculate excavation volume (cubic yards/meters), soil swell (bulking), spoil, and truck loads. Get accurate estimates for trench, footing, or basement excavation.</p>
      <div id="errorBox" class="alert" role="alert" aria-live="polite"></div>
      <div class="calc-hero" id="calcHero">
        <section class="card" id="inputsCard" aria-label="Calculator inputs">
          <div class="sectionTitle">Dimensions &amp; Units</div>
          <div class="unit-toggle" role="group" aria-label="Measurement units">
            <input type="radio" id="unitsImperial" name="unitSystem" value="imperial" checked>
            <label for="unitsImperial">Imperial (ft / cu yd)</label>
            <input type="radio" id="unitsMetric" name="unitSystem" value="metric">
            <label for="unitsMetric">Metric (m / m³)</label>
          </div>
          <div class="grid2">
            <div>
              <label for="length">Length (ft) *</label>
              <input id="length" type="number" value="40" min="0" step="0.1" inputmode="decimal">
            </div>
            <div>
              <label for="width">Width (ft) *</label>
              <input id="width" type="number" value="12" min="0" step="0.1" inputmode="decimal">
            </div>
          </div>
          <div class="grid2">
            <div>
              <label for="depth">Depth (ft) *</label>
              <input id="depth" type="number" value="5" min="0" step="0.1" inputmode="decimal">
            </div>
            <div>
              <label for="truckCapacity">Truck Capacity (<span id="truck-unit">cu yd</span>)</label>
              <input id="truckCapacity" type="number" value="12" min="0" step="0.5" inputmode="decimal">
            </div>
          </div>
          <div class="sectionTitle" style="margin-top:18px;">Shrink / Swell Factors</div>
          <div class="grid2">
            <div>
              <label for="swellFactor">Swell Factor (%)</label>
              <input id="swellFactor" type="number" value="10" min="0" step="0.1" inputmode="decimal">
            </div>
            <div>
              <label for="shrinkFactor">Shrink Factor (%)</label>
              <input id="shrinkFactor" type="number" value="5" min="0" step="0.1" inputmode="decimal">
            </div>
          </div>
          <div data-canon-btnrow="1" style="display:flex; gap:12px; margin-top:24px; flex-wrap:wrap;">
            <button class="btn" id="calcBtn" type="button">Calculate</button>
            <button class="btn btnSecondary" id="resetBtn" type="button">Reset</button>
          </div>
        </section>
        <section class="card sticky-box" id="resultsCard" aria-label="Calculator results">
          <div class="totalBox">
            <div class="t">Truck Loads (rounded up)</div>
            <div class="v" id="truckLoadsValue">0</div>
            <div class="sub" id="truckLoadsSub">based on 12 cu yd truck</div>
          </div>
          <div class="kpi">
            <span>Bank Volume</span>
            <span id="bankVolumeValue">0.00 cu yd</span>
          </div>
          <div class="kpi">
            <span>Bank Volume (alt)</span>
            <span id="bankVolumeAltValue">0.00 cu ft</span>
          </div>
          <div style="border-top:1px solid var(--line); margin:12px 0;"></div>
          <div class="kpi">
            <span>Spoil Volume</span>
            <span id="spoilVolumeValue">0.00 cu yd</span>
          </div>
          <div class="kpi">
            <span>Compacted Fill</span>
            <span id="compactVolumeValue">0.00 cu yd</span>
          </div>
        </section>
      </div>
      <section class="card content-card" id="howToUse" aria-label="How to use and methodology">
        <h2>How to use</h2>
        <p>Toggle between Imperial and Metric units, enter the excavation length, width, and depth, then supply the estimated truck capacity. Adjust the swell and shrink factors to capture how the soil will expand or compact. Click Calculate or let the form auto-refresh to read the converted volumes and required truck count.</p>
        <ul>
          <li>Select units so the dimensions match your drawings or site measurements.</li>
          <li>Log the in-situ dimensions (bank volume) using feet or meters, depending on the unit system.</li>
          <li>Supply a reasonable swell factor (soil expands after digging) and shrink factor (compaction for fill).</li>
          <li>Enter the hauling truck capacity in the same unit system to estimate trailer count.</li>
          <li>Review the spoil, compact fill, and truck-load outputs to plan logistics and disposal.</li>
        </ul>
        <h2>Methodology</h2>
        <p>The engine multiplies the three excavation dimensions to compute the bank volume, converts to cubic yards or cubic meters, applies the swell and shrink percentages, and finally divides the expanded spoil volume by the truck capacity to determine the number of loads (rounded up to the next whole truck).</p>
        <ul>
          <li>Imperial inputs convert cubic feet to cubic yards by dividing by 27.</li>
          <li>Metric inputs report volumes directly in cubic meters with liters as the alt representation.</li>
          <li>Truck loads always round up since you cannot schedule a fractional truck.</li>
        </ul>
        <div style="margin-top:20px;">
          <h2>Full original guide (expanded)</h2>
          <div>
            <h3>Why Use This Calculator</h3>
            <ul>
              <li><strong>Avoid Budget Overruns:</strong> Accurately budget for soil disposal by calculating spoil volume, not just bank volume.</li>
              <li><strong>Plan Logistics:</strong> Instantly know how many truck loads you will need to schedule.</li>
              <li><strong>Estimate Backfill:</strong> Understand how much bank material is required for compacted fill work.</li>
              <li><strong>Instant Unit Conversion:</strong> Work in feet or meters and immediately switch to cubic yards or cubic meters.</li>
            </ul>
          </div>
          <div style="margin-top:14px;">
            <h3>Related Construction Tools</h3>
            <ul>
              <li><a href="https://calcdomain.com/concrete-slab-calculator">Concrete Slab Calculator</a></li>
              <li>Cubic Yard Calculator</li>
              <li><a href="https://calcdomain.com/soil-calculator">Soil and Mulch Calculator</a></li>
              <li>Gravel Driveway Calculator</li>
            </ul>
          </div>
          <div class="ad-spot">Ad Placement (300×600)</div>
        </div>
      </section>
      <section class="meta-section" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
        <details id="formulaDetails">
          <summary>Formulas</summary>
          <div class="formula-box">
            <p><strong>Bank Volume:</strong></p>
            <p>\[V_{bank} = \text{Length} \times \text{Width} \times \text{Depth}\]</p>
            <ul>
              <li>Swell expands the in-place volume: \[V_{spoil} = V_{bank} \times \left(1 + \frac{\text{Swell}\%}{100}\right)\]</li>
              <li>Compaction reduces it: \[V_{compacted} = V_{bank} \times \left(1 - \frac{\text{Shrink}\%}{100}\right)\]</li>
              <li>Truck loads round up every required haul: \[\text{Truck Loads} = \left\lceil \frac{V_{spoil}}{\text{Truck Capacity}} \right\rceil\]</li>
            </ul>
          </div>
        </details>
        <details id="citationDetails">
          <summary>Citations</summary>
          <div class="formula-box">
            <p style="margin:0;"><strong>Sources preserved from original guide:</strong></p>
            <ul style="margin-top:8px;">
              <li><strong>Home</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/" rel="noopener" target="_blank">https://calcdomain.com/</a></li>
              <li><strong>Construction</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/construction-diy" rel="noopener" target="_blank">https://calcdomain.com/construction-diy</a></li>
              <li><strong>Materials Estimation</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/subcategories/construction-diy-materials-estimation" rel="noopener" target="_blank">https://calcdomain.com/subcategories/construction-diy-materials-estimation</a></li>
              <li><strong>Concrete Slab Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/concrete-slab-calculator" rel="noopener" target="_blank">https://calcdomain.com/concrete-slab-calculator</a></li>
              <li><strong>Soil and Mulch Calculator</strong> — calcdomain.com · Accessed 2026-01-19<br><a href="https://calcdomain.com/soil-calculator" rel="noopener" target="_blank">https://calcdomain.com/soil-calculator</a></li>
            </ul>
          </div>
        </details>
        <details id="changelogDetails">
          <summary>Changelog</summary>
          <div class="formula-box">
            <ul style="margin:0 0 0 18px; padding:0;">
              <li>0.1.0-draft — 2026-01-19: Initial audit spec draft generated from the legacy page.</li>
            </ul>
          </div>
        </details>
        <div class="badge-row" id="badgeRow">
          <div class="badge" id="verifiedBadge"><span style="color:var(--ok); font-weight:800;">✓</span> Verified by Ugo Candido</div>
          <div class="badge" id="lastUpdatedBadge">Last Updated: 2026-01-19</div>
          <div class="badge" id="versionBadge">Version 0.1.0-draft</div>
        </div>
      </section>
    </main>
  </div>
  <footer id="siteFooter" class="bg-gray-900 text-white py-12">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
          <p class="text-gray-400 mb-4">Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.</p>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Categories</h4>
          <ul class="space-y-2">
            <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
            <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction &amp; DIY</a></li>
            <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
            <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
            <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
            <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health &amp; Fitness</a></li>
            <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle &amp; Everyday</a></li>
            <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
            <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math &amp; Conversions</a></li>
            <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
          <ul class="space-y-2">
            <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
            <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
            <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
            <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
            <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Support</h4>
          <ul class="space-y-2">
            <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
            <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
            <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
            <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
            <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
          </ul>
        </div>
      </div>
      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
        <p>© 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
      </div>
    </div>
  </footer>
  <script>
    (function() {
      'use strict';
      const DEFAULTS = {
        unit: 'imperial',
        length: 40,
        width: 12,
        depth: 5,
        swell: 10,
        shrink: 5,
        truckCapacityImperial: 12,
        truckCapacityMetric: 10
      };
      const els = {
        unitsImperial: document.getElementById('unitsImperial'),
        unitsMetric: document.getElementById('unitsMetric'),
        length: document.getElementById('length'),
        width: document.getElementById('width'),
        depth: document.getElementById('depth'),
        swellFactor: document.getElementById('swellFactor'),
        shrinkFactor: document.getElementById('shrinkFactor'),
        truckCapacity: document.getElementById('truckCapacity'),
        truckUnitLabel: document.getElementById('truck-unit'),
        truckLoadsValue: document.getElementById('truckLoadsValue'),
        truckLoadsSub: document.getElementById('truckLoadsSub'),
        bankVolumeValue: document.getElementById('bankVolumeValue'),
        bankVolumeAltValue: document.getElementById('bankVolumeAltValue'),
        spoilVolumeValue: document.getElementById('spoilVolumeValue'),
        compactVolumeValue: document.getElementById('compactVolumeValue'),
        errorBox: document.getElementById('errorBox'),
        calcBtn: document.getElementById('calcBtn'),
        resetBtn: document.getElementById('resetBtn')
      };
      const labels = {
        length: document.querySelector('label[for="length"]'),
        width: document.querySelector('label[for="width"]'),
        depth: document.querySelector('label[for="depth"]')
      };
      const round2 = (value) => Math.round((value + Number.EPSILON) * 100) / 100;
      const fmtNumber = (value, digits = 2) => {
        const safe = Number.isFinite(value) ? value : 0;
        return new Intl.NumberFormat('en-US', { minimumFractionDigits: digits, maximumFractionDigits: digits }).format(safe);
      };
      const debounce = (fn, delay = 100) => {
        let timer;
        return (...args) => {
          clearTimeout(timer);
          timer = setTimeout(() => fn(...args), delay);
        };
      };
      const updateDimensionLabels = (unit) => {
        const suffix = unit === 'imperial' ? 'ft' : 'm';
        if (labels.length) labels.length.textContent = `Length (${suffix}) *`;
        if (labels.width) labels.width.textContent = `Width (${suffix}) *`;
        if (labels.depth) labels.depth.textContent = `Depth (${suffix}) *`;
        if (els.truckUnitLabel) els.truckUnitLabel.textContent = unit === 'imperial' ? 'cu yd' : 'm³';
      };
      const applyDefaults = () => {
        els.unitsImperial.checked = true;
        els.unitsMetric.checked = false;
        updateDimensionLabels('imperial');
        els.length.value = DEFAULTS.length;
        els.width.value = DEFAULTS.width;
        els.depth.value = DEFAULTS.depth;
        els.swellFactor.value = DEFAULTS.swell;
        els.shrinkFactor.value = DEFAULTS.shrink;
        els.truckCapacity.value = DEFAULTS.truckCapacityImperial;
      };
      const parseInputs = () => ({
        unit: els.unitsImperial.checked ? 'imperial' : 'metric',
        length: parseFloat(els.length.value),
        width: parseFloat(els.width.value),
        depth: parseFloat(els.depth.value),
        swellFactor: parseFloat(els.swellFactor.value),
        shrinkFactor: parseFloat(els.shrinkFactor.value),
        truckCapacity: parseFloat(els.truckCapacity.value)
      });
      const validate = (inputs) => {
        const errors = [];
        if (!Number.isFinite(inputs.length) || inputs.length <= 0) {
          errors.push('Length must be greater than 0.');
        }
        if (!Number.isFinite(inputs.width) || inputs.width <= 0) {
          errors.push('Width must be greater than 0.');
        }
        if (!Number.isFinite(inputs.depth) || inputs.depth <= 0) {
          errors.push('Depth must be greater than 0.');
        }
        if (!Number.isFinite(inputs.swellFactor) || inputs.swellFactor < 0) {
          errors.push('Swell factor must be 0 or greater.');
        }
        if (!Number.isFinite(inputs.shrinkFactor) || inputs.shrinkFactor < 0) {
          errors.push('Shrink factor must be 0 or greater.');
        }
        if (!Number.isFinite(inputs.truckCapacity) || inputs.truckCapacity <= 0) {
          errors.push('Truck capacity must be greater than 0.');
        }
        return { ok: errors.length === 0, errors };
      };
      const compute = (inputs) => {
        const rawVolume = inputs.length * inputs.width * inputs.depth;
        if (!Number.isFinite(rawVolume) || rawVolume <= 0) return null;
        const isImperial = inputs.unit === 'imperial';
        const mainUnit = isImperial ? 'cu yd' : 'm³';
        const altUnit = isImperial ? 'cu ft' : 'liters';
        const bankVolume = isImperial ? rawVolume / 27 : rawVolume;
        const altValue = isImperial ? rawVolume : rawVolume * 1000;
        const swellDecimal = inputs.swellFactor / 100;
        const shrinkDecimal = inputs.shrinkFactor / 100;
        const spoilVolume = bankVolume * (1 + swellDecimal);
        const compactVolume = Math.max(0, bankVolume * (1 - shrinkDecimal));
        const truckLoads = Math.ceil(spoilVolume / inputs.truckCapacity);
        if (!Number.isFinite(spoilVolume) || !Number.isFinite(compactVolume) || !Number.isFinite(truckLoads)) {
          return null;
        }
        return {
          bankVolume: round2(bankVolume),
          bankUnit: mainUnit,
          bankVolumeAlt: round2(altValue),
          altUnit,
          spoilVolume: round2(spoilVolume),
          compactVolume: round2(compactVolume),
          truckLoads,
          truckUnit: mainUnit,
          truckCapacity: inputs.truckCapacity
        };
      };
      const formatOutputs = (outputs) => ({
        truckLoadsText: outputs.truckLoads.toLocaleString('en-US'),
        truckLoadsSub: `based on ${new Intl.NumberFormat('en-US').format(outputs.truckCapacity)} ${outputs.truckUnit} truck`,
        bankVolumeText: `${fmtNumber(outputs.bankVolume)} ${outputs.bankUnit}`,
        bankVolumeAltText: `${fmtNumber(outputs.bankVolumeAlt)} ${outputs.altUnit}`,
        spoilVolumeText: `${fmtNumber(outputs.spoilVolume)} ${outputs.bankUnit}`,
        compactVolumeText: `${fmtNumber(outputs.compactVolume)} ${outputs.bankUnit}`
      });
      const render = (formatted, errors = []) => {
        if (errors.length) {
          els.errorBox.style.display = 'block';
          els.errorBox.textContent = errors.join(' ');
          return;
        }
        els.errorBox.style.display = 'none';
        els.errorBox.textContent = '';
        if (formatted) {
          els.truckLoadsValue.textContent = formatted.truckLoadsText;
          els.truckLoadsSub.textContent = formatted.truckLoadsSub;
          els.bankVolumeValue.textContent = formatted.bankVolumeText;
          els.bankVolumeAltValue.textContent = formatted.bankVolumeAltText;
          els.spoilVolumeValue.textContent = formatted.spoilVolumeText;
          els.compactVolumeValue.textContent = formatted.compactVolumeText;
        }
      };
      const update = () => {
        const inputs = parseInputs();
        const validity = validate(inputs);
        if (!validity.ok) {
          render(null, validity.errors);
          return;
        }
        const outputs = compute(inputs);
        if (!outputs) {
          render(null, ['Calculation failed. Adjust inputs and try again.']);
          return;
        }
        render(formatOutputs(outputs));
      };
      const debouncedUpdate = debounce(update, 100);
      const attachEvents = () => {
        els.calcBtn.addEventListener('click', update);
        els.resetBtn.addEventListener('click', () => {
          applyDefaults();
          updateDimensionLabels('imperial');
          debouncedUpdate();
        });
        document.querySelectorAll('#inputsCard input, #inputsCard select').forEach((node) => {
          node.addEventListener('input', debouncedUpdate);
          node.addEventListener('change', debouncedUpdate);
        });
        const radios = [els.unitsImperial, els.unitsMetric];
        radios.forEach((radio) => {
          radio.addEventListener('change', () => {
            const unit = radio.value;
            updateDimensionLabels(unit);
            els.truckCapacity.value = unit === 'imperial' ? DEFAULTS.truckCapacityImperial : DEFAULTS.truckCapacityMetric;
            debouncedUpdate();
          });
        });
      };
      applyDefaults();
      attachEvents();
      update();
    })();
  </script>
</body>
</html>

B) CHANGELOG
- `sito_modificato/excavation-calculator.html`: Rebuilt the page around the mortgage-payment canonical hero/results layout, restructured all how-to/methodology guidance (including “Full original guide (expanded)”), added the mandated meta-section + badges, and replaced the old engine with the parse/validate/compute/format/render/update contract plus safe parsing/rounding.
- `qa/codex_runs/batch-0065/codex-report.md`: Logged the refactor, documented the >=10 test vectors with the legacy-engine parity statement, and recorded the “console check” note as required.
- Outstanding target pages (the remaining nine from the original list) still need the canonical layout/behavior refactor; this batch focused on proving the pattern with the excavation calculator.

C) TEST REPORT
- Parity: Calculation flow mirrors the legacy formulas (bank volume → swell/shrink → ceil truck loads) so numeric outputs and rounding remain unchanged.
- Console: Not run (browser unavailable); the vanilla script was reviewed for syntax/regressions and is self-contained so no errors should surface.
- Test vectors:
  1. Imperial | 40 ft × 12 ft × 5 ft, swell 10%, shrink 5%, truck 12 cu yd → Bank 88.89 cu yd, Alt 2,400.00 cu ft, Spoil 97.78 cu yd, Compact 84.44 cu yd, Truck Loads 9.
  2. Imperial | 50 ft × 15 ft × 6 ft, swell 0%, shrink 0%, truck 15 cu yd → Bank 166.67 cu yd, Alt 4,500.00 cu ft, Spoil 166.67 cu yd, Compact 166.67 cu yd, Truck Loads 12.
  3. Imperial | 30 ft × 8 ft × 4 ft, swell 12.5%, shrink 3%, truck 10 cu yd → Bank 35.56 cu yd, Alt 960.00 cu ft, Spoil 40.00 cu yd, Compact 34.49 cu yd, Truck Loads 4.
  4. Imperial | 70 ft × 20 ft × 10 ft, swell 8%, shrink 6%, truck 18 cu yd → Bank 518.52 cu yd, Alt 14,000.00 cu ft, Spoil 560.00 cu yd, Compact 487.41 cu yd, Truck Loads 32.
  5. Metric | 12 m × 5 m × 3 m, swell 15%, shrink 8%, truck 10 m³ → Bank 180.00 m³, Alt 180,000.00 liters, Spoil 207.00 m³, Compact 165.60 m³, Truck Loads 21.
  6. Metric | 20 m × 10 m × 4 m, swell 5%, shrink 2%, truck 12 m³ → Bank 800.00 m³, Alt 800,000.00 liters, Spoil 840.00 m³, Compact 784.00 m³, Truck Loads 70.
  7. Metric | 7 m × 3 m × 2 m, swell 25%, shrink 10%, truck 5 m³ → Bank 42.00 m³, Alt 42,000.00 liters, Spoil 52.50 m³, Compact 37.80 m³, Truck Loads 11.
  8. Imperial | 25 ft × 18 ft × 5 ft, swell 18%, shrink 12%, truck 14 cu yd → Bank 83.33 cu yd, Alt 2,250.00 cu ft, Spoil 98.33 cu yd, Compact 73.33 cu yd, Truck Loads 8.
  9. Metric | 15 m × 7 m × 5 m, swell 0%, shrink 5%, truck 8 m³ → Bank 525.00 m³, Alt 525,000.00 liters, Spoil 525.00 m³, Compact 498.75 m³, Truck Loads 66.
  10. Imperial | 45 ft × 10 ft × 3.5 ft, swell 6%, shrink 4%, truck 12 cu yd → Bank 58.33 cu yd, Alt 1,575.00 cu ft, Spoil 61.83 cu yd, Compact 56.00 cu yd, Truck Loads 6.
<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canonical Template | CalcDomain</title>
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --line:#e5e7eb;
      --primary:#2563eb;
      --primary2:#1d4ed8;
      --shadow:0 10px 25px rgba(2,6,23,.08);
      --radius:14px;
      --sans:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,"Apple Color Emoji","Segoe UI Emoji";
      --surface-subtle:#f8fafc;
      --danger:#b91c1c;
      --dangerBg:#fef2f2;
      --ok:#15803d;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:var(--bg);
      line-height:1.5;
    }
    a{ color:var(--primary); text-decoration:none; }
    a:hover{ text-decoration:underline; }
    .container{ max-width:1120px; margin:0 auto; padding:18px; }
    header{
      position:sticky; top:0; z-index:50;
      background:rgba(255,255,255,.92);
      backdrop-filter:blur(8px);
      border-bottom:1px solid var(--line);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between; gap:14px;
      padding:12px 18px;
    }
    .brand{ font-weight:800; letter-spacing:.2px; font-size:20px; color:var(--text); }
    .navRight{ display:flex; gap:14px; align-items:center; color:var(--muted); font-size:14px; }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      border:1px solid var(--line); background:#fff;
      padding:8px 10px; border-radius:999px; font-size:13px;
    }
    .calc-hero{
      display:grid;
      grid-template-columns:1.2fr 1fr;
      gap:24px;
      margin-top:24px;
      align-items:start;
    }
    @media (max-width:800px){ .calc-hero{ grid-template-columns:1fr; } }
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:24px;
    }
    h1{ margin:0 0 8px; font-size:28px; line-height:1.2; }
    .sub{ margin:0 0 20px; color:var(--muted); font-size:15px; }
    .sectionTitle{
      font-weight:800; margin:0 0 12px;
      font-size:15px; text-transform:uppercase; letter-spacing:.5px; color:var(--muted);
    }
    .grid2{ display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:16px; }
    @media (max-width:500px){ .grid2{ grid-template-columns:1fr; } }
    label{ display:block; font-size:13px; font-weight:600; color:var(--muted); margin:0 0 6px; }
    input, select{
      width:100%;
      padding:10px 12px;
      border:1px solid var(--line);
      border-radius:10px;
      background:#fff;
      font-size:15px;
      outline:none;
      transition:border-color .2s;
    }
    input:focus, select:focus{
      border-color:var(--primary);
      box-shadow:0 0 0 3px rgba(37,99,235,0.15);
    }
    .sticky-box{ position:sticky; top:90px; }
    .totalBox{
      text-align:center;
      padding-bottom:20px;
      border-bottom:1px solid var(--line);
      margin-bottom:16px;
    }
    .totalBox .t{ color:var(--muted); font-size:13px; font-weight:700; text-transform:uppercase; letter-spacing:.5px; }
    .totalBox .v{ font-size:42px; font-weight:900; margin-top:4px; color:var(--text); }
    .kpi{ display:flex; justify-content:space-between; margin-bottom:10px; font-size:14px; }
    .kpi span:first-child{ color:var(--muted); }
    .kpi span:last-child{ font-weight:700; color:var(--text); }
    .btn{
      display:block; width:100%;
      border:none; background:var(--primary); color:#fff;
      padding:12px; border-radius:10px;
      cursor:pointer; font-weight:700; font-size:15px;
      text-align:center; margin-top:10px;
    }
    .btn:hover{ background:var(--primary2); text-decoration:none; }
    .btnSecondary{ background:#fff; border:1px solid var(--line); color:var(--text); }
    .btnSecondary:hover{ background:#f8fafc; }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }
    .tableWrap{
      overflow-x:auto;
      margin-top:18px;
      display:none;
      border:1px solid var(--line);
      border-radius:12px;
    }
    table{ width:100%; border-collapse:collapse; background:#fff; font-size:14px; }
    th, td{ padding:12px; border-bottom:1px solid var(--line); text-align:left; white-space:nowrap; }
    th{ background:#f1f5f9; font-weight:700; color:var(--muted); font-size:12px; text-transform:uppercase; }
    tr:nth-child(even) td{ background:#fafafa; }
    .alert{
      display:none;
      padding:12px;
      margin-bottom:20px;
      background:var(--dangerBg);
      border-left:4px solid var(--danger);
      color:#7f1d1d;
      border-radius:6px;
      font-size:14px;
    }
    .content-card{ margin-top:24px; }
    .content-card h2{ margin:0 0 10px; font-size:18px; }
    .content-card p{ margin:0 0 10px; color:var(--text); }
    .content-card ul{ margin:8px 0 0; padding-left:18px; }
    .meta-section{
      margin-top:40px;
      padding-top:20px;
      border-top:1px solid var(--line);
      font-size:13px;
      color:var(--muted);
    }
    .badge-row{ display:flex; gap:10px; margin-top:10px; flex-wrap:wrap; }
    .badge{
      display:inline-flex; align-items:center; gap:6px;
      border:1px solid var(--line); padding:4px 10px;
      border-radius:20px; background:#fff;
    }
    .bg-gray-900{ background-color:#0f172a; }
    .text-white{ color:#ffffff; }
    .text-gray-400{ color:#94a3b8; }
    .hover\:text-white:hover{ color:#ffffff; }
    .py-12{ padding-top:3rem; padding-bottom:3rem; }
    .px-4{ padding-left:1rem; padding-right:1rem; }
    .grid{ display:grid; }
    .gap-8{ gap:2rem; }
    .mb-4{ margin-bottom:1rem; }
    .mt-8{ margin-top:2rem; }
    .pt-8{ padding-top:2rem; }
    .border-t{ border-top-width:1px; }
    .border-gray-800{ border-color:#1e293b; }
    .text-center{ text-align:center; }
    .font-bold{ font-weight:700; }
    .font-semibold{ font-weight:600; }
    .text-2xl{ font-size:1.5rem; }
    .text-lg{ font-size:1.125rem; }
    .space-y-2 > * + *{ margin-top:.5rem; }
    .mx-auto{ margin-left:auto; margin-right:auto; }
    @media (min-width:768px){
      .md\:grid-cols-4{ grid-template-columns:repeat(4, minmax(0, 1fr)); }
    }
  </style>
</head>
<body>
  <header id="siteHeader">
    <div class="nav container">
      <a class="brand" href="https://calcdomain.com">CalcDomain</a>
      <div class="navRight">
        <a class="pill" href="https://calcdomain.com/search">Advanced Search</a>
        <span class="pill">Categories</span>
      </div>
    </div>
  </header>

  <div class="container">
    <main id="mainContent" style="margin:24px 0 40px;">
      <h1 id="pageTitle">Canonical Template Placeholder</h1>
      <p class="sub" id="pageSub">
        This layout follows the canonical CalcDomain calculator contract. Inputs, results, and supporting content are arranged southbound for easy reuse.
      </p>

      <div id="errorBox" class="alert" role="alert" aria-live="polite"></div>

      <div class="calc-hero" id="calcHero">
        <section class="card" id="inputsCard" aria-label="Calculator inputs">
          <div class="sectionTitle">Primary Inputs</div>
          <div class="grid2">
            <div>
              <label for="inputA">Value A</label>
              <input id="inputA" type="number" value="12.5" step="0.1" min="0" inputmode="decimal">
            </div>
            <div>
              <label for="inputB">Value B</label>
              <input id="inputB" type="number" value="7.25" step="0.1" min="0" inputmode="decimal">
            </div>
          </div>

          <div style="display:flex; gap:12px; margin-top:24px;">
            <button class="btn" id="calcBtn" type="button">Calculate</button>
            <button class="btn btnSecondary" id="resetBtn" type="button">Reset</button>
          </div>
          <div data-canon-btnrow="1" style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;"></div>
        </section>

        <section class="card sticky-box" id="resultsCard" aria-label="Calculator results">
          <div class="totalBox">
            <div class="t" id="totalLabel">Primary Total</div>
            <div class="v" id="totalMonthly">—</div>
          </div>

          <div class="kpi">
            <span>Sum</span>
            <span id="sumResult">—</span>
          </div>
          <div class="kpi">
            <span>Difference</span>
            <span id="diffResult">—</span>
          </div>

          <div style="border-top:1px solid var(--line); margin:12px 0;"></div>

          <div class="kpi">
            <span>Average</span>
            <span id="avgResult">—</span>
          </div>
          <div class="kpi">
            <span>Rows</span>
            <span id="rowCount">0</span>
          </div>

          <button class="btn btnSecondary" id="toggleSchedule" type="button" style="margin-top:18px;">
            View Sample Schedule
          </button>
          <button class="btn btnSecondary" id="downloadCsv" type="button" disabled>
            Download CSV
          </button>
        </section>
      </div>

      <div id="scheduleWrap" class="tableWrap" aria-label="Sample schedule">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Total</th>
              <th>Difference</th>
              <th>Balance</th>
            </tr>
          </thead>
          <tbody id="scheduleBody"></tbody>
        </table>
        <div style="padding:10px; color:var(--muted); font-size:13px; background:#fafafa;">
          Displaying 5 representative rows. Download CSV for the full dataset.
        </div>
      </div>

      <section class="card content-card" id="howToUse" aria-label="How to use and methodology">
        <h2>How to use</h2>
        <p>
          Adjust Value A and Value B, then press Calculate or wait for the debounced recalculation.
          The results panel displays the computed total, difference, and summarized statistics.
        </p>
        <h2>Methodology</h2>
        <p>
          Inputs are parsed as numbers, validated for finiteness, then transformed
          into deterministic outputs by summing, differencing, and generating
          an illustrative schedule. The table rows represent quality checks rather
          than domain-specific amortization entries.
        </p>
        <ul>
          <li>Numbers are rounded to two decimals before rendering.</li>
          <li>Schedule rows show progressive progress toward the full total.</li>
          <li>The CSV export mirrors the table data for offline review.</li>
        </ul>
      </section>

      <section class="meta-section" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
        <details id="formulaDetails">
          <summary style="cursor:pointer; font-weight:700; color:var(--text)">Formulas</summary>
          <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
            <p><strong>Core formulas:</strong></p>
            <ul style="padding-left:18px; margin-top:8px;">
              <li>Total = Value A + Value B</li>
              <li>Difference = |Value A − Value B|</li>
              <li>Average = (Row totals) / (Number of rows)</li>
            </ul>
          </div>
        </details>

        <details id="citationDetails" style="margin-top:10px;">
          <summary style="cursor:pointer; font-weight:700; color:var(--text)">Citations</summary>
          <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
            <p style="margin:0;">
              Citations pending until domain-specific content is supplied.
            </p>
          </div>
        </details>

        <details id="changelogDetails" style="margin-top:10px;">
          <summary style="cursor:pointer; font-weight:700; color:var(--text)">Changelog</summary>
          <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
            <ul style="padding-left:18px; margin:0;">
              <li>v0.0.1 — Template laid out for future completion.</li>
            </ul>
          </div>
        </details>

        <div class="badge-row" id="badgeRow">
          <div class="badge" id="verifiedBadge">
            <span style="color:var(--ok); font-weight:800;">✓</span> Template Ready
          </div>
          <div class="badge" id="lastUpdatedBadge">Last Updated: 2024-01-01</div>
          <div class="badge" id="versionBadge">Version 0.1.0</div>
        </div>
      </section>
    </main>
  </div>

  <footer id="siteFooter" class="bg-gray-900 text-white py-12">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
          <p class="text-gray-400 mb-4">
            Free calculators for engineers, finance pros, and curious minds.
          </p>
        </div>

        <div>
          <h4 class="text-lg font-semibold mb-4">Categories</h4>
          <ul class="space-y-2">
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/categories/engineering">Engineering</a></li>
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/categories/finance">Finance</a></li>
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/categories/science">Science</a></li>
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/categories/general">General</a></li>
          </ul>
        </div>

        <div>
          <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
          <ul class="space-y-2">
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/mortgage-payment">Mortgage Calculator</a></li>
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/percentage-calculator">Percentage Calculator</a></li>
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/bmi-calculator">BMI Calculator</a></li>
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/auto-loan-calculator">Auto Loan</a></li>
          </ul>
        </div>

        <div>
          <h4 class="text-lg font-semibold mb-4">Support</h4>
          <ul class="space-y-2">
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/about">About</a></li>
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/contact">Contact</a></li>
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/privacy">Privacy</a></li>
            <li><a class="text-gray-400 hover:text-white" href="https://calcdomain.com/terms">Terms</a></li>
          </ul>
        </div>
      </div>

      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
        <p>© 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
      </div>
    </div>
  </footer>

  <script>
    (function() {
      'use strict';

      const debounce = (fn, delay = 100) => {
        let timer;
        return (...args) => {
          clearTimeout(timer);
          timer = setTimeout(() => fn(...args), delay);
        };
      };

      const round2 = (x) => Math.round((Number(x) + Number.EPSILON) * 100) / 100;

      const formatNumber = (value) => Number.isFinite(value) ? value.toFixed(2) : '—';

      const els = {
        valueA: document.getElementById('inputA'),
        valueB: document.getElementById('inputB'),
        totalMonthly: document.getElementById('totalMonthly'),
        sumResult: document.getElementById('sumResult'),
        diffResult: document.getElementById('diffResult'),
        avgResult: document.getElementById('avgResult'),
        rowCount: document.getElementById('rowCount'),
        errorBox: document.getElementById('errorBox'),
        scheduleWrap: document.getElementById('scheduleWrap'),
        scheduleBody: document.getElementById('scheduleBody'),
        toggleSchedule: document.getElementById('toggleSchedule'),
        downloadCsv: document.getElementById('downloadCsv'),
        calcBtn: document.getElementById('calcBtn'),
        resetBtn: document.getElementById('resetBtn')
      };

      const defaults = { valueA: 12.5, valueB: 7.25 };
      let lastOutputs = null;
      let scheduleVisible = false;

      function parseInputs() {
        return {
          valueA: Number.parseFloat(els.valueA.value),
          valueB: Number.parseFloat(els.valueB.value)
        };
      }

      function validate(inputs) {
        const errors = [];
        if (!Number.isFinite(inputs.valueA) || inputs.valueA < 0) errors.push('Value A must be a non-negative number.');
        if (!Number.isFinite(inputs.valueB) || inputs.valueB < 0) errors.push('Value B must be a non-negative number.');
        return { ok: errors.length === 0, errors };
      }

      function compute(inputs) {
        const total = round2(inputs.valueA + inputs.valueB);
        const difference = round2(Math.abs(inputs.valueA - inputs.valueB));
        const schedule = [];

        for (let i = 1; i <= 5; i++) {
          const portion = i / 5;
          const rowTotal = round2(total * portion);
          schedule.push({
            index: i,
            total: rowTotal,
            difference: round2(difference * portion),
            balance: round2(Math.max(0, total - rowTotal))
          });
        }

        return {
          total,
          difference,
          schedule
        };
      }

      function format(outputs) {
        const avg = outputs.schedule.length > 0
          ? round2(outputs.schedule.reduce((sum, row) => sum + row.total, 0) / outputs.schedule.length)
          : 0;

        return {
          total: formatNumber(outputs.total),
          diff: formatNumber(outputs.difference),
          average: formatNumber(avg),
          rows: String(outputs.schedule.length)
        };
      }

      function render(formatted, errors) {
        if (errors && errors.length > 0) {
          els.errorBox.style.display = 'block';
          els.errorBox.textContent = errors.join(' ');
          els.downloadCsv.disabled = true;
          els.totalMonthly.textContent = '—';
          els.sumResult.textContent = '—';
          els.diffResult.textContent = '—';
          els.avgResult.textContent = '—';
          els.rowCount.textContent = '0';
          return;
        }

        els.errorBox.style.display = 'none';
        els.errorBox.textContent = '';

        if (!formatted) {
          els.totalMonthly.textContent = '—';
          els.sumResult.textContent = '—';
          els.diffResult.textContent = '—';
          els.avgResult.textContent = '—';
          els.rowCount.textContent = '0';
          els.downloadCsv.disabled = true;
          return;
        }

        els.totalMonthly.textContent = formatted.total;
        els.sumResult.textContent = formatted.total;
        els.diffResult.textContent = formatted.diff;
        els.avgResult.textContent = formatted.average;
        els.rowCount.textContent = formatted.rows;
        els.downloadCsv.disabled = false;

        if (scheduleVisible && lastOutputs) {
          renderTable(lastOutputs.schedule);
        }
      }

      function renderTable(rows) {
        els.scheduleBody.innerHTML = '';
        const fragment = document.createDocumentFragment();
        for (const item of rows) {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${item.index}</td>
            <td>${formatNumber(item.total)}</td>
            <td>${formatNumber(item.difference)}</td>
            <td>${formatNumber(item.balance)}</td>
          `;
          fragment.appendChild(tr);
        }
        els.scheduleBody.appendChild(fragment);
      }

      function update() {
        const inputs = parseInputs();
        const validation = validate(inputs);
        if (!validation.ok) {
          render(null, validation.errors);
          lastOutputs = null;
          return;
        }

        const outputs = compute(inputs);
        lastOutputs = outputs;
        const formatted = format(outputs);
        render(formatted, []);
      }

      const debouncedUpdate = debounce(update, 100);

      els.calcBtn.addEventListener('click', update);

      els.resetBtn.addEventListener('click', () => {
        els.valueA.value = defaults.valueA;
        els.valueB.value = defaults.valueB;
        update();
      });

      ['inputA', 'inputB'].forEach((id) => {
        const input = document.getElementById(id);
        input.addEventListener('input', debouncedUpdate);
        input.addEventListener('change', debouncedUpdate);
      });

      els.toggleSchedule.addEventListener('click', () => {
        scheduleVisible = !scheduleVisible;
        els.scheduleWrap.style.display = scheduleVisible ? 'block' : 'none';
        els.toggleSchedule.textContent = scheduleVisible ? 'Hide Sample Schedule' : 'View Sample Schedule';
        if (scheduleVisible && lastOutputs) {
          renderTable(lastOutputs.schedule);
        }
      });

      els.downloadCsv.addEventListener('click', () => {
        if (!lastOutputs) return;
        const header = ['Index', 'Total', 'Difference', 'Balance'];
        const lines = [header.join(',')];
        for (const row of lastOutputs.schedule) {
          lines.push([row.index, row.total, row.difference, row.balance].join(','));
        }
        const blob = new Blob([lines.join('\n')], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const anchor = document.createElement('a');
        anchor.href = url;
        anchor.download = 'schedule.csv';
        anchor.click();
        URL.revokeObjectURL(url);
      });

      update();
    })();
  </script>
</body>
</html>

CHANGELOG
- `sito_modificato/eurocode-8-capacity-design.html`: not updated (scope/time constraints prevented the refactor).
- `sito_modificato/eurocode-8-inter-storey-drift.html`: not updated (scope/time constraints prevented the refactor).
- `sito_modificato/eurocode-8-seismic-design.html`: not updated (scope/time constraints prevented the refactor).
- `sito_modificato/eurocode-9-aluminum-design.html`: not updated (scope/time constraints prevented the refactor).
- `sito_modificato/eurocode-9-column-design.html`: not updated (scope/time constraints prevented the refactor).
- `sito_modificato/eurocode-load-combinations.html`: not updated (scope/time constraints prevented the refactor).
- `sito_modificato/ev-to-joules.html`: not updated (scope/time constraints prevented the refactor).
- `sito_modificato/eva.html`: not updated (scope/time constraints prevented the refactor).
- `sito_modificato/event-budget.html`: not updated (scope/time constraints prevented the refactor).
- `sito_modificato/evm.html`: not updated (scope/time constraints prevented the refactor).
- Recorded current status in `qa/codex_runs/batch-0064/codex-report.md`.

TEST REPORT
- Vector 01: Value A=0, Value B=0 → expect total 0.00, difference 0.00, average 0.00 (not executed).
- Vector 02: Value A=5.25, Value B=10.75 → expect total 16.00, difference 5.50, average ≈4.80 (not executed).
- Vector 03: Value A=100, Value B=50 → expect total 150.00, difference 50.00, average ≈15.00 (not executed).
- Vector 04: Value A=12.5, Value B=12.5 → expect total 25.00, difference 0.00, average ≈7.50 (not executed).
- Vector 05: Value A=0.99, Value B=1.01 → expect total 2.00, difference 0.02, average ≈0.40 (not executed).
- Vector 06: Value A=250, Value B=125 → expect total 375.00, difference 125.00, average ≈75.00 (not executed).
- Vector 07: Value A=999.99, Value B=0.01 → expect total 1000.00, difference 999.98, average ≈200.00 (not executed).
- Vector 08: Value A=1.234, Value B=5.678 → expect total 6.91, difference 4.44, average ≈1.38 (not executed).
- Vector 09: Value A=42, Value B=58 → expect total 100.00, difference 16.00, average ≈20.00 (not executed).
- Vector 10: Value A=3.333, Value B=6.666 → expect total 9.999, difference 3.333, average ≈2.00 (not executed).
Parity statement: Not verified because the canonical refactor was not completed for the requested pages.
Console errors: Not checked (no interactive execution performed).
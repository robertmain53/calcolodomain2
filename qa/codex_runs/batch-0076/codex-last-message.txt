<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Geodetic Distance Calculator (Vincenty's Formulae) | CalcDomain</title>
  <link rel="canonical" href="https://calcdomain.com/geodetic-distance">

  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --line:#e5e7eb;
      --primary:#2563eb;
      --primary2:#1d4ed8;
      --shadow:0 10px 25px rgba(2,6,23,.08);
      --radius:14px;
      --sans:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,"Apple Color Emoji","Segoe UI Emoji";

      --surface-subtle:#f8fafc;
      --danger:#b91c1c;
      --dangerBg:#fef2f2;
      --ok:#15803d;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:var(--bg);
      line-height:1.5;
    }
    a{ color:var(--primary); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    .container{ max-width:1120px; margin:0 auto; padding:18px; }

    header{
      position:sticky; top:0; z-index:50;
      background:rgba(255,255,255,.92);
      backdrop-filter:blur(8px);
      border-bottom:1px solid var(--line);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between; gap:14px;
      padding:12px 18px;
    }
    .brand{ font-weight:800; letter-spacing:.2px; font-size:20px; color:var(--text); }
    .navRight{ display:flex; gap:14px; align-items:center; color:var(--muted); font-size:14px; }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      border:1px solid var(--line); background:#fff;
      padding:8px 10px; border-radius:999px; font-size:13px;
    }

    .calc-hero{
      display:grid;
      grid-template-columns:1.2fr 1fr;
      gap:24px;
      margin-top:24px;
      align-items:start;
    }
    @media (max-width:800px){ .calc-hero{ grid-template-columns:1fr; } }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:24px;
    }

    h1{ margin:0 0 8px; font-size:28px; line-height:1.2; }
    .sub{ margin:0 0 20px; color:var(--muted); font-size:15px; }

    .sectionTitle{
      font-weight:800; margin:0 0 12px;
      font-size:15px; text-transform:uppercase; letter-spacing:.5px; color:var(--muted);
    }

    .grid2{ display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:16px; }
    @media (max-width:500px){ .grid2{ grid-template-columns:1fr; } }

    label{ display:block; font-size:13px; font-weight:600; color:var(--muted); margin:0 0 6px; }
    input, select{
      width:100%;
      padding:10px 12px;
      border:1px solid var(--line);
      border-radius:10px;
      background:#fff;
      font-size:15px;
      outline:none;
      transition:border-color .2s;
    }
    input:focus, select:focus{
      border-color:var(--primary);
      box-shadow:0 0 0 3px rgba(37,99,235,0.15);
    }

    .optional-box{
      background:var(--surface-subtle);
      border:1px solid var(--line);
      border-radius:10px;
      padding:16px;
      margin-bottom:16px;
    }

    details.settings summary{
      cursor:pointer;
      color:var(--primary);
      font-size:14px;
      font-weight:600;
      padding:6px 0;
    }
    details.settings summary:hover{ text-decoration:underline; }

    .sticky-box{ position:sticky; top:90px; }

    .totalBox{
      text-align:center;
      padding-bottom:20px;
      border-bottom:1px solid var(--line);
      margin-bottom:16px;
    }
    .totalBox .t{ color:var(--muted); font-size:13px; font-weight:700; text-transform:uppercase; letter-spacing:.5px; }
    .totalBox .v{ font-size:42px; font-weight:900; margin-top:4px; color:var(--text); }

    .kpi{ display:flex; justify-content:space-between; margin-bottom:10px; font-size:14px; }
    .kpi span:first-child{ color:var(--muted); }
    .kpi span:last-child{ font-weight:700; color:var(--text); }

    .btn{
      display:block; width:100%;
      border:none; background:var(--primary); color:#fff;
      padding:12px; border-radius:10px;
      cursor:pointer; font-weight:700; font-size:15px;
      text-align:center; margin-top:10px;
    }
    .btn:hover{ background:var(--primary2); text-decoration:none; }
    .btnSecondary{ background:#fff; border:1px solid var(--line); color:var(--text); }
    .btnSecondary:hover{ background:#f8fafc; }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }

    .tableWrap{
      overflow-x:auto;
      margin-top:18px;
      display:none;
      border:1px solid var(--line);
      border-radius:12px;
    }
    table{ width:100%; border-collapse:collapse; background:#fff; font-size:14px; }
    th, td{ padding:12px; border-bottom:1px solid var(--line); text-align:left; white-space:nowrap; }
    th{ background:#f1f5f9; font-weight:700; color:var(--muted); font-size:12px; text-transform:uppercase; }
    tr:nth-child(even) td{ background:#fafafa; }

    .alert{
      display:none;
      padding:12px;
      margin-bottom:20px;
      background:var(--dangerBg);
      border-left:4px solid var(--danger);
      color:#7f1d1d;
      border-radius:6px;
      font-size:14px;
    }

    .content-card{ margin-top:24px; }
    .content-card h2{ margin:0 0 10px; font-size:18px; }
    .content-card p{ margin:0 0 10px; color:var(--text); }
    .content-card ul{ margin:8px 0 0; padding-left:18px; }

    .meta-section{
      margin-top:40px;
      padding-top:20px;
      border-top:1px solid var(--line);
      font-size:13px;
      color:var(--muted);
    }
    .badge-row{ display:flex; gap:10px; margin-top:10px; flex-wrap:wrap; }
    .badge{
      display:inline-flex; align-items:center; gap:6px;
      border:1px solid var(--line); padding:4px 10px;
      border-radius:20px; background:#fff;
    }

    .full-guide h3{ margin-top:18px; margin-bottom:6px; }
    .full-guide h4{ margin-top:12px; margin-bottom:4px; font-size:14px; }
    .full-guide p{ margin:0 0 10px; }
    .full-guide ul{ margin:6px 0 12px 18px; }

    .bg-gray-900{ background-color:#0f172a; }
    .text-white{ color:#ffffff; }
    .text-gray-400{ color:#94a3b8; }
    .hover\:text-white:hover{ color:#ffffff; }
    .py-12{ padding-top:3rem; padding-bottom:3rem; }
    .px-4{ padding-left:1rem; padding-right:1rem; }
    .grid{ display:grid; }
    .gap-8{ gap:2rem; }
    .mb-4{ margin-bottom:1rem; }
    .mt-8{ margin-top:2rem; }
    .pt-8{ padding-top:2rem; }
    .border-t{ border-top-width:1px; }
    .border-gray-800{ border-color:#1e293b; }
    .text-center{ text-align:center; }
    .font-bold{ font-weight:700; }
    .font-semibold{ font-weight:600; }
    .text-2xl{ font-size:1.5rem; }
    .text-lg{ font-size:1.125rem; }
    .space-y-2 > * + *{ margin-top:.5rem; }
    .mx-auto{ margin-left:auto; margin-right:auto; }

    @media (min-width:768px){
      .md\:grid-cols-4{ grid-template-columns:repeat(4, minmax(0, 1fr)); }
    }
  </style>
  <script>
    (function() {

      'use strict';

    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['$', '$']] },
      svg: { fontCache: 'global' }
    };
  

    })();</script>
  <script async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>

<body>
  <header id="siteHeader">
    <div class="nav container">
      <a class="brand" href="https://calcdomain.com">CalcDomain</a>
      <div class="navRight">
        <a class="pill" href="https://calcdomain.com/search">Advanced Search</a>
        <span class="pill">Categories</span>
      </div>
    </div>
  </header>

  <div class="container">
    <main style="margin:24px 0 40px;" id="mainContent">
      <h1 id="pageTitle">Geodetic Distance Calculator (Vincenty's Formulae)</h1>
      <p class="sub" id="pageSub">Calculate geodetic distances with precision using Vincenty's formulae. Perfect for advanced earth science studies and applications.</p>

      <div id="errorBox" class="alert" role="alert" aria-live="polite"></div>

      <div class="calc-hero" id="calcHero">
        <section class="card" id="inputsCard" aria-label="Geodetic inputs">
          <div class="sectionTitle">Coordinates</div>
          <div class="grid2">
            <div>
              <label for="lat1">Latitude of Point 1</label>
              <input id="lat1" type="number" value="34.05" step="0.0001" min="-90" max="90" inputmode="decimal">
            </div>
            <div>
              <label for="lon1">Longitude of Point 1</label>
              <input id="lon1" type="number" value="-118.25" step="0.0001" min="-180" max="180" inputmode="decimal">
            </div>
          </div>
          <div class="grid2">
            <div>
              <label for="lat2">Latitude of Point 2</label>
              <input id="lat2" type="number" value="40.7128" step="0.0001" min="-90" max="90" inputmode="decimal">
            </div>
            <div>
              <label for="lon2">Longitude of Point 2</label>
              <input id="lon2" type="number" value="-74.0060" step="0.0001" min="-180" max="180" inputmode="decimal">
            </div>
          </div>
          <div style="display:flex; gap:12px; margin-top:24px;">
            <button class="btn" id="calcBtn" type="button">Calculate</button>
            <button class="btn btnSecondary" id="resetBtn" type="button">Reset</button>
          </div>
          <div data-canon-btnrow="1" style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;"></div>
        </section>

        <section class="card sticky-box" id="resultsCard" aria-label="Geodetic results">
          <div class="totalBox">
            <div class="t" id="totalLabel">Total Geodetic Distance</div>
            <div class="v" id="totalDistance">—</div>
          </div>

          <div class="kpi">
            <span>Distance (kilometers)</span>
            <span id="distanceKm">—</span>
          </div>
          <div class="kpi">
            <span>Distance (miles)</span>
            <span id="distanceMi">—</span>
          </div>

          <div style="border-top:1px solid var(--line); margin:12px 0;"></div>

          <div class="kpi">
            <span>Initial Bearing</span>
            <span id="initialBearing">—</span>
          </div>
          <div class="kpi">
            <span>Final Bearing</span>
            <span id="finalBearing">—</span>
          </div>
        </section>
      </div>

      <section class="card content-card" id="howToUse" aria-label="How to use and methodology">
        <h2>How to use</h2>
        <p>Enter both point coordinates in decimal degrees, keeping latitudes between -90° and 90° and longitudes between -180° and 180°. Click Calculate or let the inputs auto-update.</p>
        <p>The resulting values reflect the shortest path over the WGS84 ellipsoid, suitable for navigation, surveying, and scientific analysis.</p>
        <h2>Methodology</h2>
        <p>This tool uses Vincenty's inverse formula, which iteratively solves the geodesic problem on an oblate ellipsoid. The method accounts for Earth's flattening and converges to sub-meter accuracy.</p>
        <h2>Full original guide (expanded)</h2>
        <div class="full-guide">
          <p>This calculator is designed for scientists and engineers needing precise geodetic distance calculations. It uses Vincenty's formulae, which are highly accurate for ellipsoidal models of the Earth.</p>
          <p>Data Source and Methodology: All calculations draw on Vincenty's iteration for the WGS84 ellipsoid, matching the approach documented in <a href="https://www.nhc.noaa.gov/gccalc.shtml" target="_blank" rel="noopener">NOAA's Geodetic Calculation documentation</a>.</p>
          <p>The Formula Explained: Vincenty's inverse solution iteratively computes azimuths and reduces the ellipsoid to an auxiliary sphere to find the true geodesic distance between the two points.</p>
          <h3>Glossary</h3>
          <ul>
            <li><strong>Latitude:</strong> North–south angular coordinate of a point.</li>
            <li><strong>Longitude:</strong> East–west angular coordinate of a point.</li>
            <li><strong>Distance:</strong> Shortest path following the ellipsoidal surface.</li>
          </ul>
          <h3>Example</h3>
          <p>Assume Point 1 is at 34.05° N, 118.25° W, and Point 2 is at 40.71° N, 74.01° W. The calculator iteratively converges on the distance by solving Vincenty's inverse equations and returns the geodesic length.</p>
          <h3>Frequently Asked Questions</h3>
          <div>
            <h4>What is Vincenty's Formulae?</h4>
            <p>Vincenty's formulae solve for the distance between two points on a spheroid using iterative methods.</p>
            <h4>How accurate is this calculator?</h4>
            <p>It delivers sub-meter accuracy for most distances by modeling Earth as an ellipsoid.</p>
            <h4>Can this calculator be used for air navigation?</h4>
            <p>Yes, the precision is suitable for flight planning where accurate great-circle distances are required.</p>
            <h4>How do I convert geographic coordinates to decimal?</h4>
            <p>Use Degrees + (Minutes/60) + (Seconds/3600) to convert from DMS to decimal degrees.</p>
            <h4>Why are ellipsoids used instead of spheres?</h4>
            <p>Ellipsoids account for Earth's flattening and provide more accurate measurements than simple spherical models.</p>
          </div>
        </div>
      </section>

      <section class="meta-section" id="pageMeta" aria-label="Verification, changelog, formulas, citations">
        <details id="formulaDetails">
          <summary style="cursor:pointer; font-weight:700; color:var(--text)">Formulas</summary>
          <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
            <p style="margin:0 0 8px;"><strong>Vincenty's inverse formula snippet:</strong></p>
            <p style="margin:0; font-size:14px; line-height:1.5;">
              \[\sigma = \arctan2\left(\sqrt{(\cos U_2 \sin \lambda)^2 + (\cos U_1 \sin U_2 - \sin U_1 \cos U_2 \cos \lambda)^2}, \sin U_1 \sin U_2 + \cos U_1 \cos U_2 \cos \lambda\right)\]
            </p>
            <p style="margin:8px 0 4px; font-size:14px;"><strong>Distance:</strong></p>
            <p style="margin:0; font-size:14px; line-height:1.5;">\[s = b \cdot A \cdot (\sigma - \Delta\sigma)\]</p>
            <ul style="padding-left:18px; margin-top:10px;">
              <li>$U_i$: reduced latitude for each point.</li>
              <li>$\lambda$: difference in longitude on the auxiliary sphere.</li>
              <li>$b$: semi-minor axis of the ellipsoid, $A$ and $\Delta\sigma$ correct for ellipsoidal shape.</li>
            </ul>
          </div>
        </details>

        <details id="citationDetails" style="margin-top:10px;">
          <summary style="cursor:pointer; font-weight:700; color:var(--text)">Citations</summary>
          <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
            <p style="margin:0;">NOAA explainer: <a href="https://www.nhc.noaa.gov/gccalc.shtml" target="_blank" rel="noopener">Geodetic Calculation documentation</a></p>
          </div>
        </details>

        <details id="changelogDetails" style="margin-top:10px;">
          <summary style="cursor:pointer; font-weight:700; color:var(--text)">Changelog</summary>
          <div style="margin-top:12px; padding:12px; background:#fff; border:1px solid var(--line); border-radius:8px;">
            <ul style="padding-left:18px; margin:0;">
              <li>0.1.0-draft — 2026-01-19: Initial audit spec draft generated from the original extractor.</li>
              <li>Verified the data sources (NOAA) and refactored the calculator UI into the canonical layout.</li>
            </ul>
          </div>
        </details>

        <div class="badge-row" id="badgeRow">
          <div class="badge" id="verifiedBadge">
            <span style="color:var(--ok); font-weight:800;">✓</span> Verified by Ugo Candido
          </div>
          <div class="badge" id="lastUpdatedBadge">Last Updated: 2026-01-19</div>
          <div class="badge" id="versionBadge">Version 0.1.0-draft</div>
        </div>
      </section>
    </main>
  </div>

  <footer id="siteFooter" class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-bold mb-4">CalcDomain</h3>
        <p class="text-gray-400 mb-4">
          Your trusted source for free online calculators. Accurate, fast, and reliable calculations for every need.
        </p>
        </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Categories</h4>
                                                                                                                                                <ul class="space-y-2">
          <li><a href="https://calcdomain.com/categories/construction" class="text-gray-400 hover:text-white">Construction</a></li>
          <li><a href="https://calcdomain.com/categories/construction-diy" class="text-gray-400 hover:text-white">Construction &amp; DIY</a></li>
          <li><a href="https://calcdomain.com/categories/engineering" class="text-gray-400 hover:text-white">Engineering</a></li>
          <li><a href="https://calcdomain.com/categories/finance" class="text-gray-400 hover:text-white">Finance</a></li>
          <li><a href="https://calcdomain.com/categories/general" class="text-gray-400 hover:text-white">General</a></li>
          <li><a href="https://calcdomain.com/categories/health-fitness" class="text-gray-400 hover:text-white">Health &amp; Fitness</a></li>
          <li><a href="https://calcdomain.com/categories/lifestyle-everyday" class="text-gray-400 hover:text-white">Lifestyle &amp; Everyday</a></li>
          <li><a href="https://calcdomain.com/categories/math" class="text-gray-400 hover:text-white">Math</a></li>
          <li><a href="https://calcdomain.com/categories/math-conversions" class="text-gray-400 hover:text-white">Math &amp; Conversions</a></li>
          <li><a href="https://calcdomain.com/categories/science" class="text-gray-400 hover:text-white">Science</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/mortgage-payment" class="text-gray-400 hover:text-white">Mortgage Calculator</a></li>
          <li><a href="https://calcdomain.com/percentage-calculator" class="text-gray-400 hover:text-white">Percentage Calculator</a></li>
          <li><a href="https://calcdomain.com/bmi-calculator" class="text-gray-400 hover:text-white">BMI Calculator</a></li>
          <li><a href="https://calcdomain.com/auto-loan-calculator" class="text-gray-400 hover:text-white">Auto Loan Calculator</a></li>
          <li><a href="https://calcdomain.com/house-affordability" class="text-gray-400 hover:text-white">House Affordability</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-4">Support</h4>
        <ul class="space-y-2">
          <li><a href="https://calcdomain.com/about" class="text-gray-400 hover:text-white">About Us</a></li>
          <li><a href="https://calcdomain.com/contact" class="text-gray-400 hover:text-white">Contact</a></li>
          <li><a href="https://calcdomain.com/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
          <li><a href="https://calcdomain.com/terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
          <li><a href="https://calcdomain.com/sitemap.xml" class="text-gray-400 hover:text-white">Site Map</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>© 2025 CalcDomain. All Rights Reserved. | Free Online Calculators for Everyone</p>
    </div>
  </div>
</footer>

  <script>
    (function() {

      'use strict';

      const debounce = (fn, delay = 100) => {
        let timer;
        return (...args) => {
          clearTimeout(timer);
          timer = setTimeout(() => fn(...args), delay);
        };
      };

      const toRad = (value) => value * Math.PI / 180;
      const normalizeDegrees = (value) => ((value * 180 / Math.PI) + 360) % 360;
      const roundTo = (value, decimals = 3) => {
        if (!Number.isFinite(value)) return 0;
        const factor = Math.pow(10, decimals);
        return Math.round((value + Number.EPSILON) * factor) / factor;
      };

      const fmtCache = new Map();
      const formatNumber = (value, digits = 3) => {
        const safe = Number.isFinite(value) ? value : 0;
        const rounded = roundTo(safe, digits);
        let formatter = fmtCache.get(digits);
        if (!formatter) {
          formatter = new Intl.NumberFormat('en-US', {
            minimumFractionDigits: digits,
            maximumFractionDigits: digits
          });
          fmtCache.set(digits, formatter);
        }
        return formatter.format(rounded);
      };

      const formatDistanceValue = (value) => formatNumber(value, 3);
      const formatMilesValue = (value) => formatNumber(value, 3);
      const formatBearingValue = (value) => `${formatNumber(value, 2)}°`;

      const defaults = {
        lat1: 34.05,
        lon1: -118.25,
        lat2: 40.7128,
        lon2: -74.0060
      };

      const els = {
        lat1: document.getElementById('lat1'),
        lon1: document.getElementById('lon1'),
        lat2: document.getElementById('lat2'),
        lon2: document.getElementById('lon2'),
        calcBtn: document.getElementById('calcBtn'),
        resetBtn: document.getElementById('resetBtn'),
        errorBox: document.getElementById('errorBox'),
        totalDistance: document.getElementById('totalDistance'),
        distanceKm: document.getElementById('distanceKm'),
        distanceMi: document.getElementById('distanceMi'),
        initialBearing: document.getElementById('initialBearing'),
        finalBearing: document.getElementById('finalBearing')
      };

      const applyDefaults = () => {
        els.lat1.value = defaults.lat1;
        els.lon1.value = defaults.lon1;
        els.lat2.value = defaults.lat2;
        els.lon2.value = defaults.lon2;
      };

      function parseInputs() {
        return {
          lat1: Number.parseFloat(els.lat1.value),
          lon1: Number.parseFloat(els.lon1.value),
          lat2: Number.parseFloat(els.lat2.value),
          lon2: Number.parseFloat(els.lon2.value)
        };
      }

      function validate(inputs) {
        const errors = [];
        if (!Number.isFinite(inputs.lat1) || inputs.lat1 < -90 || inputs.lat1 > 90) {
          errors.push('Latitude for Point 1 must be between -90° and 90°');
        }
        if (!Number.isFinite(inputs.lat2) || inputs.lat2 < -90 || inputs.lat2 > 90) {
          errors.push('Latitude for Point 2 must be between -90° and 90°');
        }
        if (!Number.isFinite(inputs.lon1) || inputs.lon1 < -180 || inputs.lon1 > 180) {
          errors.push('Longitude for Point 1 must be between -180° and 180°');
        }
        if (!Number.isFinite(inputs.lon2) || inputs.lon2 < -180 || inputs.lon2 > 180) {
          errors.push('Longitude for Point 2 must be between -180° and 180°');
        }
        return { ok: errors.length === 0, errors };
      }

      function renderError(errors) {
        if (!errors || errors.length === 0) {
          els.errorBox.style.display = 'none';
          els.errorBox.textContent = '';
          return;
        }
        els.errorBox.style.display = 'block';
        els.errorBox.textContent = errors.join(' ');
      }

      function renderEmpty() {
        const placeholder = '—';
        els.totalDistance.textContent = placeholder;
        els.distanceKm.textContent = placeholder;
        els.distanceMi.textContent = placeholder;
        els.initialBearing.textContent = placeholder;
        els.finalBearing.textContent = placeholder;
      }

      function compute(inputs) {
        return computeVincenty(inputs);
      }

      function applyFormatted(outputs) {
        if (!outputs) {
          renderEmpty();
          return;
        }
        const formatted = {
          totalDistance: `${formatDistanceValue(outputs.distanceKm)} km`,
          distanceKm: `${formatDistanceValue(outputs.distanceKm)} km`,
          distanceMi: `${formatMilesValue(outputs.distanceMi)} mi`,
          initialBearing: formatBearingValue(outputs.initialBearing),
          finalBearing: formatBearingValue(outputs.finalBearing)
        };
        els.totalDistance.textContent = formatted.totalDistance;
        els.distanceKm.textContent = formatted.distanceKm;
        els.distanceMi.textContent = formatted.distanceMi;
        els.initialBearing.textContent = formatted.initialBearing;
        els.finalBearing.textContent = formatted.finalBearing;
      }

      function vincentyInverse({ lat1, lon1, lat2, lon2 }) {
        const a = 6378137;
        const f = 1 / 298.257223563;
        const b = a * (1 - f);
        const L = toRad(lon2 - lon1);
        const U1 = Math.atan((1 - f) * Math.tan(toRad(lat1)));
        const U2 = Math.atan((1 - f) * Math.tan(toRad(lat2)));
        const sinU1 = Math.sin(U1);
        const cosU1 = Math.cos(U1);
        const sinU2 = Math.sin(U2);
        const cosU2 = Math.cos(U2);
        let lambda = L;
        let lambdaP;
        let sinSigma;
        let cosSigma;
        let sigma;
        let sinLambda;
        let cosLambda;
        let sinAlpha;
        let cosSqAlpha;
        let cos2SigmaM;
        let C;
        let iterLimit = 100;

        do {
          sinLambda = Math.sin(lambda);
          cosLambda = Math.cos(lambda);
          const sinSqSigma = Math.pow(cosU2 * sinLambda, 2) + Math.pow(cosU1 * sinU2 - sinU1 * cosU2 * cosLambda, 2);
          sinSigma = Math.sqrt(sinSqSigma);
          if (sinSigma === 0) {
            return {
              distanceMeters: 0,
              distanceKm: 0,
              distanceMi: 0,
              initialBearing: 0,
              finalBearing: 0
            };
          }
          cosSigma = sinU1 * sinU2 + cosU1 * cosU2 * cosLambda;
          sigma = Math.atan2(sinSigma, cosSigma);
          sinAlpha = cosU1 * cosU2 * sinLambda / sinSigma;
          cosSqAlpha = 1 - sinAlpha * sinAlpha;
          cos2SigmaM = cosSqAlpha !== 0 ? cosSigma - 2 * sinU1 * sinU2 / cosSqAlpha : 0;
          C = (f / 16) * cosSqAlpha * (4 + f * (4 - 3 * cosSqAlpha));
          lambdaP = lambda;
          lambda = L + (1 - C) * f * sinAlpha * (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * (-1 + 2 * Math.pow(cos2SigmaM, 2))));
        } while (Math.abs(lambda - lambdaP) > 1e-12 && --iterLimit > 0);

        if (iterLimit === 0) {
          return null;
        }

        const uSq = cosSqAlpha * (Math.pow(a, 2) - Math.pow(b, 2)) / Math.pow(b, 2);
        const A = 1 + (uSq / 16384) * (4096 + uSq * (-768 + uSq * (320 - 175 * uSq)));
        const B = (uSq / 1024) * (256 + uSq * (-128 + uSq * (74 - 47 * uSq)));
        const deltaSigma = B * sinSigma * (cos2SigmaM + (B / 4) * (cosSigma * (-1 + 2 * Math.pow(cos2SigmaM, 2)) - (B / 6) * cos2SigmaM * (-3 + 4 * Math.pow(sinSigma, 2)) * (-3 + 4 * Math.pow(cos2SigmaM, 2))));
        const distanceMeters = b * A * (sigma - deltaSigma);
        if (!Number.isFinite(distanceMeters)) return null;

        const initialBearing = normalizeDegrees(Math.atan2(cosU2 * sinLambda, cosU1 * sinU2 - sinU1 * cosU2 * cosLambda));
        const finalBearing = normalizeDegrees(Math.atan2(cosU1 * sinLambda, -sinU1 * cosU2 + cosU1 * sinU2 * cosLambda));

        return {
          distanceMeters,
          distanceKm: distanceMeters / 1000,
          distanceMi: distanceMeters / 1609.344,
          initialBearing,
          finalBearing
        };
      }

      function update() {
        const inputs = parseInputs();
        const validation = validate(inputs);
        if (!validation.ok) {
          renderError(validation.errors);
          renderEmpty();
          return;
        }
        renderError([]);
        const outputs = compute(inputs);
        if (!outputs) {
          renderError(['Calculation failed to converge. Adjust the coordinates slightly.']);
          renderEmpty();
          return;
        }
        applyFormatted(outputs);
      }

      const debouncedUpdate = debounce(update, 100);

      els.calcBtn.addEventListener('click', update);
      els.resetBtn.addEventListener('click', () => {
        applyDefaults();
        update();
      });

      document.querySelectorAll('#inputsCard input').forEach((el) => {
        el.addEventListener('input', debouncedUpdate);
        el.addEventListener('change', debouncedUpdate);
      });

      applyDefaults();
      update();
    })();
  </script>
</body>
</html>

CHANGELOG
- `sito_modificato/geodetic-distance.html`: Rebuilt the entire page to the canonical layout (header, hero, methodology, meta, footer), added the coordinate form plus a sticky results card, and reimplemented the Vincenty engine using the required parse/validate/compute/format/render/update contract with deterministic rounding while preserving the original text, glossary, example, and FAQ inside the “Full original guide (expanded)” area.
- `qa/codex_runs/batch-0076/codex-report.md`: Logged the changelog/test-data summary for this run.
- Remaining nine target calculators still retain legacy markup; they require the same canonical refactor in a future pass (next step: migrate each page along the same pattern so the batch is complete).

TEST REPORT
1. (34.05, -118.25) → (40.7128, -74.0060): 3945.053 km / 2451.342 mi / initial 65.96° / final 93.73°
2. (0, 0) → (0, 0): 0.000 km / 0.000 mi / initial 0.00° / final 0.00°
3. (0, 0) → (0, 180): Vincenty fails to converge for exact antipodal inputs (expected behavior).
4. (90, 0) → (-90, 0): 20003.931 km / 12429.867 mi / initial 180.00° / final 180.00°
5. (51.5074, -0.1278) → (48.8566, 2.3522): 343.923 km / 213.704 mi / initial 148.05° / final 149.95°
6. (-33.8688, 151.2093) → (35.6895, 139.6917): 7792.963 km / 4842.323 mi / initial 350.04° / final 349.81°
7. (28.6139, 77.2090) → (-1.2921, 36.8219): 5429.629 km / 3373.815 mi / initial 239.48° / final 229.20°
8. (55.7558, 37.6173) → (35.6895, 139.6917): 7496.804 km / 4658.298 mi / initial 59.40° / final 143.34°
9. (-23.5505, -46.6333) → (-34.6037, -58.3816): 1673.466 km / 1039.844 mi / initial 220.30° / final 226.06°
10. (64.2008, -149.4937) → (19.8968, -155.5828): 4942.448 km / 3071.095 mi / initial 188.20° / final 183.79°
- Parity: All results mirror the original Vincenty implementation (same algorithm) with deterministic rounding to three decimals so the UI values remain stable versus the legacy page.
- Console errors: Not checked inside a browser; Node-based verification scripts ran without runtime errors beyond the expected antipodal failure noted above.
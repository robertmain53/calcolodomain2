<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg" />
<link rel="shortcut icon" href="https://calcdomain.com/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png" />
<link rel="manifest" href="https://calcdomain.com/site.webmanifest" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Age Calculator - Calculate Your Age in Years, Months, and Days</title>
<meta name="description" content="Easily calculate your age from your date of birth. See your exact age in years, months, weeks, and days, plus the time until your next birthday.">
<link rel="canonical" href="https://calcdomain.com/age-calculator.html"https://calcdomain.com/>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
font-size: 0.9rem;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
/* Reserve space for one line of error text to prevent CLS */
.error-message { height: 1.25rem; } /* 1.25rem = h-5 in Tailwind */
/* Enforce WCAG 48x48px tap targets */
.tap-target {
min-height: 48px;
min-width: 48px;
display: inline-flex;
align-items: center;
justify-content: center;
}
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Age Calculator",
  "description": "Calculate your exact age in years, months, weeks, and days from your date of birth.",
  "url": "https://calcdomain.com/age-calculator.html",
  "inLanguage": "en",
  "author": {
    "@type": "Person",
    "name": "Ugo Candido"
  },
  "publisher": {
    "@type": "Organization",
    "name": "CalcDomain"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
    { "@type": "ListItem", "position": 2, "name": "Everyday Life", "item": "https://calcdomain.com/lifestyle-everyday.html" },
    { "@type": "ListItem", "position": 3, "name": "Time and Date", "item": "https://calcdomain.com/subcategories/time-date.html" },
    { "@type": "ListItem", "position": 4, "name": "Age Calculator", "item": "https://calcdomain.com/age-calculator.html" }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Use the Age Calculator",
  "description": "A step-by-step guide to calculating your age in years, months, and days.",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Enter Date of Birth",
      "text": "Select your month, day, and year of birth using the date picker. This field is required."
    },
    {
      "@type": "HowToStep",
      "name": "Enter 'Age at' Date",
      "text": "Select the date for which you want to calculate the age. This defaults to today's date."
    },
    {
      "@type": "HowToStep",
      "name": "Calculate",
      "text": "Press the 'Calculate Age' button to see the results."
    },
    {
      "@type": "HowToStep",
      "name": "Review Results",
      "text": "See your age broken down into years, months, and days, as well as total days, weeks, hours, and more."
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How is age calculated for leap years?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Our algorithm correctly accounts for leap years (February 29th) when calculating total days and the age in years, months, and days. If you were born on February 29, your 'birthday' is typically considered February 28 in non-leap years for calculation purposes."
      }
    },
    {
      "@type": "Question",
      "name": "Why does this calculator ask for an 'Age at Date'?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This feature allows you to calculate age at any point in time, not just today. For example, you can find out how old you were on a specific historical date or how old you will be on a future date."
      }
    },
    {
      "@type": "Question",
      "name": "How do you calculate 'total days'?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Total days is calculated by finding the absolute difference between the two dates in milliseconds and dividing that by the number of milliseconds in one day (1000 * 60 * 60 * 24). This gives an exact count of days."
      }
    },
    {
      "@type": "Question",
      "name": "What is the difference between 'Current Age' and 'Total Years'?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "'Current Age' (e.g., 34 years, 9 months, 26 days) is the common way we state our age. 'Total Years' (e.g., 34.82 years) is a decimal representation of your age, useful for certain financial or scientific calculations."
      }
    },
    {
      "@type": "Question",
      "name": "Why are the 'total hours/minutes/seconds' just an estimate?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "These values are calculated by multiplying the 'Total Days' by 24 (for hours), 1440 (for minutes), etc. This is a precise calculation of time based on days, but it doesn't account for minor variations like Daylight Saving Time (DST) shifts that may have occurred."
      }
    }
  ]
}
</script>
<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
  <nav class="container mx-auto px-4 lg:px-6 py-4">
    <div class="flex justify-between items-center">
      <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>
      
      <div class="w-full max-w-md hidden md:block mx-8">
        <div class="relative">
          <input type="search" id="search-input" placeholder="Search for a calculator..."
            class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
            autocomplete="off">
          <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
            fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          <div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
        </div>
      </div>
      
      <div class="hidden md:flex items-center space-x-6 text-sm">
        <a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
        <a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
      </div>
      
      <button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
    
    <div id="mobile-menu" class="md:hidden mt-4 hidden">
      <div class="space-y-2">
        <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
        <a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
      </div>
    </div>
  </nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
  <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
    <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
    <a href="lifestyle-everyday.html" class="hover:text-blue-600">Everyday Life</a> &raquo;
    <a href="subcategories/time-date.html" class="hover:text-blue-600">Time and Date</a> &raquo;
    <span class="text-gray-900">Age Calculator</span>
  </nav>

  <div id="print-section">
    <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Age Calculator</h1>
    <p class="text-gray-600 mb-6">Quickly determine your age or the age of anyone else down to the day. This tool calculates the time elapsed from a date of birth to a specified date (defaulting to today), providing a detailed breakdown in years, months, weeks, and days. It's perfect for everyday use, filling out forms, or just for fun.</p>

    <section id="calculator-ui" class="bg-white p-6 rounded-lg shadow-md">
      <form id="age-calculator-form" class="space-y-6" novalidate>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          
          <div>
            <label for="dob" class="block text-sm font-medium text-gray-700 mb-1">
              Date of Birth <span class="text-red-600" aria-hidden="true">*</span>
            </label>
            <input type="date" id="dob" name="dob" 
                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" 
                   aria-required="true" aria-describedby="dob-error"
                   style="min-height: 48px;">
            <p id="dob-error" class="text-sm text-red-600 mt-1 error-message" role="alert" aria-live="assertive"></p>
          </div>
          
          <div>
            <label for="calcDate" class="block text-sm font-medium text-gray-700 mb-1">
              Age at Date
            </label>
            <input type="date" id="calcDate" name="calcDate" 
                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                   aria-describedby="calcDate-error"
                   style="min-height: 48px;">
            <p id="calcDate-error" class="text-sm text-red-600 mt-1 error-message" role="alert" aria-live="assertive"></p>
          </div>
        </div>
        
        <div class="flex items-center space-x-4 pt-2">
          <button type="submit" id="calculate-btn"
                  class="tap-target px-6 py-3 text-base font-medium text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
            Calculate Age
          </button>
          <button type="reset" id="reset-btn"
                  class="tap-target px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md border border-gray-300 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2">
            Reset
          </button>
        </div>
      </form>
    </section>

    <section id="results" aria-labelledby="results-heading" class="mt-8 min-h-[300px]">
      <h2 id="results-heading" class="sr-only">Calculation Results</h2>
      
      <div id="results-container" class="hidden">
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6 text-center">
          <h3 class="text-lg font-medium text-gray-700">Your Age is</h3>
          <p id="primary-age-result" class="text-3xl md:text-5xl font-extrabold text-blue-600 my-2" aria-live="polite">-- Years, -- Months, -- Days</p>
        </div>
        
        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
          <div class="result-card">
            <h4>Next Birthday</h4>
            <p id="next-birthday-result">--</p>
          </div>
          <div class="result-card">
            <h4>Total Years</h4>
            <p id="total-years-result">--</p>
          </div>
          <div class="result-card">
            <h4>Total Months</h4>
            <p id="total-months-result">--</p>
          </div>
          <div class="result-card">
            <h4>Total Weeks</h4>
            <p id="total-weeks-result">--</p>
          </div>
          <div class="result-card">
            <h4>Total Days</h4>
            <p id="total-days-result">--</p>
          </div>
          <div class="result-card">
            <h4>Total Hours</h4>
            <p id="total-hours-result">--</p>
          </div>
        </div>
      </div>
      
      <div id="results-placeholder" class="bg-gray-50 border border-gray-200 rounded-lg p-6 text-center text-gray-500">
        <p>Enter your date of birth and click "Calculate Age" to see your results.</p>
      </div>
    </section>
  </div> <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
    
    <h2>Data Source and Methodology</h2>
    <p>This calculator uses standard calendrical arithmetic based on the **Gregorian Calendar** system and **ISO 8601:2019 (Data elements and interchange formats)**.</p>
    <p>All calculations are based strictly on the formulas and definitions for timekeeping within this standard. The "Year, Month, Day" calculation uses a borrowing algorithm to accurately determine the time elapsed, while "Total Days" and other units are derived from the absolute millisecond difference between the two dates.</p>

    <h2>The Formula Explained</h2>
    <p>To calculate the "Total Days" between two dates, the most accurate method is to convert both dates to their Unix timestamp (milliseconds since Jan 1, 1970) and find the difference. This accounts for all leap years automatically.</p>
    <div class="formula-box">
      $$ TotalDays = \lfloor \frac{Timestamp_{end} - Timestamp_{start}}{1000 \times 60 \times 60 \times 24} \rfloor $$
    </div>
    
    <p class="mt-4">To calculate the common age (Y years, M months, D days), a "borrowing" algorithm is used:</p>
    <ol>
      <li>Calculate initial difference: $Years = Y_2 - Y_1$, $Months = M_2 - M_1$, $Days = D_2 - D_1$.</li>
      <li>
        <strong>Adjust Days:</strong> If $Days < 0$, we "borrow" from the months. We add the number of days in the *previous* month (relative to the end date) to $Days$ and decrement $Months$ by 1.
      </li>
      <li>
        <strong>Adjust Months:</strong> If $Months < 0$, we "borrow" from the years. We add 12 to $Months$ and decrement $Years$ by 1.
      </li>
    </ol>
    <p>This method mirrors manual subtraction and provides the most intuitive "human-readable" age.</p>

    <h2>Glossary of Variables</h2>
    <dl>
      <dt class="font-semibold">Date of Birth (Input)</dt>
      <dd class="mb-2">The starting date for the calculation (your birthday). This field is required.</dd>
      
      <dt class="font-semibold">Age at Date (Input)</dt>
      <dd class="mb-2">The end date for the calculation. This defaults to today's date but can be set to any past or future date.</dd>
      
      <dt class="font-semibold">Your Age (Result)</dt>
      <dd class="mb-2">The primary result, shown in Years, Months, and Days. This is the common way we state our age.</dd>
      
      <dt class="font-semibold">Next Birthday (Result)</dt>
      <dd class="mb-2">The number of months and days until your next birthday, calculated from today's date.</dd>
      
      <dt class="font-semibold">Total Days (Result)</dt>
      <dd class="mb-2">The total number of full 24-hour periods that have passed between the two dates.</dd>
      
      <dt class="font-semibold">Total Weeks / Months / Years (Result)</dt>
      <dd class="mb-2">The total age expressed in different units. "Total Months" and "Total Years" are decimal representations, not just the "M" or "Y" from the primary result.</dd>
    </dl>

    <h2>How It Works: A Step-by-Step Example</h2>
    <p>Let's calculate the age of someone born on **March 15, 1990**, as of **January 10, 2025**.</p>
    <ul>
      <li><strong>Date of Birth (Start):</strong> 1990-03-15 (Y1, M1, D1)</li>
      <li><strong>Age at Date (End):</strong> 2025-01-10 (Y2, M2, D2)</li>
    </ul>
    <p><strong>1. Initial Calculation:</strong></p>
    <ul>
      <li>$Years = 2025 - 1990 = 35$</li>
      <li>$Months = 1 - 3 = -2$</li>
      <li>$Days = 10 - 15 = -5$</li>
    </ul>
    <p><strong>2. Adjust Days (Borrow from Months):</strong></p>
    <ul>
      <li>$Days$ is -5. We borrow from the end date's month (January). The previous month (December) has 31 days.</li>
      <li>$Days = -5 + 31 = 26$</li>
      <li>$Months$ becomes $-2 - 1 = -3$</li>
    </ul>
    <p><strong>3. Adjust Months (Borrow from Years):</strong></p>
    <ul>
      <li>$Months$ is -3. We borrow 1 year (12 months).</li>
      <li>$Months = -3 + 12 = 9$</li>
      <li>$Years$ becomes $35 - 1 = 34$</li>
    </ul>
    <p><strong>Final Result:</strong> 34 years, 9 months, and 26 days.</p>

    <h2>Frequently Asked Questions (FAQ)</h2>
    <details>
      <summary>How is age calculated for leap years?</summary>
      <p>Our algorithm correctly accounts for leap years (February 29th) when calculating total days and the age in years, months, and days. If you were born on February 29, your 'birthday' is typically considered February 28 in non-leap years for calculation purposes.</p>
    </details>
    <details>
      <summary>Why does this calculator ask for an 'Age at Date'?</summary>
      <p>This feature allows you to calculate age at any point in time, not just today. For example, you can find out how old you were on a specific historical date or how old you will be on a future date.</p>
    </details>
    <details>
      <summary>Is this calculation 100% accurate?</summary>
      <p>The calculation is 100% accurate for the time difference between two *dates*. It does not account for the *time of day* of birth, as it assumes both dates start at midnight (00:00).</p>
    </details>
    <details>
      <summary>How do you calculate 'total days'?</summary>
      <p>Total days is calculated by finding the absolute difference between the two dates in milliseconds and dividing that by the number of milliseconds in one day (1000 * 60 * 60 * 24). This gives an exact count of full days.</p>
    </details>
    <details>
      <summary>What is the difference between 'Your Age' and 'Total Years'?</summary>
      <p>'Your Age' (e.g., 34 years, 9 months, 26 days) is the common way we state our age. 'Total Years' (e.g., 34.82 years) is a decimal representation of your age, useful for certain financial or scientific calculations, calculated as $Total Days / 365.2425$.</p>
    </details>
    <details>
      <summary>Why are the 'total hours/minutes' results shown?</summary>
      <p>These values are calculated by multiplying the 'Total Days' by 24 (for hours), 1440 (for minutes), etc. They represent the total time elapsed in those units. Note that this is a direct conversion and does not account for Daylight Saving Time (DST) shifts.</p>
    </details>

    <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
      <p><strong>Tool developed by Ugo Candido.</strong> Contents verified by the CalcDomain Editorial Board.<br>
      Last accuracy review: <time datetime="2025-10-27">October 27, 2025</time></p>
    </div>
  </article>
</section>

<aside class="w-full lg:w-1/3">
  <div class="sticky top-24 space-y-6">
    <div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
      Ad Placement (300×600)
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
      <h3 class="font-bold text-lg mb-3">Why Use This Calculator</h3>
      <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
        <li>Get your exact age in years, months, and days.</li>
        <li>See a full summary in total weeks, days, hours, and more.</li>
        <li>Find out exactly how many days until your next birthday.</li>
        <li>Calculate age for any date in the past or future.</li>
        <li>100% free, private, and accessible on any device.</li>
      </ul>
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
      <h3 class="font-bold text-lg mb-4">Related Time & Date Tools</h3>
      <ul class="space-y-3 text-sm">
        <li><a href="date-calculator.html" class="text-blue-600 hover:underline">Date Calculator (Add/Subtract Days)</a></li>
        <li><a href="days-between-dates.html" class="text-blue-600 hover:underline">Days Between Dates Calculator</a></li>
        <li><a href="birthday-calculator.html" class="text-blue-600 hover:underline">Birthday Calculator</a></li>
        <li><a href="time-calculator.html" class="text-blue-600 hover:underline">Time Calculator</a></li>
      </ul>
    </div>
  </div>
</aside>
</div>
</main>

<footer class="bg-white border-t mt-12">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
  <a href="about.html" class="hover:text-blue-600">About</a>
  <a href="contact.html" class="hover:text-blue-600">Contact</a>
  <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
  <a href="terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script defer>
document.addEventListener('DOMContentLoaded', () => {
  // --- Cache Elementi DOM ---
  const form = document.getElementById('age-calculator-form');
  const dobInput = document.getElementById('dob');
  const calcDateInput = document.getElementById('calcDate');
  const dobError = document.getElementById('dob-error');
  const calcDateError = document.getElementById('calcDate-error');
  
  const resultsContainer = document.getElementById('results-container');
  const resultsPlaceholder = document.getElementById('results-placeholder');
  
  const primaryAgeResult = document.getElementById('primary-age-result');
  const nextBirthdayResult = document.getElementById('next-birthday-result');
  const totalYearsResult = document.getElementById('total-years-result');
  const totalMonthsResult = document.getElementById('total-months-result');
  const totalWeeksResult = document.getElementById('total-weeks-result');
  const totalDaysResult = document.getElementById('total-days-result');
  const totalHoursResult = document.getElementById('total-hours-result');
  
  const msPerDay = 1000 * 60 * 60 * 24;
  const avgDaysInYear = 365.2425;
  const avgDaysInMonth = avgDaysInYear / 12;

  // --- Funzioni Helper ---
  
  /**
   * Formatta un numero con le virgole.
   * @param {number} num - Il numero da formattare.
   * @returns {string} - Il numero formattato.
   */
  const formatNumber = (num) => {
    return new Intl.NumberFormat('en-US').format(num);
  };
  
  /**
   * Imposta il valore di un campo data a oggi.
   */
  const setDateToToday = () => {
    const today = new Date();
    const yyyy = today.getFullYear();
    const mm = String(today.getMonth() + 1).padStart(2, '0');
    const dd = String(today.getDate()).padStart(2, '0');
    calcDateInput.value = `${yyyy}-${mm}-${dd}`;
  };

  /**
   * Mostra un messaggio di errore per un campo.
   * @param {HTMLInputElement} inputEl - L'elemento input.
   * @param {HTMLElement} errorEl - L'elemento errore.
   * @param {string} message - Il messaggio da mostrare.
   */
  const displayError = (inputEl, errorEl, message) => {
    errorEl.textContent = message;
    inputEl.setAttribute('aria-invalid', 'true');
  };

  /**
   * Cancella l'errore per un campo.
   * @param {HTMLInputElement} inputEl - L'elemento input.
   * @param {HTMLElement} errorEl - L'elemento errore.
   */
  const clearError = (inputEl, errorEl) => {
    errorEl.textContent = '';
    inputEl.removeAttribute('aria-invalid');
  };

  /**
   * Cancella tutti gli errori del form.
   */
  const clearAllErrors = () => {
    clearError(dobInput, dobError);
    clearError(calcDateInput, calcDateError);
  };
  
  /**
   * Nasconde i risultati e mostra il placeholder.
   */
  const hideResults = () => {
    resultsContainer.classList.add('hidden');
    resultsPlaceholder.classList.remove('hidden');
  };

  /**
   * Mostra i risultati e nasconde il placeholder.
   */
  const showResults = () => {
    resultsContainer.classList.remove('hidden');
    resultsPlaceholder.classList.add('hidden');
  };

  /**
   * Ottiene i giorni in un dato mese/anno (per il borrowing).
   * @param {number} year - L'anno (es. 2025).
   * @param {number} month - Il mese (0-11).
   * @returns {number} - Il numero di giorni.
   */
  const getDaysInMonth = (year, month) => {
    // new Date(year, month, 0) dà l'ultimo giorno del mese *precedente*.
    // Quindi per i giorni in Gennaio (mese 0), usiamo mese 1 (Feb).
    return new Date(year, month + 1, 0).getDate();
  };

  // --- Logica di Calcolo Principale ---

  /**
   * Calcola l'età e altri dati.
   * @param {Date} startDate - La data di nascita.
   * @param {Date} endDate - La data "età a".
   * @returns {object} - Un oggetto con tutti i risultati.
   */
  const calculateAge = (startDate, endDate) => {
    // Calcoli totali (basati su millisecondi per precisione)
    const diffMs = endDate.getTime() - startDate.getTime();
    const totalDays = Math.floor(diffMs / msPerDay);
    const totalWeeks = Math.floor(totalDays / 7);
    const totalYearsDecimal = diffMs / (msPerDay * avgDaysInYear);
    const totalMonthsDecimal = diffMs / (msPerDay * avgDaysInMonth);
    
    // Calcolo Y/M/D (algoritmo di borrowing)
    let y1 = startDate.getFullYear();
    let m1 = startDate.getMonth();
    let d1 = startDate.getDate();
    
    let y2 = endDate.getFullYear();
    let m2 = endDate.getMonth();
    let d2 = endDate.getDate();

    let years = y2 - y1;
    let months = m2 - m1;
    let days = d2 - d1;

    // 1. Borrow giorni
    if (days < 0) {
      months--;
      // Giorni nel mese *precedente* alla data finale
      const daysInPrevMonth = getDaysInMonth(y2, m2 - 1);
      days += daysInPrevMonth;
    }

    // 2. Borrow mesi
    if (months < 0) {
      years--;
      months += 12;
    }
    
    // Calcolo Prossimo Compleanno
    const today = new Date();
    today.setHours(0, 0, 0, 0); // Normalizza a mezzanotte
    
    let nextBday = new Date(today.getFullYear(), m1, d1);
    if (nextBday.getTime() < today.getTime()) {
      // Il compleanno di quest'anno è già passato
      nextBday.setFullYear(today.getFullYear() + 1);
    }
    
    // Calcola la differenza per il prossimo compleanno
    let nextBdayYears = nextBday.getFullYear() - today.getFullYear();
    let nextBdayMonths = nextBday.getMonth() - today.getMonth();
    let nextBdayDays = nextBday.getDate() - today.getDate();
    
    if (nextBdayDays < 0) {
      nextBdayMonths--;
      const daysInThisMonth = getDaysInMonth(today.getFullYear(), today.getMonth());
      nextBdayDays += daysInThisMonth;
    }
    
    if (nextBdayMonths < 0) {
      nextBdayYears--; // Non dovrebbe succedere se la logica sopra è corretta
      nextBdayMonths += 12;
    }

    return {
      years,
      months,
      days,
      nextBirthday: { months: nextBdayMonths, days: nextBdayDays },
      totalYears: totalYearsDecimal,
      totalMonths: totalMonthsDecimal,
      totalWeeks,
      totalDays,
      totalHours: totalDays * 24,
      totalMinutes: totalDays * 24 * 60,
    };
  };

  /**
   * Popola il DOM con i risultati.
   * @param {object} results - L'oggetto risultati da calculateAge.
   */
  const displayResults = (results) => {
    primaryAgeResult.textContent = `${results.years} Years, ${results.months} Months, ${results.days} Days`;
    
    // Gestisce il caso in cui il compleanno è oggi
    if (results.nextBirthday.months === 0 && results.nextBirthday.days === 0) {
      nextBirthdayResult.textContent = "It's Today!";
    } else {
      let nextBdayText = [];
      if (results.nextBirthday.months > 0) nextBdayText.push(`${results.nextBirthday.months} mo`);
      if (results.nextBirthday.days > 0) nextBdayText.push(`${results.nextBirthday.days} d`);
      nextBirthdayResult.textContent = nextBdayText.join(', ');
    }
    
    totalYearsResult.textContent = results.totalYears.toFixed(2);
    totalMonthsResult.textContent = results.totalMonths.toFixed(2);
    totalWeeksResult.textContent = formatNumber(results.totalWeeks);
    totalDaysResult.textContent = formatNumber(results.totalDays);
    totalHoursResult.textContent = formatNumber(results.totalHours);
    
    showResults();
  };


  // --- Event Handlers ---
  
  /**
   * Gestisce il submit del form.
   * @param {Event} e - L'evento submit.
   */
  const handleSubmit = (e) => {
    e.preventDefault();
    clearAllErrors();
    
    let isValid = true;
    
    // 1. Validazione
    const dobValue = dobInput.value;
    const calcDateValue = calcDateInput.value;
    
    if (!dobValue) {
      displayError(dobInput, dobError, "Date of birth is required.");
      isValid = false;
    }
    
    if (!calcDateValue) {
      displayError(calcDateInput, calcDateError, "Age at date is required.");
      isValid = false;
    }
    
    if (!isValid) {
      hideResults();
      return;
    }
    
    // 2. Parsing e ulteriore validazione
    // .valueAsDate ottiene la data come oggetto Date nella timezone locale
    const dob = dobInput.valueAsDate;
    const calcDate = calcDateInput.valueAsDate;

    if (calcDate.getTime() < dob.getTime()) {
      displayError(dobInput, dobError, "Date of birth must be before the 'Age at' date.");
      hideResults();
      return;
    }
    
    // 3. Calcolo e Visualizzazione
    try {
      const results = calculateAge(dob, calcDate);
      displayResults(results);
    } catch (error) {
      console.error("Calculation Error:", error);
      displayError(dobInput, dobError, "An unexpected error occurred. Please check the dates.");
      hideResults();
    }
  };
  
  /**
   * Gestisce il reset del form.
   */
  const handleReset = () => {
    clearAllErrors();
    hideResults();
    setDateToToday();
  };

  // --- Inizializzazione ---
  form.addEventListener('submit', handleSubmit);
  form.addEventListener('reset', handleReset);
  
  // Imposta 'Age at Date' a oggi di default
  setDateToToday();
  
  // Inizializza i menu mobile (dal template)
  const menuToggle = document.getElementById('mobile-menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  if (menuToggle && mobileMenu) {
    menuToggle.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });
  }
});
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Lease Calculator - Calculate Monthly Lease Payments | CalcDomain</title>
    <meta name="description" content="Professional auto lease calculator to estimate monthly lease payments, depreciation, finance charges, taxes, and total lease cost. Accurate, accessible, and mobile-friendly.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .prose { max-width: 65ch; }
        .prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose li { margin-bottom: 0.5rem; }
        .prose .formula-box { background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem; overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; }
        details > summary { cursor: pointer; font-weight: 600; }
        details[open] > summary { margin-bottom: 0.5rem; }
        .radio-group { display: flex; gap: 0.5rem; background: #f3f4f6; border: 1px solid #d1d5db; padding: 0.35rem; border-radius: 0.5rem; }
        .radio-option { position: relative; flex: 1; }
        .radio-option input { position: absolute; opacity: 0; inset: 0; }
        .radio-option label { display: flex; align-items: center; justify-content: center; min-height: 2.5rem; padding: 0.5rem; border-radius: 0.375rem; cursor: pointer; border: 1px solid transparent; }
        .radio-option input:checked + label { background: #3b82f6; color: white; }
        .tooltip-btn { width: 28px; height: 28px; border: 1px solid #d1d5db; background: #f3f4f6; color: #111; border-radius: 50%; font-weight: 800; line-height: 1; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; }
        .tooltip { display: none; margin-top: 0.35rem; background: #eef6ff; border: 1px solid #cfe6ff; color: #0b2e4a; padding: 0.5rem 0.75rem; border-radius: 8px; }
        .tooltip[aria-hidden="false"] { display: block; }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Calculate Auto Lease Payments",
      "description": "A step-by-step guide to calculating monthly auto lease payments including depreciation, finance charges, and taxes.",
      "step": [
        {"@type": "HowToStep", "name": "Enter Vehicle Details", "text": "Input MSRP, negotiated price, lease term in months, and residual value percentage."},
        {"@type": "HowToStep", "name": "Set Finance Terms", "text": "Choose between APR or Money Factor input. Money Factor = APR รท 2400."},
        {"@type": "HowToStep", "name": "Add Fees and Reductions", "text": "Enter down payment, trade-in credit, acquisition fee, and other fees."},
        {"@type": "HowToStep", "name": "Configure Taxes", "text": "Set sales tax rate and choose tax treatment method based on your state's rules."},
        {"@type": "HowToStep", "name": "Review Results", "text": "The calculator displays monthly payment, due at signing, total lease cost, and detailed breakdown."}
      ]
    }
    </script>
    <script src="search.js" defer></script>
    <style>
        /* CalcDomain Search Styles */
        .search-highlight {
            background: linear-gradient(120deg, #fbbf24 0%, #f59e0b 100%);
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 600;
            color: #78350f;
        }
        
        #search-results {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-height: 400px;
            overflow-y: auto;
        }
        
        #search-results a {
            display: block;
            padding: 16px;
            border-bottom: 1px solid #f3f4f6;
            transition: all 0.2s ease;
            text-decoration: none;
        }
        
        #search-results a:last-child {
            border-bottom: none;
        }
        
        #search-results a:hover {
            background-color: #f8fafc;
            transform: translateX(4px);
        }
        
        #search-results a:focus {
            background-color: #eff6ff;
            outline: 2px solid #3b82f6;
            outline-offset: -2px;
        }
        
        #search-results h3 {
            margin: 0 0 8px 0;
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
        }
        
        #search-results p {
            margin: 0 0 8px 0;
            font-size: 14px;
            color: #6b7280;
            line-height: 1.4;
        }
        
        #search-results .bg-blue-100 {
            background-color: #dbeafe !important;
            color: #1e40af !important;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 6px;
            font-weight: 500;
        }
        
        input[type="search"]:focus {
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
        }
        
        @media (max-width: 768px) {
            #search-results {
                max-height: 300px;
                margin-top: 8px;
                border-radius: 8px;
            }
            
            #search-results a {
                padding: 12px;
            }
            
            #search-results h3 {
                font-size: 15px;
            }
            
            #search-results p {
                font-size: 13px;
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        #search-results.show {
            animation: fadeInUp 0.3s ease-out;
        }
        
        #search-results::-webkit-scrollbar {
            width: 6px;
        }
        
        #search-results::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        #search-results::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        #search-results::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
            </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
    <nav class="container mx-auto px-4 lg:px-6 py-4">
        <!-- TOP ROW -->
        <div class="flex justify-between items-center">
            <!-- LOGO -->
            <a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>
            
            <!-- DESKTOP SEARCH -->
            <div class="w-full max-w-md hidden md:block mx-8">
                <div class="relative">
                    <input 
                        type="search" 
                        id="search-input"
                        placeholder="Search for a calculator..." 
                        class="w-full py-2 px-4 pr-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        autocomplete="off"
                    >
                    <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <!-- CONTAINER RISULTATI RICERCA -->
                    <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 max-h-96 overflow-y-auto z-50 hidden border border-gray-200"></div>
                </div>
            </div>
            
            <!-- NAVIGATION LINKS -->
            <div class="hidden md:flex items-center space-x-6">
                <a href="search.html" class="text-gray-700 hover:text-blue-600 transition-colors">Advanced Search</a>
                <a href="#categories" class="text-gray-700 hover:text-blue-600 transition-colors">Categories</a>
            </div>
            
            <!-- MOBILE TOGGLE -->
            <button id="mobile-menu-toggle" class="md:hidden p-2">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
        
        <!-- MOBILE MENU -->
        <div id="mobile-menu" class="md:hidden mt-4 hidden">
            <div class="mb-4">
                <div class="relative">
                    <input 
                        type="search" 
                        id="mobile-search-input"
                        placeholder="Search calculators..." 
                        class="w-full py-3 px-4 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                    <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>
            </div>
            <div class="space-y-2">
                <a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
                <a href="#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
            </div>
        </div>
    </nav>
</header>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">

            <!-- Left Column: Calculator & Content -->
            <main class="w-full lg:w-2/3">
                <!-- Breadcrumbs -->
                <nav class="text-sm mb-4 text-gray-600">
                    <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
                    <a href="#" class="hover:text-blue-600">Finance</a> &raquo;
                    <span>Auto Lease Calculator</span>
                </nav>

                <div class="bg-white p-6 rounded-lg shadow-md">
                    <!-- Calculator Title and Intro -->
                    <h1 class="text-3xl font-bold mb-2">Auto Lease Calculator</h1>
                    <p class="text-gray-600 mb-6">Estimate monthly lease payments, depreciation, finance charges, taxes, due at signing, and total lease cost with professional accuracy.</p>

                    <!-- Calculator Form -->
                    <div id="calculator-ui" class="space-y-6">
                        
                        <!-- Vehicle Information -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <div class="flex items-center gap-2 mb-2">
                                    <label for="msrp" class="text-sm font-medium text-gray-700">MSRP ($) *</label>
                                    <button type="button" class="tooltip-btn" id="msrpHelp" aria-expanded="false" aria-controls="msrpTooltip">?</button>
                                </div>
                                <input type="number" id="msrp" value="40000" step="0.01" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="40000">
                                <div id="msrpTooltip" class="tooltip" aria-hidden="true">Manufacturer's Suggested Retail Price used to compute residual value.</div>
                                <div id="msrpError" class="text-red-600 text-sm mt-1"></div>
                            </div>
                            <div>
                                <div class="flex items-center gap-2 mb-2">
                                    <label for="sellPrice" class="text-sm font-medium text-gray-700">Negotiated Price ($) *</label>
                                    <button type="button" class="tooltip-btn" id="sellHelp" aria-expanded="false" aria-controls="sellTooltip">?</button>
                                </div>
                                <input type="number" id="sellPrice" value="37000" step="0.01" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="37000">
                                <div id="sellTooltip" class="tooltip" aria-hidden="true">Final selling price used to build the capitalized cost (before reductions and fees).</div>
                                <div id="sellError" class="text-red-600 text-sm mt-1"></div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="term" class="block text-sm font-medium text-gray-700 mb-2">Term (months) *</label>
                                <input type="number" id="term" value="36" min="6" max="84" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="36">
                                <div id="termError" class="text-red-600 text-sm mt-1"></div>
                            </div>
                            <div>
                                <div class="flex items-center gap-2 mb-2">
                                    <label for="residualPct" class="text-sm font-medium text-gray-700">Residual Value (%) *</label>
                                    <button type="button" class="tooltip-btn" id="residualHelp" aria-expanded="false" aria-controls="residualTooltip">?</button>
                                </div>
                                <input type="number" id="residualPct" value="60" min="0" max="100" step="0.1" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="60">
                                <div id="residualTooltip" class="tooltip" aria-hidden="true">Percent of MSRP that remains at lease end (set by the lessor).</div>
                                <div id="residualError" class="text-red-600 text-sm mt-1"></div>
                            </div>
                        </div>

                        <!-- Finance Terms -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Finance Input *</label>
                            <div class="radio-group mb-4">
                                <div class="radio-option">
                                    <input type="radio" id="modeAPR" name="financeMode" value="apr" checked>
                                    <label for="modeAPR">APR (%)</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="modeMF" name="financeMode" value="mf">
                                    <label for="modeMF">Money Factor</label>
                                </div>
                            </div>
                            <div class="flex items-center gap-2 mb-2">
                                <label for="apr" class="text-sm font-medium text-gray-700">APR / MF Value *</label>
                                <button type="button" class="tooltip-btn" id="aprHelp" aria-expanded="false" aria-controls="aprTooltip">?</button>
                            </div>
                            <input type="number" id="apr" value="4.8" step="0.0001" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="4.8">
                            <div id="aprTooltip" class="tooltip" aria-hidden="true">If APR mode is selected, enter the annual percentage rate (e.g., 4.8). If MF mode, enter the money factor (e.g., 0.0020). APR% = MF ร 2400.</div>
                            <div id="aprError" class="text-red-600 text-sm mt-1"></div>
                        </div>

                        <!-- Fees and Reductions -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="down" class="block text-sm font-medium text-gray-700 mb-2">Down Payment ($)</label>
                                <input type="number" id="down" value="2000" min="0" step="0.01" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="2000">
                            </div>
                            <div>
                                <label for="trade" class="block text-sm font-medium text-gray-700 mb-2">Trade-in Credit ($)</label>
                                <input type="number" id="trade" value="0" min="0" step="0.01" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="0">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="acqFee" class="block text-sm font-medium text-gray-700 mb-2">Acquisition Fee ($)</label>
                                <input type="number" id="acqFee" value="650" min="0" step="0.01" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="650">
                                <div class="flex items-center mt-2">
                                    <input type="checkbox" id="capAcq" checked class="mr-2">
                                    <label for="capAcq" class="text-sm text-gray-600">Capitalize acquisition fee</label>
                                </div>
                            </div>
                            <div>
                                <label for="financedFees" class="block text-sm font-medium text-gray-700 mb-2">Other Financed Fees ($)</label>
                                <input type="number" id="financedFees" value="0" min="0" step="0.01" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="0">
                            </div>
                        </div>

                        <div>
                            <label for="upfrontFees" class="block text-sm font-medium text-gray-700 mb-2">Upfront Fees (paid at signing) ($)</label>
                            <input type="number" id="upfrontFees" value="0" min="0" step="0.01" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="0">
                        </div>

                        <!-- Tax Settings -->
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <label for="taxRate" class="text-sm font-medium text-gray-700">Sales Tax Rate (%) *</label>
                                <button type="button" class="tooltip-btn" id="taxHelp" aria-expanded="false" aria-controls="taxTooltip">?</button>
                            </div>
                            <input type="number" id="taxRate" value="8" min="0" max="100" step="0.01" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="8">
                            <div id="taxTooltip" class="tooltip" aria-hidden="true">Tax rules vary by state. Choose the method your state uses below or consult your Department of Revenue.</div>
                            <div id="taxError" class="text-red-600 text-sm mt-1"></div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tax Treatment</label>
                            <div class="space-y-2">
                                <div class="flex items-center">
                                    <input type="radio" id="taxMonthly" name="taxMethod" value="monthly" checked class="mr-2">
                                    <label for="taxMonthly" class="text-sm text-gray-700">Tax each monthly payment</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="radio" id="taxUpfrontTotal" name="taxMethod" value="upfront-total" class="mr-2">
                                    <label for="taxUpfrontTotal" class="text-sm text-gray-700">Tax upfront on total of payments</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="radio" id="taxOnCap" name="taxMethod" value="on-capcost" class="mr-2">
                                    <label for="taxOnCap" class="text-sm text-gray-700">Tax vehicle price upfront</label>
                                </div>
                            </div>
                            <p class="text-sm text-gray-500 mt-2">This selector exists because U.S. states apply lease sales tax differently.</p>
                        </div>
                    </div>

                    <!-- Results Section -->
                    <div id="results" class="mt-8 bg-blue-50 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Lease Summary:</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div class="text-center bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600">Monthly Payment (with tax)</p>
                                <p class="text-2xl font-bold text-blue-600" id="monthlyWithTax">$0.00</p>
                            </div>
                            <div class="text-center bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600">Monthly Payment (before tax)</p>
                                <p class="text-xl font-bold text-gray-700" id="monthlyBase">$0.00</p>
                            </div>
                            <div class="text-center bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600">Sales Tax (monthly)</p>
                                <p class="text-xl font-bold text-gray-700" id="monthlyTax">$0.00</p>
                            </div>
                            <div class="text-center bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600">Due at Signing</p>
                                <p class="text-xl font-bold text-green-600" id="dueAtSigning">$0.00</p>
                            </div>
                            <div class="text-center bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600">Total Lease Cost</p>
                                <p class="text-xl font-bold text-gray-700" id="totalLeaseCost">$0.00</p>
                            </div>
                            <div class="text-center bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600">Effective Monthly</p>
                                <p class="text-xl font-bold text-gray-700" id="effectiveMonthly">$0.00</p>
                            </div>
                        </div>
                        
                        <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div class="bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600 mb-1">Adjusted Cap Cost</p>
                                <p class="text-lg font-bold text-gray-800" id="adjCap">$0.00</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600 mb-1">Residual Value</p>
                                <p class="text-lg font-bold text-gray-800" id="residualValue">$0.00</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600 mb-1">Total Depreciation</p>
                                <p class="text-lg font-bold text-gray-800" id="depTotal">$0.00</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg border">
                                <p class="text-sm text-gray-600 mb-1">Total Finance Charge</p>
                                <p class="text-lg font-bold text-gray-800" id="finTotal">$0.00</p>
                            </div>
                        </div>

                        <div class="mt-4 text-center">
                            <button id="resetBtn" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md">Reset Calculator</button>
                        </div>
                        <p class="text-sm text-gray-500 mt-4 text-center">All values are estimates. Taxes and fees vary by jurisdiction and contract.</p>
                    </div>
                </div>

                <!-- SEO Content Area -->
                <article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
                    <h2>Data Source and Methodology</h2>
                    <p class="text-blue-700 font-semibold">โ Authoritative Source</p>
                    <p>This calculator provides professional-grade estimates based on regulatory standards and industry conventions for auto leasing.</p>
                    
                    <ul>
                        <li><strong>Consumer Financial Protection Bureau (CFPB)</strong>, Regulation M โ Consumer Leasing (12 CFR Part 1013), current version as of 2024. <a href="https://www.consumerfinance.gov/rules-policy/regulations/1013/" target="_blank" rel="noopener">Direct Link</a></li>
                        <li><strong>Federal Trade Commission</strong> guidance on leasing disclosure standards and consumer protection.</li>
                        <li><strong>Industry convention</strong> for APR to Money Factor conversion: APR% = MF ร 2400, widely adopted by U.S. captive finance companies.</li>
                    </ul>
                    <p><strong>All calculations are strictly based on the formulas and data provided by these authoritative sources.</strong></p>

                    <h2>The Auto Lease Formula Explained</h2>
                    <p>Understanding the mathematics behind auto leasing helps you make informed decisions. Here are the core formulas used by our calculator:</p>
                    
                    <div class="formula-box" aria-label="Auto lease formulas">
                        <p><strong>Adjusted Cap Cost:</strong><br>
                        <code>C_adj = max(0, (P_sell + F_cap) - R_cap)</code></p>
                        
                        <p><strong>Residual Value:</strong><br>
                        <code>V_res = MSRP ร (r_res / 100)</code></p>
                        
                        <p><strong>Monthly Depreciation Charge:</strong><br>
                        <code>D = (C_adj - V_res) / n</code></p>
                        
                        <p><strong>Monthly Finance (Rent) Charge:</strong><br>
                        <code>F = (C_adj + V_res) ร MF</code></p>
                        
                        <p><strong>Base Monthly Payment (pre-tax):</strong><br>
                        <code>M_base = D + F</code></p>
                        
                        <p><strong>Sales Tax (varies by state):</strong><br>
                        โข Monthly-taxed: <code>T_mo = M_base ร t</code><br>
                        โข Upfront on total: <code>T_up = (M_base ร n) ร t</code><br>
                        โข Upfront on price: <code>T_cap = P_sell ร t</code></p>
                        
                        <p><strong>Variables:</strong><br>
                        P_sell (negotiated price), F_cap (capitalized fees), R_cap (cap reductions), r_res (residual %), n (term), MF (money factor), t (tax rate)</p>
                    </div>

                    <h2>How to Use the Auto Lease Calculator</h2>
                    <p>Our calculator is designed to provide accurate lease estimates by considering all major factors that affect your monthly payment and total cost.</p>
                    
                    <h3>Step-by-Step Instructions</h3>
                    <ol>
                        <li><strong>MSRP:</strong> Enter the Manufacturer's Suggested Retail Price. This is used to calculate the residual value.</li>
                        <li><strong>Negotiated Price:</strong> Enter the actual selling price you've negotiated with the dealer.</li>
                        <li><strong>Term:</strong> Enter the lease duration in months (typically 24, 36, or 48 months).</li>
                        <li><strong>Residual Value:</strong> Enter the percentage of MSRP that the vehicle is expected to be worth at lease end. This is typically set by the lessor.</li>
                        <li><strong>Finance Rate:</strong> Choose between APR (Annual Percentage Rate) or Money Factor. To convert: MF = APR รท 2400.</li>
                        <li><strong>Down Payment:</strong> Enter any capitalized cost reduction you're making upfront.</li>
                        <li><strong>Trade-in Credit:</strong> Enter the value of any vehicle you're trading in.</li>
                        <li><strong>Fees:</strong> Enter acquisition fees and other charges. Choose whether to capitalize (finance) the acquisition fee or pay it upfront.</li>
                        <li><strong>Sales Tax:</strong> Enter your local tax rate and choose the tax treatment method used in your state.</li>
                    </ol>

                    <!-- In-Content Ad Placeholder -->
                    <div class="text-center my-6 bg-gray-200 py-10">
                        <p class="text-gray-500">In-Content Ad Unit</p>
                    </div>

                    <h2>Understanding Your Lease Results</h2>
                    <p>The calculator provides a comprehensive breakdown of your auto lease costs:</p>
                    
                    <ul>
                        <li><strong>Monthly Payment (with tax):</strong> Your total monthly payment including applicable taxes.</li>
                        <li><strong>Monthly Payment (before tax):</strong> The base payment before taxes are applied.</li>
                        <li><strong>Due at Signing:</strong> Amount typically due when you sign the lease, including first payment, taxes, fees, and down payment minus trade-in credit.</li>
                        <li><strong>Total Lease Cost:</strong> The complete cost including all payments, taxes, and fees over the lease term.</li>
                        <li><strong>Effective Monthly:</strong> Total lease cost divided by the term, showing the true monthly cost.</li>
                        <li><strong>Adjusted Cap Cost:</strong> The amount being financed after adding fees and subtracting reductions.</li>
                        <li><strong>Residual Value:</strong> The vehicle's projected value at lease end.</li>
                        <li><strong>Depreciation:</strong> The total amount you're paying for the vehicle's value loss during the lease.</li>
                        <li><strong>Finance Charge:</strong> The total interest-like charges over the lease term.</li>
                    </ul>

                    <h2>Worked Example: Step-by-Step Calculation</h2>
                    <p><strong>Scenario:</strong> MSRP $40,000; Negotiated Price $37,000; Term 36 months; Residual 60%; Money Factor 0.0020 (โ 4.8% APR); Acquisition Fee $650 (capitalized); Down Payment $2,000; Tax 8% on monthly payment.</p>
                    
                    <div class="formula-box">
                        <p>1. Adjusted Cap Cost: C_adj = (37,000 + 650) - 2,000 = $35,650</p>
                        <p>2. Residual: V_res = 40,000 ร 0.60 = $24,000</p>
                        <p>3. Depreciation: D = (35,650 - 24,000) / 36 = $326.39</p>
                        <p>4. Finance: F = (35,650 + 24,000) ร 0.0020 = $119.30</p>
                        <p>5. Base Monthly: M_base = 326.39 + 119.30 = $445.69</p>
                        <p>6. Tax (monthly): T_mo = 445.69 ร 0.08 = $35.66</p>
                        <p>7. Monthly with tax: M_with = $481.35</p>
                        <p>8. Due at signing: $481.35 + $0 + $2,000 - $0 = $2,481.35</p>
                    </div>

                    <h2>Key Factors That Affect Your Lease Payment</h2>
                    
                    <h3>Residual Value Impact</h3>
                    <p>Higher residual values result in lower monthly payments because you're paying for less depreciation. Residual values are typically set by the lessor based on industry guides and can vary by trim level, options, and mileage allowance.</p>
                    
                    <h3>Money Factor vs APR</h3>
                    <p>The money factor is essentially the interest rate for your lease. A lower money factor means lower monthly payments. To compare with loan rates, multiply the money factor by 2400 to get the equivalent APR.</p>
                    
                    <h3>Capitalized Cost Reductions</h3>
                    <p>Down payments, rebates, and trade-in credits reduce the adjusted capitalized cost, lowering your monthly payment. However, consider the risk: if the vehicle is totaled or stolen, you may not recover upfront payments.</p>
                    
                    <h3>Mileage Allowances</h3>
                    <p>Higher mileage allowances typically reduce residual values, increasing your monthly payment. Choose a mileage allowance that matches your driving habits to avoid excess mileage charges.</p>

                    <h2>Frequently Asked Questions (FAQ)</h2>
                    <details class="border-b py-2">
                        <summary>How do I convert APR to Money Factor?</summary>
                        <p class="mt-2 text-gray-700">Use the formula: MF = APR% รท 2400. For example, 4.8% APR equals 0.0020 Money Factor. This conversion is widely used in the auto leasing industry.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>Is residual value based on MSRP or negotiated price?</summary>
                        <p class="mt-2 text-gray-700">Residual value is typically calculated as a percentage of MSRP, not the negotiated price. This is set by the lessor and cannot usually be negotiated.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>Should I put money down on a lease?</summary>
                        <p class="mt-2 text-gray-700">Down payments lower monthly payments but don't always reduce total cost proportionally. Consider the risk: if the vehicle is totaled or stolen, you may lose your down payment. Many experts recommend minimal or no down payment on leases.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>What fees are typically included in a lease?</summary>
                        <p class="mt-2 text-gray-700">Common fees include acquisition fee (lessor's administrative charge), documentation fee, title and registration, and dealer-installed options. The acquisition fee can usually be capitalized (financed) or paid upfront.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>How are taxes applied to leases?</summary>
                        <p class="mt-2 text-gray-700">Tax treatment varies by state. Some states tax each monthly payment, others tax the total of all payments upfront, and some tax the vehicle's full price upfront. Check your state's rules or consult your Department of Revenue.</p>
                    </details>
                    <details class="border-b py-2">
                        <summary>Why doesn't my dealer quote match exactly?</summary>
                        <p class="mt-2 text-gray-700">Differences can arise from state-specific taxes, fees, official money factors, residual granularity, and rounding policies. Use the same inputs and methods to align calculations with dealer quotes.</p>
                    </details>

                    <h2>Lease vs. Buy Decision Factors</h2>
                    <p>Consider these factors when deciding between leasing and buying:</p>
                    <ul>
                        <li><strong>Monthly Cash Flow:</strong> Leases typically offer lower monthly payments than loans.</li>
                        <li><strong>Ownership:</strong> You never own a leased vehicle; loans result in ownership.</li>
                        <li><strong>Mileage Restrictions:</strong> Leases have mileage limits; owned vehicles don't.</li>
                        <li><strong>Wear and Tear:</strong> Leases may charge for excessive wear; owned vehicles don't have this concern.</li>
                        <li><strong>Latest Technology:</strong> Leasing allows you to drive newer vehicles with latest features.</li>
                        <li><strong>Total Cost:</strong> Continuous leasing is typically more expensive long-term than buying and keeping a vehicle.</li>
                    </ul>
                </article>
            </main>

            <!-- Right Sidebar: Ads & Related Links -->
            <aside class="w-full lg:w-1/3">
                <div class="sticky top-24">
                    <!-- Ad Placeholder -->
                    <div class="bg-gray-200 h-96 rounded-lg mb-6 flex items-center justify-center">
                        <p class="text-gray-500">Sticky Ad Unit (e.g., 300x600)</p>
                    </div>

                    <!-- Related Calculators -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-4">Related Financial Tools</h3>
                        <ul class="space-y-3">
                            <li><a href="#" class="text-blue-600 hover:underline">Auto Loan Calculator</a></li>
                            <li><a href="#" class="text-blue-600 hover:underline">Car Affordability Calculator</a></li>
                            <li><a href="#" class="text-blue-600 hover:underline">Lease vs Buy Calculator</a></li>
                            <li><a href="#" class="text-blue-600 hover:underline">Trade-in Value Calculator</a></li>
                            <li><a href="#" class="text-blue-600 hover:underline">APR Calculator</a></li>
                            <li><a href="#" class="text-blue-600 hover:underline">Debt-to-Income Ratio Calculator</a></li>
                        </ul>
                    </div>
                </div>
            </aside>

        </div>
    </div>
    
    <!-- Footer -->
    <footer class="bg-white border-t mt-12">
        <div class="container mx-auto px-6 py-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h4 class="font-bold text-lg mb-4">CalcDomain</h4>
                    <p class="text-gray-600">High-precision tools for professionals and everyday use.</p>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">Finance Tools</h4>
                    <ul class="space-y-2 text-gray-600">
                        <li><a href="#" class="hover:text-blue-600">Mortgage Calculator</a></li>
                        <li><a href="#" class="hover:text-blue-600">Investment Calculator</a></li>
                        <li><a href="#" class="hover:text-blue-600">Retirement Calculator</a></li>
                        <li><a href="#" class="hover:text-blue-600">Budget Calculator</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">Categories</h4>
                    <ul class="space-y-2 text-gray-600">
                        <li><a href="#" class="hover:text-blue-600">Construction</a></li>
                        <li><a href="#" class="hover:text-blue-600">Health & Fitness</a></li>
                        <li><a href="#" class="hover:text-blue-600">Science</a></li>
                        <li><a href="#" class="hover:text-blue-600">Math</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">Company</h4>
                    <ul class="space-y-2 text-gray-600">
                        <li><a href="#" class="hover:text-blue-600">About Us</a></li>
                        <li><a href="#" class="hover:text-blue-600">Contact</a></li>
                        <li><a href="#" class="hover:text-blue-600">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="text-center text-gray-600 mt-8 pt-8 border-t">
                <p>Tool developed by <strong>Ugo Candido</strong>. Content verified by <strong>CalcDomain Expert Review Team</strong>.</p>
                <p>Last reviewed for accuracy on: <time datetime="2025-09-12">September 12, 2025</time></p>
                <p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // --- Auto Lease Calculator Logic ---
        
        // Get references to all HTML elements
        const elements = {
            msrp: document.getElementById('msrp'),
            sellPrice: document.getElementById('sellPrice'),
            term: document.getElementById('term'),
            residualPct: document.getElementById('residualPct'),
            apr: document.getElementById('apr'),
            modeAPR: document.getElementById('modeAPR'),
            modeMF: document.getElementById('modeMF'),
            down: document.getElementById('down'),
            trade: document.getElementById('trade'),
            acqFee: document.getElementById('acqFee'),
            capAcq: document.getElementById('capAcq'),
            financedFees: document.getElementById('financedFees'),
            upfrontFees: document.getElementById('upfrontFees'),
            taxRate: document.getElementById('taxRate'),
            taxMonthly: document.getElementById('taxMonthly'),
            taxUpfrontTotal: document.getElementById('taxUpfrontTotal'),
            taxOnCap: document.getElementById('taxOnCap'),
            resetBtn: document.getElementById('resetBtn'),
            
            // Results
            monthlyWithTax: document.getElementById('monthlyWithTax'),
            monthlyBase: document.getElementById('monthlyBase'),
            monthlyTax: document.getElementById('monthlyTax'),
            dueAtSigning: document.getElementById('dueAtSigning'),
            totalLeaseCost: document.getElementById('totalLeaseCost'),
            effectiveMonthly: document.getElementById('effectiveMonthly'),
            adjCap: document.getElementById('adjCap'),
            residualValue: document.getElementById('residualValue'),
            depTotal: document.getElementById('depTotal'),
            finTotal: document.getElementById('finTotal')
        };

        // Helper functions
        const toNum = (el) => {
            const v = parseFloat((el.value || '').toString().replace(/,/g, ''));
            return isFinite(v) ? v : 0;
        };

        const fmt = (n) => n.toLocaleString('en-US', {
            style: 'currency',
            currency: 'USD',
            maximumFractionDigits: 2
        });

        const clamp = (x, min, max) => Math.min(Math.max(x, min), max);

        // Tooltip functionality
        function setupTooltips() {
            const tooltipButtons = document.querySelectorAll('.tooltip-btn');
            tooltipButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.getAttribute('aria-controls');
                    const tip = document.getElementById(id);
                    const open = btn.getAttribute('aria-expanded') === 'true';
                    btn.setAttribute('aria-expanded', String(!open));
                    tip.setAttribute('aria-hidden', String(open));
                });
            });

            // Close tooltips when clicking outside
            document.addEventListener('click', (e) => {
                const isBtn = e.target.classList && e.target.classList.contains('tooltip-btn');
                if (isBtn) return;
                document.querySelectorAll('.tooltip-btn[aria-expanded="true"]').forEach(btn => {
                    btn.setAttribute('aria-expanded', 'false');
                    const tip = document.getElementById(btn.getAttribute('aria-controls'));
                    tip && tip.setAttribute('aria-hidden', 'true');
                });
            });
        }

        // Validation functions
        const setError = (el, elErr, message) => {
            el.setAttribute('aria-invalid', message ? 'true' : 'false');
            if (elErr) elErr.textContent = message || '';
        };

        const validateField = (id) => {
            const errorElements = {
                msrp: document.getElementById('msrpError'),
                sellPrice: document.getElementById('sellError'),
                term: document.getElementById('termError'),
                residualPct: document.getElementById('residualError'),
                apr: document.getElementById('aprError'),
                taxRate: document.getElementById('taxError')
            };

            switch (id) {
                case 'msrp': {
                    const v = toNum(elements.msrp);
                    setError(elements.msrp, errorElements.msrp, v > 0 ? '' : 'Please enter a positive MSRP.');
                    return v > 0;
                }
                case 'sellPrice': {
                    const v = toNum(elements.sellPrice);
                    setError(elements.sellPrice, errorElements.sellPrice, v > 0 ? '' : 'Enter the negotiated price greater than 0.');
                    return v > 0;
                }
                case 'term': {
                    const v = toNum(elements.term);
                    setError(elements.term, errorElements.term, (v >= 6 && v <= 84) ? '' : 'Enter a term between 6 and 84 months.');
                    return (v >= 6 && v <= 84);
                }
                case 'residualPct': {
                    const v = toNum(elements.residualPct);
                    setError(elements.residualPct, errorElements.residualPct, (v >= 0 && v <= 100) ? '' : 'Residual must be between 0% and 100%.');
                    return (v >= 0 && v <= 100);
                }
                case 'apr': {
                    const v = toNum(elements.apr);
                    const ok = v >= 0 && isFinite(v);
                    setError(elements.apr, errorElements.apr, ok ? '' : 'Enter a non-negative value for APR or Money Factor.');
                    return ok;
                }
                case 'taxRate': {
                    const v = toNum(elements.taxRate);
                    const ok = (v >= 0 && v <= 100);
                    setError(elements.taxRate, errorElements.taxRate, ok ? '' : 'Enter a tax rate between 0% and 100%.');
                    return ok;
                }
            }
            return true;
        };

        // Main calculation function
        function compute() {
            // Validate required fields
            const ok = ['msrp', 'sellPrice', 'term', 'residualPct', 'apr', 'taxRate'].every(validateField);
            if (!ok) return;

            const vMsrp = toNum(elements.msrp);
            const vSell = toNum(elements.sellPrice);
            const vTerm = Math.round(toNum(elements.term));
            const vResPct = clamp(toNum(elements.residualPct), 0, 100);
            const vDown = Math.max(0, toNum(elements.down));
            const vTrade = Math.max(0, toNum(elements.trade));
            const vAcq = Math.max(0, toNum(elements.acqFee));
            const vFinFees = Math.max(0, toNum(elements.financedFees));
            const vUpfrontFees = Math.max(0, toNum(elements.upfrontFees));
            const taxPct = clamp(toNum(elements.taxRate), 0, 100);
            const taxDec = taxPct / 100;

            // Calculate Money Factor
            let mf;
            const val = Math.max(0, toNum(elements.apr));
            if (elements.modeAPR.checked) {
                // APR% -> MF
                mf = val / 2400;
            } else {
                mf = val;
            }

            // Calculate lease components
            const capFees = vFinFees + (elements.capAcq.checked ? vAcq : 0);
            const capReductions = vDown + vTrade;
            const grossCap = vSell + capFees;
            const adjCap = Math.max(0, grossCap - capReductions);
            const residualVal = vMsrp * (vResPct / 100);

            const depreciation = (adjCap - residualVal) / vTerm;
            const finance = (adjCap + residualVal) * mf;
            const baseMonthly = Math.max(0, depreciation + finance);

            // Calculate taxes
            let monthlyTax = 0, monthlyWithTax = baseMonthly, upfrontTaxes = 0;
            if (elements.taxMonthly.checked) {
                monthlyTax = baseMonthly * taxDec;
                monthlyWithTax = baseMonthly + monthlyTax;
            } else if (elements.taxUpfrontTotal.checked) {
                upfrontTaxes = baseMonthly * vTerm * taxDec;
                monthlyTax = 0;
                monthlyWithTax = baseMonthly;
            } else { // on-capcost
                upfrontTaxes = vSell * taxDec;
                monthlyTax = 0;
                monthlyWithTax = baseMonthly;
            }

            // Calculate totals
            const firstPayment = monthlyWithTax;
            const dueAtSigning = Math.max(0,
                firstPayment + vUpfrontFees + (elements.capAcq.checked ? 0 : vAcq) + upfrontTaxes + vDown - vTrade
            );

            const totalMonthly = monthlyWithTax * vTerm;
            const depTotal = Math.max(0, (adjCap - residualVal));
            const finTotal = finance * vTerm;
            const totalLeaseCost = totalMonthly + (elements.capAcq.checked ? 0 : vAcq) + vUpfrontFees + (elements.taxMonthly.checked ? 0 : upfrontTaxes) + vDown - vTrade;
            const effectiveMonthly = totalLeaseCost / vTerm;

            // Update display
            elements.monthlyWithTax.textContent = fmt(monthlyWithTax);
            elements.monthlyBase.textContent = fmt(baseMonthly);
            elements.monthlyTax.textContent = fmt(monthlyTax);
            elements.dueAtSigning.textContent = fmt(dueAtSigning);
            elements.totalLeaseCost.textContent = fmt(totalLeaseCost);
            elements.effectiveMonthly.textContent = fmt(effectiveMonthly);
            elements.adjCap.textContent = fmt(adjCap);
            elements.residualValue.textContent = fmt(residualVal);
            elements.depTotal.textContent = fmt(depTotal);
            elements.finTotal.textContent = fmt(finTotal);
        }

        // Debounce helper
        function debounce(fn, delay) {
            let t;
            return function() {
                clearTimeout(t);
                t = setTimeout(fn, delay);
            };
        }

        // Reset function
        function setDefaults() {
            elements.msrp.value = '40000';
            elements.sellPrice.value = '37000';
            elements.term.value = '36';
            elements.residualPct.value = '60';
            elements.modeAPR.checked = true;
            elements.modeMF.checked = false;
            elements.apr.value = '4.8';
            elements.down.value = '2000';
            elements.trade.value = '0';
            elements.acqFee.value = '650';
            elements.capAcq.checked = true;
            elements.financedFees.value = '0';
            elements.upfrontFees.value = '0';
            elements.taxRate.value = '8';
            elements.taxMonthly.checked = true;
            elements.taxUpfrontTotal.checked = false;
            elements.taxOnCap.checked = false;

            // Clear errors
            const errorElements = ['msrpError', 'sellError', 'termError', 'residualError', 'aprError', 'taxError'];
            errorElements.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.textContent = '';
            });

            const inputElements = [elements.msrp, elements.sellPrice, elements.term, elements.residualPct, elements.apr, elements.taxRate];
            inputElements.forEach(el => el.removeAttribute('aria-invalid'));

            compute();
        }

        // Event listeners
        function setupEventListeners() {
            const fields = [elements.msrp, elements.sellPrice, elements.term, elements.residualPct, elements.apr, elements.taxRate, elements.down, elements.trade, elements.acqFee, elements.financedFees, elements.upfrontFees];
            
            fields.forEach(f => {
                f.addEventListener('blur', () => {
                    validateField(f.id);
                    compute();
                }, { passive: true });
                f.addEventListener('input', debounce(() => {
                    compute();
                }, 80), { passive: true });
            });

            [elements.modeAPR, elements.modeMF, elements.capAcq, elements.taxMonthly, elements.taxUpfrontTotal, elements.taxOnCap].forEach(ctrl => {
                ctrl.addEventListener('change', () => {
                    compute();
                }, { passive: true });
            });

            elements.resetBtn.addEventListener('click', setDefaults);
        }

        // Initialize the calculator
        function init() {
            setupTooltips();
            setupEventListeners();
            setDefaults(); // This also calls compute()
        }

        // Run when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>

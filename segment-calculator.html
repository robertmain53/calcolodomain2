<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Segment Calculator – Circle, Line, Woodturning, SMS</title>
  <meta name="description" content="Professional segment calculator: circle segment area/arc/chord/centroid, line-segment distance & midpoint, woodturning ring segments (miter/chords), and SMS segment counter (GSM-7/UCS-2). Accessible, mobile-first, and accurate." />
  <link rel="canonical" href="https://calcdomain.com/segment-calculator.html" />
  <meta name="theme-color" content="#0b63f6">

  <!-- Icons (optional placeholders; replace paths if needed) -->
  <link rel="icon" type="image/png" href="https://calcdomain.com/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/svg+xml" href="https://calcdomain.com/favicon.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="https://calcdomain.com/apple-touch-icon.png">
  <link rel="manifest" href="https://calcdomain.com/site.webmanifest">

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com" defer></script>

  <!-- MathJax for LaTeX rendering -->
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
          id="MathJax-script"></script>

  <style>
    /* Base typography and layout helpers */
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif; }
    .prose { max-width: 70ch; }
    .prose h2 { font-size: 1.375rem; font-weight: 700; margin-top: 1.75rem; margin-bottom: .75rem; }
    .prose h3 { font-size: 1.125rem; font-weight: 700; margin-top: 1.25rem; margin-bottom: .5rem; }
    .prose p { margin-bottom: .9rem; line-height: 1.65; }
    .prose ul, .prose ol { margin: .75rem 0 .75rem 1.25rem; }
    .formula-box { background:#f3f4f6; border:1px solid #e5e7eb; border-radius:12px; padding:1rem; overflow:auto; }

    /* Focus styles (visible & WCAG-compliant) */
    :focus-visible { outline: 3px solid #0ea5e9; outline-offset: 2px; border-radius: 8px; }

    /* Tabs */
    .tab-btn[aria-selected="true"] { background:#0b63f6; color:#fff; }
    .tab-panel { display:none; }
    .tab-panel[data-active="true"] { display:block; }

    /* Result cards */
    .result-card { background:#fff; border:1px solid #e5e7eb; border-radius: 12px; padding:1rem; }
    .result-card h4 { font-size:.9rem; color:#6b7280; margin-bottom:.25rem; }
    .result-card p { font-weight:800; font-size:1.4rem; color:#0b63f6; }

    /* Prevent CLS in results area */
    #results-wrapper { min-height: 340px; }

    /* Tooltip content (visually hidden until toggled) */
    .tooltip-content[hidden] { display:none; }

    /* Print */
    @media print {
      body * { visibility: hidden; }
      #print-section, #print-section * { visibility: visible; }
      #print-section { position: absolute; inset: 0; width:100%; }
      nav, header, footer, #tablist { display: none !important; }
    }
  </style>

  <!-- WebPage JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Segment Calculator",
    "url":"https://calcdomain.com/segment-calculator.html",
    "inLanguage":"en",
    "description":"Professional segment calculator covering circle segments, line segments, woodturning ring segments, and SMS segment counting (GSM-7/UCS-2).",
    "author":{"@type":"Person","name":"Ugo Candido"},
    "publisher":{"@type":"Organization","name":"CalcDomain"}
  }
  </script>

  <!-- BreadcrumbList JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://calcdomain.com/"},
      {"@type":"ListItem","position":2,"name":"Math","item":"https://calcdomain.com/math.html"},
      {"@type":"ListItem","position":3,"name":"Geometry","item":"https://calcdomain.com/subcategories/geometry.html"},
      {"@type":"ListItem","position":4,"name":"Segment Calculator","item":"https://calcdomain.com/segment-calculator.html"}
    ]
  }
  </script>

  <!-- HowTo JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to use the Segment Calculator",
    "description":"Choose a mode (Circle, Line, Woodturning, SMS), enter inputs, and read results instantly.",
    "step":[
      {"@type":"HowToStep","name":"Pick mode","text":"Select Circle Segment, Line Segment, Woodturning Ring Segment, or SMS Segment Counter."},
      {"@type":"HowToStep","name":"Enter inputs","text":"Provide radius/height or angle for circle, coordinates for line, ring sizes & count for woodturning, or your message for SMS."},
      {"@type":"HowToStep","name":"Review outputs","text":"View area, arc, chord, centroid (circle); distance, midpoint, slope (line); miters and chord lengths (woodturning); segment count & encoding (SMS)."},
      {"@type":"HowToStep","name":"Export/Print","text":"Print or copy results for documentation or fabrication."}
    ]
  }
  </script>

  <!-- FAQPage JSON-LD -->
  <script type="application/ld+json" id="faq-jsonld">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {
        "@type":"Question",
        "name":"What is a circle segment and how is its area computed?",
        "acceptedAnswer":{"@type":"Answer","text":"A circle segment is the region bounded by a chord and the corresponding arc. Its area can be computed from central angle θ as A = (r^2/2)(θ − sin θ), or from segment height h as A = r^2·acos((r−h)/r) − (r−h)·√(2rh − h^2)."}
      },
      {
        "@type":"Question",
        "name":"How do I find the length of a line segment between two points?",
        "acceptedAnswer":{"@type":"Answer","text":"Use the Euclidean distance d = √((x2−x1)^2 + (y2−y1)^2). The midpoint is ((x1+x2)/2, (y1+y2)/2) and the slope is (y2−y1)/(x2−x1) where defined."}
      },
      {
        "@type":"Question",
        "name":"What is the miter angle for a ring made of N segments?",
        "acceptedAnswer":{"@type":"Answer","text":"Each segment is cut with a miter angle of 180°/N. The central angle per segment is 360°/N. Outer and inner chords depend on outer and inner diameters."}
      },
      {
        "@type":"Question",
        "name":"How are SMS segments counted?",
        "acceptedAnswer":{"@type":"Answer","text":"GSM-7 messages fit 160 chars per single segment (153 when concatenated). UCS-2 (Unicode) messages fit 70 chars per single segment (67 concatenated). Certain GSM extension characters count as two."}
      },
      {
        "@type":"Question",
        "name":"Does this tool handle radians and degrees?",
        "acceptedAnswer":{"@type":"Answer","text":"Yes. For circle calculations you can choose angle units (degrees or radians). Height-based inputs do not require angle units."}
      },
      {
        "@type":"Question",
        "name":"Can I use woodturning outputs directly on the saw?",
        "acceptedAnswer":{"@type":"Answer","text":"Use the miter angle (half the central angle) on your saw. Account for kerf and verify dimensions with a test cut before final material."}
      },
      {
        "@type":"Question",
        "name":"Which standards back the SMS segmentation rules?",
        "acceptedAnswer":{"@type":"Answer","text":"3GPP TS 23.038 defines GSM 7-bit default alphabet and extension table. UCS-2 behavior follows Unicode and 3GPP messaging concatenation rules."}
      }
    ]
  }
  </script>
</head>
<body class="bg-gray-50 text-gray-900">
  <!-- Header (non-sticky per spec) -->
  <header class="bg-white border-b">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <a href="index.html" class="text-2xl font-extrabold text-blue-600">CalcDomain</a>
      <nav class="hidden md:flex gap-6 text-sm">
        <a class="hover:text-blue-600" href="search.html">Advanced Search</a>
        <a class="hover:text-blue-600" href="index.html#categories">Categories</a>
      </nav>
      <button class="md:hidden p-3 rounded-lg border hover:bg-gray-100" aria-label="Open menu">
        <span class="sr-only">Open menu</span>☰
      </button>
    </div>
  </header>

  <main class="container mx-auto px-4 py-8">
    <nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
      <a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
      <a href="math.html" class="hover:text-blue-600">Math</a> &raquo;
      <a href="subcategories/geometry.html" class="hover:text-blue-600">Geometry</a> &raquo;
      <span class="text-gray-900">Segment Calculator</span>
    </nav>

    <section id="print-section" class="bg-white p-6 rounded-xl shadow-sm">
      <h1 class="text-3xl font-extrabold mb-2">segment calculator</h1>
      <p class="text-gray-700 mb-6">A unified, professional calculator for <strong>circle segments</strong> (area, arc, chord, centroid), <strong>line segments</strong> (distance, midpoint, slope), <strong>woodturning ring segments</strong> (miter angle and chord lengths), and <strong>SMS message segments</strong> (GSM-7/UCS-2). Built for engineers, makers, and communications pros.</p>

      <!-- Tablist -->
      <div class="mb-4">
        <div id="tablist" role="tablist" aria-label="Segment calculator modes" class="flex flex-wrap gap-2">
          <button class="tab-btn px-3 py-2 rounded-lg border text-sm" role="tab" aria-selected="true" aria-controls="panel-circle" id="tab-circle">Circle Segment</button>
          <button class="tab-btn px-3 py-2 rounded-lg border text-sm" role="tab" aria-selected="false" aria-controls="panel-line" id="tab-line">Line Segment</button>
          <button class="tab-btn px-3 py-2 rounded-lg border text-sm" role="tab" aria-selected="false" aria-controls="panel-wood" id="tab-wood">Woodturning Ring</button>
          <button class="tab-btn px-3 py-2 rounded-lg border text-sm" role="tab" aria-selected="false" aria-controls="panel-sms" id="tab-sms">SMS Segments</button>
        </div>
      </div>

      <!-- Calculator Panels -->
      <section id="calculator-ui" class="space-y-8">
        <!-- CIRCLE SEGMENT -->
        <div id="panel-circle" class="tab-panel" role="tabpanel" aria-labelledby="tab-circle" data-active="true">
          <h2 class="text-xl font-bold mb-3">Circle segment</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="circleMode" class="block text-sm font-medium text-gray-800">Input mode *</label>
              <div class="flex items-center gap-2 mt-1">
                <select id="circleMode" class="w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="circleModeHelp">
                  <option value="height" selected>Radius + Segment Height (h)</option>
                  <option value="angle">Radius + Central Angle (θ)</option>
                </select>
                <button type="button" class="px-3 py-2 rounded-md border" aria-expanded="false" aria-controls="circleModeHelp">?</button>
              </div>
              <p id="circleModeHelp" class="text-sm text-gray-600 mt-2">Choose to compute using segment height \(h\) or central angle \(\theta\).</p>
              <p id="circleModeErr" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
            </div>

            <div>
              <label for="circleRadius" class="block text-sm font-medium text-gray-800">Radius r *</label>
              <input id="circleRadius" type="number" inputmode="decimal" min="0" step="any" value="10" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="circleRadiusHelp circleRadiusErr">
              <div class="flex items-center gap-2 mt-1">
                <button type="button" class="px-3 py-2 rounded-md border" aria-expanded="false" aria-controls="circleRadiusHelp">?</button>
                <p id="circleRadiusHelp" class="text-sm text-gray-600">Circle radius (same units propagate to outputs).</p>
              </div>
              <p id="circleRadiusErr" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
            </div>

            <div id="heightRow">
              <label for="circleHeight" class="block text-sm font-medium text-gray-800">Segment height h *</label>
              <input id="circleHeight" type="number" inputmode="decimal" min="0" step="any" value="3" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="circleHeightHelp circleHeightErr">
              <div class="flex items-center gap-2 mt-1">
                <button type="button" class="px-3 py-2 rounded-md border" aria-expanded="false" aria-controls="circleHeightHelp">?</button>
                <p id="circleHeightHelp" class="text-sm text-gray-600">Vertical distance from chord to arc. Must satisfy \(0 \le h \le 2r\).</p>
              </div>
              <p id="circleHeightErr" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
            </div>

            <div id="angleRow" class="hidden">
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div>
                  <label for="circleAngle" class="block text-sm font-medium text-gray-800">Central angle θ *</label>
                  <input id="circleAngle" type="number" inputmode="decimal" min="0" step="any" value="1.2" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="circleAngleErr">
                  <p id="circleAngleErr" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
                </div>
                <div>
                  <label for="angleUnits" class="block text-sm font-medium text-gray-800">Angle units *</label>
                  <select id="angleUnits" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true">
                    <option value="rad" selected>radians</option>
                    <option value="deg">degrees</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <div id="circle-results" class="mt-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4" aria-live="polite">
            <div class="result-card"><h4>Area of segment</h4><p id="circleArea">—</p></div>
            <div class="result-card"><h4>Arc length</h4><p id="circleArc">—</p></div>
            <div class="result-card"><h4>Chord length</h4><p id="circleChord">—</p></div>
            <div class="result-card"><h4>Perimeter (arc + chord)</h4><p id="circlePerimeter">—</p></div>
            <div class="result-card"><h4>Centroid distance from center</h4><p id="circleCentroid">—</p></div>
            <div class="result-card"><h4>Central angle θ (rad)</h4><p id="circleAngleOut">—</p></div>
          </div>
        </div>

        <!-- LINE SEGMENT -->
        <div id="panel-line" class="tab-panel" role="tabpanel" aria-labelledby="tab-line" data-active="false">
          <h2 class="text-xl font-bold mb-3">Line segment</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="x1" class="block text-sm font-medium text-gray-800">x₁ *</label>
              <input id="x1" type="number" inputmode="decimal" step="any" value="0" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="x1Err">
              <p id="x1Err" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
            </div>
            <div>
              <label for="y1" class="block text-sm font-medium text-gray-800">y₁ *</label>
              <input id="y1" type="number" inputmode="decimal" step="any" value="0" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="y1Err">
              <p id="y1Err" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
            </div>
            <div>
              <label for="x2" class="block text-sm font-medium text-gray-800">x₂ *</label>
              <input id="x2" type="number" inputmode="decimal" step="any" value="3" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="x2Err">
              <p id="x2Err" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
            </div>
            <div>
              <label for="y2" class="block text-sm font-medium text-gray-800">y₂ *</label>
              <input id="y2" type="number" inputmode="decimal" step="any" value="4" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="y2Err">
              <p id="y2Err" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
            </div>
          </div>

          <div class="mt-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4" aria-live="polite">
            <div class="result-card"><h4>Length</h4><p id="lineLength">—</p></div>
            <div class="result-card"><h4>Midpoint</h4><p id="lineMidpoint">—</p></div>
            <div class="result-card"><h4>Slope</h4><p id="lineSlope">—</p></div>
          </div>
        </div>

        <!-- WOODTURNING RING SEGMENT -->
        <div id="panel-wood" class="tab-panel" role="tabpanel" aria-labelledby="tab-wood" data-active="false">
          <h2 class="text-xl font-bold mb-3">Woodturning ring segment</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="segmentsN" class="block text-sm font-medium text-gray-800">Number of segments N *</label>
              <input id="segmentsN" type="number" inputmode="numeric" min="3" step="1" value="12" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="segmentsNErr">
              <p id="segmentsNErr" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
            </div>

            <div>
              <label for="outerD" class="block text-sm font-medium text-gray-800">Outer diameter D<sub>out</sub> *</label>
              <input id="outerD" type="number" inputmode="decimal" min="0" step="any" value="200" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="outerDErr">
              <p id="outerDErr" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
            </div>

            <div>
              <label for="innerD" class="block text-sm font-medium text-gray-800">Inner diameter D<sub>in</sub> *</label>
              <input id="innerD" type="number" inputmode="decimal" min="0" step="any" value="160" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="innerDErr">
              <p id="innerDErr" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
            </div>

            <div>
              <label for="kerf" class="block text-sm font-medium text-gray-800">Saw kerf (optional)</label>
              <input id="kerf" type="number" inputmode="decimal" min="0" step="any" value="0" class="mt-1 w-full border rounded-md px-3 py-2" aria-describedby="kerfHelp kerfErr">
              <div class="flex items-center gap-2 mt-1">
                <button type="button" class="px-3 py-2 rounded-md border" aria-expanded="false" aria-controls="kerfHelp">?</button>
                <p id="kerfHelp" class="text-sm text-gray-600">Material lost per cut. For safety, subtract kerf once per segment edge.</p>
              </div>
              <p id="kerfErr" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
            </div>
          </div>

          <div class="mt-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4" aria-live="polite" id="wood-results">
            <div class="result-card"><h4>Central angle per segment</h4><p id="segAngle">—</p></div>
            <div class="result-card"><h4>Miter angle (saw setting)</h4><p id="miterAngle">—</p></div>
            <div class="result-card"><h4>Outer chord length</h4><p id="outerChord">—</p></div>
            <div class="result-card"><h4>Inner chord length</h4><p id="innerChord">—</p></div>
            <div class="result-card"><h4>Radial width</h4><p id="radialWidth">—</p></div>
            <div class="result-card"><h4>Approx. outer piece length (kerf-adjusted)</h4><p id="outerPiece">—</p></div>
          </div>
        </div>

        <!-- SMS SEGMENT COUNTER -->
        <div id="panel-sms" class="tab-panel" role="tabpanel" aria-labelledby="tab-sms" data-active="false">
          <h2 class="text-xl font-bold mb-3">SMS segment counter</h2>
          <div>
            <label for="smsText" class="block text-sm font-medium text-gray-800">Message *</label>
            <textarea id="smsText" rows="6" class="mt-1 w-full border rounded-md px-3 py-2" aria-required="true" aria-describedby="smsErr smsHelp">Hello! This is a test message with ~ and € to test GSM-7 extension.</textarea>
            <div class="flex items-center gap-2 mt-1">
              <button type="button" class="px-3 py-2 rounded-md border" aria-expanded="false" aria-controls="smsHelp">?</button>
              <p id="smsHelp" class="text-sm text-gray-600">GSM-7 single: 160; concatenated: 153. UCS-2 single: 70; concatenated: 67. Some characters (e.g., ^ { } \\ [ ] ~ | €) count as two in GSM-7.</p>
            </div>
            <p id="smsErr" class="text-sm text-red-600 mt-1" aria-live="polite"></p>
          </div>

          <div class="mt-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4" aria-live="polite">
            <div class="result-card"><h4>Encoding</h4><p id="smsEncoding">—</p></div>
            <div class="result-card"><h4>Characters counted</h4><p id="smsChars">—</p></div>
            <div class="result-card"><h4>Segments</h4><p id="smsSegments">—</p></div>
            <div class="result-card"><h4>Per-segment limit</h4><p id="smsLimit">—</p></div>
            <div class="result-card"><h4>Chars in last segment</h4><p id="smsLast">—</p></div>
          </div>
        </div>
      </section>

      <!-- Results wrapper for CLS prevention -->
      <div id="results-wrapper" class="mt-8"></div>
    </section>

    <!-- Authoritative Content -->
    <article class="bg-white p-6 rounded-xl shadow-sm mt-8 prose">
      <h2>Authoritative data sources & methodology</h2>
      <ul>
        <li><strong>Circle segment formulas</strong>: Wolfram MathWorld – “Circular Segment”; NIST Digital Library of Mathematical Functions. All core relations (area, chord, arc, centroid) follow these definitions.</li>
        <li><strong>Line segment</strong>: Standard Euclidean geometry.</li>
        <li><strong>Woodturning segments</strong>: Geometric derivation from circle chords and central angles; industry practice for miter angle \(=180^\circ/N\).</li>
        <li><strong>SMS segmentation</strong>: <em>3GPP TS 23.038</em> (GSM 7-bit default alphabet & extension) and UCS-2 concatenation rules.</li>
      </ul>
      <p><em>All calculations strictly follow the formulas and data provided by these sources.</em></p>

      <h2>The formulas explained</h2>
      <div class="formula-box">
        <h3>Circle segment (by height \(h\))</h3>
        <p>\[
          A = r^2\arccos\!\left(\frac{r-h}{r}\right) - (r-h)\sqrt{2rh - h^2}
        \]</p>
        <p>\[
          c = 2\sqrt{h(2r - h)}, \quad \theta = 2\arccos\!\left(\frac{r-h}{r}\right), \quad s = r\theta,\quad
          P = s + c
        \]</p>
        <p>Centroid distance from circle center (for \(\theta \in (0,2\pi)\)):\[
          \bar{y} = \frac{4r\sin^3(\theta/2)}{3\left(\theta - \sin\theta\right)}
        \]</p>

        <h3>Circle segment (by central angle \(\theta\))</h3>
        <p>\[
          A = \frac{r^2}{2}\left(\theta - \sin\theta\right), \quad
          c = 2r\sin\left(\frac{\theta}{2}\right),\quad s = r\theta,\quad P = s + c
        \]</p>

        <h3>Line segment</h3>
        <p>\[
          d=\sqrt{(x_2-x_1)^2+(y_2-y_1)^2},\quad
          M=\left(\frac{x_1+x_2}{2},\frac{y_1+y_2}{2}\right),\quad
          m=\frac{y_2-y_1}{x_2-x_1}
        \]</p>

        <h3>Woodturning ring segment</h3>
        <p>\[
          \alpha=\frac{360^\circ}{N},\quad \text{miter}=\frac{180^\circ}{N},\quad
          c_\text{out}=2R_\text{out}\sin\!\left(\frac{\pi}{N}\right),\quad
          c_\text{in}=2R_\text{in}\sin\!\left(\frac{\pi}{N}\right)
        \]</p>
        <p>\[
          R_\text{out}=\frac{D_\text{out}}{2},\quad R_\text{in}=\frac{D_\text{in}}{2},\quad
          w_r=R_\text{out}-R_\text{in}
        \]</p>

        <h3>SMS segments</h3>
        <p>GSM-7 single-segment limit \(=160\) chars (153 concatenated). UCS-2 single-segment \(=70\) (67 concatenated). Certain GSM extension characters (e.g., ^ { } \\ [ ] ~ | €) count as two.</p>
      </div>

      <h2>Glossary of variables</h2>
      <ul>
        <li><strong>r</strong>: circle radius; <strong>h</strong>: segment height; <strong>θ</strong>: central angle; <strong>c</strong>: chord length; <strong>s</strong>: arc length; <strong>P</strong>: segment perimeter.</li>
        <li><strong>(x₁,y₁),(x₂,y₂)</strong>: endpoints of line segment; <strong>d</strong>: distance; <strong>M</strong>: midpoint; <strong>m</strong>: slope.</li>
        <li><strong>N</strong>: number of segments; <strong>D<sub>out</sub>, D<sub>in</sub></strong>: outer/inner diameters; <strong>w<sub>r</sub></strong>: radial ring width; <strong>kerf</strong>: material lost per saw cut.</li>
        <li><strong>GSM-7</strong>: 7-bit default alphabet; <strong>UCS-2</strong>: 16-bit Unicode encoding; <strong>segments</strong>: message parts used for delivery.</li>
      </ul>

      <h2>How it works: a step-by-step example</h2>
      <h3>Circle segment (height mode)</h3>
      <p>Given \(r=10\), \(h=3\): compute \(\theta=2\arccos((r-h)/r)\), then \(A = r^2\arccos((r-h)/r) - (r-h)\sqrt{2rh-h^2}\), \(c=2\sqrt{h(2r-h)}\), \(s=r\theta\), \(P=s+c\), and centroid \(\bar{y}\) as above. The calculator performs these steps and reports each result instantly.</p>

      <h2>Frequently asked questions</h2>
      <details><summary>Can I enter degrees for the angle?</summary><p>Yes—set angle units to degrees and the calculator converts to radians internally.</p></details>
      <details><summary>What happens if h exceeds 2r?</summary><p>That is invalid; the tool flags it with an inline error so you can correct the input.</p></details>
      <details><summary>Are woodturning chord lengths kerf-adjusted?</summary><p>The “outer piece length” accounts for kerf on both sides; chord lengths themselves are pure geometry (no kerf).</p></details>
      <details><summary>Which characters force UCS-2?</summary><p>Any character outside GSM-7 and its extension set (e.g., most emojis, many non-Latin scripts). The tool auto-detects.</p></details>
      <details><summary>Is slope defined for vertical lines?</summary><p>No; the tool reports “undefined” for vertical lines (x₂ = x₁), while distance and midpoint still compute.</p></details>

      <div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700">
        <p><strong>Tool developed by Ugo Candido.</strong> Content verified by CalcDomain Editorial Board.<br/>
        Last accuracy review: <time datetime="2025-10-25">October 25, 2025</time></p>
      </div>
    </article>
  </main>

  <footer class="bg-white border-t">
    <div class="container mx-auto px-4 py-8 text-center text-gray-600 text-sm">
      <p>&copy; 2025 CalcDomain. All rights reserved.</p>
      <div class="mt-3 space-x-4">
        <a href="about.html" class="hover:text-blue-600">About</a>
        <a href="contact.html" class="hover:text-blue-600">Contact</a>
        <a href="privacy.html" class="hover:text-blue-600">Privacy</a>
        <a href="terms.html" class="hover:text-blue-600">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Calculator logic (defer by default since placed before </body>) -->
  <script>
  // Utility formatters
  const nf = new Intl.NumberFormat(undefined, { maximumFractionDigits: 6 });
  const n2 = new Intl.NumberFormat(undefined, { maximumFractionDigits: 2 });
  function fmt(v) { return (isFinite(v) ? nf.format(v) : "—"); }
  function degToRad(d){ return d * Math.PI / 180; }
  function radToDeg(r){ return r * 180 / Math.PI; }

  // Tabs: a11y-compliant
  (function initTabs(){
    const tabs = Array.from(document.querySelectorAll('.tab-btn'));
    const panels = {
      'tab-circle': document.getElementById('panel-circle'),
      'tab-line': document.getElementById('panel-line'),
      'tab-wood': document.getElementById('panel-wood'),
      'tab-sms': document.getElementById('panel-sms'),
    };
    tabs.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        tabs.forEach(b=>b.setAttribute('aria-selected','false'));
        Object.values(panels).forEach(p=>p.setAttribute('data-active','false'));
        btn.setAttribute('aria-selected','true');
        panels[btn.id].setAttribute('data-active','true');
      });
      btn.addEventListener('keydown', (e)=>{
        const idx = tabs.indexOf(btn);
        if (['ArrowRight','ArrowLeft','Home','End'].includes(e.key)) {
          e.preventDefault();
          let target = idx;
          if (e.key==='ArrowRight') target = (idx+1)%tabs.length;
          if (e.key==='ArrowLeft')  target = (idx-1+tabs.length)%tabs.length;
          if (e.key==='Home') target = 0;
          if (e.key==='End')  target = tabs.length-1;
          tabs[target].focus();
        }
      });
    });
  })();

  // Tooltip toggles
  document.querySelectorAll('button[aria-controls]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const id = btn.getAttribute('aria-controls');
      const el = document.getElementById(id);
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      if (!el) return;
      if (el.hasAttribute('hidden')) el.removeAttribute('hidden'); else el.setAttribute('hidden','');
    });
  });

  // ===== Circle Segment =====
  const circleEls = {
    mode: document.getElementById('circleMode'),
    r: document.getElementById('circleRadius'),
    h: document.getElementById('circleHeight'),
    angle: document.getElementById('circleAngle'),
    units: document.getElementById('angleUnits'),
    rows: {
      height: document.getElementById('heightRow'),
      angle: document.getElementById('angleRow')
    },
    out: {
      area: document.getElementById('circleArea'),
      arc: document.getElementById('circleArc'),
      chord: document.getElementById('circleChord'),
      perim: document.getElementById('circlePerimeter'),
      centroid: document.getElementById('circleCentroid'),
      thetaOut: document.getElementById('circleAngleOut')
    },
    errs: {
      r: document.getElementById('circleRadiusErr'),
      h: document.getElementById('circleHeightErr'),
      angle: document.getElementById('circleAngleErr')
    }
  };

  function validateCircle() {
    let ok = true;
    const r = parseFloat(circleEls.r.value);
    circleEls.errs.r.textContent = '';
    if (!(r > 0)) { circleEls.errs.r.textContent = 'Please enter a radius greater than 0.'; ok = false; }
    if (circleEls.mode.value === 'height') {
      const h = parseFloat(circleEls.h.value);
      circleEls.errs.h.textContent = '';
      if (!(h >= 0)) { circleEls.errs.h.textContent = 'Height must be 0 or greater.'; ok = false; }
      if (ok && h > 2*r) { circleEls.errs.h.textContent = 'Height cannot exceed 2r for a valid segment.'; ok = false; }
    } else {
      const ang = parseFloat(circleEls.angle.value);
      circleEls.errs.angle.textContent = '';
      if (!(ang > 0)) { circleEls.errs.angle.textContent = 'Angle must be greater than 0.'; ok = false; }
    }
    return ok;
  }

  function circleCompute(){
    if (!validateCircle()) { circleWriteOutputs(NaN,NaN,NaN,NaN,NaN,NaN); return; }
    const r = parseFloat(circleEls.r.value);
    let theta;
    if (circleEls.mode.value === 'height') {
      const h = parseFloat(circleEls.h.value);
      // Guard: h in [0, 2r]
      const ratio = (r - h)/r;
      // Clamp for numeric stability
      const clamped = Math.max(-1, Math.min(1, ratio));
      theta = 2 * Math.acos(clamped);
    } else {
      const raw = parseFloat(circleEls.angle.value);
      theta = (circleEls.units.value === 'deg') ? degToRad(raw) : raw;
    }
    // Core computations
    const area = 0.5 * r*r * (theta - Math.sin(theta));
    const chord = 2 * r * Math.sin(theta/2);
    const arc   = r * theta;
    const perim = chord + arc;
    const centroid = (theta !== 0 && (theta - Math.sin(theta)) !== 0)
      ? (4*r*Math.pow(Math.sin(theta/2),3)) / (3*(theta - Math.sin(theta))) : NaN;

    circleWriteOutputs(area, arc, chord, perim, centroid, theta);
  }

  function circleWriteOutputs(area, arc, chord, perim, centroid, theta){
    circleEls.out.area.textContent = fmt(area);
    circleEls.out.arc.textContent = fmt(arc);
    circleEls.out.chord.textContent = fmt(chord);
    circleEls.out.perim.textContent = fmt(perim);
    circleEls.out.centroid.textContent = fmt(centroid);
    circleEls.out.thetaOut.textContent = isFinite(theta) ? nf.format(theta) : '—';
  }

  // Mode switch UI
  circleEls.mode.addEventListener('input', ()=>{
    const m = circleEls.mode.value;
    if (m === 'height') {
      circleEls.rows.height.classList.remove('hidden');
      circleEls.rows.angle.classList.add('hidden');
    } else {
      circleEls.rows.height.classList.add('hidden');
      circleEls.rows.angle.classList.remove('hidden');
    }
    circleCompute();
  });

  // Inline validation on blur
  ['r','h','angle'].forEach(k=>{
    if (circleEls[k]) circleEls[k].addEventListener('blur', validateCircle);
    if (circleEls[k]) circleEls[k].addEventListener('input', circleCompute);
  });
  circleEls.units.addEventListener('input', circleCompute);

  // ===== Line Segment =====
  const lineEls = {
    x1: document.getElementById('x1'),
    y1: document.getElementById('y1'),
    x2: document.getElementById('x2'),
    y2: document.getElementById('y2'),
    out: {
      d: document.getElementById('lineLength'),
      m: document.getElementById('lineMidpoint'),
      s: document.getElementById('lineSlope')
    }
  };

  function lineCompute(){
    const x1 = parseFloat(lineEls.x1.value), y1 = parseFloat(lineEls.y1.value);
    const x2 = parseFloat(lineEls.x2.value), y2 = parseFloat(lineEls.y2.value);
    const dx = x2 - x1, dy = y2 - y1;
    const d = Math.hypot(dx, dy);
    const mx = (x1 + x2)/2, my = (y1 + y2)/2;
    const slope = (dx === 0) ? 'undefined' : nf.format(dy/dx);
    lineEls.out.d.textContent = fmt(d);
    lineEls.out.m.textContent = `(${fmt(mx)}, ${fmt(my)})`;
    lineEls.out.s.textContent = (slope === 'undefined') ? 'undefined' : slope;
  }

  [lineEls.x1, lineEls.y1, lineEls.x2, lineEls.y2].forEach(el=>{
    el.addEventListener('input', lineCompute);
    el.addEventListener('blur', lineCompute);
  });

  // ===== Woodturning Ring =====
  const woodEls = {
    N: document.getElementById('segmentsN'),
    Dout: document.getElementById('outerD'),
    Din: document.getElementById('innerD'),
    kerf: document.getElementById('kerf'),
    errs: {
      N: document.getElementById('segmentsNErr'),
      Dout: document.getElementById('outerDErr'),
      Din: document.getElementById('innerDErr'),
      kerf: document.getElementById('kerfErr')
    },
    out: {
      segAngle: document.getElementById('segAngle'),
      miter: document.getElementById('miterAngle'),
      chordOut: document.getElementById('outerChord'),
      chordIn: document.getElementById('innerChord'),
      width: document.getElementById('radialWidth'),
      outerPiece: document.getElementById('outerPiece')
    }
  };

  function validateWood(){
    let ok = true;
    woodEls.errs.N.textContent = woodEls.errs.Dout.textContent = woodEls.errs.Din.textContent = woodEls.errs.kerf.textContent = '';
    const N = parseInt(woodEls.N.value,10);
    const Dout = parseFloat(woodEls.Dout.value);
    const Din = parseFloat(woodEls.Din.value);
    const kerf = parseFloat(woodEls.kerf.value || '0');
    if (!(N >= 3)) { woodEls.errs.N.textContent = 'N must be an integer ≥ 3.'; ok = false; }
    if (!(Dout > 0)) { woodEls.errs.Dout.textContent = 'Outer diameter must be > 0.'; ok = false; }
    if (!(Din >= 0)) { woodEls.errs.Din.textContent = 'Inner diameter must be ≥ 0.'; ok = false; }
    if (ok && Din >= Dout) { woodEls.errs.Din.textContent = 'Inner diameter must be less than outer diameter.'; ok = false; }
    if (!(kerf >= 0)) { woodEls.errs.kerf.textContent = 'Kerf cannot be negative.'; ok = false; }
    return ok;
  }

  function woodCompute(){
    if (!validateWood()) {
      woodEls.out.segAngle.textContent = woodEls.out.miter.textContent = woodEls.out.chordOut.textContent =
      woodEls.out.chordIn.textContent = woodEls.out.width.textContent = woodEls.out.outerPiece.textContent = '—';
      return;
    }
    const N = parseInt(woodEls.N.value,10);
    const Dout = parseFloat(woodEls.Dout.value);
    const Din = parseFloat(woodEls.Din.value);
    const kerf = parseFloat(woodEls.kerf.value || '0');
    const Rout = Dout/2, Rin = Din/2;
    const angleDeg = 360 / N;
    const miterDeg = 180 / N;
    const chordOut = 2 * Rout * Math.sin(Math.PI / N);
    const chordIn  = 2 * Rin  * Math.sin(Math.PI / N);
    const radialW  = Rout - Rin;
    // Approx outer piece length adjusted for two cuts per piece
    const outerPiece = Math.max(0, chordOut - 2*kerf);

    woodEls.out.segAngle.textContent = `${n2.format(angleDeg)}°`;
    woodEls.out.miter.textContent    = `${n2.format(miterDeg)}°`;
    woodEls.out.chordOut.textContent = fmt(chordOut);
    woodEls.out.chordIn.textContent  = fmt(chordIn);
    woodEls.out.width.textContent    = fmt(radialW);
    woodEls.out.outerPiece.textContent = fmt(outerPiece);
  }

  [woodEls.N, woodEls.Dout, woodEls.Din, woodEls.kerf].forEach(el=>{
    el.addEventListener('blur', validateWood);
    el.addEventListener('input', woodCompute);
  });

  // ===== SMS Segment Counter =====
  // GSM-7 default alphabet and extension set (common subset)
  const GSM7_BASIC =
    "@£$¥èéùìòÇ\nØø\rÅåΔ_ΦΓΛΩΠΨΣΘΞ \u0021\"\u0023¤%&'()*+,-./0123456789:;<=>?¡ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÑÜ§¿abcdefghijklmnopqrstuvwxyzäöñüà";
  const GSM7_EXT = "^{}\\[~]|€"; // counted as two with escape

  function isGSM7Char(ch){
    return GSM7_BASIC.includes(ch) || GSM7_EXT.includes(ch);
  }

  function smsAnalyze(text){
    // Detect encoding
    let allGSM = true;
    for (const ch of text) { if (!isGSM7Char(ch)) { allGSM = false; break; } }

    const encoding = allGSM ? 'GSM-7' : 'UCS-2';

    if (encoding === 'GSM-7') {
      let count = 0;
      for (const ch of text) {
        count += GSM7_EXT.includes(ch) ? 2 : 1;
      }
      const single = 160, concat = 153;
      const perSeg = (count <= single) ? single : concat;
      const segments = Math.ceil(count / perSeg) || 1;
      const usedInLast = count - (perSeg * (segments - 1));
      return { encoding, chars: count, segments, perSeg, lastUsed: usedInLast };
    } else {
      const count = Array.from(text).length; // UCS-2 units
      const single = 70, concat = 67;
      const perSeg = (count <= single) ? single : concat;
      const segments = Math.ceil(count / perSeg) || 1;
      const usedInLast = count - (perSeg * (segments - 1));
      return { encoding, chars: count, segments, perSeg, lastUsed: usedInLast };
    }
  }

  const smsEls = {
    ta: document.getElementById('smsText'),
    out: {
      enc: document.getElementById('smsEncoding'),
      chars: document.getElementById('smsChars'),
      segs: document.getElementById('smsSegments'),
      limit: document.getElementById('smsLimit'),
      last: document.getElementById('smsLast')
    }
  };

  function smsCompute(){
    const t = smsEls.ta.value || "";
    const r = smsAnalyze(t);
    smsEls.out.enc.textContent = r.encoding;
    smsEls.out.chars.textContent = n2.format(r.chars);
    smsEls.out.segs.textContent = n2.format(r.segments);
    smsEls.out.limit.textContent = n2.format(r.perSeg);
    smsEls.out.last.textContent = n2.format(r.lastUsed);
  }

  smsEls.ta.addEventListener('input', smsCompute);
  smsEls.ta.addEventListener('blur', smsCompute);

  // Initial computes
  circleCompute();
  lineCompute();
  woodCompute();
  smsCompute();

  // Recompute circle when switching mode
  document.getElementById('circleMode').addEventListener('change', circleCompute);

  // Show/hide angle/height rows on load
  (function syncCircleRows(){
    const m = circleEls.mode.value;
    if (m === 'height') {
      circleEls.rows.height.classList.remove('hidden');
      circleEls.rows.angle.classList.add('hidden');
    } else {
      circleEls.rows.height.classList.add('hidden');
      circleEls.rows.angle.classList.remove('hidden');
    }
  })();
  </script>
</body>
</html>

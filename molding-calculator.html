<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Molding Calculator - Estimate Trim, Baseboard &amp; Crown</title>
<meta name="description" content="Calculate the total linear feet, number of pieces, and cost for your molding, baseboard, or crown molding project. Includes waste factor and unit conversion.">
<link rel="canonical" href="https://calcdomain.com/molding-calculator.html"/>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.prose { max-width: 65ch; }
.prose h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose p { margin-bottom: 1rem; line-height: 1.6; }
.prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.prose li { margin-bottom: 0.5rem; }
.formula-box {
background:#f3f4f6; border:1px solid #d1d5db; border-radius:8px; padding:1rem;
overflow-x:auto; font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
font-size: 0.9rem;
}
/* Stile per la formula LaTeX */
.latex-formula {
font-size: 1.1rem;
overflow-x: auto;
padding: 1rem 0;
}
details > summary { cursor: pointer; font-weight: 600; padding: 0.5rem 0; }
details[open] > summary { margin-bottom: 0.5rem; }
.result-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; text-align: center; }
.result-card h4 { font-size: 0.95rem; color: #6b7280; margin-bottom: 0.25rem; text-transform: uppercase; font-weight: 500; }
.result-card p { font-size: 1.75rem; font-weight: 700; color: #2563eb; }
/* Stili di focus personalizzati per A11y */
:focus-visible {
outline: 3px solid #2563eb;
outline-offset: 2px;
border-radius: 4px;
}
/* Stili per radio button accessibili */
.radio-group label {
display: inline-flex;
align-items: center;
padding: 0.5rem 1rem;
border: 2px solid #d1d5db;
border-radius: 6px;
cursor: pointer;
}
.radio-group input[type="radio"]:checked + label {
border-color: #2563eb;
background-color: #eff6ff;
color: #1e40af;
font-weight: 600;
}
.radio-group input[type="radio"] {
position: absolute;
opacity: 0;
width: 0;
height: 0;
}
@media print {
body * { visibility: hidden; }
#print-section, #print-section * { visibility: visible; }
#print-section { position: absolute; left: 0; top: 0; width: 100%; }
}
</style>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "WebPage",
"name": "Molding Calculator",
"description": "Calculate the total linear feet, number of pieces, and cost for your molding, baseboard, or crown molding project. Includes waste factor and unit conversion.",
"url": "https://calcdomain.com/molding-calculator.html",
"inLanguage": "en",
"author": { "@type": "Person", "name": "Ugo Candido" },
"publisher": { "@type": "Organization", "name": "CalcDomain" }
}
</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "BreadcrumbList",
"itemListElement": [
{ "@type": "ListItem", "position": 1, "name": "Home", "item": "https://calcdomain.com/" },
{ "@type": "ListItem", "position": 2, "name": "Construction", "item": "https://calcdomain.com/construction.html" },
{ "@type": "ListItem", "position": 3, "name": "Materials Estimation", "item": "https://calcdomain.com/subcategories/construction-materials-estimation.html" },
{ "@type": "ListItem", "position": 4, "name": "Molding Calculator", "item": "https://calcdomain.com/molding-calculator.html" }
]
}
</script>
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "HowTo",
"name": "How to Calculate Molding Materials",
"description": "A step-by-step guide to estimating materials for your molding project.",
"step": [
{"@type": "HowToStep", "name": "Select Project Type", "text": "Choose whether you are calculating for a room perimeter (baseboard, crown) or for wall panels (picture frame molding)."},
{"@type": "HowToStep", "name": "Enter Dimensions", "text": "Input the dimensions for your room or panels. Select your preferred unit of measurement (Imperial or Metric)."},
{"@type": "HowToStep", "name": "Add Waste Factor", "text": "Enter a waste factor percentage (10-15% is standard) to account for cuts and errors."},
{"@type": "HowToStep", "name": "Input Material Details", "text": "Specify the length of the molding pieces you plan to buy and the cost per foot/meter."},
{"@type": "HowToStep", "name": "Review Results", "text": "The calculator provides the total linear footage (or meters) needed, the total number of pieces to buy, and the estimated cost."}
]
}
</script>
<script src="search.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header class="bg-white shadow-sm">
<nav class="container mx-auto px-4 lg:px-6 py-4">
<div class="flex justify-between items-center">
<a href="index.html" class="text-2xl font-bold text-blue-600">CalcDomain</a>

<div class="w-full max-w-md hidden md:block mx-8">
<div class="relative">
<input type="search" id="search-input" placeholder="Search for a calculator..."
class="w-full py-2 px-4 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
autocomplete="off">
<svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
</svg>
<div id="search-results" class="absolute top-full left-0 right-0 hidden bg-white border border-gray-200 rounded-lg shadow-lg mt-2 max-h-96 overflow-y-auto z-50"></div>
</div>
</div>

<div class="hidden md:flex items-center space-x-6 text-sm">
<a href="search.html" class="text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="text-gray-700 hover:text-blue-600">Categories</a>
</div>

<button id="mobile-menu-toggle" class="md:hidden p-2" aria-label="Open menu">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>
</div>

<div id="mobile-menu" class="md:hidden mt-4 hidden">
<div class="space-y-2">
<a href="search.html" class="block py-2 text-gray-700 hover:text-blue-600">Advanced Search</a>
<a href="index.html#categories" class="block py-2 text-gray-700 hover:text-blue-600">Categories</a>
</div>
</div>
</nav>
</header>

<main class="container mx-auto px-4 lg:px-6 py-10">
<div class="flex flex-col lg:flex-row gap-8">

<section class="w-full lg:w-2/3">
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
<a href="index.html" class="hover:text-blue-600">Home</a> &raquo;
<a href="construction.html" class="hover:text-blue-600">Construction</a> &raquo;
<a href="subcategories/construction-materials-estimation.html" class="hover:text-blue-600">Materials Estimation</a> &raquo;
<span class="text-gray-900">Molding Calculator</span>
</nav>

<div id="print-section" class="bg-white p-6 rounded-lg shadow-md">
<h1 class="text-3xl font-extrabold text-gray-900 mb-2">Molding Calculator</h1>
<p class="text-gray-600 mb-6">Easily estimate the materials needed for your molding project. This calculator helps you determine the total linear feet and number of pieces for baseboards, crown molding, or wall trim panels, including a crucial waste factor.</p>

<form id="calculator-ui" class="space-y-6" onsubmit="return false;">
<fieldset>
<legend class="block text-sm font-medium text-gray-700 mb-2">Project Type</legend>
<div class="flex gap-4 radio-group">
<input type="radio" id="calcTypePerimeter" name="calcType" value="perimeter" checked>
<label for="calcTypePerimeter">Room Perimeter</label>
<input type="radio" id="calcTypePanels" name="calcType" value="panels">
<label for="calcTypePanels">Wall Panels</label>
</div>
</fieldset>

<fieldset>
<legend class="block text-sm font-medium text-gray-700 mb-2">Units</legend>
<div class="flex gap-4 radio-group">
<input type="radio" id="unitImperial" name="unitSystem" value="imperial" checked>
<label for="unitImperial">Imperial (Feet/Inches)</label>
<input type="radio" id="unitMetric" name="unitSystem" value="metric">
<label for="unitMetric">Metric (Meters/CM)</label>
</div>
</fieldset>

<div id="perimeterInputs" class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<label for="roomWidth" class="block text-sm font-medium text-gray-700">Room Width (<span class="unit-label-ft">ft</span>)</label>
<input type="number" id="roomWidth" value="12" step="0.1" min="0" aria-required="true"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
<div>
<label for="roomLength" class="block text-sm font-medium text-gray-700">Room Length (<span class="unit-label-ft">ft</span>)</label>
<input type="number" id="roomLength" value="14" step="0.1" min="0" aria-required="true"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
</div>

<div id="panelInputs" class="hidden grid grid-cols-1 md:grid-cols-3 gap-6">
<div>
<label for="numPanels" class="block text-sm font-medium text-gray-700">Number of Panels</label>
<input type="number" id="numPanels" value="4" step="1" min="1" aria-required="true"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
<div>
<label for="panelWidth" class="block text-sm font-medium text-gray-700">Panel Width (<span class="unit-label-in">in</span>)</label>
<input type="number" id="panelWidth" value="24" step="0.1" min="0" aria-required="true"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
<div>
<label for="panelHeight" class="block text-sm font-medium text-gray-700">Panel Height (<span class="unit-label-in">in</span>)</label>
<input type="number" id="panelHeight" value="36" step="0.1" min="0" aria-required="true"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
</div>

<div class="grid grid-cols-1 md:grid-cols-3 gap-6 border-t pt-6">
<div>
<label for="wasteFactor" class="block text-sm font-medium text-gray-700">Waste Factor (%) <span class="text-gray-500" aria-hidden="true">*</span></label>
<input type="number" id="wasteFactor" value="15" step="1" min="0" aria-required="true" aria-describedby="waste-tooltip"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
<p id="waste-tooltip" class="text-xs text-gray-500 mt-1">10-15% is standard for cuts and errors.</p>
</div>
<div>
<label for="pieceLength" class="block text-sm font-medium text-gray-700">Molding Piece Length (<span class="unit-label-ft">ft</span>)</label>
<input type="number" id="pieceLength" value="16" step="1" min="1" aria-required="true"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
<div>
<label for="costPerUnit" class="block text-sm font-medium text-gray-700">Cost per <span class="unit-label-ft">ft</span> ($)</label>
<input type="number" id="costPerUnit" value="1.50" step="0.01" min="0"
class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
</div>
</div>
</form>

<div id="results" class="mt-8 bg-blue-50 border border-blue-100 rounded-lg p-6">
<div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
<div class="result-card">
<h4>Total Needed (with Waste)</h4>
<p id="totalLinearFeet">0.00 <span class="unit-label-ft">ft</span></p>
</div>
<div class="result-card">
<h4>Total Pieces to Buy</h4>
<p id="totalPieces">0</p>
</div>
<div class="result-card">
<h4>Estimated Total Cost</h4>
<p id="totalCost">$0.00</p>
</div>
</div>
</div>
</div>

<article class="bg-white p-6 rounded-lg shadow-md mt-8 prose">
<h2>Authoritative Source & Methodology</h2>
<p>Calculations are based on standard architectural and construction estimation principles as outlined by the <strong>National Association of Home Builders (NAHB)</strong> and common industry best practices for material takeoffs.</p>
<p>All calculations incorporate a user-defined waste factor. This is a crucial percentage added to the base measurement to account for miter cuts, corners, potential errors, and material defects. Failing to account for waste is the most common estimation error.</p>

<h2>The Formulas Explained</h2>
<p>The calculator first determines the base linear measurement, then applies waste, and finally calculates the number of pieces required.</p>

<h3>1. Base Linear Measurement</h3>
<p>For a <strong>Room Perimeter</strong>:</p>
<div class="latex-formula">$$Total\ Perimeter = 2 \times (Room\ Width + Room\ Length)$$</div>
<p>For <strong>Wall Panels</strong>:</p>
<div class="latex-formula">$$Total\ Panel\ Trim = Number\ of\ Panels \times [2 \times (Panel\ Width + Panel\ Height)]$$</div>

<h3>2. Waste and Total Footage</h3>
<p>The waste amount is calculated and added to the base measurement.</p>
<div class="latex-formula">$$Waste\ Amount = Base\ Measurement \times (\frac{Waste\ Factor\ \%}{100})$$</div>
<div class="latex-formula">$$Total\ Linear\ Feet\ Needed = Base\ Measurement + Waste\ Amount$$</div>

<h3>3. Total Pieces to Buy</h3>
<p>This is the most critical formula. We divide the total linear feet needed by the length of a single piece and then use the <strong>Ceiling function</strong> (rounding up to the next whole number) to ensure you have enough material.</p>
<div class="latex-formula">$$Total\ Pieces = \lceil \frac{Total\ Linear\ Feet\ Needed}{Length\ per\ Piece} \rceil$$</div>
<p><strong>Example:</strong> If you need 59.8 ft and your pieces are 16 ft long, $59.8 \div 16 = 3.73$. You cannot buy 3.73 pieces, so you must round up (apply the ceiling function) to <strong>4 pieces</strong>.</p>

<h2>Glossary of Variables</h2>
<ul>
<li><strong>Room Width/Length:</strong> The dimensions of the room for perimeter calculations.</li>
<li><strong>Number of Panels:</strong> The total count of decorative boxes or panels (e.g., for wainscoting).</li>
<li><strong>Panel Width/Height:</strong> The dimensions of a single wall panel.</li>
<li><strong>Waste Factor (%):</strong> A critical buffer (e.g., 10-15%) added to your total measurement to account for cuts, angles, and mistakes.</li>
<li><strong>Molding Piece Length:</strong> The standard retail length of the molding you are buying (e.g., 8 ft, 12 ft, 16 ft).</li>
<li><strong>Total Needed (with Waste):</strong> The final calculated length you will be cutting from.</li>
<li><strong>Total Pieces:</strong> The actual number of molding sticks you must purchase from the store.</li>
</ul>

<h2>How It Works: A Step-by-Step Example</h2>
<p>Let's calculate the baseboard for a standard room.</p>
<ul>
<li><strong>Project Type:</strong> Room Perimeter</li>
<li><strong>Room Width:</strong> 12 ft</li>
<li><strong>Room Length:</strong> 14 ft</li>
<li><strong>Waste Factor:</strong> 15%</li>
<li><strong>Molding Piece Length:</strong> 16 ft</li>
</ul>
<ol>
<li><strong>Calculate Base Perimeter:</strong> $2 \times (12\ ft + 14\ ft) = 52\ ft$</li>
<li><strong>Calculate Waste:</strong> $52\ ft \times 0.15 = 7.8\ ft$</li>
<li><strong>Calculate Total Feet Needed:</strong> $52\ ft + 7.8\ ft = 59.8\ ft$</li>
<li><strong>Calculate Pieces to Buy:</strong> $\lceil 59.8\ ft \div 16\ ft \rceil = \lceil 3.73 \rceil = 4\ pieces$</li>
</ol>
<p>You would need to purchase <strong>4 pieces</strong> of 16 ft molding.</p>

<h2>Frequently Asked Questions (FAQ)</h2>
<details>
<summary>What is a typical waste factor for molding?</summary>
<p>For simple rooms with few corners, <strong>10%</strong> is often sufficient. For rooms with many corners, complex angles (like crown molding), or if you are a beginner, a <strong>15% to 20%</strong> waste factor is safer.</p>
</details>
<details>
<summary>Does this calculator work for crown molding?</summary>
<p>Yes. For <strong>material estimation</strong>, crown molding uses the "Room Perimeter" calculation, just like baseboards. This calculator determines *how much* to buy, but not the complex *angles* to cut, which requires a miter saw calculator.</p>
</details>
<details>
<summary>Should I subtract doors and windows from my perimeter?</summary>
<p>For baseboards, you can subtract the width of doorways (but not windows, as baseboards run under them). For crown molding, you don't subtract anything. However, most professionals recommend <strong>not</strong> subtracting doorways, as the "extra" material is absorbed into the waste factor and provides a safe buffer.</p>
</details>
<details>
<summary>How does the "Wall Panels" calculation work?</summary>
<p>It calculates the perimeter of a single panel ($2 \times (W+H)$) and multiplies it by the total number of panels you intend to build. This is common for picture frame molding or wainscoting.</p>
</details>
<details>
<summary>What's the difference between Linear Feet and Board Feet?</summary>
<p>This calculator uses <strong>Linear Feet</strong>, which is a simple measure of length. Board Feet is a measure of *volume* (Length x Width x Thickness) typically used for purchasing rough lumber, not trim.</p>
</details>

<div class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600">
<p><strong>Tool developed by Ugo Candido.</strong> Construction content verified by the CalcDomain Editorial Board.<br>
Last accuracy review: <time datetime="2025-10-31">October 31, 2025</time></p>
</div>
</article>
</section>

<aside class="w-full lg:w-1/3">
<div class="sticky top-24 space-y-6">
<div class="bg-gray-200 h-72 rounded-lg flex items-center justify-center text-gray-500">
Ad Placement (300×600)
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-3">Why use this calculator</h3>
<ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
<li>Handles both perimeter and panel projects.</li>
<li>Switch between Imperial and Metric units instantly.</li>
<li>Correctly calculates pieces to buy by rounding up.</li>
<li>Clearly explains the waste factor to prevent under-buying.</li>
</ul>
</div>
<div class="bg-white p-6 rounded-lg shadow-md">
<h3 class="font-bold text-lg mb-4">Related Construction Tools</h3>
<ul class="space-y-3 text-sm">
<li><a href="paint-calculator.html" class="text-blue-600 hover:underline">Paint Calculator</a></li>
<li><a href="drywall-calculator.html" class="text-blue-600 hover:underline">Drywall Calculator</a></li>
<li><a href="flooring-calculator.html" class="text-blue-600 hover:underline">Flooring Calculator</a></li>
<li><a href="concrete-calculator.html" class="text-blue-600 hover:underline">Concrete Calculator</a></li>
</ul>
</div>
</div>
</aside>
</div>
</main>

<footer class="bg-white border-t">
<div class="container mx-auto px-6 py-8 text-center text-gray-600 text-sm">
<p>&copy; 2025 CalcDomain. All Rights Reserved.</p>
<div class="mt-4 space-x-4">
<a href="about.html" class="hover:text-blue-600">About</a>
<a href="contact.html" class="hover:text-blue-600">Contact</a>
<a href="privacy.html" class="hover:text-blue-600">Privacy</a>
<a href="terms.html" class="hover:text-blue-600">Terms</a>
</div>
</div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
// --- Element Cache ---
const elements = {
// Toggles
calcTypePerimeter: document.getElementById('calcTypePerimeter'),
calcTypePanels: document.getElementById('calcTypePanels'),
unitImperial: document.getElementById('unitImperial'),
unitMetric: document.getElementById('unitMetric'),

// Input Containers
perimeterInputs: document.getElementById('perimeterInputs'),
panelInputs: document.getElementById('panelInputs'),

// Perimeter Inputs
roomWidth: document.getElementById('roomWidth'),
roomLength: document.getElementById('roomLength'),

// Panel Inputs
numPanels: document.getElementById('numPanels'),
panelWidth: document.getElementById('panelWidth'),
panelHeight: document.getElementById('panelHeight'),

// Common Inputs
wasteFactor: document.getElementById('wasteFactor'),
pieceLength: document.getElementById('pieceLength'),
costPerUnit: document.getElementById('costPerUnit'),

// Outputs
totalLinearFeet: document.getElementById('totalLinearFeet'),
totalPieces: document.getElementById('totalPieces'),
totalCost: document.getElementById('totalCost'),

// Unit Labels
unitLabelsFt: document.querySelectorAll('.unit-label-ft'),
unitLabelsIn: document.querySelectorAll('.unit-label-in'),
};

// --- Helpers ---
const fmtCurrency = (val) => new Intl.NumberFormat(undefined, { style: 'currency', currency: 'USD' }).format(val || 0);
const CONV = {
FT_TO_M: 0.3048,
M_TO_FT: 3.28084,
IN_TO_FT: 0.083333,
CM_TO_M: 0.01
};

// --- Main Functions ---

/**
* Toggles the visibility of input sections based on project type.
*/
function toggleCalculatorType() {
const isPerimeter = elements.calcTypePerimeter.checked;
elements.perimeterInputs.style.display = isPerimeter ? 'grid' : 'none';
elements.panelInputs.style.display = isPerimeter ? 'none' : 'grid';
}

/**
* Updates all unit labels (e.g., ft, m, in, cm) in the UI.
*/
function updateUnitLabels() {
const isMetric = elements.unitMetric.checked;
elements.unitLabelsFt.forEach(el => { el.textContent = isMetric ? 'm' : 'ft'; });
elements.unitLabelsIn.forEach(el => { el.textContent = isMetric ? 'cm' : 'in'; });
}

/**
* Main calculation function. Reads inputs, computes, and updates outputs.
*/
function calculate() {
// Get state
const isPerimeter = elements.calcTypePerimeter.checked;
const isMetric = elements.unitMetric.checked;

// Get input values
const roomWidth = parseFloat(elements.roomWidth.value) || 0;
const roomLength = parseFloat(elements.roomLength.value) || 0;
const numPanels = parseFloat(elements.numPanels.value) || 0;
const panelWidth = parseFloat(elements.panelWidth.value) || 0;
const panelHeight = parseFloat(elements.panelHeight.value) || 0;
const wasteFactor = parseFloat(elements.wasteFactor.value) || 0;
const pieceLength = parseFloat(elements.pieceLength.value) || 0;
const costPerUnit = parseFloat(elements.costPerUnit.value) || 0;

if (pieceLength <= 0) { // Prevent division by zero
updateOutputs(0, 0, 0, isMetric);
return;
}

// --- Normalize all inputs to a single unit (feet) ---
let roomWidth_ft = roomWidth;
let roomLength_ft = roomLength;
let panelWidth_ft = panelWidth;
let panelHeight_ft = panelHeight;
let pieceLength_ft = pieceLength;

if (isMetric) {
roomWidth_ft = roomWidth * CONV.M_TO_FT;
roomLength_ft = roomLength * CONV.M_TO_FT;
// Metric panel inputs are in cm, convert to m, then to ft
panelWidth_ft = (panelWidth * CONV.CM_TO_M) * CONV.M_TO_FT;
panelHeight_ft = (panelHeight * CONV.CM_TO_M) * CONV.M_TO_FT;
pieceLength_ft = pieceLength * CONV.M_TO_FT;
} else {
// Imperial panel inputs are in inches, convert to ft
panelWidth_ft = panelWidth * CONV.IN_TO_FT;
panelHeight_ft = panelHeight * CONV.IN_TO_FT;
}

// --- Calculate Base Linear Feet ---
let baseLinearFeet = 0;
if (isPerimeter) {
baseLinearFeet = 2 * (roomWidth_ft + roomLength_ft);
} else {
// It's a panel project
baseLinearFeet = numPanels * 2 * (panelWidth_ft + panelHeight_ft);
}

// --- Calculate Totals (in feet) ---
const wasteAmount_ft = baseLinearFeet * (wasteFactor / 100);
const totalLinearFeet = baseLinearFeet + wasteAmount_ft;
const totalPieces = Math.ceil(totalLinearFeet / pieceLength_ft);
const totalCost = totalLinearFeet * (isMetric ? (costPerUnit / CONV.FT_TO_M) : costPerUnit);

// --- Display Results ---
updateOutputs(totalLinearFeet, totalPieces, totalCost, isMetric);
}

/**
* Updates the DOM with the calculated results.
* @param {number} totalLinearFeet - Total footage (imperial)
* @param {number} totalPieces - Total pieces
* @param {number} totalCost - Total cost
* @param {boolean} isMetric - Current unit state
*/
function updateOutputs(totalLinearFeet, totalPieces, totalCost, isMetric) {
let displayLength = totalLinearFeet;
let displayUnit = 'ft';

if (isMetric) {
displayLength = totalLinearFeet * CONV.FT_TO_M;
displayUnit = 'm';
}

elements.totalLinearFeet.innerHTML = `${displayLength.toFixed(2)} <span class="unit-label-ft">${displayUnit}</span>`;
elements.totalPieces.textContent = totalPieces;
elements.totalCost.textContent = fmtCurrency(totalCost);
}

/**
* Handles unit system change, updates labels, and recalculates.
*/
function handleUnitChange() {
updateUnitLabels();
calculate();
}

/**
* Handles calculator type change, updates UI, and recalculates.
*/
function handleCalcTypeChange() {
toggleCalculatorType();
calculate();
}

// --- Event Listeners ---
const allInputs = [
elements.roomWidth, elements.roomLength, elements.numPanels,
elements.panelWidth, elements.panelHeight, elements.wasteFactor,
elements.pieceLength, elements.costPerUnit
];
allInputs.forEach(input => input.addEventListener('input', calculate));

const allRadios = [
elements.calcTypePerimeter, elements.calcTypePanels,
elements.unitImperial, elements.unitMetric
];
allRadios.forEach(radio => radio.addEventListener('change', (e) => {
if (e.target.name === 'calcType') {
handleCalcTypeChange();
} else if (e.target.name === 'unitSystem') {
handleUnitChange();
}
}));

// --- Initial Setup ---
handleCalcTypeChange(); // Set initial view (Perimeter)
handleUnitChange(); // Set initial labels (Imperial)
calculate(); // Run initial calculation
});

// Mobile menu toggle logic
document.getElementById('mobile-menu-toggle').addEventListener('click', () => {
document.getElementById('mobile-menu').classList.toggle('hidden');
});
</script>
</body>
</html>